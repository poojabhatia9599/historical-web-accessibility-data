var _____WB$wombat$assign$function_____ = function(name) {return (self._wb_wombat && self._wb_wombat.local_init && self._wb_wombat.local_init(name)) || self[name]; };
if (!self.__WB_pmw) { self.__WB_pmw = function(obj) { this.__WB_source = obj; return this; } }
{
  let window = _____WB$wombat$assign$function_____("window");
  let self = _____WB$wombat$assign$function_____("self");
  let document = _____WB$wombat$assign$function_____("document");
  let location = _____WB$wombat$assign$function_____("location");
  let top = _____WB$wombat$assign$function_____("top");
  let parent = _____WB$wombat$assign$function_____("parent");
  let frames = _____WB$wombat$assign$function_____("frames");
  let opener = _____WB$wombat$assign$function_____("opener");

!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define("wafer-caas",[],t):"object"==typeof exports?exports["wafer-caas"]=t():(e.wafer=e.wafer||{},e.wafer.wafers=e.wafer.wafers||{},e.wafer.wafers["wafer-caas"]=t())}("undefined"!=typeof self?self:this,function(){return function(e){function t(r){if(a[r])return a[r].exports;var n=a[r]={i:r,l:!1,exports:{}};return e[r].call(n.exports,n,n.exports,t),n.l=!0,n.exports}var a={};return t.m=e,t.c=a,t.d=function(e,a,r){t.o(e,a)||Object.defineProperty(e,a,{configurable:!1,enumerable:!0,get:r})},t.n=function(e){var a=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(a,"a",a),a},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="https://web.archive.org/web/20230101021352/https://s.yimg.com/aaq/wf/",t(t.s="./src/entry.js")}({"./src/entry.js":function(e,t,a){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function n(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function s(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function c(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var l=window.wafer,u=l.features,f=l.utils,d=f.getUrlParameterValueByName,h=f.loadCSSSync,v=f.loadScriptAsync,w=/^https:\/\/s.yimg.com\/(os|aaq)\/c/,m=function(e,t,a){var r=new RegExp("([?&])"+t+"=.*?(&|$)","i"),n=-1!==e.indexOf("?")?"&":"?";return e.match(r)?e.replace(r,"$1"+t+"="+a+"$2"):e+n+t+"="+a},p=function(e,t,a,r){return Promise.all(e.map(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=arguments[1],i=e.data,s=void 0===i?{}:i,o=e.markup,c=s.partnerData;if(!c||!o)return r&&r(n),Promise.resolve();a&&(e.data.partnerData.groupName=a);var l=c.uuid,u={assets:t,items:[e]};return window.__waferCaasCollection.set(l,u),e}))},g=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",a=arguments[2];return new Promise(function(r){var n="sidekick"===a?"CAAS_SIDEKICK":"CAAS",i=void 0,s=!0,o=!0;window.__caasModules=window.__caasModules||{},e.forEach(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.type,a=e.asset;"js"===t&&a.value&&(s=!1),"css"===t&&(o=!1)}),e.forEach(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=e.type,c=e.asset;i=(void 0===c?{}:c).value,w.test(i)&&("js"===a?v({src:i},function(){s=!0,o&&r()},n):"css"===a&&(window.__caasModules[n]?(o=!0,s&&r()):(window.__caasModules[n]=!0,h({src:i,text:t},function(){o=!0,s&&r()}))))})})},y=function(e){var t=[],a=window.wafer.base.colorSchema;u.isPWA&&t.push("pwa"),a&&t.push("darkmode");var r=t.join(",");if(r){var n=d("features",e);e=n?m(e,"features",n+","+r):e+"&features="+r}return e},_=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(e[r]=a[r])}return e},b=function(){function e(e,t){var a=[],r=!0,n=!1,i=void 0;try{for(var s,o=e[Symbol.iterator]();!(r=(s=o.next()).done)&&(a.push(s.value),!t||a.length!==t);r=!0);}catch(e){n=!0,i=e}finally{try{!r&&o.return&&o.return()}finally{if(n)throw i}}return a}return function(t,a){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,a);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),C=function(){function e(e,t){for(var a=0;a<t.length;a++){var r=t[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,a,r){return a&&e(t.prototype,a),r&&e(t,r),t}}(),k=window.wafer,E=k.base,A=k.constants,P=k.utils,I=k.WaferBaseClass,S=A.ATTR_PREFIX,T=P.clearAndSetInnerHTML,O=P.clearTimeout,N=P.convertNodeListToArray,L=P.fetchWithCache,j=P.getConfigFromJSONScriptNode,V=P.getUrlParameterValueByName,x=P.setTimeout,W=["caas-collapsed","caas-url","caas-uuid"],D={},M=function(e){function t(e){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=a.caasConfig,s=a.errorClass,o=a.selector,c=a.successClass;r(this,t);var l=n(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,{errorClass:s,selector:o,successClass:c},{STATE_ATTRS:W})),u=e.getAttribute(S+"caas-cache"),f=e.getAttribute(S+"caas-collapsed"),d=e.getAttribute(S+"caas-url"),h=e.getAttribute(S+"caas-uuid"),v=e.getAttribute(S+"caas-cache-strategy")||"cacheFirst",w=e.getAttribute(S+"caas-cache-ttl"),m=e.getAttribute("href"),p=e.getAttribute(S+"caas-prefetch"),g=e.getAttribute(S+"caas-prefetch-group"),y=e.getAttribute(S+"caas-timeout"),C=e.getAttribute(S+"caas-type")||"default",k=e.getAttribute(S+"caas-wrapper"),E=e.getAttribute(S+"caas-dependency"),A=E&&document.querySelector(E),P=(e.getAttribute(S+"caas-trigger-offset")||"").split(" "),I=b(P,2),T=I[0],O=I[1],N=e.getAttribute(S+"caas-item-count-balanced"),L=e.getAttribute(S+"caas-target"),V=L&&e.querySelector(L)||e,D=e.getAttribute(S+"caas-trigger")||"viewport";if(l._util=_({},l._util,{"caas-collapsed":null===f||void 0===f?0:Number(f),"caas-url":d,"caas-uuid":h,cache:null===u||void 0===u?1:Number(u),caasConfig:i,cacheStrategy:v,cacheTtl:null===w||void 0===w?300:Number(w),dependencyElem:A,isPrefetch:null===p||void 0===p?0:Number(p),targetElem:V,timeout:null===y||void 0===y?6e3:Number(y),elem:e,errorClass:s,href:m,offsetX:Number(O)||0,offsetY:Number(T)||0,prefetchGroup:g,selector:o,successClass:c,trigger:D,type:C,wrapper:k,isItemCountBalanced:null===N||void 0===N?0:Number(N)}),l._state={halfInView:!1,preInViewTriggered:!1,shouldPrefetchForViewport:"viewportWithPrefetch"===D,status:void 0},"sidekick"===C){var M=e.getAttribute(S+"caas-second-node"),B=M&&document.getElementById(M);B&&(l._util.secondNode=B)}else"renderedArticle"===C&&x(function(){var t=e.getElementsByClassName("wafer-caas-data")[0],a=t&&j(t);l.handleRenderedArticle(a)},0,l);return l}return i(t,e),C(t,[{key:"fetch",value:function(){var e=this,t=this._util["caas-url"],a=this._util["caas-uuid"];if(!t&&!a)return Promise.reject(new Error("uuid and url is missing"));var r=this._util,n=r.dependencyElem,i=r.successClass;if(n&&!n.classList.contains(i))return Promise.reject(new Error("dependency not yet complete"));var s=this._util.elem;if(s.classList.contains(i))return Promise.resolve(!0);var o=this._util,c=o.caasConfig,l=void 0===c?{}:c,u=o.cacheStrategy,f=o.cacheTtl,d=o.errorClass,h=o.secondNode,v=o.targetElem,w=o.timeout,m=o.type,p=a+":1:"+l.contextParams;if(0!==this._state.status){var _=!1;if(t){var C=-1===t.indexOf("?")?"?":"&";t=t+C+l.contextParams}else t=(l.caasUrl||"https://web.archive.org/web/20230101021352/https://www.yahoo.com/caas/content/article/")+"?uuid="+a+"&"+l.contextParams;return t=y(t),s.classList.add("wafer-caas-trigger-inprogress"),this._state.status=0,new Promise(function(e,r){if("default"===m){var n=window.__waferCaasCollection.get(a);if(n)return _=!0,void e(n)}var i={cache:0,cacheKey:p,cacheStrategy:u,cacheTtl:f,timeout:w},s=!0;if(-1===t.indexOf("s.yimg.com")&&(i.credentials="include"),"sidekick"===m){var o=V("uuid",t);if(o){var c=o.split(",")[0];c&&(s=!1,window.wafer.caas.getData([c]).then(function(){var a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],n=b(a,1),s=n[0],o=s||{},c=o.adMeta,l=o.wikiids,u=c.site_attribute||"";i.body=JSON.stringify({wikis:l,siteAttribute:u}),L(t,i).then(function(t){e(t)}).catch(function(e){r(e)})}))}}s&&L(t,i).then(function(t){e(t)}).catch(function(e){r(e)})}).then(function(e){var t=e.assets;if(!t.length)return e;if("sidekick"!==m&&window.CAAS)return e;var a=e.style,r=D[m];return r?r.then(function(){return e}):(D[m]=g(t,a,m).then(function(){return e}),D[m])}).then(function(r){var n=m.length?m[0].toUpperCase()+m.slice(1):"",o=e["handle"+n],c=r._fetchMeta||{},l=c.duration,u=c.source;E.destroy(s,{destroySelf:!1});var f=void 0;if("default"===m){var d=r||{},w=d.assets,p=d.items,g=void 0===p?[]:p,y={};g.length>1?g.some(function(e){return((e||{}).data||{}).partnerData.uuid===a&&(y=e,!0)}):y=g[0],f=(y||{}).markup,T(v,f),f&&!_&&window.__waferCaasCollection.set(a,{assets:w,items:[y]})}else if("sidekick"===m)if(f=r.markup,h){var b=e._util.isItemCountBalanced,C=document.createElement("div"),k=document.createElement("div");C.innerHTML=f,k.innerHTML=f;for(var A=N(C.getElementsByClassName("sidekick-item")),P=A.length,I=Math.round(P/2)+ +!b,S=I;S<P;S++){var O=A[S].parentNode;O.parentNode.removeChild(O)}T(v,C.innerHTML);for(var L=N(k.getElementsByClassName("sidekick-item")),j=0;j<I;j++){var V=L[j].parentNode;V.parentNode.removeChild(V)}v.innerHTML=C.innerHTML,T(h,k.innerHTML)}else T(v,f);if(e._util["caas-collapsed"]){var x=N(v.getElementsByClassName("caas-body-wrapper"))[0];x&&x.classList.add("caas-body-collapsed")}if(o&&o.call(e,s,r),s.classList.remove("wafer-caas-trigger-inprogress"),s.classList.add(i),E.emitLog({name:"WaferCaas",elem:s,meta:{duration:l,source:_?"MEMORY":u,url:t}}),"default"===m){var W=r.items[0].data.partnerData;E.emitWaferEvent("caas:article:fetch",{elem:s,meta:{data:W,url:t}})}return!0}).catch(function(r){return E.emitWaferEvent("caas:"+("default"===m?"article":m)+":error",{elem:s,meta:{url:t,uuid:a},stack:r.stack||r.message}),s.classList.remove("wafer-caas-trigger-inprogress"),s.classList.add(d),s.classList.remove(i),E.destroy(s),e._state.status=2,!1})}return Promise.resolve(!1)}},{key:"handleSidekick",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=this._util,r=a["caas-url"],n=a.elem,i=a.secondNode;if(!t.markup)return void E.emitWaferEvent("caas:sidekick:error",{elem:n,meta:{url:r}});E.emitWaferEvent("caas:sidekick:init",{elem:n,meta:{url:r}}),this._state.status=1,E.sync(e),i&&E.sync(i)}},{key:"handleRenderedArticle",value:function(e){var t=this._util,a=t["caas-uuid"],r=t.elem,n=t.successClass,i=t.targetElem;if(window.__waferCaasCollection.set(a,{items:[{data:{partnerData:_({},e,{uuid:a})}}]}),this.handleDefault(r),this._util["caas-collapsed"]){var s=N(i.getElementsByClassName("caas-body-wrapper"))[0];s&&s.classList.add("caas-body-collapsed")}r.classList.add(n),E.emitLog({name:"WaferCaas",elem:r,meta:{}})}},{key:"handleDefault",value:function(e){var t=this;if(!this._destroyed){var a=this._util,r=a["caas-uuid"],n=a.elem,i=a.type,s=window.__waferCaasCollection.get(r)||{},o=s.items,c=void 0===o?[]:o,l=b(c,1),u=l[0];u=void 0===u?{}:u;var f=u.data,d=u.markup;if(!("renderedArticle"===i||d&&f))return void E.emitWaferEvent("caas:article:error",{elem:n,meta:{hasData:!!f,hasMarkup:!!d,uuid:r}});var h=f.partnerData;if(window._caasInstance)x(function(){t._destroyed||(window._caasInstance.sync(),E.sync(e))},window.__waferCaasRenderInProgress?300:0,this);else{var v=this._util.wrapper;window.wafer.base.pauseVideo("wafer-caas"),window._caasInstance=new window.CAAS.BASE({container:v}),this.handleColorSchemaChange(),window._caasInstance.on("yvideo:scriptLoadingError",function(e){E.emitError({name:"WaferCaas",elem:null,meta:{message:"Could not load js"},stack:e.stack||e.message})}),window._caasInstance.on("link:clicked",function(e){if(e.isYahoo){var a=t._util.caasConfig,i=void 0===a?{}:a,s=i.contextParams,o=void 0===s?{}:s,c=(i.caasUrl||"https://web.archive.org/web/20230101021352/https://www.yahoo.com/caas/content/article/")+"?url="+e.href+"&"+o;return E.emitWaferEvent("caas:yahooLink:clicked",{elem:n,meta:{data:e,instance:window._caasInstance}}),L(c,{timeout:2e3}).then(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.items,a=void 0===t?[]:t,r=e.assets;return p(a,r)}).then(function(t){var a=b(t,1),i=a[0];i=void 0===i?{}:i;var s=i.data,o=s.partnerData,c=void 0===o?{}:o,l=c.uuid;E.emitWaferEvent("caas:yahooLink:fetched",{elem:n,meta:{data:Object.assign({},e,{parentUuid:r,uuid:l}),instance:window._caasInstance}})}).catch(function(){E.emitWaferEvent("caas:link:clicked",{elem:n,meta:{data:e,instance:window._caasInstance}})})}E.emitWaferEvent("caas:link:clicked",{elem:n,meta:{data:e,instance:window._caasInstance}})}),this._state.status=1,E.emitWaferEvent("caas:article:init",{elem:n,meta:{data:h,instance:window._caasInstance}}),E.sync(e)}window.__waferCaasRenderInProgress=!0,O(window.__waferCaasRenderInProgressTimeout),window.__waferCaasRenderInProgressTimeout=x(function(){window.__waferCaasRenderInProgress=!1},300,this),this._state.status=1}}},{key:"handleArticleViewEvent",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"inview";if("pre:inview"===e){if(this._state.preInViewTriggered)return;this._state.preInViewTriggered=!0}else if("half:inview"===e){if(this._state.halfInView)return;this._state.halfInView=!0}else if("half:not:inview"===e){if(!this._state.halfInView)return;this._state.halfInView=!1}else"inview"===e&&(this._state.halfInView=!1);var t=this._util,a=t.elem,r=t.type,n=t["caas-uuid"],i=window.__waferCaasCollection.get(n)||{},s=i.items,o=void 0===s?[]:s,c=b(o,1),l=c[0];l=void 0===l?{}:l;var u=l.data,f=l.markup;if("renderedArticle"===r||f&&u){var d=u.partnerData;E.emitWaferEvent("caas:article:"+e,{elem:a,meta:{data:d,instance:window._caasInstance}})}}},{key:"handleColorSchemaChange",value:function(){var e=window._caasInstance;if(e){var t=window.wafer.base.colorSchema,a=void 0;a="dark"===t?e.componentShouldSwitchToDarkmode:e.componentShouldSwitchToLightmode,a&&a.call(e)}}},{key:"stateDidUpdate",value:function(){if("caas-collapsed"!==(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).stateAttr)"stateChange"===this._util.trigger&&this.fetch().catch(function(){});else{if(!this._util.targetElem)return;if(this._util["caas-collapsed"]=Number(this._util["caas-collapsed"]),this._util["caas-collapsed"]){var e=N(this._util.targetElem.getElementsByClassName("caas-body-wrapper"))[0];e&&e.classList.add("caas-body-collapsed")}}}},{key:"config",get:function(){var e=this._util,t=e["caas-url"],a=e["caas-uuid"],r=e.caasConfig,n=e.elem,i=e.href,s=e.isPrefetch,o=e.offsetX,c=e.offsetY,l=e.prefetchGroup,u=e.selector,f=e.trigger,d=e.type;return{caasConfig:r,elem:n,href:i,isPrefetch:s,offsetX:o,offsetY:c,prefetchGroup:l,selector:u,shouldPrefetchForViewport:this._state.shouldPrefetchForViewport,trigger:f,type:d,url:t,uuid:a}}},{key:"shouldPrefetchForViewport",set:function(e){this._state.shouldPrefetchForViewport=e}}]),t}(I),B=M,R=function(){function e(e,t){var a=[],r=!0,n=!1,i=void 0;try{for(var s,o=e[Symbol.iterator]();!(r=(s=o.next()).done)&&(a.push(s.value),!t||a.length!==t);r=!0);}catch(e){n=!0,i=e}finally{try{!r&&o.return&&o.return()}finally{if(n)throw i}}return a}return function(t,a){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,a);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),F=function(){function e(e,t){for(var a=0;a<t.length;a++){var r=t[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,a,r){return a&&e(t.prototype,a),r&&e(t,r),t}}(),U=window.wafer,Y=U.base,H=U.utils,X=H.elementInView,q=H.fetchWithCache,G=H.getConfigFromJSONScriptNode,J=H.getWaferInstanceForElem,K=H.throttle,$=void 0,z=window.wafer.controllers.WaferBaseController;window.__waferCaasCollection=function(){var e=[],t=new Map,a={};return{set:function(a,r){e.push(a),t.set(a,r)},get:function(e){return a[e]=!0,t.get(e)},clearVisitedNodes:function(){a={}}}}();var Q=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=e.errorClass,r=void 0===a?"wafer-caas-error":a,n=e.root,i=void 0===n?document:n,c=e.selector,l=e.successClass,u=void 0===l?"wafer-caas-complete":l,f=e.validateDelay,d=void 0===f?10:f;s(this,t);var h=G(document.getElementById("wafer-caas-config"));if(h.caasUrl){var v=location,w=v.hostname,m=v.port,p=v.protocol;"localhost"===w||"4443"===m||"https:"!==p||h.mock||(h.caasUrl="/caas/content/article/")}var g=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,{root:i,selector:c,props:{caasConfig:h,errorClass:r,selector:c,successClass:u},WaferClass:B}));return g._validateWithThrottle=K(function(){for(var e=arguments.length,t=Array(e),a=0;a<e;a++)t[a]=arguments[a];g.validate.apply(g,t)},d,g),g._state=g._state||{},g._state.lastScrollTop=0,g._state.progressLoader=null,g.sync(),g.addPublicAPIs(h),g}return c(t,e),F(t,[{key:"addPublicAPIs",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.contextParams,a=void 0===t?{}:t;window.wafer.caas||(window.wafer.caas={getData:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return Promise.all(e.map(function(e){return new Promise(function(t){var r=window.__waferCaasCollection.get(e);if(r){var n=R(r.items,1),i=n[0].data;return t((void 0===i?{}:i).partnerData||{})}if(!window.wafer.db)return t({});window.wafer.db.get(e+":1:"+a,"fetch",{timeout:3e3}).then(function(e){try{var a=JSON.parse(e.value),r=a.items,n=R(r,1),i=n[0].data;return t((void 0===i?{}:i).partnerData||{})}catch(e){return t({})}}).catch(function(e){t({})})})}))}})}},{key:"prefetch",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";if(!window.wafer.base.isBot){var t=this._state.elementInstances,a={},r=[],n=[],i={},s=void 0,o=void 0,c=void 0,l=0,u=0,f=!0,d=!1,h=void 0;try{for(var v,w=t.values()[Symbol.iterator]();!(f=(v=w.next()).done);f=!0){var m=v.value;r[l]=r[l]||[];var _=m.instance,b=_.config,C=b.caasConfig,k=void 0===C?{}:C,E=b.elem,A=b.href,P=b.isPrefetch,I=b.prefetchGroup,S=b.shouldPrefetchForViewport,T=b.uuid;if(c=c||k.caasUrl,o=o||k.contextParams||"",I){if(!e){i[I]=!0;continue}if(I!==e)continue;o=k[I+"ContextParams"]||o}if((P||S)&&T){var O=a[T]||!!window.__waferCaasCollection.get(T);!O&&r[l].push({href:A,uuid:T}),a[T]=!0,S?(E.classList.add("did-prefetch"),_.shouldPrefetchForViewport=!1):_.destroy(),!O&&++u>=10&&(u=0,l++)}}}catch(e){d=!0,h=e}finally{try{!f&&w.return&&w.return()}finally{if(d)throw h}}for(var N in i)i.hasOwnProperty(N)&&this.prefetch(N);return Promise.all(r.map(function(t){var a=t.map(function(){return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).uuid});if(a.length)return s=(c||"https://web.archive.org/web/20230101021352/https://www.yahoo.com/caas/content/article/")+"?uuid="+a.join(",")+"&"+o,s=y(s),q(s,{cache:0,timeout:8e3}).then(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.assets,a=e.items,r=void 0===a?[]:a,n={items:r,assets:t};return window.CAAS?n:($=$||g(t,"","default")).then(function(){return n})}).then(function(){var a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=a.assets,i=a.items;return p(void 0===i?[]:i,r,e,function(e){var a=t[e].href;a&&n.push(a)})})})).then(function(){if(n.length)return Promise.all(n.map(function(t){return q((c||"https://web.archive.org/web/20230101021352/https://www.yahoo.com/caas/content/article/")+"?url="+t+"&"+o,{cache:0}).then(function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=t.items,r=void 0===a?[]:a,n=t.assets;return p(r,n,e)})}))}).then(function(){Y.emitWaferEvent("caas:prefetch:success",{meta:{url:s}})}).catch(function(){Y.emitWaferEvent("caas:prefetch:failed",{meta:{url:s}})})}}},{key:"_handleArticleInView",value:function(e,t){if(this._state.activeElem!==t){var a=this._state.progressLoader;a&&!a._destroyed||(this._state.progressLoader=J(document.getElementsByClassName("wafer-caas-progress-loader")[0],"wafer-progress-loader")),a=this._state.progressLoader,a&&(a.instance.target=t),e.handleArticleViewEvent(),this._state.activeElem=t}}},{key:"handleScroll",value:function(){var e=window.pageYOffset||document.documentElement.scrollTop,t=1;t=e>this._state.lastScrollTop?1:0,this._state.lastScrollTop=e<=0?0:e,this._validateWithThrottle({scrollDirection:t})}},{key:"handleResize",value:function(){this._validateWithThrottle()}},{key:"didSync",value:function(){var e=this,t=this._state,a=t.elementInstances,r=t.mounted;0===a.size||r||(this._state.mounted=!0),setTimeout(function(){e.prefetch()},10)}},{key:"trigger",value:function(e){var t=this._state.elementInstances.get(e);if(t){var a=t.instance;if("renderedArticle"===a.config.type)return;a.fetch()}}},{key:"handleColorSchemaChange",value:function(){if(this._state&&this._state.mounted){var e=this._state.elementInstances,t=!0,a=!1,r=void 0;try{for(var n,i=e.values()[Symbol.iterator]();!(t=(n=i.next()).done);t=!0){n.value.instance.handleColorSchemaChange()}}catch(e){a=!0,r=e}finally{try{!t&&i.return&&i.return()}finally{if(a)throw r}}}}},{key:"willValidate",value:function(e){var t=this,a=this._state.elementInstances;e.forEach(function(e){var r=a.get(e),n=r.instance;if(!n.config.isPrefetch){var i=n.config,s=i.offsetX,o=i.offsetY,c=i.selector,l=i.trigger,u=i.type,f=X(e,{offsetX:s,offsetY:o},Y.viewport);if("renderedArticle"!==u)switch(l){case"viewport":case"viewportWithPrefetch":1!==n._state.status&&f&&n.fetch().then(function(t){t&&c&&e.classList.remove(c.replace(".",""))}).catch(function(){});break;case"onLoad":n.fetch().then(function(t){t&&c&&e.classList.remove(c.replace(".",""))}).catch(function(){})}var d=!1;if(f){(d=1===n._state.status&&("default"===u||"renderedArticle"===u))&&n.handleArticleViewEvent("pre:inview");var h=t._state.activeElem;if(h===e){if(d){var v=h.getBoundingClientRect(),w=v.top,m=w+h.offsetHeight/2+document.documentElement.scrollTop;window.scrollY>=m?n.handleArticleViewEvent("half:inview"):n.handleArticleViewEvent("half:not:inview")}return}}t._state.activeElem&&X(t._state.activeElem,{offsetX:s,offsetY:o},Y.viewport)||d&&t._handleArticleInView(n,e)}})}},{key:"didDestroy",value:function(){var e=!0,t=this._state.elementInstances,a=!0,r=!1,n=void 0;try{for(var i,s=t.values()[Symbol.iterator]();!(a=(i=s.next()).done);a=!0){var o=i.value,c=o.instance.config,l=c.isPrefetch;if("default"===c.type&&!l){e=!1;break}}}catch(e){r=!0,n=e}finally{try{!a&&s.return&&s.return()}finally{if(r)throw n}}e&&(window._caasInstance&&(window._caasInstance.destructor(),window._caasInstance=null,window.__waferCaasCollection.clearVisitedNodes()),window.wafer.base.resumeVideo("wafer-caas"))}}]),t}(z),Z=Q;t.default=new Z({selector:"wafer-caas"})}})});

}
/*
     FILE ARCHIVED ON 02:13:52 Jan 01, 2023 AND RETRIEVED FROM THE
     INTERNET ARCHIVE ON 12:02:13 Jan 24, 2024.
     JAVASCRIPT APPENDED BY WAYBACK MACHINE, COPYRIGHT INTERNET ARCHIVE.

     ALL OTHER CONTENT MAY ALSO BE PROTECTED BY COPYRIGHT (17 U.S.C.
     SECTION 108(a)(3)).
*/
/*
playback timings (ms):
  exclusion.robots: 0.083
  exclusion.robots.policy: 0.064
  cdx.remote: 0.143
  esindex: 0.02
  LoadShardBlock: 164.321 (6)
  PetaboxLoader3.datanode: 181.292 (8)
  load_resource: 8434.461 (2)
  PetaboxLoader3.resolve: 8360.385 (2)
*/