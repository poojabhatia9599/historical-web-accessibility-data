var _____WB$wombat$assign$function_____ = function(name) {return (self._wb_wombat && self._wb_wombat.local_init && self._wb_wombat.local_init(name)) || self[name]; };
if (!self.__WB_pmw) { self.__WB_pmw = function(obj) { this.__WB_source = obj; return this; } }
{
  let window = _____WB$wombat$assign$function_____("window");
  let self = _____WB$wombat$assign$function_____("self");
  let document = _____WB$wombat$assign$function_____("document");
  let location = _____WB$wombat$assign$function_____("location");
  let top = _____WB$wombat$assign$function_____("top");
  let parent = _____WB$wombat$assign$function_____("parent");
  let frames = _____WB$wombat$assign$function_____("frames");
  let opener = _____WB$wombat$assign$function_____("opener");

!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define("wafer-action",[],e):"object"==typeof exports?exports["wafer-action"]=e():(t.wafer=t.wafer||{},t.wafer.wafers=t.wafer.wafers||{},t.wafer.wafers["wafer-action"]=e())}("undefined"!=typeof self?self:this,function(){return function(t){function e(o){if(r[o])return r[o].exports;var a=r[o]={i:o,l:!1,exports:{}};return t[o].call(a.exports,a,a.exports,e),a.l=!0,a.exports}var r={};return e.m=t,e.c=r,e.d=function(t,r,o){e.o(t,r)||Object.defineProperty(t,r,{configurable:!1,enumerable:!0,get:o})},e.n=function(t){var r=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(r,"a",r),r},e.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},e.p="https://web.archive.org/web/20230101002611/https://s.yimg.com/aaq/wf/",e(e.s="./src/entry.js")}({"./src/entry.js":function(t,e,r){"use strict";function o(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function a(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function n(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}function s(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function c(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function u(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var l=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(t[o]=r[o])}return t},p=function(){function t(t,e){var r=[],o=!0,a=!1,i=void 0;try{for(var n,s=t[Symbol.iterator]();!(o=(n=s.next()).done)&&(r.push(n.value),!e||r.length!==e);o=!0);}catch(t){a=!0,i=t}finally{try{!o&&s.return&&s.return()}finally{if(a)throw i}}return r}return function(e,r){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return t(e,r);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),d=function(){function t(t,e){for(var r=0;r<e.length;r++){var o=e[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(e,r,o){return r&&t(e.prototype,r),o&&t(e,o),e}}(),f=[],b=window.wafer,m=b.constants,v=b.features,y=b.utils,h=b.WaferBaseClass,g=m.ATTR_PREFIX,k=y.bindEvent,w=y.fetchWithCache,_=y.findAncestor,T=y.getTemplateContent,S=y.getWaferInstanceForElem,A=["handleClick"],E="wafer-action-is-true",P={block:-1,unblock:0},O="publisher",L={},I=function(t){function e(t){var r,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},s=n.appId,c=n.actionHost,u=n.bookmarkActionHost,d=n.crumb,b=n.id,m=n.name,v=n.providerBrandProperty,y=n.selector,h=n.shouldSaveToStorage,k=n.subType,w=n.type;a(this,e);var S=i(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t,{selector:y},{STATE_ATTRS:f}));s=t.getAttribute(g+"app-id")||s,d=t.getAttribute(g+"crumb")||d;var P=t.getAttribute(g+"action-type")||w||"follow",L=t.getAttribute(g+"action-api-path"),I=t.getAttribute(g+"action-sub-type")||k,j=t.getAttribute(g+"action-sub-type-category")||"",B=t.getAttribute(g+"action-id")||b,C=t.getAttribute(g+"action-label"),H=t.getAttribute(g+"action-ylk"),D=t.getAttribute(g+"action-name")||m,x=C&&C.split("|")||[],R=p(x,2),M=R[0],N=R[1],Y=H&&H.split("|")||[],F=p(Y,2),W=F[0],J=F[1],K=t.getAttribute(g+"action-title")||"",U=t.getAttribute(g+"action-boundary"),q=t.getAttribute(g+"action-on-template"),X=t.getAttribute(g+"action-off-template"),V=t.getAttribute(g+"action-error-template"),z=t.getAttribute(g+"action-template-target"),G=Number(t.getAttribute(g+"action-template-animation-duration")),Q=t.getAttribute("data-ylk"),Z=q&&T(document.getElementById(q)),$=X&&T(document.getElementById(X)),tt=V&&T(document.getElementById(V)),et=z&&document.getElementById(z),rt={follow:c+"api/v3/topics?appId="+s,block:c+"api/v1/content/feedback/"+(I===O?O:"entities")+"?appId="+s,blockProvider:c+"api/v1/providerbrands/block/providers/"+B+"?appId="+s,unblockProviderBrand:c+"api/v1/providerbrands/block?appId="+s},ot=L||rt[P],at=U&&_(t,U);return S._util=l({},S._util,(r={actionErrorTemplate:tt,actionHost:c,actionOffTemplate:$,actionOnTemplate:Z,actionTemplateDuration:G,apiPath:ot,appId:s,bookmarkActionHost:u,boundaryElem:at,crumb:d,elem:t,falseLabel:N,falseYlk:J,id:B,mappingId:B+P+I+j,providerBrandProperty:v,subType:I,subTypeCategory:j,templateTargetElem:et,shouldSaveToStorage:void 0===h?void 0:!!h,name:D},o(r,"subType",I),o(r,"title",K),o(r,"trueLabel",M),o(r,"trueYlk",W),o(r,"type",P),o(r,"ylk",Q),r)),A.forEach(function(t){S[t]=S[t].bind(S)}),S._state={actionStatus:!1,inProgress:!1},t.classList.add("has-action-click","has-wafer-click"),setTimeout(function(){S.setActionStatus(t.classList.contains(E))},0),S}return n(e,t),d(e,[{key:"renderActionTemplate",value:function(t){var e=t.type,r=void 0;if(this.updateAriaLiveRegion({type:e}),"error"===e){r=this._util.actionErrorTemplate}else if(this._state.actionStatus){var o=this._util.actionOnTemplate;r=o}else{var a=this._util.actionOffTemplate;r=a}if(r){var i=this._util,n=i.actionTemplateDuration,s=i.templateTargetElem,c=document.createElement("div");c.innerHTML=r;var u=c.children[0],l=u.getElementsByClassName("close")[0];s&&(s.innerHTML=""),(s||document.body).appendChild(u),l&&k(u,"click",function(t){t.preventDefault(),u.classList.add("animation-disappear-start"),setTimeout(function(){u.classList.add("animation-disappear-end"),u.parentNode.removeChild(u)},n)},{passive:!1}),n&&(u.classList.add("animation-appear-start"),setTimeout(function(){u.classList.add("animation-appear-end")},n))}}},{key:"statusDidUpdate",value:function(t){var e=this._util.elem;if(e){var r=this._util,o=r.falseLabel,a=r.falseYlk,i=r.trueLabel,n=r.trueYlk,s=r.ylk;this._state.actionStatus=t,t?(a&&e.setAttribute("data-ylk",s+";"+n),o&&e.setAttribute("title",o),e.classList.add(E)):(n&&e.setAttribute("data-ylk",s+";"+a),i&&e.setAttribute("title",i),e.classList.remove(E))}}},{key:"saveToStorage",value:function(){if(v.localStorage){var t=this._util,r=t.id,o=t.name,a=void 0===o?"":o,i=t.subType,n=t.type,s=Date.now()+9e5;return window.localStorage.setItem(e.LS_KEY,JSON.stringify({id:r,name:a,subType:i,ttl:s,type:n})),Promise.resolve()}}},{key:"triggerTopicAction",value:function(t){var e=this._util,r=e.appId,a=e.actionHost,i=e.bookmarkActionHost,n=e.id,s=e.name,c=e.providerBrandProperty,u=e.shouldSaveToStorage,l=e.subType,p=e.subTypeCategory,d=e.title,f=e.type,b=this._util.apiPath,m={follow:this._state.actionStatus?"PUT":"DELETE",block:"POST",blockProvider:this._state.actionStatus?"PUT":"DELETE",bookmark:this._state.actionStatus?"POST":"DELETE",urlBookmark:"DELETE",unblockProviderBrand:"POST"},v=m[f],y=void 0,h=void 0;return"follow"===f?(y={types:o({},l,[{id:n}])},h={Crumb:t},"provider"===l&&(y.types[l][0].type=p||"PROVIDER")):"block"===f?(y={entities:[{entity_id:n,entity_type:l,score:P[this._state.actionStatus?"block":"unblock"]}]},h={Crumb:t},l===O&&(y.entities[0].entity_name=s)):"blockProvider"===f?(y={property:c},h={Crumb:t}):"unblockProviderBrand"===f?(y={brands:[{id:n}]},h={Crumb:t}):"bookmark"===f?("DELETE"===v?b=i+"api/v1/user/bookmarks/"+l+"/"+n+"?appId="+r:(b=i+"api/v1/user/bookmarks/"+l+"?appId="+r,y={contentId:n,title:d}),h={"X-CSRF-Token":t}):"urlBookmark"===f?(b="deleteFolder"===l?a+"api/v1/bookmarks/folders/"+n+"?appId="+r:a+"api/v1/bookmarks/items/"+n+"?appId="+r,h={Crumb:t}):"location"===f&&(y={requests:{g0:{resource:"WeatherLocationService.favoriteLocation",operation:this._state.actionStatus?"create":"delete",params:{woeid:n}}}}),u?this.saveToStorage():w(b,{body:JSON.stringify(y),cache:0,clientHeaders:h,credentials:"include",method:v,mode:"cors"})}},{key:"getCrumb",value:function(){var t=this._util,e=t.appId,r=t.actionHost,o=t.bookmarkActionHost,a=t.shouldSaveToStorage,i=t.type;if("location"===i)return Promise.resolve({});var n=this._util.crumb||L[i];if(n||a)return new Promise(function(t){t(n||"")});var s=void 0;return s="bookmark"===i?o+"api/v1/auth/crumb?appId="+e:r+"api/v1/auth/crumb?appId="+e,w(s,{cache:0,credentials:"include",mode:"cors"}).then(function(t){var e=t.crumb;if(L[i]=e,!e)throw new Error("crumb not found");return e})}},{key:"trigger",value:function(t){var e=this,r=this._util.type;if(t){var o=t.crumb;o&&(L[r]=o),this._util=l({},this._util,t)}var a=this._util,i=a.elem,n=a.boundaryElem,s=a.name,c=this._state.actionStatus;this._state.inProgress=!0,n&&n.classList.add("wafer-action-in-progress"),c?this.setActionStatus(!1):this.setActionStatus(!0),this.getCrumb().then(function(t){return e.triggerTopicAction(t)}).then(function(t){var r=t||{},o=r.result,a=void 0===o?{}:o,c=a.success,u=void 0===c?{}:c,p=u.entities,d=void 0===p?[]:p,f=e._util,b=f.id,m=f.subType,v=f.type,y={id:b,name:s,subType:m,type:v};if("blockProvider"===v||"unblockProviderBrand"===v){var h=t.data;h=void 0===h?{}:h;var k=h.currentBlocked;void 0!==k&&(y=l({currentBlocked:k+""},y))}var w="follow"===v&&d.some(function(t){return t.id===b}),_=("block"===v||"blockProvider"===v||"unblockProviderBrand"===v)&&(null!==t&&t===Object(t)),T="bookmark"===v&&(null!==t&&t===Object(t)),A="urlBookmark"===v&&(null!==t&&t===Object(t)),E=void 0;if("follow"===v)E=w;else if("block"===v||"blockProvider"===v||"unblockProviderBrand"===v)E=_;else if("urlBookmark"===v)E=A;else if("location"===v){var P=e._util.locationAssistTargetElem;if(!P){var O=i.getAttribute(g+"action-location-assist-target");O&&(P=e._util.locationAssistTargetElem=document.querySelector(O))}if(P){var L=S(P,"wafer-autocomplete");L&&L.instance._instance.fetchAndRenderSavedLocations()}E=!0}else E=T;if(!E)throw n&&(n.classList.add("wafer-action-boundary-error"),n.classList.remove("wafer-action-boundary-success","wafer-action-in-progress")),new Error("action failed");n&&(n.classList.add("wafer-action-boundary-success"),n.classList.remove("wafer-action-boundary-error","wafer-action-in-progress")),e.renderActionTemplate({type:"success"}),e._state.inProgress=!1,e.didComplete(null,y)}).catch(function(){e._state.inProgress=!1,n&&(n.classList.remove("wafer-action-in-progress","wafer-action-boundary-success"),n.classList.add("wafer-action-boundary-error")),e._state.actionStatus=!e._state.actionStatus,e.renderActionTemplate({type:"error"}),e.setActionStatus(e._state.actionStatus)})}},{key:"handleClick",value:function(t){t.preventDefault(),this._state.inProgress||this.trigger()}}]),e}(h);I.events={click:[["has-action-click","handleClick"]]},I.LS_KEY=g+"action-storage";var j=I,B=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(t[o]=r[o])}return t},C=function(){function t(t,e){for(var r=0;r<e.length;r++){var o=e[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(e,r,o){return r&&t(e.prototype,r),o&&t(e,o),e}}(),H=window.wafer,D=H.base,x=H.controllers,R=H.features,M=H.utils,N=x.WaferBaseController,Y=M.getConfigFromJSONScriptNode,F=function(t){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=t.root,o=void 0===r?document:r,a=t.selector;s(this,e);var i=Y(document.getElementById("wafer-action-config")),n=i.actionHost,u=i.appId,l=i.bookmarkActionHost,p=i.crumb,d=i.providerBrandProperty,f=i.shouldSaveToStorage,b=c(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,{root:o,selector:a,props:{actionHost:n,appId:u,bookmarkActionHost:l,crumb:p,providerBrandProperty:d,shouldSaveToStorage:f,selector:a},WaferClass:j})),m=b;return b.sync(),b._state=B({},b._state,{idInstanceMapping:new Map}),j.prototype.setActionStatus=function(t){var e=this._util.mappingId,r=m._state.idInstanceMapping;r.has(e)||r.set(e,[]),r.get(e).push(this),r.get(e).forEach(function(e){e.statusDidUpdate(t)})},R.localStorage&&setTimeout(function(){b.processStoredAction(i,a)},1),j.prototype.updateAriaLiveRegion=function(t){var e=t.type,r=this._state.actionStatus,o=this._util.type,a="success"===e?r?"True":"False":"Error",n=i[""+o+a+"Message"];n&&(D.liveAriaRegion.innerHTML=n)},b}return u(e,t),C(e,[{key:"processStoredAction",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";if(t.shouldProcessState){var r=t.actionHost,o=t.appId,a=t.bookmarkActionHost,i=t.crumb,n=t.providerBrandProperty,s=window.localStorage.getItem(j.LS_KEY);if(s){var c=document.createElement("div"),u={actionHost:r,appId:o,bookmarkActionHost:a,crumb:i,providerBrandProperty:n,selector:e};try{var l=JSON.parse(s),p=l.id,d=l.name,f=l.ttl,b=void 0===f?0:f,m=l.subType,v=l.type;b&&b>=Date.now()&&v&&m&&p&&(c.setAttribute("data-wf-on","complete:setState:wfAction.entity."+v),new j(c,Object.assign({},u,{id:p,name:d,subType:m,type:v})).trigger(B({},u,{id:p,name:d,subType:m,type:v})))}catch(t){}window.localStorage.removeItem(j.LS_KEY)}}}}]),e}(N),W=F;e.default=new W({selector:".wafer-action"})}})});

}
/*
     FILE ARCHIVED ON 00:26:11 Jan 01, 2023 AND RETRIEVED FROM THE
     INTERNET ARCHIVE ON 12:02:24 Jan 24, 2024.
     JAVASCRIPT APPENDED BY WAYBACK MACHINE, COPYRIGHT INTERNET ARCHIVE.

     ALL OTHER CONTENT MAY ALSO BE PROTECTED BY COPYRIGHT (17 U.S.C.
     SECTION 108(a)(3)).
*/
/*
playback timings (ms):
  exclusion.robots: 0.074
  exclusion.robots.policy: 0.064
  cdx.remote: 0.122
  esindex: 0.012
  LoadShardBlock: 261.628 (6)
  PetaboxLoader3.datanode: 143.925 (8)
  load_resource: 162.012 (2)
  PetaboxLoader3.resolve: 88.299 (2)
*/