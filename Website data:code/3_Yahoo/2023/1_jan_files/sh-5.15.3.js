var _____WB$wombat$assign$function_____ = function(name) {return (self._wb_wombat && self._wb_wombat.local_init && self._wb_wombat.local_init(name)) || self[name]; };
if (!self.__WB_pmw) { self.__WB_pmw = function(obj) { this.__WB_source = obj; return this; } }
{
  let window = _____WB$wombat$assign$function_____("window");
  let self = _____WB$wombat$assign$function_____("self");
  let document = _____WB$wombat$assign$function_____("document");
  let location = _____WB$wombat$assign$function_____("location");
  let top = _____WB$wombat$assign$function_____("top");
  let parent = _____WB$wombat$assign$function_____("parent");
  let frames = _____WB$wombat$assign$function_____("frames");
  let opener = _____WB$wombat$assign$function_____("opener");

!function(){var t="BrowserSubscriptionHelper",i=["chrome","chrome mobile"],p="error",f="info",n="pushNotifications",o="undefined",r="Unsupported Browser.",u="granted",a="denied",c="subscriptions",s="type",d="push",e="display-push-promos",l="js-push-subscribe",h="rapidnofollow",b="subscriptionFail",m="Permission denied by user";function g(e,n,i){this.init(e,n,i)}if(g.prototype={init:function(e,n,i){var t=this;t.beaconer=n,t.tracker=i,t.config={appServerPubKey:e.appServerPubKey,bucket:e.bucket,confirmationNotification:e.confirmationNotification||{},enableIndexedDbDurationBeacon:e.enableIndexedDbDurationBeacon||!1,enablePermissionChangeBeacon:e.enablePermissionChangeBeacon||!1,overlay:e.overlay||{},resubscribeOnChurn:e.resubscribeOnChurn||!1,serviceWorkerScope:e.serviceWorkerScope||"/",serviceWorkerUrl:e.serviceWorkerUrl,spaceId:e.spaceId,subscriptionService:e.subscriptionService||{},supportedBrowsers:e.supportedBrowsers||{},userAgent:e.userAgent||{}},t.appServerPubKeyArr=t.urlB64ToUint8Array(e.appServerPubKey),e.delegatePromoButton&&t.addPromoButtonDelegator(),e.showPushSubscriptionPromos&&t.showPushSubscriptionPromos(),t._attachPermissionUpdateHandle(),t._resubscribeOnChurn(t._updateAttributesForSubscribedUser.bind(t))},checkIsSupportedBrowser:function(){for(var e=this.config.userAgent,n=e.browserName,i=e.browserVersion,t=e.os||e.osName,r=this.config.supportedBrowsers[n]||{},o=!1,s=!1,a=r.os&&r.os.length,c=0;c<a;c++)if(-1<t.indexOf(r.os[c])){s=!0;break}return(!r.minVersion||i>=r.minVersion)&&(!r.maxVersion||i<=r.maxVersion)&&(!r.useServiceWorker||r.useServiceWorker&&"serviceWorker"in navigator)&&s&&(o=!0),o},checkSubscriptionChurn:function(l){var p=this;p.checkIsSupportedBrowser(n)?p.fetchPushPermission(function(e,i){e||!i||i&&"granted"!==i.state?l&&l(e,{isOnboardError:null,pushManagerChurn:null},{}):p.getSubscriptionLog(function(e,n){e?l&&l(e):i&&n?function(e,n){var i=p._parseGCMSubscriptionId(n)||null,t=e.deviceId||null,r=e.subscriptionState||null,o=n&&n.error===b,s=!t&&"granted"===e.state,a=t&&"granted"===e.state&&"started"===n.onboardState&&!n.error,c=o||s||a,u="subsPushMngrResync";o?u="subsRivendellResync":a&&(u="subsFCMResync");var d=!n.churnCheckTime||n.churnCheckTime<n.subscriptionTime;if(c)return d&&p._sendBeacon(f,{code:u,deviceId:t,idbDeviceId:i,onboardTime:n.onboardTime}),l&&l(null,{isOnboardError:!0,pushManagerChurn:null},n);i&&i!==t&&"granted"===e.state?p.logSubscriptionChurnCheck(function(e){e?l&&l(e):(d&&p._sendBeacon(f,{code:"subChurn",idbDeviceId:i,deviceId:t,subscriptionState:r}),l&&l(null,{isOnboardError:!1,pushManagerChurn:!0},n))}):l&&l(null,{isOnboardError:!1,pushManagerChurn:!1},n)}(i,n):l&&l(null,{isOnboardError:!1,pushManagerChurn:!1},n)})}):l&&l(new Error(r))},_resubscribeOnChurn:function(s){var a=this;if(a.config.resubscribeOnChurn&&"undefined"!=typeof Notification&&Notification.permission===u){var c=function(e,n){e?(a._sendBeacon(p,{code:"resub",message:e}),s&&s(e)):(a.logOnboardingCompleted(),a._sendBeacon(f,{code:"resub",message:"success"}),s&&s(null,!0))};a._readEntryInDB(function(e,n){if(e)s&&s(e);else{var i=n&&n.churnCheckTime;if(i&&Date.now()-i<=6048e5)return s&&s(null,null),!1;a.checkSubscriptionChurn(function(e,n,i){var t=n.isOnboardError,r=n.pushManagerChurn;if(e||!t&&!r)s&&s(null,null);else{var o=(i=i||{}).origin||"gondor_homerun_news";a._doRegisterServiceWorker(a.config.serviceWorkerUrl,a.config.serviceWorkerScope).then(a._doPushManagerSubscribe.bind(a)).then(a._buildPermissionObjectChrome.bind(a)).then(function(e){a.setTopicSubscription(o,!0,e.deviceId,e.subscriptionKeys,{},c)}).catch(function(e){c(e)})}})}})}else s&&s(null,null)},fetchPushPermission:function(e){if(e){this.checkIsSupportedBrowser()&&-1<i.indexOf(this.config.userAgent.browserName)?this._fetchPushPermissionChrome(e):e(new Error(r,null))}},requestPushPermission:function(e,n){if(n){this.checkIsSupportedBrowser()&&(this.logOnboardingStart(),-1<i.indexOf(this.config.userAgent.browserName))?this._requestPushPermissionChrome(e,n):n(new Error(r,null))}},_fetchPushPermissionChrome:function(n){var i=this;(Notification&&Notification.permission)===u?navigator.serviceWorker.getRegistration(i.config.serviceWorkerScope).then(function(e){return e&&e.pushManager.getSubscription()}).then(i._buildPermissionObjectChrome.bind(i)).then(function(e){n(null,e)}).catch(function(e){i._sendBeacon(p,{code:"brwsrPermFetchError",message:e}),n(e)}):n(null,i._buildPermissionObjectChrome(null))},_requestPushPermissionChrome:function(e,n){var i=this,t=i.config.serviceWorkerUrl,r=i.config.serviceWorkerScope;Notification&&t&&r&&("default"===Notification.permission&&(i._trackLinkView({itc:"1",sec:e.sec,slk:"notification permission request",subsec:e.subsec}),i._sendBeacon(f,{code:"notificationPermissionRequest",message:e.sec})),Notification.requestPermission().then(function(){return i._doRegisterServiceWorker(t,r)}).then(i._doPushManagerSubscribe.bind(i)).then(i._buildPermissionObjectChrome.bind(i)).then(function(e){i._sendBeacon(f,{code:"brwsrPermReqSuccess",message:e.state}),n(null,e)}).catch(function(e){i._sendBeacon(p,{code:"brwsrPermReqError",message:e}),n(e,null)}))},_doRegisterServiceWorker:function(e,n){var i=this;return navigator.serviceWorker.register(e,{scope:n}).then(function(e){return i._sendBeacon(f,{code:"svcWkrRegSuccess"}),e},function(e){i._sendBeacon(p,{code:"svcWkrRegError",message:e})})},_doPushManagerSubscribe:function(t){var n=this;if(window.Promise&&t){if(n.appServerPubKeyArr)return new Promise(function(n,e){if(Notification&&"granted"===Notification.permission){var i=t.installing||t.waiting;i?i.addEventListener("statechange",function(e){"activated"===e.target.state&&n()}):t.active?n():e("Service Worker not active")}else e("Permission not granted")}).then(function(){return t.pushManager.subscribe({applicationServerKey:n.appServerPubKeyArr,userVisibleOnly:!0})}).then(function(e){if(!e||!e.endpoint)throw"Missing subscription endpoint";return n.logPushManagerSuccess(e.endpoint),n._sendBeacon(f,{code:"PushMngrSubSuccess",deviceId:e.endpoint}),e}).catch(function(e){n._sendBeacon(p,{code:"PushMngrSubFail",message:e}),n.logPushManagerFailure()});n._sendBeacon(p,{code:"PushMngrSubFail",message:"Push Manager subscribe called without application server key"})}},_doPushManagerUnsubscribe:function(t){var e=this;return t.pushManager.getSubscription().then(function(e){if(e)return e.unsubscribe()}).then(function(){return new Promise(function(n,i){e._setEntryInDB({onboardState:"started"},function(e){e?i("Could not unset IDB values when unsubscribing"):n(t)})})})},_buildPermissionObjectChrome:function(e){var n;return n=typeof e===o?"No_SW_registration":null===e?"No_PushManager_Subscription":"Subscription_Present",{applicationServerKey:e&&e.options&&e.options.applicationServerKey,deviceId:e&&this._parseGCMSubscriptionId(e),state:Notification&&Notification.permission,subscriptionKeys:e&&btoa(JSON.stringify(e)),subscriptionState:n}},_parseGCMSubscriptionId:function(e){var n,i;return e&&e.endpoint&&(i=(n=e.endpoint.match(/^https\:\/\/(fcm|android)\.googleapis\.com\/(gcm|fcm)\/send\/(.*)$/))&&n.length&&n[3]),i},_sendBeacon:function(e,n){var i=this;i.beaconer&&e&&n&&("function"==typeof i.beaconer?i.beaconer(e,t,n):"function"==typeof i.beaconer[e]&&i.beaconer[e](t,n))},_trackClick:function(e,n){this.tracker&&e&&e.sec&&e.slk&&typeof e._p!==o&&this.tracker.beaconClick(e.sec,e.slk,e._p,e,e.outcome,n)},_trackLinkView:function(e){this.tracker&&e&&e.sec&&e.slk&&this.tracker.beaconLinkViews([{sec:e.sec,t1:e.t1,t2:e.t2,_links:[e]}])},_attachPermissionUpdateHandle:function(e){var t=this;t.config.enablePermissionChangeBeacon?t.checkIsSupportedBrowser(n)?navigator&&navigator.permissions&&navigator.permissions.query&&navigator.permissions.query({name:"notifications"}).then(function(i){i?(i.onchange=function(){t.getSubscriptionLog(function(e,n){n||(n={}),n.code="userPermissionUpdate",n.newState=i.state,t._sendBeacon(f,n)})},e&&e(null,!0)):e&&e(null,!1)}):e&&e(new Error(r),!1):e&&e(null,null)},_convertAllOnepushTopicsToRivendell:function(e,n){var i={channel_id:(n=n||{}).subscriptionKeys,device_id:n.deviceId,registration_id:e},t=Object.assign(i,this.getEssentialAttributes());return this.callSubscriptionService({method:"POST",operation:"update",serviceResource:"subscriptions.oToR"},t),!0},_updateAttributesForSubscribedUser:function(){if(!window.indexedDB)return!1;var a=this;a._readEntryInDB(function(e,o){if(e)return!1;var n=(o=o||{}).lastAttributeUpdateTime,s=o.registrationId;if(Date.now()-n<=864e5)return!1;a.fetchPushPermission(function(e,t){if(e)return!1;var n=(t=t||{}).subscriptionKeys;if(t.state===u&&"completed"===o.onboardState&&n){var i={channel_id:n,device_id:t.deviceId};s&&(i.registration_id=s);var r=Object.assign(i,a.getEssentialAttributes());return a.callSubscriptionService({method:"POST",operation:"update",serviceResource:"subscriptions.setAttributes"},r,function(e,n){if(!e){n=n||{},s=s||n.registrationId||n.g0&&n.g0.data&&n.g0.data.registrationId;var i={lastAttributeUpdateTime:Date.now()};s&&(setTimeout(function(){a._convertAllOnepushTopicsToRivendell(s,t)},0),i.registrationId=s),a._setEntryInDB(i)}}),!0}return!1})})},logOnboardingStart:function(e,n){e=e||{},this._initDB(e,n)},logOnboardingCompleted:function(e,n){this._setEntryInDB({onboardState:"completed",origin:e,vapidSubscriptionTimestamp:Date.now(),error:void 0},n)},logPushManagerSuccess:function(e,n){this._setEntryInDB({endpoint:e,subscriptionTime:(new Date).getTime()},n)},logPushManagerFailure:function(e){this._setEntryInDB({error:"pushManagerFail"},e)},logSubscriptionFailure:function(e){this._setEntryInDB({error:b},e)},logSubscriptionChurnCheck:function(e){this._setEntryInDB({churnCheckTime:(new Date).getTime()},e)},clearErrorLog:function(e){this._setEntryInDB({error:void 0},e)},getSubscriptionLog:function(e){this._readEntryInDB(e)},_openDB:function(i){var t=this;if(window.indexedDB){var e=window.indexedDB.open("yahooNotifications",2);e.onupgradeneeded=function(e){e.target.result.createObjectStore(c,{keyPath:s}).transaction.onerror=function(e){var n=new Error("Failed upgrading: "+e.target.errorCode);t._sendBeacon(p,{code:"IDBUpgradeFail",message:n.message}),i&&i(n)}},e.onsuccess=function(e){var n=e.target.result;i&&i(null,n)},e.onerror=function(e){var n=new Error("Failed opening: "+e.target.errorCode);t._sendBeacon(p,{code:"IDBOpenFail",message:n.message}),i&&i(new Error(n))}}},_initDB:function(r,o){var s=this,a=(new Date).getTime();s._openDB(function(e,i){if(e)return o&&o(e);var t=s._buildEntryObject(r),n=i.transaction(c,"readwrite").objectStore(c).put(t);n.onsuccess=function(e){var n=(new Date).getTime();o&&o(null,t),s._sendBeacon(f,{code:"initIndexedDBDuration",message:n-a}),i.close()},n.onerror=function(e){var n=new Error("Failed initilazing: "+e.target.errorCode);s._sendBeacon(p,{code:"IDBInitFail",message:n.message}),o&&o(n),i.close()}})},_readEntryInDB:function(r){var o=this,s=(new Date).getTime();o._openDB(function(e,i){if(e)return r&&r(e);var t=i.transaction(c).objectStore(c).get(d);t.onsuccess=function(e){var n=(new Date).getTime();r&&r(null,t.result),o.config.enableIndexedDbDurationBeacon&&o._sendBeacon(f,{code:"readIndexedDBDuration",message:n-s}),i.close()},t.onerror=function(e){var n=new Error("Failed Reading: ",e.target.errorCode);o._sendBeacon(p,{code:"IDBReadFail",message:n.message}),r&&r(n),i.close()}})},_setEntryInDB:function(r,o){var s=this,a=(new Date).getTime();s._readEntryInDB(function(e,t){e||!t?s._initDB(s._buildEntryObject(r,t),o):s._openDB(function(n,i){if(n)return o&&o(n);var e=i.transaction(c,"readwrite").objectStore(c).put(s._buildEntryObject(r,t));e.onsuccess=function(e){var n=(new Date).getTime();o&&o(null,!0),s.config.enableIndexedDbDurationBeacon&&s._sendBeacon(f,{code:"updateIndexedDBDuration",message:n-a}),i.close()},e.onerror=function(e){s._sendBeacon(p,{code:"IDBUpdateFail",message:n}),o&&o(new Error("Failed updating: ",e.target.errorCode)),i.close()}})})},_buildEntryObject:function(e,n){e=e||{},n=n||{};var i=(new Date).getTime(),t=n.registrationId;typeof e.registrationId!==o&&(t=e.registrationId);var r={bucket:e.bucket||n.bucket||this.config.bucket,churnCheckTime:e.churnCheckTime||n.churnCheckTime,endpoint:e.endpoint||n.endpoint,error:e.error||n.error,lastAttributeUpdateTime:e.lastAttributeUpdateTime||n.lastAttributeUpdateTime,onboardState:e.onboardState||n.onboardState||"started",onboardTime:n.onboardTime||i,origin:e.origin||n.origin,permissionState:Notification&&Notification.permission||"unsuported",registrationId:t,spaceId:e.spaceId||n.spaceId||this.config.spaceId,subscriptionTime:e.subscriptionTime||n.subscriptionTime,updateTime:i,vapidSubscriptionTimestamp:e.vapidSubscriptionTimestamp||n.vapidSubscriptionTimestamp};return e.hasOwnProperty("error")&&void 0===e.error&&(r.error=void 0,"started"===r.onboardState&&(r.onboardState="completed",r.onboardTime=i)),r[s]=d,r},_sendRequest:function(e,n,i){if(e){var t=this,r=2e3,o=e.url,s=e.headers,a=e.body,c=new XMLHttpRequest;for(var u in n="number"==typeof n?n:3,c.open(e.method,o),c.responseType="json",c.timeout=1e4,s)s.hasOwnProperty(u)&&c.setRequestHeader(u,s[u]);c.onload=function(){if(200===c.status){var e=c.response;i&&i(null,e)}else d()},c.onerror=function(){d()},c.ontimeout=function(){d()},"GET"===e.method?c.send():c.send(a)}function d(){0<n?(n-=1,setTimeout(function(){t._sendRequest(e,n,i)},r)):i&&i(new Error(c.statusText))}},callSubscriptionService:function(n,e,i){n=n||{};var t,r=this.config.subscriptionService,o="",s="";n.matrixParams&&Object.keys&&(Object.keys(n.matrixParams).forEach(function(e){o+=";"+encodeURIComponent(e)+"="+encodeURIComponent(n.matrixParams[e]||"")}),o&&(o+=";")),s=[].concat(r.protocol?r.protocol+"://":[]).concat(r.host||[]).concat(r.path?r.path.replace("RESOURCE_PLACEHOLDER",n.serviceResource+o):[]).join(""),r&&r.context&&r.context.partner&&(s+=(0<=s.indexOf("?")?"&":"?")+"partner="+r.context.partner),"GET"===n.method?(s.indexOf("resource/")<0&&(s.endsWith&&!s.endsWith("/")&&(s+="/"),s+="resource/"+n.serviceResource+o),t={url:s,method:"GET"}):"POST"===n.method&&(r&&r.context&&r.context.crumb&&(s+=(0<=s.indexOf("?")?"&":"?")+"crumb="+r.context.crumb),t={body:JSON.stringify({requests:{g0:{resource:n.serviceResource,operation:n.operation,params:n,body:e}},context:r.context||{}}),headers:{"content-type":"application/json"},url:s,method:"POST"}),this._sendRequest(t,3,i)},readTopicSubscription:function(r,o,s){if(r&&o)if(window.indexedDB){var a=this;a._readEntryInDB(function(e,n){if(e)s&&s(e);else{var i=(n=n||{}).registrationId,t={matrixParams:{channel_id:o,operation:"read",serviceResource:"subscriptions.hasSubscription",target_id:r},method:"GET",serviceResource:"subscriptions.hasSubscription"};i&&(t.matrixParams.registration_id=i),a.callSubscriptionService(t,null,s)}})}else s&&s(new Error("IndexedDB connection failed"));else s&&s(new Error("Missing required arguments"))},setTopicSubscription:function(s,a,c,u,e,d){if(s&&c&&u)if(window.indexedDB){var l=this;l._readEntryInDB(function(e,n){if(e)d&&d(e);else{var t=(n=n||{}).registrationId,i={channel_id:u,device_id:c,target_id:s};t&&(i.registration_id=t);var r=Object.assign(i,l.getEssentialAttributes()),o={method:"POST",operation:"update",serviceResource:a?"subscriptions.setSubscription":"subscriptions.removeSubscription"};l.callSubscriptionService(o,r,function(n,i){!n&&(i=i||{},t=t||i.registrationId||i.g0&&i.g0.data&&i.g0.data.registrationId)?l._setEntryInDB({registrationId:t},function(e){e&&l._sendBeacon(p,{code:"registrationIDBEntryError",message:e.message}),d&&d.call(l,n,i)}):d&&d.apply(l,Array.prototype.slice.call(arguments))})}})}else d&&d(new Error("IndexedDB connection failed"));else d&&d(new Error("Missing required arguments"+!!s+!!c,!!u))},checkIsPushMuted:function(i,t){if(i&&t){var r=this;r.fetchPushPermission(function(e,n){n&&n.state===u&&n.subscriptionKeys?r.readTopicSubscription(i,n.subscriptionKeys,function(e,n){var i=n&&n.isSubscribed;t(null,!i)}):t(null,!0)})}else t&&t(new Error("Missing required topic"))},pushNotificationSubscribe:function(i,t){if(i&&i.topic){i=JSON.parse(JSON.stringify(i));var r=this,o=r.config.overlay.default,e=i.topic,s=i.trackingParams||{sec:"hd"};s.subsec="browser-prompt",s.aid=e,i.trackingParams=s,r.fetchPushPermission(function(e,n){return e||!n?(r._sendBeacon(p,{code:"permRead",message:e.message}),void(t&&t(new Error("Could not read push permission")))):n.state===a?(i.trackingParams=null,void r._handlePermissionDenied(i,t)):n.state===u&&n.deviceId&&n.subscriptionKeys?(i.trackingParams=null,void r._handlePermissionGranted(n,i,t)):(i.showInstructionsDefault&&o&&n.state!==u&&r.renderInstructionOverlay(o.overlayId,o.imageUrl,o.imageWidth,o.imageHeight,o.xOffset,o.yOffset),void r.requestPushPermission(s,function(e,n){return i.showInstructionsDefault&&o&&r.removeInstructionsOverlay(o.overlayId),!e&&n?n.state===u?void r._handlePermissionGranted(n,i,t):n.state===a?void r._handlePermissionDenied(i,t):void r._handlePermissionDismissed(i,t):(r._sendBeacon(p,{code:"permReq",message:e.message}),void(t&&t(new Error("Push permission request failure"))))}))})}else t&&t(new Error("Missing required option: topic"))},getSubscribedTopics:function(t){if(Notification.permission===a)return t&&t(new Error(m));this._readEntryInDB(function(e,n){if(e)t&&t(e);else{var i=(n=n||{}).registrationId;if(!i)return t&&t(null,[]);fetch("https://web.archive.org/web/20230101001146/https://api.push.yahoo.com/v1/getsubscriptions",{method:"POST",headers:{"Content-Type":"application/json","x-rivendell-regid":i},body:"{}"}).then(function(e){return e.json()}).then(function(e){return t&&t(null,e&&e.subscriptions||[])}).catch(function(e){return t&&t("API call failed")})}})},_handlePermissionGranted:function(i,e,t){var r=this,n=(e=e||{}).trackingParams,o=e.topic;i&&i.state===u&&o?(n&&(n.slk="permission-allow",n._p=1,r._trackClick(n)),this.setTopicSubscription(o,!0,i.deviceId,i.subscriptionKeys,{},function(e,n){e?i.deviceId&&r.logSubscriptionFailure():(r.hidePushSubscriptionPromos(),r.getSubscriptionLog(function(e,n){n&&"completed"!==n.onboardState&&r.logOnboardingCompleted(o)})),e&&r._sendBeacon(p,{code:"failureAfterPerm",message:e&&e.message}),t&&t(e,n)})):t&&t(new Error("Missing required params in handler"))},_handlePermissionDenied:function(e,n){e=e||{};var i=this.config.overlay.denied,t=e.trackingParams;t&&(t.slk="permission-block",t._p=2,this._trackClick(t)),e.showInstructionsDenied&&i&&this.renderInstructionOverlay(i.overlayId,i.imageUrl,i.imageWidth,i.imageHeight,i.xOffset,i.yOffset),n&&n(new Error(m))},_handlePermissionDismissed:function(e,n){var i=(e=e||{}).trackingParams;i&&(i.slk="permission-dismiss",i._p=0,this._trackClick(i)),n&&n(new Error("Permission not granted by user"))},pushNotificationUnsubscribe:function(i,t){var r=this;i&&r.fetchPushPermission(function(e,n){n?r.setTopicSubscription(i,!1,n.deviceId,n.subscriptionKeys,{},t):t&&t(new Error("Could not read permission"))})},renderInstructionOverlay:function(n,e,i,t,r,o){var s=this;if(n&&e&&i&&t){var a=document.createElement("div"),c=document.createElement("div"),u="";a.id=n,a.setAttribute("style","position:fixed; background-color:rgba(236, 236, 236, 0.95); top:0; left:0; width:100%; height:100%; z-index:100;"),"number"!=typeof r&&(u+="margin-left:auto; margin-right:auto;"),"number"!=typeof o&&(u+=" margin-top:117px;"),u&&c.setAttribute("style",u),c.setAttribute("style","width:"+i+"px;height:"+t+"px;background: url("+e+") 0 0/"+i+"px "+t+"px no-repeat;"+("number"==typeof r?"margin-left:"+r+"px;":"")+("number"==typeof o?"margin-top:"+o+"px;":"")),a.appendChild(c),document.body.appendChild(a),s.removeInstructionsOverlay&&(document.onkeydown=function(e){("key"in(e=e||window.event)?"Escape"===e.key||"Esc"===e.key:27===e.keyCode)&&s.removeInstructionsOverlay(n)},a.onclick=function(e){s.removeInstructionsOverlay(n)})}},removeInstructionsOverlay:function(e){var n=document.getElementById(e);n&&document.body.removeChild(n)},shouldPromotePushNotifications:function(){return this.checkIsSupportedBrowser(n)&&Notification.permission!==u},shouldPromotePushNotificationsForTopic:function(e,i){e&&this.checkIsSupportedBrowser(n)?this.checkIsPushMuted(e,function(e,n){e?i(e,!1):i(void 0,n)}):i(void 0,!1)},showPushSubscriptionPromos:function(){this.shouldPromotePushNotifications()&&document.body.classList.add(e)},hidePushSubscriptionPromos:function(){document.body.classList.remove(e)},_stringParseKV:function(e,n,i){var t={};if(!e)return t;n=n||";",i=i||":";for(var r=e.split(n),o=0;o<r.length;o+=1){var s=r[o],a=s.indexOf(i),c=s.substring(0,a),u=s.substring(a+1);c=c.trim?c.trim():c,u=u.trim?u.trim():u,c&&(t[c]=u)}return t},_delegateDOMEvent:function(e,n,i,t){if(e&&n&&i&&t){var r=document.querySelector(n);r&&r.addEventListener(e,function(e){for(var n=e.target;n&&e.currentTarget!==n;){if(n.classList.contains(i)){t.call(n,e);break}n=n.parentNode}},!1)}},addPromoButtonDelegator:function(){var n=this;n._delegateDOMEvent("click","body",l,function(e){n.handlePromoButtonSubscription(this)})},handlePromoButtonSubscription:function(e){if(e){var n=this,i=e.getAttribute("data-subscription-topic"),t=e.getAttribute("data-subscription-ylk"),r=t&&n._stringParseKV(t),o="false"===e.getAttribute("data-subscription-instructions-default"),s="false"===e.getAttribute("data-subscription-instructions-denied");i&&r&&(n._trackClick(n._stringParseKV(t)),n.pushNotificationSubscribe({showInstructionsDefault:!o,showInstructionsDenied:!s,topic:i,trackingParams:r},n.displayWelcomeNotification.bind(n)))}},trackPromoButtonsLinkViews:function(){for(var e,n,i=document.getElementsByClassName(l),t=0;i&&t<i.length;t+=1)i[t].classList.contains(h)&&this._isVisible(i[t])&&(e=i[t].getAttribute("data-subscription-ylk")||"",(n=this._stringParseKV(e))&&n.slk&&(n.slk="[manual] "+n.slk,this._trackLinkView(n)),i[t].classList.remove(h))},_isVisible:function(e){if(e){var n=window.getComputedStyle(e,null);return n&&"none"!==n.display&&"hidden"!==n.visibility}},displayWelcomeNotification:function(){var e=this.config.confirmationNotification;Notification.permission===u&&e.enabled&&new Notification(e.title,{body:e.body,icon:e.icon})},getEssentialAttributes:function(){var e=(new Date).getTimezoneOffset(),n={tzOffset:e,utcTz:"UTC"+-e/60};if(window.Intl)try{n.tz=window.Intl.DateTimeFormat().resolvedOptions().timeZone}catch(e){}return n},urlB64ToUint8Array:function(e){if("atob"in window){for(var n=(4-e.length%4)%4,i="",t=0;t<n;t++)i+="=";for(var r=(e+i).replace(/\-/g,"+").replace(/_/g,"/"),o=window.atob(r),s=new Uint8Array(o.length),a=0;a<o.length;++a)s[a]=o.charCodeAt(a);return s}}},typeof module!==o&&module.exports)module.exports=g;else if(typeof window!==o){window.SubscriptionHelper=g;var v=window.YAHOO&&window.YAHOO.subscriptionHelperParams;v&&v.selfInit&&setTimeout(function(){window.subscriptionHelperInstance=new g(v.config,v.beaconer,v.tracker),"function"==typeof window.CustomEvent&&document.dispatchEvent(new window.CustomEvent("notificationSubscriptionHelper:ready"))},200)}}();

}
/*
     FILE ARCHIVED ON 00:11:46 Jan 01, 2023 AND RETRIEVED FROM THE
     INTERNET ARCHIVE ON 12:02:10 Jan 24, 2024.
     JAVASCRIPT APPENDED BY WAYBACK MACHINE, COPYRIGHT INTERNET ARCHIVE.

     ALL OTHER CONTENT MAY ALSO BE PROTECTED BY COPYRIGHT (17 U.S.C.
     SECTION 108(a)(3)).
*/
/*
playback timings (ms):
  exclusion.robots: 0.074
  exclusion.robots.policy: 0.063
  cdx.remote: 0.103
  esindex: 0.014
  LoadShardBlock: 166.684 (6)
  PetaboxLoader3.datanode: 239.902 (8)
  load_resource: 368.004 (2)
  PetaboxLoader3.resolve: 197.523 (2)
*/