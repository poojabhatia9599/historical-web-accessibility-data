var _____WB$wombat$assign$function_____ = function(name) {return (self._wb_wombat && self._wb_wombat.local_init && self._wb_wombat.local_init(name)) || self[name]; };
if (!self.__WB_pmw) { self.__WB_pmw = function(obj) { this.__WB_source = obj; return this; } }
{
  let window = _____WB$wombat$assign$function_____("window");
  let self = _____WB$wombat$assign$function_____("self");
  let document = _____WB$wombat$assign$function_____("document");
  let location = _____WB$wombat$assign$function_____("location");
  let top = _____WB$wombat$assign$function_____("top");
  let parent = _____WB$wombat$assign$function_____("parent");
  let frames = _____WB$wombat$assign$function_____("frames");
  let opener = _____WB$wombat$assign$function_____("opener");

!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define("wafer-action",[],e):"object"==typeof exports?exports["wafer-action"]=e():(t.wafer=t.wafer||{},t.wafer.wafers=t.wafer.wafers||{},t.wafer.wafers["wafer-action"]=e())}("undefined"!=typeof self?self:this,function(){return function(t){function e(r){if(o[r])return o[r].exports;var n=o[r]={i:r,l:!1,exports:{}};return t[r].call(n.exports,n,n.exports,e),n.l=!0,n.exports}var o={};return e.m=t,e.c=o,e.d=function(t,o,r){e.o(t,o)||Object.defineProperty(t,o,{configurable:!1,enumerable:!0,get:r})},e.n=function(t){var o=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(o,"a",o),o},e.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},e.p="https://web.archive.org/web/20220430234657/https://s.yimg.com/aaq/wf/",e(e.s="./src/entry.js")}({"./src/entry.js":function(t,e,o){"use strict";function r(t,e,o){return e in t?Object.defineProperty(t,e,{value:o,enumerable:!0,configurable:!0,writable:!0}):t[e]=o,t}function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function a(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}function s(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function c(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function u(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var l=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var o=arguments[e];for(var r in o)Object.prototype.hasOwnProperty.call(o,r)&&(t[r]=o[r])}return t},p=function(){function t(t,e){var o=[],r=!0,n=!1,a=void 0;try{for(var i,s=t[Symbol.iterator]();!(r=(i=s.next()).done)&&(o.push(i.value),!e||o.length!==e);r=!0);}catch(t){n=!0,a=t}finally{try{!r&&s.return&&s.return()}finally{if(n)throw a}}return o}return function(e,o){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return t(e,o);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),f=function(){function t(t,e){for(var o=0;o<e.length;o++){var r=e[o];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,o,r){return o&&t(e.prototype,o),r&&t(e,r),e}}(),d=[],b=window.wafer,y=b.constants,v=b.features,m=b.utils,h=b.WaferBaseClass,g=y.ATTR_PREFIX,w=m.findAncestor,k=m.fetchWithCache,_=["handleClick"],S="wafer-action-is-true",T={block:-1,unblock:0},P="publisher",O={},A=function(t){function e(t){var o,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},s=i.appId,c=i.actionHost,u=i.bookmarkActionHost,f=i.crumb,b=i.id,y=i.name,v=i.providerBrandProperty,m=i.selector,h=i.shouldSaveToStorage,k=i.subType,T=i.type;n(this,e);var O=a(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t,{selector:m},{STATE_ATTRS:d}));s=t.getAttribute(g+"app-id")||s,f=t.getAttribute(g+"crumb")||f;var A=t.getAttribute(g+"action-type")||T||"follow",E=t.getAttribute(g+"action-sub-type")||k,I=t.getAttribute(g+"action-sub-type-category")||"",j=t.getAttribute(g+"action-id")||b,L=t.getAttribute(g+"action-content-id")||"",C=t.getAttribute(g+"action-label"),H=t.getAttribute(g+"action-name")||y,B=C&&C.split("|")||[],x=p(B,2),D=x[0],R=x[1],N=t.getAttribute(g+"action-title")||"",F=t.getAttribute(g+"action-boundary"),M={follow:c+"api/v3/topics?appId="+s,block:c+"api/v1/content/feedback/"+(E===P?P:"entities")+"?appId="+s,blockProvider:c+"api/v1/providerbrands/block/\n            providers/"+j+"?appId="+s},Y=M[A],J=F&&w(t,F);return O._util=l({},O._util,(o={actionHost:c,apiPath:Y,appId:s,bookmarkActionHost:u,boundaryElem:J,subType:E,contentId:L,crumb:f,elem:t,falseLabel:R,id:j,mappingId:j+A+E+I,providerBrandProperty:v,subTypeCategory:I,shouldSaveToStorage:void 0===h?void 0:!!h,name:H},r(o,"subType",E),r(o,"title",N),r(o,"trueLabel",D),r(o,"type",A),o)),_.forEach(function(t){O[t]=O[t].bind(O)}),O._state={actionStatus:!1,inProgress:!1},t.classList.add("has-click","has-wafer-click"),setTimeout(function(){O.setActionStatus(t.classList.contains(S))},0),O}return i(e,t),f(e,[{key:"statusDidUpdate",value:function(t){var e=this._util.elem;if(e){var o=this._util,r=o.falseLabel,n=o.trueLabel;this._state.actionStatus=t,t?(r&&e.setAttribute("title",r),e.classList.add(S)):(n&&e.setAttribute("title",n),e.classList.remove(S))}}},{key:"saveToStorage",value:function(){if(v.localStorage){var t=this._util,o=t.id,r=t.name,n=void 0===r?"":r,a=t.subType,i=t.type,s=Date.now()+9e5;return window.localStorage.setItem(e.LS_KEY,JSON.stringify({id:o,name:n,subType:a,ttl:s,type:i})),Promise.resolve()}}},{key:"triggerTopicAction",value:function(t){var e=this._util,o=e.appId,n=e.actionHost,a=e.bookmarkActionHost,i=e.contentId,s=e.id,c=e.name,u=e.providerBrandProperty,l=e.shouldSaveToStorage,p=e.subType,f=e.subTypeCategory,d=e.title,b=e.type,y=this._util.apiPath,v={follow:this._state.actionStatus?"PUT":"DELETE",block:"POST",blockProvider:this._state.actionStatus?"PUT":"DELETE",bookmark:this._state.actionStatus?"POST":"DELETE",urlBookmark:"DELETE"},m=v[b],h=void 0,g=void 0;return"follow"===b&&(h={types:r({},p,[{id:s}])},g={Crumb:t},"provider"===p&&(h.types[p][0].type=f||"PROVIDER")),"block"===b&&(h={entities:[{entity_id:s,entity_type:p,score:T[this._state.actionStatus?"block":"unblock"]}]},g={Crumb:t},p===P&&(h.entities[0].entity_name=c)),"blockProvider"===b&&(h={property:u||"YFRONTPAGE"},g={Crumb:t}),"bookmark"===b&&("DELETE"===m?y=a+"api/v1/user/bookmarks/"+p+"/"+i+"?appId="+o:(y=a+"api/v1/user/bookmarks/"+p+"?appId="+o,h={contentId:i,title:d}),g={"X-CSRF-Token":t}),"urlBookmark"===b&&(y="deleteFolder"===p?n+"api/v1/bookmarks/folders/"+i+"?appId="+o:n+"api/v1/bookmarks/items/"+i+"?appId="+o,g={Crumb:t}),l?this.saveToStorage():k(y,{body:JSON.stringify(h),cache:0,clientHeaders:g,credentials:"include",method:m,mode:"cors"})}},{key:"getCrumb",value:function(){var t=this._util,e=t.appId,o=t.actionHost,r=t.bookmarkActionHost,n=t.shouldSaveToStorage,a=t.type,i=this._util.crumb||O[a];if(i||n)return new Promise(function(t){t(i||"")});var s=void 0;return s="bookmark"===a?r+"api/v1/auth/crumb?appId="+e:o+"api/v1/auth/crumb?appId="+e,k(s,{cache:0,credentials:"include",mode:"cors"}).then(function(t){var e=t.crumb;if(O[a]=e,!e)throw new Error("crumb not found");return e})}},{key:"trigger",value:function(t){var e=this;if(t){var o=this._util.type,r=t.crumb;r&&(O[o]=r),this._util=l({},this._util,t)}var n=this._util,a=n.boundaryElem,i=n.name,s=this._state.actionStatus;this._state.inProgress=!0,a&&a.classList.add("wafer-action-in-progress"),s?this.setActionStatus(!1):this.setActionStatus(!0),this.getCrumb().then(function(t){return e._state.inProgress=!1,e.triggerTopicAction(t)}).then(function(t){var o=t||{},r=o.result,n=void 0===r?{}:r,s=n.success,c=void 0===s?{}:s,u=c.entities,l=void 0===u?[]:u,p=e._util,f=p.id,d=p.subType,b=p.type,y="follow"===b&&l.some(function(t){return t.id===f}),v=("block"===b||"blockProvider"===b)&&(null!==t&&t===Object(t)),m="bookmark"===b&&(null!==t&&t===Object(t)),h="urlBookmark"===b&&(null!==t&&t===Object(t));if(!("follow"===b?y:"block"===b||"blockProvider"===b?v:"urlBookmark"===b?h:m))throw a&&(a.classList.add("wafer-action-boundary-error"),a.remove("wafer-action-boundary-success","wafer-action-in-progress")),new Error("action failed");a&&(a.classList.add("wafer-action-boundary-success"),a.remove("wafer-action-boundary-error","wafer-action-in-progress")),e.didComplete(null,{id:f,name:i,subType:d,type:b})}).catch(function(t){e._state.inProgress=!1,a&&(a.classList.remove("wafer-action-in-progress","wafer-action-boundary-success"),a.add("wafer-action-boundary-error")),e._state.actionStatus=!e._state.actionStatus,e.setActionStatus(e._state.actionStatus)})}},{key:"handleClick",value:function(t){t.preventDefault(),this._state.inProgress||this.trigger()}}]),e}(h);A.events={click:[["has-click","handleClick"]]},A.LS_KEY=g+"action-storage";var E=A,I=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var o=arguments[e];for(var r in o)Object.prototype.hasOwnProperty.call(o,r)&&(t[r]=o[r])}return t},j=function(){function t(t,e){for(var o=0;o<e.length;o++){var r=e[o];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,o,r){return o&&t(e.prototype,o),r&&t(e,r),e}}(),L=window.wafer,C=L.controllers,H=L.features,B=L.utils,x=C.WaferBaseController,D=B.getConfigFromJSONScriptNode,R=function(t){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},o=t.root,r=void 0===o?document:o,n=t.selector;s(this,e);var a=D(document.getElementById("wafer-action-config")),i=a.actionHost,u=a.appId,l=a.bookmarkActionHost,p=a.crumb,f=a.providerBrandProperty,d=a.shouldSaveToStorage,b=c(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,{root:r,selector:n,props:{actionHost:i,appId:u,bookmarkActionHost:l,crumb:p,providerBrandProperty:f,shouldSaveToStorage:d,selector:n},WaferClass:E})),y=b;return b.sync(),b._state=I({},b._state,{idInstanceMapping:new Map}),E.prototype.setActionStatus=function(t){var e=this._util.mappingId,o=y._state.idInstanceMapping;o.has(e)||o.set(e,[]),o.get(e).push(this),o.get(e).forEach(function(e){e.statusDidUpdate(t)})},H.localStorage&&setTimeout(function(){b.processStoredAction(a,n)},1),b}return u(e,t),j(e,[{key:"processStoredAction",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";if(t.shouldProcessState){var o=t.actionHost,r=t.appId,n=t.bookmarkActionHost,a=t.crumb,i=t.providerBrandProperty,s=window.localStorage.getItem(E.LS_KEY);if(s){var c=document.createElement("div"),u={actionHost:o,appId:r,bookmarkActionHost:n,crumb:a,providerBrandProperty:i,selector:e};try{var l=JSON.parse(s),p=l.id,f=l.name,d=l.ttl,b=void 0===d?0:d,y=l.subType,v=l.type;b&&b>=Date.now()&&v&&y&&p&&(c.setAttribute("data-wf-on","complete:setState:wfAction.entity."+v),new E(c,Object.assign({},u,{id:p,name:f,subType:y,type:v})).trigger(I({},u,{id:p,name:f,subType:y,type:v})))}catch(t){}window.localStorage.removeItem(E.LS_KEY)}}}}]),e}(x),N=R;e.default=new N({selector:".wafer-action"})}})});

}
/*
     FILE ARCHIVED ON 23:46:57 Apr 30, 2022 AND RETRIEVED FROM THE
     INTERNET ARCHIVE ON 11:49:15 Jan 24, 2024.
     JAVASCRIPT APPENDED BY WAYBACK MACHINE, COPYRIGHT INTERNET ARCHIVE.

     ALL OTHER CONTENT MAY ALSO BE PROTECTED BY COPYRIGHT (17 U.S.C.
     SECTION 108(a)(3)).
*/
/*
playback timings (ms):
  exclusion.robots: 0.069
  exclusion.robots.policy: 0.059
  cdx.remote: 0.101
  esindex: 0.01
  LoadShardBlock: 253.808 (6)
  PetaboxLoader3.datanode: 256.881 (7)
  load_resource: 86.733
  PetaboxLoader3.resolve: 56.482
*/