!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define("wafer-tabs",[],e):"object"==typeof exports?exports["wafer-tabs"]=e():(t.wafer=t.wafer||{},t.wafer.wafers=t.wafer.wafers||{},t.wafer.wafers["wafer-tabs"]=e())}("undefined"!=typeof self?self:this,function(){return function(t){function e(o){if(a[o])return a[o].exports;var i=a[o]={i:o,l:!1,exports:{}};return t[o].call(i.exports,i,i.exports,e),i.l=!0,i.exports}var a={};return e.m=t,e.c=a,e.d=function(t,a,o){e.o(t,a)||Object.defineProperty(t,a,{configurable:!1,enumerable:!0,get:o})},e.n=function(t){var a=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(a,"a",a),a},e.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},e.p="https://s.yimg.com/aaq/wf/",e(e.s="./src/entry.js")}({"./src/entry.js":function(t,e,a){"use strict";function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function s(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function n(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function u(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var l=function(){function t(t,e){var a=[],o=!0,i=!1,s=void 0;try{for(var r,n=t[Symbol.iterator]();!(o=(r=n.next()).done)&&(a.push(r.value),!e||a.length!==e);o=!0);}catch(t){i=!0,s=t}finally{try{!o&&n.return&&n.return()}finally{if(i)throw s}}return a}return function(e,a){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return t(e,a);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),c=function(){function t(t,e){for(var a=0;a<e.length;a++){var o=e[a];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(e,a,o){return a&&t(e.prototype,a),o&&t(e,o),e}}(),h=function t(e,a,o){null===e&&(e=Function.prototype);var i=Object.getOwnPropertyDescriptor(e,a);if(void 0===i){var s=Object.getPrototypeOf(e);return null===s?void 0:t(s,a,o)}if("value"in i)return i.value;var r=i.get;if(void 0!==r)return r.call(o)},f=window.wafer,v=f.base,d=f.constants,b=f.utils,p=f.WaferBaseClass,y=b.bindEvent,g=b.clearTimeout,m=b.convertNodeListToArray,w=b.findAncestor,T=b.setTimeout,_=b.unbindEvent,E=d.ATTR_PREFIX,O=["handleTargetFocusIn","handleTargetFocusOut","handleTargetMouseLeave","handleTargetMouseOver","tabChange","tabClick","tabFocusIn","tabMouseOver"],A=function(t){function e(t){o(this,e);for(var a,s=i(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t,{},{})),r=t.getAttribute(E+"active-class")||"wafer-tab-active",n=t.getAttribute(E+"inactive-class"),u=Number(t.getAttribute(E+"scroll-restore"))||0,c=t.hasAttribute(E+"collapsable"),h=t.hasAttribute(E+"handle-hover"),f=t.hasAttribute(E+"handle-focus"),v=t.hasAttribute(E+"tabs-allowdefault"),d=t.hasAttribute(E+"disable-focus"),b=Number(t.getAttribute(E+"auto-switch"))||0,p=Number(t.getAttribute(E+"auto-switch-timeout"))||2e3,y=Number(t.getAttribute(E+"auto-switch-rotation-interval"))||0,g=Number(t.getAttribute(E+"active-index"))||(c?null:0),T=w(t,t.getAttribute(E+"boundary"))||document.body,_=t.getAttribute(E+"target"),A=[],S=0,k=t.getElementsByClassName("tab");a=k[S];++S)A.push({tabElem:a,hasTrigger:"tabActivate"===a.getAttribute(E+"trigger")});var F=m(T.getElementsByClassName(_)),C=l(F,1),j=C[0],L=j&&j.children,x=s._util={activeClass:r,autoSwitchTimeout:p,autoSwitchRotationInterval:y,boundary:T,elem:t,inactiveClass:n,isCollapsable:c,shouldAllowDefault:v,shouldAutoSwitch:b,shouldDisableFocus:d,shouldHandleFocus:f,shouldHandleHover:h,shouldScrollRestore:u,tabsElems:A,targetElem:j,targetElems:L&&m(L)};if(j&&j.classList.add("wafer-tabs-target"),s._state={activeIndex:0,activeTabElem:null,tabsTopStyleInPixel:0},u&&(s._state.scrollPositions=s._state.scrollPositions||{},s._state.tabsTopStyleInPixel=parseInt(window.getComputedStyle(t).top)||0),null!==g){s._state.activeIndex=g;var P=x.tabsElems[g];P&&s.activateTab(P.tabElem,{focus:!0,skipScroll:!0})}return O.forEach(function(t){s[t]=s[t].bind(s)}),b&&s.setTimeoutForTabChange(),s.addEventListeners(),s}return s(e,t),c(e,[{key:"addEventListeners",value:function(){var t=this._util,a=t.shouldAutoSwitch,o=t.targetElem;a&&(y(o,"focusin",this.handleTargetFocusIn,{passive:!1}),y(o,"focusout",this.handleTargetFocusOut,{passive:!1}),y(o,"mouseleave",this.handleTargetMouseLeave,{passive:!1}),y(o,"mouseover",this.handleTargetMouseOver,{passive:!1})),h(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"addEventListeners",this).call(this)}},{key:"removeEventListeners",value:function(){var t=this._util,a=t.shouldAutoSwitch,o=t.targetElem;a&&(_(o,"focusin",this.handleTargetFocusIn,{passive:!1}),_(o,"focusout",this.handleTargetFocusOut,{passive:!1}),_(o,"mouseleave",this.handleTargetMouseLeave,{passive:!1}),_(o,"mouseover",this.handleTargetMouseOver,{passive:!1})),h(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"removeEventListeners",this).call(this)}},{key:"setTimeoutForTabChange",value:function(){var t=this,e=this._util.autoSwitchTimeout,a=this._util.autoSwitchRotationInterval;a&&this._util.switchTabTimeout&&(e=a),this.pauseSwitching(),this._util.switchTabTimeout=T(function(){t.switchToNextTab(),t.setTimeoutForTabChange()},e,this)}},{key:"switchToNextTab",value:function(){var t=this._util.tabsElems,e=this._state.activeIndex;e===t.length-1?this.activateTab(t[0].tabElem,{force:!0}):this.activateTab(t[e+1].tabElem,{force:!0})}},{key:"pauseSwitching",value:function(){this._util.switchTabTimeout&&g(this._util.switchTabTimeout,this)}},{key:"activateTab",value:function(t){var e=this,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},o=a.force,i=void 0!==o&&o,s=a.skipScroll,r=void 0!==s&&s,n=this._state.activeTabElem;if(!i&&t===n)return void t.classList.add("active");var u=t.classList.contains("wafer-fetch")||t.getElementsByClassName("wafer-fetch")[0],c=this._util,h=c.activeClass,f=c.boundary,d=c.elem,b=c.inactiveClass,p=c.shouldAutoSwitch,y=c.shouldScrollRestore,g=c.tabsElems,m=c.targetElems,w=this._state,_=w.activeIndex,E=w.tabsTopStyleInPixel;p&&this.pauseSwitching();var O=0,A=0;if(y){var S=window.pageYOffset||document.documentElement.scrollTop,k=window.pageXOffset||document.documentElement.scrollLeft,F=f.getBoundingClientRect(),C=F.top,j=F.left;O=C+S-E,A=j+k,C>E?r=!0:this._state.scrollPositions[_]={top:S,lef:k}}if(u){var L=m||[],x=l(L,1),P=x[0];if(P){var I=P.parentNode;I.style&&(I.style.minHeight="",I.style.minHeight=I.offsetHeight+"px")}}g.forEach(function(){var a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},o=a.tabElem,i=a.hasTrigger,s=arguments[1],n=m&&m[s];if(o===t){if(o.classList.add("active"),o.setAttribute("aria-selected",!0),e._state.activeIndex=s,e._state.activeTabElem=o,n){if(y&&!r){var u=e._state||{},l=u.scrollPositions,c=void 0===l?{}:l,f=c[s]||{},p=f.top,g=void 0===p?O:p,w=f.left,_=void 0===w?A:w;T(function(){window.scrollTo(_,g)},2)}b&&n.classList.remove(b),n.classList.add(h),n.setAttribute("aria-hidden",!1),v.unlock(o),v.sync(n),v.syncUI(n),i&&v.trigger(o),v.emitWaferEvent("tab:selected",{elem:d,meta:{targetElem:n}})}}else v.lock(o),o.classList.remove("active"),o.setAttribute("aria-selected",!1),n&&(n.classList.remove(h),b&&n.classList.add(b),n.setAttribute("aria-hidden",!0))})}},{key:"focusActiveTab",value:function(){var t=this._util,e=t.targetElems,a=t.shouldDisableFocus,o=e&&e[this._state.activeIndex];o&&!a&&(o.setAttribute("tabIndex",-1),o.focus())}},{key:"deactivateTab",value:function(t){var e=this,a=this._util,o=a.activeClass,i=a.inactiveClass,s=a.tabsElems,r=a.targetElems;this._state.activeTabElem=null,s.some(function(){var a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},s=a.tabElem,n=arguments[1],u=r&&r[n];if(s===t)return s.classList.remove("active"),s.setAttribute("aria-selected",!1),u&&(u.classList.remove(o),i&&u.classList.add(i),u.setAttribute("aria-hidden",!0)),e._state.activeIndex=0,!0})}},{key:"tabClick",value:function(t){!this._util.shouldAllowDefault&&t.preventDefault(),this.activateTab(t.eventTarget),this.focusActiveTab()}},{key:"handleTargetFocusIn",value:function(t){this._util.shouldAutoSwitch&&this.pauseSwitching()}},{key:"tabFocusIn",value:function(t){var e=this._util,a=e.shouldHandleFocus,o=e.focusOutTimeout;a&&(o&&g(o,this),this.activateTab(t.currentTarget))}},{key:"handleTargetFocusOut",value:function(t){this._util.shouldAutoSwitch&&this.setTimeoutForTabChange()}},{key:"focusOut",value:function(){var t=this,e=this._util.shouldHandleFocus,a=this._state.activeTabElem;a&&e&&(this._util.focusOutTimeout=T(function(){t.deactivateTab(a)},1,this))}},{key:"handleTargetMouseOver",value:function(t){this._util.shouldAutoSwitch&&this.pauseSwitching()}},{key:"tabMouseOver",value:function(t){var e=this._util,a=e.shouldAutoSwitch,o=e.shouldHandleHover;a&&this.pauseSwitching(),o&&this.activateTab(t.currentTarget)}},{key:"handleTargetMouseLeave",value:function(t){this._util.shouldAutoSwitch&&this.setTimeoutForTabChange()}},{key:"mouseover",value:function(){this._util.shouldAutoSwitch&&this.pauseSwitching()}},{key:"mouseleave",value:function(){var t=this._util,e=t.shouldAutoSwitch,a=t.shouldHandleHover,o=t.isCollapsable,i=this._state.activeTabElem;e&&this.setTimeoutForTabChange(),a&&o&&i&&this.deactivateTab(i)}},{key:"tabChange",value:function(t){t.preventDefault();var e=t.eventTarget.selectedIndex||0;this.activateTab(t.eventTarget.options[e])}},{key:"destroy",value:function(){this.pauseSwitching(),this.removeEventListeners(),h(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"destroy",this).call(this)}},{key:"config",get:function(){return{shouldAutoSwitch:this._util.shouldAutoSwitch}}}]),e}(p);A.events={change:[["tabs","tabChange"]],click:[["tab","tabClick"]],focusin:[["tab","tabFocusIn"]],focusout:[["_self","focusOut"]],mouseleave:[["_self","mouseleave"]],mouseover:[["tab","tabMouseOver"],["_self","mouseover"]]};var S=A,k=function(){function t(t,e){for(var a=0;a<e.length;a++){var o=e[a];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(e,a,o){return a&&t(e.prototype,a),o&&t(e,o),e}}(),F=function t(e,a,o){null===e&&(e=Function.prototype);var i=Object.getOwnPropertyDescriptor(e,a);if(void 0===i){var s=Object.getPrototypeOf(e);return null===s?void 0:t(s,a,o)}if("value"in i)return i.value;var r=i.get;if(void 0!==r)return r.call(o)},C=window.wafer,j=C.controllers,L=C.utils,x=L.findAncestor,P=j.WaferBaseController,I=function(t){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=t.root,o=void 0===a?document:a,i=t.selector,s=void 0===i?".wafer-tabs":i;r(this,e);var u=n(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,{root:o,selector:s,WaferClass:S}));return u.sync(),u.handleFetchSuccessEvent=u.handleFetchSuccessEvent.bind(u),u.handleErrorEvent=u.handleErrorEvent.bind(u),u.addEventListeners(),u}return u(e,t),k(e,[{key:"handleTabTargetFetchUpdate",value:function(t){var e=t.elem;if(e&&"tab"===e.getAttribute("role")){var a=t.meta.targetElem||e,o=x(a,"wafer-tabs-target");o&&o.style&&(o.style.minHeight="")}}},{key:"handleFetchSuccessEvent",value:function(t){this.handleTabTargetFetchUpdate(t)}},{key:"handleErrorEvent",value:function(t){"wafer-fetch"===t.name&&this.handleTabTargetFetchUpdate(t)}},{key:"addEventListeners",value:function(){var t=this;window.wafer.ready(function(){window.wafer.on("fetch:success",t.handleFetchSuccessEvent),window.wafer.on("error",t.handleErrorEvent)}),F(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"addEventListeners",this)&&F(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"addEventListeners",this).call(this)}},{key:"handleVisibilityChange",value:function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],e=this._state.elementInstances,a=!0,o=!1,i=void 0;try{for(var s,r=e.values()[Symbol.iterator]();!(a=(s=r.next()).done);a=!0){var n=s.value,u=n.instance;u.config.shouldAutoSwitch&&(t?u.setTimeoutForTabChange():u.pauseSwitching())}}catch(t){o=!0,i=t}finally{try{!a&&r.return&&r.return()}finally{if(o)throw i}}}},{key:"destroy",value:function(t){var a=window.wafer.base._ee;!t&&a&&(a.removeListener("fetch:success",this.handleFetchSuccessEvent),a.removeListener("error",this.handleErrorEvent)),F(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"destroy",this).call(this,t)}}]),e}(P),H=I;e.default=new H({selector:".wafer-tabs"})}})});