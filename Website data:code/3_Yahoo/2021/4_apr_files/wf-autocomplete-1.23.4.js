!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define("wafer-autocomplete",[],t):"object"==typeof exports?exports["wafer-autocomplete"]=t():(e.wafer=e.wafer||{},e.wafer.wafers=e.wafer.wafers||{},e.wafer.wafers["wafer-autocomplete"]=t())}("undefined"!=typeof self?self:this,function(){return function(e){function t(i){if(n[i])return n[i].exports;var r=n[i]={i:i,l:!1,exports:{}};return e[i].call(r.exports,r,r.exports,t),r.l=!0,r.exports}var i=window.webpackJsonpwafer_wafers_wafer_autocomplete;window.webpackJsonpwafer_wafers_wafer_autocomplete=function(t,n,a){for(var o,s,l=0,u=[];l<t.length;l++)s=t[l],r[s]&&u.push(r[s][0]),r[s]=0;for(o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o]);for(i&&i(t,n,a);u.length;)u.shift()()};var n={},r={1:0,2:0};return t.e=function(e){function i(){s.onerror=s.onload=null,clearTimeout(l);var t=r[e];0!==t&&(t&&t[1](new Error("Loading chunk "+e+" failed.")),r[e]=void 0)}var n=r[e];if(0===n)return new Promise(function(e){e()});if(n)return n[2];var a=new Promise(function(t,i){n=r[e]=[t,i]});n[2]=a;var o=document.getElementsByTagName("head")[0],s=document.createElement("script");s.type="text/javascript",s.charset="utf-8",s.async=!0,s.timeout=12e4,t.nc&&s.setAttribute("nonce",t.nc),s.src=t.p+"wf-autocomplete-1.23.4-"+{0:"05d5f5642a"}[e]+".chunk.js";var l=setTimeout(i,12e4);return s.onerror=s.onload=i,o.appendChild(s),a},t.m=e,t.c=n,t.d=function(e,i,n){t.o(e,i)||Object.defineProperty(e,i,{configurable:!1,enumerable:!0,get:n})},t.n=function(e){var i=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(i,"a",i),i},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="https://s.yimg.com/aaq/wf/",t.oe=function(e){throw e},t(t.s="./src/entry.js")}({"./src/assist.js":function(e,t,i){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s,l=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&(e[n]=i[n])}return e},u=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}(),c=window.wafer,d=c.constants,f=c.utils,h=d.ATTR_PREFIX,p=f.findAncestor,v=f.getTemplateContent,m=void 0,y=function(e){function t(e){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=i.selector;r(this,t);var o=a(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,{selector:n})),s=e.getAttribute(h+"ac-target"),u=e.getAttribute(h+"ac-url"),c=e.getAttribute(h+"ac-template"),d=e.getAttribute(h+"ac-placeholder-template"),f=e.getAttribute(h+"ac-number-of-placeholders")||0,y=e.getAttribute(h+"ac-sync-on-search");if(!s||!u)return a(o);var b=e.getAttribute(h+"ac-boundary"),_=e.getAttribute(h+"ac-submit-on-enter"),g=e.getAttribute(h+"ac-clear-button-enabled"),w=e.getAttribute(h+"ac-timeout"),O=e.getAttribute(h+"ac-type")||"gossip",L=b&&p(e,b);if(!m){var k=document.getElementById("wafer-autocomplete-clear-button");m="true"===g&&k&&v(k)}return o._util=l({},o._util,{boundaryElem:L,clearButtonText:m,submitOnEnter:null===_||void 0===_?1:Number(_),numPlaceholders:f,placeholder:d,syncOnSearch:y,target:s,template:c,type:O,url:u,timeout:null===w||void 0===w?6e3:Number(w)}),m&&o.renderClearButton(),o.createListElem(),o.addEventListeners(),o}return o(t,e),u(t,[{key:"renderClearButton",value:function(){var e=this._util,t=e.clearButtonText,i=e.elem,n=document.createElement("div"),r=document.createElement("div");n.classList.add("wafer-autocomplete-input-wrapper"),Object.assign(n.style,{position:"relative"}),r.innerHTML=t;var a=r.children[0];a&&(a.style.visibility="hidden",i.parentNode.insertBefore(n,i),n.appendChild(i),n.appendChild(a),this._util.clearButton=a)}}]),t}((s||function(){return s=n(i("./src/assistBase.js"))}()).default);t.default=y,e.exports=t.default},"./src/assistBase.js":function(e,t,i){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){var i=[],n=!0,r=!1,a=void 0;try{for(var o,s=e[Symbol.iterator]();!(n=(o=s.next()).done)&&(i.push(o.value),!t||i.length!==t);n=!0);}catch(e){r=!0,a=e}finally{try{!n&&s.return&&s.return()}finally{if(r)throw a}}return i}return function(t,i){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,i);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),a=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}(),o=window.wafer,s=o.base,l=o.constants,u=o.utils,c=l.ATTR_PREFIX,d=u.bindEvent,f=u.convertNodeListToArray,h=u.fetchWithCache,p=u.findAncestor,v=u.getConfigFromJSONScriptNode,m=u.getTemplateContent,y=u.getWaferInstanceForElem,b=u.unbindEvent,_=["handleClearButtonClick","handleInputChange","handleListClick","handleListKeyDown"],g=void 0,w=0,O=void 0,L=function(){function e(t){var i=this,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=r.errorClass,o=r.successClass,s=r.selector;n(this,e);var l=t.getAttribute("id");if(!g){var u=document.getElementById("wafer-autocomplete-clear-button");g=u&&m(u)}var d=t.getAttribute(c+"submit-on-clear"),f=t.getAttribute(c+"trigger");O=O||v(document.getElementById("wafer-autocomplete-config")),w++,this._util={ariaConfig:O,clearButtonText:g,elem:t,errorClass:a,id:l,idIndex:w,selector:s,submitOnClear:Number(d)||0,successClass:o},"select"===f&&(this._util.formElem=p(t,"wafer-form")),this._state={active:!1,listOpen:!1,originalTerm:"",placeholdersVisible:!1,term:""},g&&this.renderClearButton(),_.forEach(function(e){i[e]=i[e].bind(i)}),this.addAriaRolesToInput()}return a(e,[{key:"addAriaRolesToInput",value:function(){var e=this._util,t=e.elem,i=(e.type,e.id);t.hasAttribute("aria-controls")||i&&t.setAttribute("aria-controls",i+"-list"),t.hasAttribute("aria-expanded")||t.setAttribute("aria-expanded","false")}},{key:"addEventListeners",value:function(){var e=this,t=this._util,n=t.clearButton,r=t.targetElem,a=t.type;s.__assist=s.__assist||{};var o=s.__assist[a];if(o){var l=o.getListMarkup;this.getListMarkup=l.bind(this)}else new Promise(function(e){i.e(0).then(function(t){e(i("./src/types recursive ^\\.\\/.*$")("./"+a))}.bind(null,i)).catch(i.oe)}).then(function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},i=t.getListMarkup;s.__assist[a]={getListMarkup:i},e.getListMarkup=i.bind(e)}).catch(function(e){});d(r,"click",this.handleListClick,{passive:!1}),d(r,"keydown",this.handleListKeyDown,{passive:!1}),n&&d(n,"click",this.handleClearButtonClick,{passive:!1})}},{key:"renderClearButton",value:function(){var e=this._util,t=e.clearButtonText,i=e.elem,n=document.createElement("div"),r=document.createElement("div");n.classList.add("wafer-autocomplete-input-wrapper"),Object.assign(n.style,{position:"relative"}),r.innerHTML=t;var a=r.children[0];a&&(i.parentNode.insertBefore(n,i),n.appendChild(i),n.appendChild(a),this._util.clearButton=a)}},{key:"removeEventListeners",value:function(){var e=this._util,t=e.clearButton,i=e.targetElem;b(i,"click",this.handleListClick,{passive:!1}),b(i,"keydown",this.handleListKeyDown,{passive:!1}),t&&b(t,"click",this.handleClearButtonClick,{passive:!1})}},{key:"updateInputValue",value:function(e){var t=e.getAttribute("id");t&&this._util.elem.setAttribute("aria-activedescendant",t),this._util.elem.value=e.getAttribute("data-display-value")||e.innerText||e.textContent,this.handleClearButtonVisibility()}},{key:"getPlaceholders",value:function(){for(var e=this._util,t=e.listElem,i=e.placeholderElem,n=e.numPlaceholders,r=document.createDocumentFragment(),a=0;a<n;a++){var o=document.createElement("li");o.setAttribute("tabindex",0),o.setAttribute("role","option"),o.innerHTML=i.innerHTML,r.appendChild(o)}return t.appendChild(r),t}},{key:"getSuggestions",value:function(){var t=this,i=this._util,n=i.ariaConfig,r=i.elem,a=i.targetElem,o=i.numPlaceholders,l=this._util,u=l.url,c=l.syncOnSearch,d=void 0!==c&&c;if(!(u&&a&&this.getListMarkup&&this._state.active))return!1;var f=this._util,p=f.errorClass,v=f.timeout,m=f.type,y=r.value.toLowerCase();if(r.classList.remove(p),!y)return this.clear(),!1;y!==this._state.term.toLowerCase()&&this.clearAttributes();var b=n&&n.resultsMessage,_=this._state.woeid;if(_&&(u=u+"&woeid="+_),o>0&&!this._state.listOpen){var g=this.getPlaceholders();this._state.listOpen=!0,this._state.placeholdersVisible=!0,this.showList(),a.appendChild(g)}var w={cache:1,cacheStrategy:"cacheFirst",timeout:v,useRid:0};"astra-cards"!==m&&"mail-assist"!==m||(w.credentials="include"),h(u.replace("{term}",y),w).then(function(e){var i=t._util.listElem;s.destroy(i);var n=t.getListMarkup(e,y),r=n.children.length;if(r?(t._state.placeholdersVisible=!1,t._state.listOpen=!0,t.showList()):(t._state.listOpen=!1,t.hideList()),b){var o=b.replace("{0}",r);s.liveAriaRegion.innerHTML=o}return a.appendChild(n),s.syncAssets(e.assets),d&&s.sync(a),!0}).catch(function(i){return t._state.placeholdersVisible&&t.clear(),s.emitError({name:e.name,elem:r,meta:{url:u},stack:i.stack}),r.classList.add(p),!1})}},{key:"createListElem",value:function(){var e=this._util,t=e.boundaryElem,i=e.target,n=e.placeholder,r=e.numPlaceholders,a=i&&(t||document.body).querySelector(i),o=f(a.getElementsByClassName("wafer-autocomplete-list"))[0];o||(o=document.createElement("ul"),o.classList.add("wafer-autocomplete-list")),this._util.targetElem=a,this._util.listElem=o,n&&r&&(this._util.placeholderElem=document.getElementById(n))}},{key:"showList",value:function(e){var t=this._util,i=t.boundaryElem,n=t.elem,r=t.listElem;e=e||r,e.style.opacity="1",e.classList.add("wafer-autocomplete-list-active"),i&&i.classList.add("wafer-autocomplete-active"),n.setAttribute("aria-expanded","true")}},{key:"hideList",value:function(e){var t=this._util,i=t.boundaryElem,n=t.elem,r=t.listElem;e=e||r,e.style.opacity="0",e.classList.remove("wafer-autocomplete-list-active"),i&&i.classList.remove("wafer-autocomplete-active"),n.setAttribute("aria-expanded","false")}},{key:"clearAttributes",value:function(){var e=this._util.elem;e.setAttribute("aria-activedescendant",""),e.setAttribute("data-assist-src",""),e.setAttribute("data-display-value",""),e.setAttribute("data-user-input",""),e.setAttribute("data-value","")}},{key:"clear",value:function(){var e=this,t=this._util.elem;this._state.active=!1,this._state.listOpen=!1,this._state.placeholdersVisible=!1,t.classList.remove("wafer-autocomplete-did-submit"),this.hideList(),setTimeout(function(){var t=e._util.listElem;s.destroy(t),t.innerHTML=""},100)}},{key:"submit",value:function(){var e=this._util,t=e.elem,i=e.formElem;if(t.classList.add("wafer-autocomplete-did-submit"),this.hideList(),i){var n=this._util.formInstance||y(i,"wafer-form");if(n){this._util.formInstance=n;n.instance.submitForm()}}this.didComplete(null,t.getAttribute("data-value")||t.value.toLowerCase())}},{key:"handleListItemSelect",value:function(e,t){if(e.classList.contains("delete-button")){var i=p(e,"wafer-autocomplete-item"),n=i.getAttribute("data-value"),r=this._util,a=r.assistData,o=r.listElem,s=r.saveLocationUrl,l=r.unifiedGeo,u=f(o.children);return t&&t.preventDefault(),i.parentNode.removeChild(i),u.length<=1&&this.clear(!0),void(n&&a&&l&&(a.removeSavedLocation(n),h(s,{body:JSON.stringify({requests:{g0:{resource:"WeatherLocationService.favoriteLocation",operation:"delete",params:{woeid:n,term:this._state.term}}}})}).catch(function(e){})))}if(e.classList.contains("wafer-autocomplete-item")){this.updateInputValue(e);var c=this._util,d=c.assistData,v=c.elem,m=c.saveLocationUrl,y=c.unifiedGeo,b=this._state.term;this._state.term=this._state.originalTerm=v.value;var _=e.getAttribute("data-value");if(_){e.classList.contains("wafer-autocomplete-currentlocaton-item")&&v.setAttribute("data-assist-src","assistCurrentLocation"),v.setAttribute("data-user-input",b),v.setAttribute("data-value",_),y&&d&&(d.isSavedLocation(_)||d.addSavedLocationUsingwoeid(_),h(m,{body:JSON.stringify({requests:{g0:{resource:"WeatherLocationService.favoriteLocation",operation:"create",params:{woeid:_,term:b}}}})}).catch(function(e){}))}this.clear(!0),this.submit()}}},{key:"stateDidUpdate",value:function(){}},{key:"destroy",value:function(){this.removeEventListeners()}},{key:"handleSelect",value:function(){this.getSuggestions()}},{key:"handleListClick",value:function(e){this.handleListItemSelect(e.target)}},{key:"handleInputKeydown",value:function(){var e=this._util.listElem,t=f(e.children),i=r(t,1),n=i[0];n&&(this.updateInputValue(n),n.focus())}},{key:"handleListDown",value:function(e){e.preventDefault();var t=this._util,i=t.elem,n=t.listElem,r=f(n.children),a=r.indexOf(e.target);if(a===r.length-1)return i.value=this._state.originalTerm,void i.focus();var o=r[a+1];this.updateInputValue(o),o.focus()}},{key:"handleInputKeyup",value:function(){var e=this._util.listElem,t=f(e.children),i=t[t.length-1];i&&(this.updateInputValue(i),i.focus())}},{key:"handleListUp",value:function(e){e.preventDefault();var t=this._util,i=t.elem,n=t.listElem,r=f(n.children),a=r.indexOf(e.target);if(0===a)return i.value=this._state.originalTerm,void i.focus();var o=r[a-1];this.updateInputValue(o),o.focus()}},{key:"handleListKeyDown",value:function(e){switch(e.which||e.code){case 13:this.handleListItemSelect(e.target,e);break;case 27:this._state.active=!1,this._util.elem.value=this._state.originalTerm||"",this.clearAttributes(),this.clear(),this._util.elem.focus();break;case 38:this.handleListUp(e);break;case 40:this.handleListDown(e)}}},{key:"handleKeyup",value:function(e){}},{key:"handleKeydown",value:function(e){var t=e.which||e.code,i=this._util,n=i.elem,r=i.submitOnClear,a=i.submitOnEnter;switch(n.classList.remove("wafer-autocomplete-did-submit"),this._state.active=!0,this._state.term=n.value,this.handleClearButtonVisibility(),t){case 13:this._state.originalTerm=this._state.term,a&&this.submit();break;case 27:this._state.active=!1,this.clearAttributes(),this.clear();break;case 8:this._state.originalTerm=this._state.term,this.getSuggestions();break;case 38:this.handleInputKeyup(e);break;case 40:this.handleInputKeydown(e);break;default:this._state.originalTerm=this._state.term,this.getSuggestions()}!this._state.term&&r&&this.submit()}},{key:"handleClearButtonVisibility",value:function(){var e=this._util.clearButton;if(e){this._util.elem.value?e.style.visibility="":e.style.visibility="hidden"}}},{key:"handleClearButtonClick",value:function(e){var t=this._util,i=t.elem,n=t.submitOnClear;i.value="",this.clearAttributes(),this._state.term=this._state.originalTerm="",this.clear(),i.focus(),this.handleClearButtonVisibility(),n&&this.submit()}},{key:"handleInputChange",value:function(e){""===e.target.value&&this.submit()}},{key:"handleOnfocus",value:function(e){this._state.active=!0,this.clearOthers()}},{key:"handleOnfocusOut",value:function(e){this._state.active=!1}},{key:"handleClickOutside",value:function(e){if(this._state.listOpen){var t=this._util,i=t.elem,n=t.listElem,r=e.waferComposedMap();r.get(i)||r.get(n)||(this._state.active=!1,this.clear(!1,{source:"clickOutside"}))}}}]),e}();t.default=L,e.exports=t.default},"./src/base.js":function(e,t,i){"use strict";function n(){return u=a(i("./src/assist.js"))}function r(){return c=a(i("./src/locationPicker.js"))}function a(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function l(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var u,c,d=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}(),f=function e(t,i,n){null===t&&(t=Function.prototype);var r=Object.getOwnPropertyDescriptor(t,i);if(void 0===r){var a=Object.getPrototypeOf(t);return null===a?void 0:e(a,i,n)}if("value"in r)return r.value;var o=r.get;if(void 0!==o)return o.call(n)},h=["lp-woeid"],p=window.wafer,v=p.WaferBaseClass,m=p.utils,y=m.debounce,b=["handleSelect","handleOnfocus","handleOnfocusOut"],_=["handleKeydown","handleKeyup"],g=function(e){function t(e){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=i.errorClass,l=i.successClass,d=i.selector;o(this,t);var p=s(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,{selector:d},{STATE_ATTRS:h}));e.classList.contains("wafer-location-picker")?p._instance=new((c||r()).default)(e,{errorClass:a,successClass:l,selector:d}):p._instance=new((u||n()).default)(e,{errorClass:a,successClass:l,selector:d}),b.forEach(function(e){p[e]=p[e].bind(p)}),_.forEach(function(e){p[e+"Debounce"]=y(p[e],300,p)});var v=p;return p._instance.clearOthers=function(){v.clearOthers.call(this)},p._instance.didComplete=function(e,t){p.didComplete(e,t)},f(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"addEventListeners",p).call(p),p}return l(t,e),d(t,[{key:"stateDidUpdate",value:function(){this._instance.stateDidUpdate(this._util)}},{key:"destroy",value:function(){this._instance.destroy()}},{key:"clear",value:function(e,t){this._instance.clear(e,t)}},{key:"removeEventListeners",value:function(){this._instance.removeEventListeners()}},{key:"handleSelect",value:function(e){this._instance.handleSelect.call(this._instance,e)}},{key:"handleKeydown",value:function(e){this._instance.handleKeydown.call(this._instance,e)}},{key:"handleKeyup",value:function(e){this._instance.handleKeyup.call(this._instance,e)}},{key:"handleOnfocus",value:function(e){this._instance.handleOnfocus.call(this._instance,e)}},{key:"handleOnfocusOut",value:function(e){this._instance.handleOnfocusOut.call(this._instance,e)}},{key:"handleClickOutside",value:function(e){this._instance.handleClickOutside.call(this._instance,e)}}]),t}(v);g.events={click:[["wafer-autocomplete","handleSelect"]],focusin:[["_self","handleOnfocus"]],focusout:[["_self","handleOnfocusOut"]],keydown:[["_self","handleKeydownDebounce"]],keyup:[["_self","handleKeyupDebounce"]]},t.default=g,e.exports=t.default},"./src/controller.js":function(e,t,i){"use strict";function n(){return l=r(i("./src/base.js"))}function r(e){return e&&e.__esModule?e:{default:e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var l,u=function(){function e(e,t){var i=[],n=!0,r=!1,a=void 0;try{for(var o,s=e[Symbol.iterator]();!(n=(o=s.next()).done)&&(i.push(o.value),!t||i.length!==t);n=!0);}catch(e){r=!0,a=e}finally{try{!n&&s.return&&s.return()}finally{if(r)throw a}}return i}return function(t,i){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,i);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),c=window.wafer.controllers.WaferBaseController,d=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},i=e.errorClass,r=void 0===i?"wafer-autocomplete-error":i,s=e.root,c=void 0===s?document:s,d=e.selector,f=void 0===d?"wafer-autocomplete":d,h=e.successClass,p=void 0===h?"wafer-autocomplete-complete":h;a(this,t);var v=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,{root:c,selector:f,props:{errorClass:r,selector:f,successClass:p},WaferClass:(l||n()).default})),m=v;return(l||n()).default.prototype.clearOthers=function(){var e=this._util.elem,t=m._state.elementInstances,i=!0,n=!1,r=void 0;try{for(var a,o=t.entries()[Symbol.iterator]();!(i=(a=o.next()).done);i=!0){var s=u(a.value,2),l=s[0],c=s[1];l!==e&&c.instance.clear(!1,{source:"clearOthers"})}}catch(e){n=!0,r=e}finally{try{!i&&o.return&&o.return()}finally{if(n)throw r}}},v.sync(),v}return s(t,e),t}(c);t.default=d,e.exports=t.default},"./src/data.js":function(e,t,i){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}(),a=function(){function e(){n(this,e),this.locations=[],this.savedLocationsUuidMapping={},this.savedLocationsUuids=[]}return r(e,[{key:"addLocation",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.woeid;this.locations[t+""]=e}},{key:"addSavedLocation",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.woeid;t+="",this.savedLocationsUuidMapping[t]=e,this.savedLocationsUuids.push(t)}},{key:"isSavedLocation",value:function(e){return this.savedLocationsUuidMapping[e]}},{key:"removeSavedLocation",value:function(e){this.savedLocationsUuidMapping[e]={},delete this.savedLocationsUuidMapping[e];var t=this.savedLocationsUuids.indexOf(e);-1!==t&&this.savedLocationsUuids.splice(t,1)}},{key:"addSavedLocationUsingwoeid",value:function(e){var t=this.locations[e];this.savedLocationsUuidMapping[e]=t,this.savedLocationsUuids.unshift(e)}}]),e}();t.default=a,e.exports=t.default},"./src/entry.js":function(e,t,i){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r;t.default=new((r||function(){return r=n(i("./src/controller.js"))}()).default)({selector:".wafer-autocomplete"}),e.exports=t.default},"./src/locationPicker.js":function(e,t,i){"use strict";function n(){return u=r(i("./src/data.js"))}function r(e){return e&&e.__esModule?e:{default:e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var l,u,c=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&(e[n]=i[n])}return e},d=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}(),f=function e(t,i,n){null===t&&(t=Function.prototype);var r=Object.getOwnPropertyDescriptor(t,i);if(void 0===r){var a=Object.getPrototypeOf(t);return null===a?void 0:e(a,i,n)}if("value"in r)return r.value;var o=r.get;if(void 0!==o)return o.call(n)},h=window.wafer,p=h.base,v=h.constants,m=h.utils,y=v.ATTR_PREFIX,b=m.fetchWithCache,_=m.findAncestor,g=m.getTemplateContent,w=m.getWaferInstanceForElem,O=void 0,L=function(e){function t(e){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=(i.errorClass,i.successClass,i.selector);a(this,t);var s=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,{selector:r})),l=e.getAttribute(y+"lp-target"),d=e.getAttribute(y+"lp-url"),f=e.getAttribute(y+"lp-currentlocation-template-target-id")||"wafer-autocomplete-currentlocation-item";if(!l||!d)return o(s);var h=document.getElementById(f);if(!O){var p=document.getElementById("wafer-autocomplete-delete-button");O=p&&g(p)}var v=h&&g(h),m=e.getAttribute(y+"lp-boundary"),b=e.getAttribute(y+"lp-saved-url"),w=e.getAttribute(y+"lp-submit-on-enter"),L=e.getAttribute(y+"lp-trigger")||"default",k=m&&_(e,m),E=e.getAttribute(y+"lp-timeout"),C=e.getAttribute(y+"lp-type")||"weather",A=e.getAttribute(y+"lp-unified-geo"),j=e.getAttribute(y+"lp-skip-rerender-on-focus-others"),T=e.getAttribute(y+"lp-woeid");return s._util=c({},s._util,{assistData:new((u||n()).default),boundaryElem:k,currentLocationTemplate:v,deleteButtonText:O,saveLocationUrl:b,submitOnEnter:null===w||void 0===w?1:Number(w),target:l,trigger:L,type:C,unifiedGeo:null===A||void 0===A?0:Number(A),url:d,skipReRenderOnOnFocusOthers:null===j||void 0===j?0:Number(j),timeout:null===E||void 0===E?6e3:Number(E)}),s._state=c({},s._state,{woeid:T}),s.createListElem(),s.addEventListeners(),s.fetchAndRenderSavedLocations(),s}return s(t,e),d(t,[{key:"fetchAndRenderSavedLocations",value:function(){var e=this,t=this._util,i=t.assistData,n=t.elem,r=t.saveLocationUrl,a=t.timeout,o=t.trigger;r&&b(r,{cache:1,cacheStrategy:"networkFirst",timeout:a,useRid:0}).then(function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.data,r=void 0===n?[]:n;return i&&r.forEach(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};i.addSavedLocation(e)}),"input"!==o&&e.renderSavedLocation(),!0}).catch(function(e){return p.emitError({name:"WaferAutoComplete",elem:n,meta:{url:r},stack:e.stack}),!1})}},{key:"renderSavedLocation",value:function(){var e=this._util,t=e.ariaConfig,i=e.assistData,n=e.currentLocationTemplate,r=e.deleteButtonText,a=e.idIndex,o=e.listElem,s=e.targetElem,l=document.createDocumentFragment();if(!i.savedLocationsUuids.length)return void this.clear(!0);var u=t&&t.resultsMessage;if(n){var c=document.createElement("li");c.innerHTML=n;var d=c.children[0];d.classList.add("wafer-autocomplete-currentlocaton-item","wafer-autocomplete-item"),d.setAttribute("tabindex",0),d.setAttribute("role","option"),d.setAttribute("id","wf-autocomplete-saved-result-"+a+"-0"),l.appendChild(d)}if(i.savedLocationsUuids.forEach(function(e,t){var n=i.savedLocationsUuidMapping[e]||{},o=n.qualifiedName;if(o){var s=document.createElement("li");s.classList.add("wafer-autocomplete-item","wafer-autocomplete-saved-item"),s.setAttribute("tabindex",0),s.setAttribute("role","option"),s.setAttribute("data-value",e),s.setAttribute("id","wf-autocomplete-saved-result-"+a+"-"+(t+1)),s.innerHTML=o,r&&(s.innerHTML+=r),l.appendChild(s)}}),p.destroy(o),o.innerHTML="",o.appendChild(l),this._state.active=!0,this.showList(),u){var f=o.children.length,h=u.replace("{0}",f);p.liveAriaRegion.innerHTML=h}s.appendChild(o)}},{key:"getSuggestions",value:function(){var e=this._util,i=e.elem,n=e.trigger,r=i.value;"input"!==n||r||this.renderSavedLocation(),f(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"getSuggestions",this).call(this)}},{key:"submit",value:function(){var e=this._util,t=e.elem,i=e.formElem,n=t.getAttribute("data-value")||t.value.toLowerCase();if(t.classList.add("wafer-autocomplete-did-submit"),this._state.woeid=n,this.hideList(),i){var r=this._util.formInstance||w(i,"wafer-form");if(r){this._util.formInstance=r;r.instance.submitForm()}}this.didComplete(null,n)}},{key:"stateDidUpdate",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e["lp-woeid"];t&&(this._state.woeid=t)}},{key:"clear",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=i.source,r=void 0===n?"":n,a=this._util,o=a.trigger,s=a.skipReRenderOnOnFocusOthers;if("input"===o&&"clickOutside"===r)return void f(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"clear",this).call(this,e,{source:r});if(e)f(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"clear",this).call(this,e,{source:r});else{if(s&&"clearOthers"===r)return;this.renderSavedLocation()}}}]),t}((l||function(){return l=r(i("./src/assistBase.js"))}()).default);t.default=L,e.exports=t.default}})});