"use strict";window.wafer&&window.wafer.ready(function(){var n=window.encodeURIComponent(document.location.href);window.wafer.on("fetch:success",function(e){var t=e.elem;if(t.classList&&t.classList.contains("stream-batch-fetch")){var a="https://sb.scorecardresearch.com/p2?c1=2&c2=7241469&c14=-1&ns_c=UTF-8",r=window.rapidPageConfig&&window.rapidPageConfig.rapidConfig&&window.rapidPageConfig.rapidConfig.spaceid;if(a&&r){a=a+"&c5="+r+"&c7="+n+"&ns__t="+Date.now().toString();var i=window.__cmp;i?i("getVendorConsents",null,function(e,t){t&&e&&e.gdprApplies&&e.vendorConsents&&(a+="&cs_ucfr="+(e.vendorConsents[77]?1:0)),window.wafer.utils.fireBeacon(a,{useNavigator:!1,useTimestamp:!1})}):window.wafer.utils.fireBeacon(a,{useNavigator:!1,useTimestamp:!1})}}});var u="show-drawer",f=null,w=null,m=null,g="stream-uuid-list",o="userintent-disliked-anim",d="data-uuid",t="youmaylike",h=[],c=document.querySelector(".stream-items"),s=document.querySelector(".stream-ad-fetch"),l=window.innerWidth||document.documentElement.clientWidth,r="data-ad-fb-hover-beacon",v={};if(c){if(c.addEventListener("animationend",function(e){var t=e&&e.target;e&&t&&("hideStreamItem"===e.animationName||"fadeOutAdConfirm"===e.animationName)&&t.parentNode&&t.parentNode.removeChild(t)}),c.addEventListener("click",function(e){var t=e.target;if(t.classList.contains("userintent-undo")){var a=t.getAttribute("data-wf-toggle-target"),r=c.querySelector(a);if(r){var i=r.getAttribute(d);i&&v[i]&&clearTimeout(v[i])}}}),s&&window.wafer.base&&window.wafer.utils){var e=s.getAttribute("data-wf-url"),a=s.getAttribute("data-wf-state-body");window.wafer.utils.fetchWithCache(e,{body:a,cache:0}).then(function(e){if(e&&e.html){s.innerHTML=e.html;var t=s.querySelectorAll(".stream-ad"),a=c.querySelectorAll(".stream-ad-placeholder");if(t&&a)for(var r=t.length,i=a.length,n=0;n<i&&n<r;n++)a[n].replaceWith(t[n]);s.innerHTML="",window.wafer.base.sync(c)}})}var i=c.querySelectorAll(".js-sponsored-moments-dwell-time");if(i.length){i.forEach(function(e){e.classList&&e.classList.contains("js-reserve-moments")&&(window.DARLA?function e(t){var a=Math.floor(16*l/9),r=t.querySelector("#defaultRESERVEMOMENTS"),i=r&&r.getAttribute("data-html");if(i)if(window.DARLA.inProgress())setTimeout(function(){e(t)},500);else{var n={dest:"defaultRESERVEMOMENTS",flex:{h:{min:a},w:{min:l}},h:a,id:"RESERVEMOMENTS",supports:{"exp-ovr":1,"exp-push":1,"resize-to":1},w:l};window.DARLA.addPos(n);var s=new window.DARLA.Response("RESERVEMOMENTS",{});i=unescape(i),s.add("RESERVEMOMENTS",i),window.DARLA.render(s)}}(e):e.style.display="none")});var y=i[0].querySelector(".js-panorama-scroll-view");y&&0===y.scrollLeft&&(y.scrollLeft=(y.scrollWidth-l)/2)}c.addEventListener("mouseover",function(e){var t=window.wafer.utils.findAncestor(e.target,"stream-ad");if(t){var a=t.getAttribute(r);a&&(window.wafer.utils.fireBeacon(a),t.setAttribute(r,""))}})}window.addEventListener("viewerOpened",function(e){var t=e&&e.detail&&e.detail.uuid;if(t){var a=document.querySelector('li[data-uuid="'+t+'"]'),r=a&&a.getAttribute("data-parent-uuid");if(f=r&&document.querySelector('li[data-uuid="'+r+'"]')||a,m=f&&f.getElementsByClassName("stream-related-drawer")[0]){if(f.classList.contains(u))return;var i={config:{relatedUuid:t},ctrl:"StreamRelated",m_id:"tdv2-wafer-stream",m_mode:"json"},n={dedupeUUIDs:function(){for(var e=Array.prototype.slice.call(document.getElementsByClassName(g)),t=0;t<e.length;t++){var a=e[t],r=a.text;a.classList.remove(g);try{var i=JSON.parse(r);i&&Array.isArray(i.uuidList)&&h.length+i.uuidList.length<=250&&(h=h.concat(i.uuidList))}catch(e){}}return{dedupeUUIDs:h}}().dedupeUUIDs.join(","),uuid:t},s=m.getAttribute("data-cfg");if(s)try{var o=JSON.parse(s);o&&o.i13n&&(w=o.i13n),i.config=Object.assign(i.config,o)}catch(e){}i.config.tachyonParams=i.config.tachyonParams||{},i.config.tachyonParams.query=i.config.tachyonParams.query||{},i.config.tachyonParams.query.where=Object.assign(n,i.config.tachyonParams.query.where);var d=window.wafer.base.state.drawer,c=d&&d.adsToken;if(c){var l={query:{where:{ads_dedup_token:c}}};i.config.adTachyonParams=Object.assign(i.config.adTachyonParams||{},l)}m.setAttribute("data-wf-body",JSON.stringify(i)),m.classList.remove("wafer-fetch-error","wafer-fetch-complete"),m.classList.add("wafer-fetch"),window.wafer.base.sync(m.parentNode)}}}),window.addEventListener("viewerClosed",function(){if(f&&!f.classList.contains(u)){var e=m&&!!m.getElementsByClassName("stream-realted-list")[0];e&&f.classList.add(u),e&&w&&window.rapidInstance&&window.rapidInstance.beaconClick("strm",t,0,Object.assign(w,{_p:0,cnt_tpc:w.categoryLabel,g:f.getAttribute(d),grpt:"storyCluster",itc:1,pkgt:t})),w="",f=m=null}});window.wafer.on("toggle:change",function(e){if(e&&e.meta&&e.elem){var t=e.elem.getAttribute("data-wf-toggle-target");if("userintent-hidestrmitem"===e.meta.className&&"add"===e.meta.action){if(t&&c){var a=c.querySelector(t),r=a&&a.getAttribute(d);r&&(v[r]=setTimeout((s=a,function(){s.classList.contains(o)||s.classList.add(o)}),8e3))}}else if("show-drawer"===e.meta.className){var i=c.querySelector(t),n=i&&i.getElementsByClassName("drawer-fetch-target")[0];setTimeout(function(){n&&(n.innerHTML="")},300)}}var s})});