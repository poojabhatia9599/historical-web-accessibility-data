(function(){var o=window;var I=document;var v=o.YAHOO||{};var r=o.DARLA||null;var d=o&&o.wafer;var L;var k="viewerClosed";var Q="viewerOpened";var B="homepage-viewer";var f="pageVisibilityChange";var N="scroll";var T="adRotateEvt";var p="AUTO";var F="tabswitch";var y="my-ads";var n=y+"LREC2-config";var K=y+"UBALREC2-config";var G="sticky-lrec2-footer";var m="my-adsLREC4-base";var O="2023538075";var P=100;var g;var e;var q;var U;var j="native-leaderboard-ad";var R="gemini-ad-refresh";var M;var W;var i;var h=false;var x=Date.now||function(){return new Date().getTime();};if(!d){return;}d.ready(function(){L=d.base||{};A();});function H(Y){var X=["autorotate","disablerotation","lrec2selectiveenabled","lrec4enabled","mon2enabled"];for(var Z=0;Z<X.length;Z++){Y[X[Z]]=!!+Y[X[Z]];}}function b(X){if(!X||typeof X!=="string"){return"";}var Z;try{Z=JSON.parse(X);}catch(Y){return"";}return Z;}function A(){q=I.getElementById(n)||I.getElementById(K);if(!q||!q.dataset){return;}g=b(JSON.stringify(q.dataset));if(!g||!g.config){return;}H(g);U=b(g.config);if(!U){return;}e=I.getElementById(y+U.pos);if(!r||!e){return;}var aa={offsetX:0,offsetY:parseInt(g.offset,10)||P};d.on(N,u);o.addEventListener(Q,function X(){h=true;});o.addEventListener(k,function Z(){h=false;z();});setTimeout(function(){V();a();u(aa);},300);var Y=I.getElementsByClassName(j);if(Y&&Y.length>0){M=Y[0];}}function l(X,Y){Y=Y||{};return d.utils.elementInView(X,Y,L.viewport);}function u(X){if(h){return;}if(l(e,X)){s();d.removeListener(N,u);}}function a(){i=parseInt(g.tabswitchrotate,10)||0;if(!i){return;}W=x();d.on(f,J);if(window.addEventListener){window.addEventListener("focus",function(){J({isActive:true});});window.addEventListener("blur",function(){J({isActive:false});});}}function t(Y,ai,aj){var ac=ai[Y].extrapositions&&ai[Y].extrapositions.split(",")||[];if(ai[Y].inview){var ag=true;var aa=[].concat(ai[Y].inview.split(","));for(var ab=0;ab<aa.length;ab++){var X=aa[ab];var ae=r.posSettings(X);if(ae){var ah=document.getElementById(ae.dest);if(!l(ah)){ag=false;}}}if(ag){var ad=[].concat(aa,ac);for(ab=0;ab<ad.length;ab++){nAdPos=ad[ab];if(aj.indexOf(nAdPos)<0){aj.push(nAdPos);}}}}else{for(var Z=0;Z<ac.length;Z++){var af=ac[Z];if(aj.indexOf(af)<0){aj.push(af);}}}}function J(ae){if(!ae.isActive){W=x();return;}if(ae.isActive){var Z=x();if(Z-W<i||!r||r.inProgress()){return;}if(!o._darlaAutoEvt){o._darlaAutoEvt=S();}var ag=o._darlaAutoEvt.ps;var ad=["MON"];var al=[];var am=g.adboostgrouprotation;var ak;if(am){try{ak=JSON.parse(am);}catch(ah){}}if(o.pageloadValidAds&&o.pageloadValidAds.indexOf("UBALREC")>=0){ad.push("UBALREC");ad.push("UBALREC2");ad.push("UBALREC3-9");}var Y={};if(h){var X=r.evtSettings("homepage-viewer");if(X&&X.ps){ad=X.ps.split(",");}Y=r.evtSettings("AUTO");}else{for(var aj in ag){if(ag.hasOwnProperty(aj)){ad.push(aj);}}}for(var af=0;af<ad.length;af++){var ac=ad[af];var ab=r.posSettings(ac);if(ab&&ab.dest){var ai=document.getElementById(ab.dest);if(ai&&l(ai,0)&&ai.offsetHeight>1){al.push(ac);if(!h&&ak&&ak[ac]){t(ac,ak,al);}}}}if(al.length){var aa={ps:al.join(","),name:F,sp:Y.sp||o._darlaAutoEvt.sp,sa:Y.sa||o._darlaAutoEvt.sa,ssl:o._darlaAutoEvt.ssl,secure:o._darlaAutoEvt.secure,ref:o.location.href,npv:1,property:"fp",ult:Y.ult||o._darlaAutoEvt.ult,experience:o._darlaAutoEvt.experience};o.DARLA.add(aa);o.DARLA.event(F);}return;}}function s(){if(!g){return;}var ad=U;var ai;var al;var ae;var ak="";var ah;var ag;var an=[ad];var aa=g.lrec4pos||"LREC4";var ap=y+aa;var aj=I.getElementById(ap);var Z=aj&&aj.dataset&&aj.dataset.config;var af=Z&&b(Z)||w(aa,ap,ap+"-iframe",300,250);var ac=g.mon2pos||"MON2";var X=y+ac;var am=I.getElementById(X);var ao=am&&am.dataset&&am.dataset.config;var Y=ao&&b(ao)||w(ac,X,X+"-iframe",300,600);if(ad){ai=ad.pos;ad.id=ai;ak+=ai;}if(g.lrec4enabled){al=af.pos;ak+=","+al;an.unshift(af);}if(g.mon2enabled){ae=Y.pos;ak+=","+ae;an.push(Y);}ag="fetch_selective_ad_"+ai.toLowerCase();ah=E(ak,ag);if(r.inProgress()){var ab=r.inProgress();if(ab&&ab===B){r.abort();r.add(ah);r.addPos(an);r.event(ag);}else{D();return;}}else{if(g.lrec2selectiveenabled){r.add(ah);r.addPos([an]);r.event(ag);}}V();}function z(){if(!r||!o.pageloadNonCollapsedAds){return;}var ak;var am=[];var aj=o.pageloadNonCollapsedAds;var al=["LREC","MAST","LDRB","UBALDRB","UBALREC"];for(var ab=0;ab<al.length;ab++){var Y=al[ab];if(aj.indexOf(Y)>=0){var ag=I.getElementById(y+Y);if(ag&&l(ag)){am.push(Y);}}}if(am.length){ak=E(am,T);C(ak,true);}else{if(aj.indexOf("FPAD")>=0&&o.safeframeOptinPositions&&o.safeframeOptinPositions.FPAD){ak=E("FPAD",T);var ae=r.config();var ac=I.getElementById(y+"FPAD");var ah=!!(ae&&ae.positions&&ae.positions.FPAD);if(ah&&ac&&l(ac)){C(ak);}}}if(!g){return;}var X=I.getElementById(G);var aa=I.getElementById(m);if(X&&l(X)||aa&&l(aa)){var ai=[];var ad=b(g.config);var an=ad&&ad.pos||"";an&&ai.push(an);if(g.mon2enabled){ai.push("MON2");if(g.lrec4enabled&&g.lrec4pos){ai.push(g.lrec4pos);}}else{if(g.lrec4enabled&&g.lrec4pos){ai.push(g.lrec4pos);}}if(ai.length){var Z="fetch_selective_ad_"+an.toLowerCase();var af=E(ai.join(","),Z);r.add(af);r.event(Z);}}V();if(M){if(l(M)){c();}}}function D(){var X=0;var Y=setInterval(function(){if(X>20){clearInterval(Y);return;}if(!r.inProgress()){clearInterval(Y);s();}X++;},500);}function w(ab,Z,Y,aa,X){return{pos:ab,clean:Z,dest:Y,w:aa,h:X,metaSize:true,supports:false};}function E(ab,ad,af){var ae=v.context||{};var ag={pg:{property:"fp",test:ae.bucketId,intl:ae.intl,rid:ae.rid,device:ae.device}};var Y={ps:ab,name:ad,sp:ae.spaceid||O,ssl:ae.isSsl||1,secure:1,ref:o.location.href,npv:1,property:"fp",ult:ag,experience:{pt:"index",pd:"modal",rid:ae.rid||"",sid:v.i13n&&v.i13n.currentSID||"",bucket:ae.bucketId||""}};for(var aa in af){if(af.hasOwnProperty(aa)){Y[aa]=af[aa];}}if(o.bucketSAEnabled){var Z=ae.bucketId&&'Y-BUCKET="'+ae.bucketId+'"'||"";if(o.facCustomTimout&&o.facCustomTimout>0){Z+=" ctout="+o.facCustomTimout;}if(o.flSAKey&&"undefined"!==o.flInstalled){Z+=" "+o.flSAKey+"="+o.flInstalled;}if(o.segBlob){var ac="";var X="";for(var ah in o.segBlob){if(o.segBlob.hasOwnProperty(ah)){ac+=X+ah+":"+o.segBlob[ah];X=";";}}Z+=' rs="'+ac+'"';}Z+=" "+(o.customSiteAttr||"");Y.sa=Z;}return Y;}function S(){var ag=!!+g.disablerotation;var ae={};var Y=g.currentpos.toLowerCase();g[Y+"enabled"]=true;var X=g.defaultrt;var af=o.pageloadNonCollapsedAds||[];var ac=[Y,"lrec4","mon2","mast","ldrb","lrec","mon"];if(ag){return null;}for(var Z=0;Z<ac.length;Z++){var ab=ac[Z];if(g[ab+"enabled"]||(g[ab+"rt"]&&af.indexOf(ab.toUpperCase())!==-1)){ae[ab.toUpperCase()]={autoIV:1,autoMax:25,autoRT:g[ab+"rt"]||X};}}var aa={autoStart:1,autoMax:25,autoRT:g.autoeventrt,autoIV:1,autoDDG:1};if(g.grouprotation){try{aa.groups=JSON.parse(g.grouprotation);}catch(ad){}}return E(ae,p,aa);}function V(){if(g.autorotate){if(r&&r.inProgress()){setTimeout(function(){V();},500);}else{o._darlaAutoEvt=S();if(r&&o._darlaAutoEvt){r.add(o._darlaAutoEvt);if(!r.isAutoOn()){r.startAuto();}}}}}function c(){if(!M){return;}var X=M.getElementsByClassName(R);if(X&&X.length>0){X=X[0];var aa=X.getAttribute("data-url");var Y=X.getAttribute("data-body");if(aa&&Y&&window.wafer&&window.wafer.utils&&window.wafer.utils.fetchWithCache){window.wafer.utils.fetchWithCache(aa,{body:Y,cache:0}).then(function Z(ac){if(ac&&ac.html){X.innerHTML=ac.html;var ab=X.getElementsByClassName(j);if(ab&&ab.length>0){M.replaceWith(ab[0]);var ad=I.getElementsByClassName(j);if(ad&&ad.length>0){M=ad[0];window.wafer.base.sync(M.parentElement);}}}});}}}function C(Y,X){X=X||false;if(r.inProgress()){if(r.inProgress()===B){r.abort();if(X&&o._darlaAutoEvt&&o._darlaAutoEvt.ps){r.add(o._darlaAutoEvt);}r.add(Y);r.event(T);}}else{if(X&&o._darlaAutoEvt&&o._darlaAutoEvt.ps){r.add(o._darlaAutoEvt);}r.add(Y);r.event(T);}}})();/* Copyright (c) 2019, Yahoo! Inc.  All rights reserved. */
