require=function e(t,n,i){function r(a,s){if(!n[a]){if(!t[a]){var l="function"==typeof require&&require;if(!s&&l)return l(a,!0);if(o)return o(a,!0);throw new Error("Cannot find module '"+a+"'")}var c=n[a]={exports:{}};t[a][0].call(c.exports,function(e){var n=t[a][1][e];return r(n?n:e)},c,c.exports,e,t,n,i)}return n[a].exports}for(var o="function"==typeof require&&require,a=0;a<i.length;a++)r(i[a]);return r}({TL7Kjz:[function(e,t,n){"use strict";function i(e){var t;return t="html"===e?{acceptedProtocols:["http"],preferredFormats:_,acceptedFormats:y}:"dash"===e?{acceptedProtocols:["http"],preferredFormats:["mp4dash"],acceptedFormats:["mp4dash","mpd"]}:{acceptedProtocols:["http","rtmp"],preferredFormats:["m3u8","mp4","flv","f4m"],acceptedFormats:["m3u8","m3u8_playlist","mp4","flv","f4m",""]}}function r(e){return"probably"===e}t.exports=i;var o,a=e("./user-agent"),s=e("../nextgen/src/util"),l=document.createElement("video");try{if(o=!1,l.canPlayType){var c=l.canPlayType('application/vnd.apple.mpegURL; codecs="avc1.42E01E, mp4a.40.2"');o=a.android?!!c:r(c),!o&&a.tv&&(o=r(l.canPlayType("application/vnd.apple.mpegurl")))}}catch(p){o=!1}a.tv&&(window.noHLS&&(o=!1),window.hls&&(o=!0));var d;try{d=l.canPlayType?r(l.canPlayType('video/mp4; codecs="avc1.42E01E, mp4a.40.2"')):!1}catch(p){d=!1}var u;try{u=l.canPlayType?r(l.canPlayType('video/webm; codecs="vp8, vorbis"')):!1}catch(p){u=!1}a.tv&&(u=!1);var _=[];if(a.android&&_.push("mp4b"),(o||a.android&&s.isAndroidVersionAbove4())&&_.push("m3u8"),d&&_.push("mp4"),u){var v=_.indexOf("mp4");a.firefox&&v>-1?_.splice(v,0,"webm"):_.push("webm")}var y=_.slice(),m=y.indexOf("mp4b");m>-1&&y.splice(m+1,0,"mp4"),y.push("")},{"../nextgen/src/util":"jJTEqU","./user-agent":"ty5FFo"}],"./lib/capability.js":[function(e,t,n){t.exports=e("TL7Kjz")},{}],"./lib/event-bus.js":[function(e,t,n){t.exports=e("3ECu9u")},{}],"3ECu9u":[function(e,t,n){"use strict";function i(e){var t=this;t.name=e?e:"unnamed",t._events={},t._noLogEvents={"controls-bar-change":1,"cc-position-float":1,beaconSend:1,"seek-bar-mouseover":1,"seek-bar-mouseout":1,"volume-hover":1}}t.exports=i;var r=e("./logger");i.prototype.subscribe=function(e,t,n){function i(){r._unsubscribe(e,o)}var r=this;if(r._events){r._events[e]||(r._events[e]=[]);var o={subscriber:n,cb:t};return r._events[e].push(o),i.detach=i,i}},i.prototype._unsubscribe=function(e,t){var n=this;if(n._events&&e in n._events){var i=n._events[e].indexOf(t);i>-1&&n._events[e].splice(i,1)}},i.prototype.publish=function(e){var t=this;if(t._events){var n=Array.prototype.slice.call(arguments,1);if(e in t._events){var i=t._events[e].slice(0);t._log(e,i.length,n);for(var o=0;o<i.length;o++)try{i[o].cb.apply(i[o].subscriber,Array.prototype.slice.call(arguments,1))}catch(a){r.error("error in event handler:",a.message||a,a.stack)}}else t._log(e,0,n)}},i.prototype._log=function(e,t,n){var i=this,o=e.toLowerCase();if(-1===o.indexOf("timeupdate")&&-1===o.indexOf("progress")&&!(e in i._noLogEvents)){var a=["["+i.name+" bus][event]["+e+"]["+t+" subscribers]",n];!n.length&&a.pop(),r.log.apply(r,a)}},i.prototype.destroy=function(){var e=this;e._events=null}},{"./logger":"IS9j5T"}],"./lib/index.js":[function(e,t,n){t.exports=e("bRhrlU")},{}],bRhrlU:[function(e,t,n){function i(e){return Object.prototype.toString.call(e)}n.isArray=function(e){return Array.isArray(e)},n.isBoolean=function(e){return"boolean"==typeof e},n.isNullOrUndefined=function(e){return null==e},n.isNumber=function(e){return"number"==typeof e&&!isNaN(e)},n.isString=function(e){return"string"==typeof e},n.isObject=function(e){return"[object Object]"===i(e)},n.isFunction=function(e){return"function"==typeof e}},{}],"./lib/logger.js":[function(e,t,n){t.exports=e("IS9j5T")},{}],IS9j5T:[function(e,t,n){var i=e("./index"),r=e("./user-agent");n.keepConsoleLogs="undefined"==typeof false||false,r.phantomJS&&(n.keepConsoleLogs=!1),function(){var e=function(){},t=["log","error","warn"];t.forEach(function(t){if(i.isNullOrUndefined(window.console)||"log"===t&&!n.keepConsoleLogs)n[t]=e;else if(console[t].apply)n[t]=function(){window.console[t].apply(console,arguments)};else{var r=Function.prototype.bind.apply(console[t],console);n[t]=function(){r.apply(console,arguments)}}})}()},{"./index":"bRhrlU","./user-agent":"ty5FFo"}],"./lib/user-agent.js":[function(e,t,n){t.exports=e("ty5FFo")},{}],ty5FFo:[function(e,t,n){"use strict";function i(e){if(null===e)return!1;var t=e[1];return parseFloat(t.split(".",2).join("."))||1}var r=/<[A-Za-z]+.*?(\/>|>.*?<\/[A-Za-z]+>)|javascript:/g,o=navigator.userAgent.toLowerCase().replace(r,"");n.ua=o,n.chromium=i(/chromium\/([^\s]*)/.exec(o)),n.chrome=!n.chromium&&i(/chrome\/([^\s]*)/.exec(o)),n.ie=i(/msie ([^;]*)/.exec(o))||i(/trident.*; rv:([0-9.]+)/.exec(o)),n.opera=/opr\/|opera\//.test(o),n.firefox=i(/firefox\/([^\s]*)/.exec(o)),n.android=/android/.test(o),n.androidTablet=n.android&&!/mobile/.test(o),n.htc_one=/htc_one/.test(o),n.vizio=/Vizio/i.test(o)||window.YAHOO&&window.YAHOO.SmartTV&&"vizio"===window.YAHOO.SmartTV.manufacturer,n.tivo=/TiVo/i.test(o),n.firetv=n.android&&/amazonwebappplatform/.test(o)&&/aft/.test(o),n.samsung=/smarttv/.test(o)||/tizen/.test(o),n.sony=/(sony)/.test(o),n.ios=/(ipad|iphone|ipod)/.test(o),n.iphone=/(iphone|ipod)/.test(o)&&!/ipad/.test(o),n.ipad=n.ios&&!n.iphone,n.androidBrowser=!n.chrome&&/android/.test(o),n.androidVersion=i(/android\s([0-9\.]*)/.exec(o)),n.safari=!n.chrome&&!n.chromium&&!n.android&&/safari\/([^\s]*)/.test(o)&&i(/version\/([^\s]*)/.exec(o)),n.iosWebView=n.ios&&!navigator.standalone&&!n.safari,n.mobile=n.ios||n.android,n.safariDesktop=!n.mobile&&n.safari,n.tv=n.vizio||n.tivo||n.firetv||n.samsung||n.sony,n.desktop=!n.mobile&&!n.tv,n.phantomJS=window.window&&window.window._phantom,n.tv?n.vizio?n.os="vizio":n.tivo?n.os="tivo":n.firetv?n.os="firetv":n.samsung?n.os="samsung":n.sony?n.os="sony":n.os=null:n.ios?n.os="ios":n.android?n.os="android":/windows|win32/.test(o)?n.os="windows":/macintosh|mac_powerpc/.test(o)?n.os="macintosh":/symbos/.test(o)?n.os="symbos":/linux/.test(o)?n.os="linux":n.os=null},{}],11:[function(e,t,n){"use strict";function i(e,t,n,i){var r=this,o=n.YVAP;if(!o||!o.accountId&&!o.standaloneAd)return void(r._enabled=!1);r._enabled=!0,r._ads={},r._eventBus=e,r._model=n,r._view=i,r._adBreaks=[],r._lastBreaks=[],r._seeked=!1;var a=r._view.rootElem.querySelector(".yvp-content");a.setAttribute("id","yvp-content-node-"+Math.floor(1e4*Math.random())),t.skipAd=function(){r._enabled&&r._currentAdId&&(r.cancelAd(),r._maybePlayImpl())},o.volume=n.playbackState.volume,o.mute=n.playbackState.mute,r._view._profiler.add(s.Metrics.YVAP_READY),r._yvap=new v({yvap:o},r._eventBus,a,t,r._view.adsOverlay?r._view.adsOverlay.node:null),r._view._profiler.setEndTime(s.Metrics.YVAP_READY),r._targetBitrate=r._model.playback.desiredBitrate,r._eventBus.subscribe(s.ADS_OBJS_UPDATE,r._onAdsUpdate,r),r._eventBus.subscribe(s.ADS_READY,r._onAdsReady,r),r._eventBus.subscribe(s.AD_BREAK_TIMELINE,r._onAdBreakTimeline,r),r._eventBus.subscribe(s.AD_PLAYBACK_ENDED,r._onAdPlaybackEnded,r),r._eventBus.subscribe(s.Ad.PLAYING,r._onPlaying,r),r._eventBus.subscribe(s.Ad.PAUSE,r._onPaused,r),r._eventBus.subscribe(s.Ad.TIMEUPDATE,r._onTimeupdate,r),r._eventBus.subscribe(s.Ad.ENDED,r._onEnded,r),r._eventBus.subscribe(s.Ad.ERROR,r._onError,r),r._eventBus.subscribe(s.Ad.CLICK,r._onClick,r),r._eventBus.subscribe(s.CONTROLS_SEEK_END,r._onSeekEnd,r)}function r(e,t){return!u.isNullOrUndefined(o(e,t))}function o(e,t){for(var n=Object.keys(e),i=0;i<n.length;i++){var r=n[i],o=e[r];if(t(o))return r}return null}t.exports=i;var a=e("./yvap/ads-json"),s=e("./event"),l=e("./states"),c=e("./stream"),p=e("../../lib/user-agent"),d=e("./media-store"),u=e("../../lib"),_=e("../../lib/logger"),v=e("./yvap/video-ad-plugin");i.prototype.prepare=function(e){var t=this;if(t._enabled){t._ads={},t._lastBreaks=e.progress.adbreaks;try{t._adsReady=!1,e.isCCM?t._yvap.beginAdExperience(e.id,e.progress.position):t._yvap.getAdsFor({clipId:e.id})}catch(n){_.error("[yvap] prepare error",n.message||n,n.stack),t._enabled=!1}}},i.prototype._setupTimeout=function(){var e=this;if(p.desktop&&!e._adsReady){var t=e._model.YVAP&&e._model.YVAP.timeout;t?(clearTimeout(e._adTimeout),e._adTimeout=setTimeout(function(){e._clearAdTimeoutAndPlay()},1e3*t)):(e._adsReady=!0,e._maybePlayImpl())}},i.prototype._clearAdTimeoutAndPlay=function(){var e=this;e._adsReady=!0,e._adTimeout&&(clearTimeout(e._adTimeout),e._adTimeout=null,e._maybePlayImpl())},i.prototype.maybePlay=function(e,t){var n=this;if(!n._enabled)return void t(!1);if(n._cb=t,"start"===e)n._currentAdPosition=a.POSITION.bumper,n._setupTimeout();else{if("end"!==e)return void n._cb(!1);n._currentAdPosition=a.POSITION.postroll}n._playCount=0,n._resetState(),n._adTimeout||n._maybePlayImpl()},i.prototype._maybePlayImpl=function(){var e=this,t=e._playCount>0;if(e._currentAdPosition!==a.POSITION.bumper||r(e._ads,function(e){return e.pos===a.POSITION.bumper})||(e._currentAdPosition=a.POSITION.preroll),e._currentAdId=o(e._ads,function(t){return t.pos===e._currentAdPosition}),e._currentAdId){var n=e._ads[e._currentAdId];e._model.playbackState.ad=n,e._currentAdPosition===a.POSITION.midroll?n.type!==a.ADTYPES.NO_AD&&(e._midrollCurrent++,e._eventBus.publish(s.UPDATE_AD_COUNT,e._midrollCurrent,e._midrollCount)):e._eventBus.publish(s.UPDATE_AD_COUNT),e._eventBus.publish(s.AD_PLAYBACK_REQUEST,n.playbackId),e._play(n)}else e._model.playback.adPlaybackOnly||e._cb(t)},i.prototype._resetState=function(){var e=this;e._currentAdId=null,e._model.playbackState.ad=null,e._hasPlaybackStarted=!1},i.prototype._play=function(e){var t=this,n=t._model.playbackState.rendererType;if(e.type===a.ADTYPES.VPAID)"flash"!==n?(_.warn("Got VPAID ad in non-flash renderer"),t._eventBus.publish(s.Ad.NO_PLAYABLE_STREAM,t._currentAdId),t._onEnded()):t._playVPAIDAd(e);else if(e.type===a.ADTYPES.NO_AD)_.log("Loss of ad opportunity: AdsJson type is NO_AD"),t._eventBus.publish(s.Ad.NO_AD,t._currentAdId),t._onAdPlaybackEnded();else{_.log("Trying to play ad: ",e);var i,r=t._model.capabilities[t._model.playbackState.rendererType];"flash"===n?r={acceptedFormats:["mp4","flv","x-flv"],acceptedProtocols:["http"]}:"dash"===n&&(r={acceptedFormats:["mp4dash","mp4"],acceptedProtocols:["http"]}),i=c.findStreamByProperty(e.streams,"bitrate",t._targetBitrate,r),i?(_.log("Playing ad: ",e),t._playCount++,t._currentAdBitrate=i.bitrate,t._requestedTime=Date.now(),t._model.playbackState.state=l.VIDEO,t._view.syncViewState(),t._view.setStreams({streams:[i]}),t._view.play(),t._model.playback.fullscreen&&t._view.setFullscreen(!0)):(_.log("Could not play ad due to no stream of playable format",e),t._eventBus.publish(s.Ad.NO_PLAYABLE_STREAM,t._currentAdId),t._onEnded())}},i.prototype._playVPAIDAd=function(e){var t=this;t._playCount++,t._model.playbackState.state=l.VIDEO,t._model.playbackState.loading=!1,t._view.syncViewState(),t._model.playbackState.paused||t._view.pause(),t._yvap.renderVPAIDAd(e.playbackId,t._targetBitrate,t._view.rootElem.clientWidth,t._view.rootElem.clientHeight,t._model.playbackState.volume,t._model.playbackState.mute)},i.prototype.updateYVAPData=function(e){var t=this;if(t._enabled)try{t._yvap.updatePlayerData(e)}catch(n){_.error("[yvap] updatePlayerData error",n.message||n,n.stack),t._enabled=!1}},i.prototype._onAdsUpdate=function(e){var t=this;e.forEach(function(e){var n=e.playbackId;if(t._ads[n]?Object.keys(e).forEach(function(i){t._ads[n][i]=e[i]}):t._ads[n]=e,e.streams){var i=e.streams.map(function(e){return new d.Stream(e)});t._ads[n].streams=i}})},i.prototype._onAdsReady=function(){var e=this;e._model.YVAP&&(e._model.YVAP.adsReady=!0),e._clearAdTimeoutAndPlay()},i.prototype._onPaused=function(){var e=this;e._model.playbackState.paused=!0,e._eventBus.publish(s.AD_PLAYBACK_PAUSED),e._view.syncViewState()},i.prototype._onPlaying=function(){var e=this;if(e._hasPlaybackStarted)e._eventBus.publish(s.AD_PLAYBACK_RESUMED,e._currentAdId);else{e._hasPlaybackStarted=!0,e._model.playbackState.loading=!1,e._view.syncViewState();var t=Date.now()-e._requestedTime;e._eventBus.publish(s.AD_PLAYBACK_STARTED,e._currentAdId,e._currentAdBitrate,t)}e._model.playbackState.paused=!1,e._view.syncViewState()},i.prototype._onTimeupdate=function(e,t,n){var i=this;i._eventBus.publish(s.AD_PLAYBACK_PROGRESS,i._currentAdId,e,t,n)},i.prototype.cancelAd=function(){var e=this;e._enabled&&(e._eventBus.publish(s.Ad.CANCELED,e._currentAdId),e._clearAndResetAdState(),e._view.syncViewState())},i.prototype._clearAndResetAdState=function(){var e=this;e._currentAdId&&(delete e._ads[e._currentAdId],e._resetState())},i.prototype._onEnded=function(){var e=this;e._eventBus.publish(s.AD_PLAYBACK_ENDED,e._currentAdId)},i.prototype._onAdPlaybackEnded=function(){var e=this;e._clearAndResetAdState(),e._maybePlayImpl()},i.prototype._onError=function(e,t){var n=this;_.error("Ad errored out",e),n._eventBus.publish(s.AD_PLAYBACK_ERROR,n._currentAdId,e,t),n._ads[n._currentAdId].pos===a.POSITION.midroll&&(n._midrollCount-=1,n._midrollCurrent-=1),n._onEnded()},i.prototype._onClick=function(e){var t=this;if(t._currentAdId){var n=t._ads[t._currentAdId];t._eventBus.publish(s.AD_CLICK,t._currentAdId,e),window.open(n.clickUrl,"_blank")}},i.prototype.hasOccured=function(e){var t=(new Date).getTime(),n=t-e;return 36e5>n},i.prototype._onAdBreakTimeline=function(e){var t=this;p.mobile||(t._adBreaks=e.map(function(e,n){return{time:e,occurred:t.hasOccured(t._lastBreaks[n]||0)}}),t._eventBus.publish(s.UPDATE_AD_BREAKS,t._adBreaks))},i.prototype._startAdBreak=function(e,t,n){var i=this;i._playCount=0,i._resetState(),i._currentAdPosition=a.POSITION.midroll,t.occurred=!0,i._eventBus.publish(s.UPDATE_AD_BREAKS,i._adBreaks),i._nextBreak=null,i._cb=function(r){i._eventBus.publish(s.AD_BREAK_ENDED,e,t.time),n(r)};var r=i._yvap.getMidrollAds(t.time);i._eventBus.publish(s.AD_BREAK_STARTED,e,t.time),r.length>0?(i._midrollCount=r.filter(function(e){return e.type!==a.ADTYPES.NO_AD}).length,i._midrollCurrent=0,i._eventBus.publish(s.ADS_OBJS_UPDATE,r),i._maybePlayImpl()):i._cb(!1)},i.prototype.maybeAdBreak=function(e,t){var n=this;if(!(10>e)){if(!n._enabled)return void t(!1);if(!n._model.playbackState.seeking){n._nextBreak||(n._nextBreak=n._findNextBreak(e,n._adBreaks.filter(function(e){return!e.occurred})));var i=function(e){t(e,o)};if(n._seeked){n._seeked=!1,n._nextBreak=null;var r=n._findPreviousBreak(e,n._adBreaks),o=n._adBreaks.indexOf(r);r&&!r.occurred&&n._startAdBreak(e,r,i)}else n._nextBreak&&n._nextBreak.time<e?n._startAdBreak(e,n._nextBreak,i):t(!1)}}},i.prototype._findNextBreak=function(e,t){var n=null;return t.forEach(function(t){_.log(t),t.time>e&&(!n||t.time<n.time)&&(n=t)}),n},i.prototype._findPreviousBreak=function(e,t){var n=null;return t.forEach(function(t){t.time<e&&(!n||t.time>n.time)&&(n=t)}),n},i.prototype._onSeekEnd=function(){var e=this;e._seeked=!0}},{"../../lib":"bRhrlU","../../lib/logger":"IS9j5T","../../lib/user-agent":"ty5FFo","./event":"YJm+dH","./media-store":42,"./states":65,"./stream":"Af6MnA","./yvap/ads-json":96,"./yvap/video-ad-plugin":141}],12:[function(e,t,n){"use strict";function i(e,t,n,i,r){var o=this;o._eventBus=e,o._view=n,o._model=t,o._controller=i,o._fetcher=r}t.exports=i,t.exports.AGE_GATE_SCREEN_TYPES=l;var r=e("./util"),o=e("../../lib"),a=e("./event"),s=e("./strings"),l={login:"login",birthday:"birthday",warning:"warning",block:"block"},c="vpReleaseTime",p=864e5,d="WAIT";i.prototype._initiateAgeGateScreen=function(e){var t=this;t._view.destroyAgeGateScreen(),t._view.renderAgeGateScreen(t._getScreenStringsObj(e),t),t._activeScreenType=e,t._eventBus.publish(a.API.UI_INTERACT,{srcElement:"age-"+t._ageGateType}),t._model.ui.showAgeGate=!0,t._waitTimeout&&clearTimeout(t._waitTimeout)},i.prototype.run=function(){var e=this,t=e._model.userPreferences.isAuthenticated,n=!r.isOffNetwork(),i=e._model.userPreferences.isAdult,o=e._isUser24HrsBanned();e._ageGateType=e._model.playlist.getCurrentItem()&&e._model.playlist.getCurrentItem().ageGate;var a=e._getApplicableAgeGateScreen(t,n,i,o);a&&"none"!==e._ageGateType?a===d?e._waitTimeout=setTimeout(function(){e._model.ui.showAgeGate||this._initiateAgeGateScreen(l.warning)},1e4):this._initiateAgeGateScreen(a):e._continuePlayerFlow()},i.prototype._getApplicableAgeGateScreen=function(e,t,n,i){var r=this;return e||i?!i&&n?null:o.isNullOrUndefined(r._model.userPreferences.isAdult)&&!i?(r._fetcher.getUserPreferences(),d):l.block:t?l[r._ageGateType]:r._ageGateType===l.birthday?l[r._ageGateType]:l.warning},i.prototype._getScreenStringsObj=function(e){var t=this,n={title:t._getLocalizedString("CONTENT_RESTRICTED"),desc:"",button:"",isBirthday:!1,isBlock:!1};e===l.login?(n.desc=t._getLocalizedString("AGE_GATE_DESC"),n.button=t._getLocalizedString("SIGN_IN_TO_VIEW_ACTION")):e===l.warning?(n.desc=t._getLocalizedString("AGE_GATE_DESC"),n.button=t._getLocalizedString("CONTINUE_ACTION")):e===l.birthday?(n.desc=t._getLocalizedString("AGE_GATE_BDAY_DESC"),n.button=t._getLocalizedString("SUBMIT_ACTION"),n.isBirthday=!0):e===l.block&&(n.desc=t._getLocalizedString("AGE_GATE_NOT_ALLOWED_DESC"),n.isBlock=!0);var i=t._model.playlist.getCurrentItem();return n.imageSrc=i.images.defaultThumbnail,n.width=t._model.uiState.width,n.height=t._model.uiState.height,n},i.prototype._isUser24HrsBanned=function(){var e=this;if(!e._user24HrsBanned){var t=r.localStorage.get(c);isNaN(parseInt(t))||(e._user24HrsBanned=(new Date).getTime()-t<0)}return e._user24HrsBanned},i.prototype._continuePlayerFlow=function(){var e=this;e._model.ui.showAgeGate=!1,e._view.destroyAgeGateScreen(),e._activeScreenType=null,e._waitTimeout&&clearTimeout(e._waitTimeout),e._controller.play()},i.prototype._getLocalizedString=function(e){return s.i18n[e]},i.prototype._handleLoginClick=function(){var e=this;e._eventBus.publish(a.UI_LOGIN,"ui_agebl"),r.showUserAuthPage(e._model)},i.prototype._handleBirthDayClick=function(e,t){if(t){var n=this,i=n._isValidDate(t.inputMonth.value,t.inputDay.value,t.inputYear.value);r.classList(t.inputMonth).remove("validate-error"),r.classList(t.inputDay).remove("validate-error"),r.classList(t.inputYear).remove("validate-error");for(var o=n._getInvalidDateInputNodes(t.inputMonth,t.inputDay,t.inputYear),a=0;a<o.length;a++)r.classList(o[a]).add("validate-error");if(!i||o.length>0)return;n._isUserAdult(new Date(t.inputYear.value,t.inputMonth.value-1,t.inputDay.value),n._model.baseConfig.region)?n._continuePlayerFlow():(n._initiateAgeGateScreen(l.block),r.localStorage.put(c,(new Date).getTime()+p))}},i.prototype._handleWarningClick=function(){var e=this;e._continuePlayerFlow()},i.prototype.handleClickEvent=function(e,t){var n=this;n._activeScreenType===l.login?n._handleLoginClick(e):n._activeScreenType===l.birthday?(n._eventBus.publish(a.CTRL_AGEGATE_BDAY),n._handleBirthDayClick(e,t)):n._activeScreenType===l.warning&&n._handleWarningClick(e),n._eventBus.publish(a.API.UI_INTERACT,{srcElement:"age-"+n._activeScreenType+"-btn"})},i.prototype._isValidDate=function(e,t,n){var i=/^\d{1,2}$/,r=/^\d{4}$/;if(!(i.test(e)&&i.test(t)&&r.test(n)))return!1;var o=parseInt(t),a=parseInt(e),s=parseInt(n);if(1e3>s||s>3e3||0===a||a>12)return!1;var l=[31,28,31,30,31,30,31,31,30,31,30,31];return(s%400===0||s%100!==0&&s%4===0)&&(l[1]=29),o>0&&o<=l[a-1]},i.prototype._getInvalidDateInputNodes=function(e,t,n){var i,r,o,a,s,l,c=[];try{i=parseInt(e.value),a=i>=1&&12>=i}catch(p){a=!1}try{r=parseInt(t.value),s=r>=1&&31>=r}catch(p){s=!1}try{o=parseInt(n.value),l=o>=1900&&o<=(new Date).getFullYear()}catch(p){l=!1}return a||c.push(e),s||c.push(t),l||c.push(n),c},i.prototype._isUserAdult=function(e,t){if(o.isNullOrUndefined(e))return!1;var n=new Date((new Date).getTime()-e.getTime()).getUTCFullYear()-1970;return t.toLowerCase()in["kr","sg","th"]?n>=21:n>=18},i.prototype.filterNonDigitInput=function(e){var t,n,i,r,o=[9,37,39];return e?(i=e.keyCode,r=e.shiftKey,e.stopPropagation?e.stopPropagation():e.cancelBubble=!0,t=i>=48&&57>=i||i>=96&&105>=i||8===i||46===i,n=o.indexOf(i)>-1,!r&&t||n?!0:(e.preventDefault?e.preventDefault():e.returnValue=!1,!1)):!1},i.prototype.isWaitingAuthentication=function(){var e=this;return!o.isNullOrUndefined(e._waitTimeout)},i.prototype.getPlayerWidth=function(){var e=this;return e._model.uiState.width},i.prototype.getPlayerHeight=function(){var e=this;return e._model.uiState.height},i.prototype.destroy=function(){var e=this;e._model.ui.showAgeGate=!0}},{"../../lib":"bRhrlU","./event":"YJm+dH","./strings":"XwKsC9","./util":"jJTEqU"}],13:[function(e,t,n){"use strict";function i(e,t,n,i){function r(e,t){return e-t}var o=this;o._videoTag=e,o._availableBitrates=t?t.sort(r):[],o.reservoirLength=n||s,o.cushionLength=i||l,o.currentBitrate=0,o._bufferingEventsForBitrates={},o._availableBitrates.forEach(function(e){o._bufferingEventsForBitrates[e]=0}),e&&e.addEventListener("waiting",function(){o._bufferingEventsForBitrates[o.currentBitrate]=o._bufferingEventsForBitrates[o.currentBitrate]+1},!1)}t.exports=i;var r=e("./util"),o="yvpTargetBitrate",a=900,s=10,l=20;i.prototype.setTargetBitrate=function(e){r.localStorage.put(o,e)},i.prototype.getTargetBitrate=function(){var e=this,t=r.localStorage.get(o);return t||(t=a,e.setTargetBitrate(a)),t},i.prototype.getBufferOccupancy=function(){for(var e=this,t=e._videoTag.buffered,n=e._videoTag.currentTime,i=0;i<t.length;i++){var r=t.start(i),o=t.end(i);if(n>=r&&o>=n){var a=o-n;if(a>=e._videoTag.length-n)return Number.MAX_VALUE}return a}return 0},i.prototype._getIdealRecommendedBitrate=function(e,t){var n=this;if(t===Number.MAX_VALUE)return n.currentBitrate;var i=e[0];if(t>n.reservoirLength){var r=e[0],o=e[e.length-1],a=(o-r)/n.cushionLength;i=(t-n.reservoirLength)*a+r}return i},i.prototype._findMaxLessEqualIdealRate=function(e,t){for(var n=e.length-1;n>=0;n--){var i=e[n];if(t>=i)return i}return e[0]},i.prototype._findMinGreaterEqualIdealRate=function(e,t){for(var n=0;n<e.length;n++){var i=e[n];if(i>=t)return i}return e[e.length-1]},i.prototype.getRecommendedBitrate=function(e,t,n){var i=this;t=t||i._availableBitrates,n=void 0===n?i.getBufferOccupancy():n,e=void 0===e?t.indexOf(i.currentBitrate):e;var r=t[e],o=t[0],a=t[t.length-1],s=r===a?a:t[e+1],l=r===o?o:t[e-1],c=i._getIdealRecommendedBitrate(t,n),p=r;return c>=s?p=i._findMaxLessEqualIdealRate(t,c):l>=c&&(p=i._findMinGreaterEqualIdealRate(t,c)),p},i.prototype.getNumberOfBufferingsForBitrate=function(e){var t=this;return t._bufferingEventsForBitrates[e]}},{"./util":"jJTEqU"}],14:[function(e,t,n){"use strict";function i(e,t){var n=this;n._model=e,n._eventBus=t,s=window.chrome,n._session=null,n._sessionStatus=null,n._mediaSession=null,n._currentLocalMediaItem=null,n._currentCastingYVPMediaItem=null,n._receiverAvailable=!1,n._progressTimer=null,s.cast?s.cast.isAvailable?n._initializeCastApi():setTimeout(n._initializeCastApi.bind(n),1e3):window.__onGCastApiAvailable||(window.__onGCastApiAvailable=function(e,t){e?n._initializeCastApi():d.log("cast api script loading error:",t)},c.lazyLoad(v,1e4,function(e){e&&d.log("cast api fetching failed. Error:",e)})),n._eventBus.subscribe(l.MEDIA_ITEM_LOADED,n._onLocalPlayerMediaItemLoaded,n)}function r(e){return{onSuccess:function(){var t=Array.prototype.slice.call(arguments,1);o("[media command executed]",e,t.length?t:"")},onError:function(){var t=Array.prototype.slice.call(arguments,1);a("[media command failed]",e,t.length?t:"")}}}function o(){d.log.apply(console,["[cast]"].concat(Array.prototype.slice.call(arguments)))}function a(){d.warn.apply(console,["[cast]"].concat(Array.prototype.slice.call(arguments)))}t.exports=i;var s,l=e("./event"),c=e("./util"),p=e("../../lib"),d=e("../../lib/logger"),u=e("./error"),_=e("./constants"),v="https://www.gstatic.com/cv/js/sender/v1/cast_sender.js",y=1e3,m="urn:x-cast:com.yahoo.video.custom",f={hls:"application/vnd.apple.mpegurl",dash:"application/dash+xml",mp4:"video/mp4"};i.prototype._initializeCastApi=function(){var e=this,t={CUSTOM:_.CHROMECAST_RECEIVER_ID,DEFAULT:s.cast.media.DEFAULT_MEDIA_RECEIVER_APP_ID},n=new s.cast.SessionRequest(t.CUSTOM),i=e._sessionListener.bind(e),r=e._receiverListener.bind(e),a=s.cast.AutoJoinPolicy.PAGE_SCOPED,c=new s.cast.ApiConfig(n,i,r,a),p=function(){o("cast sender-api initialization: Successful"),e._initialized=!0,e._resetCastState(),e._eventBus.subscribe(l.API.UI_INTERACT,e._onUIInteract,e),e._eventBus.subscribe(l.API.PLAYER_MUTE_CHANGE,e.setMute,e),e._eventBus.subscribe(l.CONTROLS_SET_VOLUME,e.setVolume,e),e._eventBus.subscribe(l.API.PLAYER_VOLUME_CHANGE,e.setVolume,e),e._eventBus.subscribe(l.CONTROLS_SEEKING,e.seek,e),e._eventBus.subscribe(l.TOGGLE_PLAY_PAUSE,e._togglePlayPause,e),e._eventBus.subscribe(l.CC.TOGGLE,e._onCCToggle,e)},d=function(t){o("cast sender-api initialization: Error",t),e._initialized=!1};s.cast.initialize(c,p,d)},i.prototype._resetCastState=function(){var e=this;e._model.castState={connected:!1,mediaLoaded:!1,paused:!1,playerState:s.cast.media.PlayerState.IDLE,progress:null,volume:{level:null,muted:null},items:{},currentItemId:null,currentItemYVPUUID:null,captionsOn:!1,captionsAvailable:!1},e._model.castState.getCurrentCastingYVPMediaItem=function(){return e._model.playlist.getMediaItemById(this.currentItemYVPUUID)}},i.prototype._receiverListener=function(e){o("receiverStatus",e);var t=this;t._receiverAvailable=e===s.cast.ReceiverAvailability.AVAILABLE,t._updateCastingAvailability(),!t._receiverAvailable&&t._session&&t._updateSession(null)},i.prototype._togglePlayPause=function(){var e=this;if(e._session)if(e.isCastMediaLoaded()){var t=e._model.castState.playerState;t===s.cast.media.PlayerState.PLAYING?e.pause():e.play()}else e._requestMediaLoad()},i.prototype._onCCToggle=function(e){var t=this;t.isCastMediaLoaded()&&(e?t._enableCaptions():t._disableCaptions())},i.prototype._updateCastingAvailability=function(){var e=this,t=e._receiverAvailable&&e._isMediaItemCastable(e._currentLocalMediaItem);e._eventBus.publish(l.API.CAST_AVAILABILITY_CHANGE,t),o("Is receiver available: %s. Is casting available = %s",e._receiverAvailable,t)},i.prototype._sessionListener=function(e){o("sessionListener found pre-existing session for auto-joining with numMediaItems="+e.media.length);var t=this;t._updateSession(e),0!==e.media.length&&(t._onMediaDiscovered("Auto-Joining exisiting session",e.media[0]),t._onMediaStatusUpdate())},i.prototype._requestNewCastingSession=function(){var e=this;o("requesting new casting session"),s.cast.requestSession(e._onRequestSessionSuccess.bind(e),e._onRequestSessionError.bind(e))},i.prototype._onRequestSessionSuccess=function(e){o("new casting session request: success");var t=this;t._updateSession(e),t._requestMediaLoad()},i.prototype._onRequestSessionError=function(e){var t=this;o("new casting session request: error",e),t._publishCastError(u.CAST_CODES.E_CAST_CONNECTION_REQUEST_FAILED,e)},i.prototype._updateSession=function(e){o("updateSession",{session:e});var t=this;if(t._session=e,!e){var n=t._model.castState.items[t._model.castState.currentItemId];return t._updateCastingMediaSession(null),void t._handleCastConnectionChanged(!1,n)}t._session.addUpdateListener(t._sessionUpdateListener.bind(t)),t._sessionUpdateListener(),t._session.addMediaListener(function(e){o("** Session.Medialistener **** A sender from current session changed a media on cast device",e)}),t._session.addMessageListener(m,function(e,t){var n=JSON.parse(t);o("** cast msg received **",n)})},i.prototype._sessionUpdateListener=function(){var e=this,t=s.cast.SessionStatus;if(o("_sessionUpdateListener, status=",e._session.status,{s:e._session}),e._sessionStatus!==e._session.status)switch(e._sessionStatus=e._session.status,e._session.status){case t.STOPPED:e._updateSession(null);break;case t.CONNECTED:e._handleCastConnectionChanged(!0);break;case t.DISCONNECTED:default:d.warn("[cast] sessionUpdateListner called with status="+e._session.status)}e._session&&(e._model.castState.volume.level!==e._session.receiver.volume.level&&(e._model.castState.volume.level=e._session.receiver.volume.level,e._eventBus.publish(l.CAST.VOLUME_CHANGED,e._session.receiver.volume.level)),e._model.castState.volume.muted!==e._session.receiver.volume.muted&&(e._model.castState.volume.muted=e._session.receiver.volume.muted,e._eventBus.publish(l.CAST.MUTE_CHANGED,e._session.receiver.volume.muted)))},i.prototype._endSession=function(){var e=this,t=function(e){o("end session success")},n=function(){o("end session error",arguments)};e._session.stop(t,n)},i.prototype._onLocalPlayerMediaItemLoaded=function(e){var t=this;t._currentLocalMediaItem=e,t._updateCastingAvailability()},i.prototype._onUIInteract=function(e){var t=this;switch(e.srcElement){case"ctrl-cast-start":case"ctrl-cast-stop":o("chromecast icon clicked"),t.isCastConnected()?t._endSession():t._requestNewCastingSession();break;case"ctrl-cast-disconnect":t._endSession();break;case"ctrl-cast-overlay":t._eventBus.publish(l.TOGGLE_PLAY_PAUSE)}},i.prototype._requestMediaLoad=function(){var e=this;if(o("sending request for media-load"),e._session&&!e._attemptingLoadMedia){var t=e._model.playlist.position,n=e._generateMediaInfo(e._currentLocalMediaItem),i=new s.cast.media.LoadRequest(n);i.autoplay=!0,i.currentTime=e._currentLocalMediaItem.progress.position||0,i.customData={media_uuid:n.customData.uuid,playlist_pos:t>-1?t:"unknown",videoSession:e._currentLocalMediaItem.videoSession,pageSpaceId:e._model.baseConfig.pageSpaceId,site:e._model.baseConfig.site,pls:e._model.guid,senderType:"desktop"};var r=function(t){e._attemptingLoadMedia=!1,e._onMediaDiscovered("loadMedia request",t)},a=function(){e._attemptingLoadMedia=!1,o("receiver cast device media load request errored",arguments)};e._attemptingLoadMedia=!0,e._session.loadMedia(i,r,a)}},i.prototype._onMediaDiscovered=function(e,t){var n=this;if(o("New casting media discovered via:",e),n._mediaSession===t)return void o("same mediasession as before, therefore not updating it");n._updateCastingMediaSession(t);var i=n._onMediaStatusUpdate.bind(n);n._mediaSession.addUpdateListener(i),t.currentTime&&t.items&&t.items.length&&n._eventBus.publish(l.CAST.PLAYBACK_PROGRESS,t.media.customData.uuid,t.currentTime,t.media.duration),setTimeout(function(){var e=n._mediaSession;e&&e.playerState!==n._model.castState.playerState&&(a("playerState not synced. _onMediaStatusUpdate() was not called. calling _checkReceiverPlayerStatus"),n._checkReceiverPlayerStatus())},2e3)},i.prototype._onMediaStatusUpdate=function(){var e=this,t=e._model.castState.currentItemId;if(o("_onMediaStatusUpdate.",e._mediaSession.playerState,{mediasession:e._mediaSession}),e._hasLoadedMediaChanged()&&(e._awaitingPlaybackStart=!0,e._handleCastMediaChanged(e._mediaSession.media.customData)),e._model.castState.currentItemId=e._mediaSession.currentItemId,e._model.castState.playerState!==e._mediaSession.playerState){e._stopProgressTimer();var n=e._model.castState.playerState;switch(e._model.castState.playerState=e._mediaSession.playerState,n===s.cast.media.PlayerState.BUFFERING&&e._handleCastBufferingChanged(!1),e._mediaSession.playerState){case s.cast.media.PlayerState.PLAYING:e._progressTimer=setInterval(e._updateProgress.bind(e),y),e._awaitingPlaybackStart&&(e._awaitingPlaybackStart=!1,e._handleCastPlayingChanged(!0));break;case s.cast.media.PlayerState.PAUSED:e._awaitingPlaybackStart=!0,e._handleCastPlayingChanged(!1);break;case s.cast.media.PlayerState.BUFFERING:e._handleCastBufferingChanged(!0);break;case s.cast.media.PlayerState.IDLE:e._mediaSession.idleReason===s.cast.media.IdleReason.FINISHED&&e._handleCastVideoEnded(t),e._hasPlaylistEnded()&&(e._handleCastMediaChanged(null),e._handleCastPlaylistEnded(),e._updateCastingMediaSession(null))}}},i.prototype._hasLoadedMediaChanged=function(){var e=this,t=e._mediaSession.currentItemId,n=null!==t&&t!==e._model.castState.currentItemId;return n},i.prototype._hasPlaylistEnded=function(){var e=this;return null===e._mediaSession.items},i.prototype._updateCastingMediaSession=function(e){var t=this;t._mediaSession=e,t._mediaSession||(t._currentCastingYVPMediaItem=null,t._model.castState.currentItemId=null,
t._model.castState.currentItemYVPUUID=null,t._model.castState.paused=!1,t._model.castState.mediaLoaded=!1,t._stopProgressTimer(),t._model.castState.captionsAvailable=!1),t._attemptingLoadMedia=!1,t._updatePlaylistItemsData()},i.prototype._handleCastConnectionChanged=function(e,t){if("boolean"==typeof e){var n=this,i=n._model.castState;if(e!==i.connected){var r={};e?r.receiverName=n._session.receiver.friendlyName:t&&(r.uuid=t.media_uuid,r.playlist_pos=t.playlist_pos),n._model.castState.connected=e,n._eventBus.publish(l.CAST.CONNECTION_STATUS_CHANGED,e,r),!e&&n._resetCastState()}}},i.prototype._handleCastMediaChanged=function(e){var t=this;if(t._model.castState.mediaLoaded=!!e,e?(t._model.castState.currentItemYVPUUID=e.uuid,t._currentCastingYVPMediaItem=t._model.castState.getCurrentCastingYVPMediaItem()):t._model.castState.currentItemYVPUUID=null,t._eventBus.publish(l.CAST.MEDIA_CHANGED,e),e){var n=t._mediaSession.media&&t._mediaSession.currentItemId||null,i=null!==n?t._model.castState.items[n]:null;t._model.castState.captionsAvailable=!!(i&&i.captions&&i.captions.length)}else t._model.castState.captionsAvailable=!1;t._eventBus.publish(l.CAST.CAPTION_AVAILABILITY_CHANGED,t._model.castState.captionsAvailable),t._model.castState.captionsAvailable&&t._model.userPreferences.closedCaptions.show&&t._enableCaptions()},i.prototype._handleCastPlayingChanged=function(e){var t=this;t._model.castState.paused=!e,t._eventBus.publish(l.CAST.TOGGLE_PLAYING,e)},i.prototype._handleCastBufferingChanged=function(e){var t=this;t._eventBus.publish(l.CAST.BUFFERING,e)},i.prototype._handleCastVideoEnded=function(e){var t=this;t._model.castState.mediaLoaded=!1,t._model.castState.paused=!1,t._currentCastingYVPMediaItem&&(t._currentCastingYVPMediaItem.progress.position=0);var n=t._model.castState.items[e];t._eventBus.publish(l.CAST.VIDEO_ENDED,n.media_uuid)},i.prototype._handleCastPlaylistEnded=function(e){var t=this;t._eventBus.publish(l.CAST.PLAYLIST_ENDED)},i.prototype._checkReceiverPlayerStatus=function(){var e=this,t=r("get-status");e._mediaSession&&e._mediaSession.getStatus(null,t.onSuccess,t.onError)},i.prototype._updateProgress=function(){var e=this;if(e._session&&e._mediaSession){var t,n=e._mediaSession.media;n&&null!==n.duration?(t=e._mediaSession.getEstimatedTime(),e._eventBus.publish(l.CAST.PLAYBACK_PROGRESS,n.customData.uuid,t,n.duration)):(t=0,e._stopProgressTimer()),e._currentCastingYVPMediaItem&&(e._currentCastingYVPMediaItem.progress.position=t),e._model.castState.progress=t}},i.prototype._stopProgressTimer=function(){var e=this;e._progressTimer&&(clearInterval(e._progressTimer),e._progressTimer=null)},i.prototype._updatePlaylistItemsData=function(){var e=this;e._model.castState.items={};var t=e._mediaSession&&e._mediaSession.items;t&&t.forEach(function(t){var n=[];t.media.tracks&&t.media.tracks.forEach(function(e){e.type===s.cast.media.TrackType.TEXT&&n.push(e)}),e._model.castState.items[t.itemId]=t.customData,e._model.castState.items[t.itemId].captions=n})},i.prototype._enqueueMediaOnReceiver=function(e){var t=this,n=t._model.playlist,i=[],r=n.items.length-n.position-1,o=n.position+1;e&&(r=e.length,o=0);for(var a=o,s=o+r;s>a;a++){var l=e?e[a]:n.getMediaItemAt(a);l&&t._isMediaItemCastable(l)&&i.push(l)}i.length&&t._insertMediaItems(i)},i.prototype._insertMediaItems=function(e){var t=this,n=[];e.forEach(function(e){var i=t._generateMediaInfo(e),r=new s.cast.media.QueueItem(i);r.autoplay=!0,r.customData={media_uuid:i.customData.uuid,playlist_pos:"unknown"},r.preloadTime=10,r.startTime=0,n.push(r)});var i=new s.cast.media.QueueInsertItemsRequest(n),a=r("queue-items"),l=function(){o("queue-items successful"),t._updatePlaylistItemsData()};t._mediaSession.queueInsertItems(i,l,a.onError)},i.prototype._generateMediaInfo=function(e){var t=this,n=s.cast.media.StreamType,i=Math.floor(e.streams.length/2),r=e.streams[i].url,o=e.images.large||e.images.thumbnail||e.images.medium||e.images.small||e.images.provider,a=new s.cast.media.MediaInfo(r);a.metadata=new s.cast.media.GenericMediaMetadata,a.metadata.metadataType=s.cast.media.MetadataType.GENERIC,a.metadata.title=e.title,a.metadata.images=[{url:o}],a.streamType=e.isLive()?n.LIVE:n.BUFFERED,a.duration=e.duration,a.customData={uuid:e.id,title:e.title,thumbnail:o,mediaURL:r,isCCM:e.isCCM};var l=e.getType();return a.contentType=f[l],a.textTrackStyle=new s.cast.media.TextTrackStyle,a.tracks=t._createMediaInfoTracks(e,a),a},i.prototype._createMediaInfoTracks=function(e){var t;if(e.closedCaptions.length){var n=1,i=[];e.closedCaptions.forEach(function(e){var t=new s.cast.media.Track(n,s.cast.media.TrackType.TEXT);t.trackContentId=e.url,t.trackContentType=e.content_type,t.language=e.lang,t.name=e.lang,t.customData=null,n++,i.push(t)}),t=i.sort(function(e,t){return e.language===t.language?-1*e.trackContentType.localeCompare(t.trackContentType):e.language.localeCompare(t.language)})}return t},i.prototype._isMediaItemCastable=function(e){return!0},i.prototype._publishCastError=function(e,t){var n=this;n._eventBus.publish(l.WARNING,c.createErr("P",n._model.playbackState,u.E_CAST,e,t))},i.prototype._setCaptionTracks=function(e,t,n){var i=this,r=new s.cast.media.EditTracksInfoRequest(e);i._mediaSession.editTracksInfo(r,t,n)},i.prototype._enableCaptions=function(e){var t=this;if(t._mediaSession&&!p.isNullOrUndefined(t._mediaSession.currentItemId)){e=(e||t._model.userPreferences.closedCaptions.lang).toLocaleLowerCase();var n=t._model.castState,i=n.items[t._mediaSession.currentItemId].captions;if(0!==i.length){for(var r,s=function(){o("enable-captions successful"),n.captionsOn=!0},l=function(){a("enable-captions error")},c=0;c<i.length;c++){var d=(i[c].language||"").toLocaleLowerCase();if(d===e){r=i[c];break}}r||(r=i[0]),t._setCaptionTracks([r.trackId],s,l)}}},i.prototype._disableCaptions=function(){var e=this;if(e._mediaSession&&!p.isNullOrUndefined(e._mediaSession.currentItemId)){var t=function(){o("disable-captions successful"),e._model.castState.captionsOn=!1},n=function(){a("disable-captions error")};e._setCaptionTracks([],t,n)}},i.prototype._executeMediaCommand=function(e,t){var n=this;if(!n._mediaSession)return void o("trying "+e+" without a casting media loaded");if(!n._mediaSession[e])return void o("Command "+e+" is not allowed to be executed");var i=null;if("seek"===e){if("number"!=typeof t||0>t)throw"numSeconds while requesting seek on cast device needs to be defined and positive";i=new s.cast.media.SeekRequest,i.currentTime=t||0,i.resumeState=s.cast.media.ResumeState.PLAYBACK_START}var a=r(e);n._mediaSession[e](i,a.onSuccess,a.onError)},i.prototype.isCastMediaLoaded=function(){var e=this;if(e._initialized){var t=s.cast.media.PlayerState;return!(!e._mediaSession||e._mediaSession.playerState===t.IDLE)}return!1},i.prototype.isCastConnected=function(){var e=this;return e._initialized?!(!e._session||e._session.status!==s.cast.SessionStatus.CONNECTED):!1},i.prototype.play=function(){var e=this;e.isCastMediaLoaded()?e._executeMediaCommand("play"):(o("no castingMediaLoaded. Requesting to load media and cancelling this play request"),e._requestMediaLoad())},i.prototype.pause=function(){var e=this;e._executeMediaCommand("pause")},i.prototype.stop=function(){var e=this;e._executeMediaCommand("stop")},i.prototype.seek=function(e){var t=this;t._executeMediaCommand("seek",e)},i.prototype.setMute=function(e){var t=this;t._session&&t._session.setReceiverMuted(e)},i.prototype.setVolume=function(e){var t=this;t._session&&t._session.setReceiverVolumeLevel(e)}},{"../../lib":"bRhrlU","../../lib/logger":"IS9j5T","./constants":17,"./error":20,"./event":"YJm+dH","./util":"jJTEqU"}],zKzgQw:[function(e,t,n){"use strict";function i(e,t,n){var i=this;i._eventBus=e,i._model=t,i._view=n,i._userPreferences=i._model.userPreferences.closedCaptions;var r=o.localStorage.get(v);i._syncCCLocalData(r),i._eventBus.subscribe(l.Video.PLAYING,i._onVideoPlaybackStarted,i),i._eventBus.subscribe(l.AD_BREAK_ENDED,i._onVideoPlaybackStarted,i),i._eventBus.subscribe(l.PLAYBACK_STARTED,i._onVideoPlaybackStarted,i),i._eventBus.subscribe(l.AD_PLAYBACK_STARTED,i._onAdPlaybackStarted,i),i._eventBus.subscribe(l.Ad.PLAYING,i._onAdPlaybackStarted,i),i._eventBus.subscribe(l.AD_BREAK_STARTED,i._onAdPlaybackStarted,i),i._eventBus.subscribe(l.PLAYBACK_ENDED,i.disable,i),i._eventBus.subscribe(l.PLAYBACK_PROGRESS,i._onPlaybackProgress,i),i._eventBus.subscribe(l.FULLSCREEN_CHANGE,i._adjustCCSizeToScreen,i),i._eventBus.subscribe(l.MEDIA_ITEM_LOADED,i._onMediaItemLoaded,i),i._eventBus.subscribe(l.VTT_SEGMENT_LOADED,i._loadVttSegment,i),i._eventBus.subscribe(l.CC.REQUEST_UI_DATA_FOR_MEDIA_ITEM,i._onMediaItemLoaded,i),i._eventBus.subscribe(l.CC.LANGUAGE_CHANGE,i._onLanguageChange,i),i._eventBus.subscribe(l.CC.UI_TOGGLE,i._toggle,i),i._eventBus.subscribe(l.CC.UPDATE_STYLE,i._updateCCStyle,i),i._eventBus.subscribe(l.CC.POSITION_CHANGE,i._updateCCPosition,i),i._eventBus.subscribe(l.CC.POSITION_FLOAT,i._floatCCPosition,i);var s=i._eventBus.subscribe(l.CC.FETCHED,function(){s()},i);i._eventBus.subscribe(l.CC.USER_STYLE_PREFERENCES_CHANGE,i._syncCCPreferences,i),i._isAvailable=!1,i._currentMediaCCPool=[],i._defaultLang=d,i._ccElement=document.createElement("div"),o.classList(i._ccElement).add("cc-element"),i._CCElementInnerSpan=document.createElement("span"),i._ccElement.appendChild(i._CCElementInnerSpan),i._updateCCStyle(),i._view.getMainElement()&&i._view.getMainElement().appendChild(i._ccElement),i._currentFontSize=i._userPreferences.fontSize,(c.tv||c.safariDesktop&&i._model.isHtmlEnforced())&&a.isFunction(p)&&(i._vttFetcher=new p(i._eventBus,i._model))}var r=e("xhr"),o=e("./util"),a=e("../../lib"),s=e("../../lib/logger"),l=e("./event"),c=e("../../lib/user-agent"),p=e("./vtt-fetcher");t.exports=i;var d="en-us",u=".vtt",_=".ttml",v="yvpCC",y={none:"",dropshadow:"2px 1px 1px rgba(0, 0, 0, 1)",raised:"3px 3px 4px rgba(0, 0, 0, 0.75)",depressed:"0px -4px 4px rgba(0, 0, 0, 0.54)",uniform:"-2px -2px 0 #000, -2px 2px 0 #000, -2px 0 0 #000, 2px -2px 0 #000, 2px 2px 0 #000, 2px 0 0 #000, 0 -2px 0 #000, 0 2px 0 #000"},m=Math.floor((Math.pow(2,33)-1)/90);i.prototype._onPlaybackProgress=function(e,t,n){var i=this;i._isLive?i._renderLiveCC(t):i._renderVODCC(t,n)},i.prototype._renderVODCC=function(e,t){var n=this;if(!n._isAvailable||!n._currentCCParsedCaptions||!n._currentCCParsedCaptions.length)return void(n._CCElementInnerSpan.innerHTML="");for(var i=e/t,r=Math.floor(i*n._currentCCParsedCaptions.length);r>0&&e<n._currentCCParsedCaptions[r].begin;)r--;for(;r<n._currentCCParsedCaptions.length&&e>n._currentCCParsedCaptions[r].end;)r++;var o=r>=0&&r<n._currentCCParsedCaptions.length;if(o=o&&n._currentCCParsedCaptions[r].begin<=e&&e<=n._currentCCParsedCaptions[r].end&&!!n._currentCCParsedCaptions[r].text){n._decorateCCSpan(!0);var a=n._currentCCParsedCaptions[r].text||"";n._CCElementInnerSpan.innerHTML=c.tv?a:n._breakLinesAndPadSides(a)}else n._CCElementInnerSpan.innerHTML="",n._decorateCCSpan()},i.prototype._decorateCCSpan=function(e){var t=this;if(t._CCSpanHasBeenDecorated!==e){var n=null,i=null;e&&(n="1.38em",i="0.104em"),t._CCSpanHasBeenDecorated=e,t._CCElementInnerSpan.style.lineHeight=n,t._CCElementInnerSpan.style.padding=i}},i.prototype._breakLinesAndPadSides=function(e){var t,n=this;if(e){var i=e.split("<br/>");if(i.length>1){for(t=0;t<i.length;t++)i[t].trim()&&(i[t]="&nbsp;"+i[t]+"&nbsp;",t<i.length-1&&(i[t]+="<br/>"));return i.join("")}e=e.trim(),n._CCElementInnerSpan.innerHTML=e;var r,o=Math.floor(n._CCElementInnerSpan.offsetHeight/(n._currentFontSize+2)),a=[],s=0;for(t=0;o>t;t++){if(r=t===o-1)l=e.length;else{var l=Math.floor(e.length/o*(t+1));/\s/.test(e.charAt(l))||(l=e.indexOf(" ",e.lastIndexOf(" ",l)))}l>s&&a.push("&nbsp;"+e.substring(s,l)+"&nbsp;"+(r?"":"<br/>")),s=l+1}return a.join("")}return e},i.prototype._renderLiveCC=function(e){var t=this;if(t._currentCCParsedCaptions&&t._currentCCParsedCaptions.length){for(var n=0;n<t._currentCCParsedCaptions.length&&t._currentCCParsedCaptions[n].end<e;)n++;if(n>0){var i=setTimeout(function(){t._currentCCParsedCaptions.splice(0,n),i=null},100);if(n>=t._currentCCParsedCaptions.length)return}var r=e>=t._currentCCParsedCaptions[n].begin&&e<=t._currentCCParsedCaptions[n].end;r?(t._decorateCCSpan(!0),t._CCElementInnerSpan.innerHTML=t._breakLinesAndPadSides(t._currentCCParsedCaptions[n].text||"")):t._ccLiveClearTO||(t._ccLiveClearTO=setTimeout(function(){t._CCElementInnerSpan.innerHTML="",t._decorateCCSpan(),clearTimeout(t._ccLiveClearTO),t._ccLiveClearTO=null},1e3))}else""!==t._CCElementInnerSpan.innerHTML&&(t._CCElementInnerSpan.innerHTML="",t._decorateCCSpan())},i.prototype._syncCCLocalData=function(e){var t=this;if(e&&e.ccSettings)for(var n in e.ccSettings)if(e.ccSettings.hasOwnProperty(n)&&!a.isNullOrUndefined(e.ccSettings[n])){if("hasChanged"===n)continue;t._userPreferences[n]=e.ccSettings[n]}},i.prototype._syncCCPreferences=function(){var e=this;e._updateCCStyle()},i.prototype._adjustCCSizeToScreen=function(){var e=this,t=e._view.getMainElement()&&e._view.getMainElement().offsetWidth,n=Math.ceil(e._userPreferences.fontSize*(t/640));t>640?n=Math.ceil(.8*n):640>t?12>n&&(n=12):n=e._userPreferences.fontSize,e._currentFontSize=n,e._ccElement.style.fontSize=e._currentFontSize+"px"},i.prototype._onLanguageChange=function(e){var t=this;t._userPreferences.lang=e,t._userPreferences.hasChanged=!0,t.enable(e)},i.prototype._toggle=function(e){var t=this;t._userPreferences.show=e,e?t.enable():t.disable()},i.prototype._onVideoPlaybackStarted=function(){var e=this;e._previouslyPlayingAd&&(e._isAvailable&&(e._userPreferences.show&&e.enable(),e._eventBus.publish(l.CC.SHOW_CONTROLS,!0)),e._previouslyPlayingAd=null)},i.prototype._onAdPlaybackStarted=function(){var e=this;e._previouslyPlayingAd=!0,e._hideAndDisableCC()},i.prototype._hideAndDisableCC=function(e){var t=this;t._eventBus.publish(l.CC.SHOW_CONTROLS,!1),t._currentCC=null,t.disable(),e&&(t._isAvailable=!1,t._currentMediaCCPool=[],t._eventBus.publish(l.CC.REMOVED))},i.prototype._loadVttSegment=function(e,t){var n=this;if(n._isLive){n._isVTTFirstSegment=!1,n._currentCCParsedCaptions||(n._currentCCParsedCaptions=[],n._isAvailable=!0,n._eventBus.publish(l.CC.FETCHED,{langList:["en-US"],selectedLang:"en-US"}),n._eventBus.publish(l.CC.SHOW_CONTROLS,!0),n._userPreferences.show&&n.enable(),n._isVTTFirstSegment=!0);var i=e.adjustedTime;n._currentCCParsedCaptions=n._currentCCParsedCaptions.concat(n._parseVTT(e.data,i,t||n._enableCCLiveFallback))}},i.prototype._onMediaItemLoaded=function(e){var t=this;t._isLive=e.isLive(),e&&e.closedCaptions.length>0?(t._isAvailable=!0,t._currentCC=null,t._eventBus.publish(l.CC.SHOW_CONTROLS,!0),t._processAndPropagateCC(e.closedCaptions)):t._hideAndDisableCC(!0)},i.prototype._processAndPropagateCC=function(e){var t=this,n=function(e){t._currentMediaCCPool=e,t._currentMediaCCPool.length>0?(c.mobile?t._eventBus.publish(l.CC.FETCH_MOBILE,{langList:t._currentMediaCCPool,selectedLang:t._userPreferences.lang}):t._eventBus.publish(l.CC.FETCHED,{langList:t._currentMediaCCPool.map(function(e){return e.lang}),selectedLang:t._userPreferences.lang}),t._userPreferences.show?t.enable(t._userPreferences.lang):t.disable()):(t._hideAndDisableCC(!0),s.warn("CC could not load for current mediaItem"))};t._getCCByRenderer(n,e,c.desktop||c.tv)},i.prototype._transformTTMLToVTT=function(e,t){var n=this,i=!1,r=[],o=function(n){r.push(n),r.length===t.length&&e(r)};t.forEach(function(t){n._ccUrlToVttBlobUrl(t.url,function(n){n?(t.url=n,o(t)):(!i&&e(r),i=!0)})})},i.prototype._ccUrlToVttBlobUrl=function(e,t){var n=this,i={url:e};c.ie&&c.ie<10&&(i.cors=!0),r(i,function(i,r,o){if(i)return void t(null);try{var a=e.indexOf("ttml")>-1?n._ttmlToVtt(o):o,l=new Uint8Array(n._utf8ToBytes(a)),c=URL.createObjectURL(new Blob([l],{type:"text/vtt"}));t(c)}catch(i){s.log("Exception occurred in converting TTML to VTT",i),t(null)}})},i.prototype._getCCByRenderer=function(e,t,n){var i,r=this,o=function(e){return-1===e.url.indexOf(i)};if(n)i=u,e(t.filter(o));else{i=_;var a=t.filter(o);0===a.length?r._transformTTMLToVTT(e,t):e(a)}},i.prototype._utf8ToBytes=function(e){for(var t=[],n=0;n<e.length;n++){var i=e.charCodeAt(n);if(127>=i)t.push(i);else{var r=n;i>=55296&&57343>=i&&n++;for(var o=encodeURIComponent(e.slice(r,n+1)).substr(1).split("%"),a=0;a<o.length;a++)t.push(parseInt(o[a],16))}}return t},i.prototype._ttmlToVtt=function(e){var t="WEBVTT\n\n",n=new window.DOMParser,i=n.parseFromString(e,"application/xml"),r=i.documentElement.querySelectorAll("p");return Array.prototype.forEach.call(r,function(e){var n=e.getAttribute("id"),i=e.getAttribute("begin"),r=e.getAttribute("end"),o="";Array.prototype.forEach.call(e.childNodes,function(e){""!==e.textContent&&(o+=e.textContent+" ")}),o=o.replace(/<br.*?\/\>/," "),t+=n+"\n",t+=i+" --> "+r+"\n",t+=o+"\n\n"}),t},i.prototype._grabCCFromTTML=function(e){for(var t=this,n=[],i=new window.DOMParser,r=i.parseFromString(e,"application/xml"),o=r.documentElement.querySelectorAll("p"),a=0;a<o.length;a++){var s={};if(s.begin=t._parseToSeconds(o[a].getAttribute("begin")),s.end=t._parseToSeconds(o[a].getAttribute("end")),!s.end&&(s.end=t._parseToSeconds(o[a].getAttribute("dur"))&&t._parseToSeconds(o[a].getAttribute("begin"))+t._parseToSeconds(o[a].getAttribute("dur")),!s.end)){n=null,t._hideAndDisableCC(!0);break}""!==o[a].textContent&&(s.text=o[a].textContent),n.push(s)}return n},i.prototype._parseVTT=function(e,t,n){for(var i,r=this,o=/\r\n|\r|\n/,a=e.split(o),s=a.length,l=/(\d{2}.?\d{2}.?\d{2}\.?\d{3})\s+.+\s+(\d{2}.?\d{2}.?\d{2}\.?\d{3})/,c=[],p=0,d=0,u=0;s>u;u++)if(l.test(a[u])){if(d>0){for(i=d;u>i;i++)c[p].text+=a[i]+(u>i+2?"<br/>":"");p++}var _=a[u].match(l);n&&!r._zeroTimeIndicator&&(r._zeroTimeIndicator=1e3*r._parseToSeconds(_[1]));var v=1e3*r._parseToSeconds(_[1]),y=1e3*r._parseToSeconds(_[2]);if(n)v-=r._zeroTimeIndicator,y-=r._zeroTimeIndicator;else if(v=v%m+t,y=y%m+t,r._isVTTFirstSegment&&v>1e4)return r._enableCCLiveFallback=!0,r._isVTTFirstSegment=!1,r._parseVTT(e,t,!0);c[p]={begin:v/1e3,end:y/1e3,text:""},d=u+1}if(d>0&&s>d)for(i=d;s>i;i++)c[p].text+=a[i]+(s>i+2?"<br/>":"");return c},i.prototype._parseToSeconds=function(e){if(e){for(var t=0,n=e.split(":"),i=2;i>=0;i--)t+=n[n.length-1-i]*Math.pow(60,i);return t}},i.prototype._saveAndPropagateData=function(e,t){var n=this;n._userPreferences.lang=t||n._userPreferences.lang,n._userPreferences.hasChanged=!0,n._eventBus.publish(l.CC.TOGGLE,e),n._eventBus.publish(l.CC.SAVE_TO_LOCAL_STORAGE,{ccSettings:n._userPreferences})},i.prototype._prepareCCForRendering=function(e){var t=this,n={url:e.url};c.ie&&c.ie<10&&(n.cors=!0),e.parsedCC||r(n,function(n,i,r){return n?(s.warn("Could not fetch CC from endpoint: "+n),void t._hideAndDisableCC()):void(t._currentCCParsedCaptions=e.parsedCC=t._grabCCFromTTML(r))})},i.prototype.enable=function(e){var t=this;return t._isAvailable?t._isLive?(t._ccElement.style.display="block",t._ccElement.style.textAlign="left",t._ccElement.style.width="90%",t._ccElement.style.left="5%",t._saveAndPropagateData(!0,d),!0):(t._currentCC=t._getCCByLanguage(e),t._currentCC||(t._currentCC=t._getCCByLanguage(t._userPreferences.lang)||t._currentMediaCCPool[0]),c.desktop||c.tv?(t._prepareCCForRendering(t._currentCC),t._currentCCParsedCaptions=t._currentCC.parsedCC,t._ccElement.style.display="block",t._saveAndPropagateData(!0,t._currentCC.lang),!0):(!c.desktop&&o.warn("Renderer was unable to enable CC"),!c.desktop)):void t._saveAndPropagateData(!0)},i.prototype.disable=function(){var e=this;return this._saveAndPropagateData(!1),e._isLive||(e._currentCCParsedCaptions=null),e._ccElement.style.display="none",!0},i.prototype._getCCByLanguage=function(e){for(var t,n=this,i=0;i<n._currentMediaCCPool.length;i++){if(e&&n._currentMediaCCPool[i].lang.toLowerCase()===e.toLowerCase().replace("_","-"))return n._currentMediaCCPool[i];n._currentMediaCCPool[i].lang===d&&(t=n._currentMediaCCPool[i])}return t},i.prototype._updateCCStyle=function(){var e=this;if(e._ccElement){var t=o.cssHexToRgb(e._userPreferences.bgColor)||{r:0,g:0,b:0},n=0===e._userPreferences.bgOpacity?"transparent":"rgba("+t.r+","+t.g+","+t.b+","+e._userPreferences.bgOpacity+")",i=y[e._userPreferences.fontEffect];e._ccElement.style.fontFamily=e._userPreferences.fontName,e._adjustCCSizeToScreen(),e._ccElement.style.color=e._userPreferences.fontColor,e._CCElementInnerSpan.style.backgroundColor=n,e._ccElement.style.textShadow=i,c.tv&&(e._ccElement.style.position="absolute",e._ccElement.style.width="100%",e._ccElement.style.textAlign="center",e._ccElement.style.bottom="14%",e._ccElement.style.zIndex="30")}},i.prototype._floatCCPosition=function(e){var t=this,n=t._ccElement;t._isAvailable&&"none"!==n.style.display&&(e?(o.classList(n).remove("float"),o.classList(n).add("bottom")):(o.classList(n).add("float"),o.classList(n).remove("bottom")))},i.prototype._updateCCPosition=function(e){var t=this,n=t._ccElement;e?(o.classList(n).remove("bottom"),o.classList(n).add("top")):(o.classList(n).add("bottom"),o.classList(n).remove("top"))},i.prototype.hasUserPreferencesChanged=function(){var e=this;return e._userPreferences.hasChanged},i.prototype.resetPreferenceChange=function(){var e=this;e._userPreferences.hasChanged=!1},i.prototype.destroy=function(){},i.prototype.getLanguageForCode=function(e){e=e.toLowerCase().split("-"),e.length>1&&(e.pop(),e=e.join("-"));var t={id:"Bahasa Indonesia",ms:"Bahasa Melayu",cs:"etina",da:"dansk",de:"Deutsch",et:"eesti",en:"English",es:"espaol",fil:"Filipino",fr:"franais",hr:"hrvatski",it:"italiano",lv:"latvieu",lt:"lietuvi",hu:"magyar",nl:"Nederlands",nb:"norsk bokml",pl:"polski",pt:"portugus",ro:"romn",sk:"slovenina",sl:"slovenina",fi:"suomi",sv:"svenska",vi:"Ting Vit",tr:"Trke",el:"",bg:"",ru:"","sr-cyrl":"",uk:"",he:"",ar:"",mr:"",hi:"",bn:"",gu:"",ta:"",te:"",kn:"",ml:"",th:"",ur:" ",ko:"","zh-hans":"","zh-hant":"",ja:""};return t[e]}},{"../../lib":"bRhrlU","../../lib/logger":"IS9j5T","../../lib/user-agent":"ty5FFo","./event":"YJm+dH","./util":"jJTEqU","./vtt-fetcher":95,xhr:161}],"./nextgen/src/cc.js":[function(e,t,n){t.exports=e("zKzgQw")},{}],17:[function(e,t,n){"use strict";n.VIDEO_TAG_READY_STATES={HAVE_NOTHING:0,HAVE_METADATA:1,HAVE_CURRENT_DATA:2,HAVE_FUTURE_DATA:3,HAVE_ENOUGH_DATA:4},n.CHROMECAST_RECEIVER_ID="EF65F6AF"},{}],18:[function(e,t,n){"use strict";function i(e,t){var n=this;n._profiler=new v(e),n._profiler.add(l.Metrics.INIT_TO_STARTSCREEN),n._profiler.add(l.Metrics.INIT_TO_SAPI),n._profiler.add(l.Metrics.RENDER_TO_SWF),n._profiler.add(l.Metrics.INIT_TO_APPS_INIT),n._profiler.add(l.Metrics.VP_CONSTRUCTOR),n._eventBus=new c("internal"),n._model=new _.Model(e,t),n._restAPI=new h(n._model,n._profiler),n.ifPlaybackProgressCalled=!1,e.enableRecoverer&&!m.mobile&&(n._recoverer=new T(n._eventBus,n._model)),window.performance&&window.performance.timing.navigationStart&&(n._model.metrics.pageLatency=(new Date).getTime()-window.performance.timing.navigationStart),m.mobile?n._model.playback.autoplay=!1:n._model.playback.adPlaybackOnly?n._model.playback.autoplay=!0:n._model.playback.autoplay&&f.localStorage.get("yvp-dont-autoplay")&&(n._model.playback.autoplay=!1),f.localStorage.get("yvp-dont-autoplay")&&!n._model.ui.showStartScreen&&(n._model.ui.showStartScreen=!0),n._model.playback.autoplay&&(n._profiler.add(l.Metrics.INIT_TO_START),n._profiler.add(l.Metrics.HLS_FIRST_TS_LOAD_START)),n._metrics=new u.Metrics(n._model,n._eventBus,n._profiler),n._eventBus.subscribe(l.ERROR,n._onError,n),n._eventBus.subscribe(l.INFO,n._onError,n),n._eventBus.subscribe(l.WARNING,n._onWarning,n),n._eventBus.subscribe(l.START_SCREEN_CLICK,n._onStartScreenClick,n),n._eventBus.subscribe(l.END_SCREEN_CLICK,n._onEndScreenClick,n),n._eventBus.subscribe(l.RELATED_ITEM_CLICK,n._onRelatedItemClick,n),n._eventBus.subscribe(l.FETCH_MORE_RELATED_ITEMS,n._onFetchMoreRelatedItems,n),n._eventBus.subscribe(l.MEDIA_ITEM_LOADED,n._onMediaItemLoaded,n),n._eventBus.subscribe(l.TOGGLE_PLAY_PAUSE,n._togglePlayPause,n),n._eventBus.subscribe(l.CONTROLS_SEEK_START,n._onControlsSeekStart,n),n._eventBus.subscribe(l.CONTROLS_SEEK_END,n._onControlsSeekEnd,n),n._eventBus.subscribe(l.CONTROLS_SEEKING,n._onControlsSeeking,n),n._eventBus.subscribe(l.Video.CLICK,n._onVideoClick,n),n._eventBus.subscribe(l.Video.PLAYING,n._onPlaybackPlaying,n),n._eventBus.subscribe(l.Video.TIMEUPDATE,n._onPlaybackProgress,n),n._eventBus.subscribe(l.Video.PAUSE,n._onPlaybackPaused,n),n._eventBus.subscribe(l.Video.SEEKING,n._onSeeking,n),n._eventBus.subscribe(l.Video.SEEKED,n._onSeeked,n),n._eventBus.subscribe(l.Video.ENDED,n._onPlaybackEnded,n),n._eventBus.subscribe(l.Video.ERROR,n._onPlaybackError,n),n._eventBus.subscribe(l.Video.WAITING,n._onWaiting,n),n._eventBus.subscribe(l.PLAYBACK_REQUEST,n._setPlaybackTimeout,n),n._playbackStartEvenUnsubscriber=n._eventBus.subscribe(l.PLAYBACK_STARTED,function(){n._notifyVideoStarted()}),n._adPlaybackStartEvenUnsubscriber=n._eventBus.subscribe(l.AD_PLAYBACK_STARTED,function(){n._notifyVideoStarted()}),n._eventBus.subscribe(l.SELECTED_STREAM_CHANGE,n._onSelectedStreamChange,n),n._eventBus.subscribe(l.SELECTED_STREAM_URL_CHANGE,n._onSelectedStreamChange,n),n._eventBus.subscribe(l.PLAYER_DIMENSION_CHANGE,n._onDimensionChange,n),n._eventBus.subscribe(l.MEDIA_RELOAD_BEGIN,n._onMediaReloadBegin,n),n._eventBus.subscribe(l.MEDIA_RELOAD_END,n._onMediaReloadEnd,n),n._eventBus.subscribe(l.QUALITY_CHANGE,n._onQualityChange,n),n._eventBus.subscribe(l.METADATA_AVAILABLE,n._onMetadata,n),n._eventBus.subscribe(l.REFRESH_METADATA_AVAILABLE,n._updateYVAPData,n),n._eventBus.subscribe(l.SAPI_REFRESH_REQUEST,n._refreshMetadata,n),n._eventBus.subscribe(l.USER_AUTHENTICATED,n._onUserAuthentication,n),n._eventBus.subscribe(l.CONTROLS_SET_VOLUME,n._onVolumeChange,n),n._eventBus.subscribe(l.CONTROLS_SET_MUTE,n._onMuteChange,n),n._eventBus.subscribe(l.CC.SAVE_TO_LOCAL_STORAGE,n.saveCCSettingsToLocalStorage,n),n._eventBus.subscribe(l.API.BITRATE_CHANGE,n._onBitrateChange,n),n._eventBus.subscribe(l.KEYDOWN,n._onKeyDown,n),n._eventBus.subscribe(l.QUALITY_SELECTED,n._onQualitySelected,n),n._eventBus.subscribe(l.BITRATE_LIST_CHANGED,n._onBitrateListChanged,n),n._eventBus.subscribe(l.PTS_DISCONTINUITY,n._onPTSDiscontinuity,n),n._eventBus.subscribe(l.RELOAD_FRAGMENT,n._onReloadFragment,n),n._eventBus.subscribe(l.RECOVERY_START,n._onRecoveryStart,n),n._eventBus.subscribe(l.RECOVERY_METADATA_READY,n._onRecoveryMetadata,n),n._eventBus.subscribe(l.ER_READY,n._onER,n),n._fetcher=new p(n._model,n._eventBus,n._profiler),n._eventBus.publish(l.VIDEO_REQUEST,n._model.playlist.getCurrentItem().isPrefetch),n._playbackStarted={},n._profiler.setEndTime(l.Metrics.VP_CONSTRUCTOR),n._profiler.add(l.Metrics.INIT_RENDER_GAP),m.chrome>=32&&!n._model.disableCasting&&(n._castController=new o(n._model,n._eventBus),n._eventBus.subscribe(l.CAST.CONNECTION_STATUS_CHANGED,n._onCastConnectionChange,n),n._eventBus.subscribe(l.CAST.PLAYLIST_ENDED,n._onCastPlaylistEnded,n),n._eventBus.subscribe(l.CAST.TOGGLE_PLAYING,function(){n._view.syncViewState()},n),n._eventBus.subscribe(l.CAST.VIDEO_ENDED,function(){n._view.syncViewState()},n))}t.exports=i;var r=e("./ads-controller"),o=e("./cast-controller"),a=e("./age-gate-controller"),s=e("./error"),l=e("./event"),c=e("../../lib/event-bus"),p=e("./metadata-fetcher"),d=e("./media-store"),u=e("./metrics/metrics"),_=e("./model"),v=e("./profiler"),y=e("./states"),m=e("../../lib/user-agent"),f=e("./util"),g=e("../../lib"),b=e("../../lib/logger"),E=e("./view"),h=e("./restapi"),A=e("./cc"),S=e("./metrics/metrics-constants"),T=e("./recoverer"),L="yvpVolume",I="yvpCC",M=1e4,C=30,N="yvpResumeTimeItems";i.prototype._togglePlayPause=function(){var e=this;e._model.castState&&e._model.castState.connected||e._model.playbackState.state===y.VIDEO&&(e._model.playbackState.paused?(e.play(),e._eventBus.publish(l.CTRL_PLAYPAUSE,"play")):(e.pause(),e._eventBus.publish(l.CTRL_PLAYPAUSE,"pause")))},i.prototype.render=function(e){var t=this;t._profiler.setEndTime(l.Metrics.INIT_RENDER_GAP),t._profiler.add(l.Metrics.CREATE_RENDERER);var n;n=g.isString(e)?document.querySelector(e):e._node||e,null===n&&t._eventBus.publish(l.Error,f.createErr("C",t._model.playbackState,s.E_PLAYER,s.PLAYER_CODES.E_INVALID_CONFIGURATION,"Invalid DOM node or CSS selector specified. Cannot render player.")),t._metrics.setRootElem(n),t._view=new E(n,t._model,t._eventBus,t._profiler),t._view.render(t._model),g.isFunction(A)&&(t._ccController=new A(t._eventBus,t._model,t._view));var i={play:function(){t.play()},pause:function(){t.pause()},setOverlayActive:function(e){t._view.setOverlayActive(e)}};if(t._initVolume(),g.isFunction(r)&&(t._adsController=new r(t._eventBus,i,t._model,t._view)),t._playerReadyEventFired=!1,t._enterInitState(),t._model.playback.autoplay)var o={type:S.AUTOPLAY,action:S.AUTOPLAY};return t._model.playlist.id?t._fetcher.fetchPlaylist(function(){t._model.playback.autoplay&&t.play(o)}):t._fetcher.updateMetadata(),t._view.setDefaultRendererType(),t._model.playback.autoplay&&t.play(o),t._eventBus.publish(l.API.PLAYER_RENDERED),t._metrics.setFlashRenderer(t._view._renderer),t._profiler.setEndTime(l.Metrics.CREATE_RENDERER),t},i.prototype._initVolume=function(){var e=this,t=1,n=!1,i=f.localStorage.get(L);i&&(t=i.volume,n=i.mute),null===e._model.playbackState.volume&&(e._model.playbackState.volume=t),null===e._model.playbackState.mute&&(e._model.playbackState.mute=n)},i.prototype._onVolumeChange=function(e){var t=this,n=t._model.playbackState.volume;t._model.playbackState.volume=e,e>0&&(t._model.playbackState.mute=!1),t._view.isRendererSet()&&t._view.setVolume(e),f.localStorage.put(L,{volume:e,mute:t._model.playbackState.mute}),t._eventBus.publish(l.CTRL_VOLUME,n)},i.prototype._onMuteChange=function(e){var t=this;t._model.playbackState.mute=e,t._view.isRendererSet()&&t._view.setMute(e),f.localStorage.put(L,{volume:t._model.playbackState.volume,mute:e})},i.prototype._onKeyDown=function(e){var t=this,n=e.keyCode,i="key-"+n;(32===n||38===n||40===n)&&(e.preventDefault(),t._eventBus.publish(l.API.UI_INTERACT,{srcElement:i}))},i.prototype.getCustomControlsNode=function(){var e=this;return e._view.getCustomControlsNode()},i.prototype.saveCCSettingsToLocalStorage=function(e){var t=f.localStorage.get(I)||{};for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);f.localStorage.put(I,t)},i.prototype.supportSendBeacon=function(){return!(m.ie||m.safari||m.ios)},i.prototype.saveResumeTime=function(e){var t=f.localStorage.get(N)||{};t[e.id]=e.progress,f.localStorage.put(N,t)},i.prototype._onMetadata=function(e){var t=this,n=t._model.playlist.getCurrentItem();t._updateYVAPData(e),n&&-1!==e.indexOf(n.id)&&n.recoveryStatus!==d.ItemRecoveryStatus.RECOVERING&&t._loadMediaItem(n)},i.prototype._updateYVAPData=function(e){var t=this,n=[];t._adsController&&(e.forEach(function(e){var i=t._model.mediaStore.get(e),r="dash"===i.rendererType?"html":i.rendererType;n.push({clipId:i.id,clipDuration:i.duration,licenseId:i.license.licenseId,spaceId:i.metrics.pageSpaceId,playlistId:t._model.playlist.id,yvap:i.yvap,isLive:i.isLive(),rendererType:r})}),t._adsController.updateYVAPData(n))},i.prototype._refreshMetadata=function(e){var t=this;t._fetcher.refreshMetadata(e)},i.prototype._setupRenderer=function(e,t){var n=this,i=e.rendererType;n._model.playbackState.rendererType=i,n._view.setRendererType(i),n._view.setVolume(n._model.playbackState.volume),n._view.setMute(n._model.playbackState.mute),n._view.waitForRenderer(t)},i.prototype._loadMediaItem=function(e){var t=this,n=e.status.code,i=e.progress&&e.progress.position||t._model.playback.startTime;if(e.state===d.ItemState.HAS_DATA)t._model.playbackState.attemptingPlayback()||t._findCriticalError()||t._enterInitState(),t._setupRenderer(e,function(n){return n?(t._clearPlaybackTimeout(),void b.warn("Renderer failed to initialize. Is flash blocked?")):(t._notifedVideoStarted=!1,t._setVideoSrc(e,i)?t._adsController&&t._adsController.prepare(e):t._eventBus.publish(l.ERROR,f.createErr("S",t._model.playbackState,s.E_SAPI_STREAM,s.SAPI_CODES.E_SAPI_NO_PLAYABLE_STREAMS)),
t._model.playbackState.loadedItem=e,void t._eventBus.publish(l.MEDIA_ITEM_LOADED,e))});else{if(n&&n.length>0||(n=s.SAPI_CODES.E_SAPI_NOT_FOUND),!t._isSAPIRequestError(n)){var r=s.isInfoCode(n);t._eventBus.publish(r?l.INFO:l.ERROR,f.createErr("S",t._model.playbackState,r?s.E_INFO:s.E_SAPI_STREAM,n))}t._model.playbackState.loadedItem=e,t._eventBus.publish(l.MEDIA_ITEM_LOADED,e)}},i.prototype._isSAPIRequestError=function(e){return e===s.E_PLAYER_CMS_JSONP_REQUEST_FAILURE||e===s.E_PLAYER_CMS_JSONP_REQUEST_FAILURE_SILENT_FAIL||e===s.E_PLAYER_CMS_RESPONSE||e===s.E_PLAYER_CMS_JSONP_REQUEST_TIMEOUT||e===s.E_PLAYER_CMS_JSONP_REQUEST_TIMEOUT_SILENT_FAIL||e===s.E_PLAYER_CMS_XHR_REQUEST_SERVER_CONNECTION_FAILED||e===s.E_PLAYER_CMS_XHR_REQUEST_SERVER_CONNECTION_FAILED_TIMEOUT||e===s.E_PLAYER_CMS_XHR_REQUEST_RESPONSE_NOT_RECEIVED||e===s.E_PLAYER_CMS_XHR_REQUEST_RESPONSE_NOT_RECEIVED_TIMEOUT||e===s.E_PLAYER_CMS_XHR_REQUEST_LOAD_FAILED||e===s.E_PLAYER_CMS_XHR_REQUEST_LOAD_FAILED_TIMEOUT||e===s.E_PLAYER_CMS_XHR_REQUEST_LOAD_FAILED_408||e===s.E_PLAYER_CMS_XHR_REQUEST_NOT_COMPLETE||e===s.E_PLAYER_CMS_XHR_REQUEST_NOT_COMPLETE_TIMEOUT||e===s.E_PLAYER_CMS_XHR_REQUEST_NOT_COMPLETE_408||e===s.E_PLAYER_CMS_XHR_REQUEST_ERROR||e===s.E_PLAYER_CMS_XHR_REQUEST_TIMEOUT},i.prototype._onMediaItemLoaded=function(e){var t=this;t._playerReadyEventFired||(t._playerReadyEventFired=!0,t._eventBus.publish(l.API.PLAYER_READY)),t._attachWatchHistoryHandler(e)},i.prototype._attachWatchHistoryHandler=function(e){var t=this,n=function(){t._watchHistoryHandlerUnsub&&t._watchHistoryHandlerUnsub(),t._watchHistoryHandlerUnsub=null},i=function(){n(),t._model.userPreferences.isAuthenticated&&t._restAPI.saveToWatchHistory(e.id,function(e,t){e?b.warn("watch history call failed",e):b.log("watch history saved",t)},t)};n(),e.duration<=C?t._watchHistoryHandlerUnsub=t._eventBus.subscribe(l.PLAYBACK_ENDED,i,t):t._watchHistoryHandlerUnsub=t._eventBus.subscribe(l.PLAYBACK_PROGRESS,function(e,t){t>=C&&i()},t)},i.prototype._onCastConnectionChange=function(e,t){var n=this;if(e)n._model.playbackState.isVideoPlaying()&&(b.log("[cast][connection-success] video is still playing locally when connected. pausing it"),n._pausePlayer());else if(t.playlist_pos===n._model.playlist.position){var i=n._model.playlist.getCurrentItem();n._model.playbackState.state!==y.VIDEO||i.isLive()||n.seek(i.progress.position),n.play()}else if(g.isNumber(t.playlist_pos)&&"unknown"!==t.playlist_pos)n.setPlaylistPosition(t.playlist_pos,!0);else if(t.media_uuid){var r=n._model.playlist.items.indexOf(t.media_uuid);n.setPlaylistPosition(r>-1?r:0,!0)}else b.log("[cast] upon cast disconnect, could not determine where to resume playback",t),n.play();n._view.syncViewState()},i.prototype._onCastPlaylistEnded=function(){var e=this;e._model.playlist.position=e._model.playlist.items.length-1,e._onPlaybackEnded()},i.prototype.play=function(e,t){b.log("Controller.play()");var n=this;if(n._model.castState&&n._model.castState.connected)return void n._castController.play();var i=g.isNullOrUndefined(t)?!0:t;if(n._model.playbackState.paused&&n._model.playbackState.isVpaidAdPlaying())return n._eventBus.publish(l.RESUME_VPAID),n._onPlaybackResumed(),void b.log("Controller.play(): paused, informing VPAID ad to resume");if(n._model.playbackState.attemptingPlayback())return void b.log("Controller.play(): Cannot play, already attempting playback");var r=n._model.playlist.getCurrentItem();if(!r)return void b.log("Controller.play(): No current item, cannot play");if(n._spinnerMonitorStartTime=null,n._model.playbackState.paused)return void n._view.play();if(e&&(n._model.playback.requestType=e.type,e.action&&(n._model.playback.requestAction=e.action)),r.ageGate&&n._model.ui.showAgeGate)return void n._initiateAgeGate();if(n._model.ui.showAgeGate&&n._view.destroyAgeGateScreen(),n._profiler.add(l.Metrics.PLAYBACK_START),n._resetStateFlags(),r===n._model.playbackState.loadedItem)n._model.playbackState.loading=!0,n.setSelectedStreams(),n._eventBus.publish(l.PLAYBACK_REQUEST,r.id),n._startPlaying(r,i);else if(m.mobile)n._eventBus.publish(l.INFO,f.createErr("C",n._model.playbackState,s.E_WARNING,s.PLAYER_CODES.E_PLAYER_HTML5_PLAYBACK_ERROR_PLAY_INITIATED_BEFORE_METADATA_READY,"Cannot play before metadata is available"));else{n._model.playbackState.state=y.WAITING,n._model.playbackState.loading=!0;var o=n._eventBus.subscribe(l.MEDIA_ITEM_LOADED,function(e){if(e===r){if(o(),n.setSelectedStreams(),r.ageGate&&n._model.ui.showAgeGate)return n._model.playbackState.state=y.INIT,void n._initiateAgeGate();n._eventBus.publish(l.PLAYBACK_REQUEST,r.id),n._startPlaying(r,i)}})}n._view.syncViewState()},i.prototype.setSelectedStreams=function(){var e=this,t=e._model.playlist.getCurrentItem();t&&t.selectedStreams&&0===t.selectedStreams.length&&t.streams.length&&e._view.setSelectedStreams(t.streams)},i.prototype._startPlaying=function(e,t){var n=this,i="start";if(e===n._model.playlist.getCurrentItem()&&!n._findCriticalError()){e.restartIfNeeded();var r=function(){var t=e.progress.position;n.getAutoplay()||n._firstPlayCalled||(n._firstPlayCalled=!0,n._profiler.add(l.Metrics.CLICK_TO_START)),e.isLongForm()&&t>0?(n._model.playback.isResume=!0,n._view.play(t),n._eventBus.publish(l.PLAYBACK_STARTED,e.id,e.progress.position)):(n._view.play(n._model.playback.startTime),n._model.playback.startTime=NaN),n._model.playback.fullscreen&&n._view.setFullscreen(!0)},o=function(){n._model.playbackState.state=y.VIDEO,n._resetStateFlags(),n._model.playbackState.loading=!0,n._view.syncViewState()};n._adsController&&t?n._adsController.maybePlay(i,function(t){o(),t&&(n._profiler.add(l.Metrics.PLAYBACK_START),n._setVideoSrc(e)),r()}):(o(),r())}},i.prototype._setPlaybackTimeout=function(){var e=this,t=e._model.playlist.getCurrentItem();e._view.didRendererTimeOut()||e._playbackTimeout||"error"===t.state||(e._playbackTimeout=setTimeout(function(){e._eventBus.publish(l.API.PLAYBACK_TIMEOUT,f.createErr("P",e._model.playbackState,s.E_WARNING,s.WARNING_CODES.E_PLAYBACK_TIMEOUT,"No playback after 10 seconds of requesting to play on player"))},M))},i.prototype._clearPlaybackTimeout=function(){var e=this;e._playbackTimeout&&clearTimeout(e._playbackTimeout)},i.prototype._notifyVideoStarted=function(){var e=this;e._notifedVideoStarted||(e._eventBus.publish(l.API.VIDEO_STARTED),e._notifedVideoStarted=!0),e._clearPlaybackTimeout()},i.prototype.pause=function(){var e=this,t=e._model.castState;t&&t.connected?!t.paused&&e._castController.pause():e._pausePlayer()},i.prototype._pausePlayer=function(){var e=this;e._model.playbackState.isVpaidAdPlaying()?(e._eventBus.publish(l.PAUSE_VPAID),e._onPlaybackPaused()):e._model.playbackState.attemptingPlayback()&&e._view.pause()},i.prototype.seek=function(e){var t=this;t._model.castState&&t._model.castState.connected?t._castController.seek(e):t._model.playbackState.state===y.VIDEO&&t._view.seek(e)},i.prototype.recover=function(){var e=this;e._recoverer.recover()},i.prototype.disableControls=function(){var e=this;e._view.disableControls()},i.prototype.enableControls=function(){var e=this;e._view.enableControls()},i.prototype.setCC=function(e,t){var n=this;n._ccController&&(e?n._ccController.enable(t):n._ccController.disable())},i.prototype.isPlaying=function(){var e=this;return"video"===e._model.playbackState.state&&!e._model.playbackState.paused},i.prototype.setFullscreen=function(e){var t=this;t._view.setFullscreen(e)},i.prototype.getFullscreen=function(){var e=this;return e._view.getFullscreen()},i.prototype.setVolume=function(e){var t=this;t._eventBus.publish(l.CONTROLS_SET_VOLUME,e)},i.prototype.getVolume=function(){var e=this;return e._model.playbackState.volume},i.prototype.setMute=function(e){var t=this;t._eventBus.publish(l.CONTROLS_SET_MUTE,e)},i.prototype.getMute=function(){var e=this;return e._model.playbackState.mute},i.prototype.setLoop=function(e){var t=this;t._model.playback.loop=e},i.prototype.getLoop=function(){var e=this;return e._model.playback.loop},i.prototype.setContinuousPlay=function(e){var t=this;t._model.playback.continuousPlay=e},i.prototype.getContinuousPlay=function(){var e=this;return e._model.playback.continuousPlay},i.prototype.resumeContinuousPlay=function(e){var t=this;if(t.setContinuousPlay(!0),t._model.playbackState.state===y.END){var n=t._model.playlist.getNextPosition(t._model.playback.continuousPlay,t._model.playback.loop);-1!==n&&t.setPlaylistPosition(n,!0,e)}},i.prototype.getAutoplay=function(){var e=this;return e._model.playback.autoplay},i.prototype.getMediaStore=function(){var e=this;return e._model.mediaStore},i.prototype.getPlaybackState=function(){var e=this;return e._model.playbackState.state},i.prototype.getCurrentMediaItem=function(){var e=this;return e._model.playlist.getCurrentItem()},i.prototype.getPlaylistItems=function(){var e=this;return e._model.playlist.items},i.prototype.getPlaylist=function(){var e=this;return e._model.playlist},i.prototype._onDimensionChange=function(e){var t=this;t._model.uiState.width=e.width,t._model.uiState.height=e.height},i.prototype._onSelectedStreamChange=function(e,t){var n,i=this,r=i._model.playlist.getCurrentItem();if(t){t.cdn=f.getMediaCDNName(r,e,t.selectedStreamUrl),t.url=t.selectedStreamUrl;var o=[t];n=o}else{for(var a=e.length,s=0;a>s;s++)e[s].cdn=f.getMediaCDNName(r,e,null);n=e}r.fillSelectedStreams(n,null)},i.prototype._findCriticalError=function(){for(var e=this,t=e._model.errors,n=0;n<t.length;n++)if(t[n].category||t[n].subcategory)return t[n];return null},i.prototype._onStartScreenClick=function(){var e=this;e._eventBus.publish(l.CTRL_PLAYREQUEST,"ctp"),e._profiler.add(l.Metrics.HLS_FIRST_TS_LOAD_START);var t={type:S.CLICK,action:S.CLICK};e.play(t)},i.prototype._onVideoClick=function(){var e=this;if(e._eventBus.publish(l.API.UI_INTERACT,{srcElement:"video-click"}),e._view.controls)if("flash"===e._model.playbackState.rendererType){var t=e._model.playbackState.paused?"play":"pause";e._eventBus.publish(l.CTRL_PLAYPAUSE,t),e._view.setKeyboardFocus()}else e._togglePlayPause()},i.prototype._onEndScreenClick=function(e,t){var n=this,i=n._model.playlist;0===t?(n._eventBus.publish(l.API.UI_INTERACT,{srcElement:"es-rpl"}),n._eventBus.publish(l.CTRL_REPLAY)):(n._eventBus.publish(l.API.UI_INTERACT,{srcElement:"es-vid-"+t}),n._eventBus.publish(l.CTRL_ENDSCREEN_VID,{vid:e,vindex:t}));var r={type:S.CONTINUOUS,action:S.CLICK};n.setPlaylistPosition(i.appendItem(e),!0,r)},i.prototype._onRelatedItemClick=function(e,t,n,i){var r=this,o=r._model.playlist,a=n?"next-vid-":"es-vid-",s={srcElement:a+t},c=-1===t?l.CTRL_REPLAY:l.CTRL_ENDSCREEN_VID;-1===t&&(s.srcElement="es-rpl"),t>-2&&r._eventBus.publish(l.API.UI_INTERACT,s),r._eventBus.publish(c,{vid:e,vindex:t});var p={type:S.CONTINUOUS,action:i?S.AUTOPLAY:S.CLICK};r.setPlaylistPosition(o.appendItem(e),!0,p)},i.prototype._onFetchMoreRelatedItems=function(e,t,n){var i=this;i._fetcher.getRelatedVideos(e,t,function(t,r){var o=[];r&&r.length>0&&(o=r.map(function(e){return i._model.mediaStore.get(e)})),t&&b.warn("sAPI data errors encountered while getting related videos!"),n?n(t,o):i._eventBus.publish(l.RELATED_ITEMS_LOADED,t,e,o)})},i.prototype.setPlaylistPosition=function(e,t,n){var i=this;i._resetPlaybackStarted(),i._model.errors=[],i._model.playbackState.criticalError=null,i._model.playbackState.isAdPlaying()&&i._adsController.cancelAd();var r=i._model.playlist,o=r.getCurrentItem();i._view.endVideo(),r.position=e;var a=r.getCurrentItem();if(i._model.playbackState.looped=!1,a){var s=a.streams.length>0&&a.streams[0].path?d.getSapiVsId(a.streams[0].path):"";a.videoSession=s+"_"+a.generateVSid(),a.samplingId=a.generateSamplingId(),d.updateVsInStreams(a.streams,a.videoSession),i._view.resetState(),i._eventBus.publish(l.API.PLAYLIST_POSITION_CHANGE,r.position),i._enterInitState(),i._eventBus.publish(l.VIDEO_REQUEST,a.isPrefetch),a.fetchFinished()&&i._loadMediaItem(a)}else t=!1;a&&"error"!==a.state?t&&i.play(n):i._endPlayback(o)},i.prototype.setContentHeightForNFL=function(){var e=this,t=e._model.playlist.getCurrentItem(),n=t?t.provider:null;n&&"video.nflhighlights.com"===n.providerId&&e._view._setContentHeightForNFL()},i.prototype.sendPrefetchInfo=function(e){var t=this,n={url:e.url,source:e.source,latency:e.latency||"na",http_code:e.http_code||"na",resp_len:e.resp_len||"na",instrument:e.instrument||"na",perfInfo:e.perfInfo||"na",perfStack:e.perfStack||"na"};return n.source&&n.url?(t._eventBus.publish(l.API_CALLED,n),!0):!1},i.prototype._endPlayback=function(e){var t=this;t._view.setFullscreen(!1),t._model.playbackState.previousItem=e,t._model.playbackState.state=y.END,t._resetStateFlags(),t._view.syncViewState()},i.prototype._enterInitState=function(){var e=this;e._model.playbackState.state=y.INIT,e._resetStateFlags(),e._view.syncViewState()},i.prototype._resetStateFlags=function(){var e=this,t=e._model.playbackState;t.paused=!1,t.seeking=!1,t.loading=!1},i.prototype.removePlaylistItems=function(e,t){var n=this,i=n._model.playlist;i.items.splice(e,t),i.position>=e+t?i.position-=t:e<=i.position&&i.position<e+t&&n.setPlaylistPosition(-1)},i.prototype.prefetch=function(e){var t=this,n=!(t._model.playlist.getCurrentItem().id in e);t._fetcher.prefetch(e,n)},i.prototype._onPlaybackError=function(e){var t=this;t._eventBus.publish(l.PLAYBACK_ERROR,e)},i.prototype._onError=function(e){var t=this;if(!t._recoverer||t._recoverer.shouldRenderErrorScreen(e)){try{throw new Error("Stack Trace")}catch(n){b.error(n.stack)}t._model.errors.push(e);var i=t._findCriticalError();i&&(t._clearPlaybackTimeout(),t._applyErrorFilters(i),t._model.playbackState.criticalError=i,t._model.playbackState.state=y.END,t._resetStateFlags(),t._view.syncViewState(),t._view.adjustErrorMsg())}},i.prototype._onWarning=function(e,t){var n=this;t&&n._onError(e)},i.prototype._onPTSDiscontinuity=function(e){var t=this;t._eventBus.publish(l.WARNING,f.createErr("P",t._model.playbackState,s.E_WARNING,s.PLAYER_CODES.E_PLAYER_PTS_DISCONTINUITY,null,"consecutive frame time diference is "+e))},i.prototype._onReloadFragment=function(e){var t=this;t._eventBus.publish(l.WARNING,f.createErr("P",t._model.playbackState,s.E_WARNING,s.PLAYER_CODES.E_PLAYER_RELOAD_FRAGMENT,null,e))},i.prototype._applyErrorFilters=function(e){var t=this,n=function(){!f.isFlashInstalled()&&m.desktop&&(e.category=s.E_PLAYER,e.subcategory=s.PLAYER_CODES.E_PLAYER_NOT_ENABLED)};switch(e.category){case s.E_SAPI_ABSTRACT:case s.E_SAPI_STREAM:case s.E_SAPI_PLAYLIST:case s.E_SAPI_RELATED:case s.E_SAPI_POPULAR:switch(e.subcategory){case s.SAPI_CODES.E_SAPI_EXTERNAL_NO_STREAMS:var i=t._model.playlist.getCurrentItem();i&&i.shareUrl&&f.redirect(i.shareUrl,!0);break;case s.SAPI_CODES.E_SAPI_UNSUPPORTED_FORMAT:n();break;case s.INFO_CODES.E_SAPI_UNSUPPORTED_LIVE_ON_HTML:m.android?(e.category=s.E_INFO,e.subcategory=s.INFO_CODES.E_PLAYER_ANDROID_CHROME_REQUIRED):n();break;case s.SAPI_CODES.E_SAPI_DRM_RESTRICTED:m.desktop&&n()}break;case s.E_PLAYER:switch(e.subcategory){case s.PLAYER_CODES.E_PLAYER_HTML5_PLAYBACK_ERROR_ENCRYPTED:n()}}},i.prototype._initiateAgeGate=function(){var e=this;e._ageGateController||(e._ageGateController=new a(e._eventBus,e._model,e._view,e,e._fetcher)),e._ageGateController.run()},i.prototype._onUserAuthentication=function(){var e=this;e._ageGateController&&e._ageGateController.isWaitingAuthentication()&&e._initiateAgeGate()},i.prototype._onPlaybackStarted=function(e){var t=this;t.ifPlaybackProgressCalled=!1,t._eventBus.publish(l.PLAYBACK_STARTED,e.id),t._playbackStarted[e.id]=!0,!e.isLive()&&f.showUpNext(t._model)&&(t._model.playback.loop||t._onFetchMoreRelatedItems(e,!1))},i.prototype._onPlaybackPlaying=function(){var e=this,t=e._model.playlist.getCurrentItem();e._model.playbackState.videoLoading()?m.android||e._toggleSpinner(!1):e._model.playbackState.paused&&(e._eventBus.publish(l.PLAYBACK_RESUMED,t.id),e._onPlaybackResumed()),e._playbackStarted[t.id]||e._onPlaybackStarted(t)},i.prototype._resetPlaybackStarted=function(){var e=this;e._playbackStarted={}},i.prototype._onPlaybackProgress=function(e,t,n){var i=this;m.android&&!i.ifPlaybackProgressCalled&&(i._toggleSpinner(!1),i.ifPlaybackProgressCalled=!0);var r=i._model.playlist.getCurrentItem();if(r){var o=1.5,a=i._view.getClientVideoDimension();i._model.playerDimension.width=a.width,i._model.playerDimension.height=a.height,i._eventBus.publish(l.PLAYBACK_PROGRESS,r.id,e,t,n),!g.isNumber(e)||!g.isNumber(t)||e>t+1||(r.isCCM||null!==r.duration||r.isLive()||(r.duration=t),i._model.playbackState.loading&&(!m.safari||m.safari<6)&&(i._spinnerMonitorStartTime?e-i._spinnerMonitorStartTime>=o&&(b.warn("overrode loader"),i._spinnerMonitorStartTime=null,i._toggleSpinner(!1)):i._spinnerMonitorStartTime=e),(!i._model.castState||!i._model.castState.connected)&&i._adsController&&i._adsController.maybeAdBreak(e,function(t,n){t&&(i._model.playbackState.state=y.VIDEO,i._resetStateFlags(),i._model.playbackState.loading=!0,i._view.syncViewState(),i._setVideoSrc(i._model.playlist.getCurrentItem(),e),i._view.play(e),r.progress.adbreaks[n]=(new Date).getTime())}),r.progress.position=Math.floor(e),!r.isLongForm()||r.progress.position%10!==0||i._model.playbackState.seeking||i._model.playbackState.ad||i.saveResumeTime(r))}},i.prototype._onControlsSeekStart=function(){var e=this;e._model.castState&&e._model.castState.connected||e._model.playbackState.seeking||(e._model.playbackState.seeking=!0,e._view.syncViewState())},i.prototype._onControlsSeekEnd=function(){var e=this;e._model.castState&&e._model.castState.connected||e._model.playbackState.seeking&&(e._model.playbackState.paused||e._view.play(),e._model.playbackState.seeking=!1,e._view.syncViewState())},i.prototype._onControlsSeeking=function(e){var t=this;t._model.castState&&t._model.castState.connected||t._view.seek(e)},i.prototype._onPlaybackPaused=function(){var e=this;e._model.playbackState.state!==y.INIT&&e._model.playbackState.state!==y.END&&(e._model.playbackState.paused=!0,e._view.syncViewState())},i.prototype._onPlaybackResumed=function(){var e=this;e._model.playbackState.paused=!1,e._view.syncViewState()},i.prototype._onPlaybackEnded=function(){var e=this;e._resetPlaybackStarted();var t=e._model.playlist,n=t.getCurrentItem();if(n){var i=e._model.playback.continuousPlay,r=e._model.playback.loop,o={},a=t.getNextPosition(i,r,o);e._eventBus.publish(l.PLAYBACK_ENDED,n.id,o.ended);var s=function(){if(n.progress.position=0,!n.isLongForm()||e._model.playbackState.seeking||e._model.playbackState.ad||e.saveResumeTime(n),-1!==a){if(i||r)var t={type:S.CONTINUOUS,action:S.AUTOPLAY};e.setPlaylistPosition(a,i||r,t),e._model.playbackState.looped=o.looped}else e._endPlayback(n),e._eventBus.publish(l.API.PLAYLIST_COMPLETE)};e._adsController?e._adsController.maybePlay("end",s):s()}},i.prototype._onSeeking=function(){var e=this;e._toggleSpinner(!0)},i.prototype._onSeeked=function(){var e=this;e._toggleSpinner(!1),e._eventBus.publish(l.API.PLAYBACK_SEEK_COMPLETE),e._spinnerMonitorStartTime=null},i.prototype._onBitrateChange=function(e){var t=this;t._model.playback.bitrate=e},i.prototype._setVideoSrc=function(e,t){var n=this,i={streams:e.streams,streamProfiles:e.streamProfiles,abr:n._model.playback.abr,uuid:e.id,isCCM:e.isCCM,startTime:t,ignoreEndlist:e.isLive()&&n._model.playback.ignoreEndlist};return n._view.setStreams(i)},i.prototype.startSnapItMode=function(){var e=this;e._model.ui.enableSnapItAPI&&e._eventBus.publish(l.START_SNAP_IT)},i.prototype.endSnapItMode=function(){var e=this;e._model.ui.enableSnapItAPI&&e._eventBus.publish(l.END_SNAP_IT)},i.prototype.error=function(e){var t=this;e&&t._eventBus.publish(l.ERROR,f.createErr("C",t._model.playbackState,e.type,e.code,e.msg))},i.prototype._onMediaReloadBegin=function(){var e=this;e._toggleSpinner(!0)},i.prototype._onMediaReloadEnd=function(){var e=this;e._toggleSpinner(!1)},i.prototype._onQualityChange=function(){return!1},i.prototype._toggleSpinner=function(e){var t=this;t._model.playbackState.loading=e,t._view.syncViewState()},i.prototype._onQualitySelected=function(e){var t=this;t._view.setQuality(e)},i.prototype._onBitrateListChanged=function(e,t){var n=this;n._model.playback.bitrates=e,n._model.playback.heights=t},i.prototype._onRecoveryStart=function(e){var t=this;t._model.playbackState.loading||(t._model.playbackState.loading=!0,t._view.syncViewState()),t._model.playlist.id?t._fetcher.fetchPlaylist(e):t._fetcher.updateMetadata(e)},i.prototype._onRecoveryMetadata=function(){var e=this,t=e._model.playbackState.state;e.pause(),e._view.stopMedia(),e._loadMediaItem(e._model.playlist.getCurrentItem()),b.log("Controller._onRecoveryMetadata(): Reloaded"),e._model.playbackState.loading=!1,e._view.syncViewState(),e._model.playbackState.state=y.INIT,e._model.playlist.getCurrentItem().recoveryStatus=d.ItemRecoveryStatus.RECOVERED,t===y.VIDEO&&e.play(null,!1)},i.prototype._onER=function(e){var t=this;t._fetcher.fillFromER(e),t._onRecoveryMetadata()},i.prototype._onWaiting=function(e){var t=this;if(!m.tv){var n=e&&e.value;if(t._toggleSpinner(n),n&&!e.ignoreBuffering)t._profiler.add(l.Metrics.PLAYBACK_STALLED);else if(!e.ignoreBuffering){t._profiler.setEndTime(l.Metrics.PLAYBACK_STALLED);var i=t._profiler.getItem(l.Metrics.PLAYBACK_STALLED);i&&t._eventBus.publish(l.PLAYBACK_STALLED,i.timeDiff?i.timeDiff/1e3:"")}}},i.prototype.destroy=function(){var e=this;e._model.destroy(),e._view.destroy(),e._recoverer&&e._recoverer.destroy(),e._fetcher.destroy(),e._eventBus.destroy(),e._ccController.destroy()}},{"../../lib":"bRhrlU","../../lib/event-bus":"3ECu9u","../../lib/logger":"IS9j5T","../../lib/user-agent":"ty5FFo","./ads-controller":11,"./age-gate-controller":12,"./cast-controller":14,"./cc":"zKzgQw","./error":20,"./event":"YJm+dH","./media-store":42,"./metadata-fetcher":"QCpdmG","./metrics/metrics":49,"./metrics/metrics-constants":48,"./model":55,"./profiler":56,"./recoverer":57,"./restapi":63,"./states":65,"./util":"jJTEqU","./view":75}],19:[function(e,t,n){"use strict";function i(e){var t=this;t._cb=e,t._touches=[],t._bindTouchEvents(),t._bindKeys()}t.exports=i;var r={UP:"up",DOWN:"down",LEFT:"left",RIGHT:"right",TAP:"tap"},o=[r.UP,r.DOWN,r.LEFT,r.RIGHT,r.TAP,r.TAP],a=0;i.prototype._bindKeys=function(){var e=this,t=[79,80,69,78,83,73,77,83,73,77],n=[79,80,83,83],i=[37,37,39,39,13];e._keyPressed=[],e._onKeyDown=function(r){e._keyPressed.push(r.keyCode),e._keyPressed.length>t.length&&e._keyPressed.shift(),r.altKey?a++:a=0;var o=e._keyPressed.slice(Math.max(e._keyPressed.length-4,0)),s=e._keyPressed.slice(Math.max(e._keyPressed.length-5,0));(e._keyPressed.toString()===t.toString()||o.toString()===n.toString()||s.toString()===i.toString()&&a>i.length)&&e._cb()},document.addEventListener("keydown",e._onKeyDown,!1)},i.prototype._bindTouchEvents=function(){var e=this;e._touchstart=function(t){e._startX=t.changedTouches[0].pageX,e._startY=t.changedTouches[0].pageY,e._stopX=0,e._stopY=0},document.addEventListener("touchstart",e._touchstart,!1),e._touchmove=function(t){if(1===t.touches.length){var n=t.touches[0];e._stopX=n.pageX,e._stopY=n.pageY}},document.addEventListener("touchmove",e._touchmove,!1),e._touchend=function(){var t;if(e._stopX||e._stopY){var n=Math.abs(e._startX-e._stopX),i=Math.abs(e._startY-e._stopY);t=n>i?e._startX-e._stopX<0?r.RIGHT:r.LEFT:e._startY-e._stopY<0?r.DOWN:r.UP}else t=r.TAP;e._touches.push(t),e._touches.length>o.length&&e._touches.shift(),e._touches.length===o.length&&e._touches.every(function(e,t){return e===o[t]})&&e._cb()},document.addEventListener("touchend",e._touchend,!1)},i.prototype.destroy=function(){var e=this;document.removeEventListener("keydown",e._onKeyDown,!1),document.removeEventListener("touchstart",e._touchstart,!1),document.removeEventListener("touchmove",e._touchmove,!1),document.removeEventListener("touchend",e._touchend,!1)}},{}],20:[function(e,t,n){"use strict";function i(e){return e.group+e.phase+"-"+e.category+"-"+e.subcategory}function r(e,t,n,i,r){var o=this;if(!e||!t||!n)throw"Error must be created with a group, category, and subcategory!";o.errorInfo=i,o.userAgent=r,o.group=e,o.phase=o._getPhaseFromState(i),o.category=t,o.subcategory=n,o._msg=i?i.msg:null,o.debugMessage=i?i.debugMsg:null,o.prefetch=i&&void 0!==i.prefetch?i.prefetch:!1}var o=e("./strings"),a=e("./states"),s=["305","306","307"];n.E_INFO="100",n.E_WARNING="200",n.E_YVAP="300";var l=n.E_PLAYER="400",c=n.E_PLAYER_FAILOVER="407",p=n.E_PLAYER_DRM="410",d=n.E_PLAYER_DASH="420",u=n.E_SAPI_ABSTRACT="500";n.E_SAPI_STREAM="501",n.E_SAPI_PLAYLIST="502",n.E_SAPI_RELATED="503",n.E_SAPI_POPULAR="504";var _=n.E_SAPI_CLOSEDCAPTION="505";n.E_CAST="800";var v=n.INFO_CODES={E_SAPI_LICENSE_ERROR:"200",E_SAPI_UNAVAILABLE_TEMP:"201",E_SAPI_GEO:"202",E_SAPI_DEVICE:"203",E_SAPI_EMBED:"204",E_SAPI_UNSUPPORTED_LIVE_ON_HTML:"305",E_PLAYER_ANDROID_CHROME_REQUIRED:"500",E_PLAYER_FLASH_IS_BLOCKED_SAFARI_STYLE_NONE:"610",E_PLAYER_FLASH_IS_BLOCKED_GENERAL_STYLE_NONE:"611",E_PLAYER_FLASH_IS_BLOCKED_REPLACED_BY_BGINACTIVE:"612",E_PLAYER_FLASH_IS_BLOCKED_POWER_SAVING:"613",E_PLAYER_FLASH_IS_BLOCKED_BLOCKERS_SCREEN:"614",E_PLAYER_NO_COMPATIBLE_FORMAT:"700"},y=n.WARNING_CODES={E_PLAYBACK_TIMEOUT:"1",E_LIVE_PLAYBACK_COMPLETE:"800",E_FLASH_CRASHED:"801",E_PLAYBACK_FROZEN_DETECTED:"900",E_ER_TRY:"901"},m=n.PLAYER_CODES={E_PLAYER_PLAYBACK_ERROR:"100",E_PLAYER_NOT_ENABLED:"200",E_PLAYER_NOT_UPTO_DATE:"201",E_PLAYER_PTS_DISCONTINUITY:"250",E_PLAYER_RELOAD_FRAGMENT:"251",E_PLAYER_HTML5_PLAYBACK_ERROR:"303",E_PLAYER_HTML5_PLAYBACK_ERROR_ABORTED:"304",E_PLAYER_HTML5_PLAYBACK_ERROR_NETWORK:"305",E_PLAYER_HTML5_PLAYBACK_ERROR_DECODE:"306",E_PLAYER_HTML5_PLAYBACK_ERROR_SRC_NOT_SUPPORTED:"307",E_PLAYER_HTML5_PLAYBACK_ERROR_ENCRYPTED:"308",E_PLAYER_HTML5_PLAYBACK_ERROR_PLAY_INITIATED_BEFORE_METADATA_READY:"309",E_PLAYER_HTML5_PLAYBACK_ERROR_URL_NOT_AUTHORIZED:"310",E_PLAYER_HTML5_PLAYBACK_ERROR_URL_NOT_FOUND:"311",E_PLAYER_CMS_JSONP_REQUEST_FAILURE:"101",E_PLAYER_CMS_JSONP_REQUEST_FAILURE_SILENT_FAIL:"102",E_PLAYER_CMS_RESPONSE:"405",E_PLAYER_CMS_JSONP_REQUEST_TIMEOUT:"408",E_PLAYER_CMS_JSONP_REQUEST_TIMEOUT_SILENT_FAIL:"409",E_PLAYER_CMS_XHR_REQUEST_SERVER_CONNECTION_FAILED:"700",E_PLAYER_CMS_XHR_REQUEST_SERVER_CONNECTION_FAILED_TIMEOUT:"701",E_PLAYER_CMS_XHR_REQUEST_RESPONSE_NOT_RECEIVED:"710",E_PLAYER_CMS_XHR_REQUEST_RESPONSE_NOT_RECEIVED_TIMEOUT:"711",E_PLAYER_CMS_XHR_REQUEST_LOAD_FAILED:"720",E_PLAYER_CMS_XHR_REQUEST_LOAD_FAILED_TIMEOUT:"721",E_PLAYER_CMS_XHR_REQUEST_LOAD_FAILED_408:"722",E_PLAYER_CMS_XHR_REQUEST_NOT_COMPLETE:"730",E_PLAYER_CMS_XHR_REQUEST_NOT_COMPLETE_TIMEOUT:"731",E_PLAYER_CMS_XHR_REQUEST_NOT_COMPLETE_408:"732",E_PLAYER_CMS_XHR_REQUEST_ERROR:"740",E_PLAYER_CMS_XHR_REQUEST_TIMEOUT:"750",E_PLAYER_CMS_XHR_REQUEST_CORS_ERROR:"760",E_INTERNAL_VIOLATION:"600",E_INVALID_CONFIGURATION:"601"},f=n.FLASH_CODES={E_PLAYER_SECURITY_CROSS_DOMAIN_XML_ERROR:2,E_PLAYER_MEDIA_LOAD_FAILURE:7,E_PLAYER_INVALID_F4M:23,E_PLAYER_FLASH_CONNECTION_REJECTED:11,E_PLAYER_FLASH_CONNECTION_APP_INVALID:12,E_PLAYER_FLASH_CONNECTION_FAILED:13,E_PLAYER_FLASH_CONNECTION_TIMEOUT:14,E_PLAYER_FLASH_STREAM_FAILED:15,E_PLAYER_FLASH_STREAM_NOT_FOUND:16,E_FLASH_HLS_FRAGMENT_PARSING_ERROR:55,E_FLASH_HLS_FRAGMENT_HTTP_GET_ERROR:56,E_FLASH_HLS_FRAGMENT_TIMEOUT_ERROR:57,E_FLASH_HLS_FRAGMENT_NW_ERROR:58,E_PLAYER_FLASH_ACCESSOR_ERROR:301,E_PLAYER_FLASH_URL_ACCESSOR_ERROR:302},g=n.PLAYER_DRM_CODES={E_FLASH_DRM_CONTENT_DATA_NOT_SET_ERROR:52,E_FLASH_DRM_TIMEOUT_LOAD_VOUCHER_ERROR:53,E_FLASH_DRM_SYSTEM_UPDATE_ERROR:54,E_PLAYER_DRM_UNSUPPORTED_STREAM_ERROR:601,E_FLASH_DRM_LOWER_BOUND_ERROR:3301,E_FLASH_DRM_UPPER_BOUND_ERROR:3766,E_FLASH_DRM_INCOGNITO_MODE_ERROR:3365,E_FLASH_DRM_VOUCHER_INVALID:3300,E_FLASH_DRM_INTERNAL_ACCESS_FAILURE:3307,E_FLASH_DRM_FILE_SYSTEM_WRITE:3313,E_FLASH_DRM_DEVICE_BINDING:3322,E_FLASH_DRM_INTERNAL_STORES_CORRUPT_SCENARIO_1:3323,E_FLASH_DRM_RESET_LICENSE_FILES:3324,E_FLASH_DRM_INTERNAL_STORES_CORRUPT_SCENARIO_2:3325,E_FLASH_DRM_VOUCHER_EXPIRED:3332,E_FLASH_DRM_INTERNAL_ERROR:3343,E_FLASH_DRM_FAILED_MIGRATING_DATA:3346,E_FLASH_DRM_CHROME_SETTING_ERROR:3370},b=n.PLAYER_DASH_CODES={E_DASH_REQUEST_FAILURE:"1",E_DASH_REQUEST_LENGTH:"2",E_DASH_REQUEST_TIMEOUT:"3",E_DASH_METADATA_LENGTH:"4",E_DASH_METADATA_FORMAT:"5",E_DASH_NO_FRAGMENTS:"6",E_DASH_ALIGNMENT:"7",E_DASH_BAD_MIME_TYPE:"8",E_DASH_DESTROYED:"9",E_DASH_OPERATION_ABORTED:"10",E_DASH_BUFFFER_APPEND:"11",E_DASH_MANIFEST_LOAD:"12",E_DASH_MANIFEST_PARSE:"13"},E=n.SAPI_CODES={E_SAPI_INCOMPATIBLE_FORMAT:"100",E_SAPI_NO_STREAMS_RETURNED:"103",E_SAPI_USER_NOT_AUTHORIZED:"205",E_SAPI_RESTRICTED_TO_INTERNAL:"206",E_SAPI_DRM_RESTRICTED:"207",E_SAPI_UNSUPPORTED_FORMAT:"300",E_SAPI_EXTERNAL_NO_STREAMS:"301",E_SAPI_NO_PLAYABLE_STREAMS:"302",E_SAPI_NOT_FOUND:"400",E_SAPI_TEMP_ERR_JAPI_TIMEOUT:"500",E_SAPI_TEMP_ERR_JAPI_UNKNOWN:"502",E_SAPI_TEMP_ERR_JAPI_CARMOT:"503",E_SAPI_TEMP_ERR_JAPI_UNMAPPED:"550",E_SAPI_EMPTY_ATLAS_ACCOUNT_NAME:"401",E_SAPI_EMPTY_SECURE_KEY:"402",E_SAPI_EMPTY_LIST:"403",E_SAPI_INVALID_DATA:"404",E_SAPI_INVALID_VIDEO:"405",E_SAPI_EMPTY_STREAM_URL:"406",E_SAPI_MISSING_PROVIDER:"501",E_SAPI_SYSTEM_ERROR:"504"},h=(n.CAST_CODES={E_CAST_CONNECTION_REQUEST_FAILED:"1"},{});h[E.E_SAPI_CRITICAL_ERR_1]=o.i18n.ERR_TITLE_CMS,h[E.E_SAPI_CRITICAL_ERR_2]=o.i18n.ERR_TITLE_CMS,h[E.E_SAPI_CRITICAL_ERR_3]=o.i18n.ERR_TITLE_CMS,h[E.E_SAPI_CRITICAL_ERR_4]=o.i18n.ERR_TITLE_CMS,h[E.E_SAPI_CRITICAL_ERR_5]=o.i18n.ERR_TITLE_CMS,h[E.E_SAPI_CRITICAL_ERR_6]=o.i18n.ERR_TITLE_CMS,h[E.E_SAPI_CRITICAL_ERR_7]=o.i18n.ERR_TITLE_CMS,h[E.E_SAPI_CRITICAL_ERR_8]=o.i18n.ERR_TITLE_CMS,h[E.E_SAPI_EXTERNAL_NO_STREAMS]=o.i18n.ERR_TITLE_VIDEO_NOT_AVAILABLE,h[E.E_SAPI_NOT_FOUND]=o.i18n.ERR_TITLE_VIDEO_NOT_AVAILABLE,h[E.E_SAPI_NO_PLAYABLE_STREAMS]=o.i18n.ERR_TITLE_VIDEO_NOT_AVAILABLE,h[E.E_SAPI_RESTRICTED_TO_INTERNAL]=o.i18n.ERR_TITLE_VIDEO_NOT_AVAILABLE,h[E.E_SAPI_TEMP_ERR_JAPI_TIMEOUT]=o.i18n.ERR_TITLE_CMS,h[E.E_SAPI_TEMP_ERR_JAPI_UNKNOWN]=o.i18n.ERR_TITLE_CMS,h[E.E_SAPI_TEMP_ERR_JAPI_CARMOT]=o.i18n.ERR_TITLE_CMS,h[E.E_SAPI_TEMP_ERR_JAPI_UNMAPPED]=o.i18n.ERR_TITLE_CMS,h[E.E_SAPI_UNSUPPORTED_FORMAT]=o.i18n.ERR_TITLE_CONFIGURATION,h[E.E_SAPI_NO_STREAMS_RETURNED]=o.i18n.ERR_TITLE_CONFIGURATION,h[E.E_SAPI_USER_NOT_AUTHORIZED]=o.i18n.ERR_TITLE_USER_NOT_AUTHORIZED;var A={};A[v.E_SAPI_GEO]=o.i18n.ERR_TITLE_GEO,A[v.E_SAPI_DEVICE]=o.i18n.ERR_TITLE_DEVICE,A[v.E_SAPI_EMBED]=o.i18n.ERR_TITLE_EMBED,A[v.E_SAPI_LICENSE_ERROR]=o.i18n.ERR_TITLE_VIDEO_NOT_AVAILABLE,A[v.E_SAPI_UNAVAILABLE_TEMP]=o.i18n.ERR_TITLE_VIDEO_NOT_AVAILABLE,A[v.E_PLAYER_FLASH_IS_BLOCKED_SAFARI_STYLE_NONE]=o.i18n.ERR_TITLE_FLASH_BLOCKER,A[v.E_PLAYER_FLASH_IS_BLOCKED_GENERAL_STYLE_NONE]=o.i18n.ERR_TITLE_FLASH_BLOCKER,A[v.E_PLAYER_FLASH_IS_BLOCKED_REPLACED_BY_BGINACTIVE]=o.i18n.ERR_TITLE_FLASH_BLOCKER,A[v.E_PLAYER_FLASH_IS_BLOCKED_POWER_SAVING]=o.i18n.ERR_TITLE_FLASH_BLOCKER,A[v.E_PLAYER_FLASH_IS_BLOCKED_BLOCKERS_SCREEN]=o.i18n.ERR_TITLE_FLASH_BLOCKER,A[v.E_PLAYER_ANDROID_CHROME_REQUIRED]=o.i18n.ERR_TITLE_BROWSER,A[v.E_PLAYER_NO_COMPATIBLE_FORMAT]=o.i18n.ERR_TITLE_BROWSER,A[v.E_SAPI_UNSUPPORTED_LIVE_ON_HTML]=o.i18n.ERR_TITLE_CONFIGURATION;var S={};[m.E_PLAYER_CMS_JSONP_REQUEST_FAILURE,m.E_PLAYER_CMS_JSONP_REQUEST_FAILURE_SILENT_FAIL,m.E_PLAYER_CMS_JSONP_REQUEST_TIMEOUT,m.E_PLAYER_CMS_JSONP_REQUEST_TIMEOUT_SILENT_FAIL,m.E_PLAYER_CMS_RESPONSE,m.E_PLAYER_CMS_XHR_REQUEST_SERVER_CONNECTION_FAILED,m.E_PLAYER_CMS_XHR_REQUEST_SERVER_CONNECTION_FAILED_TIMEOUT,m.E_PLAYER_CMS_XHR_REQUEST_SERVER_CONNECTION_FAILED_404,m.E_PLAYER_CMS_XHR_REQUEST_SERVER_CONNECTION_FAILED_408,m.E_PLAYER_CMS_XHR_REQUEST_SERVER_CONNECTION_FAILED_502,m.E_PLAYER_CMS_XHR_REQUEST_SERVER_CONNECTION_FAILED_503,m.E_PLAYER_CMS_XHR_REQUEST_RESPONSE_NOT_RECEIVED,m.E_PLAYER_CMS_XHR_REQUEST_RESPONSE_NOT_RECEIVED_TIMEOUT,m.E_PLAYER_CMS_XHR_REQUEST_RESPONSE_NOT_RECEIVED_408,m.E_PLAYER_CMS_XHR_REQUEST_RESPONSE_NOT_RECEIVED_502,m.E_PLAYER_CMS_XHR_REQUEST_RESPONSE_NOT_RECEIVED_503,m.E_PLAYER_CMS_XHR_REQUEST_LOAD_FAILED,m.E_PLAYER_CMS_XHR_REQUEST_LOAD_FAILED_TIMEOUT,m.E_PLAYER_CMS_XHR_REQUEST_LOAD_FAILED_408,m.E_PLAYER_CMS_XHR_REQUEST_NOT_COMPLETE,m.E_PLAYER_CMS_XHR_REQUEST_NOT_COMPLETE_TIMEOUT,m.E_PLAYER_CMS_XHR_REQUEST_NOT_COMPLETE_408,m.E_PLAYER_CMS_XHR_REQUEST_ERROR,m.E_PLAYER_CMS_XHR_REQUEST_TIMEOUT,m.E_PLAYER_CMS_XHR_REQUEST_CORS_ERROR].forEach(function(e){
S[e]=o.i18n.ERR_TITLE_CMS}),S[m.E_PLAYER_HTML5_PLAYBACK_ERROR]=o.i18n.ERR_TITLE_PLAYBACK,S[m.E_PLAYER_HTML5_PLAYBACK_ERROR_ABORTED]=o.i18n.ERR_TITLE_PLAYBACK,S[m.E_PLAYER_HTML5_PLAYBACK_ERROR_NETWORK]=o.i18n.ERR_TITLE_PLAYBACK,S[m.E_PLAYER_HTML5_PLAYBACK_ERROR_DECODE]=o.i18n.ERR_TITLE_PLAYBACK,S[m.E_PLAYER_HTML5_PLAYBACK_ERROR_SRC_NOT_SUPPORTED]=o.i18n.ERR_TITLE_PLAYBACK,S[m.E_PLAYER_HTML5_PLAYBACK_ERROR_ENCRYPTED]=o.i18n.ERR_TITLE_PLAYBACK,S[m.E_PLAYER_NOT_ENABLED]=o.i18n.ERR_TITLE_FLASH_MISSING,S[m.E_PLAYER_NOT_UPTO_DATE]=o.i18n.ERR_TITLE_FLASH_OLD,S[f.E_PLAYER_FLASH_ACCESSOR_ERROR]=o.i18n.ERR_TITLE_PLAYBACK,S[f.E_PLAYER_SECURITY_CROSS_DOMAIN_XML_ERROR]=o.i18n.ERR_TITLE_PLAYBACK,S[f.E_PLAYER_MEDIA_LOAD_FAILURE]=o.i18n.ERR_TITLE_PLAYBACK,S[f.E_PLAYER_INVALID_F4M]=o.i18n.ERR_TITLE_PLAYBACK,S[f.E_PLAYER_FLASH_CONNECTION_REJECTED]=o.i18n.ERR_TITLE_PLAYBACK,S[f.E_PLAYER_FLASH_CONNECTION_APP_INVALID]=o.i18n.ERR_TITLE_PLAYBACK,S[f.E_PLAYER_FLASH_CONNECTION_TIMEOUT]=o.i18n.ERR_TITLE_PLAYBACK,S[f.E_PLAYER_FLASH_CONNECTION_FAILED]=o.i18n.ERR_TITLE_PLAYBACK,S[f.E_PLAYER_FLASH_STREAM_FAILED]=o.i18n.ERR_TITLE_PLAYBACK,S[f.E_PLAYER_FLASH_STREAM_NOT_FOUND]=o.i18n.ERR_TITLE_VIDEO_NOT_AVAILABLE,S[f.E_PLAYER_FLASH_URL_ACCESSOR_ERROR]=o.i18n.ERR_TITLE_PLAYBACK,S[g.E_FLASH_DRM_CHROME_SETTING_ERROR]=o.i18n.ERR_TITLE_CHROME_SETTING;var T={};T[y.E_LIVE_PLAYBACK_COMPLETE]=o.i18n.ERR_TITLE_LIVE_PLAYBACK_COMPLETE,T[y.E_FLASH_CRASHED]=o.i18n.ERR_TITLE_FLASH_CRASHED;var L={};L[E.E_SAPI_EMPTY_ATLAS_ACCOUNT_NAME]=o.i18n.ERR_MISSING_METADATA,L[E.E_SAPI_EMPTY_SECURE_KEY]=o.i18n.ERR_MISSING_METADATA,L[E.E_SAPI_EMPTY_LIST]=o.i18n.ERR_MISSING_METADATA,L[E.E_SAPI_INVALID_DATA]=o.i18n.ERR_MISSING_METADATA,L[E.E_SAPI_INVALID_VIDEO]=o.i18n.ERR_MISSING_METADATA,L[E.E_SAPI_EMPTY_STREAM_URL]=o.i18n.ERR_MISSING_METADATA,L[E.E_SAPI_MISSING_PROVIDER]=o.i18n.ERR_MISSING_METADATA,L[E.E_SAPI_SYSTEM_ERROR]=o.i18n.ERR_MISSING_METADATA,L[E.E_SAPI_EXTERNAL_NO_STREAMS]=o.i18n.ERR_UNAVAILABLE,L[E.E_SAPI_NOT_FOUND]=o.i18n.ERR_UNAVAILABLE,L[E.E_SAPI_NO_PLAYABLE_STREAMS]=o.i18n.ERR_UNAVAILABLE,L[E.E_SAPI_RESTRICTED_TO_INTERNAL]=o.i18n.ERR_NO_LONGER_AVAILABLE,L[E.E_SAPI_UNSUPPORTED_FORMAT]=o.i18n.ERR_UNSUPPORTED_FORMAT,L[E.E_SAPI_NO_STREAMS_RETURNED]=o.i18n.ERR_UNSUPPORTED_FORMAT,L[E.E_SAPI_USER_NOT_AUTHORIZED]=o.i18n.ERR_UNAUTHORIZED,L[E.E_SAPI_DRM_RESTRICTED]=o.i18n.ERR_DRM_RESTRICTED;var I={};I[v.E_SAPI_GEO]=o.i18n.ERR_GEO,I[v.E_SAPI_DEVICE]=o.i18n.ERR_DEVICE,I[v.E_SAPI_UNAVAILABLE_TEMP]=o.i18n.ERR_UNAVAILABLE,I[v.E_SAPI_EMBED]=o.i18n.ERR_EMBED,I[v.E_SAPI_LICENSE_ERROR]=o.i18n.ERR_UNAVAILABLE,I[v.E_SAPI_UNSUPPORTED_LIVE_ON_HTML]=o.i18n.ERR_UNSUPPORTED_LIVE_ON_HTML5,I[v.E_PLAYER_FLASH_IS_BLOCKED_SAFARI_STYLE_NONE]=o.i18n.ERR_FLASH_IS_BLOCKED,I[v.E_PLAYER_FLASH_IS_BLOCKED_GENERAL_STYLE_NONE]=o.i18n.ERR_FLASH_IS_BLOCKED,I[v.E_PLAYER_FLASH_IS_BLOCKED_REPLACED_BY_BGINACTIVE]=o.i18n.ERR_FLASH_IS_BLOCKED,I[v.E_PLAYER_FLASH_IS_BLOCKED_POWER_SAVING]=o.i18n.ERR_FLASH_IS_BLOCKED,I[v.E_PLAYER_FLASH_IS_BLOCKED_BLOCKERS_SCREEN]=o.i18n.ERR_FLASH_IS_BLOCKED,I[v.E_PLAYER_ANDROID_CHROME_REQUIRED]=o.i18n.ERR_ANDROID_LIVE_CHROME_REQUIRED,I[v.E_PLAYER_NO_COMPATIBLE_FORMAT]=o.i18n.ERR_NO_COMPATIBLE_FORMAT;var M={};M[m.E_PLAYER_HTML5_PLAYBACK_ERROR_NETWORK]=o.i18n.ERR_CDN_ERROR_CONNECTIVITY,M[m.E_PLAYER_HTML5_PLAYBACK_ERROR_SRC_NOT_SUPPORTED]=o.i18n.ERR_UNSUPPORTED_FORMAT,M[m.E_PLAYER_NOT_ENABLED]=o.i18n.ERR_FLASH_NOT_ENABLED,M[m.E_PLAYER_NOT_UPTO_DATE]=o.i18n.ERR_FLASH_NOT_UPTO_DATE,M[f.E_PLAYER_SECURITY_CROSS_DOMAIN_XML_ERROR]=o.i18n.ERR_CDN_ERROR_CONNECTIVITY;var C={};C[y.E_LIVE_PLAYBACK_COMPLETE]=o.i18n.ERR_LIVE_PLAYBACK_COMPLETE,C[y.E_FLASH_CRASHED]=o.i18n.ERR_FLASH_CRASHED,M[f.E_PLAYER_FLASH_CONNECTION_REJECTED]=o.i18n.ERR_CDN_ERROR_CONNECTIVITY,M[f.E_PLAYER_FLASH_CONNECTION_APP_INVALID]=o.i18n.ERR_CDN_ERROR_CONNECTIVITY,M[f.E_PLAYER_FLASH_CONNECTION_TIMEOUT]=o.i18n.ERR_CDN_ERROR_CONNECTIVITY,M[f.E_PLAYER_FLASH_CONNECTION_FAILED]=o.i18n.ERR_FIREWALL,M[f.E_PLAYER_FLASH_STREAM_FAILED]=o.i18n.ERR_LOST_CONNECTION,M[f.E_PLAYER_FLASH_STREAM_NOT_FOUND]=o.i18n.ERR_CDN_ERROR_UNAVAILABLE,M[f.E_FLASH_HLS_FRAGMENT_HTTP_GET_ERROR]=o.i18n.ERR_CDN_ERROR_CONNECTIVITY,M[f.E_FLASH_HLS_FRAGMENT_TIMEOUT_ERROR]=o.i18n.ERR_CDN_ERROR_CONNECTIVITY,M[f.E_FLASH_HLS_FRAGMENT_NW_ERROR]=o.i18n.ERR_LOST_CONNECTION;var N={};N[g.E_FLASH_DRM_VOUCHER_INVALID]=o.i18n.ERR_DRM_BAD_LICENSE_FILE,N[g.E_FLASH_DRM_INTERNAL_ACCESS_FAILURE]=o.i18n.ERR_DRM_BAD_LICENSE_FILE,N[g.E_FLASH_DRM_FILE_SYSTEM_WRITE]=o.i18n.ERR_DRM_BAD_LICENSE_FILE,N[g.E_FLASH_DRM_DEVICE_BINDING]=o.i18n.ERR_DRM_BAD_LICENSE_FILE,N[g.E_FLASH_DRM_INTERNAL_STORES_CORRUPT_SCENARIO_1]=o.i18n.ERR_DRM_BAD_LICENSE_FILE,N[g.E_FLASH_DRM_RESET_LICENSE_FILES]=o.i18n.ERR_DRM_BAD_LICENSE_FILE,N[g.E_FLASH_DRM_INTERNAL_STORES_CORRUPT_SCENARIO_1]=o.i18n.ERR_DRM_BAD_LICENSE_FILE,N[g.E_FLASH_DRM_VOUCHER_EXPIRED]=o.i18n.ERR_DRM_BAD_LICENSE_FILE,N[g.E_FLASH_DRM_INTERNAL_ERROR]=o.i18n.ERR_DRM_BAD_LICENSE_FILE,N[g.E_FLASH_DRM_FAILED_MIGRATING_DATA]=o.i18n.ERR_DRM_BAD_LICENSE_FILE,N[g.E_FLASH_DRM_INCOGNITO_MODE_ERROR]=o.i18n.ERR_DRM_INCOGNITO_MODE,N[g.E_PLAYER_DRM_UNSUPPORTED_STREAM_ERROR]=o.i18n.ERR_DRM_UNSUPPORTED_STREAM,N[g.E_FLASH_DRM_CHROME_SETTING_ERROR]=o.i18n.ERR_DRM_CHROME_SETTING,N[g.E_PLAYER_FLASH_DRM_SYSTEM_UPDATE_FAILURE]=o.i18n.ERR_FLASH_DRM_SYSTEM_UPDATE_FAILURE;var R={};R[b.E_DASH_REQUEST_FAILURE]=o.i18n.ERR_CDN_ERROR_CONNECTIVITY,R[b.E_DASH_REQUEST_LENGTH]=o.i18n.ERR_CDN_ERROR_CONNECTIVITY,R[b.E_DASH_REQUEST_TIMEOUT]=o.i18n.ERR_CDN_ERROR_CONNECTIVITY,R[b.E_DASH_BAD_MIME_TYPE]=o.i18n.ERR_UNSUPPORTED_FORMAT,R[b.E_DASH_MANIFEST_LOAD]=o.i18n.ERR_CDN_ERROR_CONNECTIVITY,n.Error=r,Object.defineProperty(r.prototype,"rep",{get:function(){return i(this)}}),r.prototype._getPhaseFromState=function(e){var t="S";return e&&e.playbackState&&(e.playbackState.state===a.VIDEO||e.playbackState.state===a.END)&&(t="P"),t},r.prototype.isSAPIError=function(){var e=this;return e.category>=u&&e.category<=_},Object.defineProperty(r.prototype,"title",{get:function(){var e=this,t=null,i=e.errorInfo.playbackState&&e.errorInfo.playbackState.loadedItem&&e.errorInfo.playbackState.loadedItem.isLive();if(e.isSAPIError())t=h;else{if(e.category===l&&-1!==s.indexOf(e.subcategory)&&i&&e.userAgent&&(e.userAgent.android||e.userAgent.ios))return o.i18n.ERR_TITLE_SOMETHING_WENT_WRONG;if(e.category===l||e.category===c)t=S;else if(e.category===n.E_WARNING)t=T;else if(e.category===n.E_INFO)t=A;else{if(e.category===p)return o.i18n.ERR_DRM;if(e.category===d)return o.i18n.ERR_PLAYBACK}}return t&&t[e.subcategory]||o.i18n.ERR_TITLE_SOMETHING_WENT_WRONG}}),Object.defineProperty(r.prototype,"message",{get:function(){var e=this,t=null,i=e.errorInfo.playbackState&&e.errorInfo.playbackState.loadedItem&&e.errorInfo.playbackState.loadedItem.isLive();if(e.isSAPIError())t=L;else{if(e.category===l&&-1!==s.indexOf(e.subcategory)&&i&&e.userAgent&&(e.userAgent.android||e.userAgent.ios))return o.i18n.ERR_LIVE_IOS_PLAYBACK;e.category===l||e.category===c?t=M:e.category===n.E_WARNING?t=C:e.category===n.E_INFO?t=I:e.category===p?t=N:e.category===d&&(t=R)}return this._msg||t&&t[e.subcategory]||o.i18n.ERR_TECH_DIFFICULTIES}}),n.isInfoCode=function(e){for(var t in v)if(v.hasOwnProperty(t)&&v[t]===e)return!0;return!1}},{"./states":65,"./strings":"XwKsC9"}],"YJm+dH":[function(e,t,n){"use strict";n.API={PLAYER_RENDERED:"render",PLAYER_READY:"playerReady",PLAYER_ERROR:"playerError",PLAYER_FULLSCREEN_CHANGE:"fullscreenChange",PLAYER_VOLUME_CHANGE:"volumeChange",PLAYER_MUTE_CHANGE:"muteChange",PLAYBACK_ERROR:"playbackError",PLAYBACK_READY:"playbackReady",PLAYBACK_START:"playbackStart",DURATION_CHANGE:"durationChange",BITRATE_CHANGE:"bitrateChange",PLAYBACK_PAUSE:"playbackPause",PLAYBACK_RESUMED:"playbackResumed",PLAYBACK_TIME_UPDATE:"playbackTimeUpdate",PLAYBACK_SEEK_COMPLETE:"playbackSeek",PLAYBACK_COMPLETE:"playbackComplete",AD_PLAYBACK_START:"adStart",AD_PLAYBACK_PAUSE:"adPause",AD_PLAYBACK_RESUME:"adResume",AD_PLAYBACK_PROGRESS:"adProgress",AD_PLAYBACK_STOP:"adComplete",AD_NONE:"adNone",AD_ERROR:"adError",PLAYLIST_COMPLETE:"playlistComplete",PLAYLIST_POSITION_CHANGE:"playlistPositionChange",UI_INTERACT:"uiInteract",BEACON_SEND:"beaconSend",LOADING_BEGIN:"loading-begin",LOADING_END:"loading-end",PLAYBACK_TIMEOUT:"playback-timeout",VIDEO_STARTED:"video-started",METADATA_READY:"metadata-ready",SNAP_IT_MODE_START:"snap-it-mode-start",SNAP_IT_MODE_END:"snap-it-mode-end",CC_AVAILABLE:"media-item-cc-available",CAST_AVAILABILITY_CHANGE:"cast-availability-change",CAST_CONNECTED_STATE_CHANGE:"cast-connected-state-change",CUEPOINT_STARTED:"cuepointStarted",CUEPOINT_STOPPED:"cuepointStopped"},n.ERROR="player-error",n.WARNING="player-warning",n.INFO="player-info",n.KEYDOWN="keydown",n.START_SCREEN_RENDERED="start-screen-rendered",n.START_SCREEN_CLICK="start-screen-click",n.END_SCREEN_RENDERED="end-screen-rendered",n.END_SCREEN_CLICK="end-screen-click",n.CTRL_ENDSCREEN_VID="selected-endscreen-video",n.RELATED_ITEM_CLICK="related-item-click",n.FETCH_MORE_RELATED_ITEMS="fetch-more-related-items",n.UP_NEXT_PG_CLICK="upnext-pg-click",n.SEEK_BAR_MOUSEOVER="seek-bar-mouseover",n.SEEK_BAR_MOUSEOUT="seek-bar-mouseout",n.TOGGLE_PLAY_PAUSE="toggle-play-pause",n.CONTROLS_SEEK_START="controls-seek-start",n.CONTROLS_SEEK_END="controls-seek-end",n.CONTROLS_SEEKING="controls-seeking",n.CONTROLS_SET_VOLUME="controls-set-volume",n.CONTROLS_SET_MUTE="controls-set-mute",n.FULLSCREEN_CHANGE="fullscreen-change",n.SETTINGS_CONTROLLER_CHANGE="settings-controller-change",n.SETTINGS_COMPONENT_SHOW="setting-component-show",n.PLAYER_DIMENSION_CHANGE="player-dimension-change",n.CONTROLS_BAR_CHANGE="controls-bar-change",n.METADATA_AVAILABLE="metadata-available",n.REFRESH_METADATA_AVAILABLE="refresh-metadata-available",n.RELATED_ITEMS_LOADED="related-items-loaded",n.MEDIA_ITEM_LOADED="media-item-loaded",n.CAST={TOGGLE_PLAYING:"cast-toggle-playing",BUFFERING:"cast-buffering",MEDIA_CHANGED:"cast-media-changed",PLAYBACK_PROGRESS:"cast-playback-progress",VIDEO_ENDED:"cast-video-ended",PLAYLIST_ENDED:"cast-playlist-ended",CONNECTION_STATUS_CHANGED:"cast-connection-changed",VOLUME_CHANGED:"cast-receiver-volume-changed",MUTE_CHANGED:"cast-receiver-mute-changed",CAPTION_AVAILABILITY_CHANGED:"cast-captions-availability-changed"},n.SWF_READY="swf-ready",n.SWF_READY_TIMEOUT="swf-ready-timeout",n.PAUSE_VPAID="pause-vpaid",n.RESUME_VPAID="resume-vpaid",n.PLAYER_RESIZE="player-resize",n.SELECTED_STREAM_CHANGE="selectedStreamChange",n.SELECTED_STREAM_URL_CHANGE="selectedStreamUrlChange",n.RENDERER_PLUGIN_LOADED="rendererPluginLoaded",n.RENDERER_PLUGIN_LOAD_FAILED="rendererPluginLoadFailed",n.RENDERER_PLUGIN_LOAD_TIMED_OUT="rendererPluginLoadTimedOut",n.VTT_SEGMENT_LOADED="vttSegmentLoaded",n.MEDIA_RELOAD_BEGIN="mediaReloadBegin",n.MEDIA_RELOAD_END="mediaReloadEnd",n.MEDIA_PLAYLIST_LOADED="mediaPlaylistLoaded",n.MEDIA_PLAYLIST_UPDATED="mediaPlaylistUpdated",n.QUALITY_CHANGE="qualityChange",n.QUALITY_SELECTED="qualitySelected",n.BITRATE_LIST_CHANGED="bitrateListChanged",n.FRAG_LOAD_RETRY_FAILURE="fragLoadRetryFailure",n.LIVE_MEDIA_PLAYLIST_LOAD_RETRY_FAILURE="liveMediaPlaylistLoadRetryFailure",n.LIVE_LOADING_LATE="liveLoadingLate",n.RECOVERY_START="recoveryStart",n.RECOVERY_METADATA_READY="recoveryMetadataReady",n.ER_READY="erReady",n.PLAYBACK_INFO="playback-info",n.USER_AUTHENTICATED="user-authenticated",n.VIDEO_APPS_LOADED="video-apps-loaded",n.OPEN_FEEDBACK="open-feedback",n.CC_HOVER="cc-hover",n.VOLUME_HOVER="volume-hover",n.FLASH_NATIVE_PLAYING_EVENT_FIRED="flash-native-playing-event-fired",n.PTS_DISCONTINUITY="PTSDiscontinuity",n.RELOAD_FRAGMENT="ReloadFragment",n.nativeVideoEvents=["ended","error","loadedmetadata","loadeddata","pause","stalled","loadstart","play","playing","seeking","seeked","timeupdate","volumechange","waiting"],n.Video={CLICK:"video-click",SWITCHING:"switching",SWITCHED:"switched",WARNING:"warning"},n.Ad={CLICK:"ad-click",NO_AD:"ad-no-ad",NO_PLAYABLE_STREAM:"ad-no-playable-stream",CANCELED:"ad-canceled"},n.nativeVideoEvents.forEach(function(e){n.Video[e.toUpperCase()]="video-"+e,n.Ad[e.toUpperCase()]="ad-"+e}),n.VIDEO_REQUEST="video-request",n.PLAYBACK_REQUEST="playback-request",n.PLAYBACK_STARTED="playback-started",n.PLAYBACK_RESUMED="playback-resumed",n.PLAYBACK_PROGRESS="playback-progress",n.PLAYBACK_STALLED="playback-stalled",n.PLAYBACK_ENDED="playback-ended",n.PLAYBACK_ERROR="playback-error",n.API_CALLED="api-called",n.FEEDBACK_INFO="feedback-info",n.HLS_FIRST_TS_LOAD_START="hls-first-ts-load-start",n.HLS_FIRST_TS_FIRST_BYTE_ARRIVE="hls-first-ts-first-byte-arrive",n.CTRL_PLAYPAUSE="ctrl-play-pause",n.CTRL_SEEK="ctrl-seek",n.CTRL_VOLUME="ctrl-volume",n.CTRL_FULLSCREEN="ctrl-fullscreen",n.CTRL_SETTINGS="ctrl-settings",n.CTRL_AGEGATE_BDAY="ctrl-agegate-bday",n.CTRL_SHARE="ctrl-share",n.CTRL_REPLAY="ctrl-replay",n.CTRL_TIMER="ctrl-timer",n.CTRL_PLAYREQUEST="ctrl-playrequest",n.UI_LOGIN="ui-login",n.AD_PLAYBACK_REQUEST="ad-playback-request",n.AD_PLAYBACK_STARTED="ad-playback-started",n.AD_PLAYBACK_PAUSED="ad-playback-paused",n.AD_PLAYBACK_RESUMED="ad-playback-resumed",n.AD_PLAYBACK_PROGRESS="ad-playback-progress",n.AD_PLAYBACK_ENDED="ad-playback-ended",n.AD_BREAK_STARTED="ad-break-started",n.AD_BREAK_ENDED="ad-break-ended",n.AD_PLAYBACK_ERROR="ad-playback-error",n.AD_CLICK="ad-exposed-click",n.UPDATE_AD_COUNT="update-ad-count",n.UPDATE_AD_BREAKS="update-ad-breaks",n.ADS_OBJS_UPDATE="ads-object-update",n.ADS_READY="ads-ready",n.AD_BREAK_TIMELINE="ad-break-timeline",n.YVAP_INFO_UPDATE="yvap-info-update",n.YVAP_SWF_PROXIED_EVENT="yvap-swf-proxied-event",n.AD_METRICS="ad-metrics",n.SAPI_REFRESH_REQUEST="sapi-refresh-request",n.RENDERER_TYPE_CHANGE="renderer-type-change",n.CC={SETTINGS:"cc-settings",TOGGLE:"cc-toggle",UI_TOGGLE:"cc-ui-toggle",FETCHED:"cc-fetched",FETCH_MOBILE:"cc-fetche-mobile",REQUEST_UI_DATA_FOR_MEDIA_ITEM:"cc-request-ui-data-for-media-item",REMOVED:"cc-destroy",SHOW_CONTROLS:"cc-show-controls",LANGUAGE_CHANGE:"cc-language-change",CC_OPTIONS_LANGUAGE_CHANGE:"cc-options-language-change",FONT_SIZE_CHANGE:"cc-font-size-change",FONT_FACE_CHANGE:"cc-font-face-change",BG_OPACITY_CHANGE:"cc-bg-opacity-change",USER_STYLE_PREFERENCES_CHANGE:"cc-user-style-preferences-change",SAVE_TO_LOCAL_STORAGE:"cc-save-to-local-storage",UPDATE_STYLE:"cc-update-style",POSITION_CHANGE:"cc-position-change",POSITION_FLOAT:"cc-position-float"},n.CTV={GET_BITRATE_FOR_OPSS:"ctv-get-bitrate-for-opss"},n.START_SNAP_IT="start-snap-it",n.END_SNAP_IT="end-snap-it",n.SNAP_IT_MODE_STARTED="snapt-it-mode-started",n.SNAP_IT_MODE_ENDED="snapt-it-mode-ended",n.BEFORE_PROGRESS_BEACON="before-progress-beacon",n.Metrics={INIT_TO_STARTSCREEN:{type:"titssc",desc:"VideoPlayer init to StartScreen Rendered"},HLS_FIRST_TS_LOAD_START:{type:"hftls",desc:"First ts loading starts in HLS"},HLS_FIRST_TS_FIRST_BYTE_ARRIVE:{type:"hftfba",desc:"First byte arrives for the first ts loading in HLS"},CLICK_TO_START:{type:"ttsapf",desc:"Player click to playback start"},INIT_TO_START:{type:"ttsapt",desc:"Init to playback start (autoplay)"},PLAYBACK_START:{type:"tpb",desc:"Playback request to playback start"},PLAYBACK_STALLED:{type:"tps",desc:"Playback buffering start to buffering end"},LOAD_TO_LOADED_DATA:{type:"tltld",desc:"Time from load() to loaded data"},SAPI_REQUEST:{type:"tsapic",desc:"SAPI request to SAPI response"},SWF_READY:{type:"tswfr",desc:"Player SWF is ready"},INIT_RENDER_GAP:{type:"tirg",desc:"Time gap between end of construction and beginning of render"},INIT_TO_SAPI:{type:"titsc",desc:"Time from beginning of construction to first updateMetaData"},RENDER_TO_SWF:{type:"trtswf",desc:"Time from init to object tag creation"},DRM_METADATA_IS_SET:{type:"tdmds",desc:"Time interval from play to drm meta data is set"},DRM_AUTH_COMPLETE:{type:"ttauth",desc:"Time to complete DRM authentication after drm metadata is set"},INIT_TO_APPS_INIT:{type:"ttapp",desc:"Player init to Video Apps Init"},SET_WATCH_HISTORY:{type:"tsetwh",desc:"YQL+ call to save watch history"},VP_CONSTRUCTOR:{type:"tcons",desc:"VideoPlayer Constructor"},GET_USER_PREFS:{type:"tgetcc",desc:"YQL+ call to get captions preferences"},PLAYLIST_LOADED:{type:"tploaded",desc:"Playlist loaded"},SAPI_LOADCLIPS:{type:"tsapiclips",desc:"SAPI request for clips"},CREATE_RENDERER:{type:"trcreate",desc:"Creating the renderer (swf/html)"},YVAP_READY:{type:"tyvapr",desc:"VideoAdPlugin is ready"},YVAP_NOAD:{type:"tyvapadn",desc:"Ad None"},YVAP_ADSTARTED:{type:"tyvapads",desc:"Ad Started"},STREAM_REQUEST_TO_RENDER:{type:"treqtr",desc:"Stream Latency (From request to render)"},STREAM_PLAY_TO_RENDER:{type:"tsltps",desc:"Media playback start to video render"},SAPI_LOADRELATED:{type:"tsapilr",desc:"SAPI Get for related videos"}}},{}],"./nextgen/src/event.js":[function(e,t,n){t.exports=e("YJm+dH")},{}],23:[function(e,t,n){var i=new(e("hogan.js/lib/template").Template)(function(e,t,n){var i=this;return i.b(n=n||""),i.b("<div class='yvp-cc-options-more close'>"),i.b("\n"+n),i.b("    <div class='yvp-cc-back'>"),i.b("\n"+n),i.b("         <div class='yvp-settings-caret-icon left'></div>"),i.b("\n"+n),i.b("         <div class='yvp-cc-back-header'>"),i.b(i.v(i.d("strings.BACK",e,t,0))),i.b("</div>"),i.b("\n"+n),i.b("    </div>"),i.b("\n"+n),i.b('    <div class="yvp-tab-container">'),i.b("\n"+n),i.b('        <ul class="yvp-tabs-nav">'),i.b("\n"+n),i.b('            <li class="yvp-tab tab-selected">'),i.b(i.v(i.d("strings.PRESETS",e,t,0))),i.b("</li>"),i.b("\n"+n),i.b('            <li class="yvp-tab">'),i.b(i.v(i.d("strings.TEXT",e,t,0))),i.b("</li>"),i.b("\n"+n),i.b('            <li class="yvp-tab">'),i.b(i.v(i.d("strings.BACKGROUND",e,t,0))),i.b("</li>"),i.b("\n"+n),i.b('            <li class="yvp-tab">'),i.b(i.v(i.d("strings.EFFECTS",e,t,0))),i.b("</li>"),i.b("\n"+n),i.b("        </ul>"),i.b("\n"+n),i.b('        <div class="yvp-tabs-content">'),i.b("\n"+n),i.b('            <div class="yvp-tabcontent preset-container tab-show">'),i.b("\n"+n),i.b('                <div class="yvp-cc-preset">Aa</div>'),i.b("\n"+n),i.b('                <div class="yvp-cc-preset">Aa</div>'),i.b("\n"+n),i.b('                <div class="yvp-cc-preset">Aa</div>'),i.b("\n"+n),i.b('                <div class="yvp-cc-preset">Aa</div>'),i.b("\n"+n),i.b('                <div class="yvp-cc-preset">Aa</div>'),i.b("\n"+n),i.b('                <div class="yvp-cc-preset">Aa</div>'),i.b("\n"+n),i.b('                <div class="yvp-cc-preset">Aa</div>'),i.b("\n"+n),i.b('                <div class="yvp-cc-preset">Aa</div>'),i.b("\n"+n),i.b("            </div>"),i.b("\n"+n),i.b('            <div class="yvp-tabcontent font-list">'),i.b("\n"+n),i.b('                <div class="yvp-colorpicker fontcolorpicker"></div>'),i.b("\n"+n),i.b("            </div>"),i.b("\n"+n),i.b('            <div class="yvp-tabcontent bg-opacity-list">'),i.b("\n"+n),i.b('                <div class="yvp-colorpicker bgcolorpicker"></div>'),i.b("\n"+n),i.b("            </div>"),i.b("\n"+n),i.b('            <div class="yvp-tabcontent effects">'),i.b("\n"+n),i.b('                <div class="yvp-effect none">'),i.b("\n"+n),i.b("                    <p>Aa</p>"),i.b("\n"+n),i.b("                    <div class='yvp-cc-effect-header'>"),i.b(i.v(i.d("strings.PLAIN",e,t,0))),i.b("</div>"),i.b("\n"+n),i.b("                </div>"),i.b("\n"+n),i.b('                <div class="yvp-effect dropshadow">'),i.b("\n"+n),i.b("                    <p>Aa</p>"),i.b("\n"+n),i.b("                    <div class='yvp-cc-effect-header'>"),i.b(i.v(i.d("strings.SHADOW",e,t,0))),i.b("</div>"),i.b("\n"+n),i.b("                </div>"),i.b("\n"+n),i.b('                <div class="yvp-effect raised">'),i.b("\n"+n),i.b("                    <p>Aa</p>"),i.b("\n"+n),i.b("                    <div class='yvp-cc-effect-header'>"),i.b(i.v(i.d("strings.RAISED",e,t,0))),i.b("</div>"),i.b("\n"+n),i.b("                </div>"),i.b("\n"+n),i.b('                <div class="yvp-effect depressed">'),i.b("\n"+n),i.b("                    <p>Aa</p>"),i.b("\n"+n),i.b("                    <div class='yvp-cc-effect-header'>"),i.b(i.v(i.d("strings.LOWERED",e,t,0))),i.b("</div>"),i.b("\n"+n),i.b("                </div>"),i.b("\n"+n),i.b('                <div class="yvp-effect uniform">'),i.b("\n"+n),i.b("                    <p>Aa</p>"),i.b("\n"+n),i.b("                    <div class='yvp-cc-effect-header'>"),i.b(i.v(i.d("strings.OUTLINE",e,t,0))),i.b("</div>"),i.b("\n"+n),i.b("                </div>"),i.b("\n"+n),i.b("            </div>"),i.b("\n"+n),i.b("        </div>"),i.b("\n"+n),i.b("    </div>"),i.b("\n"+n),i.b('    <div class="yvp-cc-style-preview">'),i.b("\n"+n),i.b('        <div class="yvp-cc-options-message">'),i.b(i.v(i.d("strings.CC_PREVIEW_MESSAGE",e,t,0))),i.b("</div>"),i.b("\n"+n),i.b("    </div>"),i.b("\n"+n),i.b("</div>"),i.b("\n"),i.fl()});t.exports={render:function(){return i.render.apply(i,arguments)},r:function(){return i.r.apply(i,arguments)},ri:function(){return i.ri.apply(i,arguments)}}},{"hogan.js/lib/template":159}],24:[function(e,t,n){var i=new(e("hogan.js/lib/template").Template)(function(e,t,n){var i=this;return i.b(n=n||""),i.b("<div class='yvp-cc-options-main close'>"),i.b("\n"+n),i.b("    <div class='yvp-cc-back-to-settings'>"),i.b("\n"+n),i.b("        <div class='yvp-settings-caret-icon left'></div>"),i.b("\n"+n),i.b("        <div class='yvp-back-to-settings'>"),i.b(i.v(i.d("strings.BACK",e,t,0))),i.b("</div>"),i.b("\n"+n),i.b("    </div>"),i.b("\n"+n),i.b("\n"+n),i.b("    <div class='yvp-cc-box'>"),i.b("\n"+n),i.b("        <div class='yvp-cc-header yvp-cc-item'>"),i.b(i.v(i.d("strings.CC",e,t,0))),i.b("</div>"),i.b("\n"+n),i.b("        <div class='yvp-cc-toggle'>"),i.b("\n"+n),i.b("            <div data-cc-state='on' class='yvp-settings-item yvp-cc-on'>"),i.b(i.v(i.d("strings.ON",e,t,0))),i.b("</div>"),i.b("\n"+n),i.b("            <div data-cc-state='off' class='yvp-settings-item yvp-cc-off'>"),i.b(i.v(i.d("strings.OFF",e,t,0))),i.b("</div>"),i.b("\n"+n),i.b("        </div>"),i.b("\n"+n),i.b("        <div class='yvp-cc-header yvp-cc-item'>"),i.b(i.v(i.d("strings.LANGUAGE",e,t,0))),i.b("</div>"),i.b("\n"+n),i.b("        <div class='yvp-cc-language yvp-cc-item'></div>"),i.b("\n"+n),i.b("    </div>"),i.b("\n"+n),i.b("\n"+n),i.b("    <div class='yvp-cc-divider'></div>"),i.b("\n"+n),i.b("    <div class='yvp-cc-box'>"),i.b("\n"+n),i.b("        <div class='yvp-cc-position yvp-cc-item'>"),i.b("\n"+n),i.b("            <div class='yvp-cc-header yvp-cc-item'>"),i.b(i.v(i.d("strings.POSITION",e,t,0))),i.b("</div>"),i.b("\n"+n),i.b("            <div class='yvp-cc-pos-wrapper'>"),i.b("\n"+n),i.b("                <ul class='yvp-cc-pos-selection'></ul>"),i.b("\n"+n),i.b("            </div>"),i.b("\n"+n),i.b("        </div>"),i.b("\n"+n),i.b("        <div class='yvp-cc-size yvp-cc-item'>"),i.b("\n"+n),i.b("            <div class='yvp-cc-header yvp-cc-item'>"),i.b(i.v(i.d("strings.CC_TYPE_SIZE",e,t,0))),i.b("</div>"),i.b("\n"+n),i.b("            <div class='yvp-cc-size-selector'>"),i.b("\n"+n),i.b("                <div class='yvp-cc-size-indicators'>"),i.b("\n"+n),i.b("                    <div class='yvp-cc-indicator yvp-cc-indicator-0' data-size-value='0'>A</div>"),i.b("\n"+n),i.b("                    <div class='yvp-cc-indicator yvp-cc-indicator-25' data-size-value='25'>A</div>"),i.b("\n"+n),i.b("                    <div class='yvp-cc-indicator yvp-cc-indicator-50' data-size-value='50'>A</div>"),i.b("\n"+n),i.b("                    <div class='yvp-cc-indicator yvp-cc-indicator-75' data-size-value='75'>A</div>"),i.b("\n"+n),i.b("                    <div class='yvp-cc-indicator yvp-cc-indicator-100' data-size-value='100'>A</div>"),i.b("\n"+n),i.b("                </div>"),i.b("\n"+n),i.b("            </div>"),i.b("\n"+n),i.b("        </div>"),i.b("\n"+n),i.b("    </div>"),i.b("\n"+n),i.b("\n"+n),i.b("    <div class='yvp-cc-divider'></div>"),i.b("\n"+n),i.b("    <div class='yvp-cc-box'>"),i.b("\n"+n),i.b("        <div class='yvp-cc-style yvp-cc-item'>"),i.b("\n"+n),i.b("            <div class='yvp-cc-style-preview'>Aa</div>"),i.b("\n"+n),i.b("            <div class='yvp-cc-style-more'>"),i.b("\n"+n),i.b("                <div class='yvp-cc-item'>"),i.b(i.v(i.d("strings.STYLE_OPTIONS",e,t,0))),i.b("</div>"),i.b("\n"+n),i.b("                <div class='yvp-settings-caret-icon right'></div>"),i.b("\n"+n),i.b("            </div>"),i.b("\n"+n),i.b("        </div>"),i.b("\n"+n),i.b("        "),i.b("\n"+n),i.b("        <div class='yvp-cc-feedback-link yvp-cc-item'>"),i.b("\n"+n),i.b("            <a href='http://info.yahoo.com/legal/us/yahoo/cc/en-us/' target='_blank'>"),i.b("\n"+n),i.b("                <div class='yvp-cc-item'>"),i.b(i.v(i.d("strings.SUBMIT_FEEDBACK",e,t,0))),i.b("</div>"),i.b("\n"+n),i.b("            </a>"),i.b("\n"+n),i.b("        </div>"),i.b("\n"+n),i.b("        <div class='yvp-cc-preview'>"),i.b("\n"+n),i.b("            <div class='yvp-cc-preview-message'>"),i.b(i.v(i.d("strings.CC_PREVIEW_MESSAGE",e,t,0))),i.b("</div>"),i.b("\n"+n),i.b("        </div>"),i.b("\n"+n),i.b("    </div>"),i.b("\n"+n),i.b("</div>"),i.b("\n"),i.fl()});t.exports={render:function(){return i.render.apply(i,arguments)},r:function(){return i.r.apply(i,arguments)},ri:function(){return i.ri.apply(i,arguments)}}},{"hogan.js/lib/template":159}],25:[function(e,t,n){"use strict";function i(e,t){var n=this;n._eventBus=e,n._model=t,n._eventBus.subscribe(d.CC.FONT_SIZE_CHANGE,n._onSizeChange,n),n._eventBus.subscribe(d.CC.FETCHED,n._populateUI,n),n._eventBus.subscribe(d.CC.LANGUAGE_CHANGE,n._syncLanguageMenu,n),n._eventBus.subscribe(d.CC.TOGGLE,n._syncToggleSelection,n),n._eventBus.subscribe(d.CC.USER_STYLE_PREFERENCES_CHANGE,n._syncCCPreferences,n),n._eventBus.subscribe(d.CC.FONT_FACE_CHANGE,n._applyFontFaceChange,n),n._eventBus.subscribe(d.CC.BG_OPACITY_CHANGE,n._applyBgOpacityChange,n),n._eventBus.subscribe(d.PLAYBACK_STARTED,n._syncCCPreferences,n)}t.exports=i;var r=(e("fs"),e("insert-css")),o=e("../states"),a=e("../strings"),s=e("../util"),l=e("../../../lib"),c=e("../tap"),p=e("../cc"),d=e("../event"),u=(e("../views/uiwidgets/tooltip"),e("../views/uiwidgets/drop-down-menu")),_=e("../views/uiwidgets/slider"),v=e("./fuji-cc-options.html"),y=e("./fuji-cc-more-options.html"),m="data-cc-state",f=["on","off"],g=["bottom","top"],b={0:16,25:20,50:24,75:28,100:32},E="yvp-settings-activated",h="yvp-cc-preview-activated",A="yvp-cc-preview-",S="top",T="on",L={Font:"font",Background:"bg"};r('.cc-element{position:absolute;bottom:16%;width:95%;left:2.5%;text-align:center;z-index:6;max-height:25%;-webkit-transition-property:bottom;-webkit-transition-duration:.5s;-webkit-transition-delay:0s;transition-property:bottom;transition-duration:.5s;transition-delay:0s;}.cc-element.top{top:5%}.cc-element.bottom{bottom:16%}.cc-element.float{bottom:10%}.yvp-fuji .yvp-cc-options-main,.yvp-fuji .yvp-cc-options-more{min-width:496px;max-height:212px;color:#fff;}.yvp-fuji .yvp-cc-options-main.open,.yvp-fuji .yvp-cc-options-more.open{display:block}.yvp-fuji .yvp-cc-options-main.close,.yvp-fuji .yvp-cc-options-more.close{display:none}.yvp-fuji .yvp-cc-options-main .yvp-ddm-wrapper,.yvp-fuji .yvp-cc-options-more .yvp-ddm-wrapper{margin-left:0;padding:0;width:150px;color:#fff;display:inline-block;position:relative;z-index:1;vertical-align:middle}.yvp-fuji .yvp-cc-options-main .yvp-ddm-availability,.yvp-fuji .yvp-cc-options-more .yvp-ddm-availability{display:none;background-color:#3db224;width:6px;height:6px;border-radius:8px;position:relative;top:-9px;left:3px;}.yvp-fuji .yvp-cc-options-main .yvp-ddm-availability.not-available,.yvp-fuji .yvp-cc-options-more .yvp-ddm-availability.not-available{background-color:#ccc}.yvp-fuji .yvp-cc-options-main .yvp-ddm-selected,.yvp-fuji .yvp-cc-options-more .yvp-ddm-selected{text-align:left;padding-left:5px;overflow:hidden;text-overflow:ellipsis;height:20px;line-height:20px}.yvp-fuji .yvp-cc-options-main .yvp-ddm-selected-wrapper,.yvp-fuji .yvp-cc-options-more .yvp-ddm-selected-wrapper{width:100%;border:1px solid #5f5f5f;border-radius:3px;}.yvp-fuji .yvp-cc-options-main .yvp-ddm-selected-wrapper:hover,.yvp-fuji .yvp-cc-options-more .yvp-ddm-selected-wrapper:hover{cursor:pointer;}.yvp-fuji .yvp-cc-options-main .yvp-ddm-selected-wrapper:hover .yvp-ddm-chevron,.yvp-fuji .yvp-cc-options-more .yvp-ddm-selected-wrapper:hover .yvp-ddm-chevron{opacity:.9}.yvp-fuji .yvp-cc-options-main .yvp-ddm-chevron,.yvp-fuji .yvp-cc-options-more .yvp-ddm-chevron{background-image:url("data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiIHN0YW5kYWxvbmU9Im5vIj8+Cjxzdmcgd2lkdGg9IjI0cHgiIGhlaWdodD0iMjRweCIgdmlld0JveD0iMCAwIDI0IDI0IiB2ZXJzaW9uPSIxLjEiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgeG1sbnM6eGxpbms9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmsiIHhtbG5zOnNrZXRjaD0iaHR0cDovL3d3dy5ib2hlbWlhbmNvZGluZy5jb20vc2tldGNoL25zIj4KICAgIDxnIGlkPSJQYWdlLTEiIHN0cm9rZT0ibm9uZSIgc3Ryb2tlLXdpZHRoPSIxIiBmaWxsPSJub25lIiBmaWxsLXJ1bGU9ImV2ZW5vZGQiIHNrZXRjaDp0eXBlPSJNU1BhZ2UiPgogICAgICAgIDxnIGlkPSJjY19jYXJyb3QtIiBza2V0Y2g6dHlwZT0iTVNBcnRib2FyZEdyb3VwIiBmaWxsPSIjRkZGRkZGIj4KICAgICAgICAgICAgPHBhdGggZD0iTTEyLjcyNSw3LjQyMTgzNzc3IEw5LDExLjk5ODgzNzggTDEyLjcyNSwxNi41NzQ4Mzc4IEMxMi45NSwxNi44NTI4Mzc4IDEzLjI4NywxNi45OTc4Mzc4IDEzLjYyNiwxNi45OTc4Mzc4IEMxMy44NzMsMTYuOTk3ODM3OCAxNC4xMjIsMTYuOTIwODM3OCAxNC4zMzEsMTYuNzYxODM3OCBDMTQuODI4LDE2LjM4NjgzNzggMTQuOTE2LDE1LjY5MjgzNzggMTQuNTI1LDE1LjIxMzgzNzggTDExLjkwOSwxMS45OTg4Mzc4IEwxNC41MjUsOC43ODM4Mzc3NyBDMTQuOTE2LDguMzA0ODM3NzcgMTQuODI4LDcuNjEwODM3NzcgMTQuMzMxLDcuMjM0ODM3NzcgQzEzLjgzNSw2Ljg1ODgzNzc3IDEzLjExNSw2Ljk0MzgzNzc3IDEyLjcyNSw3LjQyMTgzNzc3IFoiIGlkPSJGaWxsLTMiIHNrZXRjaDp0eXBlPSJNU1NoYXBlR3JvdXAiIHRyYW5zZm9ybT0idHJhbnNsYXRlKDEyLjAwMDAwMCwgMTIuMDAwMDAwKSByb3RhdGUoLTkwLjAwMDAwMCkgdHJhbnNsYXRlKC0xMi4wMDAwMDAsIC0xMi4wMDAwMDApICI+PC9wYXRoPgogICAgICAgIDwvZz4KICAgIDwvZz4KPC9zdmc+Cg==");position:absolute;padding-left:11px;padding-right:7px;top:0;height:19px;width:5px;right:1.5%;opacity:.7;}.yvp-fuji .yvp-cc-options-main .yvp-ddm-list,.yvp-fuji .yvp-cc-options-more .yvp-ddm-list{position:absolute;background-color:rgba(0,0,0,0.8);max-height:120px;display:none;padding:0;min-width:100%;overflow-x:hidden;overflow-y:auto;border:1px solid rgba(255,255,255,0.2);border-top:none;box-sizing:border-box;width:101%;}.yvp-fuji .yvp-cc-options-main .yvp-ddm-list.open,.yvp-fuji .yvp-cc-options-more .yvp-ddm-list.open{cursor:pointer;display:block}.yvp-fuji .yvp-cc-options-main .yvp-ddm-item,.yvp-fuji .yvp-cc-options-more .yvp-ddm-item{text-align:left;padding:7px 5px;overflow:hidden;text-overflow:ellipsis;border-bottom:1px solid rgba(255,255,255,0.1);background:rgba(0,0,0,0);}.yvp-fuji .yvp-cc-options-main .yvp-ddm-item:first-child,.yvp-fuji .yvp-cc-options-more .yvp-ddm-item:first-child{padding-top:9px}.yvp-fuji .yvp-cc-options-main .yvp-ddm-item:last-child,.yvp-fuji .yvp-cc-options-more .yvp-ddm-item:last-child{border-bottom:none}.yvp-fuji .yvp-cc-options-main .yvp-ddm-item:hover,.yvp-fuji .yvp-cc-options-more .yvp-ddm-item:hover{cursor:pointer;background:rgba(0,0,0,0.4)}.yvp-fuji .yvp-cc-options-main .yvp-cc-header,.yvp-fuji .yvp-cc-options-more .yvp-cc-header{color:rgba(255,255,255,0.6);font-weight:normal}.yvp-fuji .yvp-cc-options-more .yvp-tab-container{padding:0;width:100%;border:0;position:relative;margin-top:16px;max-height:100px;}.yvp-fuji .yvp-cc-options-more .yvp-tab-container .yvp-tabs-nav{width:100%;padding-bottom:0;margin-bottom:0;height:32px;display:block;background-color:transparent;text-align:center;overflow:hidden;box-sizing:border-box;}.yvp-fuji .yvp-cc-options-more .yvp-tab-container .yvp-tabs-nav .yvp-tab{display:block;float:left;width:25%;color:rgba(255,255,255,0.6);margin:0;padding:0;border-bottom:1px solid rgba(255,255,255,0.2);background-color:transparent;box-sizing:border-box;text-transform:capitalize;cursor:pointer;height:32px;line-height:24px;}.yvp-fuji .yvp-cc-options-more .yvp-tab-container .yvp-tabs-nav .yvp-tab:hover{color:rgba(255,255,255,0.8);border-bottom:3px solid rgba(255,255,255,0.3)}.yvp-fuji .yvp-cc-options-more .yvp-tab-container .yvp-tabs-nav .yvp-tab:last-child{border-right:none}.yvp-fuji .yvp-cc-options-more .yvp-tab-container .yvp-tabs-nav .yvp-tab.tab-selected{border-bottom:3px solid #0087ff;color:#fff}.yvp-fuji .yvp-cc-options-more .yvp-tab-container .yvp-tabs-content .yvp-tabcontent{display:none;background-color:transparent;padding:16px 0;height:40px;position:relative;}.yvp-fuji .yvp-cc-options-more .yvp-tab-container .yvp-tabs-content .yvp-tabcontent.tab-show{display:block}.yvp-fuji .yvp-cc-options-more .yvp-tab-container .yvp-tabs-content .yvp-ddm-wrapper{display:inline-block;width:150px;margin:0 0 43px 75px;border-radius:3px}.yvp-fuji .yvp-cc-options-more .yvp-tab-container .yvp-tabs-content .yvp-ddm-availability{display:none}.yvp-fuji .yvp-cc-options-more .yvp-tab-container .yvp-tabs-content .yvp-ddm-list{width:auto;max-height:108px}.yvp-fuji .yvp-cc-options-more .yvp-tab-container .yvp-tabs-content .yvp-ddm-selected-wrapper{width:auto;}.yvp-fuji .yvp-cc-options-more .yvp-tab-container .yvp-tabs-content .yvp-ddm-selected-wrapper.hide{display:none}.yvp-fuji .yvp-cc-options-more .yvp-colorpicker{margin-left:auto;margin-right:auto;padding:0;width:100%;margin-left:-4px;margin-top:1px;display:inline-block;white-space:normal;}.yvp-fuji .yvp-cc-options-more .yvp-colorpicker .color-option{border:1px solid rgba(255,255,255,0.2);border-radius:2px;width:16px;height:16px;display:inline-block;margin:3px;cursor:pointer;}.yvp-fuji .yvp-cc-options-more .yvp-colorpicker .color-option:hover{border:1px solid rgba(255,255,255,0.6)}.yvp-fuji .yvp-cc-options-more .yvp-colorpicker .color-option.nocolor::before{content:" ";position:absolute;border-bottom:1px solid #f00;width:26px;transform:rotate(135deg) translate(9px,-3px);-ms-transform:rotate(135deg) translate(9px,-3px);}.yvp-fuji .yvp-cc-options-more .yvp-colorpicker .color-option.color-selected{border:1px solid #fff}.yvp-fuji .yvp-cc-options-more .fontcolorpicker{display:inline-block;width:100px;margin-left:65px}.yvp-fuji .yvp-cc-options-more .bgcolorpicker{display:inline-block;width:144px;margin-left:65px}.yvp-fuji .yvp-cc-options-more .effects{margin-left:75px}.yvp-fuji .yvp-cc-options-more .yvp-effect{display:inline-block;position:relative;width:54px;height:32px;font-size:18px;line-height:30px;background-color:rgba(102,102,102,0.5);border:1px solid rgba(255,255,255,0.2);border-radius:4px;margin-left:2%;box-sizing:border-box;background-repeat:no-repeat;background-position:center;text-align:center;cursor:pointer;}.yvp-fuji .yvp-cc-options-more .yvp-effect:hover{border:1px solid rgba(255,255,255,0.6)}.yvp-fuji .yvp-cc-options-more .yvp-effect.none{margin-left:5px}.yvp-fuji .yvp-cc-options-more .yvp-effect.dropshadow{text-shadow:2px 1px 1px #000}.yvp-fuji .yvp-cc-options-more .yvp-effect.raised{text-shadow:3px 3px 4px rgba(0,0,0,0.75)}.yvp-fuji .yvp-cc-options-more .yvp-effect.depressed{text-shadow:0 -4px 4px rgba(0,0,0,0.54)}.yvp-fuji .yvp-cc-options-more .yvp-effect.uniform{text-shadow:-2px -2px 0 #000,-2px 2px 0 #000,-2px 0 0 #000,2px -2px 0 #000,2px 2px 0 #000,2px 0 0 #000,0 -2px 0 #000,0 2px 0 #000}.yvp-fuji .yvp-cc-options-more .yvp-effect.effect-selected{border:1px solid #fff;}.yvp-fuji .yvp-cc-options-more .yvp-effect.effect-selected .yvp-cc-effect-header{color:#fff}.yvp-fuji .yvp-cc-options-more .yvp-effect .yvp-cc-effect-header{font-size:11px;text-transform:capitalize;color:rgba(255,255,255,0.6);text-shadow:none}.yvp-fuji .yvp-cc-options-more .preset-container{width:100%;height:100px;position:relative;max-height:100px;display:inline-block}.yvp-fuji .yvp-cc-options-more .yvp-cc-preset{display:inline-block;width:53px;height:32px;line-height:30px;border:1px solid rgba(255,255,255,0.2);border-radius:3px;font-size:1.3em;box-sizing:border-box;text-align:center;margin:3px;cursor:pointer;}.yvp-fuji .yvp-cc-options-more .yvp-cc-preset:hover{border:1px solid rgba(255,255,255,0.6);margin:3px}.yvp-fuji .yvp-cc-options-more .preset-separator{clear:both;width:100%;height:9%}.yvp-fuji .yvp-cc-options-more .yvp-cc-back{max-width:65px;background-color:transparent;color:inherit;font-size:11px;position:relative;outline:none;cursor:pointer}.yvp-fuji .yvp-cc-options-more .yvp-cc-back-header{display:inline-block;margin-left:3px;color:rgba(255,255,255,0.6);}.yvp-fuji .yvp-cc-options-more .yvp-cc-back-header:hover{color:#fff}.yvp-fuji .yvp-cc-options-more .yvp-cc-style-preview{margin:40px 0 20px 85px;display:block;position:relative;font-size:20px;line-height:20px;max-width:260px;}.yvp-fuji .yvp-cc-options-more .yvp-cc-style-preview .yvp-cc-options-message{margin-left:18px}.yvp-fuji .yvp-cc-options-main .yvp-cc-back-to-settings{max-width:65px}.yvp-fuji .yvp-cc-options-main .yvp-back-to-settings{display:inline-block;cursor:pointer;margin-left:3px;color:rgba(255,255,255,0.6);}.yvp-fuji .yvp-cc-options-main .yvp-back-to-settings:hover{color:#fff}.yvp-fuji .yvp-cc-options-main .yvp-cc-box{display:block;margin-top:16px;clear:both}.yvp-fuji .yvp-cc-options-main .yvp-cc-item{display:inline-block}.yvp-fuji .yvp-cc-options-main .yvp-cc-divider{display:block;height:1px;margin:16px 0 16px 0;background:rgba(255,255,255,0.2)}.yvp-fuji .yvp-cc-options-main .yvp-cc-toggle{display:inline-block;margin:0 20px}.yvp-fuji .yvp-cc-options-main .yvp-cc-language{margin-left:20px}.yvp-fuji .yvp-cc-options-main .yvp-cc-position{max-width:175px}.yvp-fuji .yvp-cc-options-main .yvp-cc-size{margin-left:20px}.yvp-fuji .yvp-cc-options-main .yvp-cc-toggle-selection,.yvp-fuji .yvp-cc-options-main .yvp-cc-pos-selection,.yvp-fuji .yvp-cc-options-main .yvp-cc-style-preview,.yvp-fuji .yvp-cc-options-main .yvp-cc-size-selector{display:inline-block;margin-left:56px;padding-bottom:18px}.yvp-fuji .yvp-cc-options-main .yvp-cc-style{padding-bottom:5px}.yvp-fuji .yvp-cc-options-main .yvp-cc-toggle-selection,.yvp-fuji .yvp-cc-options-main .yvp-cc-pos-selection{margin-left:0;}.yvp-fuji .yvp-cc-options-main .yvp-cc-toggle-selection .yvp-cc-position-top,.yvp-fuji .yvp-cc-options-main .yvp-cc-pos-selection .yvp-cc-position-top{margin-bottom:6px}.yvp-fuji .yvp-cc-options-main .yvp-cc-pos-selection{padding-bottom:0;vertical-align:middle}.yvp-fuji .yvp-cc-options-main .yvp-cc-size-selector{margin:0;padding:0}.yvp-fuji .yvp-cc-options-main .yvp-cc-indicator{display:inline-block;margin-left:19px;padding:0 4px;cursor:pointer;border:1px solid transparent;border-radius:3px;vertical-align:middle;color:#fff;}.yvp-fuji .yvp-cc-options-main .yvp-cc-indicator:hover{background-color:rgba(255,255,255,0.2)}.yvp-fuji .yvp-cc-options-main .yvp-cc-indicator.size-active{background-color:rgba(255,255,255,0.4);}.yvp-fuji .yvp-cc-options-main .yvp-cc-indicator.size-active:hover{background-color:rgba(255,255,255,0.4)}.yvp-fuji .yvp-cc-options-main .yvp-cc-indicator-0{font-size:15px}.yvp-fuji .yvp-cc-options-main .yvp-cc-indicator-25{font-size:18px}.yvp-fuji .yvp-cc-options-main .yvp-cc-indicator-50{font-size:24px}.yvp-fuji .yvp-cc-options-main .yvp-cc-indicator-75{font-size:28px}.yvp-fuji .yvp-cc-options-main .yvp-cc-indicator-100{font-size:32px}.yvp-fuji .yvp-cc-options-main .yvp-slider-wrapper{margin-top:1px;width:213px;color:#ccc;border-top:1px solid #646464;display:none}.yvp-fuji .yvp-cc-options-main .yvp-slider-track{display:block;width:100%;position:relative;margin-top:-3px;-webkit-touch-callout:none;-webkit-user-select:none;-khtml-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;}.yvp-fuji .yvp-cc-options-main .yvp-slider-track:active{cursor:pointer}.yvp-fuji .yvp-cc-options-main .yvp-slider-track .yvp-slider-handle{position:absolute;display:inline-block;border-radius:50%;height:5px;width:5px;margin:0;background-color:#fff;border:1px solid #fff;}.yvp-fuji .yvp-cc-options-main .yvp-slider-track .yvp-slider-handle:hover{background-color:#fff;border-width:1px solid #fff;border-radius:50%;width:10px;height:10px;margin-left:-2px;margin-top:-2px;cursor:pointer;}.yvp-fuji .yvp-cc-options-main .yvp-slider-track .yvp-slider-anchor{position:absolute;margin-right:0;display:inline-block;border-radius:50%;background-color:rgba(255,255,255,0.6);height:5px;width:5px;top:0;}.yvp-fuji .yvp-cc-options-main .yvp-slider-track .yvp-slider-anchor:hover{background-color:#fff;height:10px;width:10px;margin-right:5px;top:-1px;margin-left:-2px;cursor:pointer}.yvp-fuji .yvp-cc-options-main .yvp-cc-feedback-link{font-size:11px;float:right;}.yvp-fuji .yvp-cc-options-main .yvp-cc-feedback-link a:link{color:#fff}.yvp-fuji .yvp-cc-options-main .yvp-cc-feedback-link a:visited{color:#fff}.yvp-fuji .yvp-cc-options-main .yvp-cc-feedback-link a:hover{color:#fff}.yvp-fuji .yvp-cc-options-main .yvp-cc-feedback-link a:active{color:#fff}.yvp-fuji .yvp-cc-options-main .yvp-cc-feedback-link a{text-decoration:none}.yvp-fuji .yvp-cc-options-main .yvp-cc-style-more{display:inline-block;font-size:11px;background-color:transparent;color:inherit;outline:none;overflow:visible;cursor:pointer}.yvp-fuji .yvp-cc-options-main .yvp-cc-style-preview{display:none;border:1px solid rgba(255,255,255,0.2);border-radius:3px;color:#fff;min-width:54px;max-width:80px;font-size:1.5em;height:32px;line-height:32px;text-align:center;padding:1px 2px;margin:0 0 0 20px;}.yvp-fuji .yvp-cc-options-main .yvp-cc-style-preview .yvp-cc-style-preview-label{font-size:11px;position:absolute;top:-35px;left:-10px;color:#ccc;text-shadow:0 1px 1px rgba(0,0,0,0.4);font-family:Helvetica Neue Regular,Helvetica Neue,helvetica,arial,sans-serif}.yvp-fuji .yvp-cc-options-main .yvp-cc-pos-wrapper{position:relative;display:inline-block;vertical-align:middle;margin:5px 20px 0 20px}.yvp-fuji .yvp-cc-options-main .yvp-cc-position-top,.yvp-fuji .yvp-cc-options-main .yvp-cc-position-bottom{display:inline;margin-right:20px;cursor:pointer;color:rgba(255,255,255,0.5);}.yvp-fuji .yvp-cc-options-main .yvp-cc-position-top:hover,.yvp-fuji .yvp-cc-options-main .yvp-cc-position-bottom:hover{color:#fff}.yvp-fuji .yvp-cc-preview{position:absolute;z-index:4;text-align:center;left:65px;bottom:auto;top:auto;font-size:20px;font-weight:bold;opacity:0;pointer-events:none;}.yvp-fuji .yvp-cc-preview.yvp-cc-preview-activated{opacity:1}.yvp-fuji .yvp-cc-preview.yvp-cc-preview-top{top:4px;bottom:auto}.yvp-fuji .yvp-cc-preview.yvp-cc-preview-bottom{bottom:4px;top:auto}.yvp-fuji .yvp-cc-preview-message{display:inline-block;padding:5px 15px;margin:0 auto}.yvp-fuji.yvp-content.yvp-state-fullscreen .yvp-cc-preview-message,.yvp-fuji.yvp-content.yvp-state-fullscreen .yvp-cc-options-message{display:none}'),
i.prototype.render=function(){var e=this;return e.node=s.render(v,{strings:a.i18n}),e.ccMoreOptionsNode=s.render(y,{strings:a.i18n}),e._applyUIControls(),e._renderAdvancedCCOptions(),e._bindUI(),e._nodes=[e.node,e.ccMoreOptionsNode],e._currentScreenIndex=0,e._nodes},i.prototype._syncLanguageMenu=function(e,t){var n=this;if(e&&!(t.length<0)){var i=p.prototype.getLanguageForCode.call(null,e||n._model.userPreferences.closedCaptions.lang);n._DDMenu&&n._DDMenu.syncData({selected:i,items:t?t.map(function(e){return p.prototype.getLanguageForCode.call(null,e)}):null,itemsData:t})}},i.prototype._syncCCPreferences=function(){function e(e,t,i,r){var o=e.querySelectorAll(t);Array.prototype.forEach.call(o,function(e){n._model.userPreferences.closedCaptions[r]===e.val?s.classList(e).add(i):s.classList(e).remove(i)})}var t,n=this;for(var i in b)if(b.hasOwnProperty(i)&&b[parseInt(i)]===n._model.userPreferences.closedCaptions.fontSize){t=i;break}var r=n._letterOptionsBtns.querySelector(".yvp-cc-indicator-"+t);r&&s.classList(r).add("size-active"),e(n._fontColorPicker,".color-option","color-selected","fontColor"),e(n._bgColorPicker,".color-option","color-selected","bgColor"),e(n._effectPicker,".yvp-effect","effect-selected","fontEffect"),e(n._ccPositionSelection,".yvp-settings-item",E,"ccPos"),n._lastPosSelected=n._ccPositionSelection.querySelector("."+E),n._fontDDM.syncData({items:[],itemsData:[],selected:n._getFontPropertyByFontName(n._model.userPreferences.closedCaptions.fontName).name}),n._bgOpactiyDDM.syncData({items:[],itemsData:[],selected:n._stringifyBgOpacity(100*n._model.userPreferences.closedCaptions.bgOpacity)}),n._sizeSlider.setValue(t),n._updateCCStylePreviewBoxes()},i.prototype._applyUIControls=function(){var e=this;e._applyCCToggling(),e._applyCCLanguageMenu(),e._applySize(),e._applyAdvancedOptions(),e._applyCCPosition()},i.prototype._applyCCToggling=function(){var e=this,t=e._model.userPreferences.closedCaptions.show;e._ccToggleSelectionNodes=e.node.querySelector(".yvp-cc-toggle"),e._toggleSelections=[],f.forEach(function(n){var i=e._ccToggleSelectionNodes.querySelector(".yvp-cc-"+n),r=n===T;(t&&r||!t&&!r)&&(s.classList(i).add(E),e._lastToggleSelected=i),e._toggleSelections.push(i)})},i.prototype._applyCCLanguageMenu=function(){var e=this;if(e._ccLanguageMenu=e.node.querySelector(".yvp-cc-language"),e._model.userPreferences.closedCaptions&&e._model.userPreferences.closedCaptions.lang){var t={selected:p.prototype.getLanguageForCode.call(null,e._model.userPreferences.closedCaptions.lang),items:null,noItemsText:a.i18n.NO_ITEM_AVAILABLE};e._DDMenu=new u(P,t,e._eventBus),e._ccLanguageMenu.appendChild(e._DDMenu.create()),e._eventBus.publish(d.CC.REQUEST_UI_DATA_FOR_MEDIA_ITEM,e._model.playlist.getCurrentItem())}},i.prototype._populateUI=function(e){var t=this,n="top"===t._model.userPreferences.closedCaptions.ccPos;t._syncLanguageMenu(e.selectedLang,e.langList),t._syncToggleSelection(t._model.userPreferences.closedCaptions.show),t._eventBus.publish(d.CC.POSITION_CHANGE,n)},i.prototype._applySize=function(){var e,t,n=this,i=n.node.querySelector(".yvp-cc-size-selector"),r={wrapper:"yvp-slider-wrapper",track:"yvp-slider-track",handle:"yvp-slider-handle",anchor:"yvp-slider-anchor"},o={anchors:5,minValue:0,maxValue:100,initialValue:n._model.userPreferences.closedCaptions.fontSize},a=[];n._sizeSlider=new _(r,o,n._eventBus),i.appendChild(n._sizeSlider.create()),n._sliderValues=n.node.querySelectorAll(".yvp-slider-anchor");var l=n._sliderValues.length;for(e=0;l>e;e++){var p=n._sliderValues[e].style.left.trim();a.push(parseFloat(p))}n._ccSizeLetterIndicator=function(e){var t=e.target,i=t.getAttribute("data-size-value")||"";switch(i){case"0":n._sizeSlider.setValue(a[0]);break;case"25":n._sizeSlider.setValue(a[1]);break;case"50":n._sizeSlider.setValue(a[2]);break;case"75":n._sizeSlider.setValue(a[3]);break;case"100":n._sizeSlider.setValue(a[4])}Array.prototype.forEach.call(n._letterOptionsBtns.children,function(e){s.classList(e).remove("size-active")}),s.classList(t).add("size-active")},n._letterOptionsBtns=n.node.querySelector(".yvp-cc-size-indicators"),n._letterOptionsTaps=[];var d=n._letterOptionsBtns.children.length;for(t=0;d>t;t++)n._letterOptionsTaps[t]=new c(n._letterOptionsBtns.children[t]),n._letterOptionsBtns.children[t].addEventListener("tap",n._ccSizeLetterIndicator)},i.prototype._updateCCStylePreviewBoxes=function(){var e=this,t=s.cssHexToRgb(e._model.userPreferences.closedCaptions.bgColor)||{r:0,g:0,b:0};Array.prototype.forEach.call(e._ccStylePreviewBoxes,function(n){n.style.fontSize=e._model.userPreferences.closedCaptions.fontSize,n.style.fontFamily=e._model.userPreferences.closedCaptions.fontName,n.style.color=e._model.userPreferences.closedCaptions.fontColor,n.style.textShadow=R[e._model.userPreferences.closedCaptions.fontEffect],n.style.backgroundColor="rgba("+t.r+","+t.g+","+t.b+","+e._model.userPreferences.closedCaptions.bgOpacity+")"}),e._model.playbackState.state!==o.INIT&&e._eventBus.publish(d.CC.SAVE_TO_LOCAL_STORAGE,{ccSettings:e._model.userPreferences.closedCaptions})},i.prototype._applyFontFaceChange=function(e){for(var t=this,n=0;n<D.length;n++)if(D[n].name===e){t._model.userPreferences.closedCaptions.fontName=e,t._model.userPreferences.closedCaptions.hasChanged=!0,t._eventBus.publish(d.CC.UPDATE_STYLE,"font: "+e),t._updateCCStylePreviewBoxes();break}},i.prototype._applyBgOpacityChange=function(e){var t=this;t._model.userPreferences.closedCaptions.bgOpacity=e/100,t._model.userPreferences.closedCaptions.hasChanged=!0,t._eventBus.publish(d.CC.UPDATE_STYLE,"opacity: "+e),t._updateCCStylePreviewBoxes()},i.prototype._getFontPropertyByFontName=function(e){for(var t=0;t<D.length;t++)if(D[t].name===e)return D[t];return D[3]},i.prototype._applyFontList=function(){var e=this,t=e.ccMoreOptionsNode.querySelector(".font-list"),n=D.map(function(e){return e.name}),i=e._getFontPropertyByFontName(e._model.userPreferences.closedCaptions.fontName),r={selected:i.name,items:n,noItemsText:a.i18n.NO_ITEM_AVAILABLE};e._fontDDM=new u(P,r,e._eventBus),t.insertBefore(e._fontDDM.create(),t.querySelector(".fontcolorpicker")),e._fontDDM.registerEvent(d.CC.FONT_FACE_CHANGE)},i.prototype._stringifyBgOpacity=function(e){return 100===e?e+"% (opaque)":e+"% (transparency)"},i.prototype._applyBgOpacityList=function(){var e=this,t=e.ccMoreOptionsNode.querySelector(".bg-opacity-list"),n=100*e._model.userPreferences.closedCaptions.bgOpacity,i={selected:100===n?n+"% (opaque)":n+"% (transparency)",items:O.map(e._stringifyBgOpacity),itemsData:O,noItemsText:a.i18n.NO_ITEM_AVAILABLE};e._bgOpactiyDDM=new u(P,i,e._eventBus),t.insertBefore(e._bgOpactiyDDM.create(),t.querySelector(".bgcolorpicker")),e._bgOpactiyDDM.registerEvent(d.CC.BG_OPACITY_CHANGE)},i.prototype._renderAdvancedCCOptions=function(){var e=this;e._fontColorPicker=e.ccMoreOptionsNode.querySelector(".fontcolorpicker"),e._bgColorPicker=e.ccMoreOptionsNode.querySelector(".bgcolorpicker"),e._effectPicker=e.ccMoreOptionsNode.querySelector(".yvp-tabcontent:nth-child(4)"),e._applyCCPresetStyles(),e._applyColorPickerPresetStyles(),e._applyFontList(),e._applyBgOpacityList(),e._renderEffectPickerPresets()},i.prototype._applyCCPresetStyles=function(){for(var e=this,t=e.ccMoreOptionsNode.querySelectorAll(".yvp-cc-preset"),n=0;n<t.length;n++){var i=t[n];i.presetIndex=n,i.style.color=C[n].fontColor,i.style.backgroundColor=C[n].bgColor}},i.prototype._applyColorPickerPresetStyles=function(){function e(e,t,n){for(var i,r=0;r<e.length;r++)i=document.createElement("div"),s.classList(i).add("color-option"),i.style.backgroundColor=e[r].color,i.val=e[r].color,"transparent"===e[r].color&&s.classList(i).add("nocolor"),i.colorpickerType=n,t.appendChild(i)}var t=this;e(I,t._fontColorPicker,L.Font),e(M,t._bgColorPicker,L.Background)},i.prototype._renderEffectPickerPresets=function(){for(var e=this,t=e._effectPicker.querySelectorAll(".yvp-effect"),n=0;n<t.length;n++){var i=t[n];i.val=N[n].name}},i.prototype._applyAdvancedOptions=function(){var e=this;e._ccStylePreviewBoxes=[e.node,e.ccMoreOptionsNode].map(function(e){return e.querySelector(".yvp-cc-style-preview")}),this._updateCCStylePreviewBoxes()},i.prototype._applyCCPosition=function(){var e=this;e._ccPositionSelection=e.node.querySelector(".yvp-cc-pos-selection"),e._ccPositionOptionNodes=[];var t="top"===e._model.userPreferences.closedCaptions.ccPos,n=document.createDocumentFragment();g.forEach(function(i){var r=document.createElement("li");s.classList(r).add("yvp-settings-item"),s.classList(r).add("yvp-cc-position-"+i),r.setAttribute("cc-pos-data",i),r.val=i;var o;o=document.createTextNode(a.i18n[i.toUpperCase()]),(t&&i===S||!t&&i!==S)&&(s.classList(r).add(E),e._lastPosSelected=r),e._ccPositionOptionNodes.push(r),r.appendChild(o),n.appendChild(r)}),e._ccPositionSelection.appendChild(n)},i.prototype._bindUI=function(){var e=this;e._bindCCToggle(),e._bindLanguageMenu(),e._bindSizeSelector(),e._bindAdvancedOptions(),e._bindCCPosition(),e._bindFeedback()},i.prototype._unBindUI=function(){var e=this;e._unBindToggle(),e._unBindLanguageMenu(),e._unBindSizeSelector(),e._unBindAdvancedOptions(),e._unBindCCPosition(),e._unBindCCPreview(),e._unBindFeedback()},i.prototype._syncToggleSelection=function(e){var t=this,n=t._ccToggleSelectionNodes.querySelector(".yvp-cc-"+(e?"on":"off"));s.classList(n).contains(E)||(s.classList(t._lastToggleSelected).remove(E),s.classList(n).add(E),t._lastToggleSelected=n)},i.prototype._bindCCToggle=function(){var e=this;e._toggleTaps=[],e._toggleCC=function(t){var n=t.target.getAttribute(m)===T;e._model.userPreferences.closedCaptions.hasChanged=!0,e._eventBus.publish(d.CC.UI_TOGGLE,n)},e._toggleSelections.forEach(function(t){var n=new c(t);e._toggleTaps.push(n),t.addEventListener("tap",e._toggleCC)})},i.prototype._unBindToggle=function(){var e=this;e._toggleTaps.forEach(function(e){e.destroy()}),e._toggleSelections.forEach(function(t){t.removeEventListener("tap",e._toggleCC)})},i.prototype._bindLanguageMenu=function(){var e=this;e._DDMenu&&e._DDMenu.registerEvent(d.CC.LANGUAGE_CHANGE)},i.prototype._unBindLanguageMenu=function(){var e=this;e._DDMenu.destroy()},i.prototype._bindSizeSelector=function(){var e=this;e._sizeSlider.registerEvent(d.CC.FONT_SIZE_CHANGE)},i.prototype._onSizeChange=function(e){var t=this,n=b[e];t._model.userPreferences.closedCaptions.fontSize=n,t._model.userPreferences.closedCaptions.hasChanged=!0,t._model.playbackState.state!==o.INIT&&(t._eventBus.publish(d.CC.UPDATE_STYLE,"size: "+e),t._eventBus.publish(d.CC.SAVE_TO_LOCAL_STORAGE,{ccSettings:t._model.userPreferences.closedCaptions})),t._showCCPreview()},i.prototype._unBindSizeSelector=function(){for(var e=this,t=0;t<e._letterOptionsBtns.children.length;t++)e._letterOptionsBtns.children[t].removeEventListener("tap",e._ccSizeLetterIndicator);e._sizeSlider.destroy()},i.prototype._bindFeedback=function(){var e=this;e._feedbackLink=e.node.querySelector(".yvp-cc-feedback-link"),e._feedbackLinkTap=new c(e._feedbackLink),e._onSubmitFeedback=function(t){var n=e._model.playbackState;n.paused||e._eventBus.publish(d.TOGGLE_PLAY_PAUSE)},e._feedbackLink.addEventListener("tap",e._onSubmitFeedback)},i.prototype._unBindFeedback=function(){var e=this;e._feedbackLinkTap.destroy()},i.prototype._bindAdvancedOptions=function(){var e=this;e._moreOptionShowComponent=function(t){e._currentScreenIndex=1,s.classList(e._nodes[0]).remove("open"),s.classList(e._nodes[0]).add("close"),s.classList(e._nodes[1]).remove("close"),s.classList(e._nodes[1]).add("open"),e._syncCCPreferences()},e._advancedMenuBackButtonTapListener=function(t){e._currentScreenIndex=0,s.classList(e._nodes[1]).remove("open"),s.classList(e._nodes[1]).add("close"),s.classList(e._nodes[0]).remove("close"),s.classList(e._nodes[0]).add("open")},e._moreOptionsBtn=e.node.querySelector(".yvp-cc-style-more"),e._moreOptionsBtnTap=new c(e._moreOptionsBtn),e._moreOptionsBtn.addEventListener("tap",e._moreOptionShowComponent),e._advancedMenuBackButton=e.ccMoreOptionsNode.querySelector(".yvp-cc-back"),e._advancedMenuBackButtonTap=new c(e._advancedMenuBackButton),e._advancedMenuBackButton.addEventListener("tap",e._advancedMenuBackButtonTapListener),e._bindStylePresetsUI(),e._bindTabUI(),e._bindColorPickerUI(),e._bindEffectPickerUI()},i.prototype._unBindAdvancedOptions=function(){var e=this;e._moreOptionsBtn&&e._moreOptionsBtnTap&&(e._moreOptionsBtnTap.destroy(),e._moreOptionsBtn.removeEventListener("tap",e._moreOptionShowComponent)),e._advancedMenuBackButton&&e._advancedMenuBackButtonTap&&(e._advancedMenuBackButtonTap.destroy(),e._advancedMenuBackButton.removeEventListener("tap",e._advancedMenuBackButtonTapListener)),e._ccOptionPresets&&e._ccOptionPresetsTap&&(e._ccOptionPresetsTap.destroy(),e._ccOptionPresets.removeEventListener("tap",e._ccOptionPresetsTapListener)),e._unbindTabUI&&e._unbindTabUI(),e._unbindColorPickerUI&&e._unbindColorPickerUI(),e._unbindEffectPickerUI&&e._unbindEffectPickerUI(),e._fontDDM.destroy(),e._bgOpactiyDDM.destroy()},i.prototype._togglePosition=function(e){var t=this,n=e.getAttribute("cc-pos-data")===S;s.classList(t._lastPosSelected).remove(E),s.classList(e).add(E),t._lastPosSelected=e,t._model.userPreferences.closedCaptions.hasChanged=!0,t._eventBus.publish(d.CC.POSITION_CHANGE,n),t._model.userPreferences.closedCaptions.ccPos=n?"top":"bottom",t._eventBus.publish(d.CC.SAVE_TO_LOCAL_STORAGE,{ccSettings:t._model.userPreferences.closedCaptions})},i.prototype._bindCCPosition=function(){var e=this;e._positionTaps=[],e._togglePositionByButton=function(t){var n=t.target;e._togglePosition(n)},e._ccPositionOptionNodes.forEach(function(t){var n=new c(t);e._positionTaps.push(n),t.addEventListener("tap",e._togglePositionByButton)})},i.prototype._unBindCCPosition=function(){var e=this;e._positionTaps.forEach(function(e){e.destroy()}),e._ccPositionOptionNodes.forEach(function(t){t.removeEventListener("tap",e._togglePosition)})},i.prototype._showCCPreview=function(e){var t=this,n=t.node.querySelector(".yvp-cc-preview"),i=t._model.userPreferences.closedCaptions,r=A+e,o=600;e&&(s.classList(n).remove(t._previousAlignmentClassname),s.classList(n).add(r),t._previousAlignmentClassname=r),n.style.fontSize=i.fontSize+"px",n.style.color=i.fontColor,n.style.backgroundColor=i.bgColor,n.style.fontFamily=i.fontName,s.classList(n).add(h),t._ccPreviewTimeout&&clearTimeout(t._ccPreviewTimeout),t._ccPreviewTimeout=setTimeout(function(){s.classList(n).remove(h),t._ccPreviewTimeout=null},o)},i.prototype._bindStylePresetsUI=function(){var e=this;e._ccOptionPresetsTapListener=function(t){var n=t.eventTarget||t.eventSource;if(t.currentTarget!==n&&!s.classList(n).contains("preset-separator")){var i=n.presetIndex;if(l.isNumber(i)){var r=C[i];e._model.userPreferences.closedCaptions.fontColor=r.fontColor,e._model.userPreferences.closedCaptions.hasChanged=!0,e._setBgColor(r.bgColor),e._showCCPreview(),e._eventBus.publish(d.CC.USER_STYLE_PREFERENCES_CHANGE),e._eventBus.publish(d.CC.SAVE_TO_LOCAL_STORAGE,{ccSettings:e._model.userPreferences.closedCaptions})}}},e._ccOptionPresets=e.ccMoreOptionsNode.querySelector(".preset-container"),e._ccOptionPresetsTap=new c(e._ccOptionPresets),e._ccOptionPresets.addEventListener("tap",e._ccOptionPresetsTapListener)},i.prototype._bindTabUI=function(){var e=this,t=function(e){var t=e.eventTarget||e.eventSource;e.currentTarget!==t&&(Array.prototype.forEach.call(r,function(e,i){t===e?(s.classList(e).add("tab-selected"),s.classList(n[i]).add("tab-show")):(s.classList(e).remove("tab-selected"),s.classList(n[i]).remove("tab-show"))}),e.stopPropagation())},n=e.ccMoreOptionsNode.querySelectorAll(".yvp-tabcontent"),i=e.ccMoreOptionsNode.querySelector(".yvp-tabs-nav"),r=i.querySelectorAll(".yvp-tab"),o=new c(i);i.addEventListener("tap",t),e._unbindTabUI=function(){o.destroy(),i.removeEventListener("tap",t)}},i.prototype._bindColorPickerUI=function(){var e=this,t=function(t){var n=t.eventTarget||t.eventSource;n.colorpickerType===L.Font?(e._model.userPreferences.closedCaptions.fontColor=n.val,e._model.userPreferences.closedCaptions.hasChanged=!0):n.colorpickerType===L.Background&&e._setBgColor(n.val),e._showCCPreview(),e._eventBus.publish(d.CC.USER_STYLE_PREFERENCES_CHANGE),e._eventBus.publish(d.CC.SAVE_TO_LOCAL_STORAGE,{ccSettings:e._model.userPreferences.closedCaptions})},n=new c(e._fontColorPicker);e._fontColorPicker.addEventListener("tap",t);var i=new c(e._bgColorPicker);e._bgColorPicker.addEventListener("tap",t),e._unbindColorPickerUI=function(){n.destroy(),e._fontColorPicker.removeEventListener("tap",t),i.destroy(),e._bgColorPicker.removeEventListener("tap",t)}},i.prototype._setBgColor=function(e){var t=this,n=t._model.userPreferences.closedCaptions;n.bgColor=e,"transparent"===e?n.bgOpacity=0:0===n.bgOpacity&&(n.bgOpacity=.75),t._toggleBgOpacityDDM(e)},i.prototype._toggleBgOpacityDDM=function(e){var t=this,n=t.ccMoreOptionsNode.querySelector(".bg-opacity-list"),i=n.querySelector(".yvp-ddm-selected-wrapper");"transparent"===e?s.classList(i).add("hide"):s.classList(i).remove("hide")},i.prototype._bindEffectPickerUI=function(){var e=this,t=function(t){var n=t.eventTarget||t.eventSource,i=n.parentNode.val;i&&(e._model.userPreferences.closedCaptions.fontEffect=i,e._model.userPreferences.closedCaptions.hasChanged=!0,e._showCCPreview(),e._eventBus.publish(d.CC.USER_STYLE_PREFERENCES_CHANGE),e._eventBus.publish(d.CC.SAVE_TO_LOCAL_STORAGE,{ccSettings:e._model.userPreferences.closedCaptions}))},n=new c(e._effectPicker);e._effectPicker.addEventListener("tap",t),e._unbindEffectPickerUI=function(){n.destroy(),e._effectPicker.removeEventListener("tap",t)}},i.prototype._unBindCCPreview=function(){var e=this;e._ccPreviewTimeout&&(clearTimeout(e._ccPreviewTimeout),e._ccPreviewTimeout=null)},i.prototype.showHideCurrentNode=function(e){var t=this;s.showHide(t._nodes[t._currentScreenIndex],e)},i.prototype.destroy=function(){var e=this;e._unBindUI(),e.node=null,e.ccMoreOptionsNode=null};var I=[{color:"#E7E7E7",name:"grey"},{color:"#000000",name:"black"},{color:"#FC2525",name:"red"},{color:"#29FD2F",name:"green"},{color:"#2CFEFE",name:"turquoise"},{color:"#EC369C",name:"pink"},{color:"#FEF149",name:"yellow"},{color:"#2524FB",name:"blue"}],M=[{color:"transparent",name:"none"},{color:"#eaeaea",name:"grey1"},{color:"#c7c7c7",name:"grey2"},{color:"#919191",name:"grey3"},{color:"#5b5b5b",name:"grey4"},{color:"#000000",name:"black"},{color:"#29FD2F",name:"green"},{color:"#2424FB",name:"blue"},{color:"#2CFDFD",name:"turquoise"},{color:"#EC359B",name:"pink"},{color:"#FDF048",name:"yellow"},{color:"#FC2424",name:"red"}],C=[{fontColor:"#cdcdcd",bgColor:"#060606"},{fontColor:"#282828",bgColor:"#c8c8c8"},{fontColor:"#fef149",bgColor:"#0a0908"},{fontColor:"#cdcdcd",bgColor:"transparent"},{fontColor:"#29fd2f",bgColor:"#0a0908"},{fontColor:"#ec369c",bgColor:"#0a0a09"},{fontColor:"#2cfefe",bgColor:"#0a0a09"},{fontColor:"#29fd2f",bgColor:"transparent"}],N=[{name:"none"},{name:"dropshadow"},{name:"raised"},{name:"depressed"},{name:"uniform"}],R={none:"",dropshadow:"2px 1px 1px rgba(0, 0, 0, 1)",raised:"3px 3px 4px rgba(0, 0, 0, 0.75)",depressed:"0px -4px 4px rgba(0, 0, 0, 0.54)",uniform:"-2px -2px 0 #000, -2px 2px 0 #000, -2px 0 0 #000, 2px -2px 0 #000, 2px 2px 0 #000, 2px 0 0 #000, 0 -2px 0 #000, 0 2px 0 #000"},D=[{name:"Georgia",fontFamily:"Georgia, serif"},{name:"Palatino Linotype",fontFamily:'"Palatino Linotype", "Book Antiqua", Palatino, serif'},{name:"Times New Roman",fontFamily:'"Times New Roman", Times, serif'},{name:"Arial",fontFamily:"Arial, Helvetica, sans-serif"},{name:"Arial Black",fontFamily:'"Arial Black", Gadget, sans-serif'},{name:"Comic Sans MS",fontFamily:'"Comic Sans MS", cursive, sans-serif'},{name:"Impact",fontFamily:"Impact, Charcoal, sans-serif"},{name:"Lucida Sans Unicode",fontFamily:'"Lucida Sans Unicode", "Lucida Grande", sans-serif'},{name:"Tahoma",fontFamily:"Tahoma, Geneva, sans-serif"},{name:"Trebuchet MS",fontFamily:'"Trebuchet MS", Helvetica, sans-serif'},{name:"Verdana",fontFamily:"Verdana, Geneva, sans-serif"},{name:"Courier New",fontFamily:'"Courier New", Courier, monospace'},{name:"Lucida Console",fontFamily:'"Lucida Console", Monaco, monospace'}],O=[100,75,50,25],P={wrapper:"yvp-ddm-wrapper",selectedWrapper:"yvp-ddm-selected-wrapper",selected:"yvp-ddm-selected",availability:"yvp-ddm-availability",notAvailable:"not-available",dropDownIcon:"yvp-ddm-chevron",list:"yvp-ddm-list",listItem:"yvp-ddm-item"}},{"../../../lib":"bRhrlU","../cc":"zKzgQw","../event":"YJm+dH","../states":65,"../strings":"XwKsC9","../tap":"dsc79Q","../util":"jJTEqU","../views/uiwidgets/drop-down-menu":91,"../views/uiwidgets/slider":92,"../views/uiwidgets/tooltip":94,"./fuji-cc-more-options.html":23,"./fuji-cc-options.html":24,fs:145,"insert-css":160}],26:[function(e,t,n){var i=new(e("hogan.js/lib/template").Template)(function(e,t,n){var i=this;return i.b(n=n||""),i.b("<div>"),i.b("\n"+n),i.b("    <div class='yvp-top-bar'>"),i.b("\n"+n),i.b("        <div class='yvp-ad' aria-label='"),i.b(i.v(i.d("strings.ADV_SHORT",e,t,0))),i.b("'>"),i.b(i.v(i.d("strings.ADV_SHORT",e,t,0))),i.b("</div>"),i.b("\n"+n),i.b("        <div class='yvp-content-type hide'></div>"),i.b("\n"+n),i.b("    </div>"),i.b("\n"+n),i.b("    <div class='yvp-bottom-bar'>"),i.b("\n"+n),i.b("        <div class='yvp-bottom-container'>"),i.b("\n"+n),i.b("            <div class='yvp-slider' role='slider' tabindex='0'>"),i.b("\n"+n),i.b("                <div class='yvp-slider-extension' aria-hidden='true'></div>"),i.b("\n"+n),i.b("                <div class='yvp-handle'></div>"),i.b("\n"+n),i.b("                <div class='yvp-buffer-bar'></div>"),i.b("\n"+n),i.b("                <div class='yvp-playback-bar'></div>"),i.b("\n"+n),i.b("                <div class='yvp-visual-seek'>"),i.b("\n"+n),i.b("                    <div class='yvp-vs-thumbnail'></div>"),i.b("\n"+n),i.b("                    <div class='yvp-vs-time'></div>"),i.b("\n"+n),i.b("                </div>"),i.b("\n"+n),i.b("            </div>"),i.b("\n"+n),i.b("            <div class='yvp-play-controls'>"),i.b("\n"+n),i.b("                <div class='yvp-play-btn' role='button' tabindex='0'></div>"),i.b("\n"+n),i.b("                <div class='yvp-upnext-container hide'>"),i.b("\n"+n),i.b("                    <div class='yvp-upnext-btn' role='button'>"),i.b("\n"+n),i.b("                    </div>"),i.b("\n"+n),i.b("                    <div class='yvp-upnext-playlist' role='dialog'>"),i.b("\n"+n),i.b("                        <div class='yvp-hover-elem'></div>"),i.b("\n"+n),i.b("                    </div>"),i.b("\n"+n),i.b("                </div>"),i.b("\n"+n),i.b("                <div class='yvp-time-container' tabindex='-1' aria-hidden='true'>"),i.b("\n"+n),i.b("                    <div class='yvp-current-time'></div>"),i.b("\n"+n),i.b("                    <div class='yvp-total-time'></div>"),i.b("\n"+n),i.b("                </div>"),i.b("\n"+n),i.b("            </div>"),i.b("\n"+n),i.b("            <div class='yvp-menu-controls'>"),i.b("\n"+n),i.b("                <div class='yvp-cc-btn button hide' role='button' tabindex='0' aria-label='"),i.b(i.v(i.d("strings.CC",e,t,0))),i.b("'></div>"),i.b("\n"+n),i.b("                <div class='yvp-fullscreen-btn button' role='button' tabindex='0'></div>"),i.b("\n"+n),i.b("            </div>"),i.b("\n"+n),i.b("        </div>"),i.b("\n"+n),i.b("    </div>"),i.b("\n"+n),i.b("    <div class='yvp-object-overlay'></div>"),i.b("\n"+n),i.b("</div>"),i.b("\n"),i.fl()});t.exports={render:function(){return i.render.apply(i,arguments)},r:function(){return i.r.apply(i,arguments)},ri:function(){return i.ri.apply(i,arguments)}}},{"hogan.js/lib/template":159}],27:[function(e,t,n){"use strict";function i(e,t,n){var i=this;i._eventBus=e,i._view=t,i._model=n,i._adBreaks=[],i._eventBus.subscribe(o.MEDIA_ITEM_LOADED,i._onMediaItemLoaded,i),i._eventBus.subscribe(o.PLAYBACK_PROGRESS,i._onPlaybackProgress,i),i._eventBus.subscribe(o.AD_PLAYBACK_PROGRESS,i._onPlaybackProgress,i),i._eventBus.subscribe(o.CAST.PLAYBACK_PROGRESS,i._onPlaybackProgress,i),i._eventBus.subscribe(o.Ad.PLAYING,i._onAdPlaying,i),i._eventBus.subscribe(o.Ad.ENDED,i._onAdEnded,i),i._eventBus.subscribe(o.Ad.CANCELED,i._onAdEnded,i),i._eventBus.subscribe(o.Video.ENDED,i._onVideoEnded,i),i._eventBus.subscribe(o.PLAYBACK_STARTED,i._onPlaybackStarted,i),i._eventBus.subscribe(o.AD_PLAYBACK_STARTED,i._onAdPlaybackStarted,i),i._eventBus.subscribe(o.RELATED_ITEMS_LOADED,i._onRelatedItemsLoaded,i),i._eventBus.subscribe(o.RELATED_ITEM_CLICK,i._onRelatedItemClick,i),i._eventBus.subscribe(o.FULLSCREEN_CHANGE,function(){i._updateFullscreen(i._view.getFullscreen())}),i._eventBus.subscribe(o.CONTROLS_SET_VOLUME,function(e){i._updateVolumeUI(e)}),i._eventBus.subscribe(o.CAST.VOLUME_CHANGED,function(e){i._updateVolumeUI(e)}),i._eventBus.subscribe(o.CONTROLS_SET_MUTE,function(e){i._updateVolumeUI(i._model.playbackState.volume,e)}),i._eventBus.subscribe(o.CAST.MUTE_CHANGED,function(e){i._updateVolumeUI(i._model.playbackState.volume,e)})}t.exports=i;var r=(e("fs"),e("insert-css")),o=e("../event"),a=(e("../renderers/modes"),e("../tap")),s=e("../util"),l=e("../../../lib"),c=e("../../../lib/user-agent"),p=e("../strings"),d=e("./fuji-yahoo-controls"),u=e("./fuji-playlist"),_=e("./fuji-controls.html"),v="end-screen";r('.yvp-fuji.yvp-flag-casting .yvp-bottom-bar .yvp-bottom-container .yvp-menu-controls .yvp-chromecast-btn{background-image:url("data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjIiIGhlaWdodD0iMTYiIHZpZXdCb3g9IjAgMCAyMiAxNiIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48dGl0bGU+aWNvbi1jaHJvbWVjYXN0LW9uPC90aXRsZT48ZyBmaWxsPSIjRkZGIiBmaWxsLXJ1bGU9ImV2ZW5vZGQiPjxwYXRoIGQ9Ik0yMC4wMDMgMGgtMTZjLTEuMTA1IDAtMiAuODk1LTIgMnYxLjMwM2MuNjg3LjE0IDEuMzUuMzQyIDIgLjU3MlYyaDE2djEwaC03LjI2Yy4yOC42NDQuNTEgMS4zMTQuNzAyIDJoNi41NThjMS4xMDQgMCAyLS44OTUgMi0yVjJjMC0xLjEwNS0uODk2LTItMi0yIi8+PHBhdGggZD0iTTExLjY5IDEwSDE4VjRINnYuNzNjMi4zMjcgMS4yMyA0LjI5IDMuMDU0IDUuNjkgNS4yN3pNNi40MSAxNmMtLjM5NSAwLS43NjgtLjIzMy0uOTI3LS42Mi0uODUtMi4wNzMtMi42MTYtMy42My00LjcyNi00LjE2Ni0uNTM1LS4xMzctLjg2LS42OC0uNzIzLTEuMjE2LjEzNS0uNTM1LjY4LS44NTUgMS4yMTUtLjcyNCAyLjcyLjY5MiA0Ljk5NSAyLjY5IDYuMDg0IDUuMzQ3LjIxLjUxMi0uMDM2IDEuMDk2LS41NDYgMS4zMDYtLjEyNS4wNS0uMjUzLjA3NC0uMzguMDc0Ii8+PHBhdGggZD0iTTEwLjYxNyAxNmMtLjQ0NSAwLS44NS0uMjk4LS45NjctLjc0OC0xLjEtNC4yMi00LjU1Ny03LjQwMi04LjgxLTguMTA1LS41NDUtLjA5LS45MTQtLjYwNS0uODI0LTEuMTUuMDktLjU0NS42MDQtLjkyNCAxLjE1LS44MjMgNS4wMzIuODMgOS4xMiA0LjU5IDEwLjQyIDkuNTc0LjEzOC41MzQtLjE4MiAxLjA4LS43MTcgMS4yMi0uMDg1LjAyLS4xNy4wMzItLjI1My4wMzJNMi40NDYgMTQuNDljLjAwNC4wMDQuMDA3LjAxLjAxLjAxNS4wOTcuMTcyLjE0LjM2LjEzLjU0NC0uMDEuMTgtLjA2Ny4zNi0uMTc1LjUxNy0uMDgyLjEyLS4xOTIuMjI1LS4zMjguMzAyLS4xNTguMDktLjMyNy4xMTQtLjQ5Ni4xMTRILjAydi0xLjQ2NmMtLjAwMi0uMTcuMDI1LS4zMzguMTE0LS40OTYuMjc0LS40OC44ODQtLjY0NiAxLjM2NC0uMzc0LjI1LjE0My40NC4zMi41OTMuNDZsLjE0LjEyN2MuMDg4LjA3NC4xNi4xNi4yMTYuMjU0eiIvPjwvZz48L3N2Zz4=")}.yvp-drag .yvp-handle,.yvp-drag .yvp-playback-bar{-webkit-transition:none !important;-moz-transition:none !important;-o-transition:none !important;transition:none !important}.yvp-fuji.yvp-mode-ad .yvp-top-bar .yvp-ad,.yvp-fuji.yvp-mode-vpaid .yvp-top-bar .yvp-ad{display:block}.yvp-fuji.yvp-mode-ad .yvp-bottom-bar,.yvp-fuji.yvp-mode-vpaid .yvp-bottom-bar{height:44px;background-image:-webkit-linear-gradient(-180deg, rgba(255,255,255,0) 0%, rgba(18,23,23,0.1) 25%, rgba(18,23,23,0.5) 100%);background-image:-o-linear-gradient(-180deg, rgba(255,255,255,0) 0%, rgba(18,23,23,0.1) 25%, rgba(18,23,23,0.5) 100%);background-image:linear-gradient(-180deg, rgba(255,255,255,0) 0%, rgba(18,23,23,0.1) 25%, rgba(18,23,23,0.5) 100%);}.yvp-fuji.yvp-mode-ad .yvp-bottom-bar .yvp-bottom-container,.yvp-fuji.yvp-mode-vpaid .yvp-bottom-bar .yvp-bottom-container{top:0}.yvp-fuji .yvp-top-bar{position:absolute;z-index:28;width:100%;top:0;height:0;}.yvp-fuji .yvp-top-bar .yvp-ad{display:none;position:absolute;top:14px;left:24px;color:#fff;font-family:\'Helvetica Neue\',Helvetica,Arial,sans-serif;font-size:14px}.yvp-fuji .yvp-top-bar .yvp-content-type{display:block;opacity:1;height:auto;left:0;top:15px;position:absolute;padding:5px 15px;color:#fff;text-shadow:none;text-transform:uppercase;letter-spacing:1px;font-weight:normal;font-size:11px;border-radius:0 2px 2px 0;background-color:#7300ff;background-image:-webkit-linear-gradient(20deg, #7300ff 0%, #0087ff 100%);background-image:-o-linear-gradient(20deg, #7300ff 0%, #0087ff 100%);background-image:linear-gradient(20deg, #7300ff 0%, #0087ff 100%);}.yvp-fuji .yvp-top-bar .yvp-content-type.hide{display:none}.yvp-fuji .yvp-bottom-bar{position:absolute;background-color:transparent;background-image:-webkit-linear-gradient(-180deg, rgba(255,255,255,0) 0%, rgba(18,23,23,0.2) 50%, rgba(18,23,23,0.8) 100%);background-image:-o-linear-gradient(-180deg, rgba(255,255,255,0) 0%, rgba(18,23,23,0.2) 50%, rgba(18,23,23,0.8) 100%);background-image:linear-gradient(-180deg, rgba(255,255,255,0) 0%, rgba(18,23,23,0.2) 50%, rgba(18,23,23,0.8) 100%);left:0;right:0;bottom:0;width:100%;height:100px;z-index:30;cursor:auto;}.yvp-fuji .yvp-bottom-bar .yvp-bottom-container{display:block;position:relative;top:56px;height:44px;margin:0 10px 0 10px;cursor:auto;}.yvp-fuji .yvp-bottom-bar .yvp-bottom-container .yvp-menu-controls{display:inline-block;margin-top:10px;position:absolute;right:0;top:0;float:right;opacity:1;-webkit-transition:opacity .4s linear;-moz-transition:opacity .4s linear;-o-transition:opacity .4s linear;transition:opacity .4s linear;direction:ltr;}.yvp-fuji .yvp-bottom-bar .yvp-bottom-container .yvp-menu-controls .button{height:24px;width:24px;bottom:0;background-position:center;background-repeat:no-repeat;float:none;display:inline-block;position:relative;margin-left:8px;cursor:pointer}.yvp-fuji .yvp-bottom-bar .yvp-bottom-container .yvp-menu-controls .yvp-fullscreen-btn{background-image:url("data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iODgiIGhlaWdodD0iODgiIHZpZXdCb3g9IjAgMCA4OCA4OCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48dGl0bGU+ZnVsbHNjcmVlbjwvdGl0bGU+PGcgZmlsbD0iI0ZGRiIgZmlsbC1ydWxlPSJldmVub2RkIj48cGF0aCBkPSJNNzAuNzg1IDUwLjYyMmMtLjExLTEuOTYtMS43MzYtMy40NjYtMy44NC0zLjQzaC0uMDAzYy0yIC4xMTQtMy41NDIgMS44NC0zLjQzMyAzLjgxNGwuMjEyIDYuNDEtMTEuMTA3LTEwLjcyNy01LjA2IDUuMjQ0IDExLjEwMyAxMC43MjItNi41My4wMTNjLTEuOTU3LjAzMy0zLjUzIDEuNTk4LTMuNTc4IDMuNTcyLS4wMiAxLjAwNC4zOSAxLjk5IDEuMTIyIDIuNjk2LjY2LjYzIDEuNTI0Ljk5NiAyLjQ2IDEuMDE3bDE5LjUxMi4xNzQtLjg2LTE5LjUwOE00Mi4yMjQgMzYuNzQ1bC0xMS4xMS0xMC43MyA2LjUzMi0uMDFjMS45NTgtLjAzMyAzLjUyNy0xLjU5NyAzLjU4LTMuNTY4LjAxOC0xLjAxLS4zOS0xLjk5My0xLjExNS0yLjY5Ni0uNjYzLS42MzctMS41My0xLTIuNDY4LTEuMDJsLTE5LjUxLS4xNzQuODU4IDE5LjUxYy4xMSAxLjk1OCAxLjczNiAzLjQ2MyAzLjgzNiAzLjQyNmguMDAzYy45NzItLjA1NCAxLjg2Ny0uNDg0IDIuNTE1LTEuMjEuNjUtLjczLjk3OC0xLjY2Ny45Mi0yLjZsLS4yMTItNi40MTJMMzcuMTYgNDEuOTg2bDUuMDY0LTUuMjQiLz48L2c+PC9zdmc+");background-size:100%;left:0;opacity:.8;cursor:pointer;}.yvp-fuji .yvp-bottom-bar .yvp-bottom-container .yvp-menu-controls .yvp-fullscreen-btn.fullscreen{background-image:url("data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iODgiIGhlaWdodD0iODgiIHZpZXdCb3g9IjAgMCA4OCA4OCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48dGl0bGU+ZXhpdC1mdWxsc2NyZWVuPC90aXRsZT48ZyBmaWxsPSIjRkZGIiBmaWxsLXJ1bGU9ImV2ZW5vZGQiPjxwYXRoIGQ9Ik00Ny4xOTMgNjUuNzUyYy4wNzMgMS45MTcgMS42MzYgMy40MTQgMy42OSAzLjQxNGguMDA0YzEuOTU3LS4wNzYgMy40OS0xLjczNCAzLjQxOC0zLjY2NWwtLjEtNi4yNjIgMTAuNjY2IDEwLjY2NCA1LjAzMi01LjAzNS0xMC42Ni0xMC42NiA2LjM3NS4wOThjMS45MTMgMCAzLjQ3Ni0xLjUgMy41NTYtMy40My4wMzctLjk4LS4zNDYtMS45NDgtMS4wNS0yLjY1LS42MzMtLjYyOC0xLjQ3LTEtMi4zODUtMS4wMzZsLTE5LjA1Mi0uNTA0LjUwNyAxOS4wNjZNMTcuNTQgMjIuNTdsMTAuNjY3IDEwLjY3LTYuMzgtLjEwM2MtMS45MTIgMC0zLjQ3MiAxLjUtMy41NTUgMy40MjQtLjAzNy45OS4zNDYgMS45NTQgMS4wNDIgMi42NTQuNjM3LjYzNCAxLjQ4IDEuMDAyIDIuMzkzIDEuMDM4bDE5LjA1Mi41MDMtLjUwOC0xOS4wN2MtLjA3My0xLjkxMi0xLjYzNi0zLjQxLTMuNjg3LTMuNDFoLS4wMDRjLS45NS4wMzctMS44My40NC0yLjQ3NiAxLjE0LS42NS43LS45ODQgMS42MS0uOTQ0IDIuNTIybC4xIDYuMjY2TDIyLjU3MyAxNy41NGwtNS4wMzUgNS4wMyIvPjwvZz48L3N2Zz4=");background-size:100%}.yvp-fuji .yvp-bottom-bar .yvp-bottom-container .yvp-menu-controls .yvp-fullscreen-btn:hover{opacity:1}.yvp-fuji .yvp-bottom-bar .yvp-bottom-container .yvp-menu-controls .yvp-chromecast-btn{background-image:url("data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjIiIGhlaWdodD0iMTYiIHZpZXdCb3g9IjAgMCAyMiAxNiIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48dGl0bGU+aWNvbi1jaHJvbWVjYXN0PC90aXRsZT48ZyBmaWxsPSIjRkZGIiBmaWxsLXJ1bGU9ImV2ZW5vZGQiPjxwYXRoIGQ9Ik0yMC4wMDMgMGgtMTZjLTEuMTA1IDAtMiAuODk1LTIgMnYxLjMwM2MuNjg3LjE0IDEuMzUuMzQyIDIgLjU3MlYyaDE2djEwaC03LjI2Yy4yOC42NDQuNTEgMS4zMTQuNzAyIDJoNi41NThjMS4xMDQgMCAyLS44OTUgMi0yVjJjMC0xLjEwNS0uODk2LTItMi0yTTYuNDEgMTZjLS4zOTUgMC0uNzY4LS4yMzMtLjkyNy0uNjItLjg1LTIuMDczLTIuNjE2LTMuNjMtNC43MjYtNC4xNjYtLjUzNS0uMTM3LS44Ni0uNjgtLjcyMy0xLjIxNi4xMzUtLjUzNS42OC0uODU1IDEuMjE1LS43MjQgMi43Mi42OTIgNC45OTUgMi42OSA2LjA4NCA1LjM0Ny4yMS41MTItLjAzNiAxLjA5Ni0uNTQ2IDEuMzA2LS4xMjUuMDUtLjI1My4wNzQtLjM4LjA3NCIvPjxwYXRoIGQ9Ik0xMC42MTcgMTZjLS40NDUgMC0uODUtLjI5OC0uOTY3LS43NDgtMS4xLTQuMjItNC41NTctNy40MDItOC44MS04LjEwNS0uNTQ1LS4wOS0uOTE0LS42MDUtLjgyNC0xLjE1LjA5LS41NDUuNjA0LS45MjQgMS4xNS0uODIzIDUuMDMyLjgzIDkuMTIgNC41OSAxMC40MiA5LjU3NC4xMzguNTM0LS4xODIgMS4wOC0uNzE3IDEuMjItLjA4NS4wMi0uMTcuMDMyLS4yNTMuMDMyTTIuNDQ2IDE0LjQ5Yy4wMDQuMDA0LjAwNy4wMS4wMS4wMTUuMDk3LjE3Mi4xNC4zNi4xMy41NDQtLjAxLjE4LS4wNjcuMzYtLjE3NS41MTctLjA4Mi4xMi0uMTkyLjIyNS0uMzI4LjMwMi0uMTU4LjA5LS4zMjcuMTE0LS40OTYuMTE0SC4wMnYtMS40NjZjLS4wMDItLjE3LjAyNS0uMzM4LjExNC0uNDk2LjI3NC0uNDguODg0LS42NDYgMS4zNjQtLjM3NC4yNS4xNDMuNDQuMzIuNTkzLjQ2bC4xNC4xMjdjLjA4OC4wNzQuMTYuMTYuMjE2LjI1NHoiLz48L2c+PC9zdmc+");background-size:100%;opacity:.8;}.yvp-fuji .yvp-bottom-bar .yvp-bottom-container .yvp-menu-controls .yvp-chromecast-btn:hover{opacity:1}.yvp-fuji .yvp-bottom-bar .yvp-play-controls{display:block;top:0;left:0;padding-top:10px;opacity:1;-webkit-transition:opacity .4s linear;-moz-transition:opacity .4s linear;-o-transition:opacity .4s linear;transition:opacity .4s linear;direction:ltr}.yvp-fuji .yvp-bottom-bar .yvp-play-btn{position:relative;display:inline-block;background-position:50% 50%;background-size:100%;bottom:0;left:0;margin-top:0;margin-left:-4px;width:24px;height:24px;cursor:pointer}.yvp-fuji .yvp-bottom-bar .yvp-upnext-container{bottom:0;left:0;margin-left:4px;width:24px;height:24px;display:inline-block;}.yvp-fuji .yvp-bottom-bar .yvp-upnext-container.hide{display:none}.yvp-fuji .yvp-bottom-bar .yvp-upnext-container.disabled{opacity:.25;pointer-events:none}.yvp-fuji .yvp-bottom-bar .yvp-upnext-container .yvp-upnext-btn{position:relative;background-position:50% 50%;background-size:100%;top:0;left:0;width:24px;height:24px;z-index:2}.yvp-fuji .yvp-bottom-bar .yvp-upnext-container .yvp-upnext-playlist{z-index:1}.yvp-fuji .yvp-bottom-bar .yvp-time-container{display:inline-block;position:relative;left:0;top:-8px;font-size:11px;margin-left:4px;}.yvp-fuji .yvp-bottom-bar .yvp-time-container.yvp-hide{display:none}.yvp-fuji .yvp-bottom-bar .yvp-current-time,.yvp-fuji .yvp-bottom-bar .yvp-vs-time,.yvp-fuji .yvp-bottom-bar .yvp-total-time{font-size:11px;display:inline-block;}.yvp-fuji .yvp-bottom-bar .yvp-current-time.yvp-hide,.yvp-fuji .yvp-bottom-bar .yvp-vs-time.yvp-hide,.yvp-fuji .yvp-bottom-bar .yvp-total-time.yvp-hide{display:none}.yvp-fuji .yvp-bottom-bar .yvp-current-time,.yvp-fuji .yvp-bottom-bar .yvp-total-time{position:relative;top:0;left:0 !important;margin-left:0;padding:0;width:auto;background-color:transparent;text-shadow:0 1px 1px rgba(0,0,0,0.3)}.yvp-fuji .yvp-bottom-bar .yvp-current-time,.yvp-fuji .yvp-bottom-bar .yvp-total-time{color:rgba(255,255,255,0.8);}.yvp-fuji .yvp-bottom-bar .yvp-current-time:hover,.yvp-fuji .yvp-bottom-bar .yvp-total-time:hover{color:rgba(255,255,255,0.8)}.yvp-fuji .yvp-bottom-bar .yvp-vs-time{position:absolute;bottom:3px;left:34px;width:44px;background-color:rgba(0,0,0,0.3);color:#fff;text-shadow:1px 1px 2px #000;border-radius:2px;padding:3px 0;font-size:11px;text-align:center}.yvp-fuji .yvp-bottom-bar .yvp-slider.yvp-disable{display:none;pointer-events:none}.yvp-fuji .yvp-bottom-bar .yvp-slider,.yvp-fuji .yvp-bottom-bar .yvp-handle,.yvp-fuji .yvp-bottom-bar .yvp-buffer-bar,.yvp-fuji .yvp-bottom-bar .yvp-playback-bar{position:absolute;height:4px;bottom:44px;border:0;border-radius:3px;opacity:1;direction:ltr;max-width:100%}.yvp-fuji .yvp-bottom-bar .yvp-slider.yvp-thick-slider{height:6px;bottom:43px;}.yvp-fuji .yvp-bottom-bar .yvp-slider.yvp-thick-slider .yvp-buffer-bar,.yvp-fuji .yvp-bottom-bar .yvp-slider.yvp-thick-slider .yvp-playback-bar{height:6px;bottom:43px}.yvp-fuji .yvp-bottom-bar .yvp-slider.yvp-thick-slider .yvp-handle{margin-top:-3px}.yvp-fuji .yvp-bottom-bar .yvp-playback-bar{top:0;background-color:#7300ff;background-image:-webkit-linear-gradient(to right, #7300ff 0%, #188fff 100%);background-image:-o-linear-gradient(to right, #7300ff 0%, #188fff 100%);background-image:linear-gradient(to right, #7300ff 0%, #188fff 100%);opacity:.8}.yvp-fuji .yvp-bottom-bar .yvp-slider{width:100%;position:absolute;background:rgba(255,255,255,0.2);border-radius:3px;border-color:transparent;cursor:pointer;}.yvp-fuji .yvp-bottom-bar .yvp-slider .yvp-slider-extension{position:absolute;width:100%;height:16px;top:-6px}.yvp-fuji .yvp-bottom-bar .yvp-buffer-bar{top:0;background:rgba(255,255,255,0.2)}.yvp-fuji .yvp-bottom-bar .yvp-visual-seek{display:none;position:absolute;top:-71px;width:112px;height:63px;margin-left:-57px;background-color:#000;border:0;z-index:2;pointer-events:none;text-align:center}.yvp-fuji .yvp-bottom-bar .yvp-handle{position:absolute;top:0;width:12px;height:12px;border:0;border-radius:50%;background-color:#fff;margin-top:-4px;margin-left:-6px;background-image:none;display:none;z-index:3;}.yvp-fuji .yvp-bottom-bar .yvp-handle.active{display:block}.yvp-fuji .yvp-bottom-bar .yvp-ad-break{background-color:rgba(204,204,204,0.5);position:absolute;top:0;width:3px;height:100%;}.yvp-fuji .yvp-bottom-bar .yvp-ad-break:hover{background-color:rgba(255,255,255,0.5)}.yvp-fuji .yvp-bottom-bar .yvp-ad-break.occurred{background-color:rgba(0,0,0,0.25)}.yvp-fuji .yvp-bottom-bar .yvp-fullscreen-btn-replacement{width:9px;height:30px;position:relative;float:right}.yvp-fuji .yvp-bottom-bar.yvp-bottom-upnext{height:210px;-webkit-transition:none;-moz-transition:none;-o-transition:none;transition:none;}.yvp-fuji .yvp-bottom-bar.yvp-bottom-upnext .yvp-bottom-container{top:166px}.yvp-fuji .yvp-bottom-bar.yvp-drag .yvp-play-controls,.yvp-fuji .yvp-bottom-bar.yvp-drag .yvp-menu-controls{opacity:0;-webkit-transition:opacity .4s linear;-moz-transition:opacity .4s linear;-o-transition:opacity .4s linear;transition:opacity .4s linear}.yvp-fuji.yvp-ie9 .yvp-playback-bar{filter:progid:DXImageTransform.Microsoft.gradient(gradientType:1, startColorStr=#AA7300FF, endColorStr=#FF0087FF)}.yvp-fuji.yvp-state-video .yvp-bottom-bar .yvp-play-btn,.yvp-fuji.yvp-flag-casting .yvp-bottom-bar .yvp-play-btn{background-image:url("data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjQiIGhlaWdodD0iMjQiIHZpZXdCb3g9IjAgMCAyNCAyNCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48cGF0aCBkPSJNNi43ODYgMTguOTkzSDYuNzRjLS40MTQgMC0uNzUtLjM0NC0uNzUtLjc1VjUuNzczYzAtLjQxNS4zMzMtLjc1Ljc1LS43NS4xNjYgMCAuMzIuMDU0LjQ0My4xNDZsMTAuNTEgNi4wNjdjLjM2LjIxLjQ5LjY2Ny4yOCAxLjAyOC0uMDU0LjA5My0uMTI0LjE3LS4yMDYuMjMtLjAzNi4wMzItLjA3Ni4wNjItLjEyLjA4OGwtMTAuNDg1IDYuM2MtLjExOC4wNy0uMjQ3LjEwNy0uMzc2LjExeiIgZmlsbD0iI0ZGRiIgZmlsbC1ydWxlPSJldmVub2RkIi8+PC9zdmc+");opacity:.8;}.yvp-fuji.yvp-state-video .yvp-bottom-bar .yvp-play-btn:hover,.yvp-fuji.yvp-flag-casting .yvp-bottom-bar .yvp-play-btn:hover{opacity:1}.yvp-fuji.yvp-state-video.yvp-flag-playing .yvp-bottom-bar .yvp-play-btn,.yvp-fuji.yvp-flag-casting.yvp-cast-playing .yvp-bottom-bar .yvp-play-btn{background-image:url("data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjQiIGhlaWdodD0iMjQiIHZpZXdCb3g9IjAgMCAyNCAyNCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48ZyBmaWxsPSIjRkZGIiBmaWxsLXJ1bGU9ImV2ZW5vZGQiPjxwYXRoIGQ9Ik0xNC41IDYuMjQyYzAtLjY4Ni41NTUtMS4yNDIgMS4yNS0xLjI0Mi42OSAwIDEuMjUuNTY2IDEuMjUgMS4yNDJ2MTEuNTE2YzAgLjY4Ni0uNTU1IDEuMjQyLTEuMjUgMS4yNDItLjY5IDAtMS4yNS0uNTY2LTEuMjUtMS4yNDJWNi4yNDJ6TTcgNi4yNDJDNyA1LjU1NiA3LjU1NSA1IDguMjUgNWMuNjkgMCAxLjI1LjU2NiAxLjI1IDEuMjQydjExLjUxNkM5LjUgMTguNDQ0IDguOTQ1IDE5IDguMjUgMTkgNy41NiAxOSA3IDE4LjQzNCA3IDE3Ljc1OFY2LjI0MnoiLz48L2c+PC9zdmc+");opacity:.8;}.yvp-fuji.yvp-state-video.yvp-flag-playing .yvp-bottom-bar .yvp-play-btn:hover,.yvp-fuji.yvp-flag-casting.yvp-cast-playing .yvp-bottom-bar .yvp-play-btn:hover{opacity:1}.yvp-fuji.yvp-flag-playing.yvp-state-end-screen .yvp-bottom-bar .yvp-play-btn{background-image:url("data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjQiIGhlaWdodD0iMjQiIHZpZXdCb3g9IjAgMCAyNCAyNCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48ZyBmaWxsPSIjRkZGIiBmaWxsLXJ1bGU9ImV2ZW5vZGQiPjxwYXRoIGQ9Ik0xNi44NyAxNS41NDVjLS4xMS0uMTk3LS4yNzQtLjM0NS0uNDctLjQyNS0uMjA0LS4wOS0uNDUtLjA5LS42MS0uMDQtLjEwNy4wMjUtLjIwNS4wNjgtLjMyNy4xNDctLjA3Mi4wNS0uMTcyLjE1LS4yMTYuMjA0LS43NzYgMS4wMTgtMS45OTcgMS42MjctMy4yNjYgMS42MjctMi4yNDQgMC00LjA3LTEuODItNC4wNy00LjA1MyAwLTIuMTMzIDEuNzg3LTMuOTQ3IDMuOTgtNC4wNDNsLjUyLS4wMTNWN2wtLjU1Mi4wMTNDOC41NzMgNy4xMyA2IDkuNzYgNiAxMy4wMDNjMCAzLjMxMiAyLjY5MyA2LjAwNCA2LjAwNSA2LjAwNCAxLjg2NCAwIDMuNTktLjg0NSA0LjctMi4yOGwuMDctLjA5Yy4wMy0uMDQyLjA1My0uMDgyLjA3LS4xMDguMTA0LS4xNjguMTU1LS4zMzQuMTU1LS41MSAwLS4xNi0uMDQzLS4zMi0uMTMtLjQ3NSIvPjxwYXRoIGQ9Ik0xMi4zMTIgMTEuMDA4Yy0uMTcyIDAtLjMxMi0uMTUtLjMxMi0uMzIzVjUuMzIzYzAtLjE4LjEzOC0uMzIzLjMxMi0uMzIzLjA2OCAwIC4xMzIuMDI0LjE4NC4wNjNsNC4zNjUgMi42MWMuMTUyLjA5LjIwNC4yODYuMTE4LjQ0LS4wMjIuMDQtLjA1Mi4wNzUtLjA4Ni4xLS4wMTUuMDE0LS4wMzIuMDI3LS4wNS4wMzhsLTQuMzU1IDIuNzFjLS4wNS4wMy0uMTAzLjA0Ni0uMTU2LjA0OGgtLjAxOHoiLz48L2c+PC9zdmc+");opacity:.8;background-size:95%;}.yvp-fuji.yvp-flag-playing.yvp-state-end-screen .yvp-bottom-bar .yvp-play-btn:hover{opacity:1}.yvp-fuji.yvp-state-video .yvp-bottom-bar .yvp-upnext-container .yvp-upnext-btn{background-image:url("data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iODgiIGhlaWdodD0iODgiIHZpZXdCb3g9IjAgMCA4OCA4OCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48dGl0bGU+dXBuZXh0PC90aXRsZT48ZyBmaWxsPSIjRkZGIiBmaWxsLXJ1bGU9ImV2ZW5vZGQiPjxwYXRoIGQ9Ik0yMi4wOTIgNjYuMDIzbC0uMTMuMDAyYy0yLjAyNCAwLTMuNjY1LTEuNjQ1LTMuNjY1LTMuNjc2VjI1LjdjMC0xLjU1NS45NjYtMi44ODQgMi4zMjYtMy40MiAxLjA1OC0uNDY2IDIuMzE0LS40NCAzLjM4Ny4xOGwzMS42MDggMTguMjVjLjQ2LjI2NS44NDIuNjEzIDEuMTM4IDEuMDE1LjEuMTMyLjE5NS4yNzIuMjguNDIgMS4wNjMgMS44NC40MzQgNC4xOTUtMS40MTcgNS4yNjRMMjQuMjYgNjUuNTFjLS42ODMuMzk1LTEuNDM4LjU1Ny0yLjE3LjUxek02Mi4zMzMgMjIuMDA0YzAtMi4wMjcgMS42NDYtMy42NyAzLjY2Ny0zLjY3IDIuMDI1IDAgMy42NjcgMS42NSAzLjY2NyAzLjY3djQzLjk5MmMwIDIuMDI3LTEuNjQ2IDMuNjctMy42NjcgMy42Ny0yLjAyNSAwLTMuNjY3LTEuNjUtMy42NjctMy42N1YyMi4wMDR6Ii8+PC9nPjwvc3ZnPg==");opacity:.8;display:inline-block;}.yvp-fuji.yvp-state-video .yvp-bottom-bar .yvp-upnext-container .yvp-upnext-btn:hover{opacity:1}.yvp-fuji.yvp-state-start-screen .yvp-top-bar .yvp-content-type{display:none}.yvp-fuji.yvp-state-end-screen .yvp-bottom-bar .yvp-visual-seek{display:none !important}.yvp-fuji.yvp-state-end-screen .yvp-bottom-bar .yvp-slider{pointer-events:none}.yvp-fuji.yvp-browser-mobile .yvp-bottom-bar .yvp-play-controls{padding-top:7px}.yvp-fuji.yvp-browser-mobile .yvp-bottom-bar .yvp-play-btn{opacity:1;width:30px;height:30px}.yvp-fuji.yvp-browser-mobile .yvp-bottom-bar .yvp-upnext-container .yvp-upnext-btn{opacity:1}.yvp-fuji.yvp-browser-mobile .yvp-bottom-bar .yvp-time-container{top:-10px}.yvp-fuji.yvp-browser-mobile .yvp-bottom-bar .yvp-current-time,.yvp-fuji.yvp-browser-mobile .yvp-bottom-bar .yvp-vs-time,.yvp-fuji.yvp-browser-mobile .yvp-bottom-bar .yvp-total-time{font-size:14px}.yvp-fuji.yvp-browser-mobile .yvp-bottom-bar .yvp-handle{width:14px;height:14px;margin-top:-5px;display:block}.yvp-fuji.yvp-browser-mobile .yvp-bottom-bar .yvp-bottom-container .yvp-menu-controls{margin-top:7px;}.yvp-fuji.yvp-browser-mobile .yvp-bottom-bar .yvp-bottom-container .yvp-menu-controls .button{width:30px;height:30px}.yvp-fuji.yvp-browser-mobile .yvp-bottom-bar .yvp-bottom-container .yvp-menu-controls .yvp-fullscreen-btn{opacity:1;margin-bottom:0;margin-right:0}.yvp-state-video .yvp-bottom-bar{display:block}.yvp-state-start-screen .yvp-bottom-bar,.yvp-state-error .yvp-bottom-bar,.yvp-state-end-screen .yvp-bottom-bar,.yvp-state-loading .yvp-bottom-bar{display:none}.yvp-mode-ad .yvp-bottom-bar .yvp-slider,.yvp-mode-vpaid .yvp-bottom-bar .yvp-slider,.yvp-mode-ad .yvp-bottom-bar .yvp-handle,.yvp-mode-vpaid .yvp-bottom-bar .yvp-handle,.yvp-mode-ad .yvp-bottom-bar .yvp-buffer-bar,.yvp-mode-vpaid .yvp-bottom-bar .yvp-buffer-bar,.yvp-mode-ad .yvp-bottom-bar .yvp-playback-bar,.yvp-mode-vpaid .yvp-bottom-bar .yvp-playback-bar{pointer-events:none;height:4px !important;bottom:0 !important;display:none}.yvp-mode-ad .yvp-bottom-bar .yvp-handle,.yvp-mode-vpaid .yvp-bottom-bar .yvp-handle,.yvp-mode-ad .yvp-bottom-bar .yvp-buffer-bar,.yvp-mode-vpaid .yvp-bottom-bar .yvp-buffer-bar{display:none}.yvp-mode-ad .yvp-bottom-bar .yvp-content-type,.yvp-mode-vpaid .yvp-bottom-bar .yvp-content-type{display:block}.yvp-mode-ad .yvp-bottom-bar .yvp-ad-break,.yvp-mode-vpaid .yvp-bottom-bar .yvp-ad-break{display:none}.yvp-cast-overlay{position:absolute;top:0;right:0;bottom:0;left:0;background-color:#000;z-index:50;display:none;color:#fff;background-repeat:no-repeat;background-size:cover;}.yvp-cast-overlay:after{content:\'\';background-color:rgba(0,0,0,0.85);display:block;width:100%;height:100%;position:absolute;top:0;z-index:-1}.yvp-cast-overlay > div{position:relative;height:calc(100% - 70px);}.yvp-cast-overlay > div .cast-overlay-header{height:25%;display:flex;flex-direction:column;justify-content:center;border-bottom:1px solid #777}.yvp-cast-overlay > div .cast-device-info{margin-left:50px;}.yvp-cast-overlay > div .cast-device-info:before{content:\'\';float:left;background-image:url("data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjIiIGhlaWdodD0iMTYiIHZpZXdCb3g9IjAgMCAyMiAxNiIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48dGl0bGU+aWNvbi1jaHJvbWVjYXN0LW9uPC90aXRsZT48ZyBmaWxsPSIjRkZGIiBmaWxsLXJ1bGU9ImV2ZW5vZGQiPjxwYXRoIGQ9Ik0yMC4wMDMgMGgtMTZjLTEuMTA1IDAtMiAuODk1LTIgMnYxLjMwM2MuNjg3LjE0IDEuMzUuMzQyIDIgLjU3MlYyaDE2djEwaC03LjI2Yy4yOC42NDQuNTEgMS4zMTQuNzAyIDJoNi41NThjMS4xMDQgMCAyLS44OTUgMi0yVjJjMC0xLjEwNS0uODk2LTItMi0yIi8+PHBhdGggZD0iTTExLjY5IDEwSDE4VjRINnYuNzNjMi4zMjcgMS4yMyA0LjI5IDMuMDU0IDUuNjkgNS4yN3pNNi40MSAxNmMtLjM5NSAwLS43NjgtLjIzMy0uOTI3LS42Mi0uODUtMi4wNzMtMi42MTYtMy42My00LjcyNi00LjE2Ni0uNTM1LS4xMzctLjg2LS42OC0uNzIzLTEuMjE2LjEzNS0uNTM1LjY4LS44NTUgMS4yMTUtLjcyNCAyLjcyLjY5MiA0Ljk5NSAyLjY5IDYuMDg0IDUuMzQ3LjIxLjUxMi0uMDM2IDEuMDk2LS41NDYgMS4zMDYtLjEyNS4wNS0uMjUzLjA3NC0uMzguMDc0Ii8+PHBhdGggZD0iTTEwLjYxNyAxNmMtLjQ0NSAwLS44NS0uMjk4LS45NjctLjc0OC0xLjEtNC4yMi00LjU1Ny03LjQwMi04LjgxLTguMTA1LS41NDUtLjA5LS45MTQtLjYwNS0uODI0LTEuMTUuMDktLjU0NS42MDQtLjkyNCAxLjE1LS44MjMgNS4wMzIuODMgOS4xMiA0LjU5IDEwLjQyIDkuNTc0LjEzOC41MzQtLjE4MiAxLjA4LS43MTcgMS4yMi0uMDg1LjAyLS4xNy4wMzItLjI1My4wMzJNMi40NDYgMTQuNDljLjAwNC4wMDQuMDA3LjAxLjAxLjAxNS4wOTcuMTcyLjE0LjM2LjEzLjU0NC0uMDEuMTgtLjA2Ny4zNi0uMTc1LjUxNy0uMDgyLjEyLS4xOTIuMjI1LS4zMjguMzAyLS4xNTguMDktLjMyNy4xMTQtLjQ5Ni4xMTRILjAydi0xLjQ2NmMtLjAwMi0uMTcuMDI1LS4zMzguMTE0LS40OTYuMjc0LS40OC44ODQtLjY0NiAxLjM2NC0uMzc0LjI1LjE0My40NC4zMi41OTMuNDZsLjE0LjEyN2MuMDg4LjA3NC4xNi4xNi4yMTYuMjU0eiIvPjwvZz48L3N2Zz4=");background-repeat:no-repeat;background-size:90%;background-position:50%;margin-right:10px;width:36px;height:36px}.yvp-cast-overlay > div .cast-device-name{font-size:.9em;position:relative;top:3px}.yvp-cast-overlay > div .cast-device-type{font-size:.7em;color:#999}.yvp-cast-overlay > div .cast-overlay-content{position:relative;height:50%;left:0;right:0;cursor:pointer;opacity:.6;display:flex;justify-content:center;align-items:center;}.yvp-cast-overlay > div .cast-overlay-content:hover{opacity:1}.yvp-cast-overlay > div .cast-overlay-content:after{content:\'\';display:block;background-image:url("data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjQiIGhlaWdodD0iMjQiIHZpZXdCb3g9IjAgMCAyNCAyNCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48cGF0aCBkPSJNNi43ODYgMTguOTkzSDYuNzRjLS40MTQgMC0uNzUtLjM0NC0uNzUtLjc1VjUuNzczYzAtLjQxNS4zMzMtLjc1Ljc1LS43NS4xNjYgMCAuMzIuMDU0LjQ0My4xNDZsMTAuNTEgNi4wNjdjLjM2LjIxLjQ5LjY2Ny4yOCAxLjAyOC0uMDU0LjA5My0uMTI0LjE3LS4yMDYuMjMtLjAzNi4wMzItLjA3Ni4wNjItLjEyLjA4OGwtMTAuNDg1IDYuM2MtLjExOC4wNy0uMjQ3LjEwNy0uMzc2LjExeiIgZmlsbD0iI0ZGRiIgZmlsbC1ydWxlPSJldmVub2RkIi8+PC9zdmc+");background-repeat:no-repeat;background-size:80%;background-position:50%;width:10%;height:0;padding-bottom:10%;}.yvp-cast-playing .yvp-cast-overlay > div .cast-overlay-content:after{background-image:url("data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjQiIGhlaWdodD0iMjQiIHZpZXdCb3g9IjAgMCAyNCAyNCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48ZyBmaWxsPSIjRkZGIiBmaWxsLXJ1bGU9ImV2ZW5vZGQiPjxwYXRoIGQ9Ik0xNC41IDYuMjQyYzAtLjY4Ni41NTUtMS4yNDIgMS4yNS0xLjI0Mi42OSAwIDEuMjUuNTY2IDEuMjUgMS4yNDJ2MTEuNTE2YzAgLjY4Ni0uNTU1IDEuMjQyLTEuMjUgMS4yNDItLjY5IDAtMS4yNS0uNTY2LTEuMjUtMS4yNDJWNi4yNDJ6TTcgNi4yNDJDNyA1LjU1NiA3LjU1NSA1IDguMjUgNWMuNjkgMCAxLjI1LjU2NiAxLjI1IDEuMjQydjExLjUxNkM5LjUgMTguNDQ0IDguOTQ1IDE5IDguMjUgMTkgNy41NiAxOSA3IDE4LjQzNCA3IDE3Ljc1OFY2LjI0MnoiLz48L2c+PC9zdmc+")}.yvp-cast-overlay > div .cast-overlay-footer{height:25%;text-align:center;border-top:1px solid #777}.yvp-cast-overlay > div .cast-disconnect-btn{position:relative;top:8px;cursor:pointer;padding:2px 5px;color:#999;}.yvp-cast-overlay > div .cast-disconnect-btn:hover{color:#fff}.yvp-flag-casting .yvp-cast-overlay{display:block}.yvp-flag-casting .yvp-bottom-bar{z-index:75;opacity:1 !important;-webkit-transition:none !important;-moz-transition:none !important;-o-transition:none !important;transition:none !important;display:block !important}body.yvp-lightbox{overflow:hidden !important;}body.yvp-lightbox .yvp-lightbox-ancestor{z-index:2147483647 !important;}body.yvp-lightbox .yvp-lightbox-ancestor .yvp-content.yvp-browser-desktop{position:fixed;top:0;left:0;width:100% !important;height:100% !important;z-index:2147483647}.yvp-fuji.yvp-stream .yvp-bottom-bar{height:60px;}.yvp-fuji.yvp-stream .yvp-bottom-bar .yvp-bottom-container{top:26px;margin:0 8px;}.yvp-fuji.yvp-stream .yvp-bottom-bar .yvp-bottom-container .yvp-menu-controls{margin-top:0;}.yvp-fuji.yvp-stream .yvp-bottom-bar .yvp-bottom-container .yvp-menu-controls .yvp-setting-btn,.yvp-fuji.yvp-stream .yvp-bottom-bar .yvp-bottom-container .yvp-menu-controls .yvp-cc-btn{display:none}.yvp-fuji.yvp-stream .yvp-bottom-bar .yvp-play-controls{padding-top:0}.yvp-fuji.yvp-stream .yvp-bottom-bar .yvp-visual-seek{display:none !important}.yvp-fuji.yvp-stream .yvp-bottom-bar .yvp-slider{display:none;pointer-events:none}.yvp-fuji.yvp-stream .yvp-bottom-bar .yvp-upnext-container,.yvp-fuji.yvp-stream .yvp-bottom-bar .yvp-time-container{display:none}.yvp-fuji.yvp-ministream .yvp-bottom-bar{height:60px;}.yvp-fuji.yvp-ministream .yvp-bottom-bar .yvp-volume-bar-container{bottom:85px;padding:6px 0;width:20px;left:2px;}.yvp-fuji.yvp-ministream .yvp-bottom-bar .yvp-volume-bar-container:after{left:5px}.yvp-fuji.yvp-ministream .yvp-bottom-bar .yvp-volume-level{margin-left:7px}.yvp-fuji.yvp-ministream .yvp-bottom-bar .yvp-bottom-container{top:35px;margin:0 4px;}.yvp-fuji.yvp-ministream .yvp-bottom-bar .yvp-bottom-container .yvp-menu-controls{margin-top:0;}.yvp-fuji.yvp-ministream .yvp-bottom-bar .yvp-bottom-container .yvp-menu-controls .button{margin-left:0}.yvp-fuji.yvp-ministream .yvp-bottom-bar .yvp-bottom-container .yvp-menu-controls .yvp-setting-btn,.yvp-fuji.yvp-ministream .yvp-bottom-bar .yvp-bottom-container .yvp-menu-controls .yvp-cc-btn{display:none}.yvp-fuji.yvp-ministream .yvp-bottom-bar .yvp-play-controls{padding-top:0}.yvp-fuji.yvp-ministream .yvp-bottom-bar .yvp-visual-seek{display:none !important}.yvp-fuji.yvp-ministream .yvp-bottom-bar .yvp-slider{display:none;pointer-events:none}.yvp-fuji.yvp-ministream .yvp-bottom-bar .yvp-upnext-container,.yvp-fuji.yvp-ministream .yvp-bottom-bar .yvp-time-container{display:none}.yvp-fuji.yvp-ministream .yvp-start-screen .yvp-start-screen-button{width:50px;height:50px;margin:-25px 0 0 -25px}.yvp-fuji.yvp-content.yvp-ministream .yvp-main .yvp-mute-indicator{top:66%;right:0}.yvp-fuji.yvp-ministream.yvp-state-end-screen .yvp-bottom-bar{height:30px;}.yvp-fuji.yvp-ministream.yvp-state-end-screen .yvp-bottom-bar .yvp-bottom-container{top:5px}.yvp-fuji.yvp-state-end-screen .yvp-bottom-bar{display:block}'),
i.prototype.create=function(){var e,t=this;l.isFunction(d)?(t._desktopControls=new d(t._eventBus,t._view,t._model),e=t._desktopControls.create()):e=[s.render(_).querySelector(".yvp-bottom-bar"),s.render(_,{strings:p.i18n}).querySelector(".yvp-top-bar")],t._bottomBar=e[0],t._slider=t._bottomBar.querySelector(".yvp-slider"),t._bufferBar=t._bottomBar.querySelector(".yvp-buffer-bar"),t._timeDisplay=t._bottomBar.querySelector(".yvp-time-container"),t._currentTimeLabel=t._bottomBar.querySelector(".yvp-current-time"),t._totalTimeLabel=t._bottomBar.querySelector(".yvp-total-time"),t._handle=t._bottomBar.querySelector(".yvp-handle"),t._playbackBar=t._bottomBar.querySelector(".yvp-playback-bar"),t._playBtn=t._bottomBar.querySelector(".yvp-play-btn"),t._upNextBtn=t._bottomBar.querySelector(".yvp-upnext-btn"),t._upNextPlist=t._bottomBar.querySelector(".yvp-upnext-playlist"),t._upNextContainer=t._bottomBar.querySelector(".yvp-upnext-container"),t._seekBar=t._bottomBar.querySelector(".yvp-seek"),t._visualSeekContainer=t._bottomBar.querySelector(".yvp-visual-seek"),t._fullscreenBtn=t._bottomBar.querySelector(".yvp-fullscreen-btn"),t._volumeBtn=t._bottomBar.querySelector(".yvp-volume-btn"),t._volumeBarContainer=t._bottomBar.querySelector(".yvp-volume-bar-container"),t._volumeIndicator=t._bottomBar.querySelector(".yvp-volume-level"),t._volumeBar=t._bottomBar.querySelector(".yvp-volume-bar"),t._volumeValue=t._bottomBar.querySelector(".yvp-volume-value"),t._volumeHandle=t._bottomBar.querySelector(".yvp-volume-handle"),t._topBar=e[1],t._contentType=t._topBar&&t._topBar.querySelector(".yvp-content-type"),s.showUpNext(t._model)&&(t._fujiPlaylist=new u(t._eventBus,t._model),t._playlistNode=t._fujiPlaylist.create("upnext"),t._upNextPlist.appendChild(t._playlistNode),s.classList(t._upNextContainer).remove("hide"),c.mobile||(t._upNextContainer.addEventListener("mouseover",function(e){s.classList(t._bottomBar).contains("yvp-bottom-upnext")||(s.classList(t._bottomBar).add("yvp-bottom-upnext"),t._eventBus.publish(o.API.UI_INTERACT,{srcElement:"ctrl-next-hover"}))}),t._upNextContainer.addEventListener("mouseout",function(){setTimeout(function(){window.getComputedStyle(t._playlistNode).zIndex<0&&s.classList(t._bottomBar).remove("yvp-bottom-upnext")},100)})));var n=t._fullscreenBtn&&c.ie&&c.ie<=10&&s.isIFrame();if(n=n||!t._model.ui.showFullscreen){var i=document.createElement("div");s.classList(i).add("yvp-fullscreen-btn-replacement"),t._fullscreenBtn.parentNode.insertBefore(i,t._fullscreenBtn),t._fullscreenBtn.parentNode.removeChild(t._fullscreenBtn),t._fullscreenBtn=null}return t._initAriaProperties(),t._bindEvents(),e},i.prototype._onAdPlaying=function(){var e=this;e._hideVisualSeek(),e._sliderRemoveEventListener(),e._enableUpNextButton(!1)},i.prototype._onAdPlaybackStarted=function(){var e=this;e._syncVolumeUI(),e._enableUpNextButton(!1),s.classList(e._contentType).add("hide")},i.prototype._onAdEnded=function(){var e=this;e._sliderAddEventListener()},i.prototype._onPlaybackStarted=function(){var e=this;e._isLive?e._setLiveMode():e._setVodMode(),e._syncVolumeUI(),e._upNEnabled||e._enableUpNextButton(!0)},i.prototype._setLiveMode=function(){var e=this;s.classList(e._slider).add("yvp-disable"),s.classList(e._timeDisplay).add("yvp-hide");var t=e._model.ui.contentTypeLabel;l.isString(t)&&""!==t?(e._contentType.innerHTML=t,e._contentType.setAttribute("aria-label",t),s.classList(e._contentType).remove("hide")):e._liveState&&"live"===e._liveState&&(e._contentType.innerHTML=p.i18n.LIVE,e._contentType.setAttribute("aria-label",p.i18n.LIVE),s.classList(e._contentType).remove("hide"))},i.prototype._setVodMode=function(){var e=this;s.classList(e._slider).remove("yvp-disable"),s.classList(e._timeDisplay).remove("yvp-hide")},i.prototype._onVideoEnded=function(){var e=this;e._enableUpNextButton(!1)},i.prototype._bindEvents=function(){var e=this;e._playTap=new a(e._playBtn),e._onPlayTap=function(t){t.stopPropagation();var n=e._view.getCurrentViewState(),i=e._model.playlist.getCurrentItem().id,r=e._model.playbackState.paused?"ctrl-play-btn":"ctrl-pause-btn";n===v?(e._eventBus.publish(o.RELATED_ITEM_CLICK,i,-1,!1,!1),e._resetTimeLabels()):(e._eventBus.publish(o.API.UI_INTERACT,{srcElement:r}),e._eventBus.publish(o.TOGGLE_PLAY_PAUSE))},e._playBtn.addEventListener("tap",e._onPlayTap),e._fullscreenBtn&&(e._fullscreenTap=new a(e._fullscreenBtn),e._onFullscreenTap=function(t){t.stopPropagation(),e._view.toggleFullscreen()},e._fullscreenBtn.addEventListener("tap",e._onFullscreenTap)),e._bottomBarClick=new a(e._bottomBar),e._onBottomBarClick=function(e){e.stopPropagation()},e._bottomBar.addEventListener("tap",e._onBottomBarClick),e._sliderAddEventListener(),e._bindVolume()},i.prototype._onRelatedItemClick=function(e,t,n){var i=this;i._resetTimeLabels()},i.prototype._onRelatedItemsLoaded=function(e,t,n){var i=this;i._onUpNextBtnTap||(i._onUpNextBtnTap=function(){return c.mobile?(i._upNextPlist.style.display="block",void(s.classList(i._upNextPlist).contains("open")?(s.classList(i._bottomBar).remove("yvp-bottom-upnext"),s.classList(i._upNextPlist).remove("open")):(s.classList(i._upNextPlist).add("open"),i._upNextPlist.style.display="block",s.classList(i._bottomBar).add("yvp-bottom-upnext")))):void i._fujiPlaylist.upNextBtnTapHandler()},i._upNextBtnTap=new a(i._upNextBtn),i._upNextBtn.addEventListener("tap",i._onUpNextBtnTap)),n&&n.length>2?i._fujiPlaylist.renderPlaylist(t,n):e&&i._enableUpNextButton(!1)},i.prototype._enableUpNextButton=function(e){var t=this;t._upNextContainer&&s.showUpNext(t._model)&&(e&&!t._model.playlist.getCurrentItem().isLive()?s.classList(t._upNextContainer).remove("disabled"):s.classList(t._upNextContainer).add("disabled"),t._upNEnabled=e)},i.prototype._resetTimeLabels=function(){var e=this;e._currentTimeLabel.innerHTML="0:00",e._totalTimeLabel.innerHTML="/ 0:00"},i.prototype._updateFullscreen=function(e){var t=this;t._fullscreenBtn&&(e?(s.classList(t._fullscreenBtn).add("fullscreen"),t._updateFullscreenTooltip(p.i18n.EXIT_FULLSCREEN)):(s.classList(t._fullscreenBtn).remove("fullscreen"),t._updateFullscreenTooltip(p.i18n.FULLSCREEN_SPACE))),t._fullScreenStreamModeUpdate(e),t.syncAriaState()},i.prototype._updateFullscreenTooltip=function(e){var t=this;if(t._fullscreenBtn){var n=t._fullscreenBtn.querySelector(".yvp-tooltip-content");n&&(n.innerHTML=e)}},i.prototype._sliderAddEventListener=function(){var e=this;e._seekBar&&(e._seekTap=new a(e._seekBar),e._onSeekTap=function(t){t.stopPropagation();var n=(t.clientX||t.pageX)-e._seekBar.getBoundingClientRect().left,i=n/e._seekBar.clientWidth,r=Math.min(i*e._duration,Math.max(e._duration-1,0));e._view.seek(r)},e._seekBar.addEventListener("tap",e._onSeekTap)),e._onSliderMove=function(t){e._eventBus.publish(o.SEEK_BAR_MOUSEOVER,t),s.classList(e._handle).add("active"),s.classList(e._slider).add("yvp-thick-slider"),e._updateVisualSeek(t),e._preventTouchDefault(t)},e._onSliderLeave=function(t){e._eventBus.publish(o.SEEK_BAR_MOUSEOUT,t),s.classList(e._handle).remove("active"),s.classList(e._slider).remove("yvp-thick-slider"),e._hideVisualSeek(t),e._preventTouchDefault(t)},e._bindScrollOverEvents(e._slider,e._onSliderMove,e._onSliderLeave),e._onSeekDown=function(t){s.classList(e._handle).add("active"),e._preventTouchDefault(t),e._seeking=!0,e._eventBus.publish(o.CONTROLS_SEEK_START);var n=e._getSeekFraction(t),i=Math.min(n*e._duration,Math.max(e._duration-1,0));e._eventBus.publish(o.CTRL_SEEK,Math.round(i)),e._onSeekMove(t)},e._onSeekMove=function(t){if(e._seeking){e._preventTouchDefault(t),s.classList(e._bottomBar).add("yvp-drag"),s.classList(e._handle).add("active"),s.classList(e._slider).add("yvp-thick-slider"),e._updateVisualSeek(t);var n=e._getSeekFraction(t),i=Math.min(n*e._duration,Math.max(e._duration-1,0));e._playbackBar.setAttribute("style","width: "+100*n+"%;"),e._bufferBar.setAttribute("style","width: 0%;"),e._handle.setAttribute("style","left: "+100*n+"%;"),e._eventBus.publish(o.CONTROLS_SEEKING,i)}},e._onSeekUp=function(t){e._seeking&&(s.classList(e._bottomBar).remove("yvp-drag"),s.classList(e._handle).remove("active"),s.classList(e._slider).remove("yvp-thick-slider"),e._hideVisualSeek(t),e._preventTouchDefault(t),e._seeking=!1,e._eventBus.publish(o.CONTROLS_SEEK_END))},e._bindDragEvents(e._slider,e._onSeekDown,e._onSeekMove,e._onSeekUp)},i.prototype._sliderRemoveEventListener=function(){var e=this;e._unbindScrollOverEvents(e._slider,e._onSliderMove,e._onSliderLeave),e._unbindDragEvents(e._slider,e._onSeekDown,e._onSeekMove,e._onSeekUp)},i.prototype._preventTouchDefault=function(e){-1!==e.type.indexOf("touch")&&e.preventDefault()},i.prototype._onMediaItemLoaded=function(e){var t=this;t._isLive=e.isLive(),t._liveState=e.liveState,t._contentType.innerHTML="",t._contentType.setAttribute("aria-label",""),s.classList(t._contentType).add("hide"),t._isLive?t._setLiveMode():t._setVodMode()},i.prototype._onPlaybackProgress=function(e,t,n,i){var r=this;void 0!==n&&r._duration!==n&&(r._duration=n),i&&r._updateBuffer(i),void 0!==t&&(r._updateProgress(t),r._currentTime=t)},i.prototype._updateProgress=function(e){var t=this,n=t._duration,i=e/t._duration*100;t._currentTimeLabel&&l.isNumber(e)&&l.isNumber(t._duration)&&(n-=e,t._currentTimeLabel.innerHTML=s.formatTime(e)),t._totalTimeLabel&&l.isNumber(t._duration)&&(t._totalTimeLabel.innerHTML="/ "+s.formatTime(t._duration)),l.isNumber(e)&&l.isNumber(t._duration)&&(t._playbackBar.setAttribute("style","width: "+i+"%;"),t._seeking||t._handle.setAttribute("style","left: "+i+"%;"),t._slider.setAttribute("aria-valuemax",t._duration),t._slider.setAttribute("aria-valuenow",e),t._slider.setAttribute("aria-valuetext",s.formatTime(e)+" of "+s.formatTime(t._duration)))},i.prototype._updateBuffer=function(e){var t=this,n=0;e.length>0&&(n=e.end(0)/t._duration*100),t._bufferBar.setAttribute("style","width: "+n+"%;")},i.prototype._updateVisualSeek=function(e){var t=this,n=t._model.playlist.getCurrentItem().visualSeek;if(0!==Object.keys(n).length){var i,r=t._getSeekFraction(e);i=.09>r?.09:r>.91?.91:r,t._visualSeekContainer.style.display="block",t._visualSeekContainer.style.left=100*i+"%";var o=r*t._duration;t._visualSeekContainer.querySelector(".yvp-vs-time").innerHTML=s.formatTime(o);var a=10,l=10,c=a*l,p=Math.ceil(Math.floor(o)/n.frequency),d=n.images[Math.floor(p/c)];if(d){var u=p%c,_=u%l,v=Math.floor(u/l),y=_*n.width,m=v*n.height,f=t._visualSeekContainer.querySelector(".yvp-vs-thumbnail");f.style.width=n.width+"px",f.style.height=n.height+"px",f.style.background="url('"+d.url+"')",f.style.backgroundPosition="-"+y+"px -"+m+"px"}}},i.prototype._bindDragEvents=function(e,t,n,i){["mousedown","touchstart"].forEach(function(n){e.addEventListener(n,t)}),["mousemove","touchmove"].forEach(function(e){document.addEventListener(e,n)}),["mouseup","touchend"].forEach(function(e){document.addEventListener(e,i)})},i.prototype._unbindDragEvents=function(e,t,n,i){["mousedown","touchstart"].forEach(function(n){e.removeEventListener(n,t)}),["mousemove","touchmove"].forEach(function(e){document.removeEventListener(e,n)}),["mouseup","touchend"].forEach(function(e){document.removeEventListener(e,i)})},i.prototype._bindScrollOverEvents=function(e,t,n){["mouseenter","touchstart"].forEach(function(n){e.addEventListener(n,t)}),["mousemove","touchmove"].forEach(function(n){e.addEventListener(n,t)}),["mouseleave","touchend"].forEach(function(t){e.addEventListener(t,n)})},i.prototype._unbindScrollOverEvents=function(e,t,n){["mouseenter","touchstart"].forEach(function(n){e.removeEventListener(n,t)}),["mousemove","touchmove"].forEach(function(n){e.removeEventListener(n,t)}),["mouseleave","touchend"].forEach(function(t){e.removeEventListener(t,n)})},i.prototype._syncVolumeUI=function(){var e=this;e._volumeBtn&&e._updateVolumeUI(e._model.playbackState.volume,e._model.playbackState.mute)},i.prototype._bindMute=function(){var e=this,t=0;e._volumeTap=new a(e._volumeBtn),e._onVolumeTap=function(n){e._isVolumeInChange||(n.stopPropagation(),e._showVolumeHandle(),e._view.clearAutoHideTimeout(),e._mouseOutVolumeBtnTimeout&&clearTimeout(e._mouseOutVolumeBtnTimeout),e._eventBus.publish(o.API.UI_INTERACT,{srcElement:"ctrl-mute-btn-"+(e._model.playbackState.mute?"off":"on")}),e._eventBus.publish(o.CONTROLS_SET_MUTE,!e._model.playbackState.mute),1>=t?t++:2===t&&(e._view.getContentNode().querySelector(".yvp-mute-indicator").style.display="none"))},e._volumeBtn.addEventListener("tap",e._onVolumeTap)},i.prototype._bindVolumeBar=function(){var e=this;e._getVolumeFromEvt=function(t){var n,i=e._view.getFullscreen()&&(c.chrome||c.safari);return n=i?t.pageY-s.getOffsetTopFromEl(e._volumeIndicator,"yvp-main"):t.pageY-s.getOffsetTopFromDocument(e._volumeIndicator),e._volumeIndicator.getBoundingClientRect().top?1-Math.max(0,Math.min(1,n/e._volumeIndicator.clientHeight)):1},e._volumeBarTap=new a(e._volumeBarContainer),e._onVolumeBarTap=function(t){t.stopPropagation(),e._showVolumeHandle(),e._initiateVolumeEvents(t)},e._syncMute=function(t){e._model.playbackState.mute!==t&&(e._eventBus.publish(o.API.UI_INTERACT,{srcElement:"ctrl-mute-btn-"+(t?"on":"off")}),e._eventBus.publish(o.CONTROLS_SET_MUTE,t))},e._initiateVolumeEvents=function(t){var n=e._getVolumeFromEvt(t);e._syncMute(0===n),e._eventBus.publish(o.CONTROLS_SET_VOLUME,n)},e._volumeBarContainer.addEventListener("tap",e._onVolumeBarTap),e._onVolumeBarDown=function(t){e._preventTouchDefault(t),e._isVolumeInChange=!0,e._showVolumeHandle(),e._onVolumeBarMove(t)},e._onVolumeBarMove=function(t){e._isVolumeInChange&&(e._preventTouchDefault(t),e._showVolumeHandle(),e._initiateVolumeEvents(t),e._onVolumeBtnHover(t))},e._onVolumeBarUp=function(t){e._isVolumeInChange&&(e._preventTouchDefault(t),e._isVolumeInChange=!1)},e._bindDragEvents(e._volumeBarContainer,e._onVolumeBarDown,e._onVolumeBarMove,e._onVolumeBarUp)},i.prototype._showVolumeHandle=function(){var e=this;e._volumeHandleTimeout&&clearTimeout(e._volumeHandleTimeout),s.classList(e._volumeHandle).add("show")},i.prototype._bindVolumeBtnHover=function(){var e=this;e._mouseOutVolumeBtnTimeout=null,e._hasVolumeBarUpdatedOnInit=!1,e._onVolumeBtnHover=function(t){e._preventTouchDefault(t),s.classList(e._volumeBarContainer).add("open"),e._hasVolumeBarUpdatedOnInit||(e._syncVolumeUI(),e._hasVolumeBarUpdatedOnInit=!0),e._showVolumeHandle(),e._eventBus.publish(o.VOLUME_HOVER)},e._onVolumeBtnLeave=function(t){e._preventTouchDefault(t),e._mouseOutVolumeBtnTimeout&&clearTimeout(e._mouseOutVolumeBtnTimeout),e._mouseOutVolumeBtnTimeout=setTimeout(function(){s.classList(e._volumeBarContainer).remove("open")},500)},e._onVolumeBarContainerHover=function(t){e._preventTouchDefault(t),e._mouseOutVolumeBtnTimeout&&clearTimeout(e._mouseOutVolumeBtnTimeout)},e._bindScrollOverEvents(e._volumeBtn,e._onVolumeBtnHover,e._onVolumeBtnLeave),e._bindScrollOverEvents(e._volumeBarContainer,e._onVolumeBarContainerHover,e._onVolumeBtnLeave)},i.prototype._bindVolume=function(){var e=this;e._volumeBtn&&e._bindMute(),e._volumeBarContainer&&e._volumeBtn&&(e._bindVolumeBar(),e._bindVolumeBtnHover())},i.prototype._unbindVolume=function(){var e=this;e._volumeBtn&&(e._volumeTap.destroy(),e._volumeBtn.removeEventListener("tap",e._onVolumeTap)),e._volumeBarContainer&&(e._volumeBarTap.destroy(),e._volumeBarContainer.removeEventListener("tap",e._onVolumeBarTap),e._unbindDragEvents(e._volumeBarContainer,e._onVolumeBarDown,e._onVolumeBarMove,e._onVolumeBarUp),e._unbindScrollOverEvents(e._volumeBtn,e._onVolumeBtnHover,e._onVolumeBtnLeave),e._unbindScrollOverEvents(e._volumeBarContainer,e._onVolumeBarContainerHover,e._onVolumeBtnLeave))},i.prototype._updateMuteBtn=function(e){var t=this;t._volumeBtn&&(e?s.classList(t._volumeBtn).add("muted"):s.classList(t._volumeBtn).remove("muted")),t.syncAriaState()},i.prototype._updateVolumeBar=function(e){var t=this;if(t._volumeBar){var n=Math.ceil(100*(1-e)),i=100-n;t._volumeBar.setAttribute("style","height:"+n+"%"),t._volumeValue.setAttribute("style","height:"+i+"%")}if(t._volumeHandle){var r=Math.ceil((1-(1===e?.99:e))*(t._volumeIndicator.clientHeight-t._volumeHandle.offsetHeight));r>0&&(r=3>=r?0:r,t._volumeHandle.setAttribute("style","top:"+r+"px"))}},i.prototype._updateVolumeUI=function(e,t){var n=this;l.isNullOrUndefined(t)?n._updateMuteBtn(!e):(n._updateMuteBtn(t),e=t?0:e),n._updateVolumeBar(e)},i.prototype._getSeekFraction=function(e){var t=this,n=(e.clientX||e.pageX)-t._slider.getBoundingClientRect().left,i=n/t._slider.clientWidth;return Math.max(0,Math.min(1,i))},i.prototype._hideVisualSeek=function(){var e=this;e._visualSeekContainer.style.display="none"},i.prototype._fullScreenStreamModeUpdate=function(e){var t=this,n=t._view.getContentNode(),i=t._view.isStreamMode()||t._view.isMiniStreamMode(),r=t._view.isMiniStreamMode()?"yvp-ministream":"yvp-stream";i&&(e?s.classList(n).remove(r):(s.classList(n).add(r),t._desktopControls&&t._desktopControls.resetSettings()))},i.prototype._initAriaProperties=function(){var e=this;e._model.playbackState;e._playBtn.setAttribute("aria-label",p.i18n.PLAY_VIDEO),e._slider.setAttribute("aria-label",p.i18n.SEEK_SLIDER),e._slider.setAttribute("aria-valuemin",0),e._fullscreenBtn&&e._fullscreenBtn.setAttribute("aria-label",p.i18n.GO_TO_FULLSCREEN),e._volumeBtn&&(s.classList(e._volumeBtn).contains("muted")?e._volumeBtn.setAttribute("aria-label",p.i18n.UNMUTE):e._volumeBtn.setAttribute("aria-label",p.i18n.MUTE))},i.prototype.syncAriaState=function(){var e=this,t=e._model.playbackState;t.paused?e._playBtn.setAttribute("aria-label",p.i18n.PLAY_VIDEO):e._playBtn.setAttribute("aria-label",p.i18n.PAUSE_VIDEO),e._fullscreenBtn&&(e._view.getFullscreen()?e._fullscreenBtn.setAttribute("aria-label",p.i18n.GO_TO_NORMAL_SCREEN):e._fullscreenBtn.setAttribute("aria-label",p.i18n.GO_TO_FULLSCREEN)),e._volumeBtn&&(s.classList(e._volumeBtn).contains("muted")?e._volumeBtn.setAttribute("aria-label",p.i18n.UNMUTE):e._volumeBtn.setAttribute("aria-label",p.i18n.MUTE)),e._desktopControls&&e._desktopControls.syncAriaState()},i.prototype.destroy=function(){var e=this;e._desktopControls&&e._desktopControls.destroy(),e._playTap&&e._playBtn&&(e._playTap.destroy(),e._playBtn.removeEventListener("tap",e._onPlayTap),e._fullscreenBtn&&e._fullscreenTap&&(e._fullscreenTap.destroy(),e._fullscreenBtn.removeEventListener("tap",e._onFullscreenTap)),e._seekTap&&e._seekBar&&(e._seekTap.destroy(),e._seekBar.removeEventListener("tap",e._onSeekTap)),e._sliderRemoveEventListener(),e._unbindVolume()),e._upNextBtnTap&&(e._upNextBtn.removeEventListener("tap",e._onUpNextBtnTap),e._upNextBtnTap.destroy())}},{"../../../lib":"bRhrlU","../../../lib/user-agent":"ty5FFo","../event":"YJm+dH","../renderers/modes":62,"../strings":"XwKsC9","../tap":"dsc79Q","../util":"jJTEqU","./fuji-controls.html":26,"./fuji-playlist":33,"./fuji-yahoo-controls":39,fs:145,"insert-css":160}],28:[function(e,t,n){var i=new(e("hogan.js/lib/template").Template)(function(e,t,n){var i=this;return i.b(n=n||""),i.b("<div class='.yvp-end-screen-container'>"),i.b("\n"+n),i.s(i.f("items",e,t,1),e,t,0,50,1479,"{{ }}")&&(i.rs(e,t,function(e,t,i){i.b("<li class='yvp-playlist-item'>"),i.b("\n"+n),i.b("    <ul class='yvp-end-screen-fuji-grid "),i.b(i.v(i.f("gridClassName",e,t,0))),i.b("'>"),i.b("\n"+n),i.s(i.f("videos",e,t,1),e,t,0,165,1451,"{{ }}")&&(i.rs(e,t,function(e,t,i){i.b("            <li class='yvp-end-screen-fuji-tile' data-id='"),i.b(i.v(i.f("id",e,t,0))),i.b("'>"),i.b("\n"+n),i.b("                <img class='yvp-end-screen-fuji-tile-image' src='"),i.b(i.v(i.f("thumbnail",e,t,0))),i.b("'/>"),i.b("\n"+n),i.b("                <div>"),i.b("\n"+n),i.b("                <div class='yvp-overlay-fuji "),i.s(i.f("showUpNext",e,t,1),e,t,0,397,422,"{{ }}")&&(i.rs(e,t,function(e,t,n){n.b(" yvp-overlay-fuji-up-next")}),e.pop()),i.b("'>"),i.b("\n"+n),i.b("                    <div class='yvp-metadata-fuji'>"),i.b("\n"+n),i.b("                        <div class='yvp-pl-meta'>"),i.b("\n"+n),i.b("                            <span class='yvp-pl-title'>"),i.b(i.v(i.f("title",e,t,0))),i.b("</span>"),i.b("\n"+n),i.b("                            <span class='yvp-pl-dur'>"),i.b(i.v(i.f("duration",e,t,0))),i.b("</span>"),i.b("\n"+n),i.b("                        </div>"),i.b("\n"+n),i.b("\n"+n),i.b("                    </div>"),i.b("\n"+n),i.b("                </div>"),i.b("\n"+n),i.s(i.f("showUpNext",e,t,1),e,t,0,800,1405,"{{ }}")&&(i.rs(e,t,function(e,t,i){i.b('                    <div class="yvp-end-screen-up-next-box">'),i.b("\n"+n),i.b('                        <div class="yvp-end-screen-up-next-circle"></div>'),i.b("\n"+n),i.b('                        <div class="yvp-end-screen-arc yvp-end-screen-arc-start"></div>'),i.b("\n"+n),i.b('                        <div class="yvp-end-screen-arc yvp-end-screen-arc-end"></div>'),i.b("\n"+n),i.b("                        <span class='yvp-end-screen-up-next-time'>"),i.b(i.v(i.f("upNextTime",e,t,0))),i.b("</span>"),i.b("\n"+n),i.b("                        <span class='yvp-end-screen-up-next-text'>"),i.b(i.v(i.d("strings.UP_NEXT",e,t,0))),i.b("</span>"),i.b("\n"+n),i.b("                        <span class='yvp-end-screen-up-close'>x</span>"),i.b("\n"+n),i.b("                    </div>"),i.b("\n")}),e.pop()),i.b("            </li>"),i.b("\n")}),e.pop()),i.b("    </ul>"),i.b("\n"+n),i.b("</li>"),i.b("\n")}),e.pop()),i.b("</div>"),i.b("\n"),i.fl()});t.exports={render:function(){return i.render.apply(i,arguments)},r:function(){return i.r.apply(i,arguments)},ri:function(){return i.ri.apply(i,arguments)}}},{"hogan.js/lib/template":159}],29:[function(e,t,n){var i=new(e("hogan.js/lib/template").Template)(function(e,t,n){var i=this;return i.b(n=n||""),i.b("<div class='yvp-loading-screen'>"),i.b("\n"+n),i.b("    <div class='yvp-loading-spinner yvp-spinner-icon'></div>"),i.b("\n"+n),i.b("    <div class='yvp-feedback-btn yvp-error-feedback'>"),i.b("\n"+n),i.b("        <p>"),i.b(i.v(i.d("strings.FEEDBACK_BUTTON",e,t,0))),i.b("</p>"),i.b("\n"+n),i.b("    </div>"),i.b("\n"+n),i.b("</div>"),i.b("\n"),i.fl()});t.exports={render:function(){return i.render.apply(i,arguments)},r:function(){return i.r.apply(i,arguments)},ri:function(){return i.ri.apply(i,arguments)}}},{"hogan.js/lib/template":159}],30:[function(e,t,n){"use strict";function i(e){var t=this;t._eb=e,t._resizeScheduled=!1,t._eb.subscribe(a.FULLSCREEN_CHANGE,t._scheduleResize,t),t._scheduleResize()}t.exports=i;var r=(e("fs"),e("insert-css")),o=e("../util"),a=e("../event"),s=e("../tap"),l=e("../strings"),c=e("./fuji-loading-screen.html");r('.yvp-fuji .yvp-spinner-icon{background-image:url("data:image/svg+xml;base64,PHN2ZyB2aWV3Qm94PSItMjUgLTI1IDEwMCAxMDAiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+PGc+PHBhdGggZD0iTTI1IDBhMjUgMjUgMCAwIDAgMCA1MCIgc3Ryb2tlLWRhc2hhcnJheT0iNzkiIHN0cm9rZT0iI2FhYSIgc3Ryb2tlLXdpZHRoPSI0IiBzdHJva2UtbGluZWNhcD0icm91bmQiIGZpbGw9Im5vbmUiPjxhbmltYXRlIGlkPSJhMSIgYXR0cmlidXRlVHlwZT0iWE1MIiBhdHRyaWJ1dGVOYW1lPSJzdHJva2UtZGFzaG9mZnNldCIgZnJvbT0iOSIgdG89Ijc2IiBkdXI9Ijc1MG1zIiBiZWdpbj0iMHM7IGEyLmVuZCIgZmlsbD0iZnJlZXplIiBjYWxjTW9kZT0ic3BsaW5lIiBrZXlUaW1lcz0iMDsxIiBrZXlTcGxpbmVzPSIwLjIxNSwgMC42MSwgMC4zNTUsIDEiLz48YW5pbWF0ZSBpZD0iYTIiIGF0dHJpYnV0ZVR5cGU9IlhNTCIgYXR0cmlidXRlTmFtZT0ic3Ryb2tlLWRhc2hvZmZzZXQiIGZyb209Ijc2IiB0bz0iOSIgZHVyPSI3NTBtcyIgYmVnaW49ImExLmVuZCIgZmlsbD0iZnJlZXplIiBjYWxjTW9kZT0ic3BsaW5lIiBrZXlUaW1lcz0iMDsxIiBrZXlTcGxpbmVzPSIwLjIxNSwgMC42MSwgMC4zNTUsIDEiLz48YW5pbWF0ZSBpZD0iYTMiIGF0dHJpYnV0ZVR5cGU9IlhNTCIgYXR0cmlidXRlTmFtZT0ic3Ryb2tlLXdpZHRoIiBmcm9tPSI0IiB0bz0iOCIgZHVyPSI3NTBtcyIgYmVnaW49IjBzOyBhNC5lbmQiIGZpbGw9ImZyZWV6ZSIgY2FsY01vZGU9InNwbGluZSIga2V5VGltZXM9IjA7MSIga2V5U3BsaW5lcz0iMC4yMTUsIDAuNjEsIDAuMzU1LCAxIi8+PGFuaW1hdGUgaWQ9ImE0IiBhdHRyaWJ1dGVUeXBlPSJYTUwiIGF0dHJpYnV0ZU5hbWU9InN0cm9rZS13aWR0aCIgZnJvbT0iOCIgdG89IjQiIGR1cj0iNzUwbXMiIGJlZ2luPSJhMy5lbmQiIGZpbGw9ImZyZWV6ZSIgY2FsY01vZGU9InNwbGluZSIga2V5VGltZXM9IjA7MSIga2V5U3BsaW5lcz0iMC4yMTUsIDAuNjEsIDAuMzU1LCAxIi8+PGFuaW1hdGVUcmFuc2Zvcm0gaWQ9ImE1IiBhdHRyaWJ1dGVUeXBlPSJYTUwiIGF0dHJpYnV0ZU5hbWU9InRyYW5zZm9ybSIgdHlwZT0icm90YXRlIiBmcm9tPSIwIDI1IDI1IiB0bz0iMCAyNSAyNSIgZHVyPSI3NTBtcyIgYmVnaW49IjA7IGE4LmVuZCIgY2FsY01vZGU9InNwbGluZSIga2V5VGltZXM9IjA7MSIga2V5U3BsaW5lcz0iMC4yMTUsIDAuNjEsIDAuMzU1LCAxIi8+PGFuaW1hdGVUcmFuc2Zvcm0gaWQ9ImE2IiBhdHRyaWJ1dGVUeXBlPSJYTUwiIGF0dHJpYnV0ZU5hbWU9InRyYW5zZm9ybSIgdHlwZT0icm90YXRlIiBmcm9tPSIwIDI1IDI1IiB0bz0iMTgwIDI1IDI1IiBkdXI9Ijc1MG1zIiBiZWdpbj0iYTUuZW5kIiBjYWxjTW9kZT0ic3BsaW5lIiBrZXlUaW1lcz0iMDsxIiBrZXlTcGxpbmVzPSIwLjIxNSwgMC42MSwgMC4zNTUsIDEiLz48YW5pbWF0ZVRyYW5zZm9ybSBpZD0iYTciIGF0dHJpYnV0ZVR5cGU9IlhNTCIgYXR0cmlidXRlTmFtZT0idHJhbnNmb3JtIiB0eXBlPSJyb3RhdGUiIGZyb209IjE4MCAyNSAyNSIgdG89IjE4MCAyNSAyNSIgZHVyPSI3NTBtcyIgYmVnaW49ImE2LmVuZCIgY2FsY01vZGU9InNwbGluZSIga2V5VGltZXM9IjA7MSIga2V5U3BsaW5lcz0iMC4yMTUsIDAuNjEsIDAuMzU1LCAxIi8+PGFuaW1hdGVUcmFuc2Zvcm0gaWQ9ImE4IiBhdHRyaWJ1dGVUeXBlPSJYTUwiIGF0dHJpYnV0ZU5hbWU9InRyYW5zZm9ybSIgdHlwZT0icm90YXRlIiBmcm9tPSIxODAgMjUgMjUiIHRvPSIzNjAgMjUgMjUiIGR1cj0iNzUwbXMiIGJlZ2luPSJhNy5lbmQiIGNhbGNNb2RlPSJzcGxpbmUiIGtleVRpbWVzPSIwOzEiIGtleVNwbGluZXM9IjAuMjE1LCAwLjYxLCAwLjM1NSwgMSIvPjwvcGF0aD48cGF0aCBkPSJNMjUgNTBhMjUgMjUgMCAxIDAgMC01MCIgc3Ryb2tlLWRhc2hhcnJheT0iNzkiIHN0cm9rZT0iI2FhYSIgc3Ryb2tlLXdpZHRoPSI0IiBzdHJva2UtbGluZWNhcD0icm91bmQiIGZpbGw9Im5vbmUiPjxhbmltYXRlIGF0dHJpYnV0ZVR5cGU9IlhNTCIgYXR0cmlidXRlTmFtZT0ic3Ryb2tlLWRhc2hvZmZzZXQiIGZyb209IjkiIHRvPSI3NiIgZHVyPSI3NTBtcyIgYmVnaW49IjBzOyBhMi5lbmQiIGZpbGw9ImZyZWV6ZSIgY2FsY01vZGU9InNwbGluZSIga2V5VGltZXM9IjA7MSIga2V5U3BsaW5lcz0iMC4yMTUsIDAuNjEsIDAuMzU1LCAxIi8+PGFuaW1hdGUgYXR0cmlidXRlVHlwZT0iWE1MIiBhdHRyaWJ1dGVOYW1lPSJzdHJva2UtZGFzaG9mZnNldCIgZnJvbT0iNzYiIHRvPSI5IiBkdXI9Ijc1MG1zIiBiZWdpbj0iYTEuZW5kIiBmaWxsPSJmcmVlemUiIGNhbGNNb2RlPSJzcGxpbmUiIGtleVRpbWVzPSIwOzEiIGtleVNwbGluZXM9IjAuMjE1LCAwLjYxLCAwLjM1NSwgMSIvPjxhbmltYXRlIGF0dHJpYnV0ZVR5cGU9IlhNTCIgYXR0cmlidXRlTmFtZT0ic3Ryb2tlLXdpZHRoIiBmcm9tPSI0IiB0bz0iOCIgZHVyPSI3NTBtcyIgYmVnaW49IjBzOyBhNC5lbmQiIGZpbGw9ImZyZWV6ZSIgY2FsY01vZGU9InNwbGluZSIga2V5VGltZXM9IjA7MSIga2V5U3BsaW5lcz0iMC4yMTUsIDAuNjEsIDAuMzU1LCAxIi8+PGFuaW1hdGUgYXR0cmlidXRlVHlwZT0iWE1MIiBhdHRyaWJ1dGVOYW1lPSJzdHJva2Utd2lkdGgiIGZyb209IjgiIHRvPSI0IiBkdXI9Ijc1MG1zIiBiZWdpbj0iYTMuZW5kIiBmaWxsPSJmcmVlemUiIGNhbGNNb2RlPSJzcGxpbmUiIGtleVRpbWVzPSIwOzEiIGtleVNwbGluZXM9IjAuMjE1LCAwLjYxLCAwLjM1NSwgMSIvPjxhbmltYXRlVHJhbnNmb3JtIGF0dHJpYnV0ZVR5cGU9IlhNTCIgYXR0cmlidXRlTmFtZT0idHJhbnNmb3JtIiB0eXBlPSJyb3RhdGUiIGZyb209IjAgMjUgMjUiIHRvPSIwIDI1IDI1IiBkdXI9Ijc1MG1zIiBiZWdpbj0iMDsgYTguZW5kIiBjYWxjTW9kZT0ic3BsaW5lIiBrZXlUaW1lcz0iMDsxIiBrZXlTcGxpbmVzPSIwLjIxNSwgMC42MSwgMC4zNTUsIDEiLz48YW5pbWF0ZVRyYW5zZm9ybSBhdHRyaWJ1dGVUeXBlPSJYTUwiIGF0dHJpYnV0ZU5hbWU9InRyYW5zZm9ybSIgdHlwZT0icm90YXRlIiBmcm9tPSIwIDI1IDI1IiB0bz0iMTgwIDI1IDI1IiBkdXI9Ijc1MG1zIiBiZWdpbj0iYTUuZW5kIiBjYWxjTW9kZT0ic3BsaW5lIiBrZXlUaW1lcz0iMDsxIiBrZXlTcGxpbmVzPSIwLjIxNSwgMC42MSwgMC4zNTUsIDEiLz48YW5pbWF0ZVRyYW5zZm9ybSBhdHRyaWJ1dGVUeXBlPSJYTUwiIGF0dHJpYnV0ZU5hbWU9InRyYW5zZm9ybSIgdHlwZT0icm90YXRlIiBmcm9tPSIxODAgMjUgMjUiIHRvPSIxODAgMjUgMjUiIGR1cj0iNzUwbXMiIGJlZ2luPSJhNi5lbmQiIGNhbGNNb2RlPSJzcGxpbmUiIGtleVRpbWVzPSIwOzEiIGtleVNwbGluZXM9IjAuMjE1LCAwLjYxLCAwLjM1NSwgMSIvPjxhbmltYXRlVHJhbnNmb3JtIGlkPSJhOCIgYXR0cmlidXRlVHlwZT0iWE1MIiBhdHRyaWJ1dGVOYW1lPSJ0cmFuc2Zvcm0iIHR5cGU9InJvdGF0ZSIgZnJvbT0iMTgwIDI1IDI1IiB0bz0iMzYwIDI1IDI1IiBkdXI9Ijc1MG1zIiBiZWdpbj0iYTcuZW5kIiBjYWxjTW9kZT0ic3BsaW5lIiBrZXlUaW1lcz0iMDsxIiBrZXlTcGxpbmVzPSIwLjIxNSwgMC42MSwgMC4zNTUsIDEiLz48L3BhdGg+PGFuaW1hdGVUcmFuc2Zvcm0gYXR0cmlidXRlVHlwZT0iWE1MIiBhdHRyaWJ1dGVOYW1lPSJ0cmFuc2Zvcm0iIHR5cGU9InJvdGF0ZSIgZnJvbT0iMCAyNSAyNSIgdG89IjM2MCAyNSAyNSIgZHVyPSI2NzUwbXMiIHJlcGVhdENvdW50PSJpbmRlZmluaXRlIi8+PC9nPjwvc3ZnPg==")}.yvp-fuji .yvp-loading-screen{display:none;}.yvp-fuji .yvp-loading-screen .yvp-loading-spinner{position:absolute;top:50%;left:50%;background-size:100% 100%;max-width:60px;max-height:60px;width:60px;height:60px;margin-top:-30px;margin-left:-30px;visibility:hidden;transition:visibility 0 linear 500ms;z-index:20}.yvp-fuji .yvp-loading-screen.yvp-show-spinner .yvp-loading-spinner{visibility:visible}.yvp-fuji.yvp-flag-loading .yvp-loading-screen,.yvp-fuji.yvp-flag-switching .yvp-loading-screen{display:block}.yvp-fuji.yvp-state-blocked .yvp-loading-screen{display:none}');var p=60,d=3e4;i.prototype.create=function(){var e=this;return e.node=o.render(c,{strings:l.i18n}),e._feedbackLink=e.node.querySelector(".yvp-error-feedback"),e._eb.subscribe(a.API.LOADING_BEGIN,e._onLoadingScreenVisible,e),e._eb.subscribe(a.API.LOADING_END,e.hide,e),e._feedbackLinkTap=new s(e._feedbackLink),e._onFeedbackLinkTap=function(t){e._eb.publish(a.OPEN_FEEDBACK,{srcView:"loading-screen"})},e._feedbackLink.addEventListener("tap",e._onFeedbackLinkTap),e.node},i.prototype._resize=function(){var e=this,t=Math.min(2*e.node.clientWidth/640,1),n=e.node.querySelector(".yvp-loading-spinner");n.style.width=t*p+"px",n.style.height=t*p+"px",n.style.marginLeft=-1*(t*p/2)+"px",n.style.marginTop=-1*(t*p/2)+"px"},i.prototype._scheduleResize=function(){var e=this;if(!e._resizeScheduled){var t=e._eb.subscribe(a.API.LOADING_BEGIN,function(){e._resizeScheduled=!1,e._resize(),t()},e);e._resizeScheduled=!0}},i.prototype._onLoadingScreenVisible=function(){var e=this;o.forceDOMRedrawOnElement(e.node),o.classList(e.node).add("yvp-show-spinner"),o.showHide(e._feedbackLink,!1),o.isInternalUser()&&(e.feedbackLinkRenderTimeOut=setTimeout(e._showFeedbackButton.bind(e),d))},i.prototype._showFeedbackButton=function(){var e=this;o.showHide(e._feedbackLink,!0)},i.prototype.hide=function(){var e=this;o.classList(e.node).remove("yvp-show-spinner"),clearTimeout(e.feedbackLinkRenderTimeOut),e.feedbackLinkRenderTimeOut=null},i.prototype.destroy=function(){var e=this;e.node=null,e._feedbackLinkTap&&(e._feedbackLinkTap.destroy(),e._feedbackLink.removeEventListener("tap",e._onFeedbackLinkTap))}},{"../event":"YJm+dH","../strings":"XwKsC9","../tap":"dsc79Q","../util":"jJTEqU","./fuji-loading-screen.html":29,fs:145,"insert-css":160}],31:[function(e,t,n){var i=new(e("hogan.js/lib/template").Template)(function(e,t,n){var i=this;return i.b(n=n||""),i.b('<div class="yvp-playlist-item-container">'),i.b("\n"+n),i.s(i.f("items",e,t,1),e,t,0,56,470,"{{ }}")&&(i.rs(e,t,function(e,t,i){i.b('        <li class="yvp-playlist-item" data-id=\''),i.b(i.v(i.f("id",e,t,0))),i.b("'>"),i.b("\n"+n),i.b('            <img class="yvp-playlist-item-image" src=\''),i.b(i.v(i.f("thumbnail",e,t,0))),i.b("'/>"),i.b("\n"+n),i.b('            <div class="yvp-playlist-item-gradient">'),i.b("\n"+n),i.b('                <div class="yvp-pl-meta">'),i.b("\n"+n),i.b("                    <span class='yvp-pl-title'>"),i.b(i.v(i.f("title",e,t,0))),i.b("</span>"),i.b("\n"+n),i.b("                    <span class='yvp-pl-dur'>"),i.b(i.v(i.f("duration",e,t,0))),i.b("</span>"),i.b("\n"+n),i.b("\n"+n),i.b("                </div>"),i.b("\n"+n),i.b("\n"+n),i.b("            </div>"),i.b("\n"+n),i.b("        </li>"),i.b("\n")}),e.pop()),i.b("</div>"),i.b("\n"),i.fl()});t.exports={render:function(){return i.render.apply(i,arguments)},r:function(){return i.r.apply(i,arguments)},ri:function(){return i.ri.apply(i,arguments)}}},{"hogan.js/lib/template":159}],32:[function(e,t,n){var i=new(e("hogan.js/lib/template").Template)(function(e,t,n){var i=this;return i.b(n=n||""),i.s(i.f("isEndscreen",e,t,1),e,t,0,16,158,"{{ }}")&&(i.rs(e,t,function(e,t,i){i.b("    <div class='yvp-end-screen yvp-end-replay'>"),i.b("\n"+n),i.s(i.f("showReplayOnly",e,t,1),e,t,0,88,138,"{{ }}")&&(i.rs(e,t,function(e,t,n){n.b('        <div class="yvp-end-rep-icon"></div>'),n.b("\n")}),e.pop())}),e.pop()),i.s(i.f("showReplayOnly",e,t,1),e,t,1,0,0,"")||(i.b("    <div class='yvp-playlist-container "),i.b(i.v(i.f("modeClass",e,t,0))),i.b(" yvp-pl-loading'>"),i.b("\n"+n),i.b('        <div class="yvp-playlist-pg-btn yvp-playlist-pg-btn-prev disabled"></div>'),i.b("\n"+n),i.b('        <div class="yvp-playlist-pg-btn yvp-playlist-pg-btn-next"></div>'),i.b("\n"+n),i.b('        <div class="yvp-playlist-strip">'),i.b("\n"+n),i.b('            <ul class="yvp-playlist-strip-list strip-animate">'),i.b("\n"+n),i.b("\n"+n),i.b("            </ul>"),i.b("\n"+n),i.b('            <div class="yvp-pl-loader-bg"></div>'),
i.b("\n"+n),i.b("        </div>"),i.b("\n"+n),i.b('        <div class="yvp-pl-loader yvp-spinner-icon"></div>'),i.b("\n"+n),i.b("    </div>"),i.b("\n")),i.s(i.f("isEndscreen",e,t,1),e,t,0,713,725,"{{ }}")&&(i.rs(e,t,function(e,t,n){n.b("    </div>"),n.b("\n")}),e.pop()),i.fl()});t.exports={render:function(){return i.render.apply(i,arguments)},r:function(){return i.r.apply(i,arguments)},ri:function(){return i.ri.apply(i,arguments)}}},{"hogan.js/lib/template":159}],33:[function(e,t,n){"use strict";function i(e,t){var n=this;n._eventBus=e,n._eventBus.subscribe(o.PLAYER_DIMENSION_CHANGE,n._onDimensionChange,n),n._eventBus.subscribe(o.FULLSCREEN_CHANGE,n._onDimensionChange,n),n._model=t}t.exports=i;var r=(e("fs"),e("insert-css")),o=e("../event"),a=e("../tap"),s=e("../strings"),l=e("../util"),c=e("../../../lib"),p=e("../../../lib/user-agent"),d=e("./fuji-playlist.html"),u=e("./fuji-playlist-items.html"),_=e("./fuji-end-screen-grid.html"),v=5;r('.strip-animate{-webkit-transition:left 1s ease-in-out;-moz-transition:left 1s ease-in-out;-o-transition:left 1s ease-in-out;transition:left 1s ease-in-out}div.yvp-fuji .yvp-pl-loader{display:none;position:absolute;top:0;left:0;right:0;bottom:0;margin:auto;width:32px;height:32px;background-size:100%}div.yvp-fuji .yvp-pl-loader-bg{background-color:rgba(0,0,0,0.3);position:absolute;left:0;bottom:0;top:0;width:100%;display:none}div.yvp-fuji .yvp-pl-loading .yvp-pl-loader,div.yvp-fuji .yvp-pl-loading .yvp-pl-loader-bg{display:block}div.yvp-fuji .yvp-playlist-pg-btn{width:30px;height:30px;background-image:url("data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iODgiIGhlaWdodD0iODgiIHZpZXdCb3g9IjAgMCA4OCA4OCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48dGl0bGU+cGFnZS1iYWNrPC90aXRsZT48cGF0aCBkPSJNMzkuNDY1IDQzLjk1NmwxOS4xNS0xOS41MmMxLjQ0LTEuNDcgMS40NC0zLjg2IDAtNS4zMzItLjctLjcxMi0xLjYyOC0xLjEwNC0yLjYxNi0xLjEwNC0uOTkgMC0xLjkyLjM5Mi0yLjYxOCAxLjEwNGwtMjQuMzEgMjQuNzgtLjA3Mi4wNzIgMjQuMzggMjQuODVjLjcuNzEyIDEuNjMgMS4xMDQgMi42MTcgMS4xMDQuOTg1IDAgMS45MTUtLjM5MiAyLjYxNi0xLjEwNCAxLjQ0LTEuNDcgMS40NC0zLjg2MyAwLTUuMzMzTDM5LjQ2NSA0My45NTYiIGZpbGw9IiNGRkYiIGZpbGwtcnVsZT0iZXZlbm9kZCIvPjwvc3ZnPg==");background-position:center;background-repeat:no-repeat;background-size:100%;position:absolute;top:55px;cursor:pointer;z-index:10;opacity:.8;left:21px;}div.yvp-fuji .yvp-playlist-pg-btn:hover{opacity:1}div.yvp-fuji .yvp-playlist-pg-btn.disabled{opacity:.3;cursor:default}div.yvp-fuji .yvp-playlist-pg-btn.yvp-playlist-pg-btn-next{background-image:url("data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iODgiIGhlaWdodD0iODgiIHZpZXdCb3g9IjAgMCA4OCA4OCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48dGl0bGU+cGFnZS1uZXh0PC90aXRsZT48cGF0aCBkPSJNNDkuMDE4IDQ0LjExOGwtMTkuMTUgMTkuNTE4Yy0xLjQ0IDEuNDctMS40NCAzLjg2MyAwIDUuMzMzLjcuNzEgMS42MjggMS4xMDMgMi42MTYgMS4xMDMuOTkgMCAxLjkxOC0uMzkyIDIuNjE3LTEuMTA0bDI0LjMxLTI0Ljc4LjA3My0uMDcyLTI0LjM4LTI0Ljg1Yy0uNy0uNzEzLTEuNjMtMS4xMDUtMi42MTctMS4xMDUtLjk4NSAwLTEuOTE1LjM5Mi0yLjYxNiAxLjEwNS0xLjQ0IDEuNDctMS40NCAzLjg2MyAwIDUuMzMybDE5LjE0OCAxOS41MTgiIGZpbGw9IiNGRkYiIGZpbGwtcnVsZT0iZXZlbm9kZCIvPjwvc3ZnPg==");right:21px;left:auto}div.yvp-fuji .yvp-playlist-strip{position:absolute;left:38px;right:24px;bottom:20px;overflow:hidden}div.yvp-fuji .yvp-playlist-strip-list{list-style-type:none;position:relative;left:0;white-space:nowrap}div.yvp-fuji .yvp-pl-meta{opacity:0;position:absolute;left:8px;right:8px;color:#fff;bottom:6px;overflow:hidden}div.yvp-fuji .yvp-pl-title{overflow:hidden;line-height:16px;-webkit-line-clamp:2;text-overflow:ellipsis;max-height:32px;display:-webkit-box;-webkit-box-orient:vertical;font-size:13px;vertical-align:bottom;white-space:normal}div.yvp-fuji .yvp-pl-dur{font-size:11px;opacity:.6;line-height:13px;display:block}div.yvp-fuji .yvp-playlist-mode-upnext{position:absolute;left:-16px;right:-16px;height:124px;bottom:3000px;opacity:0;z-index:-20;-webkit-transition:opacity .3s ease-in-out;-moz-transition:opacity .3s ease-in-out;-o-transition:opacity .3s ease-in-out;transition:opacity .3s ease-in-out;}div.yvp-fuji .yvp-playlist-mode-upnext .yvp-playlist-strip{top:20px;bottom:20px}div.yvp-fuji .yvp-playlist-mode-upnext .yvp-playlist-item{width:150px;height:84px;display:inline-block;margin-right:16px;position:relative;cursor:pointer;overflow:hidden;}div.yvp-fuji .yvp-playlist-mode-upnext .yvp-playlist-item .yvp-playlist-item-image{width:151px;height:85px}div.yvp-fuji .yvp-playlist-mode-upnext .yvp-playlist-item .yvp-playlist-item-gradient{position:absolute;top:30px;left:0;right:0;bottom:0;background:linear-gradient(rgba(0,0,0,0),rgba(0,0,0,0.8))}div.yvp-fuji.yvp-browser-desktop .yvp-hover-elem{display:none;opacity:.1;position:absolute;bottom:10px;width:150px;height:50px;left:20px}div.yvp-fuji.yvp-browser-desktop .yvp-upnext-container:hover .yvp-hover-elem{display:block;background-color:rgba(0,0,0,0)}div.yvp-fuji.yvp-browser-desktop .yvp-upnext-container:hover .yvp-playlist-mode-upnext{opacity:1;z-index:10;bottom:51px}div.yvp-fuji.yvp-browser-desktop .yvp-playlist-item .yvp-playlist-item-gradient{opacity:0}div.yvp-fuji.yvp-browser-desktop .yvp-playlist-item:hover .yvp-playlist-item-gradient{opacity:1}div.yvp-fuji.yvp-browser-desktop .yvp-playlist-item:hover .yvp-pl-meta{opacity:1}div.yvp-fuji.yvp-browser-desktop .yvp-overlay-fuji{opacity:0;}div.yvp-fuji.yvp-browser-desktop .yvp-overlay-fuji:hover{opacity:1;}div.yvp-fuji.yvp-browser-desktop .yvp-overlay-fuji:hover .yvp-pl-meta{opacity:1}div.yvp-fuji.yvp-browser-desktop.yvp-ie9 .yvp-upnext-container:hover .yvp-playlist-mode-upnext{opacity:1;z-index:10;bottom:51px;background-color:rgba(0,0,0,0)}div.yvp-fuji.yvp-browser-desktop.yvp-ie9 .yvp-upnext-container:hover .yvp-playlist-item-gradient{filter:progid:DXImageTransform.Microsoft.gradient(startColorStr=#00000000, endColorStr=#FF000000)}div.yvp-fuji.yvp-browser-mobile .yvp-hover-elem{display:none}div.yvp-fuji.yvp-browser-mobile .yvp-upnext-playlist.open .yvp-hover-elem{display:none}div.yvp-fuji.yvp-browser-mobile .yvp-upnext-playlist.open .yvp-playlist-mode-upnext{opacity:1;z-index:10;bottom:45px}div.yvp-fuji.yvp-browser-mobile .yvp-playlist-item-gradient{opacity:1}div.yvp-fuji.yvp-browser-mobile .yvp-pl-meta{opacity:1}div.yvp-fuji.yvp-state-end-screen .yvp-start-screen{display:block}div.yvp-fuji.yvp-state-end-screen .yvp-start-screen-bar-wrapper{display:none}div.yvp-fuji.yvp-state-end-screen .yvp-start-screen-button{display:none}div.yvp-fuji.yvp-state-end-screen .yvp-end-screen{z-index:22;background-color:rgba(0,0,0,0.85);}div.yvp-fuji.yvp-state-end-screen .yvp-end-screen.yvp-end-replay{background-color:rgba(18,23,23,0.6)}div.yvp-fuji.yvp-state-end-screen .yvp-end-rep-icon{background-image:url("data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjQiIGhlaWdodD0iMjQiIHZpZXdCb3g9IjAgMCAyNCAyNCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48ZyBmaWxsPSIjRkZGIiBmaWxsLXJ1bGU9ImV2ZW5vZGQiPjxwYXRoIGQ9Ik0xNi44NyAxNS41NDVjLS4xMS0uMTk3LS4yNzQtLjM0NS0uNDctLjQyNS0uMjA0LS4wOS0uNDUtLjA5LS42MS0uMDQtLjEwNy4wMjUtLjIwNS4wNjgtLjMyNy4xNDctLjA3Mi4wNS0uMTcyLjE1LS4yMTYuMjA0LS43NzYgMS4wMTgtMS45OTcgMS42MjctMy4yNjYgMS42MjctMi4yNDQgMC00LjA3LTEuODItNC4wNy00LjA1MyAwLTIuMTMzIDEuNzg3LTMuOTQ3IDMuOTgtNC4wNDNsLjUyLS4wMTNWN2wtLjU1Mi4wMTNDOC41NzMgNy4xMyA2IDkuNzYgNiAxMy4wMDNjMCAzLjMxMiAyLjY5MyA2LjAwNCA2LjAwNSA2LjAwNCAxLjg2NCAwIDMuNTktLjg0NSA0LjctMi4yOGwuMDctLjA5Yy4wMy0uMDQyLjA1My0uMDgyLjA3LS4xMDguMTA0LS4xNjguMTU1LS4zMzQuMTU1LS41MSAwLS4xNi0uMDQzLS4zMi0uMTMtLjQ3NSIvPjxwYXRoIGQ9Ik0xMi4zMTIgMTEuMDA4Yy0uMTcyIDAtLjMxMi0uMTUtLjMxMi0uMzIzVjUuMzIzYzAtLjE4LjEzOC0uMzIzLjMxMi0uMzIzLjA2OCAwIC4xMzIuMDI0LjE4NC4wNjNsNC4zNjUgMi42MWMuMTUyLjA5LjIwNC4yODYuMTE4LjQ0LS4wMjIuMDQtLjA1Mi4wNzUtLjA4Ni4xLS4wMTUuMDE0LS4wMzIuMDI3LS4wNS4wMzhsLTQuMzU1IDIuNzFjLS4wNS4wMy0uMTAzLjA0Ni0uMTU2LjA0OGgtLjAxOHoiLz48L2c+PC9zdmc+");background-size:100%;opacity:.6;width:80px;height:98px;position:absolute;top:0;left:0;right:0;bottom:0;margin:auto;cursor:pointer}div.yvp-fuji.yvp-state-end-screen .yvp-playlist-mode-endscreen{position:absolute;margin:auto;left:0;right:0;height:184px;width:512px;top:0;bottom:50px;z-index:10;opacity:1;}div.yvp-fuji.yvp-state-end-screen .yvp-playlist-mode-endscreen .yvp-playlist-pg-btn{top:74px;left:-19px;}div.yvp-fuji.yvp-state-end-screen .yvp-playlist-mode-endscreen .yvp-playlist-pg-btn.yvp-playlist-pg-btn-next{right:0;left:auto;right:-15px}div.yvp-fuji.yvp-state-end-screen .yvp-playlist-mode-endscreen .yvp-playlist-strip{position:absolute;left:18px;right:14px;height:100%;bottom:0}div.yvp-fuji.yvp-state-end-screen .yvp-playlist-mode-endscreen .yvp-playlist-strip-list{height:100%;margin-right:0;width:500px}div.yvp-fuji.yvp-state-end-screen .yvp-playlist-mode-endscreen .yvp-playlist-item{width:100%;display:inline-block;position:relative;height:100%}div.yvp-fuji.yvp-state-end-screen .yvp-playlist-mode-endscreen .yvp-end-screen-fuji-grid{width:100%;height:100%;list-style-type:none;white-space:normal;text-align:left;overflow:hidden}div.yvp-fuji.yvp-state-end-screen .yvp-playlist-mode-endscreen .yvp-end-screen-fuji-tile{position:relative;width:150px;height:84px;cursor:pointer;float:left;margin-right:10px;overflow:hidden;margin-bottom:10px;padding:0}div.yvp-fuji.yvp-state-end-screen .yvp-playlist-mode-endscreen .yvp-end-screen-fuji-tile-image{width:151px}div.yvp-fuji.yvp-state-end-screen .yvp-playlist-mode-endscreen .yvp-overlay-fuji{position:absolute;top:0;left:0;width:100%;height:100%;color:#fff;font-size:13px;line-height:14px;}div.yvp-fuji.yvp-state-end-screen .yvp-playlist-mode-endscreen .yvp-overlay-fuji.yvp-overlay-fuji-up-next{background-color:rgba(0,0,0,0.6);opacity:1}div.yvp-fuji.yvp-state-end-screen .yvp-playlist-mode-endscreen .yvp-metadata-fuji{position:absolute;top:30px;left:0;right:0;bottom:0;background:linear-gradient(rgba(0,0,0,0),rgba(0,0,0,0.8))}div.yvp-fuji.yvp-state-end-screen .yvp-playlist-mode-endscreen .yvp-end-screen-up-next-box{position:absolute;top:8px;left:8px;font-size:13px;line-height:14px;text-align:left;width:80px}div.yvp-fuji.yvp-state-end-screen .yvp-playlist-mode-endscreen .yvp-end-screen-up-next-time{position:relative;margin-top:6px;display:inline-block;left:8px}div.yvp-fuji.yvp-state-end-screen .yvp-playlist-mode-endscreen .yvp-end-screen-up-next-text{position:relative;margin-top:5px;display:inline-block;left:19px}div.yvp-fuji.yvp-state-end-screen .yvp-playlist-mode-endscreen .yvp-end-screen-up-close{position:relative;left:57px;font-weight:500;font-size:19px;opacity:.6;}div.yvp-fuji.yvp-state-end-screen .yvp-playlist-mode-endscreen .yvp-end-screen-up-close:hover{opacity:1}div.yvp-fuji.yvp-state-end-screen .yvp-playlist-mode-endscreen.yvp-pl-two-col{height:84px;width:347px;}div.yvp-fuji.yvp-state-end-screen .yvp-playlist-mode-endscreen.yvp-pl-two-col .yvp-playlist-pg-btn{top:35px}div.yvp-fuji.yvp-state-end-screen .yvp-playlist-mode-endscreen.yvp-pl-two-col .yvp-playlist-strip-list{width:332px}div.yvp-fuji.yvp-state-end-screen .yvp-playlist-mode-endscreen.yvp-pl-one-col{height:84px;width:178px;}div.yvp-fuji.yvp-state-end-screen .yvp-playlist-mode-endscreen.yvp-pl-one-col .yvp-playlist-pg-btn{top:35px}div.yvp-fuji.yvp-state-end-screen .yvp-playlist-mode-endscreen.yvp-pl-one-col .yvp-playlist-strip-list{width:158px}div.yvp-fuji.yvp-state-end-screen .yvp-playlist-mode-endscreen.yvp-pl-three-col{height:284px;width:678px;}div.yvp-fuji.yvp-state-end-screen .yvp-playlist-mode-endscreen.yvp-pl-three-col .yvp-playlist-pg-btn{top:135px}div.yvp-fuji.yvp-state-end-screen .yvp-playlist-mode-endscreen.yvp-pl-three-col .yvp-playlist-strip-list{width:666px}div.yvp-fuji.yvp-browser-mobile .yvp-playlist-strip{overyflow-y:hidden;overflow-x:scroll;-webkit-overflow-scrolling:touch}div.yvp-fuji.yvp-browser-mobile .yvp-playlist-pg-btn{display:none}.yvp-content div.yvp-end-screen-up-next-circle{width:20px;height:20px;-moz-border-radius:20px;-webkit-border-radius:20px;border-radius:20px;border:2px solid rgba(255,255,255,0.9);display:block;position:absolute;top:0;left:0}.yvp-content div.yvp-end-screen-arc{position:absolute;top:0;left:0;width:100px;height:100px;border-radius:100%;border:1px solid;display:none}'),i.prototype.create=function(e,t){var n=this;n._plStripLOrg=38,n._plStripROrg=24,n._pgBtnLOrg=21,n._pgBtnROrg=21,n._plStripL=n._plStripLOrg,n._plStripR=n._plStripROrg,n._pgBtnL=n._pgBtnLOrg,n._pgBtnR=n._pgBtnROrg,n._posL=0,n._scrL=0,n._taps=[],n._mdUpN="upnext"===e,n._mdEnd="endscreen"===e||"endscreen-rp"===e;var i="yvp-playlist-mode-"+e;return n._repOnly=n._mdEnd&&"endscreen-rp"===e,n._onPlaylistItemTap=function(){n._mdUpN&&l.classList(n._node).remove("open"),n._eventBus.publish(o.RELATED_ITEM_CLICK,this.getAttribute("data-id"),this.itemIndex,n._mdUpN,!1),n._cancelUpNextTimeout()},n._node=l.render(d,{strings:s.i18n,modeClass:i,isEndscreen:n._mdEnd,showReplayOnly:n._repOnly}),n._repOnly?(n._mI=t,n._onEndScreenTap=function(){n._eventBus.publish(o.RELATED_ITEM_CLICK,n._mI.id,-1,!1,!1)},n._endScreenTap=new a(n._node),n._node.addEventListener("tap",function(){n._onEndScreenTap(!1)}),n._node):(n._plList=n._node.querySelector(".yvp-playlist-strip-list"),n._plStrip=n._node.querySelector(".yvp-playlist-strip"),n._plCont=n._mdEnd?n._node.querySelector(".yvp-playlist-container"):n._node,n._pgPrev=n._node.querySelector(".yvp-playlist-pg-btn-prev"),n._pgNext=n._node.querySelector(".yvp-playlist-pg-btn-next"),n._plLoader=n._node.querySelector(".yvp-pl-loader-bg"),n._bindEvents(),n._node)},i.prototype._bindEvents=function(){var e=this;e._pgPrevTap=new a(e._pgPrev),e._pgPrev.addEventListener("tap",function(){e._onPageBtnTap(!1)}),e._pgNextTap=new a(e._pgNext),e._pgNext.addEventListener("tap",function(){e._onPageBtnTap(!0)}),p.mobile&&e._plStrip.addEventListener("scroll",function(t){e._relItems&&e._relItems.length<100&&e._plStrip.scrollLeft+e._plStrip.offsetWidth>=e._plStrip.scrollWidth&&!e._eoL&&e._fetchMoreRelatedItems()})},i.prototype.upNextBtnTapHandler=function(){var e=this;e._eventBus.publish(o.API.UI_INTERACT,{srcElement:"ctrl-next-click"}),e._eventBus.publish(o.RELATED_ITEM_CLICK,e._relItems[0].id,-2,!1,!1)},i.prototype.renderPlaylist=function(e,t){var n=this;n._mI=e,n._relItems=[],n._posL=0,n._scrL=0,n._taps=[],n._eoL=!1,n._plList.parentElement.scrollLeft=0,l.classList(n._pgPrev).add("disabled"),l.classList(n._pgNext).remove("disabled"),n._removeItems(),t&&n._renderPlaylistItems(t)},i.prototype._renderPlaylistItems=function(e){var t=this,n=t._mdUpN?u:_,i=[],r=p.chrome>43,d=!1;if(e){for(var y=0;y<e.length;y++){var m=e[y],f="";m.duration&&c.isNumber(m.duration)&&(f=l.formatTime(m.duration));var g=m.title;g&&g.length>40&&!r&&(g=g.substring(0,40)+"...");var b={id:m.id,title:g,showUpNext:0===y||d,upNextTime:v,thumbnail:m.images.thumbnail,duration:f};b.id!==t._mI.id&&b.thumbnail?(i.push(b),d=!1):b.showUpNext&&(d=!0)}if(t._mdEnd){var E=0,h=6;t._itemW=500,t._model.uiState.width<384?(h=1,t._itemW=158,l.classList(t._plCont).add("yvp-pl-one-col")):t._model.uiState.width<550?(h=2,t._itemW=332,l.classList(t._plCont).add("yvp-pl-two-col")):t._model.uiState.width>800&&(h=12,t._itemW=666,l.classList(t._plCont).add("yvp-pl-three-col"));var A=parseInt(i.length/h),S=[];if(h>1)for(E=0;A>E;E++){var T=E*h,L=i.slice(T,T+h);S.push({videos:L})}else for(E=0;E<i.length;E++)S.push({videos:[i[E]]});i=S}var I=l.render(n,{items:i,strings:s.i18n});I=Array.prototype.slice.call(I.querySelectorAll(".yvp-playlist-item"),0);for(var M=0;M<I.length;M++){var C=I[M];if(t._mdUpN)C.itemIndex=M+t._relItems.length,t._taps.push(new a(C)),C.addEventListener("tap",t._onPlaylistItemTap);else if(t._mdEnd)for(var N=Array.prototype.slice.call(C.querySelectorAll(".yvp-end-screen-fuji-tile"),0),R=0;R<N.length;R++){var D=N[R];D.itemIndex=R+t._relItems.length,t._taps.push(new a(D)),D.addEventListener("tap",t._onPlaylistItemTap)}t._plList.appendChild(C)}t._relItems=t._relItems.concat(e),t._mdEnd&&(t._upNClose=t._node.querySelector(".yvp-end-screen-up-close"),t._upNCloseT=new a(t._upNClose),t._upNClose.addEventListener("tap",function(e){t._eventBus.publish(o.API.UI_INTERACT,{srcElement:"es-vid-cancel"}),t._cancelUpNextTimeout(),e.stopPropagation()}),t._upNtime=v,t._upNtimer=setTimeout(function(){t._upNextTimeout()},1e3)),t._setPlaylistViewSize(),l.classList(t._plCont).remove("yvp-pl-loading")}},i.prototype._setPlaylistViewSize=function(){var e=this;if(e._listW=e._plStrip.offsetWidth||e._plStrip._offsetWidth,e._mdEnd)e._numPgItems=1;else if(e._mdUpN){e._itemW=166,e._plStrip.style.left=e._plStripLOrg+"px",e._plStrip.style.right=e._plStripROrg+"px",e._pgPrev.style.left=e._pgBtnLOrg+"px",e._pgNext.style.right=e._pgBtnROrg+"px",e._plStripL=e._plStripLOrg,e._plStripR=e._plStripROrg,e._pgBtnL=e._pgBtnLOrg,e._pgBtnR=e._pgBtnROrg,e._listW=e._plStrip.offsetWidth||e._plStrip._offsetWidth,e._numPgItems=parseInt(e._listW/e._itemW);var t=parseInt(e._listW%e._itemW/2);e._plStripL=e._plStripL+t,e._plStripR=e._plStripR+t,e._pgBtnL=e._pgBtnL+t,e._pgBtnR=e._pgBtnR+t,t%2===1&&(e._plStripR+=1,e._pgBtnR+=1),e._plStrip.style.left=e._plStripL+"px",e._plStrip.style.right=e._plStripR+"px",e._pgPrev.style.left=e._pgBtnL+"px",e._pgNext.style.right=e._pgBtnR+"px"}},i.prototype._cancelUpNextTimeout=function(){var e=this;if(e._upNtimer){clearTimeout(e._upNtimer),e._upNtimer=null,e._upNClose&&(e._upNCloseT.destroy(),e._upNClose.removeEventListener("tap",e._cancelUpNextTimeout));var t=e._node.querySelector(".yvp-end-screen-up-next-box");t&&(l.classList(t.parentElement.querySelector(".yvp-overlay-fuji")).remove("yvp-overlay-fuji-up-next"),t.parentElement.removeChild(t))}},i.prototype._upNextTimeout=function(){var e=this;0===e._upNtime?(e._eventBus.publish(o.RELATED_ITEM_CLICK,e._relItems[0].id,0,!1,!0),e._upNtimer=null):(e._upNtime-=1,e._node.querySelector(".yvp-end-screen-up-next-time").innerHTML=e._upNtime,e._upNtimer=setTimeout(function(){e._upNextTimeout()},1e3))},i.prototype._onPageBtnTap=function(e){var t=this;t._cancelUpNextTimeout(),t._mdUpN&&t._eventBus.publish(o.UP_NEXT_PG_CLICK);var n=t._mdEnd?"es-":"next-";n=e?n+"right":n+"left",t._eventBus.publish(o.API.UI_INTERACT,{srcElement:n}),t._listW=t._plList.offsetWidth||t._plList._offsetWidth;var i=(t._plList.children.length-t._numPgItems)*t._itemW;t._scrL=t._transTimer?t._scrL:t._plList.parentElement.scrollLeft;var r=t._scrL%t._listW,a=l.classList(t._pgPrev).contains("disabled");if(!a||e){!e&&r&&(r=-1*(t._listW-r));var s=parseInt((i-t._scrL)/166)>=t._numPgItems,c=t._scrL>=i;if((c||!s)&&e)return void(t._eoL||(l.classList(t._pgNext).add("disabled"),t._relItems&&t._relItems.length<100?t._fetchMoreRelatedItems():t._eoL=!0));t._posL=e?t._posL-t._listW:t._posL+t._listW,t._scrL=e?t._scrL+t._listW:t._scrL-t._listW,t._posL+=r,t._scrL-=r,t._scrL<=i&&l.classList(t._pgNext).remove("disabled"),t._scrL>0?l.classList(t._pgPrev).remove("disabled"):l.classList(t._pgPrev).add("disabled"),l.classList(t._plList).add("strip-animate"),t._plList.style.left=t._posL+"px",t._transTimer&&(clearTimeout(t._transTimer),t._transTimer=null),t._transTimer=setTimeout(function(){l.classList(t._plList).remove("strip-animate"),t._plList.style.left="0px",t._posL=0,t._transTimer=null,t._node.querySelector(".yvp-playlist-strip").scrollLeft=t._scrL,t._plStrip.scrollLeft=t._scrL,t._plLoader.style.left=t._mdEnd?t._scrL+"px":t._scrL-10+"px"},1e3)}},i.prototype.getCurrMediaItem=function(){var e=this;return e._mI},i.prototype._fetchMoreRelatedItems=function(){var e=this;l.classList(e._plCont).add("yvp-pl-loading"),e._eventBus.publish(o.FETCH_MORE_RELATED_ITEMS,e._mI,!0,function(t,n){n&&n.length>0?(e._renderPlaylistItems(n),p.mobile||e._onPageBtnTap(!0)):(l.classList(e._plCont).remove("yvp-pl-loading"),e._eoL=!0)})},i.prototype._onDimensionChange=function(){var e=this;e._plStrip.scrollLeft=0,e._scrL=0,e._posL=0,l.classList(e._pgPrev).add("disabled"),e._setPlaylistViewSize(),setTimeout(function(){e._setPlaylistViewSize()},1e3)},i.prototype._removeItems=function(){var e=this;e._taps&&e._taps.forEach(function(e){e.destroy()}),e._taps=[];var t=Array.prototype.slice.call(e._plList.querySelectorAll(".yvp-playlist-item"),0);t.forEach(function(t){t.removeEventListener("tap",e._onPlaylistItemTap)}),e._plList.innerHTML=""},i.prototype.destroy=function(){var e=this;if(e._cancelUpNextTimeout(),e._pgNextTap&&e._pgNextTap&&(e._pgNextTap.destroy(),e._pgNextTap.destroy(),e._pgPrev.removeEventListener("tap",e._onPageBtnTap),e._pgNext.removeEventListener("tap",e._onPageBtnTap)),e._taps&&e._taps.forEach(function(e){e.destroy()}),e._taps=[],e._repOnly)e._node.removeEventListener("tap",e._onEndScreenTap),e._endScreenTap.destroy();else{var t=Array.prototype.slice.call(e._plList.querySelectorAll(".yvp-playlist-item"),0);t.forEach(function(t){t.removeEventListener("tap",e._onPlaylistItemTap)})}}},{"../../../lib":"bRhrlU","../../../lib/user-agent":"ty5FFo","../event":"YJm+dH","../strings":"XwKsC9","../tap":"dsc79Q","../util":"jJTEqU","./fuji-end-screen-grid.html":28,"./fuji-playlist-items.html":31,"./fuji-playlist.html":32,fs:145,"insert-css":160}],34:[function(e,t,n){var i=new(e("hogan.js/lib/template").Template)(function(e,t,n){var i=this;return i.b(n=n||""),i.b("<div class='yvp-settings-container' tabindex='0'>"),i.b("\n"+n),i.b("    <div class='yvp-main-settings open'>"),i.b("\n"+n),i.b("        <div class='yvp-settings-embed'>"),i.b("\n"+n),i.b("            <div class='yvp-settings-header' tabindex='0' aria-label='"),i.b(i.v(i.d("strings.EMBED",e,t,0))),i.b("'>"),i.b(i.v(i.d("strings.EMBED",e,t,0))),i.b("</div>"),i.b("\n"+n),i.b("            <div class='yvp-input-container yvp-embed-input-container'>"),i.b("\n"+n),i.b("                <input type='text' class='yvp-embed-input' value='' data-link-type='emb' readonly />"),i.b("\n"+n),i.b("            </div>"),i.b("\n"+n),i.b("            <div class='yvp-settings-divider'></div>"),i.b("\n"+n),i.b("        </div>"),i.b("\n"+n),i.b("        <div class='yvp-settings-quality'>"),i.b("\n"+n),i.b("            <div class='yvp-settings-header' tabindex='0' aria-label='"),i.b(i.v(i.d("strings.VIDEO_QUALITY",e,t,0))),i.b("'>"),i.b(i.v(i.d("strings.VIDEO_QUALITY",e,t,0))),i.b("</div>"),i.b("\n"+n),i.b("            <div class='yvp-settings-item "),i.b(i.v(i.d("qualityMap.auto.btnClass",e,t,0))),i.b(" yvp-settings-activated' tabindex='1'>"),i.b(i.v(i.d("strings.AUTO",e,t,0))),i.b("</div>"),i.b("\n"+n),i.b("            <div class='yvp-settings-item "),i.b(i.v(i.d("qualityMap.high.btnClass",e,t,0))),i.b(" yvp-disabled' tabindex='2'>"),i.b(i.v(i.d("strings.HIGH",e,t,0))),i.b("</div>"),i.b("\n"+n),i.b("            <div class='yvp-settings-item "),i.b(i.v(i.d("qualityMap.medium.btnClass",e,t,0))),i.b(" yvp-disabled' tabindex='3'>"),i.b(i.v(i.d("strings.MEDIUM",e,t,0))),i.b("</div>"),i.b("\n"+n),i.b("            <div class='yvp-settings-item last-item "),i.b(i.v(i.d("qualityMap.low.btnClass",e,t,0))),i.b(" yvp-disabled' tabindex='4'>"),i.b(i.v(i.d("strings.LOW",e,t,0))),i.b("</div>"),i.b("\n"+n),i.b("            <div class='yvp-settings-divider'></div>"),i.b("\n"+n),i.b("        </div>"),i.b("\n"+n),i.b("        <div class='yvap-settings-cc'>"),i.b("\n"+n),i.b("            <div class='yvp-settings-header last-item' tabindex='0' aria-label='"),i.b(i.v(i.d("strings.CC_SETTINGS",e,t,0))),i.b("'>"),i.b(i.v(i.d("strings.CC_SETTINGS",e,t,0))),i.b("</div>"),i.b("\n"+n),i.b("            <div class='yvp-settings-caret-icon right'></div>"),i.b("\n"+n),i.b("        </div>"),i.b("\n"+n),i.b("    </div>"),i.b("\n"+n),i.b("</div>"),i.fl()});t.exports={render:function(){return i.render.apply(i,arguments)},r:function(){return i.r.apply(i,arguments)},ri:function(){return i.ri.apply(i,arguments)}}},{"hogan.js/lib/template":159}],35:[function(e,t,n){"use strict";function i(e,t){var n=this;n._eventBus=e,n._model=t,n._ccOptions=new d(n._eventBus,n._model),n._qualityMap={auto:{btnClass:"yvp-quality-auto",bitrate:0},low:{btnClass:"yvp-quality-low",bitrate:0},medium:{btnClass:"yvp-quality-medium",bitrate:0},high:{btnClass:"yvp-quality-high",bitrate:0}},n._streamMap=null,n._availableStreamCount=0,n._eventBus.subscribe(o.PLAYBACK_STARTED,n._onPlaybackStarted,n),n._eventBus.subscribe(o.MEDIA_ITEM_LOADED,n._bindEmbedCode,n)}t.exports=i;var r=(e("fs"),e("insert-css")),o=e("../event"),a=e("../tap"),s=e("../strings"),l=e("../util"),c=e("../../../lib/logger"),p=(e("../../../lib"),e("../../src/stream")),d=e("./fuji-cc-options"),u=e("./fuji-settings.html");r('.yvp-fuji .yvp-bottom-bar .yvp-settings-container{position:absolute;z-index:4;width:auto;background:rgba(18,23,23,0.8);padding:16px;display:none;bottom:37px;border-radius:4px;right:0;font-family:\'Helvetica Neue\',Helvetica,Arial,sans-serif;font-size:11px;-webkit-font-smoothing:subpixel-antialiased;color:#fff;cursor:default;pointer-events:auto;-webkit-animation-name:fadeIn;animation-name:fadeIn;-webkit-animation-duration:.4s;-moz-animation-duration:.4s;animation-duration:.4s;}.yvp-fuji .yvp-bottom-bar .yvp-settings-container.open{display:block}.yvp-fuji .yvp-bottom-bar .yvp-settings-container.hide{display:none}.yvp-fuji .yvp-bottom-bar .yvp-settings-container .yvp-settings-header{color:rgba(255,255,255,0.6);margin-bottom:12px;}.yvp-fuji .yvp-bottom-bar .yvp-settings-container .yvp-settings-header.last-item{margin-bottom:0;}.yvp-fuji .yvp-bottom-bar .yvp-settings-container .yvp-settings-header.last-item:hover{color:#fff}.yvp-fuji .yvp-bottom-bar .yvp-settings-container .yvp-settings-caret-icon{position:relative;display:inline-block;width:6px;height:10px;margin:0;background-size:100%;background-repeat:no-repeat;cursor:pointer;opacity:1;}.yvp-fuji .yvp-bottom-bar .yvp-settings-container .yvp-settings-caret-icon.right{top:2px;left:2px;background-image:url("data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNiIgaGVpZ2h0PSIxMCIgdmlld0JveD0iMCAwIDYgMTAiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+PHBhdGggZD0iTTMuNzU1IDQuNjk3bC0zLjU2IDMuNTZjLS4yNi4yNi0uMjYuNjgyIDAgLjk0Mi4yNi4yNi42ODMuMjYuOTQzIDBMNS42NCA0LjY5NiAxLjEzOC4xOTVDMS4wMDguMDY1LjgzOCAwIC42NjggMCAuNDk1IDAgLjMyNS4wNjUuMTk1LjE5NWMtLjI2LjI2LS4yNi42ODMgMCAuOTQzbDMuNTYgMy41NiIgZmlsbD0iI0ZGRiIgZmlsbC1ydWxlPSJldmVub2RkIi8+PC9zdmc+Cg==")}.yvp-fuji .yvp-bottom-bar .yvp-settings-container .yvp-settings-caret-icon.left{top:1px;background-image:url("data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNiIgaGVpZ2h0PSIxMCIgdmlld0JveD0iMCAwIDYgMTAiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+PHRpdGxlPmljb24tY2FyZXQtbGVmdC1mcG88L3RpdGxlPjxwYXRoIGQ9Ik0yLjI0NSA1LjMwM2wzLjU2LTMuNTZjLjI2LS4yNi4yNi0uNjgyIDAtLjk0Mi0uMjYtLjI2LS42ODMtLjI2LS45NDMgMEwuMzYgNS4zMDRsNC41MDIgNC41MDJjLjEzLjEzLjMuMTk1LjQ3LjE5NS4xNzIgMCAuMzQyLS4wNjUuNDcyLS4xOTUuMjYtLjI2LjI2LS42ODMgMC0uOTQzbC0zLjU2LTMuNTYiIGZpbGw9IiNGRkYiIGZpbGwtcnVsZT0iZXZlbm9kZCIvPjwvc3ZnPg==")}.yvp-fuji .yvp-bottom-bar .yvp-settings-container .yvp-settings-item{display:inline-block;margin-right:6px;cursor:pointer;color:#fff;padding:4px;border:0;}.yvp-fuji .yvp-bottom-bar .yvp-settings-container .yvp-settings-item:hover{background-color:rgba(255,255,255,0.2);border-radius:3px}.yvp-fuji .yvp-bottom-bar .yvp-settings-container .yvp-settings-item.last-item{margin-right:0}.yvp-fuji .yvp-bottom-bar .yvp-settings-container .yvp-settings-item.yvp-disabled{display:none;pointer-events:none}.yvp-fuji .yvp-bottom-bar .yvp-settings-container .yvp-settings-activated{color:#fff;font-weight:normal;border-radius:3px;background-color:rgba(255,255,255,0.4);}.yvp-fuji .yvp-bottom-bar .yvp-settings-container .yvp-settings-activated:hover{background-color:rgba(255,255,255,0.4)}.yvp-main-settings.open{display:block}.yvp-main-settings.close{display:none}.yvp-main-settings .yvp-settings-divider{display:block;height:1px;margin:16px 0 16px 0;background:rgba(255,255,255,0.2)}.yvp-main-settings .yvp-settings-embed.close{display:none}.yvp-main-settings .yvp-settings-embed.open{display:block}.yvp-main-settings .yvp-input-container{height:20px;border:1px solid rgba(255,255,255,0.2);border-radius:4px}.yvp-main-settings .yvp-embed-input{display:block;min-width:178px;padding:3px 10px;font-size:11px;color:rgba(255,255,255,0.6);background:transparent;outline:none;box-shadow:none;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;}.yvp-main-settings .yvp-embed-input:hover{color:#fff;cursor:pointer}.yvp-main-settings .yvp-settings-quality{min-width:200px;display:none;}.yvp-main-settings .yvp-settings-quality.yvap-quality-enabled{display:block}.yvp-main-settings .yvap-settings-cc{min-width:115px;max-width:145px;cursor:pointer;}.yvp-main-settings .yvap-settings-cc .yvp-settings-header{display:inline-block;}.yvp-main-settings .yvap-settings-cc .yvp-settings-header:hover{color:rgba(255,255,255,0.6);opacity:1}'),i.prototype.create=function(){var e=this,t=l.render(u,{strings:s.i18n,qualityMap:e._qualityMap}),n=e._ccOptions.render();return e._node=t,e._mainSettings=t.querySelector(".yvp-main-settings"),e._qualityNode=e._mainSettings.querySelector(".yvp-settings-quality"),e._qualityAutoBtn=e._mainSettings.querySelector("."+e._qualityMap.auto.btnClass),e._qualityLowBtn=e._mainSettings.querySelector("."+e._qualityMap.low.btnClass),e._qualityMediumBtn=e._mainSettings.querySelector("."+e._qualityMap.medium.btnClass),e._qualityHighBtn=e._mainSettings.querySelector("."+e._qualityMap.high.btnClass),e._ccOptionsLink=e._mainSettings.querySelector(".yvap-settings-cc"),e._currentActivatedQuality=e._qualityAutoBtn,n.length>0&&(n.forEach(function(t){e._node.appendChild(t)}),e._ccSettingsMainScreen=n[0],e._backToMainSettings=e._ccSettingsMainScreen.querySelector(".yvp-cc-back-to-settings")),e._bindEvents(),t},i.prototype._bindEvents=function(){var e=this;e._ccOptionsTap=new a(e._ccOptionsLink),e._onCcOptionsTap=function(t){t.stopPropagation(),e._showCCMainOptions()},e._ccOptionsLink.addEventListener("tap",e._onCcOptionsTap),e._backToMainSettingsTap=new a(e._backToMainSettings),e._onBackToMainSettingsTap=function(t){t.stopPropagation(),e._backToSettings()},e._backToMainSettings.addEventListener("tap",e._onBackToMainSettingsTap),e._settingContainerTap=new a(e._node),e._onSettingContainerTap=function(e){e.stopPropagation()},e._node.addEventListener("tap",e._onSettingContainerTap)},i.prototype._showCCMainOptions=function(){var e=this;l.classList(e._mainSettings).remove("open"),l.classList(e._mainSettings).add("close"),l.classList(e._ccSettingsMainScreen).remove("close"),l.classList(e._ccSettingsMainScreen).add("open")},i.prototype._backToSettings=function(){var e=this;l.classList(e._mainSettings).remove("close"),l.classList(e._mainSettings).add("open"),l.classList(e._ccSettingsMainScreen).remove("add"),l.classList(e._ccSettingsMainScreen).add("close")},i.prototype._bindQualitySelection=function(e,t,n,i,r){var s=this;null!==e?(l.classList(t).remove("yvp-disabled"),"auto"!==r&&(s._availableStreamCount++,s._onlyAvailableStream=r),s._qualityMap[r].bitrate=e.bitrate,s[n]=function(n){n.stopPropagation(),s._bindQualityActivatedClass(t);var i="sr-"+r;s._eventBus.publish(o.API.UI_INTERACT,{srcElement:i}),s._eventBus.publish(o.QUALITY_SELECTED,{preference:r,stream:e}),s._model.playback.quality=r,c.log("selected stream with bitrate: "+e.bitrate)},s[i]=new a(t),t.addEventListener("tap",s[n])):l.classList(t).add("yvp-disabled")},i.prototype._bindVideoQuality=function(){var e=this;e._populateStreamSelections(),e._bindQualitySelection(e._lowQualityStream,e._qualityLowBtn,"_onQualityLowTap","_qualityLowTap","low"),e._bindQualitySelection(e._mediumQualityStream,e._qualityMediumBtn,"_onQualityMediumTap","_qualityMediumTap","medium"),e._bindQualitySelection(e._highQualityStream,e._qualityHighBtn,"_onQualityHighTap","_qualityHighTap","high"),e._bindQualitySelection(e._autoQualityStream,e._qualityAutoBtn,"_onQualityAutoTap","_qualityAutoTap","auto"),e._checkForOnlyOneStream()},i.prototype._populateStreamSelections=function(){var e=this;e._lowQualityStream=null,e._mediumQualityStream=null,e._highQualityStream=null,e._streams=e._model.playlist.getCurrentItem().streams,e._streamCapability=e._model.capabilities[e._model.playbackState.rendererType],e._setAutoQualityStream(),e._streams.length>1?e._streamMap=l.mapStreamsToQualities(e._streams):e._streamMap=l.mapStreamsToQualities({bitrates:e._model.playback.bitrates,heights:e._model.playback.heights}),e._lowQualityStream=e._streamMap.low,e._mediumQualityStream=e._streamMap.medium,
e._highQualityStream=e._streamMap.high},i.prototype._checkForOnlyOneStream=function(){var e=this;if(1===e._availableStreamCount){var t=e._qualityMap[e._onlyAvailableStream].btnClass,n=e._qualityNode.querySelector("."+t);l.classList(n).add("yvp-disabled")}},i.prototype._onPlaybackStarted=function(){var e,t=this,n=l.shouldEnableQualitySelector(t._model);n?(t._bindVideoQuality(),e=t._qualityNode.querySelector("."+t._qualityMap.auto.btnClass),t._bindQualityActivatedClass(e),l.classList(t._qualityNode).add("yvap-quality-enabled")):l.classList(t._qualityNode).remove("yvap-quality-enabled")},i.prototype._bindQualityActivatedClass=function(e){var t=this;l.classList(t._currentActivatedQuality).remove("yvp-settings-activated"),t._currentActivatedQuality=e?e:t._qualityAutoBtn,l.classList(t._currentActivatedQuality).add("yvp-settings-activated")},i.prototype._destroyVQEventListener=function(e,t,n,i){t&&n&&(n.destroy(),e.removeEventListener("tap",i))},i.prototype._setAutoQualityStream=function(){var e=this,t=p.findStreamByProperty(e._streams,"bitrate",e._model.playback.desiredBitrate,e._streamCapability);e._autoQualityStream=t},i.prototype._bindEmbedCode=function(){var e=this,t=e._model.playlist.getCurrentItem(),n=e._getShareUrl(),i=t.embedCode||n,r=t.embedRights,c=e._node.querySelector(".yvp-settings-embed");e._emebedInputBox=e._node.querySelector(".yvp-embed-input"),e._embedCodeTap=new a(e._emebedInputBox),e._onEmbedCodeTap=function(t){t.target.focus(),t.target.setSelectionRange(0,t.target.value.length),e._eventBus.publish(o.API.UI_INTERACT,{srcElement:"settings-embed"})},e._emebedInputBox.addEventListener("tap",e._onEmbedCodeTap),n?(e._emebedInputBox.value=r?e.generateEmbedCode(i):s.i18n.EMBED_NOT_ALLOWED,l.classList(c).add("open"),l.classList(c).remove("close")):(l.classList(c).add("close"),l.classList(c).remove("open"))},i.prototype._getShareUrl=function(){var e=this,t=e._model.playlist&&e._model.playlist.getCurrentItem(),n=t&&t.shareUrl;return!e._model.playback.playInlineVideo&&window.location.pathname.indexOf(".html")>-1&&(n=window.location.protocol+"//"+window.location.host+window.location.pathname),n},i.prototype.generateEmbedCode=function(e){return e.match(/<iframe/)?e:"<iframe width='640' height='360' scrolling='no' frameborder='0' src='"+e+"?format=embed' allowfullscreen='true' mozallowfullscreen='true' webkitallowfullscreen='true' allowtransparency='true'></iframe>"},i.prototype.destroy=function(){var e=this;e._ccOptionsTap&&e._ccOptionsLink&&(e._ccOptionsTap.destroy(),e._ccOptionsLink.removeEventListener("tap",e._onCcOptionsTap)),e._embedCodeTap&&e._emebedInputBox&&(e._embedCodeTap.destroy(),e._emebedInputBox.removeEventListener("tap",e._onEmbedCodeTap)),e._backToMainSettingsTap&&e._backToMainSettings&&(e._backToMainSettingsTap.destroy(),e._backToMainSettings.removeEventListener("tap",e._onBackToMainSettingsTap)),e._settingContainerTap&&e._node&&(e._settingContainerTap.destroy(),e._node.removeEventListener("tap",e._onSettingContainerTap)),e._destroyVQEventListener(e._qualityAutoBtn,e._autoQualityStream,e._qualityAutoTap,e._onQualityAutoTap),e._destroyVQEventListener(e._qualityLowBtn,e._lowQualityStream,e._qualityLowTap,e._onQualityLowTap),e._destroyVQEventListener(e._qualityMediumBtn,e._mediumQualityStream,e._qualityMediumTap,e._onQualityMediumTap),e._destroyVQEventListener(e._qualityHighBtn,e._highQualityStream,e._qualityHighTap,e._onQualityHighTap),e._ccOptions=null,e._qualityNode=null,e._node=null}},{"../../../lib":"bRhrlU","../../../lib/logger":"IS9j5T","../../src/stream":"Af6MnA","../event":"YJm+dH","../strings":"XwKsC9","../tap":"dsc79Q","../util":"jJTEqU","./fuji-cc-options":25,"./fuji-settings.html":34,fs:145,"insert-css":160}],36:[function(e,t,n){var i=new(e("hogan.js/lib/template").Template)(function(e,t,n){var i=this;return i.b(n=n||""),i.b("<div class='yvp-start-screen' tabindex='-1'>"),i.b("\n"+n),i.b("    <img class='yvp-start-screen-image' src='"),i.b(i.v(i.f("imageSrc",e,t,0))),i.b("' width='"),i.b(i.v(i.f("width",e,t,0))),i.b("' height='"),i.b(i.v(i.f("height",e,t,0))),i.b("' aria-hidden='true'>"),i.b("\n"+n),i.s(i.d("config.showButton",e,t,1),e,t,0,188,308,"{{ }}")&&(i.rs(e,t,function(e,t,n){n.b("        <div class='yvp-start-screen-button' tabindex='0' aria-label='"),n.b(n.v(n.d("strings.PLAY_VIDEO",e,t,0))),n.b("' role='button'></div>"),n.b("\n")}),e.pop()),i.b("    <div class='yvp-start-screen-bar-wrapper'>"),i.b("\n"+n),i.b("        <div class='yvp-start-screen-bar' tabindex='-1'>"),i.b("\n"+n),i.s(i.d("config.showProvider",e,t,1),e,t,0,471,579,"{{ }}")&&(i.rs(e,t,function(e,t,n){n.b("                <h4 class='yvp-start-screen-provider' tabindex='1'>"),n.b(n.v(n.d("item.provider.name",e,t,0))),n.b("</h4>"),n.b("\n")}),e.pop()),i.s(i.d("config.showTitle",e,t,1),e,t,0,637,734,"{{ }}")&&(i.rs(e,t,function(e,t,n){n.b("                <h3 class='yvp-start-screen-title' tabindex='2'>"),n.b(n.v(n.d("item.title",e,t,0))),n.b("</h3>"),n.b("\n")}),e.pop()),i.s(i.d("config.showDescription",e,t,1),e,t,0,795,902,"{{ }}")&&(i.rs(e,t,function(e,t,n){n.b("                <p class='yvp-start-screen-description' tabindex='3'>"),n.b(n.v(n.d("item.description",e,t,0))),n.b("</p>"),n.b("\n")}),e.pop()),i.b("        </div>"),i.b("\n"+n),i.b("    </div>"),i.b("\n"+n),i.b("</div>"),i.b("\n"),i.fl()});t.exports={render:function(){return i.render.apply(i,arguments)},r:function(){return i.r.apply(i,arguments)},ri:function(){return i.ri.apply(i,arguments)}}},{"hogan.js/lib/template":159}],37:[function(e,t,n){"use strict";function i(e){var t=this;t._eventBus=e}t.exports=i;var r=e("../event"),o=e("../tap"),a=e("../util"),s=e("../strings"),l=e("../../../lib/user-agent"),c=e("./fuji-start-screen.html");i.prototype.create=function(e,t){var n=this,i=t.ui.startScreenConfig,p={showTitle:i.showTitle&&e.title,showButton:i.showButton,showDescription:i.showDescription&&e.description,showProvider:i.showProvider&&e.provider&&e.provider.name},d=e.images.large||e.images.thumbnail||e.images.medium||e.images.small||e.images.provider;return n.node=a.render(c,{item:e,config:p,width:t.uiState.width,height:t.uiState.height,imageSrc:d,strings:s.i18n}),n._startScreenTap=new o(n.node),n._onStartScreenTap=function(){var e=function(){n._eventBus.publish(r.START_SCREEN_CLICK),n._eventBus.publish(r.API.UI_INTERACT,{srcElement:"startScreen"})};l.htc_one?setTimeout(e,500):e()},n.node.addEventListener("tap",n._onStartScreenTap),n.node},i.prototype.destroy=function(){var e=this;e._startScreenTap.destroy(),e.node.removeEventListener("tap",e._onStartScreenTap),e.node=null}},{"../../../lib/user-agent":"ty5FFo","../event":"YJm+dH","../strings":"XwKsC9","../tap":"dsc79Q","../util":"jJTEqU","./fuji-start-screen.html":36}],38:[function(e,t,n){var i=new(e("hogan.js/lib/template").Template)(function(e,t,n){var i=this;return i.b(n=n||""),i.b("<div>"),i.b("\n"+n),i.b("    <div class='yvp-top-bar'>"),i.b("\n"+n),i.b("        <a class='yvp-provider-logo' target='_blank' aria-hidden='true'></a>"),i.b("\n"+n),i.b("        <div class='yvp-content-type hide' tabindex='0'></div>"),i.b("\n"+n),i.b("    </div>"),i.b("\n"+n),i.b("    <div class='yvp-login-prompt' id='yvp-login-prompt' role='dialog' tabindex='0'>"),i.b("\n"+n),i.b("        <div class='yvp-login-prompt-close' role='button' tabindex='0'></div>"),i.b("\n"+n),i.b("        <p class='yvp-login-prompt-msg' tabindex='0'>"),i.b(i.v(i.d("strings.LOGIN_MESSAGE",e,t,0))),i.b("</p>"),i.b("\n"+n),i.b("        <div class='yvp-login-yahoo-icn' role='button' tabindex='0'></div>"),i.b("\n"+n),i.b("    </div>"),i.b("\n"+n),i.b("    <div class='yvp-bottom-bar'>"),i.b("\n"+n),i.b("        <div class='yvp-bottom-container'>"),i.b("\n"+n),i.b("            <div class='yvp-slider' role='slider' tabindex='0'>"),i.b("\n"+n),i.b("                <div class='yvp-slider-extension' aria-hidden='true'></div>"),i.b("\n"+n),i.b("                <div class='yvp-handle'></div>"),i.b("\n"+n),i.b("                <div class='yvp-buffer-bar'></div>"),i.b("\n"+n),i.b("                <div class='yvp-playback-bar'></div>"),i.b("\n"+n),i.b("                <div class='yvp-visual-seek'>"),i.b("\n"+n),i.b("                    <div class='yvp-vs-thumbnail'></div>"),i.b("\n"+n),i.b("                    <div class='yvp-vs-time'></div>"),i.b("\n"+n),i.b("                </div>"),i.b("\n"+n),i.b("            </div>"),i.b("\n"+n),i.b("            <div class='yvp-play-controls'>"),i.b("\n"+n),i.b("                <div class='yvp-play-btn' role='button' tabindex='0'></div>"),i.b("\n"+n),i.b("                <div class='yvp-upnext-container hide'>"),i.b("\n"+n),i.b("                    <div class='yvp-upnext-btn' role='button'>"),i.b("\n"+n),i.b("                    </div>"),i.b("\n"+n),i.b("                    <div class='yvp-upnext-playlist' role='dialog'>"),i.b("\n"+n),i.b("                        <div class='yvp-hover-elem'></div>"),i.b("\n"+n),i.b("                    </div>"),i.b("\n"+n),i.b("                </div>"),i.b("\n"+n),i.b("                <div class='yvp-time-container' tabindex='-1' aria-hidden='true'>"),i.b("\n"+n),i.b("                    <div class='yvp-current-time'></div>"),i.b("\n"+n),i.b("                    <div class='yvp-total-time'></div>"),i.b("\n"+n),i.b("                </div>"),i.b("\n"+n),i.b("            </div>"),i.b("\n"+n),i.b("            <div class='yvp-menu-controls'>"),i.b("\n"+n),i.b("                <div class='yvp-volume-btn button' role='button' tabindex='0'>"),i.b("\n"+n),i.b("                    <div class='yvp-volume-bar-container'>"),i.b("\n"+n),i.b("                        <div class='yvp-volume-level'>"),i.b("\n"+n),i.b("                            <div class='yvp-volume-bar'>"),i.b("\n"+n),i.b("                                <div class='yvp-volume-handle'></div>"),i.b("\n"+n),i.b("                            </div>"),i.b("\n"+n),i.b("                            <div class='yvp-volume-value'></div>"),i.b("\n"+n),i.b("                        </div>"),i.b("\n"+n),i.b("                    </div>"),i.b("\n"+n),i.b("                </div>"),i.b("\n"+n),i.b("                <div class='yvp-cc-btn button hide' role='button' tabindex='0' aria-label='"),i.b(i.v(i.d("strings.CC",e,t,0))),i.b("'></div>"),i.b("\n"+n),i.b("                <div class='yvp-setting-btn button' role='button' tabindex='0' aria-label='"),i.b(i.v(i.d("strings.SETTINGS",e,t,0))),i.b("'>"),i.b("\n"+n),i.b("                    <div class='yvp-setting-pointer' aria-hidden='true'></div>"),i.b("\n"+n),i.b("                </div>"),i.b("\n"+n),i.b("                <div class='yvp-chromecast-btn button' role='button' tabindex='0' style='display:none;' aria-label='"),i.b(i.v(i.d("strings.CHROMECAST",e,t,0))),i.b("'></div>"),i.b("\n"+n),i.b("                <div class='yvp-fullscreen-btn button' role='button' tabindex='0'></div>"),i.b("\n"+n),i.b("            </div>"),i.b("\n"+n),i.b("        </div>"),i.b("\n"+n),i.b("    </div>"),i.b("\n"+n),i.b("    <div class='yvp-cast-overlay'>"),i.b("\n"+n),i.b("        <div>"),i.b("\n"+n),i.b("            <div class='cast-overlay-header'>"),i.b("\n"+n),i.b("                <div class='cast-device-info'>"),i.b("\n"+n),i.b("                    <p class='cast-device-name'>"),i.b(i.v(i.d("strings.CAST_PLAYING_RECEIVER",e,t,0))),i.b("</p>"),i.b("\n"+n),i.b("                    <small class='cast-device-type'>"),i.b(i.v(i.d("strings.CHROMECAST",e,t,0))),i.b("</small>"),i.b("\n"+n),i.b("                </div>"),i.b("\n"+n),i.b("            </div>"),i.b("\n"+n),i.b("            <div class='cast-overlay-content'></div>"),i.b("\n"+n),i.b("            <div class='cast-overlay-footer'>"),i.b("\n"+n),i.b("                <small class='cast-disconnect-btn'>"),i.b(i.v(i.d("strings.DISCONNECT",e,t,0))),i.b("</small>"),i.b("\n"+n),i.b("            </div>"),i.b("\n"+n),i.b("        </div>"),i.b("\n"+n),i.b("    </div>"),i.b("\n"+n),i.b("    <div class='yvp-mute-indicator'></div>"),i.b("\n"+n),i.b("    <div class='yvp-custom-controls'></div>"),i.b("\n"+n),i.b("    <div class='yvp-object-overlay'></div>"),i.b("\n"+n),i.b("</div>"),i.b("\n"),i.fl()});t.exports={render:function(){return i.render.apply(i,arguments)},r:function(){return i.r.apply(i,arguments)},ri:function(){return i.ri.apply(i,arguments)}}},{"hogan.js/lib/template":159}],39:[function(e,t,n){"use strict";function i(e,t,n){var i=this;i._eventBus=e,i._view=t,i._model=n,i._isLive=!1,i._liveState=null,i._ccAvailable=!0,i._eventBus.subscribe(a.MEDIA_ITEM_LOADED,i._onMediaItemLoaded,i),i._eventBus.subscribe(a.Video.PLAYING,i._onVideoPlaying,i),i._eventBus.subscribe(a.PLAYBACK_STARTED,i._onPlaybackStarted,i),i._eventBus.subscribe(a.AD_PLAYBACK_STARTED,i._onAdPlaying,i),i._eventBus.subscribe(a.PLAYBACK_PROGRESS,i._onPlaybackProgress,i),i._eventBus.subscribe(a.AD_PLAYBACK_PROGRESS,i._onAdPlaybackProgress,i),i._eventBus.subscribe(a.UPDATE_AD_BREAKS,i._updateAdBreaks,i),i._eventBus.subscribe(a.UPDATE_AD_COUNT,i._updateAdCount,i),i._eventBus.subscribe(a.CC.SHOW_CONTROLS,i._setCCUIAvailability,i),i._eventBus.subscribe(a.CC.REMOVED,i._checkCCAvailability,i),i._eventBus.subscribe(a.CC.UI_TOGGLE,i._toggleCCFromSettings,i),i._eventBus.subscribe(a.API.CAST_AVAILABILITY_CHANGE,i._setChromecastBtnVisibility,i),i._eventBus.subscribe(a.CAST.CONNECTION_STATUS_CHANGED,i._onCastConnectionChange,i),i._eventBus.subscribe(a.CAST.MEDIA_CHANGED,i._onCastMediaLoaded,i),i._eventBus.subscribe(a.CAST.CAPTION_AVAILABILITY_CHANGED,i._onCastCCAvailabilityChanged,i),i._eventBus.subscribe(a.CONTROLS_BAR_CHANGE,i._onControlsBarChange,i),i._eventBus.subscribe(a.KEYDOWN,i._onKeyDown,i),i._eventBus.subscribe(a.Video.CLICK,i._onVideoClick,i)}t.exports=i;var r=(e("fs"),e("insert-css")),o=e("../../../lib/user-agent"),a=(e("../cc"),e("../error"),e("../event")),s=(e("../stream"),e("../strings")),l=e("../tap"),c=e("../util"),p=e("../../../lib"),d=e("./fuji-settings"),u=e("../views/uiwidgets/tooltip"),_=e("./fuji-yahoo-controls.html"),v="on";r(".yvp-fuji.yvp-content.yvp-browser-desktop.yvp-state-video.yvp-hide-controls .yvp-bottom-bar{opacity:0;-webkit-transition:opacity .3s ease-in-out .1s;-moz-transition:opacity .3s ease-in-out .1s;-o-transition:opacity .3s ease-in-out .1s;transition:opacity .3s ease-in-out .1s}.yvp-fuji.yvp-content.yvp-browser-desktop.yvp-state-video.yvp-hide-controls .yvp-bottom-bar:hover{opacity:1}.yvp-fuji.yvp-content.yvp-browser-desktop.yvp-state-video.yvp-hide-controls.yvp-muted .yvp-mute-indicator{opacity:.8;visibility:visible;-webkit-transition:visibility 0s linear .5s,opacity .5s ease-in .8s;-moz-transition:visibility 0s linear .5s,opacity .5s ease-in .8s;-o-transition:visibility 0s linear .5s,opacity .5s ease-in .8s;transition:visibility 0s linear .5s,opacity .5s ease-in .8s}.yvp-fuji.yvp-content.yvp-browser-desktop.yvp-state-video.yvp-hide-controls .yvp-top-bar .yvp-content-type{opacity:0;-webkit-transition:opacity .3s ease-in-out .1s;-moz-transition:opacity .3s ease-in-out .1s;-o-transition:opacity .3s ease-in-out .1s;transition:opacity .3s ease-in-out .1s}.yvp-fuji.yvp-content:hover .yvp-bottom-bar{opacity:1;-webkit-transition:opacity .3s ease-in-out .1s;-moz-transition:opacity .3s ease-in-out .1s;-o-transition:opacity .3s ease-in-out .1s;transition:opacity .3s ease-in-out .1s}.yvp-fuji.yvp-content:hover .yvp-ads-overlay{-webkit-transition:height 0s;-moz-transition:height 0s;-o-transition:height 0s;transition:height 0s}.yvp-fuji.yvp-content:hover.yvp-muted .yvp-mute-indicator{opacity:0;visibility:hidden;-webkit-transition:visibility 0s linear .1s,opacity 0s ease-out 0s;-moz-transition:visibility 0s linear .1s,opacity 0s ease-out 0s;-o-transition:visibility 0s linear .1s,opacity 0s ease-out 0s;transition:visibility 0s linear .1s,opacity 0s ease-out 0s}.yvp-fuji.yvp-content:hover.yvp-muted .yvp-mute-indicator:hover{opacity:0;visibility:visible;-webkit-transition:visibility 0s linear .5s,opacity .2s ease-out 1s;-moz-transition:visibility 0s linear .5s,opacity .2s ease-out 1s;-o-transition:visibility 0s linear .5s,opacity .2s ease-out 1s;transition:visibility 0s linear .5s,opacity .2s ease-out 1s}.yvp-fuji.yvp-content.yvp-flag-paused.yvp-browser-desktop.yvp-state-video.yvp-hide-controls .yvp-bottom-bar{opacity:0;-webkit-transition:opacity .3s ease-in-out .1s;-moz-transition:opacity .3s ease-in-out .1s;-o-transition:opacity .3s ease-in-out .1s;transition:opacity .3s ease-in-out .1s}.yvp-fuji.yvp-content.yvp-flag-paused.yvp-browser-desktop.yvp-state-video.yvp-hide-controls .yvp-bottom-bar:hover{opacity:1}.yvp-fuji.yvp-content.yvp-flag-paused.yvp-browser-desktop.yvp-state-video.yvp-hide-controls .yvp-top-bar .yvp-content-type{opacity:0;-webkit-transition:opacity .3s ease-in-out .1s;-moz-transition:opacity .3s ease-in-out .1s;-o-transition:opacity .3s ease-in-out .1s;transition:opacity .3s ease-in-out .1s}.yvp-fuji.yvp-content.yvp-flag-paused:hover .yvp-bottom-bar{opacity:1;-webkit-transition:none;-moz-transition:none;-o-transition:none;transition:none}.yvp-fuji.yvp-content.yvp-flag-paused:hover .yvp-top-bar .yvp-content-type{opacity:1;-webkit-transition:none;-moz-transition:none;-o-transition:none;transition:none}.yvp-fuji.yvp-content.yvp-user-inactive div.yvp-bottom-bar{cursor:none;}.yvp-fuji.yvp-content.yvp-user-inactive div.yvp-bottom-bar .yvp-slider,.yvp-fuji.yvp-content.yvp-user-inactive div.yvp-bottom-bar .yvp-buffer-bar,.yvp-fuji.yvp-content.yvp-user-inactive div.yvp-bottom-bar .yvp-playback-bar{height:3px;bottom:2px;direction:ltr;-webkit-transition:height .5s linear 0s,bottom .5s linear 0s;-moz-transition:height .5s linear 0s,bottom .5s linear 0s;-o-transition:height .5s linear 0s,bottom .5s linear 0s;transition:height .5s linear 0s,bottom .5s linear 0s;-moz-transition:none}.yvp-fuji.yvp-content.yvp-user-inactive div.yvp-bottom-bar .yvp-handle{-webkit-transform:scale(0);-moz-transform:scale(0);-ms-transform:scale(0);-o-transform:scale(0);transform:scale(0);margin-top:-4px;-webkit-transition:all .51s linear 0s;-moz-transition:all .51s linear 0s;-o-transition:all .51s linear 0s;transition:all .51s linear 0s}.yvp-fuji.yvp-content.yvp-browser-desktop.yvp-state-video.yvp-disable-controls .yvp-bottom-bar{opacity:0 !important}.yvp-fuji .yvp-top-bar{position:absolute;z-index:28;width:100%;top:0;}.yvp-fuji .yvp-top-bar.hide{display:none}.yvp-fuji .yvp-top-bar .yvp-provider-logo{position:absolute;right:0;display:block;height:20px;width:55px;margin-top:20px;margin-right:10px;border:0;background-repeat:no-repeat;cursor:pointer;}.yvp-fuji .yvp-top-bar .yvp-provider-logo.yvp-hide{display:none}.yvp-fuji .yvp-top-bar .yvp-ad-count-container{display:none;position:absolute;left:16px;top:12px}.yvp-fuji .yvp-top-bar .yvp-ad-count,.yvp-fuji .yvp-top-bar .yvp-ad-countdowntimer{display:inline-block;color:#fff;position:relative;text-shadow:0 1px #000;font-size:11px;font-weight:normal}.yvp-fuji .yvp-top-bar .yvp-ad-countdowntimer{padding-left:5px;text-align:right}.yvp-fuji .yvp-bottom-bar{position:absolute;background-color:transparent;background-image:-webkit-linear-gradient(-180deg, rgba(255,255,255,0) 0%, rgba(18,23,23,0.2) 50%, rgba(18,23,23,0.8) 100%);background-image:-o-linear-gradient(-180deg, rgba(255,255,255,0) 0%, rgba(18,23,23,0.2) 50%, rgba(18,23,23,0.8) 100%);background-image:linear-gradient(-180deg, rgba(255,255,255,0) 0%, rgba(18,23,23,0.2) 50%, rgba(18,23,23,0.8) 100%);left:0;right:0;bottom:0;width:100%;height:100px;z-index:30;cursor:auto;}.yvp-fuji .yvp-bottom-bar .yvp-bottom-container{display:block;position:relative;top:56px;height:44px;margin:0 10px 0 10px;cursor:auto;}.yvp-fuji .yvp-bottom-bar .yvp-bottom-container .yvp-menu-controls .yvp-volume-btn{background-image:url(\"data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iODgiIGhlaWdodD0iODgiIHZpZXdCb3g9IjAgMCA4OCA4OCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48dGl0bGU+dm9sdW1lPC90aXRsZT48ZyBmaWxsPSIjRkZGIiBmaWxsLXJ1bGU9ImV2ZW5vZGQiPjxwYXRoIGQ9Ik0yNS42ODIgNTUuMDE2SDE2LjUzYy0uNDk1IDAtLjk0NC0uMTk0LTEuMjczLS41MTItLjM2My0uMzM0LS41OS0uODE0LS41OS0xLjM0OHYtMTguMjRjMC0uMTcuMDIyLS4zMzIuMDY0LS40ODcuMi0uNzkzLjkyLTEuMzc4IDEuNzc1LTEuMzc4aDkuMTYyVjMzbDE0LjY2Ni0xNC42Njd2NTEuMzM0bC0xNC42NS0xNC42NXpNNTIuNDQgNzAuMjQ1Yy0xLjY0NiAwLTIuOTI2LTEuMzQyLTMuMjkzLTIuNjAzLS41NS0xLjg4LjQ4OC0zLjg4IDIuMzEzLTQuNDYgOC4wMzMtMi41NiAxMy42NDQtMTAuNDEgMTMuNjQ0LTE5LjA5IDAtOC42NjMtNS42MS0xNi41MDYtMTMuNjQ2LTE5LjA3Mi0xLjgyNC0uNTgtMi44Ni0yLjU4My0yLjMxLTQuNDY0QzQ5LjU5IDE5LjA1IDUwLjk2NyAxOCA1Mi41IDE4Yy4zNTIgMCAuNzAyLjA1NSAxLjA0LjE2NCAxMC45MjUgMy40ODggMTguNTU4IDE0LjE1IDE4LjU1OCAyNS45MjggMCAxMS4xMzYtNy4wNjcgMjEuMDYtMTguNDQ0IDI1LjktLjM5My4xNy0uOC4yNTMtMS4yMTUuMjUzem0uMDk3LTE1LjQ4NGMtMS4wMDYgMC0xLjk2OC0uNDI3LTIuNjQtMS4xNzUtMS4yOTUtMS40Ni0xLjE2OC0zLjcuMjgtNC45OTcgMS4zMzgtMS4xOTMgMi4xMDUtMi45MDIgMi4xMDUtNC42OTQgMC0xLjgxOC0uNzYyLTMuNTM2LTIuMDktNC43MTItMS40NTYtMS4yOTctMS41OS0zLjUzNS0uMy00Ljk5Mi42NzUtLjc1OCAxLjY0LTEuMTkgMi42NS0xLjE5Ljg2NCAwIDEuNjk3LjMxNiAyLjM0NS44OSAyLjg0IDIuNTIzIDQuNDY3IDYuMTcgNC40NjcgMTAuMDA0IDAgMy44MDMtMS42MjYgNy40MzctNC40NjIgOS45Ny0uNjUuNTgtMS40ODYuODk3LTIuMzU1Ljg5N3oiLz48L2c+PC9zdmc+\");background-size:100%;left:0;top:0;opacity:.8;}.yvp-fuji .yvp-bottom-bar .yvp-bottom-container .yvp-menu-controls .yvp-volume-btn:hover,.yvp-fuji .yvp-bottom-bar .yvp-bottom-container .yvp-menu-controls .yvp-volume-btn:active{opacity:1}.yvp-fuji .yvp-bottom-bar .yvp-bottom-container .yvp-menu-controls .yvp-volume-btn.muted{background-image:url(\"data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iODgiIGhlaWdodD0iODgiIHZpZXdCb3g9IjAgMCA4OCA4OCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48dGl0bGU+dm9sdW1lLW11dGU8L3RpdGxlPjxnIGZpbGw9IiNGRkYiIGZpbGwtcnVsZT0iZXZlbm9kZCI+PHBhdGggZD0iTTI1LjY4MiA1NS4wMTZIMTYuNTNjLS40OTUgMC0uOTQ0LS4xOTQtMS4yNzMtLjUxMi0uMzYzLS4zMzQtLjU5LS44MTQtLjU5LTEuMzQ4di0xOC4yNGMwLS4xNy4wMjItLjMzMi4wNjQtLjQ4Ny4yLS43OTMuOTItMS4zNzggMS43NzUtMS4zNzhoOS4xNjJWMzNsMTQuNjY2LTE0LjY2N3Y1MS4zMzRsLTE0LjY1LTE0LjY1ek01OC45MDQgMzkuMDUybC00Ljk2OC00Ljk2OGMtMS40MjgtMS40MjgtMy43NTQtMS40MzItNS4xODYgMC0xLjQzIDEuNDMtMS40MzIgMy43NTMgMCA1LjE4NWw0Ljk2OCA0Ljk2Ny00Ljk2OCA0Ljk2OGMtMS40MjggMS40MjgtMS40MyAzLjc1MyAwIDUuMTg1IDEuNDMgMS40MyAzLjc1NCAxLjQzMiA1LjE4NiAwbDQuOTY4LTQuOTY4IDQuOTY4IDQuOTdjMS40MjcgMS40MjYgMy43NTMgMS40MyA1LjE4NS0uMDAyIDEuNDMtMS40MyAxLjQzMi0zLjc1MyAwLTUuMTg1bC00Ljk2OC00Ljk2OCA0Ljk2Ny00Ljk2OGMxLjQyOC0xLjQzIDEuNDMyLTMuNzU0IDAtNS4xODYtMS40My0xLjQzLTMuNzUzLTEuNDMyLTUuMTg1IDBsLTQuOTY4IDQuOTY4eiIvPjwvZz48L3N2Zz4=\")}.yvp-fuji .yvp-bottom-bar .yvp-bottom-container .yvp-menu-controls .yvp-setting-btn{background-image:url(\"data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iODgiIGhlaWdodD0iODgiIHZpZXdCb3g9IjAgMCA4OCA4OCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48dGl0bGU+c2V0dGluZ3M8L3RpdGxlPjxnIGZpbGw9Im5vbmUiIGZpbGwtcnVsZT0iZXZlbm9kZCI+PHBhdGggZD0iTTU1LjczNyA0NC4zMTRjLS4wMDQtNi4yMTUtNS4xMDQtMTEuMzM4LTExLjMyLTExLjM1Ni02LjI3LS4wMjItMTEuNDIgNS4xMDgtMTEuNDE3IDExLjM3NC4wMDQgNi4yMTUgNS4xMDQgMTEuMzM0IDExLjMxNSAxMS4zNiA2LjI3NC4wMiAxMS40MjYtNS4xMTIgMTEuNDIyLTExLjM3OHptMTAuMjc4IDQuNDAzYy0zLjE0IDEuMTg4LTQuNDc0IDQuMzgyLTMuMDg4IDcuNDMuNDQuOTY3Ljk1NCAxLjkxIDEuMzQyIDIuOTAzLjExMy4zLjAyLjg1LS4yIDEuMDg1LTEuMjU2IDEuMzQtMi41NSAyLjYzNy0zLjg5IDMuODktLjIzNC4yMi0uNzg0LjMxMi0xLjA4NC4xOTUtLjk5NC0uMzgtMS45MzYtLjg5OC0yLjkwNC0xLjMzOC0zLjAzNi0xLjM4Ni02LjI0LS4wNTItNy40MyAzLjA4Ny0uNDU3IDEuMjE2LS45IDEuNzk4LTEuMzUyIDMuMDE2aC02LjgxNmMtLjQ1LTEuMjE4LS45LTEuOC0xLjM1My0zLjAxNy0xLjE4NC0zLjE0LTQuMzg1LTQuNDc0LTcuNDI4LTMuMDg4LS45NjguNDQtMS45MS45NTMtMi45MDQgMS4zMzgtLjMuMTE3LS44NS4wMjYtMS4wODUtLjE5NC0xLjM0LTEuMjU0LTIuNi0yLjU5My0zLjkyNC0zLjg2NS0uNDMtLjQwNi0uNDA4LS43NDMtLjE2Mi0xLjIyLjQ5LS45NDYuOTUtMS45MSAxLjM4LTIuODg2IDEuMzItMi45NTUtLjAxNi02LjE0LTMuMDM3LTcuMy0xLjI0Mi0uNDc3LTIuNDk2LS45MjgtMy43NDctMS4zOXYtNi44MTZjMS4yMi0uNDUgMi40NC0uODk4IDMuNjU2LTEuMzUzIDMuMTM4LTEuMTggNC40NzItNC4zODIgMy4wODYtNy40My0uNDQtLjk2Ny0uOTUzLTEuOTEtMS4zNDItMi45MDMtLjExMy0uMy0uMDIyLS44NS4xOTgtMS4wODUgMS4yNTgtMS4zMzggMi41NTItMi42MzYgMy44OS0zLjg5LjIzNS0uMjIuNzg1LS4zMTIgMS4wODYtLjE5NS45OTQuMzgyIDEuOTM2LjkgMi45MDQgMS4zNCAzLjA0MyAxLjM4IDYuMjQ4LjA0NiA3LjQzLTMuMDkuNDUzLTEuMjE2LjktMS44NDUgMS4zNTItMy4wNmg2LjgxNmMuNDUgMS4yMTUuODk4IDEuODQ4IDEuMzUzIDMuMDYgMS4xODQgMy4xNCA0LjM4NSA0LjQ3NSA3LjQzIDMuMDkuOTY3LS40NCAxLjkxLS45NTggMi45MDMtMS4zNC4zLS4xMTcuODUtLjAyNSAxLjA4NS4xOTUgMS4zNCAxLjI1NCAyLjYgMi41OTIgMy45MjQgMy44NjQuNDMuNDA4LjQwNy43NDYuMTYyIDEuMjIyLS40OTIuOTQ2LS45NSAxLjkxLTEuMzggMi44OS0xLjMyIDIuOTUuMDE2IDYuMTQ1IDMuMDM3IDcuMjk2IDEuMjQ3LjQ3NyAyLjQ5Ny45MjggMy43NDQgMS4zOXY2LjgxNmMtMS4yMTguNDUtMi40MzUuOS0zLjY1MiAxLjM1M3oiIGZpbGw9IiNGRkYiLz48cGF0aCBkPSJNNTUuNzM3IDQ0LjI4Yy0uMDA0LTYuMjE2LTUuMTA0LTExLjMzOC0xMS4zMi0xMS4zNTYtNi4yNy0uMDIyLTExLjQyIDUuMTA3LTExLjQxNyAxMS4zNzQuMDA0IDYuMjE1IDUuMTA0IDExLjMzMyAxMS4zMTUgMTEuMzYgNi4yNzQuMDIgMTEuNDI2LTUuMTEyIDExLjQyMi0xMS4zOHptMTAuMjc4IDQuNDAzYy0zLjE0IDEuMTg4LTQuNDc0IDQuMzgyLTMuMDg4IDcuNDMuNDQuOTY3Ljk1NCAxLjkxIDEuMzQyIDIuOTAzLjExMy4zLjAyLjg1LS4yIDEuMDg1LTEuMjU2IDEuMzQtMi41NSAyLjYzNy0zLjg5IDMuODktLjIzNC4yMi0uNzg0LjMxMy0xLjA4NC4xOTYtLjk5NC0uMzgyLTEuOTM2LS45LTIuOTA0LTEuMzQtMy4wMzYtMS4zODUtNi4yNC0uMDUtNy40MyAzLjA5LS40NTcgMS4yMTYtLjkgMS44Ni0xLjM1MiAzLjA4aC02LjgxNmMtLjQ1LTEuMjItLjktMS44NjQtMS4zNTMtMy4wOC0xLjE4NC0zLjE0LTQuMzg1LTQuNDc1LTcuNDI4LTMuMDktLjk2OC40NC0xLjkxLjk1NS0yLjkwNCAxLjM0LS4zLjExNy0uODUuMDI1LTEuMDg1LS4xOTUtMS4zNC0xLjI1My0yLjYtMi41OS0zLjkyNC0zLjg2My0uNDMtLjQwNy0uNDA4LS43NDUtLjE2Mi0xLjIyLjQ5LS45NDcuOTUtMS45MTIgMS4zOC0yLjg4NyAxLjMyLTIuOTU1LS4wMTYtNi4xNDItMy4wMzctNy4zLTEuMjQyLS40NzctMi40OTYtLjkyOC0zLjc0Ny0xLjM5di02LjgxNmMxLjIyLS40NSAyLjQ0LS45IDMuNjU2LTEuMzUzIDMuMTM4LTEuMTggNC40NzItNC4zOCAzLjA4Ni03LjQyOC0uNDQtLjk2OC0uOTUzLTEuOTEtMS4zNDItMi45MDQtLjExMy0uMy0uMDIyLS44NS4xOTgtMS4wODUgMS4yNTgtMS4zNCAyLjU1Mi0yLjYzNyAzLjg5LTMuODkuMjM1LS4yMi43ODUtLjMxMiAxLjA4Ni0uMTk1Ljk5NC4zOCAxLjkzNi44OTggMi45MDQgMS4zMzggMy4wNDMgMS4zODMgNi4yNDguMDQ4IDcuNDMtMy4wODcuNDUzLTEuMjE4LjktMS44MTMgMS4zNTItMy4wMjdoNi44MTZjLjQ1IDEuMjE0Ljg5OCAxLjgxMiAxLjM1MyAzLjAyNiAxLjE4NCAzLjEzOCA0LjM4NSA0LjQ3MiA3LjQzIDMuMDg2Ljk2Ny0uNDQgMS45MS0uOTU3IDIuOTAzLTEuMzM4LjMtLjExNy44NS0uMDI2IDEuMDg1LjE5NCAxLjM0IDEuMjU0IDIuNiAyLjU5MyAzLjkyNCAzLjg2NS40My40MDcuNDA3Ljc0NC4xNjIgMS4yMi0uNDkyLjk0Ny0uOTUgMS45MS0xLjM4IDIuODktMS4zMiAyLjk1Mi4wMTYgNi4xNDYgMy4wMzcgNy4yOTcgMS4yNDcuNDc3IDIuNDk3LjkyOCAzLjc0NCAxLjM5djYuODE2Yy0xLjIxOC40NS0yLjQzNS44OTgtMy42NTIgMS4zNTN6IiBzdHJva2U9IiNGRkYiIHN0cm9rZS13aWR0aD0iLjIiLz48L2c+PC9zdmc+\");background-size:100%;left:0;opacity:.8;}.yvp-fuji .yvp-bottom-bar .yvp-bottom-container .yvp-menu-controls .yvp-setting-btn.hide{display:none}.yvp-fuji .yvp-bottom-bar .yvp-bottom-container .yvp-menu-controls .yvp-setting-btn:hover{opacity:1}.yvp-fuji .yvp-bottom-bar .yvp-bottom-container .yvp-menu-controls .yvp-setting-pointer{position:relative;display:none;width:1px;border:solid;border-color:rgba(38,40,42,0.95) transparent;border-width:6px 5px 0;top:-11px;bottom:0;left:6px;content:'';}.yvp-fuji .yvp-bottom-bar .yvp-bottom-container .yvp-menu-controls .yvp-setting-pointer.open{display:block}.yvp-fuji .yvp-bottom-bar .yvp-bottom-container .yvp-menu-controls .yvp-setting-pointer.hide{display:none}.yvp-fuji .yvp-bottom-bar .yvp-bottom-container .yvp-menu-controls .yvp-cc-btn{background-image:url(\"data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iODgiIGhlaWdodD0iODgiIHZpZXdCb3g9IjAgMCA4OCA4OCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48dGl0bGU+Y2M8L3RpdGxlPjxnIGZpbGw9IiNGRkYiIGZpbGwtcnVsZT0iZXZlbm9kZCI+PHBhdGggZD0iTTE5LjA1NCA0NC4wNlY0NGMwLTYuMzE4IDUuMDUyLTExLjI3IDExLjg2OC0xMS4yNyA0LjYgMCA3LjU1NSAxLjg1NCA5LjU1IDQuNTE2bC00LjY5NSAzLjUwMmMtMS4yODctMS41NDgtMi43NjgtMi41MzQtNC45Mi0yLjUzNC0zLjE1MiAwLTUuMzY4IDIuNTYzLTUuMzY4IDUuNzJWNDRjMCAzLjI1MiAyLjIxNSA1Ljc4NiA1LjM2NyA1Ljc4NiAyLjM0NiAwIDMuNzMyLTEuMDQ1IDUuMDgtMi42M2w0LjY5NSAzLjIyNGMtMi4xMiAyLjgxNi00Ljk4NSA0Ljg5LTkuOTcgNC44OS02LjQzIDAtMTEuNjA4LTQuNzQtMTEuNjA4LTExLjIxTTQ2LjgzNCA0NC4wNlY0NGMwLTYuMzE4IDUuMDUzLTExLjI3IDExLjg3LTExLjI3IDQuNiAwIDcuNTU3IDEuODU0IDkuNTUgNC41MTZsLTQuNjk2IDMuNTAyYy0xLjI4Ny0xLjU0OC0yLjc2NS0yLjUzNC00LjkyLTIuNTM0LTMuMTUzIDAtNS4zNzIgMi41NjMtNS4zNzIgNS43MlY0NGMwIDMuMjUyIDIuMjIgNS43ODYgNS4zNzIgNS43ODYgMi4zNDYgMCAzLjczMi0xLjA0NSA1LjA4LTIuNjNsNC42OTUgMy4yMjRjLTIuMTIgMi44MTYtNC45ODUgNC44OS05Ljk3IDQuODktNi40MyAwLTExLjYxLTQuNzQtMTEuNjEtMTEuMjEiLz48cGF0aCBkPSJNMTEuMDQyIDI1Ljc3N2g2NS45MjN2MzYuNTZIMTEuMDQydi0zNi41NnptLTcuMzc1LS4xMXYzNi42NjZjMCA1LjUgMS44MzMgNy4zMzQgNy4zMzMgNy4zMzRoNjZjNS41IDAgNy4zMzMtMS44MzQgNy4zMzMtNy4zMzRWMjUuNjY3YzAtNS41LTEuODMzLTcuMzM0LTcuMzMzLTcuMzM0SDExYy01LjUgMC03LjMzMyAxLjgzNC03LjMzMyA3LjMzNHoiLz48L2c+PC9zdmc+\");background-size:100%;top:0;left:0;opacity:.8;}.yvp-fuji .yvp-bottom-bar .yvp-bottom-container .yvp-menu-controls .yvp-cc-btn.hide{opacity:.35}.yvp-fuji .yvp-bottom-bar .yvp-bottom-container .yvp-menu-controls .yvp-cc-btn.hide:hover{opacity:.35}.yvp-fuji .yvp-bottom-bar .yvp-bottom-container .yvp-menu-controls .yvp-cc-btn:hover{opacity:1}.yvp-fuji .yvp-bottom-bar .yvp-bottom-container .yvp-menu-controls .yvp-cc-btn.on{background-image:url(\"data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iODgiIGhlaWdodD0iODgiIHZpZXdCb3g9IjAgMCA4OCA4OCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48dGl0bGU+Y2Mtb248L3RpdGxlPjxnIGZpbGw9Im5vbmUiIGZpbGwtcnVsZT0iZXZlbm9kZCI+PHBhdGggZD0iTTMuNjY3IDI1LjY2N3YzNi42NjZjMCA1LjUgMS44MzMgNy4zMzQgNy4zMzMgNy4zMzRoNjZjNS41IDAgNy4zMzMtMS44MzQgNy4zMzMtNy4zMzRWMjUuNjY3YzAtNS41LTEuODMzLTcuMzM0LTcuMzMzLTcuMzM0SDExYy01LjUgMC03LjMzMyAxLjgzNC03LjMzMyA3LjMzNHpNMTkuMDU0IDQ0LjA2VjQ0YzAtNi4zMTggNS4wNTItMTEuMjcgMTEuODY4LTExLjI3IDQuNiAwIDcuNTU1IDEuODU0IDkuNTUgNC41MTZsLTQuNjk1IDMuNTAyYy0xLjI4Ny0xLjU0OC0yLjc2OC0yLjUzNC00LjkyLTIuNTM0LTMuMTUyIDAtNS4zNjggMi41NjMtNS4zNjggNS43MlY0NGMwIDMuMjUyIDIuMjE1IDUuNzg2IDUuMzY3IDUuNzg2IDIuMzQ2IDAgMy43MzItMS4wNDUgNS4wOC0yLjYzbDQuNjk1IDMuMjI0Yy0yLjEyIDIuODE2LTQuOTg1IDQuODktOS45NyA0Ljg5LTYuNDMgMC0xMS42MDgtNC43NC0xMS42MDgtMTEuMjF6bTI3Ljc4IDBWNDRjMC02LjMxOCA1LjA1My0xMS4yNyAxMS44Ny0xMS4yNyA0LjYgMCA3LjU1NyAxLjg1NCA5LjU1IDQuNTE2bC00LjY5NiAzLjUwMmMtMS4yODctMS41NDgtMi43NjUtMi41MzQtNC45Mi0yLjUzNC0zLjE1MyAwLTUuMzcyIDIuNTYzLTUuMzcyIDUuNzJWNDRjMCAzLjI1MiAyLjIyIDUuNzg2IDUuMzcyIDUuNzg2IDIuMzQ2IDAgMy43MzItMS4wNDUgNS4wOC0yLjYzbDQuNjk1IDMuMjI0Yy0yLjEyIDIuODE2LTQuOTg1IDQuODktOS45NyA0Ljg5LTYuNDMgMC0xMS42MS00Ljc0LTExLjYxLTExLjIxeiIgZmlsbD0iI0ZGRiIvPjwvZz48L3N2Zz4=\");opacity:1}.yvp-fuji .yvp-bottom-bar .yvp-bottom-container .yvp-menu-controls .yvp-cc-btn.on.hide{opacity:.35}.yvp-fuji .yvp-bottom-bar .yvp-bottom-container .yvp-menu-controls .yvp-cc-btn.on.hide:hover{opacity:.35}.yvp-fuji .yvp-bottom-bar .yvp-volume-bar-container{display:block;position:relative;bottom:95px;left:-1px;width:24px;height:72px;padding:7px 0;background:rgba(18,23,23,0.8);border-radius:4px;z-index:1;visibility:hidden;-webkit-animation-name:none;animation-name:none;-webkit-animation-duration:0s;-moz-animation-duration:0s;animation-duration:0s;}.yvp-fuji .yvp-bottom-bar .yvp-volume-bar-container:after{display:block;border:solid;border-color:rgba(18,23,23,0.8) transparent;border-width:6px 5px 0;position:absolute;top:100%;bottom:0;left:7px;content:''}.yvp-fuji .yvp-bottom-bar .yvp-volume-bar-container.open{visibility:visible}.yvp-fuji .yvp-bottom-bar .yvp-volume-bar-container .yvp-volume-level,.yvp-fuji .yvp-bottom-bar .yvp-volume-bar-container .yvp-volume-bar{margin-top:0;height:100%}.yvp-fuji .yvp-bottom-bar .yvp-volume-bar-container .yvp-volume-bar{background:rgba(255,255,255,0.1);border-radius:2px}.yvp-fuji .yvp-bottom-bar .yvp-volume-bar-container .yvp-volume-level{background:rgba(255,255,255,0.4);width:4px;margin-left:10px;margin-top:0;border-radius:2px}.yvp-fuji .yvp-bottom-bar .yvp-volume-bar-container .yvp-volume-handle{position:relative;width:12px;height:12px;background:#fff;border:0;border-radius:50%;margin-left:-4px;z-index:2;opacity:0;}.yvp-fuji .yvp-bottom-bar .yvp-volume-bar-container .yvp-volume-handle.show{opacity:1}.yvp-fuji .yvp-bottom-bar .yvp-volume-bar-container .yvp-volume-value{background:rgba(255,255,255,0.8);border:0;border-radius:2px}.yvp-fuji .yvp-main .yvp-tooltip{display:inline-block;position:absolute;}.yvp-fuji .yvp-main .yvp-tooltip:hover{text-decoration:none;}.yvp-fuji .yvp-main .yvp-tooltip:hover .yvp-tooltip-wrapper .yvp-tooltip-content{display:table}.yvp-fuji .yvp-main .yvp-tooltip .yvp-tooltip-wrapper{bottom:34px;margin:auto;position:absolute;display:block;z-index:5;text-align:center;left:-1000px;right:-1000px;}.yvp-fuji .yvp-main .yvp-tooltip .yvp-tooltip-wrapper .yvp-tooltip-content{display:none;background:rgba(25,26,27,0.8);color:#fff;font-size:11px;margin:auto;padding:5px 11px;white-space:nowrap;text-align:center;pointer-events:none;border-radius:3px;}.yvp-fuji .yvp-main .yvp-tooltip .yvp-tooltip-wrapper .yvp-tooltip-content:before{border:solid;border-color:rgba(38,40,42,0.95) transparent;border-width:5px 3px 0;bottom:-5px;content:'';display:block;left:50%;margin-left:-3px;position:absolute;z-index:5}.yvp-fuji .yvp-main .yvp-tooltip .yvp-tooltip-wrapper.yvp-tooltip-pos-bottom{top:30px;bottom:0;}.yvp-fuji .yvp-main .yvp-tooltip .yvp-tooltip-wrapper.yvp-tooltip-pos-bottom .yvp-tooltip-content:before{border-width:0 3px 5px;top:-5px;bottom:0}.yvp-fuji .yvp-main .yvp-tooltip.yvp-tooltip-hidden .yvp-tooltip-wrapper{display:none}.yvp-fuji .yvp-main .yvp-tooltip.yvp-fullscreen-btn .yvp-tooltip-wrapper{margin-right:60px;}.yvp-fuji .yvp-main .yvp-tooltip.yvp-fullscreen-btn .yvp-tooltip-wrapper .yvp-tooltip-content:before{margin-left:25px}.yvp-mode-ad.yvp-flag-playing .yvp-top-bar .yvp-ad-count-container,.yvp-mode-vpaid.yvp-flag-playing .yvp-top-bar .yvp-ad-count-container{display:block}.yvp-state-video .yvp-top-bar{display:block}.yvp-state-start-screen .yvp-top-bar,.yvp-state-error .yvp-top-bar,.yvp-state-end-screen .yvp-top-bar,.yvp-state-loading .yvp-top-bar{display:none}.yvp-mode-ad .yvp-top-bar .yvp-provider-logo,.yvp-mode-vpaid .yvp-top-bar .yvp-provider-logo{display:none}.yvp-fuji.yvp-settings-on .yvp-bottom-bar .yvp-upnext-playlist{display:none}.yvp-fuji.yvp-settings-on .yvp-bottom-bar .yvp-volume-bar-container{visibility:hidden}.yvp-fuji.yvp-content .yvp-main .yvp-mute-indicator{position:relative;opacity:0;visibility:hidden;background-image:url(\"data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iODgiIGhlaWdodD0iODgiIHZpZXdCb3g9IjAgMCA4OCA4OCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48dGl0bGU+dm9sdW1lLW11dGUtc2hhZG93PC90aXRsZT48ZGVmcz48ZmlsdGVyIHg9Ii01MCUiIHk9Ii01MCUiIHdpZHRoPSIyMDAlIiBoZWlnaHQ9IjIwMCUiIGZpbHRlclVuaXRzPSJvYmplY3RCb3VuZGluZ0JveCIgaWQ9ImEiPjxmZU9mZnNldCBkeT0iMiIgaW49IlNvdXJjZUFscGhhIiByZXN1bHQ9InNoYWRvd09mZnNldE91dGVyMSIvPjxmZUdhdXNzaWFuQmx1ciBzdGREZXZpYXRpb249IjEuNSIgaW49InNoYWRvd09mZnNldE91dGVyMSIgcmVzdWx0PSJzaGFkb3dCbHVyT3V0ZXIxIi8+PGZlQ29sb3JNYXRyaXggdmFsdWVzPSIwIDAgMCAwIDAgMCAwIDAgMCAwIDAgMCAwIDAgMCAwIDAgMCAwLjcgMCIgaW49InNoYWRvd0JsdXJPdXRlcjEiIHJlc3VsdD0ic2hhZG93TWF0cml4T3V0ZXIxIi8+PGZlTWVyZ2U+PGZlTWVyZ2VOb2RlIGluPSJzaGFkb3dNYXRyaXhPdXRlcjEiLz48ZmVNZXJnZU5vZGUgaW49IlNvdXJjZUdyYXBoaWMiLz48L2ZlTWVyZ2U+PC9maWx0ZXI+PGZpbHRlciB4PSItNTAlIiB5PSItNTAlIiB3aWR0aD0iMjAwJSIgaGVpZ2h0PSIyMDAlIiBmaWx0ZXJVbml0cz0ib2JqZWN0Qm91bmRpbmdCb3giIGlkPSJiIj48ZmVPZmZzZXQgZHk9IjIiIGluPSJTb3VyY2VBbHBoYSIgcmVzdWx0PSJzaGFkb3dPZmZzZXRPdXRlcjEiLz48ZmVHYXVzc2lhbkJsdXIgc3RkRGV2aWF0aW9uPSIxLjUiIGluPSJzaGFkb3dPZmZzZXRPdXRlcjEiIHJlc3VsdD0ic2hhZG93Qmx1ck91dGVyMSIvPjxmZUNvbG9yTWF0cml4IHZhbHVlcz0iMCAwIDAgMCAwIDAgMCAwIDAgMCAwIDAgMCAwIDAgMCAwIDAgMC43IDAiIGluPSJzaGFkb3dCbHVyT3V0ZXIxIiByZXN1bHQ9InNoYWRvd01hdHJpeE91dGVyMSIvPjxmZU1lcmdlPjxmZU1lcmdlTm9kZSBpbj0ic2hhZG93TWF0cml4T3V0ZXIxIi8+PGZlTWVyZ2VOb2RlIGluPSJTb3VyY2VHcmFwaGljIi8+PC9mZU1lcmdlPjwvZmlsdGVyPjwvZGVmcz48ZyBmaWxsPSIjRkZGIiBmaWxsLXJ1bGU9ImV2ZW5vZGQiPjxwYXRoIGQ9Ik0yNS42ODIgNTUuMDE2SDE2LjUzYy0uNDk1IDAtLjk0NC0uMTk0LTEuMjczLS41MTItLjM2My0uMzM0LS41OS0uODE0LS41OS0xLjM0OHYtMTguMjRjMC0uMTcuMDIyLS4zMzIuMDY0LS40ODcuMi0uNzkzLjkyLTEuMzc4IDEuNzc1LTEuMzc4aDkuMTYyVjMzbDE0LjY2Ni0xNC42Njd2NTEuMzM0bC0xNC42NS0xNC42NXoiIGZpbHRlcj0idXJsKCNhKSIvPjxwYXRoIGQ9Ik01OC45MDQgMzkuMDUybC00Ljk2OC00Ljk2OGMtMS40MjgtMS40MjgtMy43NTQtMS40MzItNS4xODYgMC0xLjQzIDEuNDMtMS40MzIgMy43NTMgMCA1LjE4NWw0Ljk2OCA0Ljk2Ny00Ljk2OCA0Ljk2OGMtMS40MjggMS40MjgtMS40MyAzLjc1MyAwIDUuMTg1IDEuNDMgMS40MyAzLjc1NCAxLjQzMiA1LjE4NiAwbDQuOTY4LTQuOTY4IDQuOTY4IDQuOTdjMS40MjcgMS40MjYgMy43NTMgMS40MyA1LjE4NS0uMDAyIDEuNDMtMS40MyAxLjQzMi0zLjc1MyAwLTUuMTg1bC00Ljk2OC00Ljk2OCA0Ljk2Ny00Ljk2OGMxLjQyOC0xLjQzIDEuNDMyLTMuNzU0IDAtNS4xODYtMS40My0xLjQzLTMuNzUzLTEuNDMyLTUuMTg1IDBsLTQuOTY4IDQuOTY4eiIgZmlsdGVyPSJ1cmwoI2IpIi8+PC9nPjwvc3ZnPg==\");background-size:100%;background-color:transparent;z-index:32;width:44px;height:44px;float:right;background-repeat:no-repeat;background-position:50% 50%;border-radius:0;top:75%;right:8px;}.yvp-fuji.yvp-content .yvp-main .yvp-mute-indicator:hover{cursor:pointer}.yvp-fuji.yvp-content.normal .yvp-main .yvp-mute-indicator{width:44px;height:44px;top:85.5%;right:8px;border-radius:0;display:block}.yvp-fuji.yvp-content.yvp-state-fullscreen .yvp-main .yvp-mute-indicator{width:44px;height:44px;top:85%;right:8px;border-radius:0;display:none}.yvp-overlay-hide-cursor{position:absolute;display:block;z-index:30;cursor:none;top:0;right:0;bottom:0;left:0}.yvp-fuji.yvp-custom-controls{position:absolute;z-index:29;display:none;height:100%;width:100%}#Stencil .channel-applet-wrap.mode-embedtron .yvp-fuji.yvp-content{z-index:5}html[dir='rtl'] .yvp-fuji .yvp-settings-caret-icon.right{-webkit-transform:rotate(180deg);-moz-transform:rotate(180deg);-ms-transform:rotate(180deg);-o-transform:rotate(180deg);transform:rotate(180deg);left:0;right:2px}html[dir='rtl'] .yvp-fuji .yvp-settings-caret-icon.left{-webkit-transform:rotate(180deg);-moz-transform:rotate(180deg);-ms-transform:rotate(180deg);-o-transform:rotate(180deg);transform:rotate(180deg)}html[dir='rtl'] .yvp-fuji .yvp-cc-feedback-link{float:left}html[dir='rtl'] .yvp-fuji .yvp-cc-options-more .effects{margin-left:0;margin-right:90px}html[dir='rtl'] .yvp-fuji .yvp-cc-options-more .bgcolorpicker{margin-left:0;margin-right:65px}html[dir='rtl'] .yvp-fuji .yvp-cc-options-more .fontcolorpicker{margin-left:0;margin-right:65px}html[dir='rtl'] .yvp-fuji .yvp-cc-options-more .yvp-cc-style-preview{margin:40px 85px 20px 0}@-moz-keyframes flash-button{0%,100%{background-color:transparent}50%{background-color:#5f32fb}}@-webkit-keyframes flash-button{0%,100%{background-color:transparent}50%{background-color:#5f32fb}}@-o-keyframes flash-button{0%,100%{background-color:transparent}50%{background-color:#5f32fb}}@-ms-keyframes flash-button{0%,100%{background-color:transparent}50%{background-color:#5f32fb}}@keyframes flash-button{0%,100%{background-color:transparent}50%{background-color:#5f32fb}}@-moz-keyframes fadeIn{0%{opacity:0}100%{opacity:1}}@-webkit-keyframes fadeIn{0%{opacity:0}100%{opacity:1}}@-o-keyframes fadeIn{0%{opacity:0}100%{opacity:1}}@-ms-keyframes fadeIn{0%{opacity:0}100%{opacity:1}}@keyframes fadeIn{0%{opacity:0}100%{opacity:1}}"),
i.prototype.create=function(){var e,t=this,n={hideUponClick:!0},i=c.render(_,{strings:s.i18n});t._topBar=i.querySelector(".yvp-top-bar"),t._bottomBar=i.querySelector(".yvp-bottom-bar"),t._customControls=i.querySelector(".yvp-custom-controls"),t._objectOverlay=i.querySelector(".yvp-object-overlay"),t._muteIndicator=i.querySelector(".yvp-mute-indicator"),t._castOverlay=i.querySelector(".yvp-cast-overlay"),t._slider=t._bottomBar.querySelector(".yvp-slider"),t._timeDisplay=t._bottomBar.querySelector(".yvp-time-container"),t._settingBtn=t._bottomBar.querySelector(".yvp-setting-btn"),t._fullScreenBtn=t._bottomBar.querySelector(".yvp-fullscreen-btn"),t._ccBtn=t._bottomBar.querySelector(".yvp-cc-btn"),t._castBtn=t._bottomBar.querySelector(".yvp-chromecast-btn"),t._menuControls=t._bottomBar.querySelector(".yvp-menu-controls"),t._contentType=t._topBar.querySelector(".yvp-content-type"),e=new d(t._eventBus,t._model),t._settingsNode=e.create(),t._menuControls.parentNode.insertBefore(t._settingsNode,t._menuControls.nextSibling),t._menuLabelTooltip=new u(t._settingBtn,s.i18n.SETTINGS,n),t._sliderTap=new l(t._slider),t._onSliderTap=function(e){e.stopPropagation()},t._slider.addEventListener("tap",t._onSliderTap,t),t._fullScreenTooltip=new u(t._fullScreenBtn,s.i18n.FULLSCREEN_SPACE,n),t._ccTooltip=new u(t._ccBtn,s.i18n.CAPTIONS_AVAILABLE,n);var r=[t._bottomBar,t._topBar,t._customControls,t._objectOverlay,t._muteIndicator];return o.chrome>=32&&!t._model.disableCasting?(r.push(t._castOverlay),t._castBtnTooltip=new u(t._castBtn,s.i18n.CHROMECAST,n)):(t._castOverlay.parentNode.removeChild(t._castOverlay),t._castOverlay=null,t._castBtn.parentNode.removeChild(t._castBtn),t._castBtn=null),t._bindEvents(),r},i.prototype._bindEvents=function(){var e=this;e._bindMuteIndicator(),e._bindCC(),e._settingBtn&&(e._settingTap=new l(e._settingBtn),e._onSettingTap=function(t){t.stopPropagation(),e._view.toggleFujiSettings(e._settingBtn)},e._settingBtn.addEventListener("tap",e._onSettingTap),e._bottomBarTap=new l(e._bottomBar),e._onBottomBarTap=function(t){t.stopPropagation(),e._hideSettings()},e._bottomBar.addEventListener("tap",e._onBottomBarTap)),e._castBtn&&(e._castBtnTap=new l(e._castBtn),e._onCastBtnTap=function(t){t.stopPropagation();var n="ctrl-cast-"+(e._castBtn.connected?"stop":"start");e._eventBus.publish(a.API.UI_INTERACT,{srcElement:n})},e._castBtn.addEventListener("tap",e._onCastBtnTap),e._castOverlayContent=e._castOverlay.querySelector(".cast-overlay-content"),e._castOverlayTap=new l(e._castOverlayContent),e._onCastOverlayTap=function(t){t.stopPropagation(),e._eventBus.publish(a.API.UI_INTERACT,{srcElement:"ctrl-cast-overlay"})},e._castOverlayContent.addEventListener("tap",e._onCastOverlayTap),e._castDisconnectBtn=e._castOverlay.querySelector(".cast-disconnect-btn"),e._castDisconnectBtnTap=new l(e._castDisconnectBtn),e._onCastDisconnectBtnTap=function(t){t.stopPropagation(),e._eventBus.publish(a.API.UI_INTERACT,{srcElement:"ctrl-cast-disconnect"})},e._castDisconnectBtn.addEventListener("tap",e._onCastDisconnectBtnTap)),e._handleKeyDown=function(t){var n=function(){t.preventDefault()};e._eventBus.publish(a.KEYDOWN,{keyCode:t.keyCode,shiftDown:t.shiftKey,ctrlDown:t.ctrlKey,altDown:t.altKey,target:t.target,preventDefault:n})},e._view.getContentNode().addEventListener("keydown",e._handleKeyDown,!1)},i.prototype._bindMuteIndicator=function(){var e,t=this;t._muteOnTimeout=function(n){n.stopPropagation(),e||(e=setTimeout(function(){t._eventBus.publish(a.API.UI_INTERACT,{srcElement:"ctrl-mute-btn-off"}),e=null},600))},["mouseenter","touchstart"].forEach(function(e){t._muteIndicator.addEventListener(e,t._muteOnTimeout)}),["mousemove","touchmove"].forEach(function(e){t._muteIndicator.addEventListener(e,t._muteOnTimeout)})},i.prototype._onKeyDown=function(e){var t=this,n=t._model.playbackState.volume,i=.05;switch(e.keyCode){case 27:t._view.updateViewOnEscPress();break;case 32:t._eventBus.publish(a.TOGGLE_PLAY_PAUSE);break;case 38:var r=n+i;t._eventBus.publish(a.CONTROLS_SET_VOLUME,r>1?1:r);break;case 40:var o=n-i;t._eventBus.publish(a.CONTROLS_SET_VOLUME,0>o?0:o);break;case 70:t._view.toggleFullscreen();break;case 191:e.shiftDown&&(t._view.toggleFujiSettings(),t._eventBus.publish(a.SETTINGS_COMPONENT_SHOW,".yvp-settings-preferences"))}},i.prototype._syncMatureIndicator=function(){var e=this;e._isMature&&(e._contentType.innerHTML=s.i18n.MATURE,e._contentType.setAttribute("aria-label",s.i18n.MATURE),c.classList(e._contentType).remove("hide"))},i.prototype._onMediaItemLoaded=function(e){var t=this,n=t._getCCButtonState();t._isLive=e.isLive(),t._liveState=e.liveState,t._isMature=e&&e.ageGate&&"none"!==e.ageGate,t._contentType.innerHTML="",t._contentType.setAttribute("aria-label",""),c.classList(t._contentType).add("hide"),t._isLive?t._setLiveMode():t._setVodMode(),t._setCCButtonsState(n)},i.prototype._bindCC=function(){var e=this;e._onCCButtonTap=function(t){if(t.stopPropagation(),e._ccAvailable){var n=c.classList(e._ccBtn).contains(v),i=!n,r=!(!e._model.castState||!e._model.castState.connected),o="cc-"+(i?"on":"off")+(r?"-cast":"");e._eventBus.publish(a.API.UI_INTERACT,{srcElement:o}),e._eventBus.publish(a.CC.UI_TOGGLE,i),e._setCCButtonsState(i)}},e._ccBtnTap=new l(e._ccBtn),e._ccBtn.addEventListener("tap",e._onCCButtonTap,e)},i.prototype._unBindCC=function(){var e=this;e._ccBtnTap&&e._ccBtn&&(e._ccBtnTap.destroy(),e._ccBtn.removeEventListener("tap",e._onCCButtonTap,e))},i.prototype._checkCCAvailability=function(){var e=this;e._ccAvailable=!1},i.prototype._toggleCCFromSettings=function(e){var t=this;t._setCCButtonsState(e)},i.prototype._setCCButtonsState=function(e){var t=this;e?(c.classList(t._ccBtn).add(v),t._updateCCTooltip(s.i18n.CAPTIONS_ON)):(c.classList(t._ccBtn).remove(v),t._updateCCTooltip(s.i18n.CAPTIONS_OFF)),t._ccAvailable||t._updateCCTooltip(s.i18n.CAPTIONS_NOT_AVAILABLE)},i.prototype._setCCUIAvailability=function(e){var t=this;t._ccAvailable=e,e?(c.classList(t._ccBtn).remove("hide"),t._updateCCTooltip(s.i18n.CAPTIONS_AVAILABLE)):(c.classList(t._ccBtn).add("hide"),t._updateCCTooltip(s.i18n.CAPTIONS_NOT_AVAILABLE))},i.prototype._getCCButtonState=function(){var e=this;return e._model.userPreferences&&e._model.userPreferences.closedCaptions&&e._model.userPreferences.closedCaptions.show},i.prototype._updateCCTooltip=function(e){var t=this,n=t._ccBtn.querySelector(".yvp-tooltip-content");n.innerHTML=e},i.prototype._setChromecastBtnVisibility=function(e){var t=this;t._castBtn.style.display=e?"":"none"},i.prototype._onCastConnectionChange=function(e,t){var n=this,i=n._castOverlay&&n._castOverlay.querySelector(".cast-device-name");if(i&&e){var r=t.receiverName;i.innerHTML=c.strSubstitute(s.i18n.CAST_PLAYING_RECEIVER,{"device-name":r})}n._castBtn&&(n._castBtn.connected=e,n._castBtn.setAttribute("data-connected",e),n._castBtnTooltip.setText(e?s.i18n.DISCONNECT:s.i18n.CHROMECAST))},i.prototype._onAdPlaying=function(){var e=this;e._setAdMode()},i.prototype._onVideoPlaying=function(){var e=this;e._isLive?e._setLiveMode():e._setVodMode()},i.prototype._onCastMediaLoaded=function(e,t){var n=this;if(n._castOverlay){var i=t?t.thumbnail:"";n._castOverlay.style.backgroundImage="url("+i+")"}},i.prototype._onCastCCAvailabilityChanged=function(e){var t=this;t._setCCUIAvailability(e)},i.prototype._updateAdBreaks=function(e){var t=this;if(t._adBreaks=e,t._duration){for(var n=t._slider.querySelectorAll(".yvp-ad-break"),i=0;i<n.length;i++)t._slider.removeChild(n[i]);e&&e.forEach(function(e){var n=document.createElement("div");c.classList(n).add("yvp-ad-break"),e.occurred&&c.classList(n).add("occurred"),n.style.left=e.time/t._duration*100+"%",t._slider.appendChild(n)})}},i.prototype._onPlaybackProgress=function(e,t,n,i){var r=this;p.isNumber(n)&&r._duration!==n&&(r._duration=n,r._updateAdBreaks(r._adBreaks))},i.prototype._onAdPlaybackProgress=function(e,t,n,i){var r=this;if(p.isNumber(t)&&p.isNumber(n)&&r._countdownTimeIndicator){var o=Math.round(n-t);if(o>0){var a=o>1?s.i18n.NUM_SECONDS:s.i18n.NUM_SECOND;r._countdownTimeIndicator.innerHTML=c.strSubstitute(a,{"num-seconds":o})}else r._countdownTimeIndicator.innerHTML=""}},i.prototype._updateAdCount=function(e,t){var n=this,i=n._model.YVAP,r=i&&i.standaloneAd&&i.standaloneAd.xml;r||(n._countIndicatorContainer||(n._countIndicatorContainer=document.createElement("div"),c.classList(n._countIndicatorContainer).add("yvp-ad-count-container"),n._topBar.appendChild(n._countIndicatorContainer)),n._countIndicator||(n._countIndicator=document.createElement("div"),c.classList(n._countIndicator).add("yvp-ad-count"),n._countIndicatorContainer.appendChild(n._countIndicator)),n._countdownTimeIndicator||(n._countdownTimeIndicator=document.createElement("div"),c.classList(n._countdownTimeIndicator).add("yvp-ad-countdowntimer"),n._countIndicatorContainer.appendChild(n._countdownTimeIndicator)),n._countIndicator.innerHTML=s.i18n.ADV_SHORT,!p.isNullOrUndefined(e)&&!p.isNullOrUndefined(t)&&t>1&&(n._countIndicator.innerHTML+=" "+e+" of "+t),c.classList(n._contentType).add("hide"))},i.prototype._onPlaybackStarted=function(){var e=this;e._bindProviderLogo()},i.prototype._setAdMode=function(){var e=this;c.classList(e._slider).add("yvp-disable"),c.classList(e._contentType).add("hide"),c.classList(e._timeDisplay).add("yvp-hide")},i.prototype._setLiveMode=function(){var e=this;c.classList(e._slider).add("yvp-disable"),c.classList(e._timeDisplay).add("yvp-hide");var t=e._model.ui.contentTypeLabel;p.isString(t)&&""!==t?(e._contentType.innerHTML=t,e._contentType.setAttribute("aria-label",t),c.classList(e._contentType).remove("hide")):e._liveState&&"live"===e._liveState&&(e._contentType.innerHTML=s.i18n.LIVE,e._contentType.setAttribute("aria-label",s.i18n.LIVE),c.classList(e._contentType).remove("hide"))},i.prototype._setVodMode=function(){var e=this;c.classList(e._slider).remove("yvp-disable"),c.classList(e._timeDisplay).remove("yvp-hide"),e._syncMatureIndicator()},i.prototype._bindProviderLogo=function(){var e=this,t=e._topBar.querySelector(".yvp-provider-logo"),n=e._model.playlist.getCurrentItem(),i=n.provider.providerLogoUrl,r=n.shareUrl;i?(c.classList(t).remove("yvp-hide"),t.style.backgroundImage="url("+i+")",t.setAttribute("href",r)):c.classList(t).add("yvp-hide")},i.prototype._onControlsBarChange=function(e){var t=this,n=t._settingsNode&&c.classList(t._settingsNode).contains("open"),i=n&&t._bottomBar.querySelector(".yvp-settings-container:hover");n&&e===!1&&!i&&t.resetSettings();var r=!(!t._bottomBar.querySelector(":hover")&&t._bottomBar.parentNode.querySelector(":hover")!==t._bottomBar);if(t._ccAvailable&&!r){var o=t._view.getFullscreen();o||t._eventBus.publish(a.CC.POSITION_FLOAT,e)}},i.prototype._onVideoClick=function(){var e=this;e._hideSettings()},i.prototype._hideSettings=function(){var e=this,t=c.classList(e._view.getContentNode()).contains("yvp-settings-on");t&&e.resetSettings()},i.prototype.resetSettings=function(){var e=this,t=e._settingsNode.querySelector(".yvp-main-settings"),n=e._settingsNode.querySelector(".yvp-cc-options-main"),i=e._settingsNode.querySelector(".yvp-cc-options-more");e._view.toggleFujiSettings(e._settingBtn,!1),c.classList(t).add("open"),c.classList(t).remove("close"),c.classList(n).add("close"),c.classList(n).remove("open"),c.classList(i).add("close"),c.classList(i).remove("open")},i.prototype._unBindMuteIndicator=function(){var e=this;["mouseenter","touchstart"].forEach(function(t){e._muteIndicator.removeEventListener(t,e._muteOnTimeout)}),["mousemove","touchmove"].forEach(function(t){e._muteIndicator.removeEventListener(t,e._muteOnTimeout)})},i.prototype.syncAriaState=function(){},i.prototype.destroy=function(){var e=this;e._view.getContentNode().removeEventListener("keydown",e._handleKeyDown,!1),e._sliderTap&&e._slider&&(e._sliderTap.destroy(),e._slider.removeEventListener("tap",e._onSliderTap)),e._settingTap&&e._settingBtn&&(e._settingTap.destroy(),e._settingBtn.removeEventListener("tap",e._onSettingTap),e._menuLabelTooltip.destroy()),e._castBtnTap&&e._castBtn&&(e._castBtnTap.destroy(),e._castBtn.removeEventListener("tap",e._onCastBtnTap),e._castBtnTooltip&&(e._castBtnTooltip.destroy(),e._castBtnTooltip=null)),e._castOverlay&&(e._castOverlayTap&&(e._castOverlayTap.destroy(),e._castOverlayContent.removeEventListener("tap",e._onCastOverlayTap)),e._castDisconnectBtnTap&&(e._castDisconnectBtnTap.destroy(),e._castDisconnectBtn.removeEventListener("tap",e._onCastDisconnectBtnTap))),e._bottomBarTap&&e._bottomBar&&(e._bottomBarTap.destroy(),e._bottomBar.removeEventListener("tap",e._onBottomBarTap)),e._unBindCC(),e._fullScreenTooltip.destroy(),e._ccTooltip.destroy(),e._unBindMuteIndicator(),e.node=null}},{"../../../lib":"bRhrlU","../../../lib/user-agent":"ty5FFo","../cc":"zKzgQw","../error":20,"../event":"YJm+dH","../stream":"Af6MnA","../strings":"XwKsC9","../tap":"dsc79Q","../util":"jJTEqU","../views/uiwidgets/tooltip":94,"./fuji-settings":35,"./fuji-yahoo-controls.html":38,fs:145,"insert-css":160}],40:[function(e,t,n){"use strict";function i(e){var t=this;t._eventBus=e,t._segments={},t._events=[],t._cueOut={},t._cueIn={},t._masterPlaylist="",t._mediaPlaylist="",t._processingTime=0,t._segmentDuration=8,t._refreshPlaylist=null,t._progressListener=null}t.exports=i;var r=e("./util"),o=e("./event");e("../../lib");i.prototype.initCueTracking=function(e,t){var n=this;n._getMediaPlaylist(e,t,function(e,t){n._extractCuePoints(t),n._progressListener||(n._progressListener=n._eventBus.subscribe(o.Video.TIMEUPDATE,n._checkCues.bind(n))),n._setupPlaylistRefresh()})},i.prototype._checkCues=function(e){var t,n=this;(0!==n._cueOut.length||0!==n._cueIn.length)&&(n._events.forEach(function(n){!n.done&&e>=n.time&&(t=n.type,n.done=!0)}),t&&n._eventBus.publish(t))},i.prototype._setupPlaylistRefresh=function(){var e=this;e._refreshPlaylist&&clearInterval(e._refreshPlaylist),e._refreshPlaylist=setInterval(function(){e.initCueTracking(e._masterPlaylist,e._mediaPlaylist)},e._segmentDuration)},i.prototype._getMediaPlaylist=function(e,t,n){var i=this;return i._masterPlaylist=e,t?(i._mediaPlaylist=t,i._fetchPlaylist(i._mediaPlaylist,n)):void r.ajax(i._masterPlaylist,{method:"GET",context:i,successHandler:function(e){return i._mediaPlaylist=i._getPlaylistUrl(e),""!==i._mediaPlaylist?i._fetchPlaylist(i._mediaPlaylist,n):n("bad mpl url")},failureHandler:function(e){return n(e)}})},i.prototype._fetchPlaylist=function(e,t){var n=this;if(!e.match(/^https?:/)){var i=n._masterPlaylist.match(/^(https?:.*\/).*?\.m3u8?/)[1];i&&(e=i+e)}r.ajax(e,{method:"GET",context:n,successHandler:function(e){return t(null,e)},failureHandler:function(e){return t(e)}})},i.prototype._getPlaylistUrl=function(e){for(var t=e.split("\n");t.length;){var n=t.shift();if(n.match(/^[^#].*\.m3u8.*?$/))return n}return""},i.prototype._extractCuePoints=function(e){for(var t=this,n=e.split("\n"),i=!0;n.length;){var r=n.shift(),a=r.match(/^#(EXTINF|EXT-X-CUE-OUT(-CONT)?|EXT-X-CUE-IN|EXT-X-ENDLIST):?([0-9\.]+)?(\/0)?,?$/);if(a){if(i&&t._processingTime>0&&"EXTINF"!==a[1]){var s=e.match(new RegExp("^.*?\n(.*?\\.ts.*?)\n","m")),l=s[1];l&&t._segments[l]&&(t._processingTime=t._segments[l].end-t._segments[l].dur)}switch(a[1]){case"EXT-X-CUE-OUT":t._cueOut[t._processingTime]||(t._events.push({type:o.API.CUEPOINT_STARTED,time:t._processingTime,done:!1}),t._cueOut[t._processingTime]=!0);break;case"EXT-X-CUE-OUT-CONT":0===t._events.length&&(t._events.push({type:o.API.CUEPOINT_STARTED,time:t._processingTime,done:!1}),t._cueOut[t._processingTime]=!0);break;case"EXTINF":var c=n[0];if(t._segments[c]){t._processingTime=t._segments[c].end;break}0===t._processingTime&&(t._segmentDuration=1e3*Math.floor(parseFloat(a[3]))),t._processingTime+=parseFloat(a[3]),t._segments[c]={dur:a[3],end:t._processingTime};break;case"EXT-X-CUE-IN":var p,d;t._cueIn[t._processingTime]||(d=n[0].match(/^#EXTINF:([0-9.]+)/),d&&(p=d[1]?parseFloat(d[1]):0,t._events.push({type:o.API.CUEPOINT_STOPPED,time:t._processingTime+p,done:!1}),t._cueIn[t._processingTime]=!0));break;case"EXT-X-ENDLIST":clearInterval(t._refreshPlaylist)}i=!1}}},i.prototype.destroy=function(){var e=this;e._progressListener&&e._progressListener.unsubscribe&&e._progressListener.unsubscribe(),clearInterval(e._refreshPlaylist)}},{"../../lib":"bRhrlU","./event":"YJm+dH","./util":"jJTEqU"}],41:[function(e,t,n){"use strict";var i=e("./event"),r=e("./util"),o=e("./video-player");r.setSingleton("VideoPlayer",o),r.setSingleton("API_Events",i.API)},{"./event":"YJm+dH","./util":"jJTEqU","./video-player":74}],42:[function(e,t,n){"use strict";function i(e){return f.isString(e)&&""!==e}function r(e,t){var n=this;s(T,e,n,t),f.isString(n.url)&&0!==n.url.length||(n.url=n.host+n.path),n.format||(n.format=m.getFormat(n.url)),!n.host&&n.url.length>0&&(n.host=m.getHostname(n.url))}function o(){var e=this;e.streams=[],e.selectedStreams=[],e.relatedVideoIds=[],e.state=_.NO_DATA,e.recoveryStatus=v.NOT_RECOVERING,e.isCCM=!0,e.tryCount=1,e.failoverCount=0}function a(){var e=this;e._items={},e._finishedListeners=[]}function s(e,t,n,i){l(e,t,n,null,i),t.CMS&&Object.keys(t.CMS).forEach(function(e){n.CMS[e]=t.CMS[e]})}function l(e,t,n,i,r){var o=n,a=t,s=!0,p=!1;if("configName"in e&&(i=e.configName),i&&(f.isObject(t)&&i in t?(a=t[i],p=!0):s=!1),s&&"transform"in e&&(a=e.transform(a)),"defaultVal"in e){var d=e.defaultVal;if(void 0===n&&(o=f.isFunction(d)?d():d),p){var u=!0;if("overwrite"in e){var _=e.overwrite;f.isFunction(e.overwrite)?u=_(o,a):_||(u=o===d)}u&&("validator"in e?e.validator(a)?o=a:c("Bad configuration data for '"+i+"'",r):o=a)}else e.required&&c("Missing required configuration parameter '"+i+"'",r)}else{o=n||{},s&&!f.isObject(a)&&(i?c("Expecting object in configuration for '"+i+"'",r):c("Expecting object for configuration",r),s=!1),s||(a={});for(var v in e)if(e.hasOwnProperty(v)&&-1===M.indexOf(v)){var y=e[v];o[v]=l(y,a,o[v],v,r)}}return o}function c(e,t){g.warn(e);var n=new Error(e);if(!t)throw n;t.push(n)}function p(e){if(!e)return"";for(var t=e.split("&"),n=0;n<t.length;n++)if(0===t[n].indexOf("ps=")&&t[n].length>3){var i=t[n].substring(3),r=i.split("_");return r[0]}return""}function d(e,t){for(var n=e.split("&"),i=0;i<n.length;i++)if(0===n[i].indexOf("ps=")&&n[i].length>3){n[i]=n[i].replace(n[i].substring(3),t);break}return n.join("&")}function u(e,t){e&&e.length>0&&e.forEach(function(e){e.path&&(e.path=d(e.path,t)),e.url&&(e.url=d(e.url,t)),e.hlsInfo&&e.hlsInfo.ts_url&&(e.hlsInfo.ts_url=d(e.hlsInfo.ts_url,t))})}var _={NO_DATA:"no-data",FETCHING:"fetching",HAS_DATA:"has-data",ERROR:"error"},v={NOT_RECOVERING:"not-recovering",RECOVERING:"recovering",RECOVERED:"recovered"};t.exports={MediaStore:a,Stream:r,MediaItem:o,ItemState:_,ItemRecoveryStatus:v,fillFromConfig:s,addError:c,getSapiVsId:p,updateVsInStreams:u};var y=e("./event"),m=e("./util"),f=e("../../lib"),g=e("../../lib/logger"),b=e("./stream"),E=e("./error"),h="yvpResumeTimeItems",A=10,S={Community:{providerId:"video.community.sony.com"},"Sin City Saints":{providerId:""},"Other Space":{providerId:""}},T={mimeType:{configName:"mime_type",defaultVal:"",validator:i},format:{defaultVal:"",transform:function(e){if(!f.isString(e))return null;var t=e.toLowerCase().split("/");return t[t.length-1]},validator:i},width:{defaultVal:0,validator:f.isNumber},height:{defaultVal:0,validator:f.isNumber},bitrate:{defaultVal:0,validator:f.isNumber},duration:{defaultVal:0,validator:f.isNumber},host:{defaultVal:"",validator:f.isString},path:{defaultVal:"",validator:f.isString},url:{defaultVal:"",validator:i},live:{defaultVal:!1,validator:f.isBoolean},isPrimary:{configName:"is_primary",defaultVal:!1,validator:f.isBoolean},cdn:{configName:"cdn",defaultVal:"",validator:f.isString},hlsInfo:{configName:"hls_info",defaultVal:null},dashInfo:{configName:"dash_info",defaultVal:null},drmType:{configName:"drm_type",defaultVal:null},deliveryType:{defaultVal:""},manifestContent:{configName:"mediaPlaylist",defaultVal:null},type:{defaultVal:"",validator:f.isString}};r.prototype.isRTMP=function(){var e=this,t=/^rtmp(?:e|t|te|s)?:\/\//;return t.test(e.host)||t.test(e.url)},r.prototype.isRTX=function(){var e=this;return e.url.indexOf("/rtx/")>-1},r.prototype.isAtlas=function(){var e=this,t=e.host;return e.hlsInfo&&(t=e.hlsInfo.ts_url),/atlas\.cdn\.yimg\.com/.test(t)},r.prototype.isDrmProtected=function(){var e=this;return"adobe"===e.drmType||"apple"===e.drmType},r.prototype.isStreamCompatibleForDrm=function(e){var t=this;return t.isDrmProtected()?"flash"===e&&"f4m"===t.format?1:-1:0},r.prototype._getProtocol=function(){var e=this,t="http",n=e.url.split(":");return n.length>1&&(t=n[0]),t},r.prototype.getType=function(){var e=this,t="unknown",n=e.url,i=e._getProtocol();return n&&(i&&(i.indexOf("rtmp")>-1||i.indexOf("rtsp")>-1)?t=i:/\/*\.f4m/i.test(n)?t=e.isRTX()?"rtx-hds":"hds":/\/*\.m3u8/i.test(n)||n.length>0&&n.indexOf("content=hls")>-1?t=e.isRTX()?"rtx-hls":"hls":/\/*\.mp4/i.test(n)&&(t="mp4")),t};var L={id:{configName:"id",defaultVal:null,validator:f.isString},license:{configName:"license",licensorName:{configName:"account_name",defaultVal:"",validator:f.isString},licensorId:{configName:"account_id",defaultVal:"",validator:f.isString},licenseName:{configName:"title",defaultVal:"",validator:f.isString},licenseId:{configName:"salesforce_id",defaultVal:"",validator:f.isString},originatingProperty:{configName:"originating_property",defaultVal:"",validator:f.isString}},metrics:{ywa:{defaultVal:[],validator:function(e){return f.isArray(e)&&e.every(f.isString)}},comscoreC5:{configName:"comscore_cm5",defaultVal:"",validator:f.isString},comscoreC6:{configName:"comscore6",defaultVal:"",validator:f.isString},pageSpaceId:{configName:"pspid",defaultVal:"",validator:f.isString},beacons:{defaultVal:{},transform:function(e){if(!f.isArray(e))return null;for(var t={},n=0;n<e.length;n++){var i=e[n],r=i.events,o=i.target||"",a=i.data||"",s=i.urlTemplate;if(!f.isArray(r))return null;f.isString(s)||(s=null);for(var l=0;l<r.length;l++){var c=r[l],p=c.param||"";if(!f.isObject(c)||!f.isString(c.name))return null;c.name in t||(t[c.name]=[]);var d={url:s};a&&p&&(d.target=o,d.addParam="&"+a+p),t[c.name].push(d)}}return t},validator:f.isObject},mmActivityId:{configName:"mmActivityId",defaultVal:"",validator:f.isString},mediametrie:{configName:"mediametrie",defaultVal:null,validator:f.isString}},status:{code:{defaultVal:"",validator:f.isString},msg:{defaultVal:"",validator:f.isString}},yvap:{defaultVal:{}},closedCaptions:{configName:"closedcaptions",defaultVal:[],url:{validator:f.isString},lang:{validator:f.isString}},visualSeek:{configName:"visualseek",defaultVal:{},frequency:{defaultVal:0,validator:f.isNumber},width:{defaultVal:0,validator:f.isNumber},height:{defaultVal:0,validator:f.isNumber},images:{defaultVal:[],validator:f.isArray}},progress:{position:{defaultVal:null,validator:f.isNumber},adbreaks:{defaultVal:[],validator:f.isArray}},seriesInfo:{defaultVal:{},series_id:{configName:"series_id",defaultVal:null,validator:f.isNumber},videoType:{configName:"type",defaultVal:"",validator:f.isString},seasonNumber:{configName:"season_number",defaultVal:0,validator:f.isNumber},episodeNumber:{configName:"episode_number",defaultVal:0,validator:f.isNumber}},annotations:{configName:"annotations",defaultVal:{},content:{defaultVal:[],validator:f.isArray},theme:{defaultVal:"dark",validator:f.isString},transition:{defaultVal:{},"class":{defaultVal:"dissolve",validator:f.isString}},version:{defaultVal:"1",validator:f.isString}},algo:{defaultVal:null,transform:function(e){return e.algo_name},validator:f.isString},instrument:{defaultVal:null,transform:function(e){return e.algo},validator:f.isString}},I={description:{defaultVal:"",validator:f.isString,transform:function(e){return m.sanitizeAndUnescape(e)}},title:{defaultVal:"",validator:f.isString,transform:function(e){return m.sanitizeAndUnescape(e)}},snapshots:{count:{defaultVal:null,validator:f.isNumber},height:{defaultVal:null,validator:f.isNumber},width:{defaultVal:null,validator:f.isNumber},url:{defaultVal:null,validator:f.isString}},provider:{name:{defaultVal:"",validator:f.isString},providerId:{configName:"provider_id",defaultVal:null,validator:f.isString},providerVideoId:{configName:"provider_video_id",defaultVal:null,validator:f.isString},publisherId:{configName:"publisher_id",defaultVal:null,validator:f.isString},providerLogoUrl:{configName:"logourl",defaultVal:null,validator:f.isString}},provisioningSource:{configName:"provisioning_source",defaultVal:"",validator:f.isString},genres:{configName:"genre",defaultVal:[],transform:function(e){return f.isString(e)?e.split(","):null},validator:f.isArray},duration:{defaultVal:null,validator:f.isNumber},credits:{mainArtists:{configName:"main_artists",defaultVal:[],transform:function(e){return f.isString(e)?e.split(/[,;]/):null},validator:f.isArray},label:{defaultVal:null,validator:f.isString}},images:{large:{defaultVal:null,validator:f.isString},medium:{defaultVal:null,validator:f.isString},small:{defaultVal:null,validator:f.isString},provider:{defaultVal:null,validator:f.isString},thumbnail:{defaultVal:null,validator:f.isString}},_thumbnail:{configName:"thumbnail",defaultVal:null,validator:f.isString},showName:{configName:"show_name",defaultVal:"",validator:f.isString},shareUrl:{configName:"url",defaultVal:"",overwrite:!1,validator:f.isString},embedCode:{configName:"embedCode",defaultVal:"",overwrite:!1,validator:f.isString},embedRights:{configName:"embed_rights",defaultVal:!1,validator:f.isBoolean},eventBeginTime:{configName:"event_start",defaultVal:null,validator:f.isNumber},eventEndTime:{configName:"event_stop",defaultVal:null,validator:f.isNumber},liveState:{configName:"live_state",defaultVal:null,validator:f.isString},ageGate:{configName:"age_gate",defaultVal:"",validator:f.isString},castable:{configName:"castable",defaultVal:!0,validator:f.isBoolean},seriesInfo:{configName:"seriesInfo",defaultVal:{},type:{defaultVal:"",validator:f.isString}}};o.prototype.getRecoveryStatusForBeacon=function(){var e=this,t=e.recoveryStatus===v.RECOVERED;return t&&(e.recoveryStatus=v.NOT_RECOVERING),t},o.prototype.fetchFinished=function(){var e=this;return e.state===_.HAS_DATA||e.state===_.ERROR},o.prototype.isLongForm=function(){var e=this;return e.duration>600},o.prototype.fillFromRaw=function(e,t,n,i){var o=this;e.shareUrl&&(e.url=e.shareUrl),s(L,e,o,i);var a=e.meta||e;if(s(I,a,o,i),null===o.id&&(o.isCCM=!1,o.id=m.generateGuid()),null!==o.duration&&o.isLongForm()){if(null===o.progress.position){var l=m.localStorage.get(h);l&&l[o.id]?o.progress=l[o.id]:o.progress.position=0}o.restartIfNeeded()}o.images.thumbnail=o.images.thumbnail||o._thumbnail,o.images.defaultThumbnail=o.images.large||o.images.thumbnail||o.images.medium||o.images.small||o.images.provider,o.fillStreamsFromRaw(e.streams,t,n,i),e.streamProfiles&&(o.streamProfiles=e.streamProfiles.map(function(e){return new r(e,i)})),o.isCCM?o.hasStreams()&&o.hasThumbnail()?o.state=_.HAS_DATA:o.hasStreams()&&o.state===_.FETCHING&&(o.state=_.HAS_DATA):o.hasStreams()?o.state=_.HAS_DATA:o.state=_.ERROR},o.prototype.restartIfNeeded=function(){var e=this;e.progress.position+A>e.duration&&(e.progress.position=0)},o.prototype.hasStreams=function(){var e=this;return 0!==e.streams.length},o.prototype.getCDN=function(){var e=this;return e.selectedStreams.length>0?e.selectedStreams[0].cdn:null},o.prototype.isLive=function(){for(var e=this,t=0;t<e.streams.length;t++)if(e.streams[t].live)return!0;return null!==e.liveState&&"vod"!==e.liveState?!0:!1},o.prototype.hasThumbnail=function(){var e=this;return!!e.images.defaultThumbnail},o.prototype.fillStreamsFromRaw=function(e,t,n,i){var o=this;if(e&&0===o.streams.length){var a=e.map(function(e){return new r(e,i)});if(a.length){for(var s=0;s<t.length;s++){var l=t[s],c=n[l],p=b.findAcceptedStreams(a,c);if(0!==p.length){o.rendererType=l,o.streams=p;break}}if(0===o.streams.length){var d=new Error("None of the streams is accepted. Possiblemismatch in accepted format or/and protocol.");g.error(d.message),i.push(d),o.status.code=E.SAPI_CODES.E_SAPI_INCOMPATIBLE_FORMAT,o.status.msg=d.message,"m3u8"===a[0].format&&a[0].live&&-1===t.indexOf("flash")&&(o.status.code=E.INFO_CODES.E_SAPI_UNSUPPORTED_LIVE_ON_HTML)}else o.streams.sort(function(e,t){return e.bitrate-t.bitrate})}else{var u=new Error("No streams returned");g.error(u.message),i.push(u),o.status.code=E.SAPI_CODES.E_SAPI_NO_STREAMS_RETURNED,o.status.msg=u.message}}},o.prototype.generateVSid=function(){for(var e=[],t="abcdefghijklmnopqrstuvwxyz123456789",n=0;8>n;n++)e.push(t.charAt(Math.floor(Math.random()*t.length)));var i=e.join("");return i},o.prototype.generateSamplingId=function(){return Math.floor(10*Math.random())},o.prototype.fillSelectedStreams=function(e,t){var n=this,i=e.map(function(e){return new r(e,t)});i.length&&(n.selectedStreams=i),n.selectedStreams&&n.selectedStreams.length>1&&n.selectedStreams.sort(function(e,t){return e.bitrate-t.bitrate})},o.prototype.hasDrmStreams=function(){for(var e=this,t=0;t<e.streams.length;t++)if(e.streams[t].isDrmProtected())return!0;return!1},o.prototype.getType=function(){var e=this;return e.hasStreams()?e.selectedStreams.length>0?e.selectedStreams[0].getType():e.streams[0].getType():"none"},o.prototype.getShowName=function(){var e=this;return e.showName},o.prototype.isOriginalShow=function(e){var t=this;return e||(e=t.getShowName()),e&&S[e]?!0:!1},o.prototype.isSeriesEpisode=function(){var e=this;return e.seriesInfo&&"episode"===e.seriesInfo.videoType?!0:!1},o.prototype.updateVideoSession=function(e){var t=this;t.isPrefetch=!1,e.streams&&e.streams.length>0?(t.videoSession=p(e.streams[0].path)+"_"+t.generateVSid(),t.isPrefetch=!0):e.algo||(t.videoSession=t.generateVSid()),t.samplingId=t.generateSamplingId(),u(e.streams,t.videoSession)},a.prototype.get=function(e){var t=this;return e?t._items[e]||null:null},a.prototype.getAll=function(){var e=this;return e._items},a.prototype.updateItemFromRaw=function(e,t,n,i){var r=this,a=r.get(e.id);return a||(a=new o,a.updateVideoSession(e)),a.fillFromRaw(e,t,n,i),r._items[a.id]=a,a},a.prototype.fillFromSapi=function(e,t,n,i){var r=this;if(f.isArray(e))return e.map(function(e){return r.updateItemFromRaw(e,t,n,i).id});var o=new Error("No SAPI data available");return g.warn(o.message),i.push(o),[]},a.prototype.notifyFetchFinished=function(e,t){var n=this;e.forEach(function(e){var i=n.get(e);i.state!==_.HAS_DATA&&(i.state=_.ERROR,t&&(i.status.code=t))}),n._finishedListeners.forEach(function(t){t(e)})},a.prototype.registerFinished=function(e){var t=this,n=function(t){e.publish(y.METADATA_AVAILABLE,t)};return t._finishedListeners.push(n),function(){var e=t._finishedListeners.indexOf(n);-1!==e&&t._finishedListeners.splice(e,1)}};var M=["configName","defaultVal","validator","transform","overwrite"]},{"../../lib":"bRhrlU","../../lib/logger":"IS9j5T","./error":20,"./event":"YJm+dH","./stream":"Af6MnA","./util":"jJTEqU"}],"./nextgen/src/metadata-fetcher.js":[function(e,t,n){t.exports=e("QCpdmG")},{}],QCpdmG:[function(e,t,n){function i(e,t,n){var i=this;i._model=e,i._eventBus=t,i._profiler=n,i._sapi=new s(i._model,t,n),i._prefetchEmitted=!1,i._unsubNotifyFinished=i._model.mediaStore.registerFinished(i._eventBus)}var r=e("./error"),o=e("./event"),a=e("./media-store"),s=e("./sapi"),l=e("./util"),c=e("../../lib"),p=e("../../lib/logger");t.exports=i,i.prototype._emitPrefetchAvailable=function(){var e=this,t=[],n=e._model.mediaStore.getAll();for(var i in n)if(n.hasOwnProperty(i)){var r=n[i];r.state===a.ItemState.HAS_DATA&&t.push(i)}t.length&&e._eventBus.publish(o.METADATA_AVAILABLE,t)},i.prototype.updateMetadata=function(e,t,n){var i=this;i._prefetchEmitted||(i._emitPrefetchAvailable(),i._prefetchEmitted=!0,i._profiler.setEndTime(o.Metrics.INIT_TO_SAPI));var r=[],s=i._model.mediaStore.getAll();for(var l in s)if(s.hasOwnProperty(l)){var c=s[l];(c.state===a.ItemState.NO_DATA||c.recoveryStatus===a.ItemRecoveryStatus.RECOVERING)&&(r.push(l),c.state=a.ItemState.FETCHING)}i._updateUUIDsFromSAPI(r,e,!1,t,n)},i.prototype._getMetaConfig=function(){var e=this;return{width:e._model.ui.thumbnailDimensions.width||e._model.uiState.width,
height:e._model.ui.thumbnailDimensions.height||e._model.uiState.height,site:e._model.baseConfig.site,expb:e._model.baseConfig.experienceBucket,expn:e._model.baseConfig.experienceName,lang:e._model.baseConfig.lang,region:e._model.baseConfig.region,synd:e._model.baseConfig.syndication,pspid:e._model.CMS.suppressAdContext?"":e._model.baseConfig.pageSpaceId,acctid:e._model.YVAP.accountId,topic:e._model.YVAP.cTopic,plidl:e._model.CMS.suppressAdContext?"":e._model.YVAP.playContext,rt:e._model.rendererTypes}},i.prototype.fetchPlaylist=function(e){var t=this;e=e||function(){};var n=t._getMetaConfig();n.uuid=t._model.playlist.id,t._profiler.add(o.Metrics.PLAYLIST_LOADED),t._sapi.loadPlaylist(n,t._model.capabilities,function(n,i){if(n)return void e(n);try{var a=i.query.results.mediaObj;t._profiler.setEndTime(o.Metrics.PLAYLIST_LOADED)}catch(n){var s=l.createErr("S",t._model.playbackState,r.E_PLAYER,r.PLAYER_CODES.E_PLAYER_CMS_RESPONSE);return t._eventBus.publish(o.ERROR,s),void e(s)}a&&(t._model.playlist.appendFromRaw(a,t._model.rendererTypes,t._model.capabilities,[]),t.updateMetadata(e,null,null))})},i.prototype._updateUUIDsFromSAPI=function(e,t,n,i,r){var a=this;t=t||function(){};var s=a._getMetaConfig();if(s.uuids=e,e.length>0){if(a._model.playlist){var l=a._model.playlist.getCurrentItem();l&&l.id===e[0]&&(s.ps=l.videoSession)}a._profiler.add(o.Metrics.SAPI_LOADCLIPS),a._sapi.loadClips(s,a._model.capabilities,function(o,s,l){t(a._onSAPI(o,s,e,n,l,i,r))},r)}else t(null)},i.prototype.refreshMetadata=function(e){var t=this;t._updateUUIDsFromSAPI(e,void 0,!0)},i.prototype._onSAPI=function(e,t,n,i,a,s,d){var u=this;s=c.isNullOrUndefined(s)?!1:s,d=c.isNullOrUndefined(d)?!1:d;var _=null;if(e){_=e;var v,y=s?o.WARNING:o.ERROR,m=s?r.E_WARNING:r.E_PLAYER;v=e.message===l.JSONP_ERROR?s?r.PLAYER_CODES.E_PLAYER_CMS_JSONP_REQUEST_FAILURE_SILENT_FAIL:r.PLAYER_CODES.E_PLAYER_CMS_JSONP_REQUEST_FAILURE:e.message===l.JSONP_TIMED_OUT?s?r.PLAYER_CODES.E_PLAYER_CMS_JSONP_REQUEST_TIMEOUT_SILENT_FAIL:r.PLAYER_CODES.E_PLAYER_CMS_JSONP_REQUEST_TIMEOUT:e.subcategory,_=l.createErr("S",u._model.playbackState,m,v,null,a+"; "+_.debugMessage,d),u._eventBus.publish(y,_)}else{var f;try{f=t.query.results.mediaObj,u._profiler.setEndTime(o.Metrics.SAPI_LOADCLIPS)}catch(e){_=l.createErr("S",u._model.playbackState,r.E_PLAYER,r.PLAYER_CODES.E_PLAYER_CMS_RESPONSE),u._eventBus.publish(o.ERROR,_)}if(!_){var g=[];u._model.mediaStore.fillFromSapi(f,u._model.rendererTypes,u._model.capabilities,g),g.length&&p.warn("SAPI data errors encountered!")}u._model.CMS.colo=t.query?t.query.results.colo:"none",i?u._eventBus.publish(o.REFRESH_METADATA_AVAILABLE,n):u._model.mediaStore.notifyFetchFinished(n,_?_.subcategory:null)}return _},i.prototype.fillFromER=function(e){var t=this,n=e.query.results.mediaObj,i=[];t._model.mediaStore.fillFromSapi(n,t._model.rendererTypes,t._model.capabilities,i),i.length&&p.warn("ER data errors encountered!"),t._model.CMS.colo=e.query?e.query.results.colo:"none"},i.prototype.prefetch=function(e,t){for(var n=this,i=!0,r=0,a=e.length;a>r;r++){var s=n._model.mediaStore.get(e[r]);if(!s||"has-data"!==s.state){i=!1;break}}return i?void n._eventBus.publish(o.API.METADATA_READY,e):(e.forEach(function(e){n._model.mediaStore.updateItemFromRaw({id:e})}),void n.updateMetadata(function(){},t,!0))},i.prototype.getRelatedVideos=function(e,t,n){var i=this,r=0,a=15;return n=n||function(){},0===e.relatedVideoIds.length||t?(r=e.relatedVideoIds.length,i._profiler.add(o.Metrics.SAPI_LOADRELATED),void i._sapi.loadRelated({start:r,count:a,uuid:e.id,width:i._model.ui.thumbnailDimensions.width||i._model.uiState.width,height:i._model.ui.thumbnailDimensions.height||i._model.uiState.height,region:i._model.baseConfig.region,site:i._model.baseConfig.site,lang:i._model.baseConfig.lang},function(t,r){if(t)return void n(t);var a;try{a=r.query.results.result[0].mediaObj}catch(t){return void n(t)}var s=[],l=i._model.mediaStore.fillFromSapi(a,i._model.rendererTypes,i._model.capabilities,s);return i._profiler.setEndTime(o.Metrics.SAPI_LOADRELATED),s.length?void n(s[0]):void i.updateMetadata(function(t){t?n(t):(e.relatedVideoIds&&e.relatedVideoIds.length>0?e.relatedVideoIds=e.relatedVideoIds.concat(l):e.relatedVideoIds=l,n(null,l))})})):void n(null,e.relatedVideoIds)},i.prototype.updateUserPreferences=function(e){var t=this;t._sapi.updateUserPreferences(function(){},e)},i.prototype.getUserPreferences=function(){var e=this;if(e._model.userPreferences.isAuthenticated){if(e._model.userPreferences.closedCaptions.isAvailable&&!c.isNullOrUndefined(e._model.userPreferences.isAdult))return;var t=l.getSingleton("userPrefs");if(!c.isNullOrUndefined(t))return void e._updateUserPreferencesData(t);e._profiler.add(o.Metrics.GET_USER_PREFS),e._sapi.getUserPreferences(function(t,n){return t?void p.error("User preferences failed on SAPI call.",t):void(n.userprefs&&(e._profiler.setEndTime(o.Metrics.GET_USER_PREFS),e._updateUserPreferencesData(n.userprefs,!0)))})}},i.prototype._updateUserPreferencesData=function(e){var t=this,n=e[0]?e[0].closedcaptionprefs:null;if(t._model.userPreferences.isAdult=e[1]?e[1].isAdult:null,!n&&"Invalid_GUID"===e[0].err)return t._model.userPreferences.isAuthenticated=!1,void t._eventBus.publish(o.USER_AUTHENTICATED);if(t._model.userPreferences.isAuthenticated=!0,t._eventBus.publish(o.USER_AUTHENTICATED),n&&!n.err){var i;e[0].closedcaptionprefs.show=t._model.userPreferences.closedCaptions.show,a.fillFromConfig(t._model.getModelSchema().userPreferences.closedCaptions,e[0],t._model.userPreferences.closedCaptions,i),i||(t._model.userPreferences.closedCaptions.isAvailable=!0,t._eventBus.publish(o.CC.USER_STYLE_PREFERENCES_CHANGE),l.setSingleton("userPrefs",e))}},i.prototype.destroy=function(){var e=this;e._unsubNotifyFinished(),e._sapi.cancelAll()}},{"../../lib":"bRhrlU","../../lib/logger":"IS9j5T","./error":20,"./event":"YJm+dH","./media-store":42,"./sapi":64,"./util":"jJTEqU"}],45:[function(e,t,n){"use strict";function i(e){var t=this,n=("https:"===document.location.protocol?"https://sb":"http://b")+".scorecardresearch.com/p",i={rn:e.randomVal,C4:e.comscoreC4,C5:e.comscoreC5,C6:e.comscoreC6,C1:function(){return"1"},C2:function(){return"7241469"},cv:function(){return"2.0"}};t.sendOpts={baseUrl:n,target:"cs",paramGetters:i,beginningKeys:["C1","C2","C4","C5","C6","cv","rn"]},t.beaconMappings={PLAYBACK_START:{keys:[],data:{}},AD_START:{keys:[],data:{C5:"09"}}}}t.exports=i},{}],46:[function(e,t,n){"use strict";function i(e,t,n){var i=this;i._model=e,i._eventBus=t,i._commonFields=n;var o=e.metrics.skipComscore;if(i._streamSenseTag=o?function(){}:null,i._comscoreBeaconQueue=[],i._comscorePersistentLabels={},i._eventBus.subscribe(s.MEDIA_ITEM_LOADED,i._onMediaItemChanged,i),i._eventBus.subscribe(s.PLAYBACK_ENDED,i._onPlaybackComplete,i),i._eventBus.subscribe(s.Video.SEEKING,i._onPlaybackSeeking,i),i._eventBus.subscribe(s.Video.SEEKED,i._onPlaybackSeeked,i),i._eventBus.subscribe(s.Video.PAUSE,i._onPlaybackPaused,i),i._eventBus.subscribe(s.PLAYBACK_RESUMED,i._onPlaybackResumed,i),i._eventBus.subscribe(s.Video.WAITING,i._onWaiting,i),i._eventBus.subscribe(s.PLAYBACK_STARTED,i.setVideoClipLabels,i),i._eventBus.subscribe(s.Video.PLAYING,i._onPlaying,i),i._eventBus.subscribe(s.CONTROLS_SET_VOLUME,i._onVolumeChanged,i),i._eventBus.subscribe(s.AD_PLAYBACK_ENDED,i._onAdPlaybackComplete,i),i._eventBus.subscribe(s.AD_PLAYBACK_STARTED,i.setAdClipLabels,i),i._eventBus.subscribe(s.AD_PLAYBACK_PAUSED,i._onAdPaused,i),i._eventBus.subscribe(s.AD_PLAYBACK_RESUMED,i._onAdResumed,i),!o&&!u.tv){var c=r.getAssetUrl(e.isLocal(),e.version,l);window.ns_&&window.ns_.StreamSense?i._createStreamingTag():r.lazyLoad(c,p,function(e){return e?void a.warn("Failed to load comscore streamsense js:-"+e):void i._createStreamingTag()},o)}}t.exports=i;var r=e("../util"),o=e("../../../lib"),a=e("../../../lib/logger"),s=e("../event"),l="streamsense.min.js",c="scorecardresearch.com/p?c1=2&c2=7241469",p=1e4,d=e("./metrics-constants"),u=e("../../../lib/user-agent");i.prototype._createStreamingTag=function(){var e=this,t=("https:"===document.location.protocol?"https://sb.":"http://b.")+c;e._streamSenseTag=new window.ns_.StreamSense({},t),e._eventMap={play:window.ns_.StreamSense.PlayerEvents.PLAY,pause:window.ns_.StreamSense.PlayerEvents.PAUSE,buffer:window.ns_.StreamSense.PlayerEvents.BUFFER,end:window.ns_.StreamSense.PlayerEvents.END}},i.prototype._onMediaItemChanged=function(){var e=this,t=e._commonFields;e._currentIndex=0,e._contentIndex=null,e._partNumber=0;var n;switch(t.location()){case"3":n="Emb onNet";break;case"4":n="Emb offNet";break;default:n="onProp"}e.setComscorePersistentLabels(e._commonFields),e.addToComscoreQueue(function(){e.setPlaylist({y_lms:t.licenseId(),c6:t.comscoreC6(),y_sp:t.streamProtocol(),y_stype:t.streamType(),ns_st_pl:t.videoTitle(),ns_st_cs:t.dimensions(),y_st:t.site(),y_rg:t.region(),y_lc:n,y_pb:d.STRING_DEFAULT})})},i.prototype._onPlaybackSeeking=function(e){var t=this,n=e>0?e:t._commonFields.playbackPosition();t.addToComscoreQueue(function(){t.notifyState("pause",{ns_st_ui:"seeking"},(1e3*n).toString())})},i.prototype._onPlaybackSeeked=function(e){var t=this;t.addToComscoreQueue(function(){t.notifyState("play",{ns_st_ui:"seeking"},(1e3*e).toString())})},i.prototype._onWaiting=function(e){var t=this;if(!e||!e.ignoreBuffering&&e.value){var n=t._commonFields.playbackPosition();t.addToComscoreQueue(function(){t.notifyState("buffer",{},(1e3*n).toString())}),t._bufferingStart=!0}},i.prototype._onPlaying=function(){var e=this,t=e._commonFields.playbackPosition();e._bufferingStart&&(e.addToComscoreQueue(function(){e.notifyState("play",{},(1e3*t).toString())}),e._bufferingStart=!1)},i.prototype._onPlaybackComplete=function(e,t){var n=this,i=n._commonFields.playbackPosition(),r=n._model.playback.bitrate,o={ns_st_br:r.toString()};t&&(o.ns_st_pe="1"),n.addToComscoreQueue(function(){n.notifyState("end",o,(1e3*i).toString())})},i.prototype._onPlaybackPaused=function(){var e=this,t=e._commonFields.playbackPosition();e.addToComscoreQueue(function(){e.notifyState("pause",{},(1e3*t).toString())})},i.prototype._onPlaybackResumed=function(){var e=this,t=e._commonFields.playbackPosition();e.addToComscoreQueue(function(){e.notifyState("play",{},(1e3*t).toString())})},i.prototype._onAdPaused=function(){var e=this,t=e._commonFields.playbackPosition();e.addToComscoreQueue(function(){e.notifyState("pause",{},(1e3*t).toString())})},i.prototype._onVolumeChanged=function(e){var t=this;t.addToComscoreQueue(function(){t.updateClipAttrs({ns_st_vo:Math.round(100*e)})})},i.prototype._onAdResumed=function(){var e=this,t=e._commonFields.playbackPosition();e.addToComscoreQueue(function(){e.notifyState("play",{},(1e3*t).toString())})},i.prototype._onAdOrContentStarted=function(){var e=this,t=e._commonFields.playbackPosition();e.addToComscoreQueue(function(){var n=e._model.playback.bitrate,i={};0!==n&&(n=n.toString(),i.ns_st_br=n),e.notifyState("play",i,(1e3*t).toString())})},i.prototype._onAdPlaybackComplete=function(){var e=this,t=e._commonFields.adPlaybackPosition();e.addToComscoreQueue(function(){e.notifyState("end",{},(1e3*t).toString())})},i.prototype.setComscorePersistentLabels=function(){var e=this,t=e._commonFields,n=e._comscorePersistentLabels;n.ns_site="yahoo-video","dash"===t.rendererType()?n.ns_st_mp="dash":"html"===t.rendererType()?n.ns_st_mp="h":n.ns_st_mp="f",n.ns_st_mv=t.playerVersion(),n.c3="*null",n.c4=t.comscoreC4(),n.c7=t.pageUrl(),n.c9=t.pageReferrer(),e.addToComscoreQueue(function(){e.setPersistentLabels(n)})},i.prototype.setVideoClipLabels=function(){var e=this,t=e._commonFields,n="true"===t.autoplay()?"1":"0";o.isNullOrUndefined(e._contentIndex)&&(e._currentIndex++,e._contentIndex=e._currentIndex);var i={ns_st_pr:t.videoTitle(),ns_st_ep:t.videoShowName(),ns_st_ge:t.genre(),ns_st_cu:t.pageUrl(),ns_st_vo:Math.round(t.volumeLevel()),ns_st_ty:t.contentType(),ns_st_cn:e._contentIndex,ns_st_ci:t.videoId(),y_pid:t.providerId(),y_lbl:t.label(),ns_st_pn:++e._partNumber,y_art:t.mainArtist(),y_pvid:t.providerVideoId(),y_s:t.pageSpaceId(),y_c:t.cdn(),y_ap:n},r=t.videoLength(),a="vc11";if("na"!==r&&r>600&&(a="vc12"),t.isLive()){var s=t.eventBegin(),l=t.eventEnd();r=""!==s&&""!==l?l-s:null,i.ns_st_li="1",a="vc23"}i.ns_st_ct=a,i.ns_st_cl=r&&"na"!==r?(1e3*r).toString():d.INT_DEFAULT;var c=e._model.playbackState.looped;e.addToComscoreQueue(function(){c?e.setClip(i,!0):e.setClip(i)}),e._onAdOrContentStarted()},i.prototype.setAdClipLabels=function(){var e=this,t=e._commonFields,n="true"===t.autoplay()?"1":"0",i="va11",r=t.adId()||d.INT_DEFAULT,o=t.adPosition(),a=t.adDuration();t.isLive()?i="va21":"postroll"===o?i="va13":"midroll"===o&&(i="va12");var s={ns_st_ty:t.contentType(),ns_st_ct:i,ns_st_ad:"1",ns_st_pr:"ad",ns_st_ep:"ad",ns_st_cu:d.STRING_DEFAULT,ns_st_vo:Math.round(t.volumeLevel()),ns_st_cn:++e._currentIndex,ns_st_ci:r,ns_st_cl:a?(1e3*a).toString():d.STRING_DEFAULT,ns_st_pn:"1",y_pid:t.providerId(),y_lbl:t.label(),y_art:t.mainArtist(),y_pvid:t.providerVideoId(),y_s:t.pageSpaceId(),y_ap:n};e.addToComscoreQueue(function(){e.setClip(s)}),e._onAdOrContentStarted()},i.prototype.setPersistentLabels=function(e){var t=this;t._streamSenseTag.setLabels(e)},i.prototype.setPlaylist=function(e){var t=this;t._streamSenseTag.setPlaylist(e)},i.prototype.setClip=function(e){var t=this;t._streamSenseTag.setClip(e)},i.prototype.notifyState=function(e,t,n){var i=this;i._streamSenseTag.notify(i._eventMap[e],t,n)},i.prototype.updateClipAttrs=function(e){var t=this,n=t._streamSenseTag.getClip();n&&n.setLabels(e)},i.prototype._fireComscoreBeacons=function(){var e=this,t=e._comscoreBeaconQueue;t.forEach(function(e){e()}),e._comscoreBeaconQueue=[]},i.prototype.addToComscoreQueue=function(e){var t=this,n=t._comscoreBeaconQueue;n.push(e),t._streamSenseTag&&t._fireComscoreBeacons()}},{"../../../lib":"bRhrlU","../../../lib/logger":"IS9j5T","../../../lib/user-agent":"ty5FFo","../event":"YJm+dH","../util":"jJTEqU","./metrics-constants":48}],47:[function(e,t,n){"use strict";function i(e,t,n){var i=this;i._model=e,i._eventBus=t,i._commonFields=n;var c=e.metrics.skipComscore;i._streamTag=c?function(){}:null;var p=r.getAssetUrl(e.isLocal(),e.version,s);i._mediaMetrieQueue=[],i._position=0,i._eventBus.subscribe(a.PLAYBACK_STARTED,i._setVideoLabels,i),i._eventBus.subscribe(a.Video.TIMEUPDATE,i._onPlaybackProgress,i),i._eventBus.subscribe(a.API.PLAYLIST_COMPLETE,i._onPlaybackComplete,i),i._eventBus.subscribe(a.API.PLAYLIST_POSITION_CHANGE,i._onPlaybackComplete,i),i._eventBus.subscribe(a.Video.PAUSE,i._onPlaybackPaused,i),i._eventBus.subscribe(a.PLAYBACK_RESUMED,i._onPlaybackResumed,i),i._eventBus.subscribe(a.Video.SEEKING,i._onPlaybackSeeking,i),i._eventBus.subscribe(a.Video.SEEKED,i._onPlaybackSeeked,i),i._eventBus.subscribe(a.MEDIA_ITEM_LOADED,i._onMediaItemLoaded,i),c||(window.eStatTag?i._mediaMetrieJSLoaded=!0:r.lazyLoad(p,l,function(e){return e?void o.warn("Failed to load mediaMetrie js:-"+e):void(i._mediaMetrieJSLoaded=!0)},c))}t.exports=i;var r=e("../util"),o=e("../../../lib/logger"),a=e("../event"),s="mu-yahoo-integration-5.0.js",l=1e4,c=e("./metrics-constants"),p=220020212974;i.prototype._onMediaItemLoaded=function(){var e=this;e._mediaMetrieJSLoaded&&e._createTags()},i.prototype._createTags=function(){var e=this;e._streamTag&&(e._streamTag=null,e.confStreamingAnalyticsMediametrie=null),e.confStreamingAnalyticsMediametrie={serial:e._getSerial(),measure:"streaming",levels:{level_1:"",level_2:"",level_3:"",level_4:"",level_5:""},streaming:{diffusion:"replay",callbackPosition:function(){return e._position},playerObj:e._model.guid,streamDuration:"",playerName:"yahoo video player",playerVersion:e._model.version,streamName:"",streamURL:"",streamGenre:""}},e._mediaMetrieJSLoaded&&(e._streamTag=new window.eStatTag(e.confStreamingAnalyticsMediametrie))},i.prototype._getSerial=function(){var e=this,t=e._model.playlist.getCurrentItem(),n=t&&t.metrics.mediametrie;return n?n:p},i.prototype._setVideoLabels=function(){var e=this,t=e._commonFields;e.addToMediaMetrieQueue(function(){var n=e.confStreamingAnalyticsMediametrie;if(n){n.serial=e._getSerial(),n.levels.level_1=t.site(),n.levels.level_2=t.providerId(),n.levels.level_3=t.licenseId(),n.levels.level_4=t.mediaMetaTags(),t.isLive()&&(n.levels.diffusion="live");var i=t.videoLength();n.streaming.streamDuration=i&&"na"!==i?i.toString():c.INT_DEFAULT,n.streaming.streamName=t.videoTitle(),n.streaming.streamGenre=t.genre(),n.streaming.streamURL=t.pageUrl(),e.setLabels(n)}});var n=t.playbackPosition();e.addToMediaMetrieQueue(function(){e.notifyState("play",n.toString())})},i.prototype._onPlaybackProgress=function(e){var t=this,n=t._commonFields;t._position=parseInt(e),t.addToMediaMetrieQueue(function(){var e=t.confStreamingAnalyticsMediametrie;e&&n.isLive()&&(e.levels.diffusion="timeshifting",t.setLabels(e))})},i.prototype._onPlaybackComplete=function(){var e=this,t=e._commonFields,n=t.playbackPosition();e.addToMediaMetrieQueue(function(){e.notifyState("stop",n.toString())})},i.prototype._onPlaybackPaused=function(){var e=this,t=e._commonFields,n=t.playbackPosition();e.addToMediaMetrieQueue(function(){e.notifyState("pause",n.toString())})},i.prototype._onPlaybackResumed=function(){var e=this,t=e._commonFields,n=t.playbackPosition();e.addToMediaMetrieQueue(function(){e.notifyState("play",n.toString())})},i.prototype._onPlaybackSeeking=function(e){var t=this,n=t._commonFields,i=n.playbackPosition();t.addToMediaMetrieQueue(function(){t.notifyState("pause",i.toString())})},i.prototype._onPlaybackSeeked=function(e){var t=this;t._model.playbackState.paused||t.addToMediaMetrieQueue(function(){t.notifyState("play",e.toString())})},i.prototype.setLabels=function(e){var t=this;t._streamTag.set(e)},i.prototype.notifyState=function(e,t){var n=this;n._position=parseInt(t),n._streamTag.notifyPlayer(e,n._position)},i.prototype._fireMediaMetrieBeacons=function(){var e=this;e._mediaMetrieQueue.forEach(function(e){e()}),e._mediaMetrieQueue=[]},i.prototype.addToMediaMetrieQueue=function(e){var t=this,n=t._mediaMetrieQueue;n.push(e),t._streamTag&&t._fireMediaMetrieBeacons()}},{"../../../lib/logger":"IS9j5T","../event":"YJm+dH","../util":"jJTEqU","./metrics-constants":48}],48:[function(e,t,n){"use strict";t.exports={PROGRESS_INTERVAL:10,TRUE_STREAMS_INTERVAL:3,QUARTILE_PROGRESS_INTERVAL:25,BEACON_HIDE_VALUE:{},BEACON_HIDE_KEY_VALUE:{},STRING_DEFAULT:"none",INT_DEFAULT:"",CLICK:"click",AUTOPLAY:"autoplay",API:"api",CONTINUOUS:"continuous",HOVER:"hover",SCROLL:"scroll",PLAYBACK_PROGRESS_MODE_CLASSIC:{fixed:[3],recurring:10,playerUnload:!1,playPause:!1,firingCriteria:"FREQ_MODE_CLASSIC"},PLAYBACK_PROGRESS_MODE_STANDARD:{fixed:[3,10],recurring:30,playerUnload:!0,playPause:!0,firingCriteria:"FREQ_MODE_STANDARD"},BEACON_DISASTER_MODE:{global:0,PLAYBACK_START:1,PLAYER_ERROR:.05},SEG_INFO_LENGTH:6}},{}],49:[function(e,t,n){"use strict";function i(e,t,n){var i=this;i._model=e,i._eventBus=t,i._profiler=n,i._eventBus.subscribe(u.VIDEO_REQUEST,i._onVideoRequest,i),i._eventBus.subscribe(u.START_SCREEN_RENDERED,i._onStartScreenRendered,i),i._eventBus.subscribe(u.HLS_FIRST_TS_LOAD_START,i._onContentFirstTSLoadStart,i),i._eventBus.subscribe(u.HLS_FIRST_TS_FIRST_BYTE_ARRIVE,i._onContentFirstTSFirstByteArrive,i),i._eventBus.subscribe(u.PLAYBACK_STARTED,i._onContentStarted,i),i._eventBus.subscribe(u.PLAYBACK_REQUEST,i._onPlaybackRequested,i),i._eventBus.subscribe(u.PLAYBACK_RESUMED,i._onPlaybackResumed,i),i._eventBus.subscribe(u.PLAYBACK_STALLED,i._onPlaybackStalled,i),i._eventBus.subscribe(u.API.UI_INTERACT,i._onUIInteraction,i),i._eventBus.subscribe(u.VIDEO_APPS_LOADED,i._onVideoAppsLoaded,i),i._eventBus.subscribe(u.API.BITRATE_CHANGE,i._onBitrateChange,i),i._eventBus.subscribe(u.API_CALLED,i._onApiCalled,i),i._eventBus.subscribe(u.FEEDBACK_INFO,i._onFeedbackCalled,i),i._eventBus.subscribe(u.RECOVERY_METADATA_READY,i._onRecoveryMetadata,i),i._eventBus.subscribe(u.CTRL_PLAYPAUSE,i._onCtrlPlayPause,i),i._eventBus.subscribe(u.CTRL_SEEK,i._onSeek,i),i._eventBus.subscribe(u.CTRL_VOLUME,i._onVolume,i),i._eventBus.subscribe(u.CTRL_FULLSCREEN,i._onFullscreen,i),i._eventBus.subscribe(u.CTRL_SETTINGS,i._onSettings,i),i._eventBus.subscribe(u.CTRL_PLAYREQUEST,i._onCtrlPlayRequest,i),i._eventBus.subscribe(u.CC.UI_TOGGLE,i._onCCTog,i),i._eventBus.subscribe(u.CC.LANGUAGE_CHANGE,i._onCCLang,i),i._eventBus.subscribe(u.CC.UPDATE_STYLE,i._onCCStyle,i),i._eventBus.subscribe(u.CC.SETTINGS,i._onCCSettings,i),i._eventBus.subscribe(u.CTRL_AGEGATE_BDAY,i._onAgeBday,i),i._eventBus.subscribe(u.CTRL_SHARE,i._onShare,i),i._eventBus.subscribe(u.CTRL_REPLAY,i._onReplay,i),i._eventBus.subscribe(u.QUALITY_SELECTED,i._onQualitySelected,i),i._eventBus.subscribe(u.WL_CHANGE_REQUEST,i._onWatchLaterUpdate,i),i._eventBus.subscribe(u.CTRL_TIMER,i._onTimerUpdate,i),i._eventBus.subscribe(u.UI_LOGIN,i._onUILogin,i),i._eventBus.subscribe(u.CTRL_ENDSCREEN_VID,i._onSelectedEndscreenVideo,i),i._eventBus.subscribe(u.Video.LOADEDDATA,i._onVideoLoadedData,i),i._eventBus.subscribe(u.Video.TIMEUPDATE,i._onPlaybackProgress,i),i._eventBus.subscribe(u.PLAYBACK_ENDED,i._onPlaybackComplete,i),i._eventBus.subscribe(u.Video.PAUSE,i._onPlaybackPaused,i),i._eventBus.subscribe(u.Video.SEEKING,i._onPlaybackSeeking,i),i._eventBus.subscribe(u.Video.SEEKED,i._onPlaybackSeeked,i),i._eventBus.subscribe(u.Video.WAITING,i._onWaiting,i),i._eventBus.subscribe(u.AD_METRICS,i._onAdMetrics,i),i._eventBus.subscribe(u.AD_PLAYBACK_STARTED,i._onAdPlaybackStarted,i),i._eventBus.subscribe(u.AD_PLAYBACK_PROGRESS,i._onAdPlaybackProgress,i),i._eventBus.subscribe(u.AD_PLAYBACK_ENDED,i._onAdPlaybackComplete,i),i._eventBus.subscribe(u.AD_PLAYBACK_ERROR,i._onAdError,i),i._eventBus.subscribe(u.RENDERER_PLUGIN_LOADED,i._onRendererPluginLoaded,i),i._eventBus.subscribe(u.RENDERER_PLUGIN_LOAD_FAILED,i._onRendererPluginLoadFailed,i),i._eventBus.subscribe(u.RENDERER_PLUGIN_LOAD_TIMED_OUT,i._onRendererPluginLoadTimedOut,i),v.getWindow().addEventListener("unload",i._onWindowUnload.bind(i)),i._rendererPluginLoadStatus=0,i._rootElem=null,i._renderer=null,i._eventBus.subscribe(u.ERROR,i._onError,i),i._eventBus.subscribe(u.WARNING,i._onWarning,i),i._eventBus.subscribe(u.INFO,i._onInfo,i),i._eventBus.subscribe(u.API.PLAYBACK_TIMEOUT,i._onWarning,i),i._eventBus.subscribe(u.FLASH_NATIVE_PLAYING_EVENT_FIRED,i._onFlashNativePlayingEventFired,i),i._playEventFired=!1,i._commonFields=i._getCommonFieldsTable(),i._continuousPlayCount=0,i._guid=i._model.guid,i._trueStreamsProgressFired=!1,i._trueStreamsAdProgressFired=!1,i._totalWatchedPlaybackTime=0,i._totalBufferingTime=0,i._segInfo=[],i._buffTimeTrueStream=0,i._buffTimeDiff=0,i._segmentwiseBuffTime=0,i._progressBeaconDistance=0,i._recoveredPlayback=!1,i._jsDownloadTime,i._systems=[],i._beaconDisasterMode=i._model.failOver&&i._model.failOver.beaconDisasterMode||!1,i._progressBeaconMode=L.PLAYBACK_PROGRESS_MODE_STANDARD,i._model.metrics.progressBeaconStrategy&&(i._progressBeaconMode=i._model.metrics.progressBeaconStrategy,i._progressBeaconMode.firingCriteria="FREQ_MODE_CONFIG"),i._criticalErrorFiredMap={},i._guidMap={},i._videoQuartile=0,i._adQuartile=0,Math.random()<=i._model.metrics.ywaSamplingRate&&i._systems.push(new f(i._commonFields)),Math.random()<=i._model.metrics.ultSamplingRate&&i._systems.push(new g(i._commonFields)),Math.random()<=i._model.metrics.qosSamplingRate&&i._systems.push(new b(i._commonFields)),"vidible"===i._model.baseConfig.syndication&&i._systems.push(new E(i._commonFields)),i._systems.push(new A(i._commonFields)),i._systems.push(new h(i._commonFields)),i._templateMetrics=new r(e,i._commonFields),i._comscoreMetrics=new S(e,i._eventBus,i._commonFields),"FR"===i._model.baseConfig.region.toUpperCase()&&(i._mediaMetrie=new T(e,i._eventBus,i._commonFields)),i._sendPageView(),i._sendPlayerLoaded()}function r(e,t){var n=this;n._model=e,n._paramGetters={RANDOM_VALUE:t.randomVal,PLAYLIST_INDEX:t.playlistPosition,VOLUME_LEVEL:t.volumeLevel,DEVICE_NAME:t.deviceName,MAKE:t.deviceMake,MODEL:t.deviceModel,OS:t.deviceOS,AD_ID:t.adId,AD_LOADED:function(){return t.adLoaded()?"yes":"no"},AD_TYPE:t.adType,EVT_NAME:function(e){switch(e){case"PLAYBACK_START":case"AD_START":return"play";case"PLAYBACK_PAUSE":return"pause";case"PLAYBACK_COMPLETE":case"AD_COMPLETE":return"end";default:return"unknown"}}}}function o(e,t){return v.strSubstitute(e,function(e){var n=t(e);return null!==n?n:(m.error("Metrics: unknown substitution key: "+e),"")})}function a(e,t,n,i,r){var o=n.beginningKeys||[],a=n.endKeys||[],l=n.paramGetters,c=[].concat(o,e,a),p=[];c.forEach(function(e){var n;if(n=e in t?t[e]:e in l?l[e]():null,y.isNullOrUndefined(n)&&(m.error("Metrics: missing data for beacon key: "+e),n=L.BEACON_HIDE_KEY_VALUE),n===L.BEACON_HIDE_VALUE&&(n=null),n!==L.BEACON_HIDE_KEY_VALUE){var i={};i[e]=n,p.push(i)}});var d=n.baseUrl+"?"+v.querystring(p,"&","=",s);return i&&(d+=i),n.iFrameBeacon?v.sendIframeBeacon(d):n.unloadBeacon?v.sendUnloadBeacon(d):(v.sendImageBeacon(d),void r.publish(u.API.BEACON_SEND,{url:d,date:new Date}))}function s(e){return encodeURIComponent(e).replace(/[!'()]/g,escape).replace(/\*/g,"%2A")}function l(e){return y.isBoolean(e)&&(e=e?"1":"0"),y.isArray(e)&&(e=e.toString()),e&&""!==e?e:L.STRING_DEFAULT}function c(){try{return window.top.document}catch(e){return null}}function p(e){return e=d(e),e?e.split("?")[0]:""}function d(e){return e?e.replace(/(_ylt(.)+(\?)|_ylt(.)+)/,"?"):e}t.exports={Metrics:i};var u=e("../event"),_=e("../../../lib/user-agent"),v=e("../util"),y=e("../../../lib"),m=e("../../../lib/logger"),f=e("./ywa-metrics"),g=e("./ult-metrics"),b=e("./qos-metrics"),E=e("./vidible-metrics"),h=e("./sizmek-metrics"),A=e("./comscore-metrics"),S=e("./comscore"),T=e("./media-metrie"),L=e("./metrics-constants"),I=e("../error"),M=e("../media-store"),C=4;i.prototype._onFlashNativePlayingEventFired=function(){var e=this;e._playEventFired=!0},i.prototype._createClipGuid=function(e){var t=this,n=Math.floor(4294967295*Math.random());return e&&!t._guidMap[e.id]&&(t._guidMap[e.id]=n),n},i.prototype._getCommonFieldsTable=function(){var e=this,t=e._model,n=function(){return t.playlist.getCurrentItem()},i=function(t){var n=e._profiler.getItem(t);return n&&!y.isNullOrUndefined(n.timeDiff)?n.timeDiff:L.INT_DEFAULT},r={yvapID:function(){return e._model.YVAP&&e._model.YVAP.accountId?e._model.YVAP.accountId:""},currVolume:function(){return e._model.playbackState.volume},tsapic:function(){var t=e._profiler.getItem(u.Metrics.SAPI_REQUEST);return t&&t.timeDiff&&0!==t.timeDiff?t.timeDiff:""},sapiColo:function(){return e._model.CMS.colo||""},cachedVs:function(){return e._model.CMS.cachedVs||""},flashVersion:function(){var t="na";return e._renderer&&"flash"===e._model.playbackState.rendererType&&(t=e._renderer.getFlashVersion(),t&&t.join(".")),t},site:function(){var e=t.baseConfig.siteAnalytics.toLowerCase();return l(e?e.toLowerCase():t.baseConfig.site.toLowerCase())},region:function(){return l(t.baseConfig.region.toLowerCase())},autoplay:function(){return t.playback.autoplay?"true":"false"},dimensions:function(){return t.uiState.width+"x"+t.uiState.height},videoSeqNum:function(){return e._seqNum},isLive:function(){var e=n();return e&&e.isLive()?1:0},isResume:function(){return t.playback.isResume?1:0},liveState:function(){var e=n();return e&&e.liveState?e.liveState:""},bitrate:function(){return t.playback.bitrate},quality:function(){return t.playback.quality},continuousPlay:function(){return t.playback.continuousPlay?1:0},continuousPlayCount:function(){return e._continuousPlayCount},location:function(){return v.isOffNetwork()?4:v.isIFrame()?3:1},offNetwork:function(){return v.isOffNetwork()?1:L.BEACON_HIDE_KEY_VALUE},lang:function(){return t.baseConfig.lang.toLowerCase()},licensorName:function(){var e=n();return l(e?e.license.licensorName:null)},licenseId:function(){var e=n();return e?e.license.licenseId:L.INT_DEFAULT},videoId:function(){var e=n();return e?e.id:L.INT_DEFAULT},videoTitle:function(){var e=n();return l(e?e.title:null)},videoShowName:function(){var e=n();return l(e?e.showName||e.license.licenseName:null)},videoQuartile:function(t){return t===!0?e._adQuartile:e._videoQuartile},playbackPosition:function(){return Math.round(e._playbackPosition)},adPlaybackPosition:function(){return Math.round(e._adPlaybackPosition)},seqStart:function(){return Math.round(e._seqStart)},playerInt32Guid:function(){return e._guid},clipGuid:function(){return e._clipGuid||""},masterPlayerInt32Guid:function(){return e._masterPlayerGuid},videoLength:function(){var e=n();return l(e?e.duration:null)},pageTitle:function(){var e=c();return e?e.title:L.STRING_DEFAULT},pageUrl:function(){return d(v.getHostUrl())},eventBegin:function(){var e=n();return e&&e.eventBeginTime?e.eventBeginTime:""},eventEnd:function(){var e=n();return e&&e.eventEndTime?e.eventEndTime:""},pageReferrer:function(){if(t.baseConfig.referrer)return t.baseConfig.referrer;var e=c();return e?p(e.referrer):L.STRING_DEFAULT},streamProtocol:function(){var e=n(),t=e?e.streams[0]:null;return l(t?t.url.split(":")[0]:null)},streamType:function(){var e=n();return e?e.getType():"none"},errorCode:function(){for(var e=t.errors,n=0;n<e.length;n++)if(e[n].code)return e[n].code;return 100},syndication:function(){return t.baseConfig.syndication},playerVersion:function(){return t.version},experienceName:function(){return t.baseConfig.experienceName.toLowerCase()},experienceType:function(){return t.baseConfig.experienceType.toLowerCase()},experienceBucket:function(){return t.baseConfig.experienceBucket},playListId:function(){return l(t.playlist.id)},jurisdiction:function(){return t.baseConfig.jurisdiction},randomVal:function(){return Math.random()},pageSpaceId:function(){return t.baseConfig.pageSpaceId||L.INT_DEFAULT},videoSpaceId:function(){var e=n();return e?e.metrics.pageSpaceId:L.INT_DEFAULT},percentWatched:function(e,t){return t>0?Math.floor(100*e/t):0},ccode:function(){return t.metrics.ccode},sec:function(){return t.metrics.sec},cpos:function(){return t.metrics.cpos},comscoreC4:function(){return t.metrics.comscoreC4},comscoreC5:function(){var e=n();return e?e.metrics.comscoreC5:L.INT_DEFAULT},comscoreC6:function(){var e=n();return e?e.metrics.comscoreC6:L.INT_DEFAULT},rendererType:function(){return t.playbackState.rendererType||L.STRING_DEFAULT},playerType:function(){return"nextgen-desktop"},jsDownloadTime:function(){return l(t.pageLatency.pagePlayerJsDownloadTime)},providerId:function(){var e=n();return e&&e.provider.providerId?e.provider.providerId:L.INT_DEFAULT},providerVideoId:function(){var e=n();return e&&e.provider.providerVideoId?e.provider.providerVideoId:L.INT_DEFAULT},publisherId:function(){var e=n();return l(e?e.provider.publisherId:null)},genre:function(){var e=n();return l(e&&e.genres.length?e.genres[0]:null)},syndicationId:function(){return t.baseConfig.syndication.split("-")[0]},mainArtist:function(){var e=n();return l(e&&e.credits.mainArtists.length?e.credits.mainArtists[0]:null)},label:function(){var e=n();return l(e&&e.credits?e.credits.label:null)},tripleplay:function(){var e=n();return e&&"tripleplay"===e.provisioningSource?1:L.INT_DEFAULT},playlistPosition:function(){return t.playlist.position},volumeLevel:function(){return t.playbackState.mute?0:100*t.playbackState.volume},deviceName:function(){return N.name},deviceMake:function(){return N.make},deviceModel:function(){return N.model},deviceOS:function(){return N.os},adId:function(){var e=t.playbackState.ad;return l(e?e.adId:null)},adDuration:function(){var e=t.playbackState.ad;return l(e?e.duration:null)},adPosition:function(){var e=t.playbackState.ad;return l(e?e.position:null)},adLoaded:function(){return!!t.playbackState.ad},adType:function(){var e=t.playbackState.ad;return l(e?e.position:null)},mediaMetaTags:function(){var e=n();return l(e?e.metrics.ywa:null)},isDrm:function(){var e=n();return l(e?e.hasDrmStreams():null)},videoSession:function(){var e=n();return e&&e.videoSession?e.videoSession:L.STRING_DEFAULT},samplingId:function(){var e=n();return e&&!isNaN(e.samplingId)?e.samplingId:L.STRING_DEFAULT;
},isMature:function(){var e=n();return e&&"none"!==e.ageGate?1:0},isMute:function(){return t.playbackState.mute?"m":"um"},cdn:function(){var e=n(),t=e?e.getCDN():null;return t?t:"uncalculated"},contentType:function(){return e._getContentType()},playerLocation:function(){var e=v.isOffNetwork()?4:v.isIFrame()?3:1;switch(e){case"3":return"Emb onNet";case"4":return"Emb offNet";default:return"onProp"}},ucLatency:function(){var t=e._profiler.getItem(u.Metrics.CLICK_TO_START),n=t?t.timeDiff:null;return n?n:""},apLatency:function(){var t=e._profiler.getItem(u.Metrics.INIT_TO_START),n=t?t.timeDiff:null;return n?n:""},viewability:function(){return e.viewability+"%"},playbackWatchedTime:function(){return Math.round(e._totalWatchedPlaybackTime)},bufferingTime:function(){return Math.round(e._totalBufferingTime)},rendererPluginLoadStatus:function(){return e._rendererPluginLoadStatus},loadFirstFragmentTime:function(){var t=e._profiler.getItem(u.Metrics.HLS_FIRST_TS_LOAD_START),n=t?t.timeDiff:null;return n?n:L.INT_DEFAULT},firstByteFirstFragmentTime:function(){var t=e._profiler.getItem(u.Metrics.HLS_FIRST_TS_FIRST_BYTE_ARRIVE),n=t?t.timeDiff:null;return n?n:L.INT_DEFAULT},mmActivityId:function(){var e=n();return e.metrics.mmActivityId},wrapInFn:function(e){return function(){return e}},hostingEnv:function(){var e=v.getSingleton("PlayerHosting");return e&&e.env?e.env:t.isLocal()?"l":"p"},hostingBucket:function(){var e=v.getSingleton("PlayerHosting");return e&&e.bucket?e.bucket:L.STRING_DEFAULT},hostingColo:function(){var e=v.getSingleton("PlayerHosting");return e&&e.colo?e.colo:L.STRING_DEFAULT},algo:function(){var e=n();if(e){if(e.relatedVideoIds.length){var i=t.mediaStore.get(e.relatedVideoIds[0]);return i.algo?i.algo:i.instrument?i.instrument:""}return e.algo?e.algo:e.instrument?e.instrument:""}return null},displayMode:function(){return e.fullScreenMode?"full":"window"},constructLatency:function(){return i(u.Metrics.VP_CONSTRUCTOR)},renderCreateLatency:function(){return i(u.Metrics.CREATE_RENDERER)},sapiLatency:function(){return i(u.Metrics.SAPI_REQUEST)},swfLatency:function(){return i(u.Metrics.SWF_READY)},initToSapiLatency:function(){return i(u.Metrics.INIT_TO_SAPI)},renderToSwfLatency:function(){return i(u.Metrics.RENDER_TO_SWF)},initRenderGapLatency:function(){return i(u.Metrics.INIT_RENDER_GAP)},ccPrefLatency:function(){return i(u.Metrics.GET_USER_PREFS)},hlsPlaylistLatency:function(){return i(u.Metrics.LOAD_TO_LOADED_DATA)},streamLatency:function(){return i(u.Metrics.STREAM_REQUEST_TO_RENDER)},playToRenderLatency:function(){return i(u.Metrics.STREAM_PLAY_TO_RENDER)},segInfo:function(){return JSON.stringify({seg:e._segInfo.slice(0,Math.min(L.SEG_INFO_LENGTH,e._segInfo.length))})},buffTimeDiff:function(){return e._buffTimeDiff},segmentBuffTime:function(){return e._segmentwiseBuffTime},progressBeaconDistance:function(){var t=Math.round(e._totalWatchedPlaybackTime)-Math.round(e._progressBeaconDistance);return t>=0?t:0},getRecoveryStatus:function(){var e=n();return e.getRecoveryStatusForBeacon()},recoveryStatus:function(){var t=n();return e._recoveredPlayback?M.ItemRecoveryStatus.RECOVERED:t.recoveryStatus===M.ItemRecoveryStatus.RECOVERING?M.ItemRecoveryStatus.RECOVERING:L.BEACON_HIDE_KEY_VALUE},watchPercent:function(){var t=n(),i=t&&t.duration>0?Math.round(100*e._totalWatchedPlaybackTime/t.duration):"";return i>100?100:i},pageLatency:function(){return t.metrics.pageLatency?t.metrics.pageLatency:"na"},playerJsDownloadTime:function(){if(!e._jsDownloadTime&&window.performance&&window.performance.getEntriesByType){var t,n=window.performance.getEntriesByType("resource");for(t in n)if(n[t].name.match("videoplayer-nextgen-(?!apps)")){e._jsDownloadTime=n[t].duration;break}}return e._jsDownloadTime?e._jsDownloadTime:"na"},requestType:function(){return e._model.playback.requestType||L.STRING_DEFAULT},requestAction:function(){return e._model.playback.requestAction||L.STRING_DEFAULT},upNext:function(){return v.showUpNext(t)?"true":"false"},clientWidth:function(){return e._model.playerDimension.width},clientHeight:function(){return e._model.playerDimension.height},getProgressBeaconMode:function(){return e._progressBeaconMode},manufacturer:function(){return t.CTV.man},deviceClass:function(){return t.CTV["class"]},cTVMetricsParams:function(){return t.CTV.ctvMetricsParams}};return r},i.prototype.setRootElem=function(e){var t=this;t._rootElem=e},i.prototype.setFlashRenderer=function(e){var t=this;t._renderer=e},i.prototype._sendBeacon=function(e){var t=this,n=Array.prototype.slice.call(arguments,1),i=[],r=null,o={INCOMPLETE_EXIT:!0};t._beaconDisasterMode&&t._checkRateLimit(e)||(n.length>0&&(i=[n[0].data],r=n[0].fireCriteria),t._systems.forEach(function(n){var s=n.beaconMappings[e];if(s){var l=t._model.playlist,c=l?l.getCurrentItem():null;if(!n.shouldFire||n.shouldFire(c)!==!1){var p=s.keys;y.isFunction(p)&&(p=p.apply(n,i));var d=s.data;y.isFunction(d)&&(d=d.apply(n,i));var u=v.extend({},n.sendOpts);if(s.overrideBaseKeys&&(u.beginningKeys=u.endKeys=[]),s.baseUrl&&(u.baseUrl=s.baseUrl),o[e]&&(u.unloadBeacon=!0),c){var _,m=c.metrics.beacons;if(e in m)for(var f=c.metrics.beacons[e]||[],g=0;g<f.length;g++){var b=f[g];if(b.target===u.target&&b.addParam){_=t._generateStackedBeaconParams(b.addParam);break}}}if((!r||s.firingCriteria.indexOf(r)>=0)&&a(p,d,u,_,t._eventBus),s.extras)for(var E=0;E<s.extras.length;E++){u.baseUrl=s.extras[E].baseUrl;var h=s.extras[E].data;y.isFunction(h)&&(h=h.apply(n,i)),a(s.extras[E].keys,h,u,null,t._eventBus)}}}}),t._templateMetrics.sendBeacon(e,i))},i.prototype._checkRateLimit=function(e){var t=L.BEACON_DISASTER_MODE,n=!1;return t.global<1&&(n=Math.random()>t.global),t[e]&&(n=1===t[e]?!1:Math.random()>t[e]),n},i.prototype._generateStackedBeaconParams=function(e){var t=this,n=t._commonFields;return y.isString(e)?e.replace("{COMSCORE_C4}",n.comscoreC4()).replace("{COMSCORE_C5}",n.comscoreC5()).replace("{COMSCORE_C6}",n.comscoreC6()):null},i.prototype._sendPageView=function(){var e=this,t=v.getSingleton("Metrics");t||(t={},v.setSingleton("Metrics",t)),t.PageView?e._masterPlayerGuid=t.MasterPlayer:(e._masterPlayerGuid=e._guid,t.MasterPlayer=e._masterPlayerGuid,t.PageView=!0,e._sendBeacon("PAGE_VIEW"))},i.prototype._onVideoRequest=function(e){var t=this;t._sendBeacon("VIDEO_REQUEST",{data:e})},i.prototype._onCtrlPlayRequest=function(e){var t=this;t._sendBeacon("CTRL_PLAYREQUEST",{data:e?e:""})},i.prototype._sendPlayerLoaded=function(){var e=this;e._sendBeacon("PLAYER_LOADED")},i.prototype._onStartScreenRendered=function(){var e=this;e._profiler.setEndTime(u.Metrics.INIT_TO_STARTSCREEN);var t=e._profiler.getItem(u.Metrics.INIT_TO_STARTSCREEN);t&&e._sendBeacon("INIT_TO_STARTSCREEN",{data:t.timeDiff})},i.prototype._onVideoLoadedData=function(){var e=this;e._videoLoadedFired||(e._sendBeacon("VIDEO_LOADEDDATA"),e._videoLoadedFired=!0)},i.prototype._onPlaybackRequested=function(){var e=this;e._seeking=!1,e._playbackPosition=0,e._initProgressBeaconState(),e._lastProgressBeaconPosition=e._playbackPosition,e._totalWatchedPlaybackTime=0,e._buffTimeTrueStream=0,e._progressBeaconDistance=0,e._seqNum=1,e._seqStart=e._playbackPosition,e._continuousPlayCount++,e._totalBufferingTime=0,e._recoveredPlayback=e._commonFields.getRecoveryStatus(),e._recoveredPlayback?(e._bufferingStart=!0,e._bufferingStartTime=Date.now()):(e._segInfo=[],e._segmentwiseBuffTime=0,e._trueStreamsProgressFired=!1)},i.prototype._onUIInteraction=function(e){var t=this;t._sendBeacon("UI_INTERACT",{data:e.srcElement})},i.prototype._onSeek=function(e){var t=this;t._sendBeacon("CTRL_SEEK",{data:e?e:""})},i.prototype._onVolume=function(e){var t=this,n=t._model.playbackState.volume;n!==e&&t._sendBeacon("CTRL_VOLUME",{data:e})},i.prototype._onCCTog=function(e){var t=this;t._sendBeacon("CC_TOGGLE",{data:e?"1":"0"})},i.prototype._onCCLang=function(e){var t=this;t._sendBeacon("CC_LANG",{data:e?e:"na"})},i.prototype._onCCStyle=function(e){var t=this;t._sendBeacon("CC_STYLE",{data:e?e:"na"})},i.prototype._onCCSettings=function(){var e=this;e._sendBeacon("CC_SETTINGS")},i.prototype._onAgeBday=function(){var e=this;e._sendBeacon("CTRL_AGEGATE_BDAY")},i.prototype._onFullscreen=function(e){var t=this;t.fullScreenMode="ON"===e,t._sendBeacon("FULLSCREEN",{data:e})},i.prototype._onSettings=function(){var e=this;e._sendBeacon("CTRL_SETTINGS")},i.prototype._onShare=function(e){var t=this;t._sendBeacon("CTRL_SHARE",{data:e})},i.prototype._onQualitySelected=function(e){var t=this;t._sendBeacon("QUALITY_SELECTED",{data:e.preference})},i.prototype._onReplay=function(){var e=this;e._sendBeacon("CTRL_REPLAY")},i.prototype._onWatchLaterUpdate=function(e){var t=this,n="";"add"===e.operation?n="1":"delete"===e.operation&&(n="0"),t._sendBeacon("WL_CHANGE_REQUEST",{data:n})},i.prototype._onTimerUpdate=function(e){var t=this;t._sendBeacon("CTRL_TIMER",{data:e})},i.prototype._onUILogin=function(e){var t=this;t._sendBeacon("UI_LOGIN",{data:e})},i.prototype._onSelectedEndscreenVideo=function(e){var t=this;t._sendBeacon("CTRL_ENDSCREEN_VID",{data:e})},i.prototype._updatePlayerViewability=function(){var e=this,t=e._rootElem,n=t.getElementsByClassName("yvp-main");e.viewability=v.getElementViewability(n[0])},i.prototype._onContentFirstTSLoadStart=function(){var e=this,t=e._profiler.getItem(u.Metrics.HLS_FIRST_TS_LOAD_START);t&&null===t.endTime&&(e._profiler.setEndTime(u.Metrics.HLS_FIRST_TS_LOAD_START),e._profiler.add(u.Metrics.HLS_FIRST_TS_FIRST_BYTE_ARRIVE))},i.prototype._onContentFirstTSFirstByteArrive=function(){var e=this,t=e._profiler.getItem(u.Metrics.HLS_FIRST_TS_FIRST_BYTE_ARRIVE);t&&null===t.endTime&&e._profiler.setEndTime(u.Metrics.HLS_FIRST_TS_FIRST_BYTE_ARRIVE)},i.prototype._onContentStarted=function(e,t){var n=this;t&&(n._playbackPosition=t);var i=n._profiler.getItem(u.Metrics.PLAYBACK_START);i&&null===i.endTime&&(n._profiler.setEndTime(u.Metrics.PLAYBACK_START),n._onAdOrContentStarted(),n._clipGuid=n._createClipGuid(n._model.playlist.getCurrentItem()),n._updatePlayerViewability(),n._sendBeacon("PLAYBACK_START",{data:i.timeDiff}),n._model.playback.requestType=null,n._model.playback.requestAction=null)},i.prototype._getContentType=function(){var e,t=this,n=t._commonFields,i=n.isLive()?"live":n.adLoaded()?"ad":"",r=n.adPosition();switch(i){case"ad":e="ad pre-roll","postroll"===r?e="ad post-roll":"midroll"===r&&(e="ad mid-roll");break;case"live":e=n.liveState()||"live";break;default:e="vod short";var o=t._model.playlist.getCurrentItem();if(!o)break;var a=n.videoLength();o.isCCM?"na"!==a&&a>600&&(e="vod long"):e="streamurl"}return e},i.prototype._onAdOrContentStarted=function(){var e=this,t={},n=e._profiler.getItem(u.Metrics.LOAD_TO_LOADED_DATA);n&&(t[u.Metrics.LOAD_TO_LOADED_DATA.type]=n.timeDiff);var i=e._profiler.getItem(u.Metrics.DRM_METADATA_IS_SET);i&&(t[u.Metrics.DRM_METADATA_IS_SET.type]=i.timeDiff);var r=e._profiler.getItem(u.Metrics.DRM_AUTH_COMPLETE);r&&(t[u.Metrics.DRM_AUTH_COMPLETE.type]=r.timeDiff);var o=e._profiler.getItem(u.Metrics.STREAM_REQUEST_TO_RENDER);o&&(t[u.Metrics.STREAM_REQUEST_TO_RENDER.type]=o.timeDiff),e._trueStreamsProgressFired=!1,e._trueStreamsAdProgressFired=!1;var a=e._profiler.getItem(u.Metrics.CLICK_TO_START);if(a&&null===a.endTime){e._profiler.setEndTime(u.Metrics.CLICK_TO_START),t[u.Metrics.CLICK_TO_START.type]=a.timeDiff;var s=a.timeDiff;e._sendBeacon("CLICK_TO_START",{data:t}),e._comscoreMetrics.addToComscoreQueue(function(){e._comscoreMetrics.updateClipAttrs({y_ucl:s?s.toString():L.INT_DEFAULT})})}var l=e._profiler.getItem(u.Metrics.INIT_TO_START);if(l&&null===l.endTime){e._profiler.setEndTime(u.Metrics.INIT_TO_START),t[u.Metrics.INIT_TO_START.type]=l.timeDiff,e._sendBeacon("INIT_TO_START",{data:t});var c=l.timeDiff;e._comscoreMetrics.addToComscoreQueue(function(){e._comscoreMetrics.updateClipAttrs({y_apl:c?c.toString():L.INT_DEFAULT})})}},i.prototype._getVideoQuartile=function(e,t){var n=this,i=n._commonFields,r=i.percentWatched(e,t);return Math.floor(r/L.QUARTILE_PROGRESS_INTERVAL)},i.prototype._onPlaybackProgress=function(e){var t=this;if(!t._seeking){var n=e-t._playbackPosition;n&&(t._totalWatchedPlaybackTime+=n),t._playbackPosition=e,t._updateWaitTime(),t._recoveredPlayback&&(t._fireProgressBeacon(null,null,!0),t._recoveredPlayback=t._commonFields.getRecoveryStatus());var i=t._model.playlist.getCurrentItem(),r=i?i.duration:0,o=t._checkProgressFrequency(e,r);o.quartileBeacon&&t._fireProgressBeacon(o.quartileBeacon,!1),o.progressBeacon&&(t._updatePlayerViewability(),o.progressBeacon===L.TRUE_STREAMS_INTERVAL&&(t._sendBeacon("PLAYBACK_STREAM_START",{fireCriteria:L.TRUE_STREAMS_INTERVAL}),t._sendBeacon("VIDEO_STREAMS"),t._buffTimeTrueStream=t._totalBufferingTime),t._fireProgressBeacon(o.progressBeacon))}},i.prototype._updateBufferingStats=function(e){var t=this;e=e||!1,t._eventBus.publish(u.BEFORE_PROGRESS_BEACON,t._segInfo),t._computeBuffTimeDiff(),(t._segInfo.useDefaultBufferDuration||e)&&(t._segInfo=[{buf_dur:t._totalBufferingTime}],t._segmentwiseBuffTime=t._totalBufferingTime,t._buffTimeDiff=0)},i.prototype._updateWaitTime=function(){var e=this;e._bufferingStart&&(e._bufferingStart=!1,e._totalBufferingTime+=Date.now()-e._bufferingStartTime)},i.prototype._checkProgressFrequency=function(e,t){var n=this,i={},r=n._progressBeaconMode.firingCriteria;n._fixedIntervalProgressBeacons&&n._totalWatchedPlaybackTime>=n._fixedIntervalProgressBeacons[0]?(n._fixedIntervalProgressBeacons[0]!==L.TRUE_STREAMS_INTERVAL||n._trueStreamsProgressFired||(r=L.TRUE_STREAMS_INTERVAL,n._trueStreamsProgressFired=!0),i.progressBeacon=r,n._fixedIntervalProgressBeacons.shift()):n._totalWatchedPlaybackTime>=n._lastProgressBeaconPosition+n._progressBeaconMode.recurring&&(i.progressBeacon=n._progressBeaconMode.firingCriteria,n._lastProgressBeaconPosition+=n._progressBeaconMode.recurring);var o=n._getVideoQuartile(e,t);return o&&o!==n._videoQuartile&&(n._videoQuartile=o,i.quartileBeacon=L.QUARTILE_PROGRESS_INTERVAL),i},i.prototype._initProgressBeaconState=function(){var e=this,t=e._model.playlist.getCurrentItem();t?t.duration:0;e._fixedIntervalProgressBeacons=[],e._quartileIntervalProgressBeacons=[],e._fixedIntervalProgressBeacons=e._progressBeaconMode.fixed.slice()},i.prototype._fireProgressBeacon=function(e,t,n){var i=this;e=e||i._progressBeaconMode.firingCriteria,t=t||!0,n=n||!1,i._updateWaitTime(),t&&i._updateBufferingStats(n),i._sendBeacon("PLAYBACK_PROGRESS",{fireCriteria:e,data:{playEventFired:i._playEventFired}}),e!==L.QUARTILE_PROGRESS_INTERVAL&&(i._progressBeaconDistance=i._totalWatchedPlaybackTime),t&&(i._totalBufferingTime=0,i._segInfo.splice(0,Math.min(L.SEG_INFO_LENGTH,i._segInfo.length)))},i.prototype._onWindowUnload=function(){var e=this;e._progressBeaconMode.playerUnload&&e._model.playbackState.isVideoPlaying()&&(e._updateBufferingStats(),e._sendBeacon("INCOMPLETE_EXIT"))},i.prototype._onAdPlaybackProgress=function(e,t){var n=this;n._commonFields;n._adPlaybackPosition=t,!n._trueStreamsAdProgressFired&&t>=L.TRUE_STREAMS_INTERVAL?(n._trueStreamsAdProgressFired=!0,n._updatePlayerViewability(),n._sendBeacon("AD_PROGRESS",{fireCriteria:L.TRUE_STREAMS_INTERVAL}),n._sendBeacon("AD_STREAMS")):t>=n._lastAdProgressBeaconPosition+L.PROGRESS_INTERVAL&&(n._lastAdProgressBeaconPosition+=L.PROGRESS_INTERVAL,n._updatePlayerViewability(),n._sendBeacon("AD_PROGRESS",{fireCriteria:L.PROGRESS_INTERVAL}))},i.prototype._onPlaybackComplete=function(){var e=this;e._updatePlayerViewability(),e._updateBufferingStats(),e._sendBeacon("PLAYBACK_COMPLETE"),e._totalBufferingTime=0,e._buffTimeTrueStream=0},i.prototype._onPlaybackPaused=function(){var e=this;e._sendBeacon("PLAYBACK_PAUSE")},i.prototype._onPlaybackStalled=function(e){var t=this;t._sendBeacon("PLAYBACK_STALLED",{data:e?e:""})},i.prototype._onPlaybackResumed=function(){var e=this;e._sendBeacon("PLAYBACK_RESUMED")},i.prototype._onCtrlPlayPause=function(e){var t=this;t._sendBeacon("CTRL_PLAYPAUSE",{data:e?e:""}),t._progressBeaconMode.playPause===!0&&"pause"===e&&t._fireProgressBeacon()},i.prototype._onRecoveryMetadata=function(){var e=this;(e._commonFields.progressBeaconDistance()>0||e._totalBufferingTime>0)&&e._fireProgressBeacon(null,null,!0)},i.prototype._onApiCalled=function(e){var t=this;t._sendBeacon("API_CALLED",{data:e})},i.prototype._onFeedbackCalled=function(e){var t=this;t._sendBeacon("FEEDBACK_INFO",{data:e})},i.prototype._onVideoAppsLoaded=function(){var e=this;e._profiler.setEndTime(u.Metrics.INIT_TO_APPS_INIT);var t=e._profiler.getItem(u.Metrics.INIT_TO_APPS_INIT);t&&e._sendBeacon("INIT_TO_APPS_INIT",{data:t.timeDiff})},i.prototype._onBitrateChange=function(e,t){var n=this;n._sendBeacon("BITRATE_CHANGE",{data:{bitrate:e,reason:t.reason,newFrameRate:t.newFrameRate,oldFrameRate:t.oldFrameRate}})},i.prototype._onPlaybackSeeking=function(e){var t=this;t._seeking||(t._seqStart=e,t._seeking=!0)},i.prototype._onPlaybackSeeked=function(e){var t=this;t._seeking=!1,t._seqNum++,t._playbackPosition=e,t._sendBeacon("PLAYBACK_SEEK"),t._seqStart=e},i.prototype._onWaiting=function(e){var t=this;if(e){if(e.ignoreBuffering===!0)return;if(e.value===!1)return t._bufferingStart=!1,void(t._totalBufferingTime+=Date.now()-t._bufferingStartTime)}t._bufferingStart=!0,t._bufferingStartTime=Date.now()},i.prototype._isCriticalError=function(e){return e.category!==I.E_INFO&&e.category!==I.E_WARNING&&e.category!==I.E_YVAP},i.prototype._onError=function(e){var t=this,n=t._commonFields.videoId(),i=t._isCriticalError(e),r=t._criticalErrorFiredMap[n];e.group=r?"E":e.group,i&&(r?t._criticalErrorFiredMap[n]++:t._criticalErrorFiredMap[n]=1),(!t._criticalErrorFiredMap[n]||t._criticalErrorFiredMap[n]<C)&&(e.category===I.E_PLAYER&&e.subcategory===I.PLAYER_CODES.E_PLAYER_HTML5_PLAYBACK_ERROR_ABORTED?setTimeout(function(){t._sendBeacon("PLAYER_ERROR",{data:e})},1e3):t._sendBeacon("PLAYER_ERROR",{data:e}))},i.prototype._onWarning=function(e){var t=this;t._sendBeacon("PLAYER_WARNING",{data:e})},i.prototype._onInfo=function(e){var t=this;t._sendBeacon("PLAYER_INFO",{data:e})},i.prototype._onAdMetrics=function(e){var t=this;e.ywa.aplc="",Object.keys(e.ywa).forEach(function(t){y.isNullOrUndefined(e.ywa[t])&&(e.ywa[t]="")}),t._sendBeacon("AD_METRICS",{data:e})},i.prototype._onAdPlaybackStarted=function(){var e=this;e._adPlaybackPosition=0,e._lastAdProgressBeaconPosition=e._adPlaybackPosition,e._onAdOrContentStarted(),e._clipGuid=e._createClipGuid(),e._updatePlayerViewability(),e._sendBeacon("AD_START")},i.prototype._onAdPlaybackComplete=function(){var e=this;e._updatePlayerViewability();var t=e._guidMap[e._model.playlist.getCurrentItem().id];t&&(e._clipGuid=t),e._sendBeacon("AD_COMPLETE")},i.prototype._onAdError=function(){var e=this;e._sendBeacon("AD_ERROR")},i.prototype._onRendererPluginLoaded=function(){var e=this;e._rendererPluginLoadStatus=1},i.prototype._onRendererPluginLoadFailed=function(){var e=this;e._rendererPluginLoadStatus=2},i.prototype._onRendererPluginLoadTimedOut=function(){var e=this;e._rendererPluginLoadStatus=3},i.prototype._computeBuffTimeDiff=function(){var e=this,t=e._totalBufferingTime;e._buffTimeTrueStream&&(t+=e._buffTimeTrueStream,e._buffTimeTrueStream=0);var n=e._segInfo.slice(0,Math.min(L.SEG_INFO_LENGTH,e._segInfo.length));e._segmentwiseBuffTime=0;for(var i=0;i<n.length;i++)e._segmentwiseBuffTime+=n[i].buf_dur;e._buffTimeDiff=e._segmentwiseBuffTime-t},r.prototype.sendBeacon=function(e,t){var n=this,i=n._model.playlist.getCurrentItem();if(i){var r=function(i){var r=n._paramGetters[i];return r?r.apply(null,[e].concat(t)):null},a=i.metrics.beacons[e]||[];a.forEach(function(e){var t=e.url;t&&(t=o(t,r),v.sendImageBeacon(t))})}};var N=function(){return _.android?{name:"android",make:"unknown",model:"android",os:"android"}:_.ipad?{name:"iPad",make:"apple",model:"ipad",os:"ios"}:_.iphone?{name:"iPhone",make:"apple",model:"iphone",os:"ios"}:_.chrome?{name:"web",make:"chrome",model:_.chrome,os:_.os}:_.firefox?{name:"web",make:"firefox",model:_.firefox,os:_.os}:_.ie?{name:"web",make:"ie",model:_.ie,os:_.os}:_.safari?{name:"web",make:"safari",model:_.safari,os:_.os}:{name:"web",make:"na",model:"na",os:_.os}}()},{"../../../lib":"bRhrlU","../../../lib/logger":"IS9j5T","../../../lib/user-agent":"ty5FFo","../error":20,"../event":"YJm+dH","../media-store":42,"../util":"jJTEqU","./comscore":46,"./comscore-metrics":45,"./media-metrie":47,"./metrics-constants":48,"./qos-metrics":50,"./sizmek-metrics":51,"./ult-metrics":52,"./vidible-metrics":53,"./ywa-metrics":54}],50:[function(e,t,n){"use strict";function i(e){var t=this,n=["env","colo","pver","pltype","vp","b","r","vid","vn","reg","site","vtyp","sn","lid","loc","apl","psid","expn","expt","expb","jsdl","drm","vs","sp","st","cdn","brr","os","cached_vs"],i={rn:e.randomVal,pver:e.playerVersion,vp:e.playerInt32Guid,b:e.hostingBucket,r:e.rendererType,vid:e.videoId,vn:e.videoTitle,reg:e.region,site:e.site,sn:e.videoShowName,lid:e.licenseId,loc:e.location,apl:e.autoplay,psid:e.pageSpaceId,expn:e.experienceName,expt:e.experienceType,expb:e.experienceBucket,vpurl:e.pageUrl,vtyp:e.contentType,dur:e.videoLength,pltype:e.playerType,jsdl:e.jsDownloadTime,br:e.bitrate,sbr:e.quality,drm:e.isDrm,vs:e.videoSession,sp:e.streamProtocol,st:e.streamType,buff:e.bufferingTime,buff_info:e.segInfo,client_width:e.clientWidth,client_height:e.clientHeight,prog:e.playbackWatchedTime,colo:e.hostingColo,env:e.hostingEnv,cdn:e.cdn,tswf_ready:e.swfLatency,tirg:e.initRenderGapLatency,titsc:e.initToSapiLatency,trtswf:e.renderToSwfLatency,trcreate:e.renderCreateLatency,tsltps:e.playToRenderLatency,cached_vs:e.cachedVs,upn:e.upNext,brr:function(){return e.deviceName()+","+e.deviceMake()},os:e.deviceOS,rsm:e.isResume};t.sendOpts={baseUrl:"//qos.video.yimg.com/yep/3/qos",target:"qos",paramGetters:i,beginningKeys:n,endKeys:["rn","vpurl"]},t.beaconMappings={AD_METRICS:{baseUrl:"//qos.video.yimg.com/yvap/4/qos",keys:function(e){return Object.keys(e.qos)},data:function(e){return e.qos}},AD_ERROR:{keys:["bId"],data:{bId:"a3"}}}}t.exports=i;e("./metrics-constants")},{"./metrics-constants":48}],51:[function(e,t,n){"use strict";function i(e){var t=this,n="https://bs.serving-sys.com/Serving/ActivityServer.bs",i=["cn","ActivityId","rnd"],r={cn:e.wrapInFn("as"),ActivityId:e.mmActivityId,rnd:e.randomVal},o={baseUrl:n,keys:[],data:{}};t.sendOpts={baseUrl:n,target:"sizmek",paramGetters:r,beginningKeys:i,iFrameBeacon:!0},t.beaconMappings={PLAYBACK_START:o}}t.exports=i,i.prototype.shouldFire=function(e){return""!==e.metrics.mmActivityId}},{}],52:[function(e,t,n){"use strict";function i(e){var t=this,n=["t","_V","s","V_sec","evt","ccode","sec","cpos","type","_ex","_NOL"],i=["vid","pstaid","prt","lms_id","vs","psz","cdn","st","sp","bit","pls","vlng","site","lang","intl","lbl","synd","pver","expn","expt","expb","loc","auto","cont","bckt","snd","test","_w","vsid","_R","pltype","cached_vs","man","class","ctv_metrics_params","smpl"],o={t:e.randomVal,s:e.pageSpaceId,vsid:e.videoSpaceId,vid:e.videoId,adid:e.adId,pstaid:e.videoId,lms_id:e.licenseId,pls:e.playerInt32Guid,psz:e.dimensions,site:e.site,lang:e.lang,intl:e.region,prt:e.rendererType,pltype:e.playerType,lbl:e.label,synd:e.syndicationId,_w:e.pageUrl,ccode:e.ccode,sec:e.sec,cpos:e.cpos,pver:e.playerVersion,expn:e.experienceName,expt:e.experienceType,expb:e.experienceBucket,loc:e.playerLocation,_R:e.pageReferrer,dur:e.playbackWatchedTime,dur_d:e.progressBeaconDistance,vlng:e.videoLength,adlng:e.adDuration,_ex:e.offNetwork,_NOL:e.offNetwork,auto:e.autoplay,cont:e.continuousPlayCount,cdn:e.cdn,ucl:e.ucLatency,apl:e.apLatency,bit:e.bitrate,view:e.viewability,sp:e.streamProtocol,st:e.streamType,bckt:e.hostingBucket,snd:e.isMute,type:e.contentType,rsm:e.isResume,test:e.experienceBucket,algo:e.algo,disp:e.displayMode,consl:e.constructLatency,trcreate:e.renderCreateLatency,tsltps:e.playToRenderLatency,tmeta_call:e.sapiLatency,tswf_ready:e.swfLatency,tcc_pref:e.ccPrefLatency,tltld:e.hlsPlaylistLatency,strml:e.streamLatency,buff_info:e.segInfo,client_width:e.clientWidth,client_height:e.clientHeight,vs:e.videoSession,cached_vs:e.cachedVs,jsdt:e.jsDownloadTime,pgltcy:e.pageLatency,buf_dur:e.segmentBuffTime,man:e.manufacturer,smpl:e.samplingId,"class":e.deviceClass,ctv_metrics_params:e.cTVMetricsParams,_V:function(){return"V"}};t.sendOpts={baseUrl:"//bats.video.yahoo.com/p",target:"ult",paramGetters:o,beginningKeys:n,endKeys:i},t.beaconMappings={VIDEO_REQUEST:{keys:["prefetch"],data:function(e){return{V_sec:"pb",evt:"v_request",prefetch:e}}},PLAYBACK_START:{keys:["ucl","apl","dur","view","rsm","disp","consl","trcreate","tmeta_call","tswf_ready","tcc_pref","tltld","strml","tsltps","tpb","pgltcy","jsdt","req_type","req_action"],data:function(t){return{V_sec:"pb",evt:"v_start",rsm:e.isResume(),tmeta_call:e.tsapic(),tpb:t,pgltcy:e.pageLatency(),jsdt:e.playerJsDownloadTime(),req_type:e.requestType(),req_action:e.requestAction()}}},PLAYBACK_PROGRESS:{keys:["dur","dur_d","view","buff_info","buf_dur","p_width","p_height","rcvr_status"],firingCriteria:[e.getProgressBeaconMode().firingCriteria],data:function(){return{V_sec:"pb",evt:"v_prog",rcvr_status:e.recoveryStatus(),p_width:e.clientWidth(),p_height:e.clientHeight()}}},PLAYBACK_STREAM_START:{keys:["view"],firingCriteria:[r.TRUE_STREAMS_INTERVAL],data:function(){return{V_sec:"pb",evt:"v_strm_view"}}},PLAYBACK_COMPLETE:{keys:["dur","dur_d","view","watchpct","stall_t","buff_info","buf_dur"],data:function(){return{V_sec:"pb",evt:"v_comp",dur:e.playbackPosition(),watchpct:e.watchPercent(),stall_t:e.bufferingTime()}}},INCOMPLETE_EXIT:{keys:["dur","dur_d","view","watchpct","stall_t","buff_info","buf_dur","rcvr_status"],data:function(){return{V_sec:"pb",evt:"v_ncomp",rcvr_status:e.recoveryStatus(),watchpct:e.watchPercent(),stall_t:e.bufferingTime()}}},PLAYBACK_RESUMED:{keys:[],data:function(){return{V_sec:"pb",evt:"p_resm"}}},PLAYBACK_STALLED:{keys:["value","play_pos","dur"],data:function(t){return{V_sec:"pb",evt:"v_stall",value:t,play_pos:e.playbackPosition()}}},BITRATE_CHANGE:{keys:["play_pos","value","value_e","dur","reason","fr","fr_old"],data:function(t){return{V_sec:"pb",evt:"v_btrt",play_pos:e.playbackPosition(),value:t.bitrate,value_e:e.bitrate(),reason:t.reason,fr:t.newFrameRate,fr_old:t.oldFrameRate}}},AD_START:{keys:["adid","adlng","ucl","apl","dur","view"],data:function(){return{V_sec:"pb",evt:"ad_start",dur:e.adPlaybackPosition()}}},AD_PROGRESS:{keys:["dur","adlng","adid","view"],firingCriteria:[r.TRUE_STREAMS_INTERVAL,r.PROGRESS_INTERVAL],data:function(){return{V_sec:"pb",evt:"ad_prog",dur:e.adPlaybackPosition()}}},AD_COMPLETE:{keys:["dur","adlng","adid","view"],data:function(){return{V_sec:"pb",evt:"ad_comp",dur:e.adPlaybackPosition()}}},UI_INTERACT:{keys:["V_slk","dur","algo"],data:function(e){return{V_sec:"ctrl",evt:"none",V_slk:e}}},CTRL_PLAYPAUSE:{keys:["value","dur","play_pos"],data:function(t){return{V_sec:"ctrl",evt:"ui_pp",value:t,play_pos:e.playbackPosition()}}},CTRL_SEEK:{keys:["value","value_e","dur"],data:function(t){return{V_sec:"ctrl",evt:"ui_seek",value:e.playbackPosition(),value_e:t}}},CTRL_VOLUME:{keys:["value","value_e","play_pos"],data:function(t){return{V_sec:"ctrl",evt:"ui_cv",value:t,value_e:e.currVolume(),play_pos:e.playbackPosition()}}},CTRL_SHARE:{keys:["value"],data:function(e){return{evt:"ui_shbtn",V_sec:"ctrl",value:e}}},CTRL_REPLAY:{keys:[],data:function(){return{evt:"ui_esrpl",V_sec:"ctrl"}}},CTRL_PLAYREQUEST:{keys:["req_type"],data:function(e){return{V_sec:"ctrl",evt:"ui_pb_req",req_type:e}}},QUALITY_SELECTED:{keys:["play_pos","value","dur"],data:function(t){return{evt:"ui_qual",V_sec:"ctrl",value:t,play_pos:e.playbackPosition()}}},CC_TOGGLE:{keys:["value","play_pos"],data:function(t){return{V_sec:"ctrl",evt:"ui_cctog",value:t,play_pos:e.playbackPosition()}}},CC_LANG:{keys:["play_pos","value"],data:function(t){return{V_sec:"ctrl",evt:"ui_cclng",play_pos:e.playbackPosition(),value:t}}},CC_STYLE:{keys:["play_pos","value"],data:function(t){return{V_sec:"ctrl",evt:"ui_ccstl",play_pos:e.playbackPosition(),value:t}}},CC_SETTINGS:{keys:["play_pos"],data:function(){return{V_sec:"ctrl",evt:"ui_ccstg",play_pos:e.playbackPosition()}}},CTRL_AGEGATE_BDAY:{keys:[],data:function(){return{V_sec:"ctrl",evt:"ui_agesm"}}},FULLSCREEN:{keys:["value","play_pos"],data:function(t){return{V_sec:"ctrl",evt:"ui_fs",value:t,play_pos:e.playbackPosition()}}},CTRL_SETTINGS:{keys:["play_pos"],data:function(){return{V_sec:"ctrl",evt:"ui_stgs",play_pos:e.playbackPosition()}}},WL_CHANGE_REQUEST:{keys:["value","play_pos"],data:function(t){return{V_sec:"ctrl",evt:"ui_wltr",play_pos:e.playbackPosition(),value:t}}},CTRL_TIMER:{keys:["value","play_pos"],data:function(t){return{V_sec:"ctrl",evt:"ui_timer",play_pos:e.playbackPosition(),value:t}}},UI_LOGIN:{keys:["value"],data:function(e){return{V_sec:"ctrl",evt:"ui_login",value:e}}},CTRL_ENDSCREEN_VID:{keys:["value","value_e"],data:function(e){return{V_sec:"ctrl",evt:"ui_esvid",value:e.vindex,value_e:e.vid}}},PLAYER_ERROR:{keys:["ecode","estring","dur","play_pos"],data:function(t){return{V_sec:"pb",evt:"error",ecode:t.rep,estring:t.debugMessage||t.message,play_pos:e.playbackPosition()}}},PLAYER_WARNING:{keys:["ecode","estring"],data:function(e){return{V_sec:"pb",evt:"warn",ecode:e.rep,estring:e.debugMessage||e.message}}},PLAYER_INFO:{keys:["ecode","estring"],data:function(e){return{V_sec:"pb",evt:"info",ecode:e.rep,estring:e.debugMessage||e.message}}},API_CALLED:{keys:["source","url","latency","http_code","resp_len","instrument","perf_info","perf_stack"],data:function(t){return{V_sec:"pb",evt:"v_api",source:t.source,url:t.url,latency:t.latency||e.tsapic(),http_code:t.http_code||"na",resp_len:t.resp_len||"na",instrument:t.instrument,perf_info:t.perfInfo,perf_stack:t.perfStack}}},FEEDBACK_INFO:{keys:["group","evtlog","fb_text","src"],data:function(e){return{V_sec:"pb",evt:"v_feedback",group:"g1",evtlog:e.eventLog,fb_text:e.feedbackText,src:e.source}},extras:[{baseUrl:t.sendOpts.baseUrl,keys:["group","history"],data:function(e){return{V_sec:"pb",evt:"v_feedback",group:"g2",history:JSON.stringify(e.opssInfo.history)}}},{baseUrl:t.sendOpts.baseUrl,keys:["group","profile"],data:function(e){return{V_sec:"pb",evt:"v_feedback",group:"g3",profile:JSON.stringify(e.opssInfo.profile)}}},{baseUrl:t.sendOpts.baseUrl,keys:["group","playbackInfo"],data:function(e){return{V_sec:"pb",evt:"v_feedback",group:"g4",playbackInfo:JSON.stringify(e.opssInfo.playbackInfo)}}},{baseUrl:t.sendOpts.baseUrl,keys:["group","model"],data:function(e){return{V_sec:"pb",evt:"v_feedback",group:"g5",model:JSON.stringify(e.model)}}}]}}}t.exports=i;var r=e("./metrics-constants")},{"./metrics-constants":48}],53:[function(e,t,n){"use strict";function i(e){var t=this,n=["pid","vid","vpt","r","cb"],i={pid:function(){return a},vid:e.videoId,vpt:e.autoplay,w:function(){var t=e.dimensions().split("x");return t[0]},h:function(){var t=e.dimensions().split("x");return t[1]},q:e.videoQuartile,r:e.pageUrl,cb:e.randomVal,nv:function(){return"1"},at:function(){return"preroll"},aen:function(){return"Yahoo"},asn:function(){return"1"},ar:function(){return"yes"},v:function(){return"54d54a0be4b0417331ae4e01"},acid:function(){return"54d54cc3e4b0417331ae4e26"},asid:function(){return"54d54cf8e4b0417331ae4e29"}},a=r(e,n,i);t.sendOpts={baseUrl:"//trk.vidible.tv/trk/",target:"vidible",paramGetters:i,beginningKeys:n},t.beaconMappings={PLAYBACK_START:{baseUrl:t.sendOpts.baseUrl+"video-play.gif",keys:["h","w"],data:{}},PLAYBACK_PROGRESS:{baseUrl:t.sendOpts.baseUrl+"video-quartile.gif",firingCriteria:[o.QUARTILE_PROGRESS_INTERVAL],keys:["q"],data:{}},AD_START:{baseUrl:t.sendOpts.baseUrl+"ad-request.gif",keys:["at","asn"],data:{},extras:[{keys:["at","aen","asid","acid","v"],data:{},baseUrl:t.sendOpts.baseUrl+"ad-engine-request.gif"},{keys:["aen","at","ar","asid","acid","v"],data:{},baseUrl:t.sendOpts.baseUrl+"ad-engine-response.gif"},{keys:["at","aen","stg","asid","acid","v"],data:{stg:"loaded"},baseUrl:t.sendOpts.baseUrl+"ad-engine-flow.gif"},{keys:["at","aen","stg","asid","acid","v"],data:{stg:"win"},baseUrl:t.sendOpts.baseUrl+"ad-engine-flow.gif"},{keys:["at","aen","asid","acid","stg","v"],
data:{stg:"started"},baseUrl:t.sendOpts.baseUrl+"ad-engine-flow.gif"}]},AD_COMPLETE:{baseUrl:t.sendOpts.baseUrl+"ad-engine-flow.gif",keys:["at","aen","asid","acid","stg","v"],data:{stg:"finished"}}}}function r(e,t,n){var i=decodeURIComponent(e.experienceType().replace(/&(amp;)+/g,"%26")),r=i.split("&"),o=r.shift();return r.forEach(function(e){var i=e.split("="),r=i[0],o=i[1];n[r]=function(){return o},-1===t.indexOf(r)&&t.push(r)}),o}t.exports=i;var o=e("./metrics-constants")},{"./metrics-constants":48}],54:[function(e,t,n){"use strict";function i(e){var t=this,n="115488662",i="ywadp"+n,a=r.getCookie(i);a||(a=""+Math.floor(4294967295*Math.random()),r.setCookie(i,a,{expires:new Date(Date.now()+94608e6)}));var s={rn:e.randomVal,vpos:e.playbackPosition,vstpos:e.seqStart,vq:e.videoSeqNum,vt:e.isLive,cf63:e.autoplay,vpl:e.location,cf15:e.continuousPlay,cf53:e.continuousPlayCount,cf62:e.dimensions,cf64:e.label,cf201:e.site,cf202:e.region,cf203:e.lang,cf204:e.contentType,cf205:e.licensorName,cf206:e.mediaMetaTags,cf208:e.licenseId,vid:e.videoId,vn:e.videoTitle,vsn:e.videoShowName,vp:e.playerInt32Guid,vpm:e.masterPlayerInt32Guid,vlng:e.videoLength,vb:e.pageTitle,vf:e.pageUrl,vss:e.eventBegin,vse:e.eventEnd,ve:e.pageReferrer,sp:e.streamProtocol,cf97:e.syndicationId,cf99:e.isMature,cf98:e.tripleplay,cf08:e.hostingEnv,cf01:e.hostingBucket,cf102:e.playerVersion,cf103:e.playerType,cf104:e.experienceType,cf105:e.experienceName,cf106:e.experienceBucket,cf09:e.experienceType,cf10:e.experienceName,".ys":e.pageSpaceId,cf52:e.videoSpaceId,cf13:e.playerType,cf71:e.experienceBucket,b:e.pageTitle,f:e.pageUrl,e:e.pageReferrer,cf87:e.providerId,cf91:e.providerVideoId,cf88:e.publisherId,cf58:e.mainArtist,cf59:e.genre,cf180:e.isResume,a:function(){return"1000"+n},dpid:function(){return a}};t.sendOpts={baseUrl:"//z.analytics.yahoo.com/fpc.pl",target:"ywa",paramGetters:s,beginningKeys:["a","dpid","vp","vpm","vid","vn","cf97","vt","cf204"],endKeys:["rn"]},t.beaconMappings={PAGE_VIEW:{keys:["a","dpid","vp","vpm","cf08","cf01",".ys","b","rn","f","e"],data:{},overrideBaseKeys:!0},VIDEO_LOADEDDATA:{keys:["vlng","vx","vb","cf63","vpl","cf201","cf202","cf203","cf64","cf205","cf206","cf208","cf15","vsn","vss","vse","cf87","cf91","cf88","cf58","cf59","cf98","cf102","cf103","cf104","cf105","cf106","cf52","vf","ve"],data:{vx:215}},VIDEO_STREAMS:{keys:["vx","cf51","cf63","vpl","vq","cf201","cf202","cf203","cf64","cf205","cf206","cf208","cf15","cf53","vsn","vss","vse","cf87","cf91","cf88","cf58","cf59","cf98","cf52"],data:function(){return{vx:1,cf51:e.errorCode()}}},PLAYBACK_START:{keys:["vpos","vstpos","vq","vbt","cf63","vpl","cf201","cf202","cf203","cf64","cf205","cf206","cf208","cf15","cf53","cf62","vsn","vss","vse","cf87","cf91","cf88","cf58","cf59","cf98","cf180","cf52","cf102","cf103","cf104","cf105","cf106"],data:function(e){return{vpos:1,vbt:e}}},PLAYBACK_PROGRESS:{keys:["vlng","vss","vse","vpos","vstpos","vq","cf102","cf103","cf104","cf105","cf106"],firingCriteria:[o.TRUE_STREAMS_INTERVAL,e.getProgressBeaconMode().firingCriteria],data:{}},AD_STREAMS:{keys:["vx","cf51","cf63","vpl","cf201","cf202","cf203","cf64","cf205","cf206","cf208","cf15","cf53","vsn","vss","vse","cf87","cf91","cf88","cf58","cf59","cf98","cf52"],data:{vx:4,cf51:e.errorCode()}},PLAYBACK_SEEK:{keys:["vpos","vstpos","vx","vq"],data:{vx:210}},PLAYBACK_COMPLETE:{keys:["vpos","vstpos","vq"],data:{}},AD_METRICS:{keys:function(e){return Object.keys(e.ywa).concat(["cf201","cf202","cf206","cf208","cf63","cf64",".ys","cf09","cf10","cf87","cf91","cf88","cf58","cf59","cf98","cf13","cf71","cf52"])},data:function(e){return e.ywa}},UI_INTERACT:{keys:["vx","cf57","cf99","cf201","cf202","cf203","cf64","cf206","vsn","cf87","cf52","cf91","cf88","cf59","vf"],data:function(e){return{vx:5,cf57:e}}}}}t.exports=i;var r=e("../util"),o=e("./metrics-constants")},{"../util":"jJTEqU","./metrics-constants":48}],55:[function(e,t,n){"use strict";function i(e){return!!e}function r(e,t){var n={defaultVal:e||!1,transform:i};return t&&(n.configName=t),n}function o(){return g.isFlashInstalled()&&b.isFunction(v)}function a(){if(!b.isFunction(_))return!1;var e=window.MediaSource;return e&&e.isTypeSupported('video/mp4; codecs="avc1.640028"')&&e.isTypeSupported('audio/mp4; codecs="mp4a.40.2"')?!0:!1}function s(){return f.mobile?!1:f.chrome&&f.chrome>=37?!0:f.ie?!0:!1}function l(e){var t=this;t.items=[],t.position=-1,t._mediaStore=e}function c(){var e=this;e.ad=null,e.state=m.INIT,e.paused=!1,e.seeking=!1,e.loading=!0,e.criticalError=null,e.previousItem=null,e.looped=!1,e.loadedItem=null,e.rendererType=null}function p(e,t){var n=this;if(n.guid=g.generateGuid(),n.mediaStore=t||new y.MediaStore,n.errors=[],e){n._config=e,n.playbackState=new c,y.fillFromConfig(S,e,n,n.errors),(e.userprefs||{}).closedcaptionprefs?n.userPreferences.closedCaptions.isAvailable=!0:n.userPreferences.closedCaptions.isAvailable=!1,n.disableCasting="boolean"==typeof e.disableCasting?e.disableCasting:!1,n.ui.chromeless&&(n.ui.showStartScreen=!1,n.ui.showControls=!1,n.ui.showEndScreen=!1,n.ui.showPauseScreen=!1,n.ui.showVideoApps=!1,n.ui.showAgeGate=!1),n.rendererTypes=[],("dash"===n.baseConfig._html5||s())&&a()&&n.rendererTypes.push("dash"),n.baseConfig._html5===!1&&o()&&!b.isFunction(A)&&n.rendererTypes.push("flash"),n.rendererTypes.push("html"),n.capabilities={},n.rendererTypes.forEach(function(e){n.capabilities[e]=u(e),n.playback.skipFormats.length>0&&(n.capabilities[e].preferredFormats=n.capabilities[e].preferredFormats.filter(function(e){return-1===n.playback.skipFormats.indexOf(e)}))}),n.errors.length&&E.warn("Errors encountered while parsing configuration!");var i=(((e.prefetch||{}).query||{}).results||{}).mediaObj;i&&n.mediaStore.fillFromSapi(i,n.rendererTypes,n.capabilities,n.errors);var r=e.prefetchIds;if(r&&b.isArray(r)){var p=r.map(function(e){return{id:e}});n.mediaStore.fillFromSapi(p,n.rendererTypes,n.capabilities,n.errors)}n.playlist=new l(n.mediaStore),e.playlist&&(n.playlist.initializeFromRaw(e.playlist,n.rendererTypes,n.capabilities,n.errors),n.errors.length&&E.warn("Errors encountered while parsing playlist!")),n.ui.showPauseScreen=!1,e.ignoreEndlist&&(n.playback.ignoreEndlist=!0)}}t.exports={Model:p,Playlist:l,_PlaybackState:c};var d=e("./yvap/ads-json"),u=e("../../lib/capability"),_=e("./renderers/html5-dash"),v=e("./renderers/flash"),y=e("./media-store"),m=e("./states"),f=e("../../lib/user-agent"),g=e("./util"),b=e("../../lib"),E=e("../../lib/logger"),h=e("./metrics/metrics-constants"),A=e("./views/tumblr-controls"),S={version:{defaultVal:"6.45.0.1446512639",validator:b.isString},playlist:{id:{defaultVal:null,validator:b.isString}},CMS:{colo:{defaultVal:null,validator:b.isString},suppressAdContext:r(),enableCache:r(f.tv?!1:!0),cachedVs:{defaultVal:null,validator:b.isString}},pageLatency:{pagePlayerJsDownloadTime:{defaultVal:null,validator:b.isNumber}},ui:{configName:null,contentTypeLabel:{defaultVal:null,validator:b.isString},chromeless:r(!1,"chromeless"),startScreenConfig:{configName:"startscreen",transform:function(e){return b.isObject(e)?e:{}},showProvider:r(!0),showDescription:r(!0,"showDesc"),showButton:r(!0),showTitle:r(!0)},showStartScreen:{configName:"startscreen",defaultVal:!0,transform:function(e){return b.isObject(e)?!0:i(e)}},showControls:r(!0),showEndScreen:r(!0,"endscreen"),showPauseScreen:r(!0,"pausescreen"),showSettingScreen:r(!0,"settingscreen"),showFullscreen:r(!0,"fullscreenBtn"),showUpNext:r(!1,"upnext"),showSnapItInAdvancedMenu:r(!1,"enabledSnapItInAdvancedMenu"),enableSnapItAPI:r(!1,"enableSnapItAPI"),enableFakeStoreMeme:r(!1,"enableFakeStoreMeme"),showVideoApps:r(!0,"videoapps"),showReplayOnlyEndScreen:r(!1,"replayonlyendscreen"),showAgeGate:{defaultVal:r(!0),validator:b.isBoolean},thumbnailDimensions:{height:{defaultVal:null,validator:b.isNumber},width:{defaultVal:null,validator:b.isNumber}},vttIndex:{defaultVal:null,validator:b.isNumber}},YVAP:{accountId:{defaultVal:null,validator:b.isString},playContext:{defaultVal:null,validator:b.isString},timeout:{defaultVal:3,transform:function(e){return parseInt(e)}},cTopic:{defaultVal:null,validator:b.isString},standaloneAd:{xml:{defaultVal:null,validator:b.isString},beacons:{defaultVal:null}},adsReady:r()},metrics:{configName:null,comscoreC4:{defaultVal:"",validator:function(e){return b.isString(e)&&""!==e}},ccode:{defaultVal:"",validator:b.isString},sec:{defaultVal:"",validator:b.isString},skipComscore:{defaultVal:!1,validator:b.isBoolean},ywaSamplingRate:{defaultVal:1,validator:b.isNumber},ultSamplingRate:{defaultVal:1,validator:b.isNumber},qosSamplingRate:{defaultVal:1,validator:b.isNumber},cpos:{defaultVal:"",validator:b.isString},progressBeaconStrategy:{configName:"progressBeaconStrategy",defaultVal:null,fixed:{configName:"fixed",defaultVal:[],validator:function(e){return b.isArray(e)&&e.every(function(e){return b.isNumber(e)})}},recurring:{configName:"recurring",defaultVal:null,validator:b.isNumber},playerUnload:r(!1),playPause:r(!1)}},playback:{configName:null,continuousPlay:r(),autoplay:r(),bitrate:{configName:null,defaultVal:0,validator:b.isNumber},targetBitrate:{defaultVal:NaN,validator:b.isNumber},disableGPU:r(!1),quality:{defaultVal:"auto",validator:b.isString},bitrates:{defaultVal:[],validator:function(e){return b.isArray(e)&&e.every(function(e){return b.isNumber(e)})}},heights:{defaultVal:[],validator:function(e){return b.isArray(e)&&e.every(function(e){return b.isNumber(e)})}},desiredBitrate:{defaultVal:900,validator:b.isNumber},loop:r(),startTime:{defaultVal:NaN,validator:b.isNumber},stopBufferingOnPause:r(!1),conviva:r(!0),preload:r(!1,"preload"),preconnect:r(!0),fullscreen:r(),abr:r(),adPlaybackOnly:r(),protocol:{configName:null,defaultVal:"",validator:b.isString},skipFormats:{defaultVal:[],validator:function(e){return b.isArray(e)&&e.every(function(e){return b.isString(e)})}},playInlineVideo:r(!0,"playinlinevideos"),isResume:r(!1),ignoreEndlist:r(!1),requestType:{configName:null,defaultVal:null,validator:function(e){return[null,h.CLICK,h.AUTOPLAY,h.API,h.CONTINUOUS].indexOf(e)>-1}},requestAction:{defaultVal:null,validator:function(e){return[null,h.CLICK,h.AUTOPLAY,h.HOVER,h.SCROLL].indexOf(e)>-1}}},playbackState:{configName:null,mute:{defaultVal:null,transform:i},volume:{defaultVal:null,validator:function(e){return b.isNumber(e)&&e>=0&&1>=e}}},uiState:{configName:null,width:{configName:null,defaultVal:null},height:{configName:null,defaultVal:null},startScreenRendered:{configName:null,defaultVal:!1}},userPreferences:{configName:"userprefs",validator:b.isObject,closedCaptions:{configName:"closedcaptionprefs",show:r(!1),lang:{defaultVal:"en-US",validator:b.isString},fontSize:{defaultVal:24,validator:b.isNumber},fontName:{defaultVal:"Arial, Helvetica, sans-serif",validator:b.isString},fontColor:{defaultVal:"#ffffff",validator:b.isString},fontOpacity:{defaultVal:1,validator:b.isNumber},fontEffect:{defaultVal:"none",validator:b.isString},bgColor:{defaultVal:"#000000",validator:b.isString},bgOpacity:{defaultVal:.75,validator:b.isNumber},ccPos:{defaultVal:"bottom",validator:b.isString},isAvailable:r(!1),hasChanged:r(!1)},isAdult:{defaultVal:null,validator:b.isBoolean},isAuthenticated:{defaultVal:r(!0),validator:b.isBoolean}},baseConfig:{configName:null,site:{defaultVal:"",validator:b.isString},siteAnalytics:{configName:"site_analytics",defaultVal:"",validator:b.isString},region:{defaultVal:"",transform:function(e){return b.isString(e)?e.toUpperCase():void 0},validator:b.isString},lang:{defaultVal:"",validator:b.isString},referrer:{defaultVal:"",validator:b.isString},jurisdiction:{defaultVal:"",validator:b.isString},_html5:{configName:"html5",defaultVal:!1,validator:function(e){return"dash"===e||b.isBoolean(e)}},experienceType:{configName:"expType",defaultVal:"",validator:b.isString},experienceName:{configName:"expName",defaultVal:"",validator:b.isString},experienceBucket:{configName:"expBucket",defaultVal:"",validator:b.isString},pageSpaceId:{defaultVal:"",validator:b.isString},syndication:{configName:"synd",defaultVal:"",validator:b.isString}},playerDimension:{configName:null,width:{configName:null,defaultVal:0},height:{configName:null,defaultVal:0}},CTV:{man:{defaultVal:"",validator:b.isString},"class":{defaultVal:"",validator:b.isString},ctvMetricsParams:{defaultVal:"",validator:b.isString}},failOver:{configName:"failover",beaconDisasterMode:{defaultVal:!1,configName:"beaconDisasterMode",validator:b.isBoolean},sapiUrl:{defaultVal:null,validator:b.isString},convivaSamplingRate:{configName:"convivaSamplingRate",vod:{defaultVal:0,validator:function(e){return b.isNumber(e)&&e>=0&&1>=e}},live:{defaultVal:.5,validator:function(e){return b.isNumber(e)&&e>=0&&1>=e}}}}};l.prototype.initializeFromRaw=function(e,t,n,i){var r=this;e&&(b.isObject(e)?e.id?r.id=e.id:r.appendFromRaw(e.mediaItems,t,n,i):y.addError("Playlist must be an object",i))},l.prototype.appendFromRaw=function(e,t,n,i){var r=this;if(e){if(!b.isArray(e))return void y.addError("mediaItems must be an array",i);for(var o=e.length,a=0;o>a;a++){var s=e[a],l=r._mediaStore.updateItemFromRaw(s,t,n,i);r.items.push(l.id)}o&&-1===r.position&&(r.position=0)}},l.prototype.getMediaItemAt=function(e){var t=this;return 0>e||e>=t.items.length?null:t._mediaStore.get(t.items[e])},l.prototype.getMediaItemById=function(e){var t=this;return e?t._mediaStore.get(e):null},l.prototype.getCurrentItem=function(){var e=this;return e.getMediaItemAt(e.position)},l.prototype.appendItem=function(e){var t=this,n=t.items.length;return t.items.push(e),n},l.prototype.getNextPosition=function(e,t,n){var i=this;if(n=n||{},n.looped=!1,n.ended=!1,-1===i.position)return-1;if(!i.items.length)return-1;if(e){var r=i.position+1;if(r<i.items.length)return r;if(t&&r===i.items.length)return n.looped=!0,0;i.playbackStopped=!0}return!e&&t?(n.looped=!0,i.position):(n.ended=!0,-1)},l.prototype.getCurrentVideoShowName=function(){var e=this,t=e.getCurrentItem();return t&&t.getShowName()},l.prototype.isCurrentVideoOriginalShow=function(){var e=this,t=e.getCurrentItem();return t&&t.isOriginalShow()===!0?!0:!1},l.prototype.isCurrentVideoSeriesEpisode=function(){var e=this,t=e.getCurrentItem();return t&&t.isSeriesEpisode()===!0?!0:!1},c.prototype.attemptingPlayback=function(){var e=this;return e.videoSet()&&!e.paused||e.state===m.WAITING},c.prototype.isVideoPlaying=function(){var e=this;return e.videoSet()&&!e.paused},c.prototype.videoSet=function(){var e=this;return e.state===m.VIDEO},c.prototype.isOnCriticalError=function(){var e=this;return e.state===m.END&&e.criticalError},c.prototype.videoLoading=function(){var e=this;return e.videoSet()&&e.loading},c.prototype.isAdPlaying=function(){var e=this;return e.videoSet()&&e.ad},c.prototype.isVpaidAdPlaying=function(){var e=this;return e.isAdPlaying()&&e.ad.type===d.ADTYPES.VPAID},p.prototype.getConfig=function(){var e=this;return e._config},p.prototype.isLocal=function(){var e=this;return e.version.indexOf("local")>-1},p.prototype.isHtmlEnforced=function(){var e=this;return e.baseConfig._html5===!0||"dash"===e.baseConfig._html5},p.prototype.destroy=function(){var e=this;e.playlist.position=-1},p.prototype.getModelSchema=function(){return S}},{"../../lib":"bRhrlU","../../lib/capability":"TL7Kjz","../../lib/logger":"IS9j5T","../../lib/user-agent":"ty5FFo","./media-store":42,"./metrics/metrics-constants":48,"./renderers/flash":58,"./renderers/html5-dash":60,"./states":65,"./util":"jJTEqU","./views/tumblr-controls":145,"./yvap/ads-json":96}],56:[function(e,t,n){"use strict";function i(e){var t=this;t._config=e,t.startTime=Date.now(),t._profileItems=[]}t.exports=i;var r=e("../../lib/user-agent"),o=e("./util"),a=e("./views/profiler.html");i.prototype.add=function(e){var t=this,n=t._findItem(e);n>-1&&t._profileItems.splice(n,1),t._profileItems.push({type:e.type,desc:e.desc,startTime:Date.now()-t.startTime,endTime:null})},i.prototype._findItem=function(e){for(var t=this,n=0;n<t._profileItems.length;n++){var i=t._profileItems[n];if(e.type===i.type)return n}return-1},i.prototype.getItem=function(e){var t=this,n=t._findItem(e);return n>-1?t._profileItems[n]:null},i.prototype.setEndTime=function(e,t){var n=this,i=n.getItem(e);i&&(i.endTime=t||Date.now()-n.startTime,i.timeDiff=i.endTime-i.startTime)},i.prototype.render=function(e){var t=this,n=t._profileItems.slice(0);n.forEach(function(e){e.startWidth=e.startTime/4,e.barWidth=e.timeDiff/4});var i=o.render(a,{config:JSON.stringify(t._config,null,2),profileItems:n});if(e){var s=document.createElement("div");s.appendChild(i),s.appendChild(e),i=s}if(r.mobile)document.write(i.innerHTML);else{var l=window.open();l&&l.document.write(i.innerHTML)}}},{"../../lib/user-agent":"ty5FFo","./util":"jJTEqU","./views/profiler.html":90}],57:[function(e,t,n){"use strict";function i(e,t){var n=this;n._eventBus=e,n._model=t,n._reset(),n._ER=null,n._cdnDownTimeout=null,n._eventBus.subscribe(o.Video.WAITING,n._onWaiting,n),n._eventBus.subscribe(o.ERROR,n._onError,n)}t.exports=i;var r=e("./error"),o=e("./event"),a=e("./media-store"),s=e("./util"),l=(e("../../lib"),e("./states"),e("../../lib/logger")),c=["400","501"],p=["7","57"],d=["700","701","710","711","720","721","722","730","731","732","740","750","760"],u=["103","500","502","503","550","403","404","504"],_={INIT_OR_PLAYING:0,BUFFERING:1,ERROR:2,API:3},v=1e4,y=1e4,m=2e3,f=1e4,g=1e4,b=2e4;i.prototype._reset=function(){var e=this;e._recoveryTimeoutVal=Math.random()*y+v,e._recoveryTimeoutIncr=m,e._stopTimer(),e._recoveryState=_.INIT_OR_PLAYING,e._ERTried=!1},i.prototype._onWaiting=function(e){var t=this,n=e&&e.value;n?t._startTimer(t._recoveryTimeoutVal):t._reset()},i.prototype._onError=function(e){var t=this;if(e&&t._shouldRecover(e)){if("400"===e.category.toString()&&"7"===e.subcategory.toString())return t._cdnDownTimeout&&(clearTimeout(t._cdnDownTimeout),t._cdnDownTimeout=null),void(t._cdnDownTimeout=setTimeout(function(){t.recover(_.ERROR)},Math.random()*f));t.recover(_.ERROR)}},i.prototype.recover=function(e){var t=this;t._recoveryState===_.INIT_OR_PLAYING&&(t._stopTimer(),t._isERConfigured()&&(t._fetchERTimeout=setTimeout(function(){t._getER()},g)),t._recoveryState=e?e:_.API,t._model.playlist.getCurrentItem().failoverCount++,t._model.playlist.getCurrentItem().recoveryStatus=a.ItemRecoveryStatus.RECOVERING,l.log("Recoverer.recover(): recoveryState is ",t._recoveryState),t._eventBus.publish(o.RECOVERY_START,t._onSapiErr.bind(t)))},i.prototype.shouldRenderErrorScreen=function(e){return e?c.indexOf(e.category.toString())<0||p.indexOf(e.subcategory.toString())<0&&d.indexOf(e.subcategory.toString())<0&&u.indexOf(e.subcategory.toString())<0:!1},i.prototype._shouldRecover=function(e){var t=this;return e?(d.indexOf(e.subcategory.toString())>=0||e.category===r.E_SAPI_STREAM)&&t._model.playlist.getCurrentItem().failoverCount>0?!1:!t.shouldRenderErrorScreen(e):!1},i.prototype._isERConfigured=function(){var e=this;return e._model.failOver&&e._model.failOver.sapiUrl},i.prototype._onSapiErr=function(e){var t=this;return t._recoveryState?(t._eventBus.publish(o.WARNING,s.createErr("P",t._model.playbackState,r.E_WARNING,r.WARNING_CODES.E_PLAYBACK_FROZEN_DETECTED,null,t._recoveryState)),void(e?t._isERConfigured()?t._getER():t._restartTimer():(t._eventBus.publish(o.RECOVERY_METADATA_READY),t._reset()))):void t._model.playlist.getCurrentItem().failoverCount--},i.prototype._getER=function(){var e=this;if(e._ER)return e._eventBus.publish(o.ER_READY,e._ER),void e._reset();if(e._ERTried)return void e._restartTimer();var t={context:e,timeout:b,responseTypeJson:!0,jsonpHandler:function(){},successHandler:function(t){e._publishERCallInfo("success "+n),e._ER=t,e._eventBus.publish(o.ER_READY,e._ER),e._reset()},failureHandler:function(t){e._publishERCallInfo("failure "+n),e._restartTimer(),l.log("Recoverer._getER(): Emergency record not available.")}},n=e._model.failOver.sapiUrl.replace(new RegExp("{uuid}"),e._model.playlist.getCurrentItem().id);s.ajax(n,t),e._ERTried=!0},i.prototype._startTimer=function(e){var t=this;t._stopTimer(),t._frozenDetectionTimeout=setTimeout(function(){t.recover(t._recoveryState?t._recoveryState:_.BUFFERING)},e),l.log("Recoverer._startTimer(): timer started with ",e)},i.prototype._stopTimer=function(){var e=this;e._fetchERTimeout&&(clearTimeout(e._fetchERTimeout),e._fetchERTimeout=null),e._frozenDetectionTimeout&&(clearTimeout(e._frozenDetectionTimeout),e._frozenDetectionTimeout=null)},i.prototype._restartTimer=function(){var e=this;e._recoveryTimeoutVal+=e._recoveryTimeoutIncr,e._recoveryTimeoutIncr*=2,e._startTimer(e._recoveryTimeoutVal),e._ERTried=!1},i.prototype._publishERCallInfo=function(e){var t=this;t._eventBus.publish(o.WARNING,s.createErr("P",t._model.playbackState,r.E_WARNING,r.WARNING_CODES.E_ER_TRY,null,e))},i.prototype.destroy=function(){var e=this;e._reset(),e._ER=null,e._cdnDownTimeout=null}},{"../../lib":"bRhrlU","../../lib/logger":"IS9j5T","./error":20,"./event":"YJm+dH","./media-store":42,"./states":65,"./util":"jJTEqU"}],58:[function(e,t,n){"use strict";function i(e){var t='<object id="'+e.id+'" class="yvp-flash-video yvp-swf-not-ready" type="application/x-shockwave-flash" data="'+e.swfUrl+'" width="100%" height="100%">';e.params.forEach(function(e){t+='<param name="'+e.name+'" value="'+e.value+'">'}),t+="</object>";var n=document.createElement("div");return n.innerHTML=t,n.children[0]}function r(e,t,n){var i=this;i._error=o,i._eventBus=e,i._model=t,i._profiler=n,i.seeking=!1,i.ended=!1,i._isSeeking=!1,i.mode=s.VIDEO,i._commandQueue=[],i._swfReady=!1,i.timedOut=!1,i._drmState=_.NO_DRM}t.exports=r;var o=e("../error.js"),a=e("../event"),s=e("./modes"),l=e("../../../lib/user-agent"),c=e("../util"),p=e("../../../lib/logger"),d=e("../states"),u="player.swf",_={NO_DRM:"no-drm",DRM_INITIAL:"drm-initial",DRM_METADATA_IS_SET:"drm-metadata-set",DRM_AUTH_COMPLETE:"drm-auth-complete"},v={validateScenarioOne:function(e){var t=e.querySelector("object");return t&&"none"===t.style.display?(p.log("flash block scenario #1 : ad/flash blocker applied style tone on flash"),l.safari?c.createErr("R","S",o.E_INFO,o.INFO_CODES.E_PLAYER_FLASH_IS_BLOCKED_SAFARI_STYLE_NONE):c.createErr("R","S",o.E_INFO,o.INFO_CODES.E_PLAYER_FLASH_IS_BLOCKED_GENERAL_STYLE_NONE)):null},validateScenarioTwo:function(e){return e.querySelector("div[bginactive]")?(p.log("flash block scenario #2 : ad/flash blocker replaced flash object with bginactive"),c.createErr("R","S",o.E_INFO,o.INFO_CODES.E_PLAYER_FLASH_IS_BLOCKED_REPLACED_BY_BGINACTIVE)):null},validateScenarioThree:function(e){return l.safari&&e.querySelector('div[aria-label~="Safari Power Saver"]')?(p.log("flash block scenario #3 : Safari pauses Flash component to power save"),c.createErr("R","S ",o.E_INFO,o.INFO_CODES.E_PLAYER_FLASH_IS_BLOCKED_POWER_SAVING)):null},validateScenarioFour:function(e){return e.querySelector('div[style~="chrome-extension"]')?(p.log("flash block scenario #4 : browser blocks flash view with blocker's screen"),c.createErr("R","S",o.E_INFO,o.INFO_CODES.E_PLAYER_FLASH_IS_BLOCKED_BLOCKERS_SCREEN)):null}};r.prototype.create=function(){var e=this,t=c.generateGuid(),n=c.getAssetUrl(e._model.isLocal(),e._model.version,u);return e._eventHandlerName="__YVPFlashHandler_"+e._model.guid,e._bindEvents(),e.node=i({id:t,swfUrl:n,params:[{name:"allowscriptaccess",value:"always"},{name:"allowFullScreen",value:"true"},{name:"wmode",value:e._determineWindowMode()},{name:"flashVars",value:"YUIBridgeCallback="+e._eventHandlerName+"&allowedDomain="+document.location.hostname}]}),e.node.pause=function(){e._swfReady?e._pause():e._commandQueue.push(["_pause"])},e._removeSWFNotReadyTimeout=setTimeout(function(){c.classList(e.node).remove("yvp-swf-not-ready")},1e3),e._swfReadyTimeout=setTimeout(function(){e.timedOut=!0,e._eventBus.publish(a.SWF_READY_TIMEOUT,e.node)},7e3),e._profiler&&(e._profiler.setEndTime(a.Metrics.RENDER_TO_SWF),e._profiler.add(a.Metrics.SWF_READY)),e.node},r.prototype.waitForReady=function(e){var t=this;if(t._swfReady)return void e();if(t.timedOut)return void e(new Error("swf timeout"));var n=!1;t._eventBus.subscribe(a.SWF_READY_TIMEOUT,function(){n||(n=!0,e(new Error("swf timeout")))}),t._eventBus.subscribe(a.SWF_READY,function(){n||(n=!0,e())})},r.prototype.isReady=function(){var e=this;return e._swfReady},r.prototype._determineWindowMode=function(){return"macintosh"===l.os&&(l.chrome||l.safari||l.firefox)?"direct":"opaque"},r.prototype._flushCommandQueue=function(){var e=this,t=e._commandQueue;e._commandQueue=[],t.forEach(function(t){var n=t[0],i=t[1];e[n].apply(e,i)})},r.prototype._removeFromCommandQueue=function(e){for(var t=this,n=0;n<t._commandQueue.length;n++){var i=t._commandQueue[0];if(i[0]===e){t._commandQueue.splice(n,1);break}}},r.prototype.setSelectedStreams=function(e){var t=this;t._eventBus.publish(a.SELECTED_STREAM_CHANGE,e)},r.prototype._bindEvents=function(){var e=this;window[e._eventHandlerName]=function(t){try{a.Video[t.type.toUpperCase()]?e._onVideoEvent(t):e._onFlashEvent(t)}catch(n){p.error("Error in flash event handler:",n.message||n,n.stack)}},e._eventBus.subscribe(a.BEFORE_PROGRESS_BEACON,e._beforeProgressBeaconSend,e),e._onVideoEvent=function(t){var n,i=t.type;if(e.mode===s.VIDEO)n=a.Video[i.toUpperCase()];else{if(e.mode!==s.AD)return;n=a.Ad[i.toUpperCase()]}switch("playing"===i&&e._profiler&&(e._profiler.setEndTime(a.Metrics.STREAM_PLAY_TO_RENDER),e._profiler.setEndTime(a.Metrics.STREAM_REQUEST_TO_RENDER),e._eventBus.publish(a.FLASH_NATIVE_PLAYING_EVENT_FIRED)),i){case"timeupdate":case"seeking":case"seeked":if("timeupdate"===i&&e._isSeeking)break;if("seeked"===i&&(e._isSeeking=!1),e._model.playbackState.isOnCriticalError()||e._model.playbackState.state===d.END)break;var r=t.buffered,o={length:1,start:function(){return r?r.start:0},end:function(){return r?r.end:0}};e._eventBus.publish(n,t.currentTime,t.duration,o);break;case"error":if(e.mode===s.VIDEO){p.log("Flash Error: critical? ",t.critical," ",t.msg,".",t.detail);var l,u=e._error;t.code===u.PLAYER_DRM_CODES.E_FLASH_DRM_CONTENT_DATA_NOT_SET_ERROR?l=c.createErr("C",e._model.playbackState,u.E_PLAYER_DRM,u.PLAYER_DRM_CODES.E_FLASH_DRM_CONTENT_DATA_NOT_SET_ERROR):t.code===u.PLAYER_DRM_CODES.E_FLASH_DRM_TIMEOUT_LOAD_VOUCHER_ERROR?l=c.createErr("S",e._model.playbackState,u.E_PLAYER_DRM,u.PLAYER_DRM_CODES.E_FLASH_DRM_TIMEOUT_LOAD_VOUCHER_ERROR):t.code===u.FLASH_CODES.E_FLASH_DRM_SYSTEM_UPDATE_ERROR?l=c.createErr("R",e._model.playbackState,u.E_PLAYER,u.FLASH_CODES.E_FLASH_DRM_SYSTEM_UPDATE_ERROR,null,t.msg+"; "+t.detail):t.code===u.FLASH_CODES.E_FLASH_DRM_CHROME_SETTING_ERROR?l=c.createErr("R",e._model.playbackState,u.E_PLAYER_DRM,u.FLASH_CODES.E_FLASH_DRM_CHROME_SETTING_ERROR):t.code>=u.FLASH_CODES.E_FLASH_DRM_LOWER_BOUND_ERROR&&t.code<=u.FLASH_CODES.E_FLASH_DRM_UPPER_BOUND_ERROR?l=c.createErr("C",e._model.playbackState,u.E_PLAYER_DRM,t.code,null,t.msg+t.detail):(0===t.code&&(t.code=u.PLAYER_CODES.E_PLAYER_PLAYBACK_ERROR),l=c.createErr("P",e._model.playbackState,u.E_PLAYER,t.code,null,t.msg+"; "+t.detail)),t.critical&&e._callFlashMethod("stopMedia"),e._eventBus.publish(a.ERROR,l)}else e._eventBus.publish(a.Ad.ERROR,e._callFlashMethod("get","error"));break;case"ended":e.ended=!0,e._eventBus.publish(n);break;case"pause":if(e.ended)break;if(e.seeking)break;e._eventBus.publish(n);break;case"loadeddata":e._profiler&&e._profiler.setEndTime(a.Metrics.LOAD_TO_LOADED_DATA),e._eventBus.publish(n);break;case"warning":/Remove Last Fragment Buffer/.test(t.msg)&&e._eventBus.publish(a.RELOAD_FRAGMENT,t.msg);break;default:e._eventBus.publish(n,t)}}},r.prototype._onFlashEvent=function(e){var t=this,n=e.type;switch(n){case"infoupdate":var i=e.mediaInfo;t._model.playback.bitrate=i.currentStreamBitrate,t._model.playback.protocol=i.deliveryProtocol,t._eventBus.publish(a.PLAYBACK_INFO,i);break;case"swfReady":p.log(n),t._swfReady=!0,t._profiler.setEndTime(a.Metrics.SWF_READY),clearTimeout(t._swfReadyTimeout),c.classList(t.node).remove("yvp-swf-not-ready"),t._setPlayerInfo(),t._flushCommandQueue(),t._eventBus.publish(a.SWF_READY,t.node);break;case"playerPluginResize":t._eventBus.publish(a.PLAYER_RESIZE,e.width,e.height);break;case"selectedStreamChange":t._eventBus.publish(a.SELECTED_STREAM_CHANGE,e.selectedStreams);break;case"selectedStreamUrlChange":t._eventBus.publish(a.SELECTED_STREAM_URL_CHANGE,null,e);break;case"jsLog":p.log("[flash log]",e.message);break;case"yvap_flash":t._eventBus.publish(a.YVAP_SWF_PROXIED_EVENT,e);break;case"drmMetadataSet":t._profiler&&(t._profiler.setEndTime(a.Metrics.DRM_METADATA_IS_SET),t._profiler.add(a.Metrics.DRM_AUTH_COMPLETE),t._drmState=_.DRM_METADATA_IS_SET);break;case"drmAuthComplete":t._profiler&&(t._profiler.setEndTime(a.Metrics.DRM_AUTH_COMPLETE),t._drmState=_.DRM_AUTH_COMPLETE);break;case"uiInteract":t.mode===s.VIDEO?t._eventBus.publish(a.Video.CLICK):t.mode===s.AD&&(p.log(t._callFlashMethod("get","currentTime")),t._eventBus.publish(a.Ad.CLICK,t._callFlashMethod("get","currentTime")));break;case"bitratechange":var r=e.bitrate,l=e.info;t._eventBus.publish(a.API.BITRATE_CHANGE,r,l),p.log("Bit rate changed to",r,"due to "+l.reason),p.log("New frame rate:",l.newFrameRate,"Old frame rate:",l.oldFrameRate);break;case"durationchange":p.log("Duration changed to ",e.duration);break;case"pluginLoadComplete":t._eventBus.publish(a.RENDERER_PLUGIN_LOADED);break;case"pluginLoadError":t._eventBus.publish(a.RENDERER_PLUGIN_LOAD_FAILED);break;case"pluginLoadTimedOut":t._eventBus.publish(a.RENDERER_PLUGIN_LOAD_TIMED_OUT);break;case"loadFirstFragment":t._eventBus.publish(a.HLS_FIRST_TS_LOAD_START);break;case"firstFragmentFirstByteFReceived":t._eventBus.publish(a.HLS_FIRST_TS_FIRST_BYTE_ARRIVE);break;case"reloadBegin":t._eventBus.publish(a.MEDIA_RELOAD_BEGIN);break;case"reloadEnd":t._eventBus.publish(a.MEDIA_RELOAD_END);break;case"mediaPlaylistLoaded":t._eventBus.publish(a.MEDIA_PLAYLIST_LOADED);break;case"mediaPlaylistUpdated":t._eventBus.publish(a.MEDIA_PLAYLIST_UPDATED,e.interval);break;case"qualityChanged":t._eventBus.publish(a.QUALITY_CHANGE);break;case"streamLoadBegin":t._profiler&&t._profiler.add(a.Metrics.STREAM_REQUEST_TO_RENDER);break;case"vttSegmentLoaded":t._eventBus.publish(a.VTT_SEGMENT_LOADED,e.vttSegmentInfo);break;case"bitrateListChanged":t._eventBus.publish(a.BITRATE_LIST_CHANGED,e.bitrates,e.heights);break;case"playbackComplete":t._model.playlist.getCurrentItem().isLive()&&t._eventBus.publish(a.WARNING,c.createErr("P",t._model.playbackState,o.E_WARNING,o.WARNING_CODES.E_LIVE_PLAYBACK_COMPLETE),!0);break;case"fragLoadRetryFailure":t._eventBus.publish(a.FRAG_LOAD_RETRY_FAILURE);break;case"liveMediaPlaylistLoadRetryFailure":t._eventBus.publish(a.LIVE_MEDIA_PLAYLIST_LOAD_RETRY_FAILURE);break;case"liveLoadingLate":t._eventBus.publish(a.LIVE_LOADING_LATE);break;case"PTSDiscontinuity":t._eventBus.publish(a.PTS_DISCONTINUITY,e.timedifference);break;case"cuepointStarted":t._eventBus.publish(a.API.CUEPOINT_STARTED),p.log("cue point started");break;case"cuepointStopped":t._eventBus.publish(a.API.CUEPOINT_STOPPED),p.log("cue point stopped");break;default:p.log("Unhandled event from .swf",e)}},r.prototype._setPlayerInfo=function(){var e=this,t=e._model,n={name:"Fireball",site:t.baseConfig.site,version:t.version,region:t.baseConfig.region,autoplay:t.playback.autoplay,spaceid:t.baseConfig.pageSpaceId,hostEnv:t.isLocal()?"l":"p",lang:t.baseConfig.lang,conviva:t.playback.conviva,bucket:c.bucketize(),browserName:e._getBrowserName(),os:l.os,expType:t.baseConfig.experienceType,expName:t.baseConfig.experienceName,convivaSamplingRate:t.failOver?t.failOver.convivaSamplingRate:null,disableGPU:t.playback.disableGPU};e._callFlashMethod("set","playerInfo",n)},r.prototype._getBrowserName=function(){var e="";return l.chrome?e="chrome":l.firefox?e="firefox":l.safari?e="safari":l.ie?e="ie":l.opera&&(e="opera"),e},r.prototype.setStreams=function(e){var t=this;return e.mode=t.mode,t._swfReady?t._setStreamsImpl(e):t._commandQueue.push(["_setStreamsImpl",[e]]),!0},r.prototype._setStreamsImpl=function(e){var t=this,n=(t._error,e.streams),i=e.mode;t.ended=!1,t._isSeeking=!1,!n||n.length<=0||(i===s.AD?t._setAdSrc(e):e.isCCM?t._setVideoSrc(e):t._setStreamUrlSrc(e));
},r.prototype._setSrc=function(e){var t=this;t._model.playback.preconnect?t._setSrcImpl(e):(t._removeFromCommandQueue("_setSrcImpl"),t._commandQueue.push(["_setSrcImpl",[e]]))},r.prototype._setSrcImpl=function(e){var t=this;t._callFlashMethod("set","src",e)},r.prototype._setAdSrc=function(e){var t=this,n=e.streams;try{t._callFlashMethod("set","src",{live:!1,rtx:!1,url:n[0].url})}catch(i){t._eventBus.publish(a.Ad.ERROR)}},r.prototype._setStreamUrlSrc=function(e){var t=this,n={live:!1,rtx:!1};if(e.streams&&e.streams.length){var i=e.streams[0];"m3u8"===i.format?(e.streams.forEach(function(e){e.url&&""!==e.url&&(e.host=e.url)}),n.streams=e.streams):n.url=i.url,n.live=i.live,i.isDrmProtected()&&(t._drmState=_.DRM_INITIAL)}t._error;t._profiler.add(a.Metrics.LOAD_TO_LOADED_DATA),t._callFlashMethod("set","src",n)},r.prototype._setVideoSrc=function(e){var t=this,n=t._error,i=e.streamProfiles&&e.streamProfiles.length>0?e.streamProfiles:e.streams;e.mode;t._profiler.add(a.Metrics.LOAD_TO_LOADED_DATA);var r=[],o=[],s=!1;if(i.forEach(function(e){if("subtitle"===e.type)return void r.push(e);e=c.extend({},e),e.format.indexOf("m3u8")>-1&&(e.format="m3u8"),e.path&&e.path.indexOf("content=hls")>-1&&(e.format="m3u8"),e.isAtlas()&&t._fixPathForFlash(e);var n=e.isStreamCompatibleForDrm("flash");return-1===n?void(s=!0):(1===n&&(t._drmState=_.DRM_INITIAL),void o.push(e))}),o.length<=0){if(s){var l=c.createErr("C",t._model.playbackState,n.E_PLAYER_DRM,n.PLAYER_DRM_CODES.E_PLAYER_DRM_UNSUPPORTED_STREAM_ERROR);t._eventBus.publish(a.ERROR,l)}}else{var p=o.filter(function(e){return!t._isProgressiveDownload(e)}),d=t._model.playlist.getCurrentItem(),u={uuid:e.uuid,showName:d?d.showName:"",title:d?d.title:"",duration:d?d.duration:0};e.startTime&&(u.startTime=e.startTime),r.length>0&&(u.subtitles=r),p.length>0?(u.streamType=p[0].getType(),u.streams=p,u.live=p[0].live,u.rtx=p[0].isRTX()):(o=o.sort(function(e,t){return t.bitrate-e.bitrate}),u.streamType=o[0].getType(),u.url=o[0].url,u.rtx=o[0].isRTX(),u.bitrate=o[0].bitrate),t._callFlashMethod("set","stopBufferingOnPause",t._model.playback.stopBufferingOnPause),t._callFlashMethod("set","preload",t._model.playback.preload),t._callFlashMethod("set","ignoreEndlist",e.ignoreEndlist),t._setSrc(u),t._model.playback.targetBitrate&&t._setQuality({preference:"config",bitrate:t._model.playback.targetBitrate})}},r.prototype._fixPathForFlash=function(e){if(e.format){var t="mp4"===e.format.toLowerCase(),n=e.path.replace(/^\/?mp4:/,"");(t||"flv"===e.format.toLowerCase())&&(n=n.replace(/^\//,"")),t&&e.isRTMP()&&(n="mp4:"+n),e.path=n}},r.prototype._isProgressiveDownload=function(e){return!e.host||/^http[s]?:\/\//.test(e.host)&&"m3u8"!==e.format&&"f4m"!==e.format},r.prototype.play=function(e){var t=this,n=t._error;if(!t.seeking||t._model.playbackState.paused)if(t._profiler&&t._profiler.add(a.Metrics.STREAM_PLAY_TO_RENDER),t._swfReady){t.seeking=!1,t.ended=!1,t._isSeeking=!1;var i=0;if(t._model.playback.preconnect||(t.mode===s.VIDEO?t._flushCommandQueue():t.mode===s.AD&&(i=1)),t._commandQueue.length>i&&t._eventBus.publish(a.ERROR,c.createErr("P",t._model.playbackState,n.E_PLAYER,n.PLAYER_CODES.E_INTERNAL_VIOLATION)),t._callFlashMethod("playMedia",e),t._profiler&&t._drmState===_.DRM_INITIAL){var r=t._profiler.getItem(a.Metrics.DRM_METADATA_IS_SET);r||t._profiler.add(a.Metrics.DRM_METADATA_IS_SET)}}else t._commandQueue.push(["play",[e]])},r.prototype._pause=function(){var e=this;e._callFlashMethod("pauseMedia")},r.prototype.seek=function(e){var t=this;if(t._swfReady)if(t._isSeeking=!0,t._callFlashMethod("get","seekable"))t._callFlashMethod("set","currentTime",e);else var n=t._eventBus.subscribe(a.Video.PLAYING,function(){t._callFlashMethod("set","currentTime",e),n.detach()});else t._commandQueue.push(["seek",[e]])},r.prototype.getCurrentTime=function(){var e=this;return e._callFlashMethod("get","currentTime")},r.prototype.getFlashVersion=function(){var e=this;return e._swfReady?e._callFlashMethod("get","flashVersion"):null},r.prototype.setVolume=function(e){var t=this;t._swfReady?t._callFlashMethod("set","volume",e):t._commandQueue.push(["setVolume",[e]])},r.prototype.setQuality=function(e){var t=this;t._setQuality({preference:e.preference,bitrate:e.stream.bitrate})},r.prototype._setQuality=function(e){var t=this;t._swfReady?t._callFlashMethod("set","quality",e):t._commandQueue.push(["_setQuality",[e]])},r.prototype._isFlashBlocked=function(e){var t=this;if(e)for(var n in v)if(v.hasOwnProperty(n)){var i=v[n].call(t,e);if(i)return t._eventBus.publish(a.INFO,i),t._DOMChangeObserver&&t._DOMChangeObserver.disconnect(),!0}return!1},r.prototype._beforeProgressBeaconSend=function(e){var t,n=this,i=document.getElementsByClassName("yvp-main"),r=!c.isPlayerInBackground()&&0!==c.getElementViewability(i[0]);if(n._swfReady&&e)for(t=n._callFlashMethod("get","segmentMetrics");t&&t.length;){var o=t.shift();o.vis||(o.vis=r),e.push(o)}},r.prototype.detectFlashBlockers=function(e){var t=this;if(!t._isFlashBlocked(e)){var n=window.MutationObserver||window.WebKitMutationObserver||window.MozMutationObserver;if(l.ie&&l.ie<11||"undefined"==typeof n)return;t._DOMChangeObserver=new n(function(n){var i={};try{n.forEach(function(n){if(p.log("DOM change has been detected."),t._isFlashBlocked(e))throw i})}catch(r){if(r!==i)throw r;t._DOMChangeObserver.disconnect()}});var i={attributes:!0,childList:!0,characterData:!0};t._DOMChangeObserver.observe(e,i)}},r.prototype._unbindEvents=function(){},r.prototype._callFlashMethod=function(e){var t=this,n=Array.prototype.slice.call(arguments,1);try{if(t._swfReady)return t.node[e].apply(t.node,n)}catch(i){t._eventBus.publish(a.WARNING,c.createErr("P",t._model.playbackState,o.E_WARNING,o.WARNING_CODES.E_FLASH_CRASHED),!0)}},r.prototype.stopMedia=function(){var e=this;e._callFlashMethod("stopMedia")},r.prototype.destroy=function(){var e=this;e._callFlashMethod("stopMedia"),delete window[e._eventHandlerName],e._unbindEvents(),clearTimeout(e._removeSWFNotReadyTimeout),clearTimeout(e._swfReadyTimeout),e.node=null}},{"../../../lib/logger":"IS9j5T","../../../lib/user-agent":"ty5FFo","../error.js":20,"../event":"YJm+dH","../states":65,"../util":"jJTEqU","./modes":62}],59:[function(e,t,n){"use strict";function i(){var e=document.createElement("div");return p.tv?e.innerHTML='<video class="yvp-html5-video" preload="meta" crossorigin="anonymous"><source/></video>':e.innerHTML='<video class="yvp-html5-video" preload></video>',e.children[0]}function r(){}t.exports=r;var o=e("../cc"),a=e("../error"),s=e("../event"),l=e("./modes"),c=e("../tap"),p=e("../../../lib/user-agent");r.prototype.create=function(e){var t=this;return t.node=e||i(),t._bindEvents(),t.node},r.prototype.detachNode=function(){var e=this;e._unbindEvents(),e.node.pause()},r.prototype.reattachNode=function(){var e=this;e._bindEvents()},r.prototype._bindEvents=function(){var e=this;e._onVideoEvent=function(t){if(!e.ended){var n,i=t.type;if(e.mode===l.VIDEO)n=s.Video[i.toUpperCase()];else{if(e.mode!==l.AD)return;n=s.Ad[i.toUpperCase()]}e._handleVideoEvent(i,n)}},s.nativeVideoEvents.forEach(function(t){e.node.addEventListener(t,e._onVideoEvent)}),p.iphone||(e._videoTap=new c(e.node),e._onVideoTap=function(){e.mode===l.VIDEO?e._eventBus.publish(s.Video.CLICK):e.mode===l.AD&&(e._eventBus.publish(s.Ad.CLICK,e.node.currentTime),e.node.pause())},e.node.addEventListener("tap",e._onVideoTap)),e._eventBus.subscribe(s.CC.FETCH_MOBILE,e._enableMobilCC,e),e._eventBus.subscribe(s.FULLSCREEN_CHANGE,function(t){e._eventBus.publish(s.PLAYER_RESIZE,e.node.clientWidth,e.node.clientHeight)},e),e._eventBus.subscribe(s.BEFORE_PROGRESS_BEACON,e._beforeProgressBeaconSend,e)},r.prototype._beforeProgressBeaconSend=function(e){e.useDefaultBufferDuration=!0},r.prototype.setSelectedStreams=function(e){var t=this;t._eventBus.publish(s.SELECTED_STREAM_CHANGE,e)},r.prototype.seek=function(e){var t=this;try{t.node.currentTime=e}catch(n){if("InvalidStateError"===n.name)var i=t._eventBus.subscribe(s.Video.LOADEDMETADATA,function(){t.node.currentTime=e,i.detach()})}},r.prototype.getCurrentTime=function(){var e=this;return e.node.currentTime},r.prototype.setVolume=function(e){var t=this;t.node&&(t.node.volume=e)},r.prototype._enableMobilCC=function(e){var t=this,n=document.createDocumentFragment();t._deleteTracks(),e.langList.forEach(function(t){var i=document.createElement("track");i.setAttribute("label",o.prototype.getLanguageForCode.call(null,t.lang)),i.setAttribute("srclang",t.lang),i.setAttribute("kind","subtitles"),i.setAttribute("type","text/vtt"),t.lang===e.selectedLang&&i.setAttribute("default",!0),i.src=t.url,i.track.mode="hidden",n.appendChild(i)}),t.node.appendChild(n)},r.prototype._deleteTracks=function(){for(var e=this,t=e.node.querySelectorAll("track"),n=0;n<t.length;n++)e.node.removeChild(t[n])},r.prototype._unbindEvents=function(){var e=this;s.nativeVideoEvents.forEach(function(t){e.node.removeEventListener(t,e._onVideoEvent)}),e._videoTap&&(e._videoTap.destroy(),e.node.removeEventListener("tap",e._onVideoTap))},r.prototype._getCodeForNodeError=function(e){if(!e instanceof window.MediaError)return a.PLAYER_CODES.E_PLAYER_HTML5_PLAYBACK_ERROR;switch(e.code){case window.MediaError.MEDIA_ERR_ABORTED:return a.PLAYER_CODES.E_PLAYER_HTML5_PLAYBACK_ERROR_ABORTED;case window.MediaError.MEDIA_ERR_NETWORK:return a.PLAYER_CODES.E_PLAYER_HTML5_PLAYBACK_ERROR_NETWORK;case window.MediaError.MEDIA_ERR_DECODE:return a.PLAYER_CODES.E_PLAYER_HTML5_PLAYBACK_ERROR_DECODE;case window.MediaError.MEDIA_ERR_SRC_NOT_SUPPORTED:return a.PLAYER_CODES.E_PLAYER_HTML5_PLAYBACK_ERROR_SRC_NOT_SUPPORTED;case window.MediaError.MEDIA_ERR_ENCRYPTED:return a.PLAYER_CODES.E_PLAYER_HTML5_PLAYBACK_ERROR_ENCRYPTED;default:return a.PLAYER_CODES.E_PLAYER_HTML5_PLAYBACK_ERROR}},r.prototype.destroy=function(){var e=this;e._unbindEvents(),e.node.pause(),e.node.src="",e.node.load(),e._CCStyleTag&&(e._CCStyleTag.parentNode.removeChild(e._CCStyleTag),e._CCStyleTag=null),e.hlsCues&&e.hlsCues.destroy(),e.node.parentNode.removeChild(e.node),e.node=null}},{"../../../lib/user-agent":"ty5FFo","../cc":"zKzgQw","../error":20,"../event":"YJm+dH","../tap":"dsc79Q","./modes":62}],60:[function(e,t,n){"use strict";function i(e,t){var n=this;n._eventBus=e,n._model=t,n.mode=l.VIDEO,n.seeking=!1,n.ended=!1,n._numVideoStreams=0}t.exports=i;var r=e("../error"),o=e("dash"),a=e("../event"),s=e("./html5-base.js"),l=e("./modes"),c=e("../util"),p=e("../../../lib"),d=e("../../../lib/logger"),u=300,_=40;c.inherits(i,s),i.prototype.create=function(){var e=this;return s.prototype.create.apply(e,arguments),e._dashPlayer=new o(e.node,{debug:c.keepConsoleLogs}),e.node},i.prototype.waitForReady=function(e){e(null)},i.prototype._handleVideoEvent=function(e,t){var n=this;switch(e){case"seeking":case"seeked":n._eventBus.publish(t,n.node.currentTime,n.node.duration,n.node.buffered);break;case"error":var i=n.node.error;if(n.mode===l.VIDEO){var o,s,d=n._dashPlayer.error||{};p.isNumber(d.code)?(o=d.code.toString(),s=c.createErr("P",n._model.playbackState,r.E_PLAYER_DASH,o,null,d.message)):(o=n._getCodeForNodeError(i),s=c.createErr("P",n._model.playbackState,r.E_PLAYER,o)),n._eventBus.publish(a.Video.ERROR,i),n._eventBus.publish(a.ERROR,s)}else n._eventBus.publish(a.Ad.ERROR,i);break;case"ended":n.ended=!0,n._eventBus.publish(t);break;case"pause":if(n.ended)break;if(n.seeking)break;n._eventBus.publish(t);break;case"timeupdate":case"loadeddata":var u=n._dashPlayer.getMetrics();n._model.playback.bitrate=u.streamInfo.nominalBitrate;var _={currentStreamBitrate:u.streamInfo.nominalBitrate,currentKbps:u.networkBandwidth,bufferLength:u.bufferOccupancy,deliveryProtocol:"dash",frameRate:0,qualityLevels:n._numVideoStreams,playbackBytesPerSecond:u.streamInfo.currentBitrate,mediaWidth:u.streamInfo.videoWidth,mediaHeight:u.streamInfo.videoHeight};n._eventBus.publish(a.PLAYBACK_INFO,_),"timeupdate"===e?n._eventBus.publish(t,n.node.currentTime,n.node.duration,n.node.buffered):n._eventBus.publish(t);break;default:n._eventBus.publish(t)}},i.prototype.setStreams=function(e){var t=this,n=e.streams;t.ended=!1,t._numVideoStreams=0;var i=0;if(t.mode===l.AD)return n.length>0?(t.node.src=n[0].url,t._numVideoStreams=1,!0):!1;for(var r=t._model.playback.preload?"auto":"none",o=[],a=n.length,s=0;a>s;s++){var c=n[s];if("mp4dash"===c.format){var p={url:c.url,mimeType:c.mimeType,bitrate:c.bitrate,indexStart:c.dashInfo.index_start,indexEnd:c.dashInfo.index_end,initialFetchEnd:c.dashInfo.init_fetch_end};"video/mp4"===c.mimeType?(p.width=c.width,p.height=c.height,c.bitrate>u&&(t._numVideoStreams++,o.push(p))):c.bitrate>_&&(i++,o.push(p))}else if("mpd"===c.format)return t._dashPlayer.setSrc({mpdUrl:c.url,preload:r}),!0}return t._numVideoStreams>0&&i>0?(d.log("Setting DASH streams:",JSON.stringify(o)),t._dashPlayer.setSrc({streams:o,preload:r}),!0):!1},i.prototype.setQuality=function(){return!1},i.prototype.getCurrentTime=function(){var e=this;return e.node.currentTime},i.prototype.stopMedia=function(){},i.prototype.play=function(e){var t=this;p.isNumber(e)&&e>0&&e<t.node.duration&&(t.node.currentTime=e),t.ended=!1,t.seeking=!1,t.node.play()}},{"../../../lib":"bRhrlU","../../../lib/logger":"IS9j5T","../error":20,"../event":"YJm+dH","../util":"jJTEqU","./html5-base.js":59,"./modes":62,dash:151}],61:[function(e,t,n){"use strict";function i(e,t,n,i){var r=this;r._eventBus=e,r._model=i,r._capabilities=t,r._profiler=n,r.mode=l.VIDEO,r.seeking=!1,r.ended=!1,r._isSwitching=!1,r._currentSrcFormat="",r._currentStream=null,r._lastUpdatedTime=0,r._retryCount=0,r._retryStreams=[],r._retryState=null,r._waitingEventTimer=null,r._lastTime=0,r._playbackStuck=!1,r._seeked=!1,r._hasPlayed=!1,r._fsEvt=!1}t.exports=i;var r=e("../bitrate-selector"),o=e("../error"),a=e("../event"),s=e("./html5-base.js"),l=e("./modes"),c=e("../stream"),p=e("../../../lib/user-agent"),d=e("../util"),u=e("../../../lib"),_=e("../../../lib/logger"),v=e("../states"),y=e("../hls-cue-tracker"),m=e("../constants"),f=10,g=2,b=[1,5],E=250;d.inherits(i,s),i.prototype.waitForReady=function(e){e(null)},i.prototype._handleVideoEvent=function(e,t){var n=this;switch("playing"===e&&n._profiler&&(n._profiler.setEndTime(a.Metrics.STREAM_PLAY_TO_RENDER),n._profiler.setEndTime(a.Metrics.STREAM_REQUEST_TO_RENDER)),e){case"timeupdate":case"seeking":case"seeked":if("timeupdate"===e){var i=n.node.currentTime;p.android&&(!n._hasPlayed&&p.chrome<33&&i>1&&2>i&&(n._model.playlist.getCurrentItem().isLive()?(n.node.pause(),n.node.play()):n.seek(0),n._hasPlayed=!0),!n._fsEvt&&p.androidVersion<=4.4&&n.node.addEventListener("webkitfullscreenchange",function(){var e=n.node.currentTime;n._fsEvt=!0,n.node.load();var t=n._eventBus.subscribe(a.Video.LOADEDMETADATA,function(){n.node.play(),n._model.playlist.getCurrentItem().isLive()||(n.node.currentTime=parseInt(e,10)),t.detach()})},!1))}"seeked"===e&&(n._seeked=!0),n._isSwitching?"seeked"===e&&n._playNewStream():n._eventBus.publish(t,n.node.currentTime,n.node.duration,n.node.buffered),n._lastUpdatedTime=n.node.currentTime;break;case"error":var r=n.node.error;if(n.mode===l.VIDEO){var s=n._getCodeForNodeError(r),c=o.E_WARNING,u=a.WARNING,v=1===n._retryStreams.length&&n._retryCount===g;v&&(c=o.E_PLAYER,u=a.ERROR);var y=d.createErr("P",n._model.playbackState,c,s,null,n.node.src);if(_.log("Video node errored out because: ",r),parseInt(y.subcategory)>=303&&parseInt(y.subcategory)<=308){n._retryCount++,v||n._eventBus.publish(u,y);var m=null;return m=n._model.playlist.getCurrentItem().isLive()?n.retryStreams(0):n.retryStreams(n._lastUpdatedTime),m?void d.getUrlStatus(m.url,function(e){401===e?y.subcategory=o.PLAYER_CODES.E_PLAYER_HTML5_PLAYBACK_ERROR_URL_NOT_AUTHORIZED:404===e&&(y.subcategory=o.PLAYER_CODES.E_PLAYER_HTML5_PLAYBACK_ERROR_URL_NOT_FOUND),y.errorType=o.E_PLAYER,n._eventBus.publish(a.ERROR,y)}):void 0}n._eventBus.publish(a.Video.ERROR,r),y.errorType=o.E_PLAYER,n._eventBus.publish(u,y)}else n._eventBus.publish(a.Ad.ERROR,r);break;case"ended":n.ended=!0,n._hasPlayed=!1,n._waitingEventTimer&&clearInterval(n._waitingEventTimer),n._playbackStuck&&n._publishWaitingEvent(!1,!1),n._eventBus.publish(t);break;case"loadeddata":if(n._isSwitching){n._seekToCurrentTime();break}n._profiler&&n._profiler.setEndTime(a.Metrics.LOAD_TO_LOADED_DATA),n._eventBus.publish(t);break;case"pause":if(n.ended||n.node.ended)break;if(n.seeking)break;if(!n.node.paused)break;n._eventBus.publish(t);break;case"play":case"playing":if(n._isSwitching){"playing"===e&&n._finishSwitching();break}n._eventBus.publish(t);break;case"waiting":break;default:n._eventBus.publish(t)}},i.prototype._checkFormat=function(e,t){return e.indexOf(t)>-1},i.prototype._areFormatsCrashy=function(e,t){var n=this;return n._checkFormat(e,"mp4")&&n._checkFormat(t,"m3u8")||n._checkFormat(e,"m3u8")&&n._checkFormat(t,"mp4")},i.prototype.setStreams=function(e){var t=this,n=e.streams,i=!1,o=null;if(t._streams=n,t._retryStreams=n,t._handleWaitingEvent(),p.safari>=6&&n.forEach(function(e){e.format.indexOf("m3u8")>-1&&(e.isPrimary||e.is_primary||!o)&&(o=e,i=!0)}),!i){var s=[];n.forEach(function(e){s.push(parseInt(e.bitrate))}),s=s.sort(),t._bitrateSelector=new r(t.node,s);var l=t._model.playback.targetBitrate?t._model.playback.targetBitrate:t._bitrateSelector.getTargetBitrate();o=t._getBestStream(l)}return o?(t._setSrc(o,e.startTime),i||(t._updateStreamBitrateInfo(o),e.abr&&s.length>1&&(t._eventBus.subscribe(a.Video.TIMEUPDATE,t._onPlaybackProgress,t),t._lastABRCheckTime=0)),!0):!1},i.prototype.setQuality=function(e){var t=this;t._switchSrc(e.stream.url),t._updateStreamBitrateInfo(e.stream)},i.prototype.retryStreams=function(e){var t=this,n=t._currentStream;if(t._retryCount<=g)setTimeout(function(){t._retryStream(n,e)},1e3*b[t._retryCount-1]);else{t._retryCount=0;var i=t._retryStreams.indexOf(n);if(t._retryStreams.splice(i,1),0===t._retryStreams.length)return n;var r=c.findStreamByProperty(t._retryStreams,c.BITRATE,t._bitrateSelector.getTargetBitrate(),t._capabilities);t._retryStream(r,e)}return null},i.prototype._getFirstPrimaryStream=function(){var e=this,t=null;if(e._streams)for(var n=0;n<e._streams.length;n++)if(e._streams[n].isPrimary){t=e._streams[n];break}return t},i.prototype._getBestStream=function(e){var t=this,n=t._getFirstPrimaryStream();return n||(n=c.findStreamByProperty(t._streams,"bitrate",e,t._capabilities)),!n&&t._streams&&t._streams.length>0&&(n=t._streams[0]),n},i.prototype._onPlaybackProgress=function(e){var t=this;if(e-t._lastABRCheckTime>f){t._lastABRCheckTime=e;var n=t._getBestStream(t._bitrateSelector.getRecommendedBitrate());n&&(t._switchSrc(n.url),t._updateStreamBitrateInfo(n))}},i.prototype._updateStreamBitrateInfo=function(e){var t=this;t._bitrateSelector.currentBitrate=e.bitrate,t._eventBus.publish(a.PLAYBACK_INFO,{currentStreamBitrate:e.bitrate,qualityLevels:t._streams.length}),_.log("Set stream with bitrate: ",e.bitrate)},i.prototype._setSrc=function(e,t,n){var i=this;if(i.ended=!1,i._hasPlayed=!1,i.node.src!==e.url||n){if(p.iphone&&i.node.hasOwnProperty("webkitDisplayingFullscreen")&&!i.node.webkitDisplayingFullscreen&&i._areFormatsCrashy(e.format,i._currentSrcFormat)){var r=i.node.parentNode;i.destroy(),r.appendChild(i.create())}if(p.android&&e.live&&(p.chrome&&p.chrome<30||!d.isAndroidVersionAbove4())){var s=d.createErr("R",i._model.playbackState,o.E_INFO,o.INFO_CODES.E_PLAYER_ANDROID_CHROME_REQUIRED);return void i._eventBus.publish(a.INFO,s)}if(i._deleteTracks(),p.mobile&&e.drmType&&("adobe"===e.drmType||"apple"===e.drmType)&&(e.url=e.url+"&dv=0"),c.isHlsLive(e)&&(i.hlsCues=new y(i._eventBus),i.hlsCues.initCueTracking(e.url)),i._profiler&&i._profiler.add(a.Metrics.STREAM_REQUEST_TO_RENDER),i.node.src=e.url,t)var u=i._eventBus.subscribe(a.Video.LOADEDMETADATA,function(){i.node.currentTime=t,u.detach()});i._firstPlay=!0,i._currentSrcFormat=e.format,i._currentStream=e,i._profiler&&i.mode===l.VIDEO&&i._profiler.add(a.Metrics.LOAD_TO_LOADED_DATA),p.mobile||(i.node.load(),i._model.playbackState.state===v.VIDEO&&i.play())}},i.prototype._calculateCanvasPosition=function(){var e=this,t=e.node.videoWidth,n=e.node.videoHeight,i=t/n,r=e.node.clientWidth,o=e.node.clientHeight,a=r/o,s=0,l=0;a>i?(l=o.toFixed(2),s=(i*o).toFixed(2)):(s=r.toFixed(2),l=(r/i).toFixed(2));var c=Math.max((r-s)/2,0),p=Math.max((o-l)/2,0);return{width:s,height:l,left:c,top:p}},i.prototype._seekToCurrentTime=function(){var e=this;e.seek(e._currentTime)},i.prototype._playNewStream=function(){var e=this;e.node.play(),e._canvas.parentNode.removeChild(e._canvas)},i.prototype._finishSwitching=function(){var e=this;e._eventBus.publish(a.Video.SWITCHED),e._isSwitching=!1},i.prototype._switchSrc=function(e){var t=this,n=t.node.clientWidth,i=t.node.clientHeight;if(t.node.src===e)return t._eventBus.publish(a.Video.SWITCHING),void t._eventBus.publish(a.Video.SWITCHED);t._isSwitching=!0,t.node.pause(),t._currentTime=t.node.currentTime;var r=document.createElement("canvas");t._canvas=r,r.className="yvp-switching-canvas",r.width=n,r.height=i;var o=t._calculateCanvasPosition();r.style.cssText="width:"+o.width+"px;height:"+o.height+"px;left:"+o.left+"px;top:"+o.top+"px",t.node.parentNode.appendChild(r),r.getContext("2d").drawImage(t.node,0,0,n,i),t._eventBus.publish(a.Video.SWITCHING),t.node.src=e},i.prototype._retryStream=function(e,t){var n=this;n._setSrc(e,t,!0),n._updateStreamBitrateInfo(e)},i.prototype.play=function(e){var t=this;if(t.ended=!1,t._firstPlay){if(p.ios){var n=t.node.src;t.node.src="",t.node.load(),t.node.src=n}p.mobile&&t.node.load()}else{var i=isNaN(t.node.duration)?t._model.playlist.getCurrentItem().duration:t.node.duration;u.isNumber(e)&&e>0&&i>e&&(t.node.currentTime=e)}t._firstPlay=!1,t.seeking=!1,t._profiler&&t._profiler.add(a.Metrics.STREAM_PLAY_TO_RENDER),t.node.play()},i.prototype._handleWaitingEvent=function(){var e=this;e._waitingEventTimer&&(clearInterval(e._waitingEventTimer),e._waitingEventTimer=null),e._waitingEventTimer=setInterval(function(){if(!e||!e.node)return void clearInterval(e._waitingEventTimer);var t=e.node.currentTime,n=!1;if(p.safari>=6){var i=0;e.node.buffered&&e.node.buffered.length>0&&(i=e.node.buffered.end(e.node.buffered.length-1)),n=e.node.readyState!==m.VIDEO_TAG_READY_STATES.HAVE_ENOUGH_DATA||i>0&&t>i}if(e.node.seeking)t!==e._lastTime&&e._publishWaitingEvent(!0,!0);else if(t!==e._lastTime&&!n||e.node.paused||0===t){if(t>e._lastTime&&!n){var r=e.seeked||!e._playbackStuck;e._publishWaitingEvent(!1,r),e._seeked=!1}}else e._playbackStuck?e._publishWaitingEvent(!0,!0):e._publishWaitingEvent(!0,!1);e._lastTime=t},E)},i.prototype.getCurrentTime=function(){var e=this;return e.node.currentTime},i.prototype.stopMedia=function(){},i.prototype._publishWaitingEvent=function(e,t){var n=this;n._eventBus.publish(a.Video.WAITING,{type:"waiting",value:e,ignoreBuffering:t}),n._playbackStuck=e}},{"../../../lib":"bRhrlU","../../../lib/logger":"IS9j5T","../../../lib/user-agent":"ty5FFo","../bitrate-selector":13,"../constants":17,"../error":20,"../event":"YJm+dH","../hls-cue-tracker":40,"../states":65,"../stream":"Af6MnA","../util":"jJTEqU","./html5-base.js":59,"./modes":62}],62:[function(e,t,n){t.exports={VIDEO:"video",AD:"ad",VPAID:"vpaid"}},{}],63:[function(e,t,n){"use strict";function i(e,t){var n=this;n._model=e,n._profiler=t}t.exports=i;var r=e("./util"),o=e("./event"),a="//video.media.yql.yahoo.com/v1/video/user/watchhistory/set?wh=";i.prototype._jsonp=function(e,t,n,i){var o=this;n=n||null,i&&o._profiler.add(i);var a={jsonpHandler:function(r,a){r=r||a.error,i&&o._profiler.setEndTime(i),r?t.call(n,r,null,e):t.call(n,null,a)}};r.jsonp(e,a)},i.prototype.saveToWatchHistory=function(e,t,n){var i=this,r={uuid:e},s=a+encodeURIComponent(JSON.stringify(r));i._jsonp(s,t,n,o.Metrics.SET_WATCH_HISTORY)}},{"./event":"YJm+dH","./util":"jJTEqU"}],64:[function(e,t,n){"use strict";function i(e,t,n){var i=this;i._model=e,i.guid=e?e.guid:"",i._outstandingRequests=[],i._eventBus=t,i._profiler=n,i._xhrErrorCodes={0:{timeout:a.PLAYER_CODES.E_PLAYER_CMS_XHR_REQUEST_SERVER_CONNECTION_FAILED_TIMEOUT,"default":a.PLAYER_CODES.E_PLAYER_CMS_XHR_REQUEST_SERVER_CONNECTION_FAILED},1:{timeout:a.PLAYER_CODES.E_PLAYER_CMS_XHR_REQUEST_RESPONSE_NOT_RECEIVED_TIMEOUT,"default":a.PLAYER_CODES.E_PLAYER_CMS_XHR_REQUEST_RESPONSE_NOT_RECEIVED},2:{408:a.PLAYER_CODES.E_PLAYER_CMS_XHR_REQUEST_LOAD_FAILED_408,timeout:a.PLAYER_CODES.E_PLAYER_CMS_XHR_REQUEST_LOAD_FAILED_TIMEOUT,"default":a.PLAYER_CODES.E_PLAYER_CMS_XHR_REQUEST_LOAD_FAILED},3:{408:a.PLAYER_CODES.E_PLAYER_CMS_XHR_REQUEST_NOT_COMPLETE_408,timeout:a.PLAYER_CODES.E_PLAYER_CMS_XHR_REQUEST_NOT_COMPLETE_TIMEOUT,"default":a.PLAYER_CODES.E_PLAYER_CMS_XHR_REQUEST_NOT_COMPLETE},"default":{timeout:a.PLAYER_CODES.E_PLAYER_CMS_XHR_REQUEST_TIMEOUT,cors:a.PLAYER_CODES.E_PLAYER_CMS_XHR_REQUEST_CORS_ERROR,"default":a.PLAYER_CODES.E_PLAYER_CMS_XHR_REQUEST_ERROR}},o.preconnect("preConnector","//"+o.getHostname(p))}t.exports=i;var r=e("../../lib/user-agent"),o=e("./util"),a=e("./error"),s=e("./event"),l=e("../../lib"),c=(e("../../lib/logger"),e("./media-store")),p="//video-api.yql.yahoo.com/v1/video/sapi",d="//video.media.yql.yahoo.com/v1/video/user/prefs/get",u="//video.media.yql.yahoo.com/v1/video/user/ccprefs/set",_=2,v=6e4;i.prototype._buildClipParams=function(e,t){var n=this,i=[],a=[];e.rt.forEach(function(e){var n=t[e];i=i.concat(n.acceptedProtocols),a=a.concat(n.preferredFormats)}),i=o.uniquifyArray(i),a=o.uniquifyArray(a);var s=e.rt.indexOf("flash")>=0?"flash":"html",l={protocol:i.join(","),format:a.join(","),srid:Math.floor(4294967295*Math.random()),rt:s,devtype:r.tv?"tv-widget":r.mobile?"smartphone":"desktop",offnetwork:o.isOffNetwork(),region:e.region,site:e.site,expb:e.expb,expn:e.expn,lang:e.lang,width:e.width,height:e.height,resize:!0,ps:e.ps,acctid:e.acctid,synd:e.synd,pspid:e.pspid,plidl:e.plidl,topic:e.topic,pver:n._model.version,"try":n._model.playlist.getCurrentItem().tryCount,failover_count:n._model.playlist.getCurrentItem().failoverCount};r.tv&&(l.dv=0,l.devtype="tv-widget",l.man=n._model.CTV.man,l["class"]=n._model.CTV["class"]),"flash"===s&&(l.hlspre="true");var c=n._model.getModelSchema();for(var p in n._model.CMS)p in c.CMS||(l[p]=n._model.CMS[p]);return l},i.prototype.loadClips=function(e,t,n,i){var r=this,l=r._buildClipParams(e,t);if(""===l.format)r._eventBus.publish(s.INFO,o.createErr("P",r._model.playbackState,a.E_INFO,a.INFO_CODES.E_PLAYER_NO_COMPATIBLE_FORMAT));else{var p=r._model.playlist.getCurrentItem().recoveryStatus===c.ItemRecoveryStatus.RECOVERING||r._model.failOver&&r._model.failOver.sapiUrl?0:null;r._makeSapiYqlpRequest(e.uuids,"/streams",l,n,p,i)}},i.prototype.loadRelated=function(e,t){var n=this,i={start:e.start||"0",count:e.count||"15",devtype:r.mobile||r.tv?"smartphone":"desktop",offnetwork:o.isOffNetwork(),site:e.site,region:e.region,lang:e.lang,width:e.width,height:e.height,resize:!0};n._makeSapiYqlpRequest(e.uuid,"/related",i,t)},i.prototype.loadPlaylist=function(e,t,n){var i=this,r=i._buildClipParams(e,t);i._makeSapiYqlpRequest(e.uuid,"/playlist",r,n)},i.prototype.cancelAll=function(){var e=this;e._outstandingRequests.forEach(function(e){e()}),e._outstandingRequests=[]},i.prototype._makeSapiYqlpRequest=function(e,t,n,i,r,a){var s=this,l=p;l+=t,l+="/"===l[l.length-1]?"":"/",n.env&&"prod"!==n.env&&(l="beta"===n.env?l.replace(/video-api/i,"video.beta.media"):l.replace(/video-api\.yql/i,"video-yql.rc-staging.media")),l+=e+"?"+o.querystring(n),s._makeSAPIRequest(l,i,r,a)},i.prototype._generateConfig=function(e,t,n){var i=this;return{context:i,timeout:2e4,responseTypeJson:!0,withCookie:!0,jsonpHandler:e,successHandler:t,failureHandler:n}},i.prototype._makeSAPIRequest=function(e,t,n,i){var r=this,y=r.getSapiRequestCacheKeyFromUrl(e);l.isNullOrUndefined(n)&&(n=_);var m=e+"&try="+(_-n+1),f=e.indexOf(p+"/streams")>-1;l.isNullOrUndefined(i)&&(i=!1);var g=function(e){var t=o.createErr("S",r._model.playbackState,a.E_WARNING,e.code,e.msg,e.debugMsg,e.prefetch);r._eventBus.publish(s.WARNING,t)},b=function(e){if(r._profiler&&f){var t=r._profiler.getItem(s.Metrics.SAPI_REQUEST);if(t&&!t.endTime){var n=e?t.startTime:null;r._profiler.setEndTime(s.Metrics.SAPI_REQUEST,n)}}},E=function(s,l,c){if(s=s||l.error,r._outstandingRequests.splice(r._outstandingRequests.indexOf(I),1),r._publishApiCallInfo(e,l,c),s)if(r._model.playlist.getCurrentItem().tryCount++,o.replaceStrParam(e,"try",r._model.playlist.getCurrentItem().tryCount),0===n)b(!0),t(s,null,e);else{var p=a.PLAYER_CODES.E_PLAYER_CMS_JSONP_REQUEST_FAILURE;s.message===o.JSONP_TIMED_OUT&&(p=a.PLAYER_CODES.E_PLAYER_CMS_JSONP_REQUEST_TIMEOUT),g({code:p,msg:null,debugMsg:e+" timeout: "+Date.now(),prefetch:i}),r._makeSAPIRequest(e,t,n-1,i)}else b(!1),t(null,l)},h=function(n,i,a){if(r._outstandingRequests.splice(r._outstandingRequests.indexOf(I),1),b(!1),t(null,n),i!==!0&&(r._publishApiCallInfo(m,n,a),y&&r._model.playlist.getCurrentItem()&&r._model.playlist.getCurrentItem().isLive())){var s={val:JSON.stringify(n),expiration:(new Date).getTime()+v,cachedVs:c.getSapiVsId(e)};0===r._model.playlist.getCurrentItem().failoverCount&&o.localStorage.put(y,s)}},A=function(a,s,c,p,d){var u=s,_=c;r._outstandingRequests.splice(r._outstandingRequests.indexOf(I),1),r._model.playlist.getCurrentItem()&&r._model.playlist.getCurrentItem().tryCount++,s=l.isNullOrUndefined(s)||l.isNullOrUndefined(r._xhrErrorCodes[s])?"default":s,a.message===o.XHR_TIMEOUT?c="timeout":l.isNullOrUndefined(r._xhrErrorCodes[s][c])&&(c="default");var v=r._xhrErrorCodes[s][c];if(r._publishApiCallInfo(m,null,d),0===n){b(!0);var y=o.createErr("S",r._model.playbackState,a,v,null,"state: "+u+"; status: "+_+"; timeDiff: "+p);t(y,null,e)}else g({code:v,msg:null,debugMsg:e+"; state: "+u+"; status: "+_,prefetch:i}),o.replaceStrParam(e,"try",r._model.playlist.getCurrentItem()&&r._model.playlist.getCurrentItem().tryCount),r._makeSAPIRequest(e,t,n-1,i)};if(y){o.localStorage.getAllKeys().forEach(function(e){/sapi\/streams/.test(e)&&o.localStorage.get(e).expiration<(new Date).getTime()&&o.localStorage.remove(e)});var S=o.localStorage.get(y);if(S){var T=JSON.parse(S.val);return r._model.CMS.cachedVs=S.cachedVs,void h(T,!0)}}f&&!i&&r._profiler&&!r._profiler.getItem(s.Metrics.SAPI_REQUEST)&&r._profiler.add(s.Metrics.SAPI_REQUEST);var L=r._generateConfig(E,h,A);f&&(L.collectPerfData=!0);var I,M=e.indexOf(d)>-1||e.indexOf(u)>-1;I=M?o.jsonp(e,L):o.ajax(e,L),r._outstandingRequests.push(I)},i.prototype._publishApiCallInfo=function(e,t,n){var i=this;if(n){if(n.url=e,n.instrument=t&&t.query&&t.query.results&&t.query.results.instrument?JSON.stringify(t.query.results.instrument):"none",n.perfInfo="na",n.perfStack="na",n.source="player",n.resourceTiming){var r={};if(["connectEnd","connectStart","domainLookupEnd","domainLookupStart","duration","fetchStart","redirectEnd","redirectStart","requestStart","responseEnd","responseStart","startTime"].forEach(function(e){r[e]=n.resourceTiming[e].toFixed(2)}),n.perfInfo=JSON.stringify(r),n.perfStack=[],n.resourceTimingEntries&&n.resourceTiming.requestStart-n.resourceTiming.connectStart>500)for(var o=0;o<n.resourceTimingEntries.length;o++)n.resourceTimingEntries[o].startTime<n.resourceTiming.startTime&&n.perfStack.push({url:n.resourceTimingEntries[o].name,st:n.resourceTimingEntries[o].startTime.toFixed(2),du:(n.resourceTimingEntries[o].responseEnd-n.resourceTimingEntries[o].startTime).toFixed(2)});n.perfStack=0===n.perfStack.length?"na":JSON.stringify(n.perfStack)}i._eventBus.publish(s.API_CALLED,n)}},i.prototype.updateUserPreferences=function(e,t){var n=this;n._makeSAPIRequest(u+"?userccp="+encodeURIComponent(JSON.stringify(t)),e)},i.prototype.getUserPreferences=function(e){var t=this;t._makeSAPIRequest(d,e)},i.prototype.getSapiRequestCacheKeyFromUrl=function(e){var t=this,n=e.split(/\/sapi\/streams\//),i=null;return t._model.CMS.enableCache&&n.length>1&&(i=n[1].replace(/&ps=(.*?)&/g,"&"),i=i.replace(/&try=(.*?)&/g,"&"),i="sapi/streams/"+i.replace(/&srid=(.*?)&/g,"&")),i}},{"../../lib":"bRhrlU","../../lib/logger":"IS9j5T","../../lib/user-agent":"ty5FFo","./error":20,"./event":"YJm+dH","./media-store":42,"./util":"jJTEqU"
}],65:[function(e,t,n){t.exports={INIT:"init",WAITING:"waiting",VIDEO:"video",END:"end"}},{}],Af6MnA:[function(e,t,n){"use strict";function i(e,t){return t.some(function(t){return e===t})}function r(e,t){var n=!1;return t.forEach(function(t){e.indexOf(t)>-1&&(n=!0)}),n}var o=function(e,t,n){var i=null;return e&&e.forEach(function(e){i?e[n]<=t&&(i=e):i=e}),i};n.findAcceptedStreams=function(e,t){return e.filter(function(e){return i(e.format,t.acceptedFormats)&&r(e._getProtocol(),t.acceptedProtocols)})},n.findStreamByProperty=function(e,t,i,r){return e=n.findAcceptedStreams(e,r).sort(function(e,n){return e[t]-n[t]}),"resolution"===t&&(t="height"),o(e,i,t)},n.isHlsLive=function(e){return e.url.match(/\.m3u8/)&&e.live||!1},n.BITRATE="bitrate",n.RESOLUTION="resolution"},{}],"./nextgen/src/stream.js":[function(e,t,n){t.exports=e("Af6MnA")},{}],"./nextgen/src/strings.js":[function(e,t,n){t.exports=e("XwKsC9")},{}],XwKsC9:[function(e,t,n){"use strict";n.i18n={ON:"On",OFF:"Off",MENU:"Menu",ELAPSED_TIME:"elapsed time",REMAINING_TIME:"remaining time",NUM_SECONDS:"{num-seconds} seconds",NUM_SECOND:"{num-seconds} second",OPTIONS:"Options",LINK:"Link",EMBED:"Embed",SHARE:"Share",SHARING:"Sharing",SHARING_UNAVAILABLE_MESSAGE:"Sharing is not available for this video.",TIMESTAMP:"Starts at",NOW_WATCHING:"Now Watching",ADVERTISEMENT:"Advertisement",LIVE:"Live",FEEDBACK:"Feedback",PLAY_VIDEO:"Play Video",REPLAY:"Replay",BACK:"Back",FEEDBACK_BUTTON:"Report issue",FEEDBACK_SUBMIT_BUTTON:"Submit",FEEDBACK_TITLE:"Report Yahoo Videoplayer Issue",FEEDBACK_SUBTITLE_RESPONSE_MESSAGE:"Thank you for your report.",FEEDBACK_SUBTITLE_RESPONSE_ID:"Report id: ",FEEDBACK_DISCLAIMER:"* By submitting this report, you agree to allow Yahoo! to collect video playback data from your current session to help us deliver a great experience to all users. Thanks for your help!",CONTENT_RESTRICTED:"Content Restricted",AGE_GATE_DESC:"This content is intended for mature audiences. Viewer discretion advised.",SIGN_IN_TO_VIEW_ACTION:"Sign-in to view",CONTINUE_ACTION:"Continue",AGE_GATE_BDAY_DESC:"This content is intended for mature audiences. Please enter your date of birth below to continue.",SUBMIT_ACTION:"Submit",AGE_GATE_NOT_ALLOWED_DESC:"Sorry. This content is intended for mature audiences.",MATURE:"Mature",SETTINGS:"Settings",PREFERENCES:"Preferences",VIDEO_QUALITY:"Video Quality",QUALITY:"QUALITY",AUTO:"Auto",LOW:"Low",MEDIUM:"Medium",HIGH:"High (HD)",QUALITY_INDICATOR:"Quality Indicator",AUTOPLAY:"Autoplay",AUTOPLAY_DESCRIPTION:"When applicable, the video will automatically start playing as soon as it can do so without stopping.",HTML5_PREFERENCE:"HTML5 Preference",PREFERENCE_DESCRIPTION:"Where possible, the HTML5 player is used by default instead of Flash player.",SIGN_IN:"Sign In",LOGIN_MESSAGE:"Please sign in to use this feature.",EMBED_NOT_ALLOWED:"This video cannot be embedded due to provider license restrictions.",TOP:"Top",BOTTOM:"Bottom",CC_PREVIEW:"Bottom",CC_PREVIEW_MESSAGE:"Captions will look like this",FONT:"font",BACKGROUND:"background",EFFECTS:"effects",NONE:"none",DROPSHADOW:"dropshadow",RAISED:"raised",DEPRESSED:"depressed",UNIFORM:"uniform",NO_ITEM_AVAILABLE:"No item available",SEE_MORE:"See More",EXAMPLE:"Example",CC:"Closed Captions",CAPTION:"Caption",EXPIRED_VIDEO:"[Expired Video]",LANGUAGE:"Language",SIZE:"Size",STYLE:"Style",REMOVE:"Remove",POSITION:"Position",WATCH_LATER:"Watch Later",LOGIN_BUTTON_LABEL:"Sign in to Yahoo",LOADING:"Loading your saved videos ...",NO_WATCH_LATER:"There are no videos in your Watch Later list. You can add one by clicking the clock in lower right corner of the video.",WATCH_LATER_ADDED:"Added to Watch Later",WATCH_LATER_REMOVED:"Removed from Watch Later",WATCH_LATER_JUST_ADDED:"Just Added",WATCH_LATER_ERROR_MESSAGE:"Sorry! We are unable to fetch your watch later videos. Please reload the page to try again.",ICON:"Icon",SOCIAL:"Social",MY_STUFF:"My Stuff",SNAP_IT:"Snap It",ERROR_CODE:"Error Code",SHORTCUTS:"Shortcuts",ESC:"Esc",CLOSE_SETTINGS:"Close Settings",SPACE:"Space",PLAY_PAUSE:"Play/Pause",FULLSCREEN:"Fullscreen",UP_ARROW:"Up Arrow",DOWN_ARROW:"Down Arrow",INCREASE_VOLUME:"Increase Volume",DECREASE_VOLUME:"Decrease Volume",MSG_BROWSER_REFRESH:"<a class='yvp-browser-refresh' href='javascript:window.location.reload();'>Refresh Browser</a>",MSG_FLASH_DOWNLOAD:"<a class='yvp-error-flash-download-wrapper' href='http://get.adobe.com/flashplayer/'><div>Download the free Flash Player Now! </div><img class='yvp-error-flash-download-icon'></a>",ERR_FLASH_DRM_SYSTEM_UPDATE_FAILURE:"This old browser version is not supported, please upgrade.",ERR_ANDROID_LIVE_CHROME_REQUIRED:'This video requires at least Android 4.0 or above and the latest version of the Chrome browser.<br>You can install the latest version of Google Chrome for Android from the Google Play store: <br> <a href="https://play.google.com/store/apps/details?id=com.android.chrome">https://play.google.com/store/apps/details?id=com.android.chrome</a>',ERR_LIVE_PLAYBACK_COMPLETE:"Live event has ended.",ERR_FLASH_CRASHED:"Oops! The flash plugin has just crashed. Please refresh the page to continue watching.",ERR_CDN_ERROR_CONNECTIVITY:"Hmm. We are unable to connect to the content delivery network (CDN) that delivers the video stream.",ERR_CDN_ERROR_UNAVAILABLE:"Sorry! We are unable to provide this video to you. We did not find it on the content delivery network (CDN).",ERR_DEVICE:"Sorry! The content provider has not given us the rights to play this video on this device.",ERR_DRM_BAD_LICENSE_FILE:"Sorry! The cached video license file must be reset to watch this video. Reference <a href='http://www.macromedia.com/support/documentation/en/flashplayer/help/settings_manager.html'> Flash Settings Manager </a> support page for instructions to <a href='http://www.macromedia.com/support/documentation/en/flashplayer/help/settings_manager08.html'>Reset License Files.</a> <a class='yvp-browser-refresh' href='javascript:window.location.reload();'>Refresh Browser</a>",ERR_DRM_INCOGNITO_MODE:"Sorry! Flash does not allow DRM protected playback when the browser is in incognito or private browsing mode.",ERR_DRM_UNSUPPORTED_STREAM:"Oops! This video does not have a valid stream configured.",ERR_DRM_RESTRICTED:"Please download Yahoo! <a href='https://yho.com/5xx'>Screen App</a> to watch this video.",ERR_EMBED:"Sorry! The content provider has not given us the rights to play this video outside of Yahoo!",ERR_FIREWALL:"Hmm. Something is blocking us from playing video. You may be behind a firewall. ",ERR_EXTERNAL_NO_STREAMS:"Video is external and does not have streams",ERR_FLASH_IS_BLOCKED:"Unfortunately, Flash is blocked from loading. Verify Flash is not disabled in the browser or Flash blocker turned on, then reload the page.",ERR_FLASH_NOT_ENABLED:"You need Adobe Flash to play this video. <a class='yvp-error-flash-download-wrapper' href='http://get.adobe.com/flashplayer/'><div>Download the free Flash Player Now! </div><img class='yvp-error-flash-download-icon'></a>",ERR_FLASH_NOT_UPTO_DATE:"Your Adobe Flash is an old version. Please upgrade to view this video. <a class='yvp-error-flash-download-wrapper' href='http://get.adobe.com/flashplayer/'><div>Download the free Flash Player Now! </div><img class='yvp-error-flash-download-icon'></a>",ERR_GEO:"Sorry! The content provider has not given us the rights to play this video in your location.",ERR_LOST_CONNECTION:"We lost connection to the video stream. Sometimes happens when your internet quickly loses and regains connection without your knowledge. <a class='yvp-browser-refresh' href='javascript:window.location.reload();'>Refresh Browser</a>",ERR_MISSING_METADATA:"Sorry! We are unable to provide this video to you. It is missing some important metadata.",ERR_NO_LONGER_AVAILABLE:"Sorry! This video is no longer available.",ERR_REL_VIDEO:"Please check out one of these related videos:",ERR_REL:"Feel free to check out one of these related videos:",ERR_RESTRICTED:"Video playback is not permitted due to unspecified license restrictions",ERR_SESSION_TIMEOUT:"Your session has timed out.",ERR_TECH_DIFFICULTIES:"If this error is occurring repeatedly, we may be experiencing technical difficulties. We apologize for the inconvenience. <a class='yvp-browser-refresh' href='javascript:window.location.reload();'>Refresh Browser</a>",ERR_UNAUTHORIZED:"Sorry! This video is available only to paid subscribers.",ERR_UNAVAILABLE:"Sorry! From time to time, content providers ask us to remove videos we've already placed on our site.",ERR_UNAVAILABLE_TEMP:"This video is currently not available due to provider license restrictions.",ERR_UNSUPPORTED_FORMAT:"Oops! This video does not have a valid stream configured.",ERR_UNSUPPORTED_LIVE_ON_HTML5:"Sorry! You are trying to watch a Live event that requires Flash to be active. Please enable Flash and try again.",ERR_DRM_CHROME_SETTING:"Please adjust your Chrome browser settings to watch this secure video. Open chrome://settings/content in Chrome browser. Then, check 'Allow identifiers for protected content' checkbox.",ERR_NO_COMPATIBLE_FORMAT:"There is no compatible stream format supporting your browser environment.",ERR_LIVE_IOS_PLAYBACK:"Unfortunately, an error occurred. To try again, either <a href='javascript:window.location.reload();'>refresh</a> the browser or download the <a class='yvp-browser-refresh' href='https://mobile.yahoo.com/sports'>Yahoo Sports app</a>",ERR_TITLE_BROWSER:"Unsupported Browser",ERR_TITLE_CMS:"CMS Error",ERR_TITLE_CONFIGURATION:"Configuration Error",ERR_TITLE_DEVICE:"Device Restriction",ERR_TITLE_DRM:"DRM Error",ERR_TITLE_EMBED:"Embed Restriction",ERR_TITLE_FLASH_BLOCKER:"Flash Blocker",ERR_TITLE_FLASH_MISSING:"Flash Not Installed",ERR_TITLE_FLASH_OLD:"Old Flash Version",ERR_TITLE_GEO:"Geo Restriction",ERR_TITLE_PLAYBACK:"Playback Error",ERR_TITLE_SOMETHING_WENT_WRONG:"Something Went Wrong",ERR_TITLE_USER_NOT_AUTHORIZED:"Subscription Required",ERR_TITLE_VIDEO_NOT_AVAILABLE:"Video Not Available",ERR_TITLE_CHROME_SETTING:"Browser Error",ERR_TITLE_LIVE_PLAYBACK_COMPLETE:"Live Ended",ERR_TITLE_FLASH_CRASHED:"Flash crashed",CHROMECAST:"Chromecast",DISCONNECT:"Disconnect",CAST_PLAYING_RECEIVER:"Playing on {device-name}",PAUSE_VIDEO:"Pause Video",GO_TO_FULLSCREEN:"Go to full screen",GO_TO_NORMAL_SCREEN:"Go to normal screen",UNMUTE:"Unmute",MUTE:"Mute",CLOSE:"Close",REMOVE_FROM_WATCH_LATER:"Remove from watch later",SEEK_SLIDER:"Seek slider",UP_NEXT:"Up next",FULLSCREEN_SPACE:"Full Screen",PRESETS:"Presets",CC_SETTINGS:"Closed Caption Settings",CC_TYPE_SIZE:"Type Size",COLOR:"Color",TRANSPARENCY:"Transparency",SUBMIT_FEEDBACK:"Submit Feedback",BACK_TO_SETTINGS:"Back to Settings",BACK_TO_OPTIONS:"Back to Options",ADV_SHORT:"Ad:",TEXT:"Text",STYLE_OPTIONS:"Style Options",PLAIN:"Plain",SHADOW:"Shadow",LOWERED:"Lowered",OUTLINE:"Outline",CAPTIONS_ON:"Captions On",CAPTIONS_OFF:"Captions Off",CAPTIONS_AVAILABLE:"Captions Available",CAPTIONS_NOT_AVAILABLE:"Captions Not Available",EXIT_FULLSCREEN:"Exit Full Screen"}},{}],dsc79Q:[function(e,t,n){"use strict";function i(e,t){var n=this;e=r.isString(e)?document.getElementById(e):e,n.element=e,n.shouldPropagate=r.isBoolean(t)?t:!1,n.moved=!1,o.forEach(function(t){e.addEventListener(t,n,!1)})}t.exports=i;var r=e("../../lib"),o=["touchstart","touchmove","touchend","touchcancel","mousedown","mouseup"];i.isTouchDevice=!1,i.prototype._start=function(e){var t=this,n="touchstart"===e.type;if(n){i.isTouchDevice=!0;var r=e.touches[0]}t.startX=n?r.clientX:e.clientX,t.startY=n?r.clientY:e.clientY,t.lastPageX=n?r.pageX:e.pageX,t.lastPageY=n?r.pageY:e.pageY,t.moved=!1},i.prototype._move=function(e){var t=this,n=e.touches[0];t.lastPageX=n.pageX,t.lastPageY=n.pageY,(Math.abs(n.clientX-t.startX)>10||Math.abs(n.clientY-t.startY)>10)&&(t.moved=!0)},i.prototype._end=function(e){var t,n=this;n.moved||(void 0!==document.CustomEvent?t=new document.CustomEvent("tap",{bubbles:!0,cancelable:!0}):(t=document.createEvent("Event"),t.initEvent("tap",!0,!0)),t.pageX=e.pageX||n.lastPageX,t.pageY=e.pageY||n.lastPageY,t.eventSource=e.srcElement,t.eventTarget=e.target,(!e.handled||n.shouldPropagate)&&n.element.dispatchEvent(t),e.handled=!0)},i.prototype._cancel=function(){var e=this;e.moved=!1},i.prototype.destroy=function(){var e=this,t=e.element;t&&(o.forEach(function(n){t.removeEventListener(n,e,!1)}),e.element=null)},i.prototype.handleEvent=function(e){var t=this;switch(e.type){case"mousedown":if(i.isTouchDevice)return;case"touchstart":t._start(e);break;case"touchmove":t._move(e);break;case"mouseup":if(i.isTouchDevice)return;case"touchend":t._end(e);break;case"touchcancel":t._cancel(e)}}},{"../../lib":"bRhrlU"}],"./nextgen/src/tap.js":[function(e,t,n){t.exports=e("dsc79Q")},{}],jJTEqU:[function(e,t,n){"use strict";function i(e){return a.isString(e)?e:a.isBoolean(e)?e.toString():a.isNumber(e)&&isFinite(e)?e.toString():""}function r(e){var t,i={"www.yahoo.com":!0,"news.yahoo.com":!0,"sports.yahoo.com":!0,"finance.yahoo.com":!0,"beta.finance.yahoo.com":!0,"au.yahoo.com":!0,"be.yahoo.com":!0,"fr-be.yahoo.com":!0,"br.yahoo.com":!0,"ca.yahoo.com":!0,"de.yahoo.com":!0,"espanol.yahoo.com":!0,"es.yahoo.com":!0,"fr.yahoo.com":!0,"gr.yahoo.com":!0,"hk.yahoo.com":!0,"id.yahoo.com":!0,"ie.yahoo.com":!0,"in.yahoo.com":!0,"it.yahoo.com":!0,"my.yahoo.com":!0,"nz.yahoo.com":!0,"ro.yahoo.com":!0,"se.yahoo.com":!0,"sg.yahoo.com":!0,"tw.yahoo.com":!0,"uk.yahoo.com":!0,"us.yahoo.com":!0,"ve.yahoo.com":!0,"vn.yahoo.com":!0,"maktoob.yahoo.com":!0,"en-maktoob.yahoo.com":!0,"za.yahoo.com":!0,"qc.yahoo.com":!0,"att.yahoo.com":!0,"espanol.att.yahoo.com":!0,"frontier.yahoo.com":!0,"verizon.yahoo.com":!0,"ca.rogers.yahoo.com":!0,"fr-ca.rogers.yahoo.com":!0,"tatadocomo.yahoo.com":!0,"tikona.yahoo.com":!0,"ideanetsetter.yahoo.com":!0,"mtsindia.yahoo.com":!0,"smartfren.yahoo.com":!0},r=/.*\-mg\d+\.mail\.yahoo\.com$/,a=n.getWindow(),s=a.location.protocol,l=a.location.hostname,c="player.swf",p="https:"===s?n.assetDomainHttps:n.assetDomainHttp,d=p+"/rx/builds/"+e+"/assets/"+c;return o.chrome&&(a.parent!==a&&(t=n.parseDomain(a.document.referrer),t&&(l=t)),i[l]?d=s+"//"+l+"/sy/rx/builds/"+e+"/assets/"+c:r.test(l)&&(d=s+"//"+l+"/lyimg/videoinmail/"+e+"/assets/"+c)),d}var o=e("../../lib/user-agent"),a=e("../../lib"),s=e("../../lib/logger"),l=e("xhr"),c=e("./error"),p=!1;n.assetDomainHttp="http://v4l.yimg.com",n.assetDomainHttps="https://v4s.yimg.com",n.setSingleton=function(e,t){window.YAHOO=window.YAHOO||{},window.YAHOO.VideoPlatform=window.YAHOO.VideoPlatform||{},window.YAHOO.VideoPlatform[e]=t,window.YUI&&!p&&(p=!0,window.YUI.add("videoplayer",function(e){Object.keys(window.YAHOO.VideoPlatform).forEach(function(t){var n=window.YAHOO.VideoPlatform[t];e.namespace("VideoPlatform")[t]=n})}))},n.getSingleton=function(e){return window.YAHOO&&window.YAHOO.VideoPlatform&&window.YAHOO.VideoPlatform[e]?window.YAHOO.VideoPlatform[e]:null},n.createErr=function(e,t,n,i,r,a,s){return new c.Error(e,n,i,{playbackState:t,msg:r,debugMsg:a,prefetch:s},o)},n.extend=function(e){a.isObject(e)||(e={});var t=Array.prototype.slice.call(arguments,1);return t.forEach(function(t){if(t)for(var n in t)e[n]=t[n]}),e},n.once=function(e){var t=function(){return t.called?t.value:(t.called=!0,t.value=e.apply(this,arguments),t.value)};return t.called=!1,t},n.querystring=function(e,t,n,r){return t=t||"&",n=n||"=",r=r||encodeURIComponent,a.isObject(e)&&(e=[e]),e.map(function(e){return Object.keys(e).map(function(o){var s=r(i(o));return null===e[o]?s:(s+=n,a.isArray(e[o])?e[o].map(function(e){return s+r(i(e))}).join(t):s+r(i(e[o])))}).join(t)}).join(t)},n.getCookie=function(e,t){t=t||{},e+="=";for(var n=document.cookie.split(/;\s*/),i=n.length-1;i>=0;i--)if(!n[i].indexOf(e)){var r=n[i].replace(e,"");return t.raw?r:decodeURIComponent(r)}},n.setCookie=function(e,t,n){n=n||{},n.raw||(t=encodeURIComponent(t));var i=e+"="+t,r=n.expires?n.expires.toGMTString():"Thu, 01-Jan-1970 00:00:01 GMT";n.session||(i+="; expires="+r);var o=n.path;o&&(i+="; path="+o);var a=n.domain;a&&(i+="; domain="+a),document.cookie=i},n.generateGuid=function(){return Math.floor(4294967295*Math.random()).toString()},n.sanitizeAndUnescape=function(e){if(a.isNullOrUndefined(e))return"";var t=e.toString().replace(/<\/?[^>]+>/g,""),n=document.createElement("div");return n.innerHTML=t,n.textContent},n.getHostUrl=function(){var e=document.referrer;try{window.top.location.href&&(e=window.top.location.href)}catch(t){}return e},n.generateLoginUrl=function(e,t,i){var r="https://login.yahoo.com",o={".src":"vp",".intl":e,".lang":t,".done":i||n.getHostUrl()};return n.fillUrl(r,o)},n.fillUrl=function(e,t){return e+"?"+n.querystring(t)},n.isOffNetwork=function(e){e=e||n.getHostUrl();var t=n.parseDomain(e),i=["yahoo.com","yahoo.co.jp","yahoo.net","yahoo.fr","yimg.com","rivals.com","tumblr.com","txmblr.com","flickr.com","maktoob.com","grindtv.com","thepostgame.com","nfl.com","nfljapan.com","localhost"];return e?!t||!i.some(function(e){return-1!==t.indexOf(e,t.length-e.length)}):!1},n.isIFrame=function(){try{return window.top!==window.self}catch(e){return!0}},n.render=function(e,t,n){var i=document.createElement("div");return i.innerHTML=e.render(t,n),i.children[0]},n.inherits=function(e,t){e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}})},n.getTextFromNode=function(e){return e?e.textContent.trim():null},n.parseDomain=function(e){var t=/^https?:\/\/([A-Za-z0-9\.\-]*)(?:$|\/|:)/.exec(e);return t?t[1]:null},n.parseRootHost=function(e){var t=n.parseDomain(e),i=null;if(t){var r=t.split(".");i=r.length>=2?r[r.length-2]:t}return i},n.localStorage={get:function(e){var t=null;try{t=JSON.parse(localStorage.getItem(e))}catch(n){t=null}return t},put:function(e,t){if(!e||!t)return!1;try{return t=JSON.stringify(t),localStorage.setItem(e,t),!0}catch(n){return!1}},remove:function(e){try{localStorage.removeItem(e)}catch(t){return}},getAllKeys:function(){try{for(var e=[],t=0,n=localStorage.length;n>t;++t)e.push(localStorage.key(t));return e}catch(i){return e}}},n.sendImageBeacon=function(e){function t(){n.onload=n.onabort=n.onerror=null,n=null}var n=new Image;n.onload=n.onabort=n.onerror=t,n.src=e},n.sendIframeBeacon=function(e){var t,n=this,i=document.querySelector("#vp-beacons");i||(i=n.createBeaconsIframe()),t=i.contentDocument.createElement("script"),t.async=!0,t.src=e,"complete"===i.contentDocument.readyState?i.contentDocument.body.appendChild(t):i.contentDocument.body.onload=function(){i.contentDocument.body.appendChild(t)}},n.sendUnloadBeacon=function(e){navigator&&navigator.sendBeacon?navigator.sendBeacon(e,null):n.sendImageBeacon(e)},n.createBeaconsIframe=function(){var e=document.createElement("iframe");return e.frameBorder=0,e.width=0,e.height=0,e.marginwidth=0,e.marginheight=0,e.hspace=0,e.vspace=0,e.frameborder=0,e.scrolling="no",e.id="vp-beacons",e.style.display="none",e.title="",document.body.appendChild(e),e},n.getWindow=function(){return window},n.getAssetUrl=function(e,t,i){var o,a=n.getWindow(),s=a.location.protocol,l="https:"===s?n.assetDomainHttps:n.assetDomainHttp;return o=e?"assets/"+i:"player.swf"===i?r(t):l+"/rx/builds/"+t+"/assets/"+i},n.getScriptUrl=function(e,t,i){var r,o=window.location.href.match(/videoplayer.*\-debug.js/)||window.location.href.match(/minimal\.html/)?"-debug.js":"-min.js";if(e)r="/"+i+"-debug.js";else{var a="https:"===document.location.protocol?n.assetDomainHttps:n.assetDomainHttp;r=a+"/rx/builds/"+t+"/"+i+o}return r},n.classList=function(e){function t(t){return function(n){var i=e&&a.isString(e.className)?e.className.split(/\s+/):[],r=i.indexOf(n),o=t(i,r,n);return e&&a.isString(e.className)&&(e.className=i.join(" ")),o}}if(e.classList)return e.classList;var n={add:t(function(e,t,n){~t||e.push(n)}),remove:t(function(e,t){~t&&e.splice(t,1)}),toggle:t(function(e,t,n){~t?e.splice(t,1):e.push(n)}),contains:t(function(e,t){return!!~t})};return n},n.forceDOMRedrawOnElement=function(e){e&&e.offsetHeight},n.uniquifyArray=function(e){return e.filter(function(e,t,n){return n.indexOf(e)===t})},n.isInternalUser=function(){var e=n.getSingleton("PlayerHosting");return e&&"s"===e.env},n.strSubstitute=function(e,t){return e.replace(/\{([^\{\}]*)\}/g,function(e,n){var i="function"==typeof t?t(n):t[n];return a.isNullOrUndefined(i)?e:i})},n.showUserAuthPage=function(e){var t="https://login.yahoo.com/?.src=vp&.intl={region}&.lang={language}&.done={referrer}",i=n.strSubstitute(t,{region:e.baseConfig.region,language:e.baseConfig.lang,referrer:encodeURI(n.getHostUrl())});n.redirect(i)},n.lazyLoad=function(e,t,n,i){function r(t){o.loadedScripts[e]&&o.loadedScripts[e].forEach(function(e){e(t)}),o.loadComplete[e]=t,clearTimeout(l)}var o=this,s=document.createElement("script");if(a.isNullOrUndefined(o.loadedScripts)&&(o.loadedScripts={},o.loadComplete={}),a.isNullOrUndefined(o.loadedScripts[e])&&(o.loadedScripts[e]=[],o.loadComplete[e]=!1),o.loadedScripts&&o.loadedScripts.hasOwnProperty(e)){if(o.loadComplete[e]!==!1)return n(o.loadComplete[e]);if(o.loadedScripts[e].push(n),o.loadedScripts[e].length>1)return}s.async=!0,s.src=e;var l=window.setTimeout(function(){o.loadedScripts[e]&&o.loadedScripts[e].forEach(function(e){e("Script load timeout")}),o.loadComplete[e]="Script load timeout"},t);return s.onload=function(){r(null)},s.onerror=function(){r("Failed to load script")},i&&r("Cancelling script execution"),document.body.appendChild(s),function(){r("Cancelling script execution")}},n.XHR_ERROR="XHR error",n.XHR_TIMEOUT="XHR request timed out",n.ajax=function(e,t){var i=2,r=t.context,c=t.responseTypeJson,p=t.withCookie,d=t.timeout,u=n.once(t.successHandler),_=n.once(t.failureHandler),v=(a.isNullOrUndefined(t.earlyRetries)?i:t.earlyRetries,!1),y=null,m={url:e,cors:o.ie&&o.ie<10||p,withCredentials:p,timeout:d||3e3};if(r&&u&&_){var f=(new Date).getTime(),g=new l(m,function(i,o,s){if(!v)if(t.collectPerfData&&(y={},a.isFunction(g.getResponseHeader)&&(y.resp_len=g.getResponseHeader("Content-Length")||"na"),window.performance&&window.performance.getEntriesByName&&(y.resourceTiming=window.performance.getEntriesByName(location.protocol+e).pop(),y.resourceTimingEntries=window.performance.getEntries()),y.http_code=o.status),i){o.timeDiff=(new Date).getTime()-f;var l=null;a.isFunction(g.getResponseHeader)&&(l=o.getResponseHeader("Access-Control-Allow-Origin"));var p=window.location.protocol+"//"+window.location.host;if(l&&l!==p)_.call(r,new Error(n.XHR_ERROR),"default","cors");else{var m=o.timeDiff>=d?n.XHR_TIMEOUT:n.XHR_ERROR;_.call(r,new Error(m),o.previousState,o.status,o.timeDiff,y)}}else u.call(r,c?JSON.parse(s):s,!1,y)});g.previousState=g.readyState;var b=g.onreadystatechange;g.onreadystatechange=function(){4===g.readyState?b.call(g):g.previousState=g.readyState}}return function(){s.log("XMLHttpRequest: cancelled"),v=!0}},n.JSONP_ERROR="jsonp error",n.JSONP_TIMED_OUT="jsonp request timed out",n.jsonp=function(e,t){function i(e){s.log("JSONP "+a+": "+e)}function r(e){l.removeChild(d),e?delete window[a]:window[a]=function(){},clearTimeout(u)}function o(){i("cancelled"),window[a]&&r(!1)}var a,l=document.getElementsByTagName("head")[0],c=n.once(t.jsonpHandler);do a="_callback"+Math.round(1e7*Math.random());while(void 0!==window[a]);var p=e+(e.indexOf("?")+1?"&":"?");p+="callback="+a;var d=document.createElement("script");d.type="text/javascript",d.src=p;var u=window.setTimeout(function(){i("timeout"),r(!1),c(new Error(n.JSONP_TIMED_OUT),null,n.fetchJsonpPerfData(e,a,t.collectPerfData))},2e4);return d.onerror=function(){r(!0),c(new Error(n.JSONP_ERROR),null,n.fetchJsonpPerfData(e,a,t.collectPerfData))},window[a]=function(i){r(!0),c(null,i,n.fetchJsonpPerfData(e,a,t.collectPerfData,i))},l.appendChild(d),o},n.fetchJsonpPerfData=function(e,t,n,i){var r={};if(n){if(r.resp_len="na",window.performance&&window.performance.getEntriesByName,i){var o=location.protocol+e+"&callback="+t;r.resourceTiming=window.performance.getEntriesByName(o).pop(),r.resourceTimingEntries=window.performance.getEntries()}i&&(r.http_code=i.status||"na",r.resp_len=i.length||"na")}return r},n.isFlashInstalled=function(){if(void 0!==n.isFlashInstalledMem)return n.isFlashInstalledMem;var e=null;if(o.ie)try{var t=new window.ActiveXObject("ShockwaveFlash.ShockwaveFlash");e=t.GetVariable("$version").replace(/[A-Za-z\s]+/g,"").split(",")}catch(i){}else{var r=navigator.mimeTypes["application/x-shockwave-flash"];if(r){var a=r.enabledPlugin;a&&(e=a.description.replace(/\s[rd]/g,".").replace(/[A-Za-z\s]+/g,"").split("."))}}return e?n.isFlashInstalledMem="0"!==e[0]:n.isFlashInstalledMem=!1,n.isFlashInstalledMem},n.getMediaCDNName=function(e,t,i){var r,o="unknown";if(t&&t.length>0){if(t[0].cdn&&t[0].cdn.length>0)return t[0].cdn;var a=t[0].host,s=t[0].path;r=a+s,!e.isLive()&&t[0].hlsInfo&&(r=t[0].hlsInfo.ts_url)}else i&&i.length>0&&(r=i);return r&&r.length>0&&(o=r.indexOf("akamai")>-1||0===r.indexOf("rtmp")&&e.isLive()?"akamai":r.indexOf("yahoo.com")>-1||r.indexOf("yimg.com")>-1?"atlas":r.indexOf("llnwd.net")>-1?"limelight":r.indexOf("fastly.com")>-1?"fastly":n.parseRootHost(r)),o},n.redirect=function(e,t){try{t?window.top.location.replace(e):window.top.location.assign(e)}catch(n){typeof n===window.DOMException&&s.log("Unable to redirect: "+n)}},n.showHide=function(e,t){e.style.display=t?"block":"none"},n.formatTime=function(e){var t=Math.floor(e/3600),n=Math.floor((e-3600*t)/60),i=Math.floor(e-3600*t-60*n),r="";return 10>i&&(i="0"+i),t>0?(10>n&&(n="0"+n),t+":"+n+":"+i):a.isNumber(n)?n+":"+i:r},n.getOffsetTopFromEl=function(e,t){for(var i=0;e;)isNaN(e.offsetTop)||(i+=e.offsetTop),e=e.offsetParent,t&&n.classList(e).contains(t)&&(e=null);return i},n.getOffsetTopFromDocument=function(e){var t=e.getBoundingClientRect(),n=document.body,i=document.documentElement,r=window.pageYOffset||i.scrollTop||n.scrollTop,o=i.clientTop||n.clientTop||0;return Math.round(t.top+r-o)},n.setupMouseWheelListener=function(e){var t=function(t){var n=Math.max(-1,Math.min(1,t.wheelDelta||-t.detail)),i=n>0,r=e.scrollHeight>e.offsetHeight,o=i&&e.scrollTop<1,a=!i&&e.scrollTop>=e.scrollHeight-e.offsetHeight;r&&(o||a)&&t.preventDefault()};return e&&(e.addEventListener("mousewheel",t),e.addEventListener("DOMMouseScroll",t)),t},n.destroyMouseWheelListener=function(e,t){e&&a.isFunction(t)&&(e.removeEventListener("mousewheel",t),e.removeEventListener("DOMMouseScroll",t))},n.bucketize=function(){return Math.floor(100*Math.random())},n.cssHexToRgb=function(e){var t=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(e);return t?{r:parseInt(t[1],16),g:parseInt(t[2],16),b:parseInt(t[3],16)}:null},n.getElementViewability=function(e){var t,n=e.getBoundingClientRect();return t=n.top>=0?n.bottom>window.innerHeight?window.innerHeight-n.top>0?window.innerHeight-n.top:0:n.height:n.bottom>window.innerHeight?window.innerHeight:n.bottom<0?0:n.bottom,Math.round(t/n.height*100)},n.noPropagation=function(e){a.isFunction(e.stopPropagation)&&e.stopPropagation()},n.getHostname=function(e){var t=document.createElement("a");return t.href=e,t.hostname},n.getFormat=function(e){var t=["mp4","m3u8","webm","flv","f4m","mp4b","m3u8_playlist","m3u8_master"],n=null;return t.forEach(function(t){-1!==e.indexOf(t)&&(n=t)}),n},n.mapStreamsToQualities=function(e){var t=1,n=2,i=1500,r=2500,o=null,a=null,s=null;if(e.bitrates){for(var l=[],c=0;c<e.bitrates[c];c++)l.push({bitrate:e.bitrates[c],height:e.heights[c]});e=l}for(c=0;c<e.length;c++){var p,d=e[c],u=t*d.bitrate+n*d.height;i>=u?o?(p=o.bitrate+2*o.height,u>p&&(o=d)):o=d:r>=u?a?(p=a.bitrate+2*a.height,u>p&&(a=d)):a=d:s?(p=s.bitrate+2*s.height,u>p&&(s=d)):s=d}return{low:o,medium:a,high:s}},n.getUrlStatus=function(e,t){var n=new XMLHttpRequest;n.open("GET",e,!0),n.onreadystatechange=function(){4===n.readyState&&t(n.status)},n.send()},n.isPlayerInBackground=function(){return this.hidden||("undefined"!=typeof document.hidden?this.hidden="hidden":"undefined"!=typeof document.mozHidden?this.hidden="mozHidden":"undefined"!=typeof document.msHidden?this.hidden="msHidden":"undefined"!=typeof document.webkitHidden?this.hidden="webkitHidden":this.hidden="unsupported"),"unsupported"===this.hidden?!document.hasFocus():document[this.hidden]},n.shouldEnableQualitySelector=function(e){var t=["html","flash"],n=e.playbackState.rendererType,i=e.playlist.getCurrentItem();if(t.indexOf(n)>-1&&i){if("flash"!==n)return i.streams.length>1;if("hls"===i.streams[0].getType())return i.isLive()?!0:i.streams.length>1}return!1},n.replaceStrParam=function(e,t,n){return e.replace(new RegExp(t+"=\\w*"),t+"="+n)},n.showUpNext=function(e){return e.uiState.width<560?!1:e.ui.showUpNext||window.location.search.indexOf("upnext=true")>-1},n.isAndroidVersionAbove4=function(){if(o.androidVersion){var e=parseInt(o.androidVersion);return e>=4}return!1},n.preconnect=function(e,t){if(document&&!document.head.querySelector("#"+e)){var n=document.createElement("link");n.setAttribute("rel","preconnect"),n.setAttribute("id",e),n.setAttribute("href",t);var i=document.getElementsByTagName("head")[0];i&&i.appendChild(n)}}},{"../../lib":"bRhrlU","../../lib/logger":"IS9j5T","../../lib/user-agent":"ty5FFo","./error":20,xhr:161}],"./nextgen/src/util.js":[function(e,t,n){t.exports=e("jJTEqU")},{}],74:[function(e,t,n){"use strict";function i(e,t){function n(e){var t=p[e];i._eventBus.subscribe(t,function(){var t=Array.prototype.slice.call(arguments,0);setTimeout(function(){i.publish.apply(i,[d[e]].concat(t))})})}var i=this;l.call(i,"API");var c=null;t&&(c=t._privateMediaStore||null),i._controller=new a(e,c),i.controls=new r(i._controller),i.playlist=new o(i._controller),i._eventBus=i._controller._eventBus;var p=[s.PLAYBACK_STARTED,s.Video.PAUSE,s.PLAYBACK_RESUMED,s.PLAYBACK_PROGRESS,s.PLAYBACK_ENDED,s.AD_PLAYBACK_STARTED,s.Ad.PAUSE,s.AD_PLAYBACK_RESUMED,s.AD_PLAYBACK_PROGRESS,s.AD_PLAYBACK_ENDED,s.AD_PLAYBACK_ERROR,s.Ad.NO_AD,s.ERROR,s.METADATA_AVAILABLE,s.SNAP_IT_MODE_STARTED,s.SNAP_IT_MODE_ENDED,s.CC.FETCHED],d=[s.API.PLAYBACK_START,s.API.PLAYBACK_PAUSE,s.API.PLAYBACK_RESUMED,s.API.PLAYBACK_TIME_UPDATE,s.API.PLAYBACK_COMPLETE,s.API.AD_PLAYBACK_START,s.API.AD_PLAYBACK_PAUSE,s.API.AD_PLAYBACK_RESUME,s.API.AD_PLAYBACK_PROGRESS,s.API.AD_PLAYBACK_STOP,s.API.AD_ERROR,s.API.AD_NONE,s.API.PLAYER_ERROR,s.API.METADATA_READY,s.API.SNAP_IT_MODE_START,s.API.SNAP_IT_MODE_END,s.API.CC_AVAILABLE];for(var u in s.API)if(-1===d.indexOf(u)){var _=s.API[u];p.push(_),d.push(_)}for(var v=0;v<p.length;v++)n(v);i._eventBus.subscribe(s.FULLSCREEN_CHANGE,function(e){i.publish(s.API.PLAYER_FULLSCREEN_CHANGE,e),i._controller.setContentHeightForNFL()})}function r(e){var t=this;t._controller=e}function o(e){var t=this;t._controller=e}t.exports=i;var a=e("./controller"),s=e("./event"),l=e("../../lib/event-bus"),c=e("./util"),p=e("../../lib"),d=e("./states"),u=e("./metrics/metrics-constants");c.inherits(i,l),i.prototype.apiVersion=i.apiVersion=2,i.prototype.render=function(e){var t=this;return t._controller.render(e),t},i.prototype.getCustomControlsNode=function(){var e=this;return e._controller.getCustomControlsNode()},i.prototype.destroy=function(){var e=this;return e._controller.destroy(),l.prototype.destroy.call(e),e},i.prototype.fetchMetaData=function(e){var t=this;if(!p.isArray(e)||!e.every(p.isString))throw new Error("fetchMetaData called with invalid list of ids");return t._controller.prefetch(e),t},i.prototype.getMediaStore=function(){var e=this;return{_privateMediaStore:e._controller.getMediaStore()}},i.prototype.on=i.prototype.subscribe,i.prototype.before=i.prototype.subscribe,i.prototype.after=i.prototype.subscribe,i.prototype.fire=i.prototype.publish,r.prototype.play=function(e){var t=this;t._controller.getPlaybackState()===d.INIT&&p.isNumber(e)&&e>0&&e<t.getDuration()&&(t._controller.getCurrentMediaItem().progress.position=e);var n={type:u.API};t._controller.play(n)},r.prototype.pause=function(){var e=this;e._controller.pause()},r.prototype.seek=function(e){var t=this;t._controller.seek(e)},r.prototype.disableControls=function(){var e=this;e._controller.disableControls();
},r.prototype.enableControls=function(){var e=this;e._controller.enableControls()},r.prototype.enableCC=function(e){var t=this;t._controller.setCC(!0,e)},r.prototype.disableCC=function(){var e=this;e._controller.setCC(!1)},r.prototype.isPlaying=function(){var e=this;return e._controller.isPlaying()},r.prototype.getDuration=function(){var e=this;return e._controller.getCurrentMediaItem().duration},r.prototype.getCurrentTime=function(){var e=this;return e._controller._view&&e._controller._view.currentTime||0},r.prototype.getTimeRemaining=function(){var e=this;return e.getDuration()-e.getCurrentTime()},r.prototype.setFullscreen=function(e){var t=this;t._controller.setFullscreen(e)},r.prototype.getFullscreen=function(){var e=this;return e._controller.getFullscreen()},r.prototype.setVolume=function(e){var t=this;e=0>e?0:e,e=e>1?1:e,t._controller.setVolume(e)},r.prototype.getVolume=function(){var e=this;return e._controller.getVolume()},r.prototype.setMute=function(e){var t=this;t._controller.setMute(e)},r.prototype.getMute=function(){var e=this;return e._controller.getMute()},r.prototype.setLoop=function(e){var t=this;return t._controller.setLoop(e)},r.prototype.setContinuousPlay=function(e){var t=this;return t._controller.setContinuousPlay(e)},r.prototype.resumeContinuousPlay=function(){var e=this,t={type:u.API};e._controller.resumeContinuousPlay(t)},r.prototype.getBitrate=function(){throw new Error("getBitrate is unimplemented!")},r.prototype.setResolution=function(){throw new Error("setResolution is unimplemented!")},r.prototype.displayClosedCaptions=function(){throw new Error("displayClosedCaptions is unimplemented!")},r.prototype.startSnapItMode=function(){var e=this;e._controller.startSnapItMode()},r.prototype.endSnapItMode=function(){var e=this;e._controller.endSnapItMode()},o.prototype.getSize=function(){var e=this;return e._controller.getPlaylistItems().length},o.prototype.getPosition=function(){var e=this;return e._controller.getPlaylist().position},o.prototype.sendPrefetchInfo=function(e){var t=this;return t._controller.sendPrefetchInfo(e)},o.prototype.setPosition=function(e){var t=this;if(!(e in t._controller.getPlaylistItems()))throw new Error("setPosition called with invalid position");var n=t._controller.getAutoplay();if(n)var i={type:u.API,action:u.AUTOPLAY};t._controller.setPlaylistPosition(e,n,i)},o.prototype.setPositionById=function(e){var t=this,n=t._controller.getPlaylistItems().indexOf(e);if(-1===n)throw new Error("setPositionById called with id not in playlist");var i=t._controller.getAutoplay();if(i)var r={type:u.API,action:u.AUTOPLAY};t._controller.setPlaylistPosition(n,i,r)},o.prototype.addItem=function(e){var t=this;t.addItems([e])},o.prototype.addItems=function(e){var t=this,n=e.filter(function(e){return null===t._controller.getMediaStore().get(e)});n.length>0&&t._controller.prefetch(n),e.forEach(function(e){t._controller.getPlaylistItems().push(e)})},o.prototype.getItems=function(){var e=this;return e._controller.getPlaylistItems().slice(0)},o.prototype.getItemId=function(e){var t=this,n=t._controller.getPlaylistItems();if(!(e in n))throw new Error("getItemId called with invalid position");return n[e]},o.prototype.getCurrentItemId=function(){var e=this,t=e._controller.getPlaylist();return-1!==t.position?t.items[t.position]:null},o.prototype.getCurrentItem=function(){var e=this,t=e._controller.getCurrentMediaItem();return t?e.getItemById(t.id):null},o.prototype.getItem=function(e){var t=this,n=t._controller.getPlaylistItems();if(!(e in n))throw new Error("getItem called with invalid position");return t.getItemById(n[e])},o.prototype.getItemById=function(e){var t=this,n=t._controller.getMediaStore().get(e);return n?{id:n.id,title:n.title,description:n.description,duration:n.duration,provider:n.provider,credits:n.credits,shareUrl:n.shareUrl,setShareUrl:function(e){this.shareUrl=e,n.shareUrl=e},thumbnail:n.images.defaultThumbnail}:null},o.prototype.getIndexForId=function(e){var t=this;return t._controller.getPlaylistItems().indexOf(e)},o.prototype.removeItem=function(e){var t=this;if(!(e in t._controller.getPlaylistItems()))throw new Error("removeItem called with invalid position");t._controller.removePlaylistItems(e,1)},o.prototype.removeItems=function(e,t){var n=this,i=n._controller.getPlaylistItems();if(!(e in i&&e+t-1 in i))throw new Error("removeItems called with invalid position/count");n._controller.removePlaylistItems(e,t)},o.prototype.removeItemById=function(e){var t=this,n=t._controller.getPlaylistItems().indexOf(e);if(-1===n)throw new Error("removeItemById called with id not in playlist");t._controller.removePlaylistItems(n,1)},o.prototype.removeItemsById=function(e){var t=this;e.forEach(function(e){t.removeItemById(e)})},o.prototype.clear=function(){var e=this;e._controller.removePlaylistItems(0,e._controller.getPlaylistItems().length)}},{"../../lib":"bRhrlU","../../lib/event-bus":"3ECu9u","./controller":18,"./event":"YJm+dH","./metrics/metrics-constants":48,"./states":65,"./util":"jJTEqU"}],75:[function(e,t,n){"use strict";function i(e,t,n,i){var r=this;r.rootElem=e,r._model=t,r._eventBus=n,r._profiler=i,r._nflBarDimensions=V,r._nflBranding=null,r._viewSize=w.NORMAL,r._renderers={},r._renderer=null,r._rendererType="",r._isFullScreen=!1,r._controlsHideTimeout=z;var o=r.rootElem.clientWidth,a=r.rootElem.clientHeight;o<j.VERY_SMALL_WIDTH||a<j.VERY_SMALL_HEIGHT?r._viewSize=w.VERY_SMALL:(o<j.SMALL_WIDTH||a<j.SMALL_HEIGHT)&&(r._viewSize=w.SMALL),r._eventBus.subscribe(d.MEDIA_ITEM_LOADED,function(e){r.toggleFujiSettings(null,!1,!0),e.isLive()?L.classList(r._contentElem).add("yvp-live"):L.classList(r._contentElem).remove("yvp-live"),r.isStreamMode()&&L.classList(r._contentElem).add("yvp-stream"),r.isMiniStreamMode()&&L.classList(r._contentElem).add("yvp-ministream")},r),r._eventBus.subscribe(d.Video.SWITCHING,function(){r._setFlag(P.SWITCHING,!0)}),r._eventBus.subscribe(d.Video.SWITCHED,function(){r._setFlag(P.SWITCHING,!1)}),r._eventBus.publish(d.PLAYER_DIMENSION_CHANGE,{width:r.rootElem.clientWidth||1,height:r.rootElem.clientHeight||1}),r._eventBus.subscribe(d.RENDERER_TYPE_CHANGE,r._onRendererTypeChange,r),r._eventBus.subscribe(d.API.PLAYER_MUTE_CHANGE,r._onMuteChange,r),r._eventBus.subscribe(d.UP_NEXT_PG_CLICK,r._onUpnextPgClick,r),r._eventBus.subscribe(d.PLAYBACK_PROGRESS,r._onPlaybackProgress,r)}t.exports=i;var r=(e("fs"),e("insert-css")),o=e("./fujiviews/fuji-controls"),a=e("./views/nfl-branding"),s=e("./easter-egg"),l=e("./fujiviews/fuji-playlist"),c=e("./views/error-screen"),p=e("./views/age-gate-screen"),d=e("./event"),u=e("./renderers/flash"),_=e("./renderers/html5-dash"),v=e("./renderers/html5-raw"),y=e("./renderers/html5-tv"),m=(e("./views/loading-screen"),e("./views/open-sim-sim")),f=e("./views/feedback-screen"),g=e("./renderers/modes"),b=e("./fujiviews/fuji-start-screen"),E=e("./fujiviews/fuji-loading-screen"),h=e("./states"),A=e("./views/tumblr-controls"),S=e("./views/tumblr-loading-screen"),T=e("../../lib/user-agent"),L=e("./util"),I=e("../../lib"),M=e("../../lib/logger"),C=e("./views/ads-overlay"),N=e("./error.js"),R="flash_download_logo.svg",D=e("./views/base.html"),O={END_SCREEN:"end-screen",ERROR:"error",VIDEO:"video",START_SCREEN:"start-screen",BLOCKED:"blocked"},P={LOADING:"loading",SWITCHING:"switching",PLAYING:"playing",PAUSED:"paused",CASTING:"casting"},w={NORMAL:"normal",SMALL:"smallscreen",VERY_SMALL:"verysmallscreen"},j={SMALL_WIDTH:350,SMALL_HEIGHT:210,VERY_SMALL_WIDTH:175,VERY_SMALL_HEIGHT:175},k=["webkitfullscreenchange","mozfullscreenchange","msfullscreenchange","fullscreenchange"],x="yvp-state-",B="yvp-flag-",U="yvp-mode-",Y="yvp-browser-",z=5e3,V={DESKTOP:{HEIGHT:36},MOBILE:{HEIGHT:52}};r('.yvp-content{position:relative;width:100%;height:100%;overflow:hidden;font-family:Helvetica Neue Regular,Helvetica Neue,helvetica,arial,sans-serif;font-size:16px;text-align:initial;cursor:default;background-color:#000;outline:none;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;}.yvp-content [tabindex]{outline:none}.yvp-content h3,.yvp-content h4,.yvp-content p,.yvp-content label,.yvp-content input,.yvp-content div,.yvp-content button,.yvp-content img,.yvp-content li,.yvp-content ul{margin:0;padding:0;border:0}.yvp-main{position:relative;width:100%;height:100%}.yvp-state-error .yvp-error-screen{-webkit-user-select:text;-moz-user-select:text;-ms-user-select:text;user-select:text;display:block}.yvp-state-error .yvp-start-screen,.yvp-state-error .yvp-end-screen,.yvp-state-error .yvp-html5-video,.yvp-state-error .yvp-end-screen-fuji{display:none}.yvp-state-end-screen .yvp-end-screen,.yvp-state-end-screen .yvp-end-screen-fuji{display:block}.yvp-state-end-screen .yvp-start-screen,.yvp-state-end-screen .yvp-error-screen,.yvp-state-end-screen .yvp-html5-video{display:none}.yvp-state-video .yvp-html5-video,.yvp-state-blocked .yvp-html5-video,.yvp-flag-playing.yvp-state-video.yvp-browser-iphone .yvp-html5-video{display:block}.yvp-state-video .yvp-start-screen,.yvp-state-blocked .yvp-start-screen,.yvp-flag-playing.yvp-state-video.yvp-browser-iphone .yvp-start-screen,.yvp-state-video .yvp-end-screen,.yvp-state-blocked .yvp-end-screen,.yvp-flag-playing.yvp-state-video.yvp-browser-iphone .yvp-end-screen,.yvp-state-video .yvp-error-screen,.yvp-state-blocked .yvp-error-screen,.yvp-flag-playing.yvp-state-video.yvp-browser-iphone .yvp-error-screen,.yvp-state-video .yvp-end-screen-fuji,.yvp-state-blocked .yvp-end-screen-fuji,.yvp-flag-playing.yvp-state-video.yvp-browser-iphone .yvp-end-screen-fuji{display:none}.yvp-flag-casting .yvp-start-screen,.yvp-flag-casting .yvp-end-screen,.yvp-flag-casting .yvp-end-screen-fuji{display:none}.yvp-state-start-screen .yvp-start-screen,.yvp-state-video.yvp-browser-iphone .yvp-start-screen{display:block}.yvp-state-start-screen .yvp-end-screen,.yvp-state-video.yvp-browser-iphone .yvp-end-screen,.yvp-state-start-screen .yvp-error-screen,.yvp-state-video.yvp-browser-iphone .yvp-error-screen,.yvp-state-start-screen .yvp-html5-video,.yvp-state-video.yvp-browser-iphone .yvp-html5-video,.yvp-state-start-screen .yvp-end-screen-fuji,.yvp-state-video.yvp-browser-iphone .yvp-end-screen-fuji{display:none}.yvp-state-start-screen .yvp-html5-video,.yvp-state-video.yvp-browser-iphone .yvp-html5-video{top:-2000px}object.yvp-swf-not-ready.yvp-flash-video{opacity:0}.yvp-loading-screen{display:none}.yvp-flag-loading .yvp-loading-screen,.yvp-flag-switching .yvp-loading-screen{display:block}.yvp-state-blocked .yvp-loading-screen,.yvp-state-blocked .yvp-bottom-bar{display:none}.yvp-content.yvp-settings-disabled .yvp-cc-menu{left:-19px}.yvp-state-video{z-index:5}.yvp-content{z-index:0}.yvp-html5-video{z-index:5}.yvp-switching-canvas{z-index:15}.yvp-loading-screen .yvp-spinner-outer,.yvp-loading-screen .yvp-spinner-inner{z-index:20}.yvp-flash-video{position:absolute;left:0;visibility:hidden}.yvp-flash .yvp-flash-video{visibility:visible}.yvp-html5-video{position:absolute;width:100%;height:100%;top:0;cursor:pointer;visibility:hidden}.yvp-html .yvp-html5-video{visibility:visible}.yvp-switching-canvas{position:absolute}.yvp-start-screen,.yvp-end-screen{position:absolute;height:100%;width:100%;background-color:#000;cursor:pointer}.yvp-nfl-branding-container{width:100%;height:36px;position:relative;z-index:22;background:#011832;background:-moz-linear-gradient(left,#011832 0%,#103155 40%,#011832 100%);background-image:-webkit-linear-gradient(left, #011832 0%, #103155 40%, #011832 100%);background-image:-o-linear-gradient(left, #011832 0%, #103155 40%, #011832 100%);background-image:linear-gradient(left, #011832 0%, #103155 40%, #011832 100%);*background:#011832;white-space:nowrap}.yvp-browser-mobile .yvp-nfl-branding-container{height:52px}.yvp-nfl-branding{position:relative;margin:10px auto;vertical-align:middle;display:inline-block;zoom:1;width:30%}.yvp-browser-mobile .yvp-nfl-branding{margin:15px auto}.yvp-nfl-branding-container .yvp-nfl-brand-span{background-image:url("data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyMCIgaGVpZ2h0PSIyMCI+PHBhdGggZmlsbD0iI0ZGRiIgZD0iTTkuOTgzIDE5LjM4cy40MTctLjcyLjgyNC0xLjExMmMuNTc0LS41NSAxLjM5LS44OTcgMi40OS0xLjA1NiAxLjM4Mi0uMiAyLjM4NS0uNjcgMi45NzYtMS4zODIuNDc4LS41OC41NS0xLjE2Mi41NS0xLjQ1NlYyLjcyN2gtLjQ1NGMtLjU5LjQyLTEuNzE1Ljk5Ni0zLjE2LjY0QzEwLjcgMi43NSA5Ljk4Mi41ODggOS45ODIuNTg4UzkuMjY4IDIuNzUgNi43NiAzLjM2NWMtMS40NS4zNTctMi41NzQtLjIyLTMuMTYyLS42NGgtLjQ1MnYxMS42NDhjMCAuMjkzLjA3Mi44NzUuNTUgMS40NTYuNTkuNzEzIDEuNTkgMS4xOCAyLjk3NCAxLjM4MiAxLjEwMy4xNTggMS45MTcuNTA1IDIuNDkyIDEuMDU4LjQyMi40MDYuODIgMS4xMS44MiAxLjExIi8+PHBhdGggZmlsbD0iIzAxMzc2OSIgZD0iTTE2LjQxMyAzLjE4MnMtMS4zNzMgMS4wNjYtMy4zMDMuNTgzYy0yLjI1Mi0uNTYyLTMuMTI3LTIuMjUtMy4xMjctMi4yNXMtLjg3NCAxLjY4OC0zLjEyNSAyLjI1Yy0xLjkzLjQ4My0zLjMwMi0uNTgzLTMuMzAyLS41ODN2MTEuMTkyYzAgLjM4LjE2IDEuOTk1IDMuMTcyIDIuNDMyIDEuMTkuMTcyIDIuMDguNTU1IDIuNzIgMS4xNy4yMjguMjE4LjQwMy40NC41MzYuNjUuMTMzLS4yMS4zMDgtLjQzMi41NC0uNjUuNjM2LS42MTUgMS41MjUtLjk5OCAyLjcxNC0xLjE3IDMuMDE1LS40MzYgMy4xNzQtMi4wNSAzLjE3NC0yLjQzMlYzLjE4MnoiLz48cGF0aCBmaWxsPSIjRkZGIiBkPSJNOS45ODMgMTcuNDg2cy44NzUtMS4wOCAzLjE0Ni0xLjQzMmMyLjYwMy0uNCAyLjUyNi0xLjYyMiAyLjUyNi0xLjY4M1Y4LjUxTDQuMzEgOC41MXY1Ljg2YzAgLjA2My0uMDc1IDEuMjg1IDIuNTI3IDEuNjg1IDIuMjcyLjM1IDMuMTQ2IDEuNDMgMy4xNDYgMS40MyIvPjxwYXRoIGZpbGw9IiNENTBBMEEiIGQ9Ik03LjMzOCAxMi43OTN2LTIuNzg2bC0uMzUtLjE5N3YtLjcyNWgxLjU5NHYuNzI1bC0uMzMzLjE5N3Y1LjY4NmwtLjg1My0uMjU1LTEuMjMtMy42MzN2Mi4zOTNsLjM5LjN2Ljc0bC0xLjcxLS40MzZ2LS42MjdsLjM5LS4xNTZ2LTQuMDFsLS40LS4ydi0uNzI1aDEuMjk1TTEwLjI3MyAxNS4zNDRsLjM0LjQwN3YuNzI1bC0xLjY5My0uNjMzdi0uNjEzbC4zNzUtLjE1NnYtNS4wNjdsLS4zNzItLjE5di0uNzMyaDIuOTR2MS40NzNoLS42NDdsLS4xOTUtLjYwNGgtLjc0N3YxLjdoLjU2bC4yMi0uMzJoLjQ1MnYxLjUxaC0uNDVsLS4yMTQtLjMwNmgtLjU2N00xMi4xNDMgMTUuNTk4di0uNzIzbC40Mi0uMzQ1di00LjUyM2wtLjM2LS4xOXYtLjczMmgxLjY5M3YuNzMzbC0uMzMuMTl2NC4yNDJsLjcyOC0uMTk2LjEzNy0xLjExMmguN3YxLjg2Ii8+PHBhdGggZmlsbD0iI0ZGRiIgZD0iTTQuNjA1IDcuMzA4bC0uNTEyLS4zODVoLjYyOGwuMjA3LS41OTMuMjA4LjU5M2guNjI2bC0uNTEuMzg1LjE4Ny42MDUtLjUxLS4zNTgtLjUxLjM1OE02LjgzMyA3LjMwOGwtLjUxNS0uMzg1aC42MjhsLjIwNy0uNTkzLjIwOC41OTNoLjYyN2wtLjUxMy4zODUuMTkuNjA1LS41MS0uMzU4LS41MS4zNThNNC42MDUgNS4zbC0uNTEyLS4zODRoLjYyOGwuMjA3LS41OTQuMjA4LjU5NGguNjI2bC0uNTEuMzg1LjE4Ny42MDQtLjUxLS4zNi0uNTEuMzZNNi44MzMgNS4zbC0uNTE1LS4zODRoLjYyOGwuMjA3LS41OTQuMjA4LjU5NGguNjI3bC0uNTEzLjM4NS4xOS42MDQtLjUxLS4zNi0uNTEuMzZNMTUuNTUgNy45MTNsLS41MS0uMzU4LS41MS4zNTguMTktLjYwNS0uNTEyLS4zODVoLjYyNmwuMjA2LS41OTMuMjEuNTkzaC42MjZsLS41MTUuMzg1TTEzLjMyNiA3LjkxM2wtLjUxLS4zNTgtLjUxLjM1OC4xODctLjYwNS0uNTE0LS4zODVoLjYyNmwuMjEtLjU5My4yMDYuNTkzaC42MjdsLS41MTUuMzg1TTE1LjU1IDUuOTA0bC0uNTEtLjM2LS41MS4zNi4xOS0uNjAzLS41MTItLjM4NGguNjI2bC4yMDYtLjU5NC4yMS41OTRoLjYyNmwtLjUxNS4zODVNMTMuMzI2IDUuOTA0bC0uNTEtLjM2LS41MS4zNi4xODctLjYwMy0uNTE0LS4zODRoLjYyNmwuMjEtLjU5NC4yMDYuNTk0aC42MjdsLS41MTUuMzg1TTEwLjQ3MiA0Ljg2M2MtLjIyOC0uMTg3LS40ODUtLjMxLS43NTctLjM2OC4wNjUtLjA2My4xMzQtLjExNS4xOTItLjE2NC4zNC4wOC41Ny4yMzQuNzI1LjM2NS0uMDU1LjA1NS0uMTEuMTEyLS4xNi4xNjhtLS4zMy40Yy0uMjE3LS4xODctLjQ4LS4zMi0uNzgzLS4zOC4wNDUtLjA2LjEtLjEyNC4xNS0uMTguMjMuMDQuNTIyLjE2Ljc4LjM3LS4wNTMuMDY0LS4xMDIuMTI2LS4xNDguMTltLS4yOTYuNDE1Yy0uMjM1LS4xOTctLjUwOC0uMzE3LS43NzgtLjM3IDAgMCAuMDgyLS4xMzMuMTI4LS4yMDIuMzMuMDY1LjU5Ny4yMTguNzgyLjM3Ny0uMDQ3LjA2Ny0uMDkyLjEzMi0uMTMyLjE5NW0xLjU1Mi0xLjk5cy0uMjY3LjE0LS42MzcuNTAyYy4wODQuMDUuMTc4LjExNS4yMzIuMTYtLjA1Ny4wNS0uMTEzLjEwNC0uMTY3LjE1NC0uMjQtLjE5OC0uNDkyLS4zLS42ODUtLjM0OC4wNjQtLjA0NS4xMzMtLjA5Mi4yLS4xMzMuMTA0LjAyNC4yMDcuMDY3LjIwNy4wNjcuNDE4LS4zMi43OC0uNDU3Ljc4LS40NTdzLS4wNDItLjAyLS4xNTMtLjAyYy0xLjY0OC4wMjItMy4xNjUgMS4yNS0yLjg4IDMuMzU2LjAzNC4yMi4xMi42MjguMjMuODA1LjAzOC0uMzUuMTctMS4xMjQuNTYtMS45NTYtLjEzNy0uMDUtLjI1LS4wNy0uMjUtLjA3LjA0LS4wODMuMDk2LS4xOS4wOTYtLjE5LjI4OC4wNTUuNTQyLjE3Ny43NjQuMzUtLjA1Mi4wODYtLjA4OC4xNC0uMTE0LjE4OC0uMDgtLjA2My0uMTU3LS4xMTQtLjI0Mi0uMTYzLS40NC43NjctLjY0NCAxLjQ5My0uNzI4IDEuODcyLjAwNi4wMjIuMDUzLjAzNi4wOTMuMDMgMS44MDQtLjIzNSAyLjY1LTEuMTU0IDIuOTA1LTIuMTUyLjE3LS42NTQuMTE0LTEuMzM3LS4xMTItMS44OTYtLjAxNi0uMDQtLjA0Ni0uMTA1LS4wOTgtLjEiLz48L3N2Zz4=");background-repeat:no-repeat;position:absolute;width:20px;height:20px;margin:-2px 0 0 10px}.yvp-browser-mobile .yvp-nfl-branding-container .yvp-nfl-brand-span{background-image:url("data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIzMCIgaGVpZ2h0PSIzMCI+PHBhdGggZmlsbD0iI0ZGRiIgZD0iTTE1IDI5LjA5MnMuNjI0LTEuMDggMS4yMzQtMS42NjhjLjg2Mi0uODI3IDIuMDg0LTEuMzQ2IDMuNzM2LTEuNTg0IDIuMDczLS4zIDMuNTc2LTEgNC40NjMtMi4wNzIuNzE1LS44NzIuODIzLTEuNzQuODI1LTIuMTg0VjQuMTE0aC0uNjgzYy0uODguNjMtMi41NjggMS40OTMtNC43MzguOTU4QzE2LjA3NSA0LjE0OCAxNSAuOTA2IDE1IC45MDZzLTEuMDc2IDMuMjQtNC44MzcgNC4xNjZjLTIuMTczLjUzNS0zLjg2LS4zMy00Ljc0Mi0uOTZoLS42Nzh2MTcuNDcyYzAgLjQ0LjEwOCAxLjMxMi44MjUgMi4xODQuODg1IDEuMDcyIDIuMzg2IDEuNzcgNC40NiAyLjA3MiAxLjY1NS4yMzggMi44NzYuNzU3IDMuNzM4IDEuNTg4LjYzMy42MDggMS4yMzQgMS42NjQgMS4yMzQgMS42NjQiLz48cGF0aCBmaWxsPSIjMDEzNzY5IiBkPSJNMjQuNjQgNC43OTZzLTIuMDU2IDEuNi00Ljk1Ljg3NUMxNi4zMSA0LjgzIDE1IDIuMjk4IDE1IDIuMjk4cy0xLjMxMiAyLjUzLTQuNjkgMy4zNzRjLTIuODk3LjcyNS00Ljk1My0uODc0LTQuOTUzLS44NzR2MTYuNzg4YzAgLjU3LjI0IDIuOTkzIDQuNzU4IDMuNjQ2IDEuNzg2LjI2IDMuMTIuODMyIDQuMDc4IDEuNzU0LjM0NC4zMy42MDYuNjY2LjgwNS45NzguMi0uMzEyLjQ2LS42NDguODA4LS45NzguOTU2LS45MjIgMi4yOS0xLjQ5NCA0LjA3NC0xLjc1NCA0LjUyLS42NTIgNC43Ni0zLjA3NiA0Ljc2LTMuNjQ2VjQuNzk2eiIvPjxwYXRoIGZpbGw9IiNGRkYiIGQ9Ik0xNSAyNi4yNTNzMS4zMS0xLjYyMiA0LjcyLTIuMTQ3YzMuOTAzLS42IDMuNzg4LTIuNDMzIDMuNzg4LTIuNTI1di04Ljc5NGwtMTcuMDIuMDAydjguNzkyYzAgLjA5My0uMTEyIDEuOTI1IDMuNzkgMi41MjUgMy40MS41MjYgNC43MiAyLjE0OCA0LjcyIDIuMTQ4Ii8+PHBhdGggZmlsbD0iI0Q1MEEwQSIgZD0iTTExLjAzIDE5LjIxM3YtNC4xOGwtLjUyMy0uMjk1VjEzLjY1aDIuMzl2MS4wODhsLS41LjI5NXY4LjUzbC0xLjI3OC0uMzg0LTEuODQ3LTUuNDV2My41OWwuNTg2LjQ1MnYxLjExbC0yLjU2NS0uNjU3di0uOTRsLjU4Ni0uMjMydi02LjAxNWwtLjYtLjNWMTMuNjVoMS45NE0xNS40MzIgMjMuMDM4bC41MS42MXYxLjA4NmwtMi41MzgtLjk0OHYtLjkybC41Ni0uMjN2LTcuNjAzbC0uNTU2LS4yODN2LTEuMWg0LjQwOHYyLjIxaC0uOTY4bC0uMjk1LS45MDdoLTEuMTJ2Mi41NTJoLjg0bC4zMy0uNDg0aC42Nzd2Mi4yN2gtLjY3NmwtLjMyLS40NmgtLjg1Mk0xOC4yMzYgMjMuNDJ2LTEuMDg1bC42My0uNTE3di02Ljc4NWwtLjU0LS4yODN2LTEuMWgyLjU0MnYxLjFsLS40OTcuMjgzdjYuMzY0bDEuMDkzLS4yOTMuMjA3LTEuNjdoMS4wNXYyLjc5Ii8+PHBhdGggZmlsbD0iI0ZGRiIgZD0iTTYuOTMyIDEwLjk4NmwtLjc3LS41OGguOTQybC4zMS0uODg4LjMxMi44OWguOTRsLS43Ny41NzguMjgzLjkwNy0uNzY3LS41MzctLjc2NC41MzdNMTAuMjcyIDEwLjk4NmwtLjc3LS41OGguOTRsLjMxLS44ODguMzEyLjg5aC45NGwtLjc3LjU3OC4yODUuOTA3LS43NjctLjUzNy0uNzY0LjUzN002LjkzMiA3Ljk3NWwtLjc3LS41NzhoLjk0MmwuMzEtLjg5LjMxMi44OWguOTRsLS43Ny41NzguMjgzLjkwNS0uNzY3LS41NC0uNzY0LjU0TTEwLjI3MiA3Ljk3NWwtLjc3LS41NzhoLjk0bC4zMS0uODkuMzEyLjg5aC45NGwtLjc3LjU3OC4yODUuOTA1LS43NjctLjU0LS43NjQuNTRNMjMuMzQ4IDExLjg5M2wtLjc2NC0uNTM4LS43NjYuNTM4LjI4NC0uOTA3LS43Ny0uNTc4aC45NGwuMzEyLS44OS4zMS44OWguOTQybC0uNzcuNTc4TTIwLjAxIDExLjg5M2wtLjc2NC0uNTM4LS43NjcuNTM4LjI4NC0uOTA3LS43NzItLjU3OGguOTRsLjMxNC0uODkuMzEuODloLjk0bC0uNzcuNTc4TTIzLjM0OCA4Ljg4bC0uNzY0LS41NC0uNzY2LjU0LjI4NC0uOTA1LS43Ny0uNTc4aC45NGwuMzEyLS44OS4zMS44OWguOTQybC0uNzcuNTc4TTIwLjAxIDguODhsLS43NjQtLjU0LS43NjcuNTQuMjg0LS45MDUtLjc3Mi0uNTc4aC45NGwuMzE0LS44OS4zMS44OWguOTRsLS43Ny41NzhNMTUuNzMgNy4zMThjLS4zNDItLjI4LS43MjctLjQ2NC0xLjEzNS0uNTUyLjEtLjA5NC4yMDItLjE3Mi4yODgtLjI0Ny41MS4xMi44NTQuMzUgMS4wODguNTQ1LS4wOC4wODQtLjE2My4xNy0uMjQuMjUzbS0uNDkzLjU5OGMtLjMyNy0uMjgtLjcyNC0uNDgtMS4xNzUtLjU3LjA3LS4wODguMTUtLjE4NS4yMjgtLjI3LjM0My4wNi43ODIuMjQgMS4xNjcuNTU3LS4wOC4wOTYtLjE1Mi4xOS0uMjIuMjgzbS0uNDQ1LjYyNGMtLjM1My0uMjk1LS43NjMtLjQ3NS0xLjE2Ni0uNTUzIDAgMCAuMTIyLS4yMDIuMTkzLS4zMDQuNDkuMDk2Ljg5My4zMjcgMS4xNy41NjQtLjA3LjEtLjEzOC4yLS4xOTguMjkzbTIuMzI4LTIuOTgzcy0uNC4yMDgtLjk1Ni43NTNjLjEyNi4wNzQuMjY4LjE3LjM0OC4yNC0uMDg1LjA3Mi0uMTcuMTU0LS4yNS4yMy0uMzYtLjMtLjczOC0uNDUtMS4wMy0uNTIzLjA5Ny0uMDY3LjItLjEzOC4zMDItLjIuMTU2LjAzNy4zMS4xLjMxLjEuNjI3LS40NzggMS4xNy0uNjg2IDEuMTctLjY4NnMtLjA2Mi0uMDMtLjIzLS4wMjhjLTIuNDcuMDMzLTQuNzQ2IDEuODc2LTQuMzE4IDUuMDM0LjA0OC4zMzQuMTc2Ljk0NC4zNDMgMS4yMS4wNTQtLjUyNi4yNTItMS42ODcuODM4LTIuOTM0LS4yMDUtLjA3My0uMzc1LS4xMDMtLjM3NS0uMTAzLjA2Mi0uMTI3LjE0NS0uMjg2LjE0NS0uMjg2LjQzMy4wODIuODE0LjI2NSAxLjE0Ni41MjUtLjA3OC4xMjctLjEzMy4yMS0uMTcuMjgtLjExOC0uMDk0LS4yMzYtLjE3LS4zNjQtLjI0NC0uNjYgMS4xNS0uOTY1IDIuMjQtMS4wOSAyLjgwOC4wMDguMDM0LjA3OC4wNTMuMTM4LjA0NSAyLjcwNi0uMzUzIDMuOTczLTEuNzMgNC4zNTgtMy4yMy4yNTMtLjk4LjE3Mi0yLjAwNS0uMTY4LTIuODQ0LS4wMjQtLjA1Ny0uMDctLjE1Ni0uMTQ4LS4xNSIvPjwvc3ZnPg==");background-repeat:no-repeat;width:30px;height:30px}.yvp-nfl-branding-container .yvp-nfl-brand-logo{background-image:url("data:image/svg+xml;base64,PCFET0NUWVBFIHN2ZyBQVUJMSUMgIi0vL1czQy8vRFREIFNWRyAxLjEvL0VOIiAiaHR0cDovL3d3dy53My5vcmcvR3JhcGhpY3MvU1ZHLzEuMS9EVEQvc3ZnMTEuZHRkIiBbCgk8IUVOVElUWSBuc19leHRlbmQgImh0dHA6Ly9ucy5hZG9iZS5jb20vRXh0ZW5zaWJpbGl0eS8xLjAvIj4KCTwhRU5USVRZIG5zX2FpICJodHRwOi8vbnMuYWRvYmUuY29tL0Fkb2JlSWxsdXN0cmF0b3IvMTAuMC8iPgoJPCFFTlRJVFkgbnNfZ3JhcGhzICJodHRwOi8vbnMuYWRvYmUuY29tL0dyYXBocy8xLjAvIj4KCTwhRU5USVRZIG5zX3ZhcnMgImh0dHA6Ly9ucy5hZG9iZS5jb20vVmFyaWFibGVzLzEuMC8iPgoJPCFFTlRJVFkgbnNfaW1yZXAgImh0dHA6Ly9ucy5hZG9iZS5jb20vSW1hZ2VSZXBsYWNlbWVudC8xLjAvIj4KCTwhRU5USVRZIG5zX3NmdyAiaHR0cDovL25zLmFkb2JlLmNvbS9TYXZlRm9yV2ViLzEuMC8iPgoJPCFFTlRJVFkgbnNfY3VzdG9tICJodHRwOi8vbnMuYWRvYmUuY29tL0dlbmVyaWNDdXN0b21OYW1lc3BhY2UvMS4wLyI+Cgk8IUVOVElUWSBuc19hZG9iZV94cGF0aCAiaHR0cDovL25zLmFkb2JlLmNvbS9YUGF0aC8xLjAvIj4KXT48c3ZnIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgd2lkdGg9IjEwOS44OTYiIGhlaWdodD0iMTMuOTc4Ij48c3dpdGNoPjxmb3JlaWduT2JqZWN0IHJlcXVpcmVkRXh0ZW5zaW9ucz0iaHR0cDovL25zLmFkb2JlLmNvbS9BZG9iZUlsbHVzdHJhdG9yLzEwLjAvIiB4PSIwIiB5PSIwIiB3aWR0aD0iMSIgaGVpZ2h0PSIxIi8+PHBhdGggZmlsbC1ydWxlPSJldmVub2RkIiBjbGlwLXJ1bGU9ImV2ZW5vZGQiIGZpbGw9IiNmZmYiIGQ9Ik0xMDkuODk2IDEuMDI1bC0zLjY3OCAxMi45NWgtNS41OThsMS41NC01LjQ0Ny0zLjgyMyA0Ljc0MmgtMS44MjJsLTIuMTgtOC4zNWgtNC4zNmwuODktMy44OTZoOC4zMmwuODggNS4xMzggNC4yMzQtNS4xMzV2LS4wMDNoNS41OTV6TTg3LjEzIDEwLjIyYy0uNTY2IDEuODItMi41NTMgMy43NTUtNC40MTQgMy43NTVINzQuNDFjLTEuODYgMC0yLjkyLTEuOTM0LTIuMzU0LTMuNzU1bDEuMzI3LTQuMjc3aDUuODk0TDc3Ljk3IDkuODM3aDMuMjNsMS42Ni00Ljg4NmgtOS4xMmMuNjctMS42OSAyLjYyOC0zLjkyNSA0LjM5NC0zLjkyNWg4LjMwNmMxLjg2IDAgMi44NCAyLjI3IDIuMjc0IDQuMDlMODcuMTMgMTAuMjJ6TTcxLjM1MiA2LjY0Nkg2Ni4yNGwuNTY1LTEuNjc0aC0yLjczbC0xLjY1MyA0Ljg1aDIuNzNsLjQxMi0uOTI0aDUuMDg0bC0uNzYgMi40MjZjLS41NjYgMS44Mi0yLjIxNSAyLjY1LTQuMDc2IDIuNjVoLTYuNDdjLTEuODYgMC0yLjkyLTEuOTMzLTIuMzU0LTMuNzU0bDEuNTg0LTUuMTA1Yy41NjYtMS44MiAyLjA0LTQuMDkgNC43MTctNC4wOWg2LjA1NWMyLjAyNyAwIDMuMDQ1IDIuNDYgMi40OTYgNC4xODhsLS40OSAxLjQzM3ptLTIxLjY2IDcuMzNsMS4xNTUtNC45OThoNC41MUw1NC4yIDEzLjk3NmgtNC41MDh6bS01LjE3NS00Ljk5OGg0LjUwOGwtMS4xNTYgNC45OThoLS4zNDd2LjAwMmgtOC40OXYtLjAwNEgzNS4wM0wzOC4zNzYgMi42NWgtMS4zNGwuODEtMi42M2gxLjM0Vi4wMTZoNi40N0w0Mi4yNzYgMTFoMS43M2wuNTEyLTIuMDIyem0tOS4zNC00LjMxN2gtNC41OWwuNDIzLTEuNjYzaC0xMEwyMS42NDUuMDJoMTQuNjZsLS4wMS4wNDJoLjA0M2wtMS4xNiA0LjZ6TTEyLjI1IDEzLjk3Nkg3LjUwNEw2LjIxNiAyLjY1aC00LjE5bC44MS0yLjYzaDMuMDdWLjAxNmg2LjE0TDEzLjI2IDEwLjI2IDE2LjQwOC4wMTVoMy44MzhsLTQuMTU4IDEzLjk2SDEyLjI1ek01LjI5MyAzLjY3TDUuNiA2LjgzNGwtMi4xMjYgNy4xNEguMDJMMy4xMzUgMy42NjhoMi4xNTh6bTIyLjQ4LjMyNmwtLjY0MiAyLjQ2aDUuMThMMzEuNyA4Ljk5aC01LjM2bC0xLjUzMiA0Ljk4NWgtNi4wNDNsMy4wMS05Ljk4aDUuOTk4em02NS40OCAxLjg3N2wxLjAyIDQuMzg1LTEuMDAyIDMuNzE4aC00LjczNWwyLjM1Mi04LjEwM2gyLjM2NXoiLz48L3N3aXRjaD48L3N2Zz4=");background-repeat:no-repeat;width:110px;height:14px;display:block;position:absolute;margin-left:40px;margin-top:2px}.yvp-browser-mobile .yvp-nfl-branding-container .yvp-nfl-brand-logo{background-image:url("data:image/svg+xml;base64,PCFET0NUWVBFIHN2ZyBQVUJMSUMgIi0vL1czQy8vRFREIFNWRyAxLjEvL0VOIiAiaHR0cDovL3d3dy53My5vcmcvR3JhcGhpY3MvU1ZHLzEuMS9EVEQvc3ZnMTEuZHRkIiBbCgk8IUVOVElUWSBuc19leHRlbmQgImh0dHA6Ly9ucy5hZG9iZS5jb20vRXh0ZW5zaWJpbGl0eS8xLjAvIj4KCTwhRU5USVRZIG5zX2FpICJodHRwOi8vbnMuYWRvYmUuY29tL0Fkb2JlSWxsdXN0cmF0b3IvMTAuMC8iPgoJPCFFTlRJVFkgbnNfZ3JhcGhzICJodHRwOi8vbnMuYWRvYmUuY29tL0dyYXBocy8xLjAvIj4KCTwhRU5USVRZIG5zX3ZhcnMgImh0dHA6Ly9ucy5hZG9iZS5jb20vVmFyaWFibGVzLzEuMC8iPgoJPCFFTlRJVFkgbnNfaW1yZXAgImh0dHA6Ly9ucy5hZG9iZS5jb20vSW1hZ2VSZXBsYWNlbWVudC8xLjAvIj4KCTwhRU5USVRZIG5zX3NmdyAiaHR0cDovL25zLmFkb2JlLmNvbS9TYXZlRm9yV2ViLzEuMC8iPgoJPCFFTlRJVFkgbnNfY3VzdG9tICJodHRwOi8vbnMuYWRvYmUuY29tL0dlbmVyaWNDdXN0b21OYW1lc3BhY2UvMS4wLyI+Cgk8IUVOVElUWSBuc19hZG9iZV94cGF0aCAiaHR0cDovL25zLmFkb2JlLmNvbS9YUGF0aC8xLjAvIj4KXT48c3ZnIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgd2lkdGg9IjE1Ny4wNDIiIGhlaWdodD0iMjAuMDE1Ij48c3dpdGNoPjxmb3JlaWduT2JqZWN0IHJlcXVpcmVkRXh0ZW5zaW9ucz0iaHR0cDovL25zLmFkb2JlLmNvbS9BZG9iZUlsbHVzdHJhdG9yLzEwLjAvIiB4PSIwIiB5PSIwIiB3aWR0aD0iMSIgaGVpZ2h0PSIxIi8+PHBhdGggZmlsbC1ydWxlPSJldmVub2RkIiBjbGlwLXJ1bGU9ImV2ZW5vZGQiIGZpbGw9IiNmZmYiIGQ9Ik0xNTYuOTYgMS44NzdsLTUuMjU1IDE4LjEyNmgtNy45OTJsMi4xOTgtNy4zODQtNS40NiA2LjM0aC0yLjZsLTMuMTE0LTExLjgzaC02LjIyN2wxLjI3LTUuMjUyaDExLjg4bDEuMjU3IDcuMjUgNi4wNDctNy4yNDZ2LS4wMDVoNy45OTV6bS0zMi41MTMgMTMuMjRjLS44MDggMi42ODgtMy42NDUgNC44ODctNi4zMDIgNC44ODdoLTExLjg2Yy0yLjY2IDAtNC4xNzItMi4yLTMuMzY0LTQuODg3bDEuODk4LTYuMzEyaDguNDE2bC0xLjg2NiA1Ljc0N2g0LjYxbDIuMzc1LTcuMzc2aC0xMy4wMjZjLjk1OC0yLjUgMy43NTItNS4yOTggNi4yNzUtNS4yOThoMTEuODZjMi42NTcgMCA0LjA1NiAzLjAxOCAzLjI0NyA1LjcwNWwtMi4yNjQgNy41MzR6bS0yMi41My01LjI3NmgtNy4zMDJsLjgwOC0yLjYzMmgtMy45bC0yLjM2IDcuMzIyaDMuOWwuNTg3LTEuMzY1aDcuMjZsLTEuMDg0IDMuNThjLS44MSAyLjY4OC0zLjE2MyAzLjI1OC01LjgyIDMuMjU4aC05LjI0Yy0yLjY1NiAwLTQuMTctMi4yLTMuMzYyLTQuODg3bDIuMjY0LTcuNTMzYy44MDgtMi42ODggMi45MS01LjcwNSA2LjczNS01LjcwNWg4LjY1YzIuODkzIDAgNC4zNDggMy4zIDMuNTYyIDUuODVsLS42OTggMi4xMTN6TTcwLjk4NSAyMC4wMDdsMS42NS02LjcyMmg2LjQ0bC0xLjY1MiA2LjcyMmgtNi40Mzh6bS03LjM5LTYuNzJoNi40MzhsLTEuNjUgNi43MmgtLjQ5NXYuMDAzSDU1Ljc2NnYtLjAwN2gtNS43Mmw0Ljc4LTE2LjA1OGgtMS45MTJMNTQuMDcuMDY1aDEuOTFsLjAwNC0uMDFoOS4yMzhMNjAuMzk2IDE2LjI3aDIuNDY3bC43MzItMi45ODR6TTUwLjI1OCA2LjkxMkg0My43bC43MjQtMi45N2gtMTQuNjVMMzAuOTMuMDY3aDIwLjkzNmwtLjAxNC4wNmguMDZMNTAuMjYgNi45MTR6TTE3LjUxOCAyMGgtNi43ODJMOC45IDMuOTQ1SDIuOTE1TDQuMDcuMDY1aDQuMzg2di0uMDFoOC43N2wxLjcyOCAxNS4xMiA0LjUtMTUuMTJoNS40OGwtNS45NCAxOS45NDZoLTUuNDc3ek03LjU3OCA1LjQ1bC40NCA0LjY3My0zLjAzNyA5Ljg4SC4wNTNMNC40OTYgNS40NUg3LjU4em0zMi4zNDYtLjI3OGwtMS4yMTcgNC4wMzJoNy4zOTdsLS44NzMgMy43NGgtNy42NUwzNS40NSAyMGgtOC42M2w0LjQ3Ni0xNC44MjhoOC42M3ptOTMuMjY0IDMuNTNsMS40NTcgNi40Ny0xLjQzIDQuODMyaC02Ljc2NEwxMjkuODEgOC43aDMuMzh6Ii8+PC9zd2l0Y2g+PC9zdmc+");background-repeat:no-repeat;margin-left:50px;margin-top:2px;width:157px;height:20px}div.yvp-agegate-container{width:100%;height:100%;color:#fff;font-family:\'Helvetica Neue Regular\',\'Helvetica Neue\',helvetica,arial,sans-serif;position:absolute;background-color:#000;z-index:25}.yvp-agegate-container .yvp-agegate-info-wrapper{padding:5%}.yvp-agegate-info-wrapper{position:absolute;top:0}.yvp-agegate-container .yvp-agegate-title{font-size:20px;font-weight:normal;padding-bottom:2%;margin-bottom:2%;border-bottom:2px solid #5f33ff}.yvp-agegate-container.small .yvp-agegate-title{font-size:12px}.yvp-agegate-container.small .yvp-agegate-desc{font-size:10px}.yvp-agegate-container .yvp-agegate-action-wrapper{margin-top:4%}.yvp-agegate-container .yvp-agegate-date-input,p.yvp-agegate-input{display:inline}.yvp-agegate-container .yvp-agegate-date-input /*input*/{width:51px;border:none;color:#fff;height:31px;margin:0 8px 0 0;text-align:center;border-radius:0;background-color:rgba(204,204,204,0.7)}input.yvp-agegate-date-input.validate-error{border:1px solid #cc4a4a}.yvp-agegate-container.small .yvp-agegate-date-input /*input*/{height:27px;font-size:14px}.yvp-agegate-container.xsmall .yvp-agegate-date-input /*input*/{width:40px;height:22px;font-size:12px}.yvp-agegate-container .yvp-agegate-btn{padding:8px 20px;background-color:rgba(95,51,255,0.6);border:none;outline:none;color:#fff;font-family:\'Helvetica Neue Regular\',\'Helvetica Neue\',helvetica,arial,sans-serif;font-size:14px;cursor:pointer}.yvp-agegate-container.small .yvp-agegate-btn{padding:6px 11px;font-size:10px}.yvp-agegate-container.gatebday.narrow .yvp-agegate-btn{display:block;margin-top:8px}.yvp-agegate-container.gatebday.narrow.xsmall .yvp-agegate-btn{padding:7px 11px;display:inline-block;margin-top:0}.yvp-agegate-container .yvp-agegate-btn.disable{display:none}.yvp-agegate-container .yvp-agegate-icon{position:absolute;right:20px;bottom:20px;background-size:100%;display:inline-block;zoom:1}.yvp-agegate-container.small .yvp-agegate-icon{height:116px;width:116px}.yvp-agegate-container.xsmall .yvp-agegate-icon{display:none}.yvp-agegate-icon{background-image:url("data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxNTQiIGhlaWdodD0iMTU0IiB2aWV3Qm94PSItMSAtMSAxNTQgMTU0Ij48cGF0aCBmaWxsPSIjNzQ1NEZGIiBkPSJNNzYuMjIgMmMxOS43MDcgMCAzOC4yMzQgNy42NzUgNTIuMTcgMjEuNjFDMTQyLjMyNSAzNy41NDUgMTUwIDU2LjA3NCAxNTAgNzUuNzhjMCAxOS43MS03LjY3NSAzOC4yMzUtMjEuNjEgNTIuMTctMTMuOTM2IDEzLjkzNi0zMi40NjMgMjEuNjEtNTIuMTcgMjEuNjEtMTkuNzA2IDAtMzguMjM0LTcuNjc2LTUyLjE3LTIxLjYxUzIuNDQgOTUuNDg4IDIuNDQgNzUuNzhzNy42NzQtMzguMjM0IDIxLjYxLTUyLjE3QzM3Ljk4MyA5LjY3NSA1Ni41MSAyIDc2LjIyIDJtMC0yQzU2LjgyNiAwIDM3LjQzMiA3LjQgMjIuNjM1IDIyLjE5NmMtMjkuNTk0IDI5LjU5NC0yOS41OTQgNzcuNTc2IDAgMTA3LjE2OCAxNC43OTcgMTQuNzk4IDM0LjE5IDIyLjE5NiA1My41ODQgMjIuMTk2czM4Ljc4Ni03LjM5OCA1My41ODMtMjIuMTk2YzI5LjU5Ni0yOS41OTMgMjkuNTk2LTc3LjU3NCAwLTEwNy4xNjhDMTE1LjAwNyA3LjQgOTUuNjEzIDAgNzYuMjIgMHoiIG9wYWNpdHk9Ii43Ii8+PHBhdGggZmlsbD0ibm9uZSIgc3Ryb2tlPSIjNzQ1NEZGIiBzdHJva2Utd2lkdGg9IjUiIHN0cm9rZS1taXRlcmxpbWl0PSIxMCIgZD0iTTc1Ljk3NSAxMTIuMDF2MTIuMDA2TTc1LjcgOTYuNjA0VjMxLjY4NyIvPjwvc3ZnPg==");height:43%;width:24%}.yvp-agegate-back-image{opacity:.4;display:block;width:100%;height:auto}.yvp-start-screen{z-index:21;}.yvp-start-screen .yvp-start-screen-image{display:block;width:100%;height:auto}.yvp-start-screen .yvp-start-screen-provider{font-size:91%;font-weight:normal;margin-bottom:5px}.yvp-start-screen .yvp-start-screen-title{font-weight:bold;font-size:100%;margin-bottom:3px;width:100%;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.yvp-start-screen .yvp-start-screen-description{-webkit-font-smoothing:antialiased;font-weight:200;font-size:85%;letter-spacing:.07em;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.yvp-start-screen .yvp-start-screen-bar-wrapper{position:absolute;top:0;left:0;width:100%;height:100%;background-color:transparent;-webkit-transition:all .3s ease-in-out;-moz-transition:all .3s ease-in-out;-o-transition:all .3s ease-in-out;transition:all .3s ease-in-out}.yvp-start-screen:hover .yvp-start-screen-bar-wrapper{background-color:rgba(0,0,0,0.4)}.yvp-start-screen .yvp-start-screen-bar{position:absolute;width:96%;min-height:30px;max-height:70px;bottom:0;color:#fff;overflow:hidden;padding:10px 2%;text-shadow:#000 0 1px 3px;background-image:-webkit-linear-gradient(top, transparent, rgba(0,0,0,0.7));background-image:-o-linear-gradient(top, transparent, rgba(0,0,0,0.7));background-image:linear-gradient(top, transparent, rgba(0,0,0,0.7))}.yvp-start-screen .yvp-start-screen-button{position:absolute;left:50%;top:50%;width:90px;height:90px;background-image:url("data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iODgiIGhlaWdodD0iODgiIHZpZXdCb3g9IjAgMCA4OCA4OCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48ZGVmcz48bGluZWFyR3JhZGllbnQgeDE9IjIuMDY2JSIgeTE9Ijk2Ljc1MSUiIHgyPSI5NS42NTklIiB5Mj0iMi45NjklIiBpZD0iYSI+PHN0b3Agc3RvcC1jb2xvcj0iIzZEMDBGNiIgb2Zmc2V0PSIwJSIvPjxzdG9wIHN0b3AtY29sb3I9IiMwMDNBQkMiIG9mZnNldD0iMTAwJSIvPjwvbGluZWFyR3JhZGllbnQ+PC9kZWZzPjxnIGZpbGw9Im5vbmUiIGZpbGwtcnVsZT0iZXZlbm9kZCI+PHBhdGggZD0iTTEyLjY3NiA3Ny4zNzZjMy45ODMgMy42MDggOC42NjcgNi4yOCAxNC4wMjcgOC4wMTdDMzIuMDc4IDg3LjEyNSAzNy44OSA4OCA0NC4xNjMgODhjNi4xNjQgMCAxMS45MzQtLjg3NSAxNy4yOTYtMi42MDcgMi4xNTQtLjY5NCA0LjE4Ni0xLjU0NyA2LjExNi0yLjU0MyAyLjg4NC0xLjQ5IDUuNTMtMy4zMTIgNy45MTYtNS40NzQgMy45OS0zLjYwNyA3LjA5Ny04LjE4MyA5LjMzLTEzLjcwN0M4Ny4wNSA1OC4xMzYgODguMTY4IDUxLjU4IDg4LjE2OCA0NGMwLTcuNTg2LTEuMTE4LTE0LjE0LTMuMzQ2LTE5LjY3LTIuMjMzLTUuNTMtNS4zNC0xMC4xLTkuMzMtMTMuNzA1LTMuOTg1LTMuNjE3LTguNjYtNi4yODUtMTQuMDMzLTguMDJDNTYuMDk2Ljg3IDUwLjMyNiAwIDQ0LjE2MiAwYy02LjI3MyAwLTEyLjA4NS44NjgtMTcuNDYgMi42MDYtMS43NDMuNTYtMy40MTIgMS4yMzYtNS4wMSAyLjAwNS0zLjMyIDEuNTgzLTYuMzMgMy41NzgtOS4wMTcgNi4wMTVDOC42ODggMTQuMjMgNS41NzggMTguOCAzLjM0NiAyNC4zMyAxLjExNiAyOS44NiAwIDM2LjQxNCAwIDQ0YzAgNy41ODIgMS4xMTcgMTQuMTM3IDMuMzQ2IDE5LjY3IDIuMjMyIDUuNTIzIDUuMzQyIDEwLjEgOS4zMyAxMy43MDZ6IiBmaWxsLW9wYWNpdHk9Ii42NSIgZmlsbD0idXJsKCNhKSIvPjxwYXRoIGQ9Ik0zNi43MyA1OWgtLjA2NmMtLjkyIDAtMS42NjQtLjc0Mi0xLjY2NC0xLjY1NlYzMC42NTZjMC0uOTE1Ljc0LTEuNjU2IDEuNjY0LTEuNjU2LjAzIDAgLjA2IDAgLjA5LjAwMi4zOC0uMDczLjc4OC0uMDE0IDEuMTUyLjE5NmwyMi42MjIgMTMuMDZjLjc5OC40NiAxLjA3NSAxLjQ3NC42MTMgMi4yNzYtLjAyMy4wNC0uMDQ4LjA4LS4wNzUuMTE4LS4xMzcuMjctLjM1LjUwMy0uNjMuNjdsLTIyLjQ0IDEzLjQ4NGMtLjM5NS4yNC0uODUuMjk1LTEuMjY1LjE5M3oiIGZpbGw9IiNGRkYiLz48L2c+PC9zdmc+");background-color:transparent;background-position:50% 50%;background-repeat:no-repeat;background-size:100%;border-radius:0;margin:-45px 0 0 -45px}div.yvp-feedback-btn{position:absolute;background:#7f6af6;color:#fff;font-size:11px;font-weight:100;padding:3px;overflow:hidden;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;opacity:.8;}div.yvp-feedback-btn:hover{opacity:1}.yvp-browser-mobile div.yvp-feedback-btn{font-size:10px}.yvp-end-screen{position:absolute;font-family:HelveticaNeue,Helvetica,Arial,sans-serif;color:#fff;text-align:center;box-sizing:border-box;}.yvp-end-screen.yvp-replay-only .yvp-metadata{display:none}.yvp-end-screen-tile{position:relative;width:50%;height:50%;background-repeat:no-repeat;background-size:cover;box-sizing:border-box;cursor:pointer;float:left;padding:5px;}.yvp-end-screen-tile .yvp-gradient{position:absolute;top:0;left:0;width:100%;height:100%;background-image:-webkit-linear-gradient(top, rgba(255,0,0,0) 0%, rgba(0,0,0,0.6) 100%);background-image:-o-linear-gradient(top, rgba(255,0,0,0) 0%, rgba(0,0,0,0.6) 100%);background-image:linear-gradient(top, rgba(255,0,0,0) 0%, rgba(0,0,0,0.6) 100%)}.yvp-end-screen-tile .yvp-overlay{position:relative;top:50%;width:100px;font-size:13px;margin:-23px auto 0;overflow:hidden;}.yvp-end-screen-tile .yvp-overlay .yvp-replay-button{display:block;width:39px;height:43px;background-color:transparent;background-image:url("data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHhtbDpzcGFjZT0icHJlc2VydmUiIGhlaWdodD0iNDIuNXB4IiB2aWV3Qm94PSIwIDAgMzguNSA0Mi41IiB3aWR0aD0iMzguNXB4IiB4bWxuczp4bGluaz0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluayIgZW5hYmxlLWJhY2tncm91bmQ9Im5ldyAwIDAgMzguNSA0Mi41Ij4KPHBhdGggZD0ibTEuNTc4IDIzLjAzNmMwIDkuNzM0IDcuODkgMTcuNjI0IDE3LjYyMyAxNy42MjQgOS43MzIgMCAxNy42MjMtNy44OSAxNy42MjMtMTcuNjI0IDAtOS43MzMtNy44OTEtMTcuNjIzLTE3LjYyMy0xNy42MjMtMS4wMjggMC0yLjAzNCAwLjA5NC0zLjAxNCAwLjI2MnYtNC4xMDVsLTYuNTg0IDYuNTk4IDYuNTg0IDYuNjExdi00LjEwNmMwLjk2Ny0wLjIzNiAxLjk3Ni0wLjM2NCAzLjAxNC0wLjM2NCA3LjAxOCAwIDEyLjcyOCA1LjcxIDEyLjcyOCAxMi43MjggMCA3LjAxOS01LjcxIDEyLjcyOS0xMi43MjggMTIuNzI5cy0xMi43MjktNS43MTEtMTIuNzI5LTEyLjczaC00Ljg5NHoiIGZpbGw9IiNmZmYiLz4KPC9zdmc+Cg==");cursor:pointer;margin:auto}.yvp-end-screen-tile .yvp-overlay .yvp-play-button{width:33px;height:23px;background-color:transparent;background-image:url("data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHhtbDpzcGFjZT0icHJlc2VydmUiIGhlaWdodD0iMjIuODI4cHgiIHZpZXdCb3g9IjAgMCAzMS45MDEgMjIuODI4IiB3aWR0aD0iMzEuOTAxcHgiIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIiBlbmFibGUtYmFja2dyb3VuZD0ibmV3IDAgMCAzMS45MDEgMjIuODI4Ij4KCTxwYXRoIGQ9Im0wLjE0NiA0LjQzOGMwLTIuMzIxIDEuODU5LTQuMjA1IDQuMTU0LTQuMjA1IDAgMCAxMS40NzMtMC41MjMgMjMuMjI5IDAgMi4yOTQgMCA0LjE1NSAxLjg4NCA0LjE1NSA0LjIwNSAwIDAgMC40ODYgNi43OTcgMCAxNC4wMzkgMCAyLjMyMi0xLjg2MSA0LjIwMy00LjE1NSA0LjIwMyAwIDAtMTEuODA0IDAuMzM0LTIzLjIyOSAwLTIuMjk1IDAtNC4xNTQtMS44ODEtNC4xNTQtNC4yMDMgMCAwLTAuMzMtMy4zNiAwLTE0LjAzOXoiIGZpbGw9IiMzMjRGRTEiLz4KCTxwb2x5Z29uIHBvaW50cz0iMjEuMDk4IDExLjQxNCAxMy4wNyAxNS44MDcgMTMuMDcgNy4wMiIgZmlsbD0iI2ZmZiIvPgo8L3N2Zz4K");background-position:0 0,0 0;background-repeat:no-repeat;cursor:pointer}.yvp-end-screen-tile.yvp-replay .yvp-overlay{margin:-43px auto 0}.yvp-end-screen-tile .yvp-metadata{position:absolute;width:100%;height:35px;bottom:0;}.yvp-end-screen-tile .yvp-metadata .yvp-title{color:#fff;font-size:13px;line-height:14px;margin:16px 6px;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.yvp-1-grid .yvp-end-screen-tile{width:100%;height:100%}.yvp-error-icon{background-image:url("data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxNTQiIGhlaWdodD0iMTU0IiB2aWV3Qm94PSItMSAtMSAxNTQgMTU0Ij48ZyBmaWxsPSJub25lIiBzdHJva2U9IiM3NDU0RkYiIHN0cm9rZS13aWR0aD0iNSIgc3Ryb2tlLW1pdGVybGltaXQ9IjEwIj48cGF0aCBkPSJNMTEyLjc5NSA0MC40MTNsLTYyLjg1NyA2Mi44OE01MS43NDQgMTAxLjQ5bC0xMS4xIDExLjE1NiIvPjwvZz48ZyBmaWxsPSJub25lIiBzdHJva2U9IiM3NDU0RkYiIHN0cm9rZS13aWR0aD0iNSIgc3Ryb2tlLW1pdGVybGltaXQ9IjEwIj48cGF0aCBkPSJNMTEyLjg0IDExMi42MDdMNDkuOTYgNDkuNzVNNTEuNzY2IDUxLjU2TDQwLjYwNCA0MC40NTUiLz48L2c+PHBhdGggZmlsbD0iIzc0NTRGRiIgZD0iTTc2LjIyIDJjMTkuNzA3IDAgMzguMjM0IDcuNjc1IDUyLjE3IDIxLjYxQzE0Mi4zMjUgMzcuNTQ1IDE1MCA1Ni4wNzQgMTUwIDc1Ljc4YzAgMTkuNzEtNy42NzUgMzguMjM1LTIxLjYxIDUyLjE3LTEzLjkzNiAxMy45MzYtMzIuNDYzIDIxLjYxLTUyLjE3IDIxLjYxLTE5LjcwNiAwLTM4LjIzNC03LjY3Ni01Mi4xNy0yMS42MVMyLjQ0IDk1LjQ4OCAyLjQ0IDc1Ljc4czcuNjc0LTM4LjIzNCAyMS42MS01Mi4xN0MzNy45ODMgOS42NzUgNTYuNTEgMiA3Ni4yMiAybTAtMkM1Ni44MjYgMCAzNy40MzIgNy40IDIyLjYzNSAyMi4xOTZjLTI5LjU5NCAyOS41OTQtMjkuNTk0IDc3LjU3NiAwIDEwNy4xNjggMTQuNzk3IDE0Ljc5OCAzNC4xOSAyMi4xOTYgNTMuNTg0IDIyLjE5NnMzOC43ODYtNy4zOTggNTMuNTgzLTIyLjE5NmMyOS41OTYtMjkuNTkzIDI5LjU5Ni03Ny41NzQgMC0xMDcuMTY4QzExNS4wMDcgNy40IDk1LjYxMyAwIDc2LjIyIDB6IiBvcGFjaXR5PSIuNyIvPjwvc3ZnPg==")}.yvp-error-screen{position:absolute;width:100%;height:100%;font-family:\'Helvetica Neue\',Helvetica,Arial,sans-serif;font-weight:normal;}.yvp-error-screen .yvp-error-screen-image{position:absolute;display:block;width:100%;height:100%}.yvp-error-screen .yvp-error-screen-background{position:absolute;height:100%;width:100%;background-image:-webkit-linear-gradient(210deg, rgba(0,0,0,0.4), #000);background-image:-o-linear-gradient(210deg, rgba(0,0,0,0.4), #000);background-image:linear-gradient(210deg, rgba(0,0,0,0.4), #000)}.yvp-error-screen .yvp-error-header{position:absolute;top:5%;left:5%;display:inline-block;width:90%;font-size:18px;}.smallscreen .yvp-error-screen .yvp-error-header,.verysmallscreen .yvp-error-screen .yvp-error-header{font-size:14px}.yvp-error-screen .yvp-error-header .yvp-error-title{color:rgba(255,255,255,0.6);overflow:hidden;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;}.yvp-browser-mobile .yvp-error-screen .yvp-error-header .yvp-error-title{font-size:14px}.yvp-error-screen .yvp-error-header .yvp-error-divider{position:relative;height:2px;margin-top:5px;bottom:0;background-color:rgba(115,0,255,0.8)}.yvp-error-screen .yvp-error-desc{position:absolute;width:80%;top:15%;left:5%;color:rgba(255,255,255,0.6);font-size:16px;line-height:22px;letter-spacing:0;}.yvp-error-screen .yvp-error-desc a:link{color:rgba(255,255,255,0.6)}.yvp-error-screen .yvp-error-desc a:visited{color:rgba(255,255,255,0.6)}.yvp-error-screen .yvp-error-desc a:active{color:rgba(115,0,255,0.8)}.smallscreen .yvp-error-screen .yvp-error-desc,.verysmallscreen .yvp-error-screen .yvp-error-desc{top:18%;font-size:12px;line-height:14px}.yvp-browser-mobile .yvp-error-screen .yvp-error-desc{top:16%;font-size:12px;line-height:14px}.yvp-error-screen .yvp-error-desc .yvp-browser-refresh{display:block;padding-top:10px;}.yvp-browser-mobile .yvp-error-screen .yvp-error-desc .yvp-browser-refresh{font-size:12px;line-height:14px}.yvp-error-screen .yvp-error-desc .yvp-error-flash-download-wrapper{display:block;padding-top:10px;background-color:transparent;cursor:pointer}.yvp-error-screen .yvp-error-desc .yvp-error-flash-download-icon{display:block;width:30%;height:25%;margin-top:10px;background-repeat:no-repeat;}.yvp-browser-mobile .yvp-error-screen .yvp-error-desc .yvp-error-flash-download-icon{visibility:hidden}.yvp-error-screen .yvp-error-debug{position:absolute;left:5%;font-size:11px;font-weight:normal;padding:3px;overflow:hidden;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;}.yvp-browser-mobile .yvp-error-screen .yvp-error-debug{font-size:10px}.yvp-error-screen .yvp-error-code{bottom:45px;color:rgba(255,255,255,0.6);display:inline-block}.yvp-error-screen .yvp-error-guid{bottom:30px;color:rgba(255,255,255,0.4)}.yvp-error-screen .yvp-error-sessionId{bottom:15px;color:rgba(255,255,255,0.4)}.yvp-error-screen .yvp-error-feedback-btn{bottom:65px;left:5%}.yvp-error-screen .yvp-error-indicator{background-repeat:no-repeat;background-size:100%;position:absolute;bottom:15px;right:5%;padding:3px;height:46%;width:24%;opacity:0;-webkit-animation-name:fadeInOut;animation-name:fadeInOut;-webkit-animation-duration:2s;-moz-animation-duration:2s;animation-duration:2s}.yvp-opensimsim{display:none;position:absolute;z-index:100;background-color:rgba(0,0,0,0.6);width:100%;height:100%;color:rgba(255,255,255,0.8);overflow-x:scroll;-webkit-user-select:text;-moz-user-select:text;-ms-user-select:text;user-select:text;}.yvp-opensimsim .yvp-close-btn{display:block;position:absolute;top:10px;right:10px;width:27px;height:27px;background:url("data:image/svg+xml;base64,PHN2ZyB2ZXJzaW9uPSIxLjEiIGlkPSJMYXllcl8xIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIiB4PSIwcHgiIHk9IjBweCIKICAgIHdpZHRoPSIxMHB4IiBoZWlnaHQ9IjEwcHgiIHZpZXdCb3g9IjAgMCAxMCAxMCIgZW5hYmxlLWJhY2tncm91bmQ9Im5ldyAwIDAgMTAgMTAiIHhtbDpzcGFjZT0icHJlc2VydmUiPgo8cG9seWdvbiBmaWxsPSIjQ0NDQ0NDIiBwb2ludHM9IjEwLDEuNTAyIDguNDk4LDAgNSwzLjQ5OSAxLjUwMiwwLjAwMSAwLDEuNTAzIDMuNDk4LDUgMCw4LjQ5OCAxLjUwMiwxMCA1LDYuNTAyIDguNDk4LDEwIDEwLDguNDk4IAogICAgNi41MDIsNSAiLz4KPC9zdmc+Cg==") no-repeat center center;cursor:pointer;z-index:10;opacity:.8;}.yvp-opensimsim .yvp-close-btn:hover{opacity:1}.yvp-opensimsim .yvp-opensimsim-feedback-btn{top:12px;right:6%;z-index:1;font-weight:bold;padding:5px;text-align:center;cursor:pointer}.yvp-opensimsim .yvp-opensimsim-info{font-size:10px;margin-left:20px;margin-right:20px;position:relative;}.yvp-opensimsim .yvp-opensimsim-info .yvp-opensimsim-title{color:#714fff;padding-top:20px;padding-bottom:10px}.yvp-opensimsim .yvp-opensimsim-info .yvp-opensimsim-graphs{width:100%;height:80px;margin-bottom:25px;}.yvp-opensimsim .yvp-opensimsim-info .yvp-opensimsim-graphs .yvp-opensimsim-graph{float:left;width:150px;}.yvp-opensimsim .yvp-opensimsim-info .yvp-opensimsim-graphs .yvp-opensimsim-graph div{margin-bottom:5px}.yvp-opensimsim .yvp-opensimsim-info .yvp-profile-btn{padding-top:20px;color:#fff;margin-bottom:20px;font-size:14px;cursor:pointer;}.yvp-opensimsim .yvp-opensimsim-info .yvp-profile-btn:hover{text-decoration:underline}.yvp-browser-tv .yvp-opensimsim-config{position:absolute;top:0;right:0}.yvp-feedback-screen{display:none;position:absolute;z-index:150;background-color:#000;width:100%;height:100%;color:#ccc;overflow-x:scroll;-webkit-user-select:text;-moz-user-select:text;-ms-user-select:text;user-select:text;}.yvp-feedback-screen .yvp-feedback-screen-close-btn{display:block;position:absolute;top:10px;right:10px;width:27px;height:27px;background:url("data:image/svg+xml;base64,PHN2ZyB2ZXJzaW9uPSIxLjEiIGlkPSJMYXllcl8xIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIiB4PSIwcHgiIHk9IjBweCIKICAgIHdpZHRoPSIxMHB4IiBoZWlnaHQ9IjEwcHgiIHZpZXdCb3g9IjAgMCAxMCAxMCIgZW5hYmxlLWJhY2tncm91bmQ9Im5ldyAwIDAgMTAgMTAiIHhtbDpzcGFjZT0icHJlc2VydmUiPgo8cG9seWdvbiBmaWxsPSIjQ0NDQ0NDIiBwb2ludHM9IjEwLDEuNTAyIDguNDk4LDAgNSwzLjQ5OSAxLjUwMiwwLjAwMSAwLDEuNTAzIDMuNDk4LDUgMCw4LjQ5OCAxLjUwMiwxMCA1LDYuNTAyIDguNDk4LDEwIDEwLDguNDk4IAogICAgNi41MDIsNSAiLz4KPC9zdmc+Cg==") no-repeat center center;cursor:pointer;z-index:10;opacity:.8;}.yvp-feedback-screen .yvp-feedback-screen-close-btn:hover{opacity:1}.yvp-feedback-screen .yvp-feedback-screen-info{font-size:10px;margin-top:0;margin-right:20px;margin-left:20px;height:100%;}.yvp-feedback-screen .yvp-feedback-screen-info .yvp-feedback-screen-title{font-size:18px;color:#ccc;display:inline-block;padding-top:10px;padding-bottom:7px}.yvp-feedback-screen .yvp-feedback-screen-info .yvp-feedback-screen-response{color:#ccc;padding-top:20px;padding-bottom:5px;font-size:14px;margin-left:0}.yvp-feedback-screen .yvp-feedback-screen-info .yvp-feedback-screen-refid{color:#ccc;padding-top:0;padding-bottom:0;margin-left:0;font-size:10px}.yvp-feedback-screen .yvp-feedback-screen-info .yvp-feedback-screen-text{box-sizing:border-box;margin-top:10px;margin-bottom:10px;overflow:auto;resize:none;width:100%;height:105px;border:1px solid #ccc;opacity:.8;padding:5px;color:#000}.yvp-feedback-screen .yvp-feedback-screen-info .yvp-feedback-screen-button-container{text-align:right}.yvp-feedback-screen .yvp-feedback-screen-info .yvp-feedback-screen-btn{display:inline-block;background-color:#7f6af6;color:#ccc;cursor:pointer;font-size:12px;text-align:center;padding:5px;opacity:.8;}.yvp-feedback-screen .yvp-feedback-screen-info .yvp-feedback-screen-btn:hover{opacity:1}.yvp-feedback-screen .yvp-feedback-screen-info .yvp-feedback-screen-disclaimer{position:absolute;bottom:10px;padding-right:10px}.yvp-anim-rotate{-webkit-animation:yvp-anim-rotate-clockwise 2.1s linear infinite;-moz-animation:yvp-anim-rotate-clockwise 2.1s linear infinite;animation:yvp-anim-rotate-clockwise 2.1s linear infinite;}.yvp-anim-rotate.yvp-anim-faster{-webkit-animation-duration:.9s;-moz-animation-duration:.9s;animation-duration:.9s}.yvp-anim-rotate.yvp-anim-rotate-reverse{-webkit-animation-name:yvp-anim-rotate-anticlockwise;animation-name:yvp-anim-rotate-anticlockwise}.yvp-main .yvp-tooltip{display:inline-block;position:absolute;}.yvp-main .yvp-tooltip:hover{text-decoration:none;}.yvp-main .yvp-tooltip:hover .yvp-tooltip-wrapper .yvp-tooltip-content{display:table}.yvp-main .yvp-tooltip .yvp-tooltip-wrapper{bottom:27px;margin:auto;position:absolute;display:block;z-index:5;text-align:center;left:-1000px;right:-1000px;}.yvp-main .yvp-tooltip .yvp-tooltip-wrapper .yvp-tooltip-content{background:#ccc;color:#3e3e3e;font-size:11px;display:none;margin:auto;padding:5px 11px;white-space:nowrap;text-align:center;pointer-events:none;}.yvp-main .yvp-tooltip .yvp-tooltip-wrapper .yvp-tooltip-content:before{border:solid;border-color:#ccc transparent;border-width:5px 3px 0;bottom:-5px;content:\'\';display:block;left:50%;margin-left:-3px;position:absolute;z-index:5}.yvp-main .yvp-tooltip .yvp-tooltip-wrapper.yvp-tooltip-pos-bottom{top:30px;bottom:0;}.yvp-main .yvp-tooltip .yvp-tooltip-wrapper.yvp-tooltip-pos-bottom .yvp-tooltip-content:before{border-width:0 3px 5px;top:-5px;bottom:0}.yvp-main .yvp-tooltip.yvp-tooltip-hidden .yvp-tooltip-wrapper{display:none}.yvp-ads-overlay{position:absolute;height:100%;width:100%;display:none;-webkit-transition:height .2s ease-in-out 2s;-moz-transition:height .2s ease-in-out 2s;-o-transition:height .2s ease-in-out 2s;transition:height .2s ease-in-out 2s}@-moz-keyframes fadeInOut{0%{opacity:0}45%{opacity:1}55%{opacity:1}100%{opacity:0}}@-webkit-keyframes fadeInOut{0%{opacity:0}45%{opacity:1}55%{opacity:1}100%{opacity:0}}@-o-keyframes fadeInOut{0%{opacity:0}45%{opacity:1}55%{opacity:1}100%{opacity:0}}@-ms-keyframes fadeInOut{0%{opacity:0}45%{opacity:1}55%{opacity:1}100%{opacity:0}}@keyframes fadeInOut{0%{opacity:0}45%{opacity:1}55%{opacity:1}100%{opacity:0}}@-webkit-keyframes yvp-anim-rotate-clockwise{0%{-webkit-transform:rotateZ(0);-moz-transform:rotateZ(0);-ms-transform:rotateZ(0);-o-transform:rotateZ(0);transform:rotateZ(0)}100%{-webkit-transform:rotateZ(360deg);-moz-transform:rotateZ(360deg);-ms-transform:rotateZ(360deg);-o-transform:rotateZ(360deg);transform:rotateZ(360deg)}}@keyframes yvp-anim-rotate-clockwise{0%{-webkit-transform:rotateZ(0);-moz-transform:rotateZ(0);-ms-transform:rotateZ(0);-o-transform:rotateZ(0);transform:rotateZ(0)}100%{-webkit-transform:rotateZ(360deg);-moz-transform:rotateZ(360deg);-ms-transform:rotateZ(360deg);-o-transform:rotateZ(360deg);transform:rotateZ(360deg)}}@-webkit-keyframes yvp-anim-rotate-anticlockwise{0%{-webkit-transform:rotateZ(0);-moz-transform:rotateZ(0);-ms-transform:rotateZ(0);-o-transform:rotateZ(0);transform:rotateZ(0)}100%{-webkit-transform:rotateZ(-360deg);-moz-transform:rotateZ(-360deg);-ms-transform:rotateZ(-360deg);-o-transform:rotateZ(-360deg);transform:rotateZ(-360deg)}}@keyframes yvp-anim-rotate-anticlockwise{0%{-webkit-transform:rotateZ(0);-moz-transform:rotateZ(0);-ms-transform:rotateZ(0);-o-transform:rotateZ(0);transform:rotateZ(0)}100%{-webkit-transform:rotateZ(-360deg);-moz-transform:rotateZ(-360deg);-ms-transform:rotateZ(-360deg);-o-transform:rotateZ(-360deg);transform:rotateZ(-360deg)}}'),
Object.defineProperty(i.prototype,"currentTime",{get:function(){var e=this;return e._renderer?e._renderer.getCurrentTime():0}}),i.prototype.setDefaultRendererType=function(){var e=this;return""!==e._rendererType||T.mobile||e._model.isHtmlEnforced()||!I.isFunction(u)?!0:e.setRendererType("flash")},i.prototype.setRendererType=function(e){var t=this;if(e!==t._rendererType){t._eventBus.publish(d.RENDERER_TYPE_CHANGE,e),t._renderer&&t._renderer.detachNode&&t._renderer.detachNode(),t._rendererType=e,t._renderer=t._renderers[e];var n;if(t._renderer)t._renderer.reattachNode&&t._renderer.reattachNode();else{var i=t._model.capabilities[t._model.playbackState.rendererType];T.tv?t._renderer=new y(t._eventBus,i,t._profiler,t._model):"flash"===e?t._renderer=new u(t._eventBus,t._model,t._profiler):"dash"===e?(n=t._renderers.html,t._renderer=new _(t._eventBus,t._model)):(n=t._renderers.dash,t._renderer=new v(t._eventBus,i,t._profiler,t._model)),t._renderers[e]=t._renderer,n?t._renderer.create(n.node):t._mainElem.appendChild(t._renderer.create()),"flash"===e?t._renderer.detectFlashBlockers(t._mainElem):t._model.ui.showControls&&(T.iphone||T.android)&&(t._renderer.node.controls=!0),t._renderer.mode=g.VIDEO}return!t._renderer.isReady||t._renderer.isReady()}},i.prototype._onRendererTypeChange=function(e){var t=this;"flash"===e?(L.classList(t._contentElem).remove("yvp-html"),L.classList(t._contentElem).add("yvp-flash")):(L.classList(t._contentElem).remove("yvp-flash"),L.classList(t._contentElem).add("yvp-html"))},i.prototype.waitForRenderer=function(e){var t=this;t._renderer.waitForReady(function(n){n&&t._handleRendererTimeout(),e(n)})},i.prototype.didRendererTimeOut=function(){var e=this;return e._renderer&&!!e._renderer.timedOut},i.prototype.render=function(){var e=this;if(e._contentElem=L.render(D,{isFujiView:!0}),e._mainElem=e._contentElem.querySelector(".yvp-main"),e.rootElem.appendChild(e._contentElem),L.classList(e._contentElem).add(e._viewSize),Object.keys(T).filter(function(e){return T[e]}).forEach(function(t){"os"===t&&(t=T.os),"ie"===t&&L.classList(e._contentElem).add("yvp-"+t.toLowerCase()+T[t]),L.classList(e._contentElem).add(Y+t.toLowerCase())}),I.isFunction(A)?e._loadingScreen=new S:e._model.ui.chromeless||I.isFunction(E)&&(e._loadingScreen=new E(e._eventBus)),e._loadingScreen&&e._mainElem.appendChild(e._loadingScreen.create()),e._model.ui.showSettingScreen||L.classList(e._contentElem).add("yvp-settings-disabled"),e._model.ui.showControls&&!T.iphone&&!T.android){e.controls=new o(e._eventBus,e,e._model);var t=e.controls.create();t.forEach(function(t){e._mainElem.appendChild(t)})}var n=function(t){e._mouseMoveHandler()},i=function(t){e._mouseOutHandler(t)};e.bindMouseEvents=function(){e._lastMouseMoveCoordinates={},e._contentElem.addEventListener("mousemove",function(t){e._lastMouseMoveCoordinates.x!==t.clientX&&e._lastMouseMoveCoordinates.y!==t.clientY&&(n(t),e._lastMouseMoveCoordinates.x=t.clientX,e._lastMouseMoveCoordinates.y=t.clientY)}),e._contentElem.addEventListener("mouseover",n),e._contentElem.addEventListener("mouseout",i)},T.tv||T.mobile||(e.bindMouseEvents(),e.unbindMouseEvents=function(){e._contentElem.removeEventListener("mousemove",n),e._contentElem.removeEventListener("mouseover",n),e._contentElem.removeEventListener("mouseout",i)}),I.isFunction(e._handleFullscreenChange.bind)&&(e._fullscreenChangeEventHandler=e._handleFullscreenChange.bind(e),k.forEach(function(t){document.addEventListener(t,e._fullscreenChangeEventHandler)})),e._openSimSim=new m(e._model,e._eventBus,e._profiler),e._mainElem.appendChild(e._openSimSim.create()),e._easterEgg=new s(function(){e._openSimSim.render()}),e._setRendererModeClasses(g.VIDEO),T.mobile||e._model.ui.chromeless||(e.adsOverlay=new C(e._eventBus,e),e._mainElem.appendChild(e.adsOverlay.create())),e._feedbackScreen=new f(e._model,e._eventBus,e),e._fujiSettings=e.getSettingsNode()},i.prototype.isRendererSet=function(){var e=this;return!!e._renderer},i.prototype.getRendererType=function(){var e=this;return e._rendererType},i.prototype.getContentNode=function(){var e=this;return e._contentElem},i.prototype.getOpenSimSim=function(){var e=this;return e._openSimSim},i.prototype.getMainElement=function(){var e=this;return e._mainElem},i.prototype.getCustomControlsNode=function(){var e=this;return e.rootElem.querySelector(".yvp-custom-controls")},i.prototype.getSettingsNode=function(){var e=this;return e.rootElem.querySelector(".yvp-fuji .yvp-settings-container")},i.prototype._setContentHeightForNFL=function(){var e=this;setTimeout(function(){e._setContentHeight()},700)},i.prototype._setContentHeight=function(){var e=this;if(e._contentElem&&e._mainElem){var t=T.mobile?e._nflBarDimensions.MOBILE.HEIGHT:e._nflBarDimensions.DESKTOP.HEIGHT,n=e._contentElem.offsetHeight-t+"px";e._mainElem.style.height=n}},i.prototype._loadNFLBranding=function(){var e=this;e._nflBranding||(e._setContentHeight(),e._nflBranding=new a(e._eventBus,e,e._model),e._contentElem.appendChild(e._nflBranding.create()))},i.prototype._removeNFLBranding=function(){var e=this;e._mainElem&&(e._mainElem.style.height="100%"),e._nflBranding&&(e._contentElem.removeChild(e._nflBranding.node),e._nflBranding.destroy(),e._nflBranding=null)},i.prototype.setKeyboardFocus=function(){var e=this;e._contentElem.focus()},i.prototype.updateViewOnEscPress=function(){var e=this;e._openSimSim&&e._openSimSim.isOpen()?e._openSimSim.close():e._feedbackScreen&&e._feedbackScreen.isOpen()?e._feedbackScreen.close():L.classList(e._contentElem).contains("yvp-show-settings")?e.toggleFujiSettings(null,!1):e.getFullscreen()&&e.setFullscreen(!1)},i.prototype.toggleSettings=function(e,t,n){var i=this;if(e&&(i._settingBtn=e),i._settingBtn||(i._settingBtn=i._contentElem.querySelector(".yvp-setting-btn")),i._settingBtn){var r="";L.classList(i._settingBtn).contains("selected")&&t!==!0||t===!1?(L.classList(i._contentElem).remove("yvp-show-settings"),L.classList(i._settingBtn).remove("selected"),r="OFF"):L.classList(i._settingBtn).contains("selected")&&t!==!0||(L.classList(i._contentElem).add("yvp-show-settings"),L.classList(i._settingBtn).add("selected"),r="ON"),n||i._eventBus.publish(d.CTRL_SETTINGS),i._eventBus.publish(d.SETTINGS_CONTROLLER_CHANGE,-1!==r.indexOf("ON"))}},i.prototype.toggleFujiSettings=function(e,t,n){var i=this;if(e&&(i._settingBtn=e),i._settingBtn||(i._settingBtn=i._contentElem.querySelector(".yvp-setting-btn")),i._settingBtn){var r="",o=i._settingBtn.querySelector(".yvp-setting-pointer");L.classList(i._settingBtn).contains("selected")&&t!==!0||t===!1?(L.classList(i._fujiSettings).remove("open"),L.classList(i._settingBtn).remove("selected"),L.classList(o).remove("open"),L.classList(i._contentElem).remove("yvp-settings-on"),r="OFF"):L.classList(i._settingBtn).contains("selected")&&t!==!0||(L.classList(i._fujiSettings).add("open"),L.classList(i._settingBtn).add("selected"),L.classList(o).add("open"),L.classList(i._contentElem).add("yvp-settings-on"),r="ON"),n||i._eventBus.publish(d.CTRL_SETTINGS),i._eventBus.publish(d.SETTINGS_CONTROLLER_CHANGE,-1!==r.indexOf("ON"))}},i.prototype.disableControls=function(){var e=this;L.classList(e._contentElem).add("yvp-disable-controls")},i.prototype.enableControls=function(){var e=this;L.classList(e._contentElem).remove("yvp-disable-controls")},i.prototype._setRendererModeClasses=function(e){var t=this;Object.keys(g).forEach(function(e){L.classList(t._contentElem).remove(U+g[e])}),L.classList(t._contentElem).add(U+e)},i.prototype._handleRendererTimeout=function(){var e=this;e.syncViewState(),"flash"===e._rendererType&&(T.safari||T.firefox?e._setViewState(O.BLOCKED):T.chrome&&e._eventBus.publish(d.INFO,L.createErr("R","S",N.E_INFO,N.INFO_CODES.E_PLAYER_FLASH_IS_BLOCKED_BLOCKERS_SCREEN)))},i.prototype.resetState=function(){var e=this;e._destroyStartScreen(),e._destroyEndScreen(),e._removeNFLBranding()},i.prototype.checkForNFLBranding=function(){var e=this,t=e._model.playlist.getCurrentItem(),n=t?t.provider:null;n&&"video.nflhighlights.com"===n.providerId&&e._loadNFLBranding()},i.prototype.syncViewState=function(){var e=this,t=e._model,n=t.playbackState,i=t.castState,r=i&&i.connected;M.log("setting view state: ",n);var o;e._setFlag(P.CASTING,r),r&&(i.mediaLoaded&&!i.paused?L.classList(e._contentElem).add("yvp-cast-playing"):L.classList(e._contentElem).remove("yvp-cast-playing"));var a=L.classList(e._contentElem).contains(B+P.LOADING);switch(e._setFlag(P.LOADING,n.loading),!a&&n.loading?e._eventBus.publish(d.API.LOADING_BEGIN):a&&!n.loading&&e._eventBus.publish(d.API.LOADING_END),n.state){case h.INIT:case h.WAITING:o=O.START_SCREEN;var s=e._model.playlist.getCurrentItem();e._nflBranding||e.checkForNFLBranding(),e._model.playback.continuousPlay&&0!==e._model.playlist.position||e._model.playback.autoplay||!s||!(s.hasThumbnail()&&!T.mobile||s.fetchFinished())||e._renderStartScreen();break;case h.VIDEO:var l,c=n.isVpaidAdPlaying();e._nflBranding||e.checkForNFLBranding(),l=c?g.VPAID:n.isAdPlaying()?g.AD:g.VIDEO,e._renderer.mode=l,e._setRendererModeClasses(l),o=O.VIDEO;var p=!n.paused;p?(e._setFlag(P.PLAYING,!0),e._setFlag(P.PAUSED,!1)):(e._setFlag(P.PLAYING,!1),e._setFlag(P.PAUSED,!0)),e._renderer.paused=!p,e._renderer.seeking=n.seeking;break;case h.END:e.endVideo(),e._removeNFLBranding(),n.criticalError?(e._model.ui.chromeless?e._eventBus.publish(d.API.PLAYER_ERROR,n.criticalError):e._renderErrorScreen(n.criticalError,e._model.playlist.getCurrentItem(),e._model.guid),o=O.ERROR):(e.isRendererSet()&&e._renderer.seek(0),e._prepEndScreen(n.previousItem),o=O.END_SCREEN)}e._currentViewState=o,e._setViewState(o),e._synchAriaState()},i.prototype.getCurrentViewState=function(){return this._currentViewState},i.prototype._setViewState=function(e){var t=this;Object.keys(O).forEach(function(e){L.classList(t._contentElem).remove(x+O[e])}),L.classList(t._contentElem).add(x+e)},i.prototype.setSelectedStreams=function(e){var t=this;t._renderer.setSelectedStreams(e)},i.prototype.play=function(e){var t=this;t._renderer.play(e)},i.prototype.pause=function(){var e=this;e._renderer.node.pause()},i.prototype._setFlag=function(e,t){var n=this;L.classList(n._contentElem).remove(B+e),t&&L.classList(n._contentElem).add(B+e)},i.prototype.renderAgeGateScreen=function(e,t){if(e){var n=this;n._ageGateScreen=new p(n._eventBus,t),n._mainElem.appendChild(n._ageGateScreen.create(e))}},i.prototype.destroyAgeGateScreen=function(){var e=this;e._ageGateScreen&&(e._mainElem.removeChild(e._ageGateScreen.node),e._ageGateScreen.destroy(),e._ageGateScreen=null)},i.prototype._renderStartScreen=function(){var e=this,t=null,n=null,i=e._model.YVAP;if(!e._startScreen){var r=function(){n&&(n(),clearTimeout(t),n=t=null),e._renderStartScreenImpl(e._model.playlist.getCurrentItem(),e._model)};T.mobile&&i&&i.accountId&&!i.adsReady?(n=e._eventBus.subscribe(d.ADS_READY,r,e),t=setTimeout(r,1e3)):r()}},i.prototype._renderStartScreenImpl=function(e,t){var n=this;n._startScreen||(t.ui.showStartScreen&&(n._startScreen=new b(n._eventBus),n._mainElem.appendChild(n._startScreen.create(e,t))),n._eventBus.publish(d.START_SCREEN_RENDERED))},i.prototype._destroyStartScreen=function(){var e=this,t=e._startScreen&&e._startScreen.node;t&&(e._mainElem.removeChild(t),e._startScreen.destroy(),e._startScreen=null)},i.prototype._prepEndScreen=function(e){var t,n=this;n._endScreen||(n._model.ui.showEndScreen?n._model.ui.showReplayOnlyEndScreen||!e.relatedVideoIds||e.relatedVideoIds.length<1?n._eventBus.publish(d.FETCH_MORE_RELATED_ITEMS,e,!1,function(t,i){n._renderEndScreen(e,i)}):(t=e.relatedVideoIds.map(function(e){return n._model.mediaStore.get(e)}),n._renderEndScreen(e,t)):n._renderEndScreen(e,[]))},i.prototype._renderEndScreen=function(e,t){var n=this;if(!n._endScreen){var i=t&&t.length>0;if(n._endScreen=new l(n._eventBus,n._model),n._endScreen){var r=i&&!n._model.ui.showReplayOnlyEndScreen?"endscreen":"endscreen-rp";n._mainElem.appendChild(n._endScreen.create(r,e)),i&&"endscreen-rp"!==r&&n._endScreen.renderPlaylist(e,t),n._startScreen||"endscreen-rp"!==r||n._renderStartScreen()}n._eventBus.publish(d.END_SCREEN_RENDERED),n._eventBus.publish(d.API.UI_INTERACT,{srcElement:"es-view"})}},i.prototype._destroyEndScreen=function(){var e=this;e._endScreen&&(e._mainElem.removeChild(e._endScreen._node),e._endScreen.destroy(),e._endScreen=null)},i.prototype._renderErrorScreen=function(e,t,n){var i=this;if(!i._errorScreen){i._errorScreen=new c(i._eventBus);var r=t?t.images.defaultThumbnail:"",o=L.getAssetUrl(i._model.isLocal(),i._model.version,R);if(i._model.isLocal())o="assets/flash_download_logo.svg";else{var a="https:"===document.location.protocol?"https://s.yimg.com":"http://l.yimg.com";o=a+"/rx/builds/"+i._model.version+"/assets/flash_download_logo.svg"}t=t?t:i._model.playlist.getCurrentItem(),i._mainElem.appendChild(i._errorScreen.create(e,n,t.videoSession,r,o)),i._eventBus.publish(d.API.UI_INTERACT,{srcElement:"err-view-"+e.category+"-"+e.subcategory})}},i.prototype._synchAriaState=function(){var e=this;e.controls&&e.controls.syncAriaState()},i.prototype.setStreams=function(e){var t=this;return t._renderer.setStreams(e)},i.prototype.adjustErrorMsg=function(){var e=this;document.querySelector(".verysmallscreen")&&e._errorScreen.adjustText(document.querySelector("#yvp-error-message"))},i.prototype.endVideo=function(){var e=this;e.isRendererSet()&&!e._renderer.ended&&(e._renderer.ended=!0,e._renderer.node.pause())},i.prototype.seek=function(e){var t=this;t._renderer.seek(e)},i.prototype.setQuality=function(e){var t=this;t._renderer.setQuality(e)},i.prototype.setFullscreen=function(e){var t=this,n=t._contentElem,i=n.requestFullscreen||n.webkitRequestFullscreen||n.mozRequestFullScreen||n.msRequestFullscreen,r=document.exitFullscreen||document.webkitExitFullscreen||document.mozCancelFullScreen||document.msExitFullscreen;e?(T.ios?t._renderer.node.webkitEnterFullscreen():T.android&&!t.controls?t._renderer.node.webkitEnterFullscreen():i?i.call(n):t._enterLightbox(),t._eventBus.publish(d.CTRL_FULLSCREEN,"ON")):(T.ios?t._renderer.node.webkitExitFullScreen():r?r.call(document):t._exitLightbox(),t._eventBus.publish(d.CTRL_FULLSCREEN,"OFF")),t._isFullScreen===e||i||r||(t._eventBus.publish(d.FULLSCREEN_CHANGE,e),t._isFullScreen=e),t._synchAriaState()},i.prototype._enterLightbox=function(){var e=this,t=document.querySelector("body");if(!L.classList(t).contains("yvp-lightbox")){for(var n=e._contentElem.parentNode;"BODY"!==n.nodeName;)L.classList(n).add("yvp-lightbox-ancestor"),n=n.parentNode;L.classList(t).add("yvp-lightbox")}},i.prototype._exitLightbox=function(){var e=this,t=document.querySelector("body");if(L.classList(t).contains("yvp-lightbox")){L.classList(t).remove("yvp-lightbox");for(var n=e._contentElem.parentNode;"BODY"!==n.nodeName;)L.classList(n).remove("yvp-lightbox-ancestor"),n=n.parentNode}},i.prototype.getFullscreen=function(){var e=this,t=document.fullscreenElement||document.mozFullScreenElement||document.webkitFullscreenElement||document.msFullscreenElement;return t===e._contentElem||L.classList(document.querySelector("body")).contains("yvp-lightbox")},i.prototype.toggleFullscreen=function(){var e=this;e.setFullscreen(!e.getFullscreen())},i.prototype.setVolume=function(e){var t=this;t._renderer.setVolume(e),t._eventBus.publish(d.API.PLAYER_VOLUME_CHANGE,e)},i.prototype._onMuteChange=function(e){var t=this;e?L.classList(t._contentElem).add("yvp-muted"):L.classList(t._contentElem).remove("yvp-muted")},i.prototype.setMute=function(e){var t=this;e=!!e,t.setVolume(e?0:t._model.playbackState.volume),t._eventBus.publish(d.API.PLAYER_MUTE_CHANGE,e)},i.prototype._mouseMoveHandler=function(){var e=this;e._autoHideControlsTimeout&&clearTimeout(e._autoHideControlsTimeout),L.classList(e._contentElem).remove("yvp-hide-controls"),e._objectOverlay&&L.classList(e._objectOverlay).remove("yvp-overlay-hide-cursor"),e._model.playbackState.seeking||e._model.playbackState.paused||(e._autoHideControlsTimeout=setTimeout(e._onAutoHideControls.bind(e),e._controlsHideTimeout)),e._eventBus.publish(d.CONTROLS_BAR_CHANGE,!0);var t=e.getFullscreen();t||e._eventBus.publish(d.CC.POSITION_FLOAT,!0)},i.prototype._mouseOutHandler=function(e){var t=this;if("mouseout"===e.type){t._autoHideControlsTimeout&&clearTimeout(t._autoHideControlsTimeout),L.classList(t._contentElem).add("yvp-hide-controls");var n=t.getFullscreen();n||t._eventBus.publish(d.CC.POSITION_FLOAT,!1)}},i.prototype._onAutoHideControls=function(){var e=this;e._objectOverlay=e._contentElem&&e._contentElem.querySelector(".yvp-object-overlay"),clearTimeout(e._autoHideControlsTimeout),e._autoHideControlsTimeout=null,L.classList(e._contentElem).add("yvp-hide-controls"),e._eventBus.publish(d.CONTROLS_BAR_CHANGE,!1)},i.prototype._onUpnextPgClick=function(){var e=this;e._autoHideControlsTimeout&&clearTimeout(e._autoHideControlsTimeout),e._model.playbackState.seeking||(e._autoHideControlsTimeout=setTimeout(e._onAutoHideControls.bind(e),e._controlsHideTimeout))},i.prototype._handleFullscreenChange=function(){var e=this,t=e.getFullscreen();t?L.classList(e._contentElem).add("yvp-state-fullscreen"):L.classList(e._contentElem).remove("yvp-state-fullscreen"),e._isFullScreen!==t&&(e._eventBus.publish(d.FULLSCREEN_CHANGE,t),e._isFullScreen=t)},i.prototype._onPlaybackProgress=function(){var e=this,t=e._model.playerDimension.width,n=e._model.playerDimension.height;(e.isStreamMode()||e.isMiniStreamMode())&&(t>j.SMALL_WIDTH||n>j.SMALL_HEIGHT)&&e._removeStreamMode(),t<j.VERY_SMALL_WIDTH||n<j.VERY_SMALL_HEIGHT?L.classList(e._contentElem).add("yvp-ministream"):(t<j.SMALL_WIDTH||n<j.SMALL_HEIGHT)&&L.classList(e._contentElem).add("yvp-stream")},i.prototype._removeStreamMode=function(){var e=this,t=e.getContentNode();L.classList(t).remove("yvp-ministream"),L.classList(t).remove("yvp-stream")},i.prototype.clearAutoHideTimeout=function(){var e=this;e._autoHideControlsTimeout&&clearTimeout(e._autoHideControlsTimeout)},i.prototype.setOverlayActive=function(e){var t=this;e?L.classList(t._contentElem).add("yvp-overlay-active"):L.classList(t._contentElem).remove("yvp-overlay-active")},i.prototype.destroyFullscreenChangeListeners=function(){var e=this;e._fullscreenChangeEventHandler&&k.forEach(function(t){document.removeEventListener(t,e._fullscreenChangeEventHandler)})},i.prototype.getClientVideoDimension=function(){var e=this;return{width:e._contentElem.clientWidth,height:e._contentElem.clientHeight}},i.prototype.getCurrentTime=function(){var e=this;return e._renderer.getCurrentTime()},i.prototype.isStreamMode=function(){var e=this;return e._viewSize===w.SMALL},i.prototype.isMiniStreamMode=function(){var e=this;return e._viewSize===w.VERY_SMALL},i.prototype.stopMedia=function(){var e=this;return e._renderer.stopMedia()},i.prototype.destroy=function(){var e=this;e.controls&&e.controls.destroy(),e._easterEgg&&e._easterEgg.destroy(),e._endScreen&&e._endScreen.destroy(),e._errorScreen&&e._errorScreen.destroy(),e._loadingScreen&&e._loadingScreen.destroy(),e._renderer&&e._renderer.destroy(),e._startScreen&&e._startScreen.destroy(),e.destroyAgeGateScreen(),e.destroyFullscreenChangeListeners(),e.unbindMouseEvents&&e.unbindMouseEvents(),e._ageGateController&&e._ageGateController.destroy(),e._openSimSim&&e._openSimSim.destroy(),e._feedbackScreen&&e._feedbackScreen.destroy(),e.rootElem.innerHTML=""}},{"../../lib":"bRhrlU","../../lib/logger":"IS9j5T","../../lib/user-agent":"ty5FFo","./easter-egg":19,"./error.js":20,"./event":"YJm+dH","./fujiviews/fuji-controls":27,"./fujiviews/fuji-loading-screen":30,"./fujiviews/fuji-playlist":33,"./fujiviews/fuji-start-screen":37,"./renderers/flash":58,"./renderers/html5-dash":60,"./renderers/html5-raw":61,"./renderers/html5-tv":145,"./renderers/modes":62,"./states":65,"./util":"jJTEqU","./views/ads-overlay":78,"./views/age-gate-screen":80,"./views/base.html":81,"./views/error-screen":83,"./views/feedback-screen":85,"./views/loading-screen":145,"./views/nfl-branding":87,"./views/open-sim-sim":89,"./views/tumblr-controls":145,"./views/tumblr-loading-screen":145,fs:145,"insert-css":160}],76:[function(e,t,n){var i=new(e("hogan.js/lib/template").Template)(function(e,t,n){var i=this;return i.b(n=n||""),i.b("<div>"),i.b("\n"+n),i.b("    <table border='1'>"),i.b("\n"+n),i.b("        <tr>"),i.b("\n"+n),i.b("            <th>Clip</th>"),i.b("\n"+n),i.b("            <th>Position</th>"),i.b("\n"+n),i.b("        </tr>"),i.b("\n"+n),i.b("        "),i.b("\n"+n),i.s(i.f("clipStats",e,t,1),e,t,0,143,1206,"{{ }}")&&(i.rs(e,t,function(e,t,i){i.b("            <tr>"),i.b("\n"+n),i.b("                <td>"),i.b(i.v(i.f("clipId",e,t,0))),i.b("</td>"),i.b("\n"+n),i.b("                <td>"),i.b("\n"+n),i.b("                	<table border='1'>"),i.b("\n"+n),i.b("                	<tr>"),i.b("\n"+n),i.s(i.f("data",e,t,1),e,t,0,303,362,"{{ }}")&&(i.rs(e,t,function(e,t,n){n.b("                		<th>"),n.b(n.v(n.f("position",e,t,0))),n.b("</th>"),n.b("\n")}),e.pop()),i.b("                	</tr>"),i.b("\n"+n),i.b("                	<tr>"),i.b("\n"+n),i.s(i.f("data",e,t,1),e,t,0,443,1111,"{{ }}")&&(i.rs(e,t,function(e,t,i){i.b("                		<td>"),i.b("\n"+n),i.s(i.f("data",e,t,1),e,t,0,495,1060,"{{ }}")&&(i.rs(e,t,function(e,t,i){i.b("	                		<ul>"),i.b("\n"+n),i.b("	                			<li>Ad Opportunity: "),i.b(i.v(i.f("taken",e,t,0))),i.b("</li>"),i.b("\n"+n),i.b("	                			<li>Communicator: "),i.b(i.v(i.f("communicator",e,t,0))),i.b("</li>"),i.b("\n"+n),i.b("	                			<li>Response Code: "),i.b(i.v(i.f("responseCode",e,t,0))),i.b("</li>"),i.b("\n"+n),i.b("	                			<li>Response Type: "),i.b(i.v(i.f("responseType",e,t,0))),i.b("</li>"),i.b("\n"+n),i.b("	                			<li>First Redirect: "),i.b(i.v(i.f("firstRedirect",e,t,0))),i.b("</li>"),i.b("\n"+n),i.b("	                			<li>Redirect count: "),i.b(i.v(i.f("redirectCount",e,t,0))),i.b("</li>"),i.b("\n"+n),i.b("	                			<li>Ad Delivery error: "),i.b(i.v(i.f("error",e,t,0))),i.b("</li>"),i.b("\n"+n),i.b("	                			<li>Ad Media Start latency: "),i.b(i.v(i.f("mediaStartLatency",e,t,0))),i.b("</li>"),i.b("\n"+n),i.b("	                		</ul>"),i.b("\n")}),e.pop()),i.b("                		</td>"),i.b("\n")}),e.pop()),i.b("                	</tr>"),i.b("\n"+n),i.b("                	</table>"),i.b("\n"+n),i.b("				</td>"),i.b("\n"+n),i.b("            </tr>"),i.b("\n")}),e.pop()),i.b("    </table>"),i.b("\n"+n),i.b("</div>"),i.b("\n"),i.fl()});t.exports={render:function(){return i.render.apply(i,arguments)},r:function(){return i.r.apply(i,arguments)},ri:function(){return i.ri.apply(i,arguments)}}},{"hogan.js/lib/template":159}],77:[function(e,t,n){var i=new(e("hogan.js/lib/template").Template)(function(e,t,n){var i=this;return i.b(n=n||""),i.b("<div class='yvp-ads-overlay'></div>"),i.b("\n"),i.fl()});t.exports={render:function(){return i.render.apply(i,arguments)},r:function(){return i.r.apply(i,arguments)},ri:function(){return i.ri.apply(i,arguments)}}},{"hogan.js/lib/template":159}],78:[function(e,t,n){"use strict";function i(e,t){var n=this;n._eventBus=e,n._view=t,n._controlsBottomBar=n._view.rootElem.querySelector(".yvp-bottom-bar"),n._controlsSlider=n._view.rootElem.querySelector(".yvp-slider"),n._eventBus.subscribe(o.CONTROLS_BAR_CHANGE,n._adjustOverlayHeight,n)}t.exports=i;var r=e("../util"),o=e("../event"),a=e("./ads-overlay.html");i.prototype.create=function(){var e=this;return e.node=r.render(a),e.node},i.prototype._adjustOverlayHeight=function(e){var t,n=this,i=n._controlsBottomBar.offsetHeight,r=n._view.rootElem.offsetHeight;t=e?r-i:r,n.node.style.height=t+"px"},i.prototype.destroy=function(){var e=this;e.node=null}},{"../event":"YJm+dH","../util":"jJTEqU","./ads-overlay.html":77}],79:[function(e,t,n){var i=new(e("hogan.js/lib/template").Template)(function(e,t,n){var i=this;return i.b(n=n||""),i.b("<div class='yvp-agegate-container'>"),i.b("\n"+n),i.b("    <img class='yvp-agegate-back-image' src='"),i.b(i.v(i.f("imageSrc",e,t,0))),i.b("' width='"),i.b(i.v(i.f("width",e,t,0))),i.b("' height='"),i.b(i.v(i.f("height",e,t,0))),i.b("'>"),i.b("\n"+n),i.b("    <div class='yvp-agegate-info-wrapper'>"),i.b("\n"+n),i.b("        <h3 class='yvp-agegate-title'>"),i.b(i.v(i.f("title",e,t,0))),i.b("</h3>"),i.b("\n"+n),i.b("        <p class='yvp-agegate-desc'>"),i.b(i.v(i.f("desc",e,t,0))),i.b("</p>"),i.b("\n"+n),i.b("        <div class='yvp-agegate-action-wrapper'>"),i.b("\n"+n),i.s(i.f("isBirthday",e,t,1),e,t,0,355,779,"{{ }}")&&(i.rs(e,t,function(e,t,i){i.b("                <p class='yvp-agegate-input'>"),i.b("\n"+n),i.b("                    <input type='text' name='month' class='yvp-agegate-date-input' maxlength='2' placeholder='MM'>"),i.b("\n"+n),i.b("                    <input type='text' name='day' class='yvp-agegate-date-input' maxlength='2' placeholder='DD'>"),i.b("\n"+n),i.b("                    <input type='text' name='year' class='yvp-agegate-date-input' maxlength='4' placeholder='YYYY'>"),i.b("\n"+n),i.b("                </p>"),i.b("\n")}),e.pop()),i.s(i.f("isBlock",e,t,1),e,t,1,0,0,"")||(i.b("                <button class='yvp-agegate-btn'>"),i.b(i.v(i.f("button",e,t,0))),i.b("</button>"),i.b("\n")),i.b("        </div>"),i.b("\n"+n),i.b("    </div>"),i.b("\n"+n),i.s(i.f("isBlock",e,t,1),e,t,0,955,1020,"{{ }}")&&(i.rs(e,t,function(e,t,n){n.b("        <div class='yvp-error-icon yvp-agegate-icon'></div>"),n.b("\n")}),e.pop()),i.s(i.f("isBlock",e,t,1),e,t,1,0,0,"")||(i.b("        <div class='yvp-agegate-icon'></div>"),i.b("\n")),i.b("</div>"),i.b("\n"),i.fl()});t.exports={render:function(){return i.render.apply(i,arguments)},r:function(){return i.r.apply(i,arguments)},ri:function(){return i.ri.apply(i,arguments)}}},{"hogan.js/lib/template":159}],80:[function(e,t,n){"use strict";function i(e,t){var n=this;n._eventBus=e,n._controller=t}t.exports=i;var r=e("../util"),o=e("../tap"),a=e("./age-gate-screen.html");i.prototype.create=function(e){var t=this;if(t.node=r.render(a,e),t._ageGateObj=e,t._actionButton=t.node.querySelector(".yvp-agegate-btn"),t._ageGateObj.isBirthday){var n=t.node.querySelectorAll(".yvp-agegate-date-input");t._inputMonth="month"===n[0].name?n[0]:null,t._inputDay="day"===n[1].name?n[1]:null,t._inputYear="year"===n[2].name?n[2]:null}var i=t._controller.getPlayerWidth(),o=t._controller.getPlayerHeight();return 470>i&&r.classList(t.node).add("narrow"),350>i||222>o?(r.classList(t.node).add("small"),r.classList(t.node).add("xsmall")):(401>i||271>o)&&r.classList(t.node).add("small"),t._bindUI(),t.node},i.prototype._bindUI=function(){var e=this;e._ageGateObj.isBlock||(e._actionButtonTap=new o(e._actionButton),e._onButtonTap=function(t){t.stopPropagation();var n=e._ageGateObj.isBirthday&&{inputMonth:e._inputMonth,inputDay:e._inputDay,inputYear:e._inputYear};e._controller.handleClickEvent(t,n)},e._actionButton.addEventListener("tap",e._onButtonTap)),e._ageGateObj.isBirthday&&(e._onKeyDown=function(t){e._controller.filterNonDigitInput(t)},e._inputMonth.addEventListener("keydown",e._onKeyDown),e._inputDay.addEventListener("keydown",e._onKeyDown),e._inputYear.addEventListener("keydown",e._onKeyDown))},i.prototype._unBindUI=function(){var e=this;e._ageGateObj.isBlock||(e._actionButtonTap.destroy(),e._actionButton.removeEventListener("tap",e._onButtonTap)),e._ageGateObj.isBirthday&&(e._inputMonth.removeEventListener("keydown",e._onKeyDown),e._inputDay.removeEventListener("keydown",e._onKeyDown),e._inputYear.removeEventListener("keydown",e._onKeyDown))},i.prototype.getNode=function(){var e=this;return e.node},i.prototype.destroy=function(){var e=this;e._unBindUI(),e.node=null}},{"../tap":"dsc79Q","../util":"jJTEqU","./age-gate-screen.html":79}],81:[function(e,t,n){var i=new(e("hogan.js/lib/template").Template)(function(e,t,n){var i=this;return i.b(n=n||""),i.b("<div tabindex='-1' class='"),i.s(i.f("isFujiView",e,t,1),e,t,0,41,49,"{{ }}")&&(i.rs(e,t,function(e,t,n){n.b("yvp-fuji")}),e.pop()),i.b(" yvp-content yvp-hide-controls' aria-label='Yahoo Video Player'>"),i.b("\n"+n),i.b("    <div class='yvp-main'></div>"),i.b("\n"+n),i.b("</div>"),i.b("\n"),i.fl()});t.exports={render:function(){return i.render.apply(i,arguments)},r:function(){return i.r.apply(i,arguments)},ri:function(){return i.ri.apply(i,arguments)}}},{"hogan.js/lib/template":159}],82:[function(e,t,n){var i=new(e("hogan.js/lib/template").Template)(function(e,t,n){var i=this;return i.b(n=n||""),i.b("<div class='yvp-error-screen'>"),i.b("\n"+n),i.b("    <img class='yvp-error-screen-image' src='"),i.b(i.v(i.f("imageSrc",e,t,0))),i.b("'>"),i.b("\n"+n),i.b("    <div class='yvp-error-screen-background'></div>"),i.b("\n"+n),i.b("    <div class='yvp-error-header'>"),i.b("\n"+n),i.b("        <div class='yvp-error-title'>"),i.b(i.v(i.d("error.title",e,t,0))),i.b("</div>"),i.b("\n"+n),i.b("        <div class='yvp-error-divider'></div>"),i.b("\n"+n),i.b("    </div>"),i.b("\n"+n),i.b("    <div class='yvp-error-desc' id='yvp-error-message'>"),i.b(i.v(i.d("error.message",e,t,0))),i.b("</div>"),i.b("\n"+n),i.b("    <div class='yvp-error-code yvp-error-debug'>"),i.b(i.v(i.d("error.rep",e,t,0))),i.b("</div>"),i.b("\n"+n),i.b("    <div class='yvp-error-guid yvp-error-debug'>"),i.b(i.v(i.f("guid",e,t,0))),i.b("</div>"),i.b("\n"+n),i.b("    <div class='yvp-error-sessionId yvp-error-debug'>"),i.b(i.v(i.f("sessionId",e,t,0))),i.b("</div>"),i.b("\n"+n),i.b("    <div class='yvp-feedback-btn yvp-error-feedback-btn'>"),i.b("\n"+n),i.b("        <p>"),i.b(i.v(i.d("strings.FEEDBACK_BUTTON",e,t,0))),i.b("</p>"),i.b("\n"+n),i.b("    </div>"),i.b("\n"+n),i.b("    <div class='yvp-error-indicator yvp-error-icon'></div>"),i.b("\n"+n),i.b("</div>"),i.b("\n"),i.fl()});t.exports={render:function(){return i.render.apply(i,arguments)},r:function(){return i.r.apply(i,arguments)},ri:function(){return i.ri.apply(i,arguments)}}},{"hogan.js/lib/template":159}],83:[function(e,t,n){"use strict";function i(e){var t=this;t._eventBus=e}t.exports=i;var r=e("../util"),o=e("../tap"),a=e("../strings"),s=e("../event"),l=e("./error-screen.html");i.prototype.create=function(e,t,n,i,c){var p=this;return p.node=r.render(l,{error:e,guid:t,sessionId:n,imageSrc:i,strings:a.i18n}),p.errorMsg=p.node.querySelector("#yvp-error-message"),p.errorMsg.innerHTML=e.message,p.flashIcon=p.node.querySelector(".yvp-error-flash-download-icon"),p.flashIcon&&c&&(p.flashIcon.src=c),p._feedbackLink=p.node.querySelector(".yvp-error-feedback-btn"),r.isInternalUser()?(p._feedbackLinkTap=new o(p._feedbackLink),p._onFeedbackLinkTap=function(e){p._eventBus.publish(s.OPEN_FEEDBACK,{srcView:"error-screen"})},p._feedbackLink.addEventListener("tap",p._onFeedbackLinkTap)):p._feedbackLink&&(p._feedbackLink.parentNode.removeChild(p._feedbackLink),p._feedbackLink=null),p.node},i.prototype.adjustText=function(e,t){var n=e.style.lineHeight||14,i=t||3;if(!(e.clientHeight<=n*i)){var r=e.innerHTML;if(-1!==r.indexOf("<a")&&e.clientHeight>n*i)e.style.fontSize="8px",e.style.lineHeight="10px";else for(;e.clientHeight>n*i;)r=r.slice(0,r.lastIndexOf(" ")),e.innerHTML=r+"..."}},i.prototype.destroy=function(){var e=this;e._feedbackLinkTap&&(e._feedbackLinkTap.destroy(),e._feedbackLink.removeEventListener("tap",e._onFeedbackLinkTap)),e.node=null}},{"../event":"YJm+dH","../strings":"XwKsC9","../tap":"dsc79Q","../util":"jJTEqU","./error-screen.html":82}],84:[function(e,t,n){var i=new(e("hogan.js/lib/template").Template)(function(e,t,n){var i=this;return i.b(n=n||""),i.b("<div class='yvp-feedback-screen'>"),i.b("\n"+n),i.b("    <button class='yvp-feedback-screen-close-btn'></button>"),i.b("\n"+n),i.b("    <div class='yvp-feedback-screen-info'>"),i.b("\n"+n),i.b("        <div class='yvp-feedback-screen-title'>"),i.b(i.v(i.d("strings.FEEDBACK_TITLE",e,t,0))),i.b("</div>"),i.b("\n"+n),i.b("        <div class='yvp-feedback-screen-response'></div>"),i.b("\n"+n),i.b("        <div class='yvp-feedback-screen-refid'></div>"),i.b("\n"+n),i.b('        <textarea class=\'yvp-feedback-screen-text\' maxlength="2000" id="feedback_input" placeholder="Enter your comments here."></textarea>'),i.b("\n"+n),i.b("        <div class='yvp-feedback-screen-button-container'>"),
i.b("\n"+n),i.b("             <div class='yvp-feedback-screen-btn'>"),i.b(i.v(i.d("strings.FEEDBACK_SUBMIT_BUTTON",e,t,0))),i.b("</div>"),i.b("\n"+n),i.b("        </div>"),i.b("\n"+n),i.b("        <div class='yvp-feedback-screen-disclaimer'>"),i.b(i.v(i.d("strings.FEEDBACK_DISCLAIMER",e,t,0))),i.b("</div>"),i.b("\n"+n),i.b("    </div>"),i.b("\n"+n),i.b("</div>"),i.b("\n"),i.fl()});t.exports={render:function(){return i.render.apply(i,arguments)},r:function(){return i.r.apply(i,arguments)},ri:function(){return i.ri.apply(i,arguments)}}},{"hogan.js/lib/template":159}],85:[function(e,t,n){"use strict";function i(e,t,n){var i=this;i._model=e,i._view=n,i._viewMainElem=n.getMainElement(),i._eventBus=t,i._isSwfReady=!1,i._playbackInfo={},i._source="unknown",i._playerEvents=[],[r.API.PLAYER_READY,r.API.VIDEO_STARTED,r.API.PLAYBACK_SEEK_COMPLETE,r.API.PLAYER_MUTE_CHANGE,r.API.PLAYER_ERROR,r.API.PLAYBACK_COMPLETE,r.API.PLAYBACK_PAUSE,r.API.PLAYBACK_START,r.API.AD_PLAYBACK_STOP,r.API.AD_PLAYBACK_START,r.API.PLAYER_READY].forEach(function(e){i._eventBus.subscribe(e,function(t){i._playerEvents.push(e),i._playerEvents.length>30&&i._playerEvents.shift()})}),i._eventBus.subscribe(r.OPEN_FEEDBACK,function(e){var t;switch(e.srcView){case"loading-screen":t="loading-screen";break;case"error-screen":t="error-screen";break;case"settings-controller":t="advance-menu";break;case"opensimsim-screen":t="opss"}i._source=t,i.render()})}t.exports=i;var r=e("../event"),o=e("../../../lib/user-agent"),a=e("../util"),s=e("../tap"),l=e("./feedback-screen.html"),c=e("../strings");e("./open-sim-sim");i.prototype.create=function(){var e=this;e._node=a.render(l,{strings:c.i18n});var t=e._node.querySelector(".yvp-feedback-screen-close-btn");e._closeTap=new s(t),e._onCloseTap=function(t){t.stopPropagation(),e.close(),e._view.setKeyboardFocus()},t.addEventListener("tap",e._onCloseTap),e._feedbackTextForm=e._node.querySelector(".yvp-feedback-screen-text"),e._onFeedbackTextKeyDown=function(e){e.stopPropagation()},e._feedbackTextForm.addEventListener("keydown",e._onFeedbackTextKeyDown);var n=e._node.querySelector(".yvp-feedback-screen-btn");return e._feedbackTap=new s(n),e._onFeedbackTap=function(t){var n={},i=JSON.parse(JSON.stringify(e._model));i.playbackState=i.mediaStore=i.playlist={},n.model=i,n.eventLog=JSON.stringify(e._playerEvents),n.source=e._source,n.feedbackText=e._feedbackTextForm.value,n.opssInfo=e._view.getOpenSimSim().fetchInfo(),o.desktop&&o.safari&&e._view.getFullscreen()&&(n.feedbackText+="\n--safari fullscreen--\n"+window.prompt("Enter your comments here")),e._eventBus.publish(r.FEEDBACK_INFO,n),e._feedbackRefId=e._node.querySelector(".yvp-feedback-screen-refid"),e._feedbackRefId.textContent=c.i18n.FEEDBACK_SUBTITLE_RESPONSE_ID+e._model.guid,e._feedbackResponse=e._node.querySelector(".yvp-feedback-screen-response"),e._feedbackResponse.textContent=c.i18n.FEEDBACK_SUBTITLE_RESPONSE_MESSAGE,e._node.querySelector(".yvp-feedback-screen-text").remove(),e._node.querySelector(".yvp-feedback-screen-button-container").remove(),e._node.querySelector(".yvp-feedback-screen-disclaimer").remove()},n.addEventListener("tap",e._onFeedbackTap),e._node},i.prototype.render=function(){var e=this;e._viewMainElem.appendChild(e.create()),a.showHide(e._node,!0)},i.prototype.isOpen=function(){var e=this;return e._node&&"none"!==e._node.style.display},i.prototype.close=function(){var e=this;e._node.style.display="none",e._viewMainElem.querySelector(".yvp-feedback-screen").remove()},i.prototype.destroy=function(){var e=this;e._closeTap&&e._closeTap.destroy(),e._feedbackTextForm&&e._feedbackTextForm.removeEventListener("keydown",e._onFeedbackTextKeyDown),e._feedbackTap&&(e._viewMainElem.querySelector(".yvp-feedback-screen").remove(),e._feedbackTap.destroy())}},{"../../../lib/user-agent":"ty5FFo","../event":"YJm+dH","../strings":"XwKsC9","../tap":"dsc79Q","../util":"jJTEqU","./feedback-screen.html":84,"./open-sim-sim":89}],86:[function(e,t,n){var i=new(e("hogan.js/lib/template").Template)(function(e,t,n){var i=this;return i.b(n=n||""),i.b("<div class='yvp-nfl-branding-container'>"),i.b("\n"+n),i.b("    <div class='yvp-nfl-branding'>"),i.b("\n"+n),i.b("      <a href='http://www.nfl.com/' target='nfl_site'>"),i.b("\n"+n),i.b("          <span class='yvp-nfl-brand-span'></span>"),i.b("\n"+n),i.b("          <span class='yvp-nfl-brand-logo'></span>"),i.b("\n"+n),i.b("      </a>"),i.b("\n"+n),i.b("    </div>"),i.b("\n"+n),i.b("</div>"),i.b("\n"),i.fl()});t.exports={render:function(){return i.render.apply(i,arguments)},r:function(){return i.r.apply(i,arguments)},ri:function(){return i.ri.apply(i,arguments)}}},{"hogan.js/lib/template":159}],87:[function(e,t,n){"use strict";function i(){}t.exports=i;var r=e("../util"),o=e("./nfl-branding.html");i.prototype.create=function(){var e=this;return e.node=r.render(o),e.node},i.prototype.destroy=function(){var e=this;e.node=null}},{"../util":"jJTEqU","./nfl-branding.html":86}],88:[function(e,t,n){var i=new(e("hogan.js/lib/template").Template)(function(e,t,n){var i=this;return i.b(n=n||""),i.b("<div class='yvp-opensimsim' style='display: none'>"),i.b("\n"+n),i.b("    <button class='yvp-opensimsim-close-btn yvp-close-btn'></button>"),i.b("\n"+n),i.b("    <div class='yvp-feedback-btn yvp-opensimsim-feedback-btn'>"),i.b("\n"+n),i.b("        <p>"),i.b(i.v(i.d("strings.FEEDBACK_BUTTON",e,t,0))),i.b("</p>"),i.b("\n"+n),i.b("    </div>"),i.b("\n"+n),i.b("    <div class='yvp-opensimsim-info'>"),i.b("\n"+n),i.b("        <div class='yvp-opensimsim-title'>Yahoo Fireball Video Player</div>"),i.b("\n"+n),i.b("        <div>Version : "),i.b(i.v(i.f("version",e,t,0))),i.b("</div>"),i.b("\n"+n),i.b("        <div>Page SpaceID : "),i.b(i.v(i.f("spaceId",e,t,0))),i.b("</div>"),i.b("\n"+n),i.b("        <div class='yvp-sessionId'></div>"),i.b("\n"+n),i.b("        <div>YVAP Acct. ID : "),i.b(i.v(i.f("yvap_accountId",e,t,0))),i.b("</div>"),i.b("\n"+n),i.b("        <div>YVAP Play Context : "),i.b(i.v(i.f("yvap_playContext",e,t,0))),i.b("</div>"),i.b("\n"+n),i.b("        <div class='yvp-videoSpaceId'></div>"),i.b("\n"+n),i.b("        <div class='yvp-opensimsim-title'>Current Media</div>"),i.b("\n"+n),i.b("        <div class='yvp-opensimsim-uuid'></div>"),i.b("\n"+n),i.b("        <div class='yvp-opensimsim-lmsid'></div>"),i.b("\n"+n),i.b("        <div class='yvp-opensimsim-renderertype'></div>"),i.b("\n"+n),i.b("        <div class='yvp-opensimsim-tv'></div>"),i.b("\n"+n),i.b("        <br>"),i.b("\n"+n),i.b("        <div class='yvp-opensimsim-graphs'></div>"),i.b("\n"+n),i.b("        <div class='yvp-opensimsim-detail'></div>"),i.b("\n"+n),i.b("        <div class='yvp-swf-ready'></div>"),i.b("\n"+n),i.b("        <div class='yvp-opensimsim-title'>Platform</div>"),i.b("\n"+n),i.b("        <div class='yvp-opensimsim-platform'></div>"),i.b("\n"+n),i.b("        <div class='yvp-profile-btn'>Profile</div>"),i.b("\n"+n),i.b("    </div>"),i.b("\n"+n),i.b("</div>"),i.b("\n"),i.fl()});t.exports={render:function(){return i.render.apply(i,arguments)},r:function(){return i.r.apply(i,arguments)},ri:function(){return i.ri.apply(i,arguments)}}},{"hogan.js/lib/template":159}],89:[function(e,t,n){"use strict";function i(e,t,n){var i=this;i._model=e,i._eventBus=t,i._profiler=n,i._isSwfReady=!1,i._playbackInfo={},i._timestamps=[],i._history={bitrate:{title:"Bit Rate History",data:[]},speed:{title:"Download Speed History",data:[]},bufferLength:{title:"Buffer Length History",data:[]},frameRate:{title:"Frame Rate History",data:[]}},i._eventBus.subscribe(r.PLAYBACK_INFO,function(e){i._playbackInfo=e,i._timestamps.push(Date.now()/1e3),i._history.bitrate.data.push(parseFloat(e.currentStreamBitrate)),i._history.speed.data.push(parseFloat(e.currentKbps)),i._history.bufferLength.data.push(parseFloat(e.bufferLength)),i._history.frameRate.data.push(parseFloat(e.frameRate)),i._updateInfo()}),i._eventBus.subscribe(r.SWF_READY,function(){i._isSwfReady=!0}),i._eventBus.subscribe(r.YVAP_INFO_UPDATE,function(e){i._yvapDom=e}),i._eventBus.subscribe(r.API.PLAYLIST_POSITION_CHANGE,function(){i._updateBasicMediaItemInfo()}),i._eventBus.subscribe(r.MEDIA_ITEM_LOADED,i._onMediaItemLoaded,i)}t.exports=i;var r=e("../event"),o=e("../../../lib/user-agent"),a=e("../util"),s=e("../../../lib"),l=e("../tap"),c=e("../vtt-fetcher"),p=e("./open-sim-sim.html"),d=e("../strings"),u=45,_=40;i.prototype.create=function(){var e=this;e._node=a.render(p,{version:e._model.version,spaceId:e._model.baseConfig.pageSpaceId,yvap_accountId:e._model.YVAP.accountId,yvap_playContext:e._model.YVAP.playContext,strings:d.i18n});var t=e._node.querySelector(".yvp-opensimsim-close-btn");e._closeTap=new l(t),e._onCloseTap=function(t){t.stopPropagation(),e.close()},t.addEventListener("tap",e._onCloseTap),e._feedbackLink=e._node.querySelector(".yvp-opensimsim-feedback-btn"),e._feedbackLinkTap=new l(e._feedbackLink),e._onFeedbackLinkTap=function(t){e._eventBus.publish(r.OPEN_FEEDBACK,{srcView:"opensimsim-screen"})},e._feedbackLink.addEventListener("tap",e._onFeedbackLinkTap);var n=e._node.querySelector(".yvp-profile-btn");return e._profileTap=new l(n),e._onProfileTap=function(t){t.stopPropagation(),e._profiler.render(e._yvapDom)},n.addEventListener("tap",e._onProfileTap),e._updatePlatformInfo(),e._node},i.prototype.fetchInfo=function(){var e=this;return{history:e._history,playbackInfo:e._playbackInfo,profile:e._profiler}},i.prototype.render=function(){var e=this;e._node.style.display="block",e._updateBasicMediaItemInfo(),e._updateInfo(),e._isHTML5()&&e._setupHTML5Timers()},i.prototype.isOpen=function(){var e=this;return"none"!==e._node.style.display},i.prototype.close=function(){var e=this;e._node.style.display="none",e._clearTimers()},i.prototype._onMediaItemLoaded=function(e){var t=this;t._isHTML5()&&(t._videoNode=document.querySelector(".yvp-html5-video"),t._displayHTML5Info(),t._subscribeToHTML5Events())},i.prototype._isHTML5=function(){var e=this,t=e._model.playlist.getCurrentItem();return o.tv||o.safari&&t&&"html"===t.rendererType},i.prototype._renderGraph=function(e,t,n,i,r){for(var o=t.length-1,a=0,s=e[o],l=t[o],c=t[o],p=o-1;p>=0;p--)if(l=Math.min(l,t[p]),c=Math.max(c,t[p]),p>0&&s-e[p-1]>u){a=p;break}var d=e[a];l>0&&(l=0),l===c&&(c=l+1),n.save(),n.translate(_,r),n.scale((i-_)/u,-1*r/(c-l)),n.beginPath(),n.moveTo(0,t[a]-l);for(var v=a+1;v<t.length;v++)n.lineTo(e[v]-d,t[v]-l);n.restore(),n.lineWidth=1,n.lineCap="round",n.lineJoin="round",n.strokeStyle="white",n.stroke(),n.font="8pt Monospace",n.fillStyle="white",n.fillText(c.toFixed(1),0,10),n.fillText(l.toFixed(1),0,60)},i.prototype._generateHtmlFromKeyValues=function(e){var t="",n=Object.keys(e);return n.forEach(function(n){var i=e[n];t+="<div>"+n+" : "+i+"</div>"}),t},i.prototype._generateConfigHTML=function(e,t){var n=this,i="",r=Object.keys(e);return r.forEach(function(r){var o=e[r];o&&"object"==typeof o?isNaN(r)?(i+="<div>"+r+" :</div>",i+='<div style="padding-left: 10px">'+n._generateConfigHTML(o)+"</div>"):i+="<div>"+n._generateConfigHTML(o,r)+"</div>":i+="<div>"+(t?t+" : ":"")+r+" : "+o+"</div>"}),i},i.prototype._generateHtmlTitle=function(e){return'<div class="yvp-opensimsim-title">'+e+"</div>"},i.prototype._updatePlatformInfo=function(){var e=this,t={OS:o.os,Mobile:o.mobile,"User Agent":o.ua},n=e._node.querySelector(".yvp-opensimsim-platform");n.innerHTML=e._generateHtmlFromKeyValues(t)},i.prototype._updateBasicMediaItemInfo=function(){var e=this,t=e._model.playlist.getCurrentItem(),n=e._node.querySelector(".yvp-opensimsim-uuid");n.innerHTML="UUID : "+(t?t.id:""),n=e._node.querySelector(".yvp-opensimsim-lmsid"),n.innerHTML="License Id (LMS ID) : "+(t?t.license.licenseId:""),n=e._node.querySelector(".yvp-opensimsim-renderertype"),n.innerHTML="Renderer Type : "+(t?t.rendererType:""),n=e._node.querySelector(".yvp-videoSpaceId"),n.innerHTML="Video SpaceID : "+(t?t.metrics.pageSpaceId:""),n=e._node.querySelector(".yvp-sessionId"),n.innerHTML="SessionId : "+(t?t.videoSession:"none"),e._isHTML5()&&(n=e._node.querySelector(".yvp-opensimsim-url"),t.isLive()?n.innerHTML="Master Playlist URL : "+e._videoNode.currentSrc:o.tv&&(n.innerHTML="Current Source URL : "+e._videoNode.currentSrc),n=e._node.querySelector(".yvp-opensimsim-config"),n.innerHTML=e._generateHtmlTitle("Config")+e._generateConfigHTML(e._model.getConfig()))},i.prototype._updateInfo=function(){var e=this,t=e._model.playlist.getCurrentItem(),n=e._playbackInfo,i=n.deliveryProtocol;t&&(i+=" / "+t.getType());var r=e._node.querySelector(".yvp-opensimsim-graphs");r.innerHTML="";var o=Object.keys(e._history);o.forEach(function(t){var n=e._history[t].data;if(n.some(function(e){return s.isNumber(e)})){var i=150,o=60,l=document.createElement("div");a.classList(l).add("yvp-opensimsim-graph");var c=document.createElement("div");c.innerHTML=e._history[t].title,l.appendChild(c);var p=document.createElement("canvas");p.width=i,p.height=o,l.appendChild(p),r.appendChild(l);var d=p.getContext("2d");e._renderGraph(e._timestamps,n,d,i,o)}});var l={"Total Quality Levels":n.qualityLevels,"Current Bitrate":n.currentStreamBitrate+" kbps",Protocol:i,cdn:t?t.getCDN():"","Recovery count":t?t.failoverCount:0,"Buffer Length / Time":n.bufferLength+" secs / "+n.bufferTime+" secs","Frame Rate":n.frameRate,"Download Speed":n.currentKbps+" kbps","Dropped Frames":n.droppedFrames,"Hardware Decoding":n.hwDecoding?"Yes":"No","Hardware Rendering":n.hwRendering?"Yes":"No","Memory Used":n.totalMemory+" MB","Media Size":n.mediaWidth+" x "+n.mediaHeight,"Stream Playback Rate":n.playbackBytesPerSecond+" kbps"},c=e._node.querySelector(".yvp-opensimsim-detail");c.innerHTML=e._generateHtmlFromKeyValues(l),c=e._node.querySelector(".yvp-swf-ready"),c.innerHTML="Is SWF ready? "+e._isSwfReady},i.prototype._displayHTML5Info=function(){var e=this,t=e._node.querySelector(".yvp-opensimsim-tv");t.innerHTML+='<div class="yvp-opensimsim-url"></div>',t.innerHTML+=e._generateHtmlTitle("HTML5 Video States");var n={"Current Time":'<span class="yvp-opensimsim-time"></span>',"Playback State":'<span class="yvp-opensimsim-playback"></span>',"Player State":'<span class="yvp-opensimsim-state"></span>',"Buffering State":'<span class="yvp-opensimsim-buffering"></span>',"Network State":'<span class="yvp-opensimsim-network"></span>',"Ready State":'<span class="yvp-opensimsim-ready"></span>',"Error State":'<span class="yvp-opensimsim-error">none</span>'};if(t.innerHTML+=e._generateHtmlFromKeyValues(n),o.tv&&s.isFunction(c)){t.innerHTML+=e._generateHtmlTitle("VTT Info");var i={"VTT Index":'<span class="yvp-opensimsim-vttindex"></span>',"VTT URL":'<span class="yvp-opensimsim-vtturl"></span>',"STREAM BITRATES":'<span class="yvp-opensimsim-bitrate-list"></span>'};t.innerHTML+=e._generateHtmlFromKeyValues(i)}t.innerHTML+='<div class="yvp-opensimsim-config"></div>'},i.prototype._subscribeToHTML5Events=function(){var e=this;e._eventBus.subscribe(r.Video.TIMEUPDATE,function(t){e._node.querySelector(".yvp-opensimsim-time").innerHTML=t});var t=["PLAYING","PAUSE","SEEKING","SEEKED"];t.forEach(function(t){e._eventBus.subscribe(r.Video[t],function(){e._node.querySelector(".yvp-opensimsim-playback").innerHTML=t})}),e._eventBus.subscribe(r.Video.WAITING,function(t){e._node.querySelector(".yvp-opensimsim-buffering").innerHTML=t.value});var n=[null,"aborted","network","decode","source not supported"];e._eventBus.subscribe(r.Video.ERROR,function(t){e._node.querySelector(".yvp-opensimsim-error").innerHTML=n[t.code]}),o.tv&&s.isFunction(c)&&(e._eventBus.subscribe(r.VTT_SEGMENT_LOADED,function(t,n,i,r){e._node.querySelector(".yvp-opensimsim-vttindex").innerHTML=i,e._node.querySelector(".yvp-opensimsim-vtturl").innerHTML=r}),e._eventBus.subscribe(r.CTV.GET_BITRATE_FOR_OPSS,function(t){var n=e._node.querySelector(".yvp-opensimsim-bitrate-list");n.innerHTML="Bitrates : "+JSON.stringify(t)}))},i.prototype._setupHTML5Timers=function(){var e=this;e._playerStateTimer=setInterval(function(){e._node.querySelector(".yvp-opensimsim-state").innerHTML=e._model.playbackState.state},1e3);var t=["network empty","network idle","network loading","network no source"];e._networkStateTimer=setInterval(function(){e._node.querySelector(".yvp-opensimsim-network").innerHTML=t[e._videoNode.networkState]},1e3);var n=["have nothing","have metadata","have current data","have future data","have enough data"];e._readyStateTimer=setInterval(function(){e._node.querySelector(".yvp-opensimsim-ready").innerHTML=n[e._videoNode.readyState]},1e3)},i.prototype._clearTimers=function(){var e=this;e._playerStateTimer&&clearInterval(e._playerStateTimer),e._networkStateTimer&&clearInterval(e._networkStateTimer),e._readyStateTimer&&clearInterval(e._readyStateTimer)},i.prototype.destroy=function(){var e=this;e._closeTap&&e._closeTap.destroy(),e._profileTap&&e._profileTap.destroy(),e._feedbackLinkTap&&e._feedbackLinkTap.destroy()}},{"../../../lib":"bRhrlU","../../../lib/user-agent":"ty5FFo","../event":"YJm+dH","../strings":"XwKsC9","../tap":"dsc79Q","../util":"jJTEqU","../vtt-fetcher":95,"./open-sim-sim.html":88}],90:[function(e,t,n){var i=new(e("hogan.js/lib/template").Template)(function(e,t,n){var i=this;return i.b(n=n||""),i.b("<div>"),i.b("\n"+n),i.b("    <pre>"),i.b("\n"+n),i.b(i.v(i.f("config",e,t,0))),i.b("\n"+n),i.b("    </pre>"),i.b("\n"+n),i.b("    <table border='1'>"),i.b("\n"+n),i.b("        <style>"),i.b("\n"+n),i.b("            .bars {"),i.b("\n"+n),i.b("                white-space: nowrap;"),i.b("\n"+n),i.b("            }"),i.b("\n"+n),i.b("            .bars div {"),i.b("\n"+n),i.b("                display: inline-block;"),i.b("\n"+n),i.b("                height: 25px;"),i.b("\n"+n),i.b("            }"),i.b("\n"+n),i.b("            .bar {"),i.b("\n"+n),i.b("                background-color: #714fff;"),i.b("\n"+n),i.b("                border: 1px solid #000;"),i.b("\n"+n),i.b("            }"),i.b("\n"+n),i.b("        </style>"),i.b("\n"+n),i.b("        <tr>"),i.b("\n"+n),i.b("            <th>Type</th>"),i.b("\n"+n),i.b("            <th>Description</th>"),i.b("\n"+n),i.b("            <th>Start</th>"),i.b("\n"+n),i.b("            <th>End</th>"),i.b("\n"+n),i.b("            <th>Diff</th>"),i.b("\n"+n),i.b("            <th>Bar</th>"),i.b("\n"+n),i.b("        </tr>"),i.b("\n"+n),i.s(i.f("profileItems",e,t,1),e,t,0,602,1024,"{{ }}")&&(i.rs(e,t,function(e,t,i){i.b("            <tr>"),i.b("\n"+n),i.b("                <td>"),i.b(i.v(i.f("type",e,t,0))),i.b("</td>"),i.b("\n"+n),i.b("                <td>"),i.b(i.v(i.f("desc",e,t,0))),i.b("</td>"),i.b("\n"+n),i.b("                <td>"),i.b(i.v(i.f("startTime",e,t,0))),i.b("</td>"),i.b("\n"+n),i.b("                <td>"),i.b(i.v(i.f("endTime",e,t,0))),i.b("</td>"),i.b("\n"+n),i.b("                <td>"),i.b(i.v(i.f("timeDiff",e,t,0))),i.b("</td>"),i.b("\n"+n),i.b("                <td class='bars'>"),i.b("\n"+n),i.b("                    <div style='width: "),i.b(i.v(i.f("startWidth",e,t,0))),i.b("px;'></div>"),i.b("\n"+n),i.b("                    <div class='bar' style='width: "),i.b(i.v(i.f("barWidth",e,t,0))),i.b("px;'></div>"),i.b("\n"+n),i.b("                </td>"),i.b("\n"+n),i.b("            </tr>"),i.b("\n")}),e.pop()),i.b("    </table>"),i.b("\n"+n),i.b("</div>"),i.b("\n"),i.fl()});t.exports={render:function(){return i.render.apply(i,arguments)},r:function(){return i.r.apply(i,arguments)},ri:function(){return i.ri.apply(i,arguments)}}},{"hogan.js/lib/template":159}],91:[function(e,t,n){"use strict";function i(e,t,n){var i=this;i._cssSettings=e,i._config=t,i._eventBus=n,i._events=[],i._config.items=i._config.items||[]}t.exports=i;var r=e("../../util"),o=e("../../tap"),a=e("../../../../lib");i.prototype.create=function(){var e=this;return e.node=document.createElement("div"),r.classList(e.node).add(e._cssSettings.wrapper),e._selectedItemWrapper=document.createElement("div"),r.classList(e._selectedItemWrapper).add(e._cssSettings.selectedWrapper),e._selectedItem=document.createElement("div"),r.classList(e._selectedItem).add(e._cssSettings.selected),e._selectedIndicator=document.createElement("span"),r.classList(e._selectedIndicator).add(e._cssSettings.availability),e._dropDownIcon=document.createElement("span"),r.classList(e._dropDownIcon).add(e._cssSettings.dropDownIcon),e._selectedItemWrapper.appendChild(e._selectedItem),e._selectedItemWrapper.appendChild(e._dropDownIcon),e.node.appendChild(e._selectedItemWrapper),e._syncListItems(),e.node.appendChild(e._itemList),e._syncUI(e._config.selected),e._bindUI(),e.node},i.prototype._syncListItems=function(){var e=this;e._itemList?(e._unBindItemList(),e._itemList.innerHTML=""):e._itemList=document.createElement("ul"),r.classList(e._itemList).add(e._cssSettings.list);var t,n=document.createDocumentFragment();e._config.items.length>0?e._config.items.forEach(function(i,o){t=document.createElement("li"),e._config.itemsData&&(t.val=e._config.itemsData[o]),r.classList(t).add(e._cssSettings.listItem),t.appendChild(document.createTextNode(i));var a=document.createElement("span");r.classList(a).add(e._cssSettings.availability),t.appendChild(a),n.appendChild(t)}):(t=document.createElement("li"),r.classList(t).add(e._cssSettings.listItem),t.appendChild(document.createTextNode(e._config.noItemsText)),n.appendChild(t)),e._itemList.innerHTML="",e._itemList.appendChild(n),e._bindItemList()},i.prototype.syncData=function(e){var t=this;e.items&&(t._config.items=e.items.length>0?e.items:t._config.items,t._config.itemsData=e.itemsData.length>0?e.itemsData:t._config.itemsData,t._syncListItems()),t._config.selected=e.selected,t._syncUI(t._config.selected)},i.prototype._syncUI=function(e){var t=this,n=document.createTextNode(e);t._selectedItem.firstChild?t._selectedItem.replaceChild(n,t._selectedItem.firstChild):(t._selectedItem.appendChild(n),t._selectedItem.appendChild(t._selectedIndicator)),t._config.items.length>0?r.classList(t._selectedIndicator).remove(t._cssSettings.notAvailable):r.classList(t._selectedIndicator).add(t._cssSettings.notAvailable)},i.prototype._bindUI=function(){var e=this;e._dropDownTap=new o(e._selectedItemWrapper),e._onDropDownIconTap=function(t){t.stopPropagation(),e._toggleListDisplay()},e._selectedItemWrapper.addEventListener("tap",e._onDropDownIconTap)},i.prototype._bindItemList=function(){var e=this;e._onItemSelected=function(t){t.stopPropagation(),e._syncUI(t.target.textContent),e._toggleListDisplay(),e._publishEvents(t.target)},e._childTaps=[],Array.prototype.forEach.call(e._itemList.childNodes,function(t){var n=new o(t);e._childTaps.push(n),t.childNodes[0].nodeValue!==e._config.noItemsText&&t.addEventListener("tap",e._onItemSelected)})},i.prototype._toggleListDisplay=function(){var e=this;e._isListOpen?r.classList(e._itemList).remove("open"):r.classList(e._itemList).add("open"),e._isListOpen=!e._isListOpen},i.prototype._unBindUI=function(){var e=this;e._dropDownTap&&e._dropDownTap.destroy(),e._dropDownTap&&e._dropDownIcon.removeEventListener("tap",e._onDropDownIconTap),e._unBindItemList()},i.prototype._unBindItemList=function(){var e=this;e._itemList.childNodes&&(Array.prototype.forEach.call(e._itemList.childNodes,function(t){t.removeEventListener("tap",e._onItemSelected)}),e._childTaps.forEach(function(e){e.destroy()}))},i.prototype.registerEvent=function(e){var t=this;-1===t._events.indexOf(e)&&t._events.push(e)},i.prototype.removeEvent=function(e){var t=this,n=t._events.indexOf(e);-1!==n&&t._events.splice(n,1)},i.prototype._publishEvents=function(e){var t=this,n=a.isNullOrUndefined(e.val)?null:e.val;if(null===n&&(n=e.textContent),t._events)for(var i=0;i<t._events.length;i++)t._eventBus.publish(t._events[i],n)},i.prototype.destroy=function(){var e=this;e._unBindUI(),e.events=null,e.node=null,e._itemList=null,e._childTaps=null}},{"../../../../lib":"bRhrlU","../../tap":"dsc79Q","../../util":"jJTEqU"}],92:[function(e,t,n){"use strict";function i(e,t,n){var i=this;i._cssSettings=e,i._config=t,i._eventBus=n,i._events=[],i._validateInput()}t.exports=i;var r=e("../../util"),o=e("../../../../lib"),a=e("../../tap");i.prototype._validateInput=function(){var e=this;if(!e._config)throw new Error("No config object provided for slider");if(e._config.minValue>=e._config.maxValue)throw new Error("Slider's min value is bigger/equal than max value");if(e._config.minValue>e._config.initialValue)throw new Error("Slider's min value is bigger than initial value");if(e._config.maxValue<e._config.initialValue)throw new Error("Slider's max value is smaller than initial value")},i.prototype.create=function(){var e=this;e.node=document.createElement("div"),r.classList(e.node).add(e._cssSettings.wrapper),e._track=document.createElement("div"),r.classList(e._track).add(e._cssSettings.track);var t=100/(e._config.anchors-1),n=0;if(e._trackAnchorsXPos=[],e._config.anchors>0)for(var i=0;i<e._config.anchors;i++){var o=document.createElement("div");r.classList(o).add(e._cssSettings.anchor),o.setAttribute("style","left: "+n+"%"),e._trackAnchorsXPos.push(n),n+=t,e._track.appendChild(o)}return e._sliderHandle=document.createElement("div"),r.classList(e._sliderHandle).add(e._cssSettings.handle),e._config.initialValue&&(e._sliderHandle.setAttribute("style","left: "+e._config.initialValue+"%"),e._fractionValue=e._config.initialValue/e._config.maxValue),e._track.appendChild(e._sliderHandle),e.node.appendChild(e._track),e._bindUI(),e.node},i.prototype._syncUI=function(e){var t,n=this;if(n._config.anchors>0){var i=100;n._trackAnchorsXPos.forEach(function(n){Math.abs(n-e)<i&&(i=Math.abs(n-e),t=n)})}e=o.isNullOrUndefined(t)?e:t,n._syncSliderHandlePosition(e),n._publishEvents(e)},i.prototype._getEvtPositionAndSyncUI=function(e){var t=this,n=t._getSliderValue(e);this._syncUI(n)},i.prototype._bindUI=function(){var e=this;e.node&&(e._sliderTap=new a(e.node),e._onSliderTap=function(t){t.stopPropagation(),e._getEvtPositionAndSyncUI(t)},e.node.addEventListener("tap",e._onSliderTap),e._onSliderDown=function(t){e._preventTouchDefault(t),e._isSliding=!0,e._onSliderMove(t)},e._onSliderMove=function(t){e._isSliding&&(e._preventTouchDefault(t),e._getEvtPositionAndSyncUI(t))},e._onSliderUp=function(t){e._isSliding&&(e._preventTouchDefault(t),e._isSliding=!1)},["mousedown","touchstart"].forEach(function(t){e.node.addEventListener(t,e._onSliderDown)}),["mousemove","touchmove"].forEach(function(t){document.addEventListener(t,e._onSliderMove)}),["mouseup","touchend"].forEach(function(t){document.addEventListener(t,e._onSliderUp)}))},i.prototype._unBindUI=function(){var e=this;e._sliderTap&&e._sliderTap.destroy(),e.node.removeEventListener("tap",e._onSliderTap),["mousedown","touchstart"].forEach(function(t){e.node.removeEventListener(t,e._onSliderDown)}),["mousemove","touchmove"].forEach(function(t){document.removeEventListener(t,e._onSliderMove)}),["mouseup","touchend"].forEach(function(t){document.removeEventListener(t,e._onSliderUp)})},i.prototype._preventTouchDefault=function(e){-1!==e.type.indexOf("touch")&&e.preventDefault()},i.prototype._syncSliderHandlePosition=function(e){var t=this;t._sliderHandle.setAttribute("style","left: "+e+"%")},i.prototype._getSliderValue=function(e){var t=this,n=e.pageX-t.node.getBoundingClientRect().left;return t._fractionValue=n/t.node.clientWidth,100*Math.max(0,Math.min(1,t._fractionValue))},i.prototype.registerEvent=function(e){var t=this;-1===t._events.indexOf(e)&&t._events.push(e)},i.prototype.removeEvent=function(e){var t=this,n=t._events.indexOf(e);-1!==n&&t._events.splice(n,1)},i.prototype._publishEvents=function(e){var t=this;t._events.forEach(function(n){t._eventBus.publish(n,e)})},i.prototype.getValue=function(){var e=this;return e._fractionValue?e._config.maxValue&&e._fractionValue*e._config.maxValue:void 0},i.prototype.setValue=function(e){var t=this;t._fractionValue=t._config.maxValue&&e/t._config.maxValue,t._syncUI(e)},i.prototype.destroy=function(){var e=this;e._unBindUI(),e.events=null,e.node=null}},{"../../../../lib":"bRhrlU","../../tap":"dsc79Q","../../util":"jJTEqU"}],93:[function(e,t,n){var i=new(e("hogan.js/lib/template").Template)(function(e,t,n){var i=this;return i.b(n=n||""),i.b("<div class='yvp-tooltip-wrapper'>"),i.b("\n"+n),i.b("    <div class='yvp-tooltip-content'>"),i.b("\n"+n),i.b("        "),i.b(i.v(i.f("tooltip-msg",e,t,0))),i.b("\n"+n),i.b("    </div>"),i.b("\n"+n),i.b("</div>"),i.b("\n"),i.fl()});t.exports={render:function(){return i.render.apply(i,arguments)},r:function(){return i.r.apply(i,arguments)},ri:function(){return i.ri.apply(i,arguments)}}},{"hogan.js/lib/template":159}],94:[function(e,t,n){"use strict";function i(e,t,n){var i=this;i.node=e,i._tooltipText=o.isString(t)?t:"";var a=r.render(s,{"tooltip-msg":i._tooltipText});i._tooltipTextNode=a.querySelector(".yvp-tooltip-content"),i._tooltipWrapperNode=a,i.node.appendChild(a),i.setEnabled(!0),i._onMouseLeave=function(e){e.stopPropagation(),r.classList(i.node).remove("yvp-tooltip-hidden")},n&&(n.hideUponClick&&i.hideOnClick(),n.positionBottom&&i.setPositionBottom())}t.exports=i;var r=e("../../util"),o=e("../../../../lib"),a=e("../../tap"),s=e("./tooltip.html");i.prototype.setText=function(e){var t=this;t._tooltipText=e,t._tooltipTextNode.innerHTML=t._tooltipText},i.prototype.setEnabled=function(e){var t=this;t._isEnabled=e,e?r.classList(t.node).add("yvp-tooltip"):r.classList(t.node).remove("yvp-tooltip")},i.prototype.hideOnClick=function(){var e=this;e._hideOnClick||(e._elemTap=new a(e.node),e._onElemTap=function(t){e.node&&r.classList(e.node).add("yvp-tooltip-hidden")},e.node.addEventListener("tap",e._onElemTap,e),["mouseleave","touchend"].forEach(function(t){e.node.addEventListener(t,e._onMouseLeave)}),e._hideOnClick=!0)},i.prototype.setPositionBottom=function(){var e=this;r.classList(e._tooltipWrapperNode).add("yvp-tooltip-pos-bottom")},i.prototype.destroy=function(){var e=this;e.node&&(e._elemTap&&(e._elemTap.destroy(),e.node.removeEventListener("tap",e._onElemTap)),["mouseleave","touchend"].forEach(function(t){e.node.removeEventListener(t,e._onMouseLeave)})),e._tooltipTextNode=null,e.node=null}},{"../../../../lib":"bRhrlU","../../tap":"dsc79Q","../../util":"jJTEqU","./tooltip.html":93}],95:[function(e,t,n){"use strict";function i(e,t){var n=this;n._eventBus=e,n._eventBus.subscribe(o.MEDIA_ITEM_LOADED,n._onMediaItemLoaded,n),n._eventBus.subscribe(o.PLAYBACK_PROGRESS,n._onPlaybackProgress,n),n._eventBus.subscribe(o.PLAYBACK_RESUMED,n._onPlaybackResumed,n),n._model=t;var i=t.ui.vttIndex;i>=1&&l>=i&&(c=i),n._vttPlaylistURL="",n._language="",n._vttList=[],n._resumed=!1,n._endReached=!1}t.exports=i;var r=e("xhr"),o=e("./event"),a=e("../../lib/logger"),s=2,l=10,c=3;i.prototype._onMediaItemLoaded=function(e){var t=this;if(e.isLive()&&e&&e.streams&&e.streams[0]&&e.streams[0].url){var n=e.streams[0].url;t._urlPrefix=n.substring(0,n.lastIndexOf("/"));var i={url:n};r(i,function(e,n,i){if(e)return void a.warn("Could not fetch m3u8: "+e);var r="#EXTM3U";if(-1!==i.indexOf(r)){for(var s,l=/#*BANDWIDTH=([0-9]+)/g,c=[];null!==(s=l.exec(i));)c.push(s[1]);c&&t._eventBus.publish(o.CTV.GET_BITRATE_FOR_OPSS,c);var p=i.match(/TYPE=SUBTITLES.+URI=['|"](.+?)['|"]/);if(p){var d=p[0].match(/LANGUAGE=['|"](.+?)['|"]/);if(!d)return;t._language=d[1],t._vttPlaylistURL=t._completeURL(p[1]),0===t._vttPlaylistURL.indexOf("http")&&(t._urlPrefix=t._vttPlaylistURL.substring(0,t._vttPlaylistURL.lastIndexOf("/")),a.log("urlPrefix updated to:"+t._urlPrefix)),a.log("vttplaylisturl:"+t._vttPlaylistURL)}}})}},i.prototype._onPlaybackProgress=function(e,t){var n=this;if(!n._endReached&&n._vttPlaylistURL)return n._lastTime||0===n._lastTime?n._resumed?(n._resumed=!1,n._lastTime=t,n._vttList=[],void n._updateVttList()):void(t-n._lastTime>=s&&(n._lastTime+=s,n._updateVttList())):(n._lastTime=t,void n._updateVttList())},i.prototype._onPlaybackResumed=function(){var e=this;e._resumed=!0},i.prototype._updateVttList=function(){var e=this;if(e._vttPlaylistURL){var t={url:e._vttPlaylistURL};r(t,function(t,n,i){if(t)return void a.warn("Could not fetch VTT m3u8: "+t);var r=i.match(/#EXT-X-MEDIA-SEQUENCE:(.+)/);if(r)var o=Number(r[1]);if(0===e._vttList.length)e._addVttDataToList(i,o);else{var s=i.lastIndexOf("#EXTINF:"),l=i.match(/#EXTINF:/g).length,c=i.substring(s);
e._addVttDataToList(c,o+l-1)}e._endReached=i.indexOf("#EXT-X-ENDLIST")>-1})}},i.prototype._addVttDataToList=function(e,t){for(var n=this,i=/\r\n|\r|\n/,r=e.split(i),o="",a=0,s=0;s<r.length;s++){var c=r[s].match(/#EXT-X-PROGRAM-DATE-TIME:(.+)/);if(c)o=c[1];else{var p=r[s].match(/#EXTINF:(.+),/);if(p)a=p[1];else if(r[s]&&"#"!==r[s].charAt(0)){var d=n._vttList[n._vttList.length-1];if(d&&r[s]===d.url)return;var u={};u.url=r[s],u.seqNum=t++,o&&(u.dateTime=o),a&&(u.duration=a),n._language&&(u.language=n._language),n._vttList.push(u),n._vttList.length>l&&n._vttList.shift(),n._sendVttEvent()}}}},i.prototype._sendVttEvent=function(){var e=this,t=e._vttList[e._vttList.length-c];if(t){var n={url:e._completeURL(t.url)};r(n,function(n,i,r){if(n)return void a.warn("Could not load VTT: "+n);var s={};s.mpegTSTime=0,s.localCueTime=0,s.clockReference=0,s.data=r,e._eventBus.publish(o.VTT_SEGMENT_LOADED,s,!0,c,e._completeURL(t.url))})}},i.prototype._completeURL=function(e){var t=this;return 0===e.indexOf("http")?e:"/"===e.charAt(0)?t._urlPrefix+e:t._urlPrefix+"/"+e}},{"../../lib/logger":"IS9j5T","./event":"YJm+dH",xhr:161}],96:[function(e,t,n){"use strict";function i(e,t,n,o,a,s,l){var c=this;c.playbackId=e,c.pos=i.AD_ORDER[t]||"",c.position=t||"",c.adId=s||"",c.streams=n||[],c.clickUrl=o||"http://screen.yahoo.com/",c.type=a||i.ADTYPES.NO_AD,c.duration=l||r.DEFAULT_AD_DURATION}t.exports=i;var r=e("./common/Constants");i.AD_ORDER={bumper:"start1",preroll:"start0",postroll:"end",midroll:"immediate"},i.POSITION={bumper:"start0",preroll:"start1",postroll:"end",midroll:"immediate"},i.ADTYPES={NORMAL:r.AD,NO_AD:r.NOAD,VPAID:r.VPAID}},{"./common/Constants":104}],97:[function(e,t,n){"use strict";function i(){var e=this;e.priorityList=[],e.communicatorAllocation={},e.settingMap=null,e.communicatorIdNameMap={},e.algoId=null,e.propertyId="",e.disableFallback=!1}t.exports=i;var r=e("./CommunicatorSpec");i.prototype._canService=function(e,t){for(var n=t&&t.length,i=0;i<t.length;i++)n=n&&e.indexOf(t[i])>-1;return n},i.prototype.pickCommunicator=function(e){var t,n,i=this,o=0,a=null,s=null;if(e){for(t in i.communicatorAllocation)i.communicatorAllocation.hasOwnProperty(t)&&i.communicatorAllocation[t]>o&&(o=i.communicatorAllocation[t],a=t);a&&(n=i.settingMap["NETWORK."+a+".adTypes"].split(","),i._canService(n,e.actionValues)&&(s=new r,s.communicatorId=a,s.communicatorName=i.communicatorIdNameMap[a],s.isFallback=!1,s.propertyMap=i.settingMap,s.propertyId=i.propertyId))}return s},i.prototype.pickFallbackCommunicator=function(e){var t,n,i=this,o=0,a=null;if(!i.disableFallback&&e){for(n=e.communicatorId,o=0;o<i.priorityList.length&&i.priorityList[o]!==n;o++);t=i.priorityList[o+1],t&&(a=new r,a.communicatorId=t,a.communicatorName=i.communicatorIdNameMap[t],a.isFallback=!0,a.propertyMap=i.settingMap,a.propertyId=i.propertyId)}return a},i.prototype.pickPossibleCommunicators=function(e){var t,n=this,i=[];for(t=n.pickCommunicator(e);t;)i.push(t),t=n.pickFallbackCommunicator(t);return i}},{"./CommunicatorSpec":99}],98:[function(e,t,n){"use strict";var i=(e("../../util"),e("./Allocation")),r=e("../../../../lib");n.understandAllocation=function(e){if(!e)return null;var t=e.Settings||{},n=e.AllocationModule||{},o=e.NetworkModules;r.isArray(o)||(o=[o.NetworkModule]);var a,s,l,c,p,d,u={},_=null;for(c=0;c<t.length;c++)l=t[c],p=l["@name"],d=l["@value"],u[p]=d;var v=u["SELECTOR.ID"],y="true"===u["SELECTOR."+v+".disablePriorityFallback"],m=u["SYSTEM.PID"];for(c=0;c<n.length;c++)a=n[c],a["@id"]===v&&a["@uri"].indexOf("PercentageAllocationManager")&&(_=new i,_.algoId=v,_.disableFallback=y,_.propertyId=m);if(_){var f,g,b={};for(c=0;c<o.length;c++)s=o[c],f=s["@id"],g=s["@name"],b[f]=g;_.communicatorIdNameMap=b;var E,h,A,S;for(E in b)b.hasOwnProperty(E)&&(S="SELECTOR."+v+".NETWORK."+E,h=parseInt(u[S],10),A=parseInt(u[S+".priority"],10),_.priorityList[A]=E,_.communicatorAllocation[E]=h);_.settingMap=u}return _}},{"../../../../lib":"bRhrlU","../../util":"jJTEqU","./Allocation":97}],99:[function(e,t,n){"use strict";function i(){var e=this;e.propertyMap={},e.communicatorId=null,e.communicatorName=null,e.isFallback=!1,e.propertyId=""}t.exports=i,i.prototype.getSetting=function(e){var t=this;return t.propertyMap["NETWORK."+t.communicatorId+"."+e]}},{}],100:[function(e,t,n){"use strict";function i(){var e=this;o.call(e)}t.exports=i;var r=e("../../util"),o=e("./Allocation"),a=e("../common/Constants"),s=e("./CommunicatorSpec");r.inherits(i,o),i.prototype.pickCommunicator=function(e){var t=null;return e&&(t=new s,t.communicatorName=a.REFRESH),t}},{"../../util":"jJTEqU","../common/Constants":104,"./Allocation":97,"./CommunicatorSpec":99}],101:[function(e,t,n){"use strict";function i(e,t,n){var i=this;i.timestamp=(new Date).getTime(),i.payload=t,i.key=e,i.cacheIdentifier=n}t.exports=i},{}],102:[function(e,t,n){"use strict";function i(e){var t=this;t._yvapBus=e,s.call(t,"cachemanager-bus"),t._IDENTIFIER="adCache"+Math.floor(100*Math.random())+(new Date).getTime(),t._ruleCache={},t._allocationCache={},t._playerDataCache={},t._cuePointsCache={},t._adCache={},t._adEngine=new r,t._positionsToPrefetch=[p.BUMPER,p.PREROLL,p.POSTROLL],t._midrollsCuePoints={}}t.exports=i;var r=e("../engine/AdEngine"),o=(e("../allocation/AllocationManager"),e("../communicator/Ad"),e("../communicator/AdResponse"),e("../communicator/CommunicatorFactory")),a=e("../../util"),s=e("../../../../lib/event-bus"),l=e("./CacheEntry"),r=e("../engine/AdEngine"),c=e("../common/Events"),p=e("../common/Constants"),d=e("../../../../lib/user-agent");a.inherits(i,s);var u=12e5,_=10;i.prototype.prefetchCompleteHandler=function(e,t,n){var i=this;i._yvapBus.publish(c.AD_CALL_END,n,e),i.addAdResponseForKey(e,t)},i.prototype.prefetchFailureHandler=function(e,t,n,i){var r,o=this;r=e.adSpec,o._yvapBus.publish(c.AD_CALL_END,n,e),e&&e.setNewRedirectUrl&&(e.adCallSequence=r.adCallSequence,e.errorState=i,o.addAdResponseForKey(e,t))},i.prototype.updateAdCache=function(e,t){var n,i,r,a,s,l,d,u,_,v,y=this,m=y.getRuleForClipId(t),f=y.getAllocationForClipId(t),g=y.getPlayerDataForClipId(t),b={},E="",h="-1";e=e||[];for(var A=0;A<e.length;A++)n=e[A],i=n.adXML,r=n.key,E=r.adSystem||"",h=r.brId||"-1",d=r.pos,a=r.network,d&&i&&(a===p.MME||a===p.BRX)&&("BMPR"===d?d=p.BUMPER:"VID"===d&&(d=p.PREROLL),b[d]=i);if(m&&f&&g)for(A=0;A<y._positionsToPrefetch.length;A++){d=y._positionsToPrefetch[A],u=y._adEngine.preEvaluate(d,m);for(var S=0;S<u.length;S++){_=u[S],v=f.pickPossibleCommunicators(_);for(var T=0;T<v.length;T++)if(l=v[T],s=o.getCommunicatorUsingSpec(l),s&&s.allowPrefetch())if(s.subscribe(c.AD_READY,y.prefetchCompleteHandler,y),s.subscribe(c.AD_FAILURE,y.prefetchFailureHandler,y),y._yvapBus.publish(c.AD_CALL_START,s),b[d]){var L=b[d];s.prefetchAd(L,_,g,E,h)}else s.getNewAd(_,g)}}},i.prototype.getAd=function(e,t,n){var i=this,r=null;if(e&&t&&n){var a=i.getPlayerDataForClipId(e),s=o.getCommunicatorUsingSpec(t);if(s){var l=s.getKey(n,a);r=i.getAdResponseForKey(l),r||i.getNewAd(s,n,a)}}return r},i.prototype.getNewAd=function(e,t,n){var i=this;e&&(e.subscribe(c.AD_READY,i.prefetchCompleteHandler,i),e.subscribe(c.AD_FAILURE,i.prefetchFailureHandler,i),i._yvapBus.publish(c.AD_CALL_START,e),e.getNewAd(t,n))},i.prototype.isMyOwn=function(e){var t=this;return e&&e.cacheIdentifier===t._IDENTIFIER},i.prototype.hasEntryExpired=function(e){return e&&(new Date).getTime()-e.timestamp>=u},i.prototype.hasBucketExpired=function(e){return e&&(new Date).getTime()-e.timestamp>=u},i.prototype._sortAscendingByTimeStamp=function(e,t){return e.timestamp>t.timestamp},i.prototype._cleanExpiredEntries=function(e){for(var t,n=this,i=[],r=0;r<e.length;r++)t=e[r],n.hasEntryExpired(t)||i.push(t);return i},i.prototype.sync=function(){var e,t,n,i,r,o,s=this,l=[],c=0;for(e in s._adCache)if(s._adCache.hasOwnProperty(e)){if(t=s._adCache[e]||[],l=s._cleanExpiredEntries(t),l.length>0&&!d.tv){for(r=a.localStorage.get(e),o=[],r&&(s.hasBucketExpired(r)?a.localStorage.remove(e):o=r.bucket||[]),o=s._cleanExpiredEntries(o),c=o.length,n=0;_-c>n;n++)i=l.shift(),i&&o.push(i);if(o.length>0){if(r={},r.bucket=o,r.timestamp=(new Date).getTime(),!a.localStorage.put(e,r)){for(c=l.length,n=0;_-c>n;n++)i=o.shift(),i&&!s.hasEntryExpired(i)&&l.push(i);a.localStorage.remove(e)}}else a.localStorage.remove(e)}s._adCache[e]=l}},i.prototype.addAdResponseForKey=function(e,t){var n=this,i=new l(t,e,n._IDENTIFIER),r=n._adCache[t]||[];r.push(i),n._adCache[t]=r,e.isCached=!0,n._yvapBus.publish(c.CACHE_UPDATE,t,e)},i.prototype.getAdResponseForKey=function(e){var t,n,i,r,o=this,s=null;for(n=o._adCache[e]||[],r=0;r<n.length;r++)if(t=n[r],!o.hasEntryExpired(t)){n.splice(r,1);break}if(t)s=t.payload;else if(i=a.localStorage.get(e)){for(o.hasBucketExpired(i)?(a.localStorage.remove(e),n=[]):n=i.bucket||[],r=0;r<n.length;r++)if(t=n[r],!o.hasEntryExpired(t)){n.splice(r,1);break}n.length>0?(i.bucket=n,i.timestamp=(new Date).getTime(),a.localStorage.put(e,i)):a.localStorage.remove(e)}return t&&(s=t.payload,s.cacheState=o.isMyOwn(t)?"l0":"l1"),s},i.prototype.addRuleForClipId=function(e,t){var n=this;e&&t&&(n._ruleCache[t]=e)},i.prototype.getRuleForClipId=function(e){var t=this;return t._ruleCache[e]},i.prototype.addAllocationForClipId=function(e,t){var n=this;e&&t&&(n._allocationCache[t]=e)},i.prototype.getAllocationForClipId=function(e){var t=this;return t._allocationCache[e]},i.prototype.addPlayerDataForClipId=function(e,t){var n=this;e&&t&&(n._playerDataCache[t]=e)},i.prototype.getPlayerDataForClipId=function(e){var t=this;return t._playerDataCache[e]},i.prototype.addCuePointsForClipId=function(e,t){var n=this;e&&t&&(n._midrollsCuePoints[t]=e)},i.prototype.getCuePointsForClipId=function(e){var t=this;return t._midrollsCuePoints[e]}},{"../../../../lib/event-bus":"3ECu9u","../../../../lib/user-agent":"ty5FFo","../../util":"jJTEqU","../allocation/AllocationManager":98,"../common/Constants":104,"../common/Events":107,"../communicator/Ad":109,"../communicator/AdResponse":110,"../communicator/CommunicatorFactory":114,"../engine/AdEngine":129,"./CacheEntry":101}],103:[function(e,t,n){"use strict";function i(e){var t=this;s.call(t,e),t._vmapObjMap={}}t.exports=i;var r=e("../communicator/CommunicatorFactory"),o=e("../common/Events"),a=e("../../util"),s=e("./CacheManager");a.inherits(i,s),i.prototype.updateAdCache=function(e,t){var n=this;e&&t&&(n._vmapObjMap[t]=e)},i.prototype.getAd=function(e,t,n){var i=this,a=null;if(e&&t&&n){var s=i._vmapObjMap[e],l=s.adBreakMap,c=n.type;if(l.hasOwnProperty(c)){var p=l[c],d=r.getCommunicatorUsingSpec(t),u=i.getPlayerDataForClipId(e);if(d&&(d.subscribe(o.AD_READY,i.prefetchCompleteHandler,i),d.subscribe(o.AD_FAILURE,i.prefetchFailureHandler,i),i._yvapBus.publish(o.AD_CALL_START,d),p)){d.prefetchAd(p,n,u);var _=d.getKey(n,u);a=i.getAdResponseForKey(_)}}}return a}},{"../../util":"jJTEqU","../common/Events":107,"../communicator/CommunicatorFactory":114,"./CacheManager":102}],104:[function(e,t,n){"use strict";n.MARKETING_AD_BREAK=3,n.AD_CACHE_EXPTIME=12e5,n.HTTP="http://",n.HTTPS="https://",n.SSL="https:",n.HTML="html",n.PROGRESSIVE="progressive",n.AD="ad",n.NOAD="noad",n.VPAID="vpaid",n.OVERLAY="overlay",n.VPAID_FLASH_FORMAT="application/x-shockwave-flash",n.VPAID_JS_FORMAT="application/javascript",n.STATIC_RESORUCE="static",n.IFRAME_RESORUCE="iframe",n.HTML_RESORUCE="html",n.OVERLAY_IMAGE="image/jpeg",n.OVERLAY_VPAID="application/x-shockwave-flash",n.BUMPER="bumper",n.PREROLL="preroll",n.POSTROLL="postroll",n.NON_LINEAR="overlay",n.MIDROLL="midroll",n.CLIP_START="clip-start",n.CLIP_END="clip-end",n.COMPANION="companion",n.RULES_MISSING="rules-missing",n.CLIP_DATA_MISSING="clip-data-missing",n.CACHE_L0="l0",n.CACHE_L1="l1",n.CACHE_L2="l2",n.MME="MME",n.FREEWHEEL="FREEWHEEL_VAST",n.CBS="CBS",n.DFP="DFP",n.PREVIEW="PREVIEW",n.YAXv="YAXv",n.BRX="BRX",n.REFRESH="REFRESH",n.NFL_FREE_TIME=240,n.NFL_SESSION_TIME=14400,n.NFL_PREROLL="NFL_Preroll",n.NFL_ONLOAD="NFL_onLoad",n.NFL_NOW_LMSID="a0Vd0000003unOyEAI",n.NFL_SESSION_COOKIE="rvl_NFL",n.YVAP_INFO_AD_BREAKS="adBreaks",n.MAX_ADS_MIDROLL=4,n.MIDROLL_PREFETCH_TIMER=18e5,n.DEFAULT_AD_DURATION=30,n.VIEWABILITY_ON=!0,n.ADBLOCKER=!1,n.INTERNAL_POLLING_INTERVAL=200,n.TIME_FOR_VIEWABLE_IMPRESSION=2e3,n.VIEWABILITY_THRESHOLD=.5,n.VIEWABILITY_MEASURABLE=1,n.VIEWABILITY_NOT_MEASURABLE_IFRAME=2,n.VIEWABILITY_NOT_MEASURABLE_NO_DARLA=3,n.PLAYER_AUTO_PLAY_ON=1,n.PLAYER_AUTO_PLAY_OFF=2,n.PLAYER_SOUND_ON=1,n.PLAYER_SOUND_OFF=2,n.PLAYER_IN_BANNER=1,n.PLAYER_NOT_IN_BANNER=2,n.PLAYER_LOCATION_ABOVE_THE_FOLD=1,n.PLAYER_LOCATION_BELOW_THE_FOLD=2,n.UNKNOWN=3,n.STATUS_INITIALIZATION=0,n.STATUS_SWF_LOADED=1,n.STATUS_AD_INITED=2,n.VIDEO_START="VIDEO_START",n.VIDEO_QUARTILE_25="VIDEO_QUARTILE_25",n.VIDEO_QUARTILE_50="VIDEO_QUARTILE_50",n.VIDEO_QUARTILE_75="VIDEO_QUARTILE_75",n.VIDEO_QUARTILE_100="VIDEO_QUARTILE_100",n.VIDEO_VIEW="VIDEO_VIEW"},{}],105:[function(e,t,n){"use strict";function i(){var e=o.getCookie("yvapF");return e?JSON.parse(e):{}}function r(e){var t=JSON.stringify(e);o.setCookie("yvapF",t,{expires:new Date(Date.now()+1e5),path:"/",session:!0})}var o=e("../../util");n.getTotalClipCount=function(){var e=i(),t=e.cc;return t?t:0},n.incrementTotalClipCount=function(){var e=i(),t=e.cc;t=t?t+1:1,e.cc=t,r(e)},n.resetTotalClipCount=function(){var e=i();e.cc=0,r(e)},n.getRecentClipCount=function(){var e=i(),t=e.rcc||0;return t},n.incrementRecentClipCount=function(){var e=i();e.rcc=(e.rcc||0)+1,r(e)},n.resetRecentClipCount=function(){var e=i();e.rcc=0,r(e)},n.getTotalVideoLength=function(){var e=i(),t=e.vl||0;return t},n.incrementTotalVideoLength=function(e){var t=i(),n=e||1;t.vl=(t.vl||0)+n,r(t)},n.resetTotalVideoLength=function(){var e=i();e.vl=0,r(e)},n.getRecentVideoLength=function(){var e=i(),t=e.rvl||0;return t},n.incrementRecentVideoLength=function(e){var t=i(),n=e||1;t.rvl=(t.rvl||0)+n,r(t)},n.incrementNFLVideoLength=function(e){var t=i(),n=e||1;t.rvl_NFL=(t.rvl_NFL||0)+n,r(t)},n.getNFLVideoLength=function(e){var t=i(),n=t.rvl_NFL||0;return n},n.resetRecentVideoLengthNFL=function(){var e=i();e.rvl_NFL=0,r(e)},n.createNFLSession=function(){var e=i();(0===parseInt(e.session_NFL,10)||isNaN(parseInt(e.session_NFL,10)))&&(e.session_NFL=(new Date).getTime()/1e3,r(e))},n.resetNFLSession=function(){var e=i();e.session_NFL=0,r(e)},n.getNFLSession=function(){var e=i(),t=e.session_NFL||0;return t},n.resetRecentVideoLength=function(){var e=i();e.rvl=0,r(e)},n.getAdLength=function(){var e=i(),t=e.al||0;return t},n.incrementAdLength=function(e){var t=i(),n=e||1;t.al=(t.al||0)+n,r(t)},n.resetAdLength=function(){var e=i();e.al=0,r(e)},n.getAdCount=function(){var e=i(),t=e.ac||0;return t},n.incrementAdCount=function(){var e=i();e.ac=(e.ac||0)+1,r(e)},n.resetAdCount=function(){var e=i();e.ac=0,r(e)}},{"../../util":"jJTEqU"}],106:[function(e,t,n){"use strict";n.AD_CALL_TIMEOUT="ERR_AD_CALL_TIMEOUT",n.XML_PARSING="ERR_XML_PARSING",n.RESPONSE_GENERIC="ERR_RESPONSE_GENERIC",n.EMPTY_RESPONSE="ERR_EMPTY_RESPONSE",n.NO_PARSER="ERR_NO_PARSER",n.MISSING_ADTGT="ERR_MISSING_ADTGT",n.REQUEST_GENERIC="ERR_REQUEST_GENERIC",n.INCOMPATIBLE_MEDIA="ERR_INCOMPATIBLE_MEDIA",n.MEDIA_PLAYBACK="ERR_MEDIA_PLAYBACK",n.PLAYER_TIMEOUT="PLAYER_TIMEOUT",n.GENERIC="ERR_GENERIC",n.VPAID_TIMEOUT="ERR_VPAID_TIMEOUT",n.THIRD_PARTY_NO_AD="THIRD_PARTY_NO_AD",n.SSL_MISMATCH="SSL_MISMATCH",n.MISSING_SPACEID="MISSING_SPACEID",n.ADBLOCKER="ADBLOCKER",n.VPAID_SWF_DOWNLOAD_ERROR="ERR_VPAID_SWF_DOWNLOAD_ERROR"},{}],107:[function(e,t,n){"use strict";n.AD_READY="ad-ready",n.AD_FAILURE="ad-failure",n.CACHE_UPDATE="cache-update",n.CACHE_REFRESH_REQUEST="cache-refresh-request",n.AD_METRIC="ad-metric",n.BEGIN_AD_EXP="begin-ad-experience",n.AD_OPPORTUNITY="ad-opportunity",n.NULL_AD_OPPORTUNITY="null-ad-opportunity",n.AD_CALL_START="ad-call-start",n.AD_CALL_END="ad-call-end",n.AD_REQUESTED="ad-requested",n.AD_SUBMITTED="ad-submitted",n.AD_DELIVERED="ad-delivered",n.AD_DELIVERY_ERROR="ad-delivery-error",n.VIDEO_START="video-start",n.VIDEO_END="video-end",n.AD_PAUSED="ad-paused",n.AD_RESUMED="ad-resumed",n.AD_STOPPED="ad-stopped",n.PLAYER_FULLSCREEN="player-fullscreen",n.ADBREAK_START="adbreak-start",n.MIDROLL_START="midroll_start",n.AD_BREAK_ENDED="ad-break-ended",n.AD_BREAK_SUBMITTED="ad-break-sumbitted",n.VPAID_AD_INITED="vpaid-ad-inited",n.VPAID_SWF_LOAD_START="vpaid-swf-load-start",n.VPAID_SWF_LOAD_END="vpaid-swf-load-end",n.OVERLAY_CLICK="overlay-click",n.OVERLAY_RENDERED="overlay-rendered",n.PLAYER_SWF_READY="player-swf-ready",n.VPAID_PREFETCH_REQUEST="vpaid-prefetch-request",n.COMPANION_ADS_DELIVERED="companion-ads-delivered"},{}],108:[function(e,t,n){"use strict";n.AdLoaded="AdLoaded",n.AdStarted="AdStarted",n.AdStopped="AdStopped",n.AdLinearChange="AdLinearChange",n.AdExpandedChange="AdExpandedChange",n.AdRemainingTimeChange="AdRemainingTimeChange",n.AdVolumeChange="AdVolumeChange",n.AdImpression="AdImpression",n.AdVideoStart="AdVideoStart",n.AdVideoFirstQuartile="AdVideoFirstQuartile",n.AdVideoMidpoint="AdVideoMidpoint",n.AdVideoThirdQuartile="AdVideoThirdQuartile",n.AdVideoComplete="AdVideoComplete",n.AdClickThru="AdClickThru",n.AdUserAcceptInvitation="AdUserAcceptInvitation",n.AdUserMinimize="AdUserMinimize",n.AdUserClose="AdUserClose",n.AdPaused="AdPaused",n.AdPlaying="AdPlaying",n.AdLog="AdLog",n.AdError="AdError",n.AdTimeout="AdTimeout",n.AdProgress="AdProgress",n.AdSwfDownloadError="VPAIDSwfDownloadError"},{}],109:[function(e,t,n){"use strict";function i(){var e=this;e.adId=null,e.creativeId=null,e.bookingId=null,e.redirectUrl="",e.adFormat=null,e.streams=[],e.beacons={},e.params={},e.url="",e.type="",e.nonLinearAd=null,e.companion=[],e.isSkippable=!1,e.skipCountdown=5,e.isFallback=!1,e.fallbackFor="",e.timestamp=0,e.adXmlParseErr=null}t.exports=i,i.prototype.addBeaconOfType=function(e,t){var n,i=this;t&&e&&(t=t.toLowerCase(),n=i.beacons[t]||[],e=e.trim(),n.push(e),i.beacons[t]=n)},i.prototype.addMedia=function(e,t,n,i,r){if(e&&t&&n){var o=this;o.streams.push({url:n,format:e,bitrate:t,deliveryType:i,apiFramework:r})}},i.prototype.merge=function(e){var t,n,i,r,o=this;if(e&&e.merge){for(i in e.beacons)e.beacons.hasOwnProperty(i)&&(t=e.beacons[i]||[],t.length>0&&(n=(o.beacons[i]||[]).concat(t),o.beacons[i]=n));for(r in e.params)e.params.hasOwnProperty(r)&&(o.params[r]=e.params[r]);o.creativeId=e.creativeId,o.bookingId=e.bookingId,o.timestamp=e.timestamp,o.impressionId=e.impressionId,o.serveTime=e.serveTime,o.serveId=e.serveId,o.spaceId=e.spaceId,o.position=e.position}},i.prototype.addParamOfName=function(e,t){var n=this;t&&e&&(n.params[t.toLowerCase()]=e)},i.prototype.getParamOfName=function(e){var t=this;return e?t.params[e.toLowerCase()]:void 0},i.prototype.getBeaconsOfType=function(e){var t=this;return e?t.beacons[e.toLowerCase()]:void 0}},{}],110:[function(e,t,n){"use strict";function i(){var e=this;e.adSpec=null,e.adObj=null,e.fallbackAdObj=null,e.isCached=!1,e.communicatorSpec=null,e.cacheState=null,e.errorState=null,e.redirectList=[],e.firstCall="",e.type="",e.adCallSequence=0,e.midrollbreak=null,e.midrolladsequence=null,e.adDuration=0,e.adIdBeacon=0}t.exports=i,i.prototype.toString=function(){return JSON.stringify(this)},i.prototype.setNewRedirectUrl=function(e){var t=this;t.redirectList&&t.redirectList.push(e)},i.prototype.clone=function(e){var t=this;if(e&&e.setNewRedirectUrl)for(var n in e)e.hasOwnProperty(n)&&("redirectList"===n?t.redirectList=[].concat(e.redirectList):t[n]=e[n])}},{}],111:[function(e,t,n){"use strict";function i(e){var t=this;o.call(t,e)}t.exports=i;var r=e("../../util"),o=e("./Communicator"),a=(e("./AdResponse"),e("../common/Constants"),e("../common/Errors")),s=e("../common/Events"),l=(e("./VMAP"),e("./ParserManager")),c=e("../yvap-util");r.inherits(i,o),i.prototype.getKey=function(e,t){var n=this,i=n.spec,r=i.communicatorName||"BRX",o=t.clipId||"";return r+"_"+o},i.prototype.processAdXml=function(e){var t,n,i,r,o,a,s,c=l.parseAdXml(e);for(r=0;r<c.length;r++)for(t=c[r],i="errorimpression",n=t.beacons[i]||[],o=0;o<n.length;o++)a=n[o],s=a.replace(/\[ERRORCODE\]/g,"{err_code}"),n[o]=s;return c},i.prototype.getNewAd=function(e,t){var n,i,r=this,o=r.spec;if(i=o.getSetting("AdServerUrl"),r.key=r.getKey(e,t),i){i=i.replace("http:",location.protocol),i=i.replace(/\[timestamp\]/g,c.getTimeStamp()),n=r.getNewAdResponseObject(e,i);try{r.fireRequest(i,n)}catch(l){r.publish(s.AD_FAILURE,n,r.key,r,l.message)}}else n=r.getNewAdResponseObject(e),r.publish(s.AD_FAILURE,n,r.key,r,a.REQUEST_GENERIC)},i.prototype.allowPrefetch=function(){return!1}},{"../../util":"jJTEqU","../common/Constants":104,"../common/Errors":106,"../common/Events":107,"../yvap-util":144,"./AdResponse":110,"./Communicator":113,"./ParserManager":119,"./VMAP":124}],112:[function(e,t,n){"use strict";function i(e){var t=this;o.call(t,e)}t.exports=i;var r=e("../../util"),o=e("./Communicator"),a=e("./ParserManager"),s=(e("./AdResponse"),e("../common/Constants"),e("../common/Errors")),l=e("../common/Events");r.inherits(i,o),i.prototype.getKey=function(e,t){var n=this,i=n.spec,r=i.communicatorName||"",o=t.clipId||"";return r+"_"+o},i.prototype.getNewAd=function(e,t){var n,i,r,o,c,p=this,d=t.adTargeting||"";if(o=a.parseXml(d),c=o.childNodes[0],p.key=p.getKey(e,t),c&&"adData"===c.nodeName&&(i=c.getAttribute("id"),"ad_url"===i&&(r=c.getAttribute("value"),r+=r.indexOf("xml=vast")>-1?";pos=1":";pos=1;xml=yahoo")),r){r=r.replace("http:",location.protocol),n=p.getNewAdResponseObject(e,r);try{p.fireRequest(r,n)}catch(u){p.publish(l.AD_FAILURE,n,p.key,p,u.message)}}else n=p.getNewAdResponseObject(e),p.publish(l.AD_FAILURE,n,p.key,p,s.MISSING_ADTGT)},i.prototype.allowPrefetch=function(){return!1}},{"../../util":"jJTEqU","../common/Constants":104,"../common/Errors":106,"../common/Events":107,"./AdResponse":110,"./Communicator":113,"./ParserManager":119}],113:[function(e,t,n){"use strict";function i(e){var t=this;a.call(t,"communicator"),t.spec=e||{}}t.exports=i;var r=e("../../util"),o=e("../../../../lib/logger"),a=e("../../../../lib/event-bus"),s=e("./ParserManager"),l=e("./VastValidator"),c=e("./AdResponse"),p=e("../common/Events"),d=e("../common/Errors"),u=e("../common/Constants"),_=e("../../../../lib/user-agent"),v=e("xhr");r.inherits(i,a);var y={"amgdgt.com":!0,"adap.tv":!0,"videohub.tv":!0,"doubleclick.net":!0,"undertone.com":!0,"jivox.com":!0,"adform.net":!0,"flashtalking.com":!0,"telemetryverification.net":!0,"fwmrm.net":!0,"eyereturn.com":!0,"zedo.com":!0,"tubemogul.com":!0,"tidaltv.com":!0,"yahoo.com":!0,"cbs.com":!0,"innovid.com":!0,"moatads.com":!0,"stickyadstv.com":!0,"btrll.com":!0,"ads.adaptv":!0};i.prototype.getNewAd=function(){},i.prototype.handleAdResponse=function(e){var t,n,i=this;t=e.adObj,t&&("redirect"===t.type?(n=t.redirectUrl,i.setNewRedirect(n,e)):(l.validateAdObj(t),i.publish(p.AD_READY,e,i.key,i)))},i.prototype.processAdObjects=function(e,t){for(var n,i,r,o=this,a=0;a<t.length;a++)n=t[a],r=new c,r.clone(e),i=e.adObj,i&&n.merge(i),r.adObj=n,o.handleAdResponse(r)},i.prototype.getKey=function(){return"null-key"},i.prototype.getFirstCall=function(){return"null-first-call"},i.prototype.getNewAdResponseObject=function(e,t){var n=this,i=new c;return i.adSpec=e,i.type=e.type,i.communicatorSpec=n.spec,i.firstCall=t||n.getFirstCall(),i},i.prototype.processAdXml=function(e){return s.parseAdXml(e)},i.prototype.prefetchAd=function(e,t,n,i,r){var a,s,l=this;if(e){s=l.getNewAdResponseObject(t),s.adSystem=i,s.brId=r,l.key=l.getKey(t,n);try{a=l.processAdXml(e),l.processAdObjects(s,a)}catch(c){o.log(c),l.publish(p.AD_FAILURE,s,l.key,l,c.message)}}},i.prototype._isWhiteListed=function(e){var t=!1;for(var n in y)if(y.hasOwnProperty(n)&&e.indexOf(n)>-1){t=y[n];break}return t},i.prototype.fireRequest=function(e,t){var n=this,i=(new Date).getTime(),a=r.parseDomain(e),s=n._isWhiteListed(a),l=n.httpTimeout||3e3;if(window.location.protocol===u.SSL&&0!==e.indexOf(u.SSL))throw new Error(d.SSL_MISMATCH);try{var c={url:e,method:"GET",cors:s,sync:!1,timeout:l};_.ie&&_.ie<10&&(c.responseType="text"),v(c,function(e,r,o){var a,s=r.statusText;a=(new Date).getTime(),a-i>=l?n.onAdCallFailure(t,"timeout"):e?n.onAdCallFailure(t,s):n.onAdCallSuccess(t,o)})}catch(p){throw o.log(p),new Error(d.REQUEST_GENERIC)}},i.prototype.setNewRedirect=function(e,t){var n=this;t.setNewRedirectUrl(e),n.fireRequest(e,t)},i.prototype.onAdCallSuccess=function(e,t){var n,i=this;if(t)try{n=i.processAdXml(t),i.processAdObjects(e,n)}catch(r){o.log(r),i.publish(p.AD_FAILURE,e,i.key,i,r.message)}else i.publish(p.AD_FAILURE,e,i.key,i,d.EMPTY_RESPONSE)},i.prototype.onAdCallFailure=function(e,t){var n,i=this;n="timeout"===t?d.AD_CALL_TIMEOUT:"SSLMismatch"===t?d.SSL_MISMATCH:u.ADBLOCKER?d.ADBLOCKER:d.RESPONSE_GENERIC,i.publish(p.AD_FAILURE,e,i.key,i,n)},i.prototype.allowPrefetch=function(){return!1}},{"../../../../lib/event-bus":"3ECu9u","../../../../lib/logger":"IS9j5T","../../../../lib/user-agent":"ty5FFo","../../util":"jJTEqU","../common/Constants":104,"../common/Errors":106,"../common/Events":107,"./AdResponse":110,"./ParserManager":119,"./VastValidator":126,xhr:161}],114:[function(e,t,n){"use strict";var i=e("../common/Constants"),r=e("./MMECommunicator"),o=e("./FreeWheelCommunicator"),a=e("./CBSCommunicator"),s=e("./DFPCommunicator"),l=e("./PreviewCommunicator"),c=e("./RefreshCommunicator"),p=e("./YAXvCommunicator"),d=e("./BRXCommunicator");n.getCommunicatorUsingSpec=function(e){var t=null;if(e){var n=e.communicatorName;n.indexOf(i.MME)>-1?t=new r(e):n.indexOf(i.FREEWHEEL)>-1?t=new o(e):n.indexOf(i.CBS)>-1?t=new a(e):n.indexOf(i.DFP)>-1?t=new s(e):n.indexOf(i.REFRESH)>-1?t=new c(e):n.indexOf(i.PREVIEW)>-1?t=new l(e):n.indexOf(i.YAXv)>-1?t=new p(e):n.indexOf(i.BRX)>-1&&(t=new d(e))}return t}},{"../common/Constants":104,"./BRXCommunicator":111,"./CBSCommunicator":112,"./DFPCommunicator":115,"./FreeWheelCommunicator":116,"./MMECommunicator":117,"./PreviewCommunicator":120,"./RefreshCommunicator":121,"./YAXvCommunicator":127}],115:[function(e,t,n){"use strict";function i(e){var t=this;a.call(t,e)}t.exports=i;var r=e("../../util"),o=e("../../../../lib/logger"),a=e("./Communicator"),s=(e("./AdResponse"),e("../common/Constants"),e("../common/Errors"),e("../common/Events"),e("./VMAP"),e("./ParserManager"),e("../common/Constants")),l=e("../../../../lib/user-agent.js"),c=e("../yvap-util");r.inherits(i,a),i.prototype._replaceAll=function(e,t,n){return n.replace(new RegExp(e,"g"),t)},i.prototype._parseAdTargeting=function(e){var t=this;e=t._replaceAll("nflnow:","",e),e=t._replaceAll("=",'":"',e),e=t._replaceAll(",",'","',e),e='{"'+e+'"}';try{return JSON.parse(e)}catch(n){return JSON.parse("{}")}},i.prototype.getKey=function(e,t){var n=this,i=n.spec,r=i.communicatorName||"",o=t.clipId||"";return r+"_"+o},i.prototype._getPlatform=function(){var e="nflnow/web/yahoo";return l.android?e=l.androidTablet?"nflnow/app/tablet/android/yahoo":"nflnow/app/phone/android/yahoo":l.ios&&(e=l.ipad?"nflnow/app/tablet/ios/yahoo":"nflnow/app/phone/ios/yahoo"),e},i.prototype._getValue=function(e){var t=function(e){return(new window.DOMParser).parseFromString(e,"text/xml")};if(null===e)return"";if("<"!==e.trim().charAt(0)&&">"!==e.trim().charAt(e.length-1))return"";var n=t(e);return n.getElementsByTagName("adData")[0].getAttribute("value")},i.prototype._populateMacro=function(e,t){var n,i,r,a=this,l={},p={},d={freeUserPeriodInSeconds:240,premiumUserPeriodInSeconds:720,publisherId:"1234567abcd",endpoint_preroll:"https://pubads.g.doubleclick.net/gampad/ads?sz=640x360&iu=/4595/nfl.${platform}&ciu_szs=&impl=s&gdfp_req=1&env=vp&output=xml_vast2&unviewed_position_start=1&cust_params=test%3D%26slot%3Dpreroll%26s3%3D${channel_id}&url=${referrer_url}&correlator=${timestamp}",endpoint_loader:"https://pubads.g.doubleclick.net/gampad/ads?sz=640x360&iu=/4595/nfl.${platform}&ciu_szs=&impl=s&gdfp_req=1&env=vp&output=xml_vast2&unviewed_position_start=1&cust_params=test%3D%26slot%3Donloader%26s3%3D${channel_id}&url=${referrer_url}&correlator=${timestamp}",endpoint_clubs:"https://pubads.g.doubleclick.net/gampad/ads?sz=640x360&iu=/4595/team.${club}.${platform}&ciu_szs=&impl=s&gdfp_req=1&env=vp&output=xml_vast2&unviewed_position_start=1&cust_params=test%3D%26slot%3Dpreroll%26s3%3D${channel_id}&url=${referrer_url}&correlator=${timestamp}"};return l.serverUrl="",t.content_provider_data&&t.content_provider_data.rules&&(d=t.content_provider_data.rules),e.subType===s.NFL_ONLOAD?l.serverUrl=d.endpoint_loader:e.subType===s.NFL_PREROLL?(n=t.adTargeting||"",i=a._parseAdTargeting(a._getValue(n)),r=i.origin||"",p.channel_id=i.channel,"CLUBS"===r.toUpperCase()?(p.club=i.contentProvider,l.serverUrl=d.endpoint_clubs):l.serverUrl=d.endpoint_preroll):o.log("error case"),p.timestamp=c.getTimeStamp(),p.platform=a._getPlatform(),p.referrer_url=document.referrer,l.serverUrl=l.serverUrl.replace("[PLATFORM]","${platform}"),l.serverUrl=l.serverUrl.replace("[CLUB]","${club}"),l.serverUrl=l.serverUrl.replace("[CHANNEL_ID]","${channel_id}"),l.serverUrl=l.serverUrl.replace("[referrer_url]","${referrer_url}"),l.serverUrl=l.serverUrl.replace("[timestamp]","${timestamp}"),l.macroDict=p,l},i.prototype.updateProtocol=function(e){var t=window.location.protocol;return e=t===s.SSL?e.replace(s.HTTP,s.HTTPS):e.replace(s.HTTPS,s.HTTP)},i.prototype.getNewAd=function(e,t){var n,i,r=this,o={},a=r.spec,p=a.getSetting("AdServerUrl");if(t.licenseId!==s.NFL_NOW_LMSID)p=p.replace("[referrer_url]","${referrer_url}"),p=p.replace("[REQUESTID]","${requestid}"),p=p.replace("[timestamp]","${requestid}"),p=p.replace("[TIMESTAMP]","${requestid}"),p=p.replace("${REQUESTID}","${requestid}"),l.mobile&&(p=p.replace("iu=/4595/nfl.video.yahoo","iu=/4595/nfl.video.yahoo/mobileweb")),o.requestid=c.getTimeStamp(),o.referrer_url=document.referrer||"yahoo.com";else{var d=r._populateMacro(e,t);o=d.macroDict,p=d.serverUrl}n=c.expandMacro(p,o),null!==n&&""!==n&&(n=r.updateProtocol(n),i=r.getNewAdResponseObject(e,n),r.key=r.getKey(e,t),r.fireRequest(n,i))},i.prototype.allowPrefetch=function(){return!1}},{"../../../../lib/logger":"IS9j5T","../../../../lib/user-agent.js":"ty5FFo","../../util":"jJTEqU","../common/Constants":104,"../common/Errors":106,"../common/Events":107,"../yvap-util":144,"./AdResponse":110,"./Communicator":113,"./ParserManager":119,"./VMAP":124}],116:[function(e,t,n){"use strict";function i(e){var t=this;o.call(t,e)}t.exports=i;var r=e("../../util"),o=e("./Communicator"),a=(e("./AdResponse"),e("../common/Constants"),e("../common/Errors")),s=e("../common/Events"),l=(e("./VMAP"),e("./ParserManager"));r.inherits(i,o),i.prototype.getKey=function(e,t){var n=this,i=n.spec,r=i.communicatorName||"",o=t.clipId||"";return r+"_"+o},i.prototype.processAdXml=function(e){var t,n,i,r,o,a,s=l.parseAdXml(e);if(s&&s.adBreakMap){t=s.adBreakMap.preroll||{},n=t.adSource||{},i=n.vastAdData||[],r=t.trackingEvents||{},o=r.trackings||[];for(var c=0;c<o.length;c++)"breakStart"===o[c].event&&(a=o[c]);if(a)for(c=0;c<i.length;c++)i[c].addBeaconOfType(a.url,"ad-break-start");return i}return s},i.prototype.getNewAd=function(e,t){var n,i,o=this,l=o.spec,c=";;",p=";",d=t.clipCategory||"",u=t.adTargeting||"",_=new DOMParser,v=_.parseFromString(u,"application/xml");i=v.childNodes[0];var y,m,f,g,b,E,h,A,S,T,L="";if(S=l.getSetting("AdServerUrl"),n=o.getNewAdResponseObject(e,S),o.key=o.getKey(e,t),i&&"adData"===i.nodeName){y=i.getAttribute("id"),("TurnerVideoID"===y||"YahooPartnerVideoID"===y)&&(L=i.getAttribute("value")),m="true"===l.getSetting("OverrideSAPI")?l.getSetting("SiteSectionMapping"):d,f={nw:l.getSetting("YahooNetworkId"),metr:l.getSetting("CapabilitySupportFlags"),resp:l.getSetting("ResponseType"),sfid:l.getSetting("SiteSectionFallbackId"),ssnw:l.getSetting("SiteSectionNetworkId"),pvrn:Math.round(1e8*Math.random()).toString(),caid:L,csid:m,crtp:l.getSetting("CustomResponseType"),vprn:Math.round(1e8*Math.random()).toString(),afid:l.getSetting("VideoAssetFallbackId"),flag:l.getSetting("ImpressionFlags"),asnw:l.getSetting("VideoAssetNetworkId"),prof:l.getSetting("PlayerProfile")},E=r.querystring(f),g={tpcl:l.getSetting("SlotTimePositionClass"),slau:l.getSetting("CustomAdUnitName"),slid:l.getSetting("SlotCustomId"),
ptgt:l.getSetting("SlotType"),flag:l.getSetting("SlotFlags"),h:l.getSetting("SlotHeight"),w:l.getSetting("SlotWidth"),tpos:l.getSetting("SlotTimePosition")},h=r.querystring(g),b={flag:l.getSetting("SlotFlags2"),h:l.getSetting("SlotHeight2"),w:l.getSetting("SlotWidth2"),tpcl:l.getSetting("SlotTimePositionClass2"),slau:l.getSetting("CustomAdUnitName2"),slid:l.getSetting("SlotCustomId2"),ptgt:l.getSetting("SlotType2"),tpos:l.getSetting("SlotTimePosition2")},A=r.querystring(b),S=S.replace("http:",location.protocol),T=S+"?"+E+c+h+p+A,n.firstCall=T;try{o.fireRequest(T,n)}catch(I){o.publish(s.AD_FAILURE,n,o.key,o,I.message)}}else o.publish(s.AD_FAILURE,n,o.key,o,a.MISSING_ADTGT)},i.prototype.allowPrefetch=function(){return!1}},{"../../util":"jJTEqU","../common/Constants":104,"../common/Errors":106,"../common/Events":107,"./AdResponse":110,"./Communicator":113,"./ParserManager":119,"./VMAP":124}],117:[function(e,t,n){"use strict";function i(e){var t=this;a.call(t,e)}t.exports=i;var r=e("../../util"),o=e("../yvap-util"),a=e("./Communicator"),s=(e("./AdResponse"),e("./ParserManager")),l=e("../common/Constants"),c=e("../common/Events"),p=e("../common/Errors"),d=e("../../../../lib/user-agent"),l=e("../common/Constants");r.inherits(i,a);var u="yvap.query.yahoo.com/v1/public/yql",_="flv_as3;xml_ver_2.0vast",v="vi_ct_1",y="vpaidt_none;fm_mp4;fm_webm;vi_ct_1",m={overlayC2V:"v4",overlayC2S:"v5",clickable:"v1;v7;v8",interactive:"v2",asq:"v6"},f={bumper:"BMPR",overlay:"VIDO",preroll:"VID",postroll:"VID",midroll:"VID"},g=["playback0","playback25","playback50","playback75","playback100"],b="csc.beap.bc.yahoo.com/yi";i.prototype._parseCSCImpressionBeacon=function(e,t){for(var n=/([^,()]+),|([^,():]+)\)/g,i=t.match(n),r={},o=null,a=0,s=null,l=0;l<i.length;l++)o=i[l],a=o.length-1,o=","===o.charAt(a)||")"===o.charAt(a)?o.substr(0,a):o,s=o.split("$"),s=2===s.length?s:o.split("="),2===s.length&&(r[s[0]]=s[1]);e.position=r.ypos,e.bookingId=r.bi,e.creativeId=r.cr,e.impressionId=r.aid,e.serveTime=r.st,e.serveId=r.gid,e.spaceId=r.sp},i.prototype.getNewAd=function(e,t){var n,i,a,s,g,b,E=this,h=E.spec,A=h.getSetting("adBaseUrl")||"us",S="true"===h.getSetting("sendRsParam")?"lmsid:"+t.licenseId:"",T=e.actionValues||[],L=f[e.type]||"",I=v,M="",C="",N="",R=t.spaceId;if(e.type===l.MIDROLL){I="";var D=h.getSetting("spaceIdOverride");D&&(R=D),M=' vid.forcead=1  adbreak="'+e.cdtBreak.toString()+'" ';var O=parseInt(h.getSetting("adsPerBreak"))||l.MAX_ADS_MIDROLL;e.cdtBreak===l.MARKETING_AD_BREAK&&O++,L=O>0&&"VID"===L?"n"+O+L:L}for(var P="",w=0;w<T.length;w++)P=P+m[T[w]]+";";if(d.mobile&&(I=y),t.showName&&(C='show_name="'+t.showName+'" '),t.topics&&(N='cTopId="'+t.topics.join()+'" '),P+=_+";"+I,b='content="'+P+'" '+M+C+N,i={pn:"'"+h.getSetting("partnerId")+"'",f:"'"+R+"'",p:"'"+h.propertyId+"'",c:"'x'",rand:"'"+Math.round(1e13*Math.random())+"'",rs:"'"+S+"'",l:"'"+L+"'",at:"'"+b+"'",rg:"'"+A+"'",pt:"'"+location.protocol+"'"},a={q:o.generateYqlQuery(i,"yahoo.ads.video.vat"),format:"json",env:"prod"},s=r.querystring(a),g=location.protocol+"//"+u+"?"+s,n=E.getNewAdResponseObject(e,g),n.timestamp=(new Date).getTime()/1e3,E.key=E.getKey(e,t),!R)return void E.publish(c.AD_FAILURE,n,E.key,E,p.MISSING_SPACEID);try{E.fireRequest(g,n)}catch(j){E.publish(c.AD_FAILURE,n,E.key,E,j.message)}},i.prototype.getFirstCall=function(){var e=this,t=e.spec,n=t.getSetting("adBaseUrl")||"us";return"http://"+n+u},i.prototype.getKey=function(e,t){var n=this,i=n.spec,r=i.communicatorName||"",o=t.spaceId||"",a=(t.clipId||"",t.licenseId||""),s=e.type||"",l=f[s]||"";return r+"_"+o+"_"+l+"_"+a},i.prototype.processAdXml=function(e){var t=this,n=null;if("<"===e.charAt(0))n=e;else try{var i=JSON.parse(e);if(!(i&&i.query&&i.query.results&&i.query.results.result))throw new Error(p.EMPTY_RESPONSE);n=i.query.results.result.xmlResponse||i.query.results.result}catch(r){throw new Error(p.XML_PARSING)}var o,a,l,c,d,u,_,v,y,m=s.parseAdXml(n);for(_=0;_<m.length;_++){for(o=m[_],v="impression",a=o.beacons[v]||[],u=0;u<a.length;u++)l=a[u],l.indexOf("csc.beap")>-1&&(t._parseCSCImpressionBeacon(o,l),l=l.replace(/eob\$/g,"cuuid${cuuid},eob$adb={ad_break}:sn={ad_sequence}:dur={duration}:pver={player_version}:"),a[u]=l);for(d=0;d<g.length;d++)for(v=g[d],a=o.beacons[v]||[],u=0;u<a.length;u++)l=a[u],l.indexOf("beap-bc")>-1&&(y=l.lastIndexOf("))"),y>-1&&(c=l.substring(0,y)+",{beap_client_event}))",a[u]=c));for(v="noadimpression",a=o.beacons[v]||[],u=0;u<a.length;u++)l=a[u],c=l.replace(/eob\$/g,"cuuid${cuuid},eob$yvap_code={err_code}:adb={ad_break}:sn={ad_sequence}:dur={duration}:dmn_1={initial_domain}:dmn_n={vendor_domain}:pver={player_version}:"),a[u]=c;for(v="errorimpression",a=o.beacons[v]||[],u=0;u<a.length;u++)l=a[u],l.indexOf(b)>-1&&a.splice(u,1);for(u=0;u<a.length;u++)l=a[u],c=l.replace(/\[ERRORCODE\]/g,"{err_code}"),a[u]=c}return m},i.prototype.allowPrefetch=function(){return!0}},{"../../../../lib/user-agent":"ty5FFo","../../util":"jJTEqU","../common/Constants":104,"../common/Errors":106,"../common/Events":107,"../yvap-util":144,"./AdResponse":110,"./Communicator":113,"./ParserManager":119}],118:[function(e,t,n){"use strict";function i(e,t){var n=this;n._yvapBus=e,n._cacheManager=t,n._communicator=null,n._midrollsAds=[],n._toUnsubscribe=[],n._cdtbreak=1}t.exports=i;var r=e("../../../../lib/logger"),o=(e("../../../../lib/event-bus"),e("./AdResponse"),e("../common/Events")),a=e("../common/Constants"),s=e("../engine/AdSpec"),l=e("./CommunicatorFactory"),c=e("../allocation/CommunicatorSpec"),p=e("../yvap-util");e("../ads-json");i.prototype._getNewAds=function(e,t){var n=this;if(e){var i=new s(a.MIDROLL,["clickable"]);i.cdtBreak=n.getCDTBreak(),i.fallbackParam=!1;var c=e.pickCommunicator(i);if(c&&c.communicatorName===a.MME){var p=l.getCommunicatorUsingSpec(c);n._toUnsubscribe.push(p.subscribe(o.AD_READY,n._adReadyHandler,n)),n._toUnsubscribe.push(p.subscribe(o.AD_FAILURE,n._adFailureHandler,n)),p.getNewAd(i,t)}else r.log("No suitable communicator found for midroll fetch")}},i.prototype._getCommunicator=function(e){var t=new c;return t.communicatorId=11,t.communicatorName="MME",t.isFallback=!1,t.propertyMap=e.settingMap,t.propertyId=e.propertyId,l.getCommunicatorUsingSpec(t)},i.prototype._checkForVPAIDPreInit=function(e){var t=this;if(e){var n=e.adObj;if(n&&n.type===a.VPAID){var i=n.streams||[],r=i[0];r&&"application/x-shockwave-flash"===r.format&&t._yvapBus.publish(o.VPAID_PREFETCH_REQUEST,n)}}},i.prototype._adReadyHandler=function(e,t,n,i){var r=this,s=[];e.type=a.MIDROLL,s=r._midrollsAds,s&&s[0]&&e.timestamp===s[0].timestamp||r.clearMidrollsAdCache(),r._addMidrollsAdCache(e),r._yvapBus.publish(o.AD_CALL_END,n,e)},i.prototype._adFailureHandler=function(e,t,n,i){var r=this;e.type=a.MIDROLL,e.errorState=i,r._addMidrollsAdCache(e),r._yvapBus.publish(o.AD_CALL_END,n,e)},i.prototype.startMidRollsFetchThread=function(e){var t=this,n=t._cacheManager.getPlayerDataForClipId(e),i=t._cacheManager.getAllocationForClipId(e);i&&n?(t.resetCDTBreak(),t._getNewAds(i,n),t.midRollFetchThread=setInterval(function(){t._getNewAds(i,n)},a.MIDROLL_PREFETCH_TIMER)):r.log("allocation, playerdata missing")},i.prototype.stopMidRollsFetchThread=function(){var e=this;e.midRollFetchThread&&clearInterval(e.midRollFetchThread);for(var t=0;t<e._toUnsubscribe.length;t++){var n=e._toUnsubscribe[t];n()}},i.prototype.getMidrollsAds=function(e,t){var n,i=this,r=i._midrollsAds||[],l=[],c=i._cacheManager.getPlayerDataForClipId(e),d=[],u=-1,_=new s(a.MIDROLL,["clickable"]),v=i._cacheManager.getAllocationForClipId(e),y=null,m=i._cacheManager.getCuePointsForClipId(e),f=0,g=0,b=0,E=function(e){var t=3;for(var n in m)if(m[n]){var i=m[n].timeOffset;if(i=p.convertTimeToSeconds(i),e+t>=i&&i>=e-t)return m[n].breakId}return 0};d=r.map(function(e){return e.timestamp||-1}),u=Math.max.apply(null,d);var h=E(t),A=i.getCDTBreak();if(v&&c&&m){y=v.pickCommunicator(_);var S=a.MAX_ADS_MIDROLL,T=0;y&&(T=y.getSetting("adsPerBreak")),parseInt(T)>0&&(S=T),A===a.MARKETING_AD_BREAK&&S++;for(var L=0;S>L;L++){var I=L+1;if(i._yvapBus.publish(o.AD_OPPORTUNITY,e,a.MIDROLL,_,y,c,I),r.length>L&&r[L].timestamp===u){n=r[L],n.midrollbreak=h,n.midrolladsequence=I,n.midrollnumber=A;var M=n.adObj;M&&(M.type===a.AD?g++:M.type===a.NOAD?f++:M.type===a.VPAID&&b++),l.push(n)}}i._yvapBus.publish(o.AD_BREAK_SUBMITTED,e,a.MIDROLL,S,l.length,f,g,b,E(t)),i.clearMidrollsAdCache()}return i.incrementCDTBreak(),v&&c&&i._getNewAds(v,c),l},i.prototype.clearMidrollsAdCache=function(){var e=this;e._midrollsAds=[]},i.prototype.updateMidrollsAdCache=function(e){var t=this;t._midrollsAds=e},i.prototype._addMidrollsAdCache=function(e){var t=this;t._midrollsAds.push(e),t._checkForVPAIDPreInit(e)},i.prototype.resetCDTBreak=function(){var e=this;e._cdtbreak=1},i.prototype.getCDTBreak=function(){var e=this;return e._cdtbreak},i.prototype.incrementCDTBreak=function(){var e=this;e._cdtbreak++}},{"../../../../lib/event-bus":"3ECu9u","../../../../lib/logger":"IS9j5T","../ads-json":96,"../allocation/CommunicatorSpec":99,"../common/Constants":104,"../common/Events":107,"../engine/AdSpec":131,"../yvap-util":144,"./AdResponse":110,"./CommunicatorFactory":114}],119:[function(e,t,n){"use strict";var i=e("./VASTParser"),r=e("./VMAPParser"),o=e("../common/Errors");n.parseAdXml=function(e){var t,i,r=null;if(!e)return null;e=n.cleanXml(e);try{t=n.parseXml(e,!0)}catch(a){throw new Error(o.XML_PARSING)}if(t.xml&&(i=t.xml.childNodes[0],r=n.parseDom(i)),"object"==typeof r&&null!==t.xmlParseErr)for(var s=0;s<r.length;s++)r[s].adXmlParseErr=t.xmlParseErr;return r},n.cleanXml=function(e){return e&&(e=e.replace(/>\s+</g,"><"),e=e.replace(/<!--[\s\S]*?-->/g,"")),e},n.parseXml=function(e,t){var n=null,i=null;if("undefined"!=typeof DOMParser){n=(new DOMParser).parseFromString(e,"text/xml");var r=n.getElementsByTagName("parsererror");r.length&&(i="NonIE")}else"undefined"!=typeof ActiveXObject?(n=document.implementation.createDocument(),n.loadXML(e),0!==n.parseError&&(i="IE")):i="All";return t===!0?{xml:n,xmlParseErr:i}:n},n.parseDom=function(e){var t,i,r;if(!e)throw new Error(o.XML_PARSING);if(t=n.getParser(e),!t)throw r=e.nodeName,"parsererror"===r?new Error(o.XML_PARSING):new Error(o.NO_PARSER);return i=t.parse(e)},n.getParser=function(e){var t=e?e.nodeName:"";return"VAST"===t?i:t.indexOf("VMAP")>-1?r:null}},{"../common/Errors":106,"./VASTParser":123,"./VMAPParser":125}],120:[function(e,t,n){"use strict";function i(e){var t=this;t.key=t.getKey(),a.call(t,e)}t.exports=i;var r=e("../../util"),o=e("../../../../lib"),a=e("./MMECommunicator"),s=e("../common/Events"),l=e("../common/CookieUtil"),c=e("../yvap-util");r.inherits(i,a),i.prototype.getNewAd=function(e,t){var n,i=this;i.spec;if(o.isFunction(window.showAdInfo)&&i.subscribe(s.AD_READY,function(e){window.showAdInfo(e.adObj)}),o.isFunction(window.getAdXmlForPreview)){var r=window.getAdXmlForPreview();"tag"===r.type?(n=i.getNewAdResponseObject(e,r.value),i.fireRequest(r.value,n)):(n=i.getNewAdResponseObject(e),i.onAdCallSuccess(n,r.value))}},i.prototype.getKey=function(){return"preview-key"},i.prototype.setNewRedirect=function(e,t){var n=this;t.setNewRedirectUrl(e),e=n.fillMacros(e),n.fireRequest(e,t)},i.prototype.fillMacros=function(e){var t=this,n=t.spec;return e=e.replace("[CONTENT_WATCHED]",l.getTotalVideoLength()),e=e.replace("[CONTENT_CLIPS_WATCHED]",l.getTotalClipCount()),e=e.replace("[PLAYER_WIDTH]",n.getSetting("SlotWidth")),e=e.replace("[PLAYER_HEIGHT]",n.getSetting("SlotHeight")),e=e.replace("[TIMESTAMP]",c.getTimeStamp())},i.prototype.allowPrefetch=function(){return!0}},{"../../../../lib":"bRhrlU","../../util":"jJTEqU","../common/CookieUtil":105,"../common/Events":107,"../yvap-util":144,"./MMECommunicator":117}],121:[function(e,t,n){"use strict";function i(e){var t=this;o.call(t,e),t._macros={}}t.exports=i;var r=e("../../util"),o=e("./Communicator"),a=e("../common/Events"),s=e("../yvap-util"),l=(e("../common/CookieUtil"),e("./ParserManager")),c=["playback0","playback25","playback50","playback75","playback100"],p="csc.beap.bc.yahoo.com/yi";r.inherits(i,o),i.prototype.prefetchAd=function(e,t,n){var i,o=this;if(e){for(var s,l=e.adSource||{},c=l.vastAdData||[],p=e.trackingEvents||{},d=p.trackings||[],u=0;u<d.length;u++)"breakStart"===d[u].event&&(s=d[u]);if(s)for(u=0;u<c.length;u++)c[u].addBeaconOfType(s.url,"ad-break-start");i=o.getNewAdResponseObject(t),o.key=o.getKey(t,n),o._fillMacros(n);try{o._parseAdObjects(c),o.processAdObjects(i,c)}catch(_){r.log(_),o.publish(a.AD_FAILURE,i,o.key,o,_.message)}}},i.prototype._parseAdObjects=function(e){var t,n,i,r,o,a,s,l,d,u=this;for(s=0;s<e.length;s++){for(t=e[s],l="impression",n=t.beacons[l]||[],a=0;a<n.length;a++)i=n[a],i.indexOf("csc.beap")>-1&&(u._parseCSCImpressionBeacon(t,i),i=i.replace(/eob\$/g,"cuuid${cuuid},eob$adb={ad_break}:sn={ad_sequence}:dur={duration}:pver={player_version}:"),n[a]=i);for(o=0;o<c.length;o++)for(l=c[o],n=t.beacons[l]||[],a=0;a<n.length;a++)i=n[a],i.indexOf("beap-bc")>-1&&(d=i.lastIndexOf("))"),d>-1&&(r=i.substring(0,d)+",{beap_client_event}))",n[a]=r));for(l="noadimpression",n=t.beacons[l]||[],a=0;a<n.length;a++)i=n[a],r=i.replace(/eob\$/g,"cuuid${cuuid},eob$yvap_code={err_code}:adb={ad_break}:sn={ad_sequence}:dur={duration}:dmn_1={initial_domain}:dmn_n={vendor_domain}:pver={player_version}:"),n[a]=r;for(l="errorimpression",n=t.beacons[l]||[],a=0;a<n.length;a++)i=n[a],i.indexOf(p)>-1&&n.splice(a,1);for(a=0;a<n.length;a++)i=n[a],r=i.replace(/\[ERRORCODE\]/g,"{err_code}"),n[a]=r}},i.prototype._parseCSCImpressionBeacon=function(e,t){for(var n=/([^,()]+),|([^,():]+)\)/g,i=t.match(n),r={},o=null,a=0,s=null,l=0;l<i.length;l++)o=i[l],a=o.length-1,o=","===o.charAt(a)||")"===o.charAt(a)?o.substr(0,a):o,s=o.split("$"),s=2===s.length?s:o.split("="),2===s.length&&(r[s[0]]=s[1]);e.position=r.ypos,e.bookingId=r.bi,e.creativeId=r.cr,e.impressionId=r.aid,e.serveTime=r.st,e.serveId=r.gid,e.spaceId=r.sp},i.prototype.setNewRedirect=function(e,t){var n=this;e=n._expandMacros(e),t.setNewRedirectUrl(e),n.fireRequest(e,t)},i.prototype._fillMacros=function(e){var t=this,n=e.adTargeting||"",i="",r=new DOMParser,o=r.parseFromString(n,"application/xml"),a=o.childNodes[0];if(a&&"adData"===a.nodeName){var l=a.getAttribute("id");("TurnerVideoID"===l||"YahooPartnerVideoID"===l)&&(i=a.getAttribute("value"))}var c=e.clipCategory||"";t._macros={"[TIMESTAMP]":s.getTimeStamp(),"[AD_TARGETING]":i,"[CONTENT_CATEGORY]":c}},i.prototype._expandMacros=function(e){var t=this;if(!e||0===e.length)return null;var n=t._macros||{};for(var i in n)n.hasOwnProperty(i)&&(e=e.replace(i,n[i]));return e},i.prototype.allowPrefetch=function(){return!0},i.prototype.getKey=function(e,t){var n=t.spaceId||"",i=t.licenseId||"",r=e.type||"";return"Refresh_"+n+"_"+r+"_"+i},i.prototype.processAdXml=function(e){var t,n,i,r,o,a,s=l.parseAdXml(e);if(s&&s.adBreakMap){t=s.adBreakMap.preroll||{},n=t.adSource||{},i=n.vastAdData||[],r=t.trackingEvents||{},o=r.trackings||[];for(var c=0;c<o.length;c++)"breakStart"===o[c].event&&(a=o[c]);if(a)for(c=0;c<i.length;c++)i[c].addBeaconOfType(a.url,"ad-break-start");return i}return s}},{"../../util":"jJTEqU","../common/CookieUtil":105,"../common/Events":107,"../yvap-util":144,"./Communicator":113,"./ParserManager":119}],122:[function(e,t,n){"use strict";function i(e,t){var n=this;n._beaconMap={},n._beaconMap[o.VIDEO_START]="playback0",n._beaconMap[o.VIDEO_QUARTILE_25]="playback25",n._beaconMap[o.VIDEO_QUARTILE_50]="playback50",n._beaconMap[o.VIDEO_QUARTILE_75]="playback75",n._beaconMap[o.VIDEO_QUARTILE_100]="playback100",n._beaconMap[o.VIDEO_VIEW]="impression",n._yvapBus=e,n._standaloneAdXML=t.xml,n._standaloneAdBeacons=t.beacons,n._standaloneAdResponse=null;var i=new l;i.communicatorName="STANDALONE";var c=new a(o.PREROLL,["clickable"]),p=null,d=new s(i);d&&(d.subscribe(r.AD_READY,n.prefetchCompleteHandler,n),d.subscribe(r.AD_FAILURE,n.prefetchFailureHandler,n),n._yvapBus.publish(r.AD_CALL_START,d),d.prefetchAd(n._standaloneAdXML,c,p,"STANDALONE",parseInt(1e5*Math.random())))}t.exports=i;var r=(e("../../../../lib/logger"),e("../../../../lib/event-bus"),e("../common/Events")),o=e("../common/Constants"),a=e("../engine/AdSpec"),s=e("./Communicator"),l=e("../allocation/CommunicatorSpec");i.prototype.prefetchCompleteHandler=function(e,t,n){var i=this;i._yvapBus.publish(r.AD_CALL_END,n,e),e&&e.adObj&&i.addBeacons(e.adObj),i._standaloneAdResponse=e},i.prototype.prefetchFailureHandler=function(e,t,n,i){},i.prototype.getAd=function(){var e=this;return e._standaloneAdResponse},i.prototype.addBeacons=function(e){var t=this;if(t._standaloneAdBeacons)for(var n in t._beaconMap)if(t._beaconMap.hasOwnProperty(n))for(var i=t._standaloneAdBeacons[n],r=t._beaconMap[n],o=0;o<i.length;o++){var a=i[o];e.addBeaconOfType(a,r)}}},{"../../../../lib/event-bus":"3ECu9u","../../../../lib/logger":"IS9j5T","../allocation/CommunicatorSpec":99,"../common/Constants":104,"../common/Events":107,"../engine/AdSpec":131,"./Communicator":113}],123:[function(e,t,n){"use strict";function i(e,t,n){for(var i,r,o=e.childNodes,a=0;a<o.length;a++)i=o[a],r=t[i.nodeName],r&&r.call(void 0,n,i)}function r(e,t){var n={MediaFile:function(e,t){var n,i,r=t.getAttribute("type"),o=t.getAttribute("apiFramework"),a=t.getAttribute("delivery");n=t.getAttribute("bitrate")||100,n=parseInt(n,10),i=C.getTextFromNode(t),e.addMedia(r,n,i,a,o)}};i(t,n,e)}function o(e,t){var n={yahoo_video_ad_item:function(e,t){var n=t.getAttribute("name");n&&t.textContent&&e.addParamOfName(t.textContent,n)},yahoo_video_ad_beacon:function(e,t){var n=t.getAttribute("id");n&&t.textContent&&e.addBeaconOfType(t.textContent,n)},"#cdata-section":function(e,t){e.adParameters={AdParameters:t.nodeValue}},"#text":function(e,t){e.adParameters={AdParameters:t.nodeValue}}};i(t,n,e)}function a(e,t){var n={Tracking:function(e,t){var n,i=t.getAttribute("event");i&&t.textContent&&(n=O[i],n?e.addBeaconOfType(t.textContent,n):e.addBeaconOfType(t.textContent,i))}};i(t,n,e)}function s(e,t){var n={ClickThrough:function(e,t){t.textContent&&e.addParamOfName(t.textContent,"clickurl")},ClickTracking:function(e,t){var n=t.nodeName;n&&t.textContent&&e.addBeaconOfType(t.textContent,"clicktracking")}};i(t,n,e)}function l(e,t){var n={MediaFiles:r,AdParameters:o,TrackingEvents:a,VideoClicks:s,Duration:function(e,t){if(N.isNullOrUndefined(e.duration)){var n=C.getTextFromNode(t);e.duration=R.convertTimeToSeconds(n)}}};e.streams=[];for(var l in e.beacons)e.beacons.hasOwnProperty(l)&&"impression"!==l&&"errorimpression"!==l&&delete e.beacons[l];i(t,n,e)}function c(e,t){var n,i;e=e||{},t.textContent&&(n=t.getAttribute("creativeType")||"",i=t.textContent||"",e.resourceUrl=i.trim(),e.resourceType=n.trim())}function p(e,t){var n;e.nonLinearAd||{};t.textContent&&(n=t.textContent||"",n=n.trim(),e.addParamOfName(n,"clickurl"))}function d(e,t){var n={StaticResource:c,NonLinearClickThrough:p,AdParameters:o},r=e.nonLinearAd||{},a=t.getAttribute("width"),s=t.getAttribute("height"),l=t.getAttribute("scalable"),d=t.getAttribute("apiFramework");r.width=a,r.height=s,r.scalable=l,r.apiFramework=d,e.nonLinearAd=r,i(t,n,e),n={StaticResource:c},i(t,n,e.nonLinearAd)}function u(e,t){var n={TrackingEvents:a,NonLinear:d};i(t,n,e)}function _(e,t){e=e||{};t.textContent&&(e.companionClickThrough=t.textContent)}function v(e,t){var n,i;e=e||{},t.textContent&&(n=t.getAttribute("creativeType")||"",i=t.textContent||"",e.companionBannerSrc=i.trim(),e.companionMimeType=n)}function y(e,t){var n={},r=t.getAttribute("width"),o=t.getAttribute("height");n.companionWidth=r,n.companionHeight=o;var a=t.getElementsByTagName("StaticResource"),s=t.getElementsByTagName("IFrameResource"),l=t.getElementsByTagName("HTMLResource");a&&a.length>0?n.companionBannerType=D.STATIC_RESORUCE:s&&s.length>0?n.companionBannerType=D.IFRAME_RESORUCE:l&&l.length>0&&(n.companionBannerType=D.HTML_RESORUCE);var c={TrackingEvents:m,CompanionClickThrough:_,StaticResource:v,IFrameResource:v,HTMLResource:v};i(t,c,n),e.companion.push(n)}function m(e,t){var n={Tracking:function(e,t){var n=t.getAttribute("event");n&&t.textContent&&(e.companionImpression=t.textContent)}};i(t,n,e)}function f(e,t){var n={Companion:y};i(t,n,e)}function g(e,t){var n={Linear:l,CompanionAds:f,NonLinearAds:u};i(t,n,e)}function b(e,t){var n={Creative:g};i(t,n,e)}function E(e,t){var n=C.getTextFromNode(t);e.addBeaconOfType(n,"impression")}function h(e,t){var n,i,r,o,a,s=t.getAttribute("type");"SkipAd"===s?(n=t.childNodes[0],n&&"SkipDirective"===n.nodeName&&"2"===n.textContent&&(e.isSkippable=!0),i=t.childNodes[1],i&&"SkipBeacon"===i.nodeName&&i.textContent&&e.addBeaconOfType(i.textContent,"skip")):"CPCV"===s?(r=t.childNodes[0],r&&"Progress30SecBeacon"===r.nodeName&&r.textContent&&e.addBeaconOfType(r.textContent,"cpcv")):"CustomTracking"===s?(o=t.childNodes[0],o&&"NoAdImpression"===o.nodeName&&o.textContent&&e.addBeaconOfType(o.textContent,"noadimpression")):"YahooViewability"===s&&(a=t.childNodes[0],a&&"CustomTrackingViewableImpression"===a.nodeName&&a.textContent&&e.addBeaconOfType(a.textContent,"viewableimpression"))}function A(e,t){var n=C.getTextFromNode(t);e.addBeaconOfType(n,"errorimpression")}function S(e,t){var n={Extension:h};i(t,n,e)}function T(e,t){var n={VASTAdTagURI:function(e,t){e.redirectUrl=C.getTextFromNode(t),e.type="redirect"},Impression:E,Creatives:b,Extensions:S,Error:A};i(t,n,e)}function L(e,t){var n={Impression:E,Creatives:b,Extensions:S,Error:A};i(t,n,e)}function I(e,t){var n=t.getAttribute("fallbackfor"),r=t.getAttribute("id");r&&(e.adId=r),n&&(e.isFallback=!0,e.fallbackFor=n);var o={Wrapper:T,InLine:L};return i(t,o,e),e}var M=e("./Ad"),C=e("../../util"),N=e("../../../../lib"),R=e("../yvap-util"),D=e("../common/Constants"),O={start:"playback0",firstQuartile:"playback25",midpoint:"playback50",thirdQuartile:"playback75",complete:"playback100"};n.parse=function(e){var t,n=[];if(!e||"VAST"!==e.nodeName)return n;var r={Ad:function(e,t){e=new M,e.adFormat="vast",I(e,t),n.push(e)}};return i(e,r,t),0===n.length&&(t=new M,t.adFormat="vast",t.type=D.NOAD,n.push(t)),n}},{"../../../../lib":"bRhrlU","../../util":"jJTEqU","../common/Constants":104,"../yvap-util":144,"./Ad":109}],124:[function(e,t,n){"use strict";function i(){var e=this;e.adBreakMap={},e.version=""}function r(){var e=this;e.adSource=null,e.trackingEvents=null,e.timeOffset="",e.breakType=[],e.breakId="",e.repeatAfter="",e.extensions=null}function o(){var e=this;e.id="",e.allowMultipleAds=0,e.followRedirects=0,e.adTagURI="",e.customAdData="",e.vastAdData=""}function a(){var e=this;e.trackings=[]}function s(){var e=this;e.event="",e.url=""}function l(){var e=this;e.extensions=[],e.clientRules=null}function c(){var e=this;e.xml="",e.type="",e.data={}}t.exports={VMAPObject:i,AdBreak:r,AdSource:o,TrackingEvents:a,Tracking:s,Extensions:l,Extension:c}},{}],125:[function(e,t,n){"use strict";function i(e,t,n){for(var i,r,o=e.childNodes,a=0;a<o.length;a++)i=o[a],r=t[i.nodeName],r&&r.call(void 0,n,i)}function r(e,t){var n=t.childNodes[0],i=d.getParser(n);e.vastAdData=i.parse(n)}function o(e,t){var n=new p.TrackingEvents,r={"vmap:Tracking":function(e,t){var n=new p.Tracking,i=t.getAttribute("event")||"";n.event=i,n.url=t.textContent,e.trackings.push(n)}};i(t,r,n),e.trackingEvents=n}function a(e,t){var n=new p.Extensions,r={ClientRules:s};i(t,r,n),e.extensions=n}function s(e,t){var n={},r={MinDuration:function(e,t){var n=t.textContent||0;e.MinDuration=n},StartAtClip:function(e,t){var n=t.textContent||0;e.StartAtClip=n},Frequency:function(e,t){var n=t.textContent||0;e.Frequency=n},Length:function(e,t){var n=t.textContent||0;e.Length=n}};i(t,r,n),e.clientRules=n}function l(e,t){var n=new p.AdSource,o={"vmap:VASTAdData":r,"vmap:VASTData":r};i(t,o,n),e.adSource=n}function c(e,t){var n=new p.AdBreak,r=t.getAttribute("breakId")||"";r.indexOf("pre")>-1?n.breakId="preroll":n.breakId=r,n.breakType=(t.getAttribute("breakType")||"").split(","),n.timeOffset=t.getAttribute("timeOffset")||"";var s={"vmap:AdSource":l,"vmap:TrackingEvents":o,"vmap:Extensions":a};i(t,s,n),e.adBreakMap[n.breakId]=n}var p=e("./VMAP"),d=e("./ParserManager");e("../yvap-util"),e("../common/Constants");n.parse=function(e){var t=null;if(!e||"vmap:VMAP"!==e.nodeName)return t;t=new p.VMAPObject;var n={"vmap:AdBreak":c};return i(e,n,t),t}},{"../common/Constants":104,"../yvap-util":144,"./ParserManager":119,"./VMAP":124}],126:[function(e,t,n){"use strict";var i=e("../common/Constants");n._isVpaid=function(e){var t=e.apiFramework||"";return t.toLowerCase()===i.VPAID},n._setType=function(e){var t=i.NOAD;if(e.nonLinearAd)t=i.OVERLAY;else if(e.streams&&e.streams.length>0){var r=e.streams,o=[],a=[];r.forEach(function(e){n._isVpaid(e)?a.push(e):o.push(e)}),o.length>0?(t=i.AD,e.streams=o):a.length>0&&(t=i.VPAID,e.streams=a)}e.type=t},n.validateAdObj=function(e){for(var t=[n._setType],i=0;i<t.length;i++)e=t[i](e)}},{"../common/Constants":104}],127:[function(e,t,n){"use strict";function i(e){var t=this;o.call(t,e)}t.exports=i;var r=e("../../util"),o=e("./Communicator"),a=(e("./ParserManager"),e("./AdResponse"),e("../common/Constants"),e("../common/Errors")),s=e("../common/Events");e("../yvap-util");r.inherits(i,o),i.prototype.getKey=function(e,t){var n=this,i=n.spec,r=i.communicatorName||"YAXv",o=t.clipId||"";return r+"_"+o},i.prototype.getNewAd=function(e,t){var n,i,r=this;if(i="https://na.ads.yahoo.com/yax/vdo?ve=1&si=370&tc=ac958c0f81cbb7a6&vdn=0&vdm=30&vfo=2&xmlVersion=xml_ver_2.0vast_wrapper,xml_ver_2.0vast&vpaidt=vpaidt_none&u=tumblr.com",r.key=r.getKey(e,t),i){i=i.replace("http:",location.protocol),n=r.getNewAdResponseObject(e,i);try{r.fireRequest(i,n)}catch(o){r.publish(s.AD_FAILURE,n,r.key,r,o.message)}}else n=r.getNewAdResponseObject(e),r.publish(s.AD_FAILURE,n,r.key,r,a.REQUEST_GENERIC)}},{"../../util":"jJTEqU","../common/Constants":104,"../common/Errors":106,"../common/Events":107,"../yvap-util":144,"./AdResponse":110,"./Communicator":113,"./ParserManager":119}],128:[function(e,t,n){"use strict";function i(){var e=this;e.actionValues=null,e.placement=null,e.ruleFunctions=[],e.cookieUtil=o}var r=e("../../../../lib"),o=e("../common/CookieUtil");e("../common/Constants");t.exports=i,i.evaluateDefault=function(){var e=this,t=e.cookieUtil.getTotalClipCount()+1,n=e.start||1;return t>=n},i.evaluateStart=function(){var e=this,t=e.cookieUtil.getTotalClipCount()+1,n=e.start||1;return t===n},i.evaluateOverlay=function(){var e,t,n,i,r=this,o=r.clipDuration,a=r.timeUpdate,s=r.overlayStart||0,l=r.repeat||0,c=r.lastShown||0,p=r.padding||0,d=r.duration||0;return c=c>=a?0:c,e=a-c,t=a-s,n=a+d+p,i=t>=0&&(!c||e>=l)&&o>=n,i&&(r.lastShown=a),i},i.evaluateFrequency=function(){var e=this,t=e.cookieUtil.getRecentClipCount(),n=e.interval||0;return t>=n||1===n},i.evaluateLength=function(){var e=this,t=e.length||0,n=e.cookieUtil.getRecentVideoLength();return n>=t},i.evaluateRatio=function(){var e=this,t=e.ratio||0,n=e.cookieUtil.getAdLength(),i=e.cookieUtil.getTotalVideoLength(),r=i/n;return!isNaN(r)&&r>=t},i.evaluateMinimumDuration=function(){var e=this,t=e.clipDuration||0,n=e.minimumDuration||0;return t>=n},i.evaluatefirstAdProbability=function(){var e=this,t=e.probability||100,n=100*Math.random(),i=e.cookieUtil.getTotalClipCount()+1,r=e.start||1;return i===r&&t>=n},i.prototype.addRuleFunction=function(e){var t=this;r.isFunction(e)&&t.ruleFunctions.push(e)},i.prototype.evaluate=function(e,t){var n=this,i=0,r=n.ruleFunctions,o=!0;for(n.clipDuration=e||0,n.timeUpdate=t||0,i=0;i<r.length;i++)o=o&&r[i].call(this);return o}},{"../../../../lib":"bRhrlU","../common/Constants":104,"../common/CookieUtil":105}],129:[function(e,t,n){"use strict";function i(){}var r=e("./ActionRule"),o=e("./RuleGroup"),a=e("./AdSpec");t.exports=i;var s={bumper:"clipGateway",preroll:"preroll",postroll:"postroll",overlay:"videoTimeline"};i.prototype.understandRules=function(e){if(!e||"{}"===JSON.stringify(e))return null;var t,n,i,a,s,l,c,p,d,u,_,v=this,y=new o,m=e.ruleGroup;for(t=m[0],a=t.actionRule2,!a||a instanceof Array||(s=a,a=[],a.push(s)),i=0;i<a.length;i++){for(s=a[i],l=new r,c=s["@basis"]||"",p=s["@type"]||"",d=s.actionParam||[],n=0;n<d.length;n++)u=d[n],"id"===u["@name"]?l.actionValues=(u["@value"]||"").split(","):"placement"===u["@name"]&&(l.placement=u["@value"]);"videoTimeline"===c?(l.type=c,v._parseNonLinearRules(l,s)):"triggers"===c&&(l.type=p,v._parseLinearRules(l,s)),_=y[l.type]||[],_.push(l)}return y},i.prototype._parseNonLinearRules=function(e,t){e&&t&&(e.start=parseInt(t["@startatclip"],10),e.duration=parseInt(t["@duration"],10),e.interval=parseInt(t["@intervalbetweenclips"],10),e.overlayStart=parseInt(t["@start"],10),e.padding=parseInt(t["@padding"],10),e.repeat=parseInt(t["@interval"],10),e.addRuleFunction(r.evaluateOverlay))},i.prototype._parseLinearRules=function(e,t){var n=this,i=!1,o=!1,a=!1,s=!1;if(e&&t){i="true"===t["@ratioEnabled"],o="true"===t["@minDurEnabled"],a="true"===t["@lengthEnabled"],s="true"===t["@firstAdProbabilityEnabled"],e.interval=parseInt(t["@interval"],10),e.start=parseInt(t["@start"],10),e.addRuleFunction(r.evaluateDefault),o&&(e.minimumDuration=parseInt(t["@minDuration"],10),e.addRuleFunction(r.evaluateMinimumDuration));var l;s?(e.probability=parseInt(t["@firstAdProbability"],10),l=r.evaluatefirstAdProbability):l=r.evaluateStart;var c;i?(e.ratio=parseInt(t["@ratio"],10),c=r.evaluateRatio):a?(e.length=parseInt(t["@length"],10),c=r.evaluateLength):c=r.evaluateFrequency,e.addRuleFunction(n._combineFunctions(l,c,"OR"))}},i.prototype._combineFunctions=function(e,t,n){var i=function(){return!1};return"AND"===n?i=function(){var n=this;return e.call(n)&&t.call(n)}:"OR"===n&&(i=function(){var n=this;return e.call(n)||t.call(n)}),i},i.prototype.onAdEvent=function(e,t,n,i){var r=(this.constructor,s[e]),o=null,l=null;return t&&t.preEvaluate&&(l=t.evaluate(r,n,i),l&&(o=new a(e,l.actionValues,l.placement,l.duration,l.subType))),o},i.prototype.preEvaluate=function(e,t){var n,i,r=(this.constructor,s[e]),o=[],l=null;if(t&&t.preEvaluate)for(l=t.preEvaluate(r),i=0;i<l.length;i++)n=l[i],o.push(new a(e,n.actionValues,n.placement));return o}},{"./ActionRule":128,"./AdSpec":131,"./RuleGroup":133}],130:[function(e,t,n){"use strict";function i(){var e=this;r.call(e)}var r=e("./AdEngine"),o=e("./RuleGroup"),a=e("./ActionRule"),s=e("../../util");t.exports=i,s.inherits(i,r);var l={bumper:"clipGateway",preroll:"preroll",postroll:"postroll",overlay:"videoTimeline"};i.prototype.understandRules=function(e){var t=this,n=new o,i=e.adBreakMap||{},r=function(){return!0};for(var s in i)if(i.hasOwnProperty(s)){var c=i[s],p=l[s],d=n[p],u=c.extensions||{},_=u.clientRules;if(_){var v=new a;v.type=p,v.addRuleFunction(a.evaluateDefault);var y=_.MinDuration>0,m=_.Length>0,f=_.Frequency>0,g=_.StartAtClip>0;y&&(v.minimumDuration=parseInt(_.MinDuration,10),v.addRuleFunction(a.evaluateMinimumDuration));var b=a.evaluateStart;g&&(v.start=parseInt(_.StartAtClip,10));var E;m?(v.length=parseInt(_.Length,10),E=a.evaluateLength):f?(v.interval=parseInt(_.Frequency,10),E=a.evaluateFrequency):E=r,v.addRuleFunction(t._combineFunctions(b,E,"OR")),d.push(v)}}return n}},{"../../util":"jJTEqU","./ActionRule":128,"./AdEngine":129,"./RuleGroup":133}],131:[function(e,t,n){"use strict";function i(e,t,n,i,r){var o=this;o.type=e||"",o.actionValues=t||[],o.placement=n||"",o.adCallSequence=1,o.duration=i||0,o.adCount=0,o.fallbackParam=!0,o.adIdBeacon=0,o.subType=r}t.exports=i},{}],132:[function(e,t,n){"use strict";function i(e,t){var n=this;n.actionValues=null,n.placement=null,n.ruleFunctions=[],n.cookieUtil=o,n.nfl_free_time=e,n.nfl_session_time=t,n.subType=""}var r=e("../../util"),o=e("../common/CookieUtil"),a=e("../common/Constants"),s=e("./ActionRule");r.inherits(i,s),t.exports=i,i.prototype._evaluateNFLPreroll=function(){var e=this,t=parseInt(e.cookieUtil.getNFLVideoLength(),10);return t>=e.nfl_free_time},i.prototype._isNFLSessionExpired=function(){var e=this,t=parseInt(e.cookieUtil.getNFLSession(),10);return(new Date).getTime()/1e3-t>=e.nfl_session_time},i.prototype.evaluate=function(){var e=this;return e._isNFLSessionExpired()?(e.actionValues=["clickable"],e.subType=a.NFL_ONLOAD,
!0):e._evaluateNFLPreroll()?(e.actionValues=["clickable"],e.subType=a.NFL_PREROLL,!0):!1}},{"../../util":"jJTEqU","../common/Constants":104,"../common/CookieUtil":105,"./ActionRule":128}],133:[function(e,t,n){"use strict";function i(){var e=this;e.preroll=[],e.clipGateway=[],e.videoTimeline=[],e.postroll=[]}t.exports=i;e("./ActionRule.js");i.prototype.evaluate=function(e,t,n){var i,r,o=this,a=o[e]||[],s=null;for(r=0;r<a.length;r++)i=a[r],i.type===e&&i.evaluate(t,n)&&(s=i);return s},i.prototype.preEvaluate=function(e){var t=this;return t[e]||[]}},{"./ActionRule.js":128}],134:[function(e,t,n){"use strict";function i(e,t){var n,i=/\{(\w)+\}/g;return n=e.replace(i,function(e){var n,i=/(\w)+/g,r=e.match(i),o=r[0],a="";if("beap_client_event"===o.toLowerCase()){for(var s in t)t.hasOwnProperty(s)&&(a+=s+"$"+t[s]+",");return a=a.substring(0,a.length-1)}return"1x1pixel"===o.toLowerCase()?"http://ads.yimg.com/a/a/vdo/a/1x1.gif":(n=t[o],(null===t[o]||void 0===t[o])&&(n=e),n)})}function r(e,t){for(var n,r=[],o=0;o<e.length;o++)n=e[o],n=i(n,t),a.sendImageBeacon(n),r.push(n);return r}function o(e,t){var n=e.adObj,i=n.beacons.impression||[],o=e.midrollbreak||0,a=e.midrolladsequence||0,s=n.duration||0,l=[];return l=l.concat(r(i,{cuuid:t,player_version:"nextgen",ad_break:o,ad_sequence:a,duration:s})),n.beacons.impression=null,l}var a=e("../../util"),s=e("../common/Errors"),l=e("../common/Constants"),a=e("../../util"),c={};c[l.NOAD]=125,c[s.AD_CALL_TIMEOUT]=102,c[s.EMPTY_RESPONSE]=5122,c[s.XML_PARSING]=108,c[s.NO_PARSER]=5125,c[s.MISSING_ADTGT]=122,c[s.PLAYER_TIMEOUT]=105,c[s.REQUEST_GENERIC]=104,c[s.INCOMPATIBLE_MEDIA]=120,c[s.MEDIA_PLAYBACK]=114,c[s.ADBLOCKER]=124,c[s.SSL_MISMATCH]=121,c[s.VPAID_TIMEOUT]=127,c[s.RESPONSE_GENERIC]=5130,c[s.VPAID_SWF_DOWNLOAD_ERROR]=8121;var p={};p[l.NOAD]=303,p[s.AD_CALL_TIMEOUT]=301,p[s.EMPTY_RESPONSE]=912,p[s.XML_PARSING]=100,p[s.NO_PARSER]=101,p[s.MISSING_ADTGT]=913,p[s.PLAYER_TIMEOUT]=402,p[s.REQUEST_GENERIC]=900,p[s.INCOMPATIBLE_MEDIA]=200,p[s.MEDIA_PLAYBACK]=405,p[s.VPAID_TIMEOUT]=901,n.onAdProgress=function(e,t,n,i,a){var s=e.adObj,c=s.isSkippable?2:1;n=Math.floor(n),t=Math.round(t);var p=25*Math.floor(4*t/n),d="playback"+p,u=s.type===l.VPAID,_=[];0!==p||u||null===s.beacons.impression||(_=_.concat(o(e,a)));var v=s.beacons[d]||[];return n=Math.floor(n),i.ad_dur=n,i.s=c,_=_.concat(r(v,i)),s.beacons[d]=null,t>=30&&(v=s.beacons.cpcv||[],_=_.concat(r(v,{ad_dur:n,s:c})),s.beacons.cpcv=null),_},n.onAdStart=function(e,t,n){var i=e.adObj,a=[],s=i.type===l.VPAID,c=i.type===l.OVERLAY;(s||c)&&(a=a.concat(o(e,n)));var p=i.beacons.bitrate||[];return a=a.concat(r(p,{type:"bitrate",value:t})),i.beacons.bitrate=null,a},n.onAdBreakStart=function(e){var t=e.adObj,n=[];if(t&&t.beacons){var i=t.beacons["ad-break-start"]||[];n=n.concat(r(i)),t.beacons["ad-break-start"]=null}return n},n.onAdClick=function(e,t,n){var i,o=e.adObj,a=o.beacons.interaction||[],s=o.beacons.clicktracking||[],l=a.concat(s),c=Math.floor(t||10),p=[];return i=(o.params.clickCount||0)+1,o.params.clickCount=i,p=p.concat(r(l,{type:"click",time:c,seq:i}))},n.onNoAd=function(e,t){var n,i,o,s,d=e.redirectList.length,u=d>0,_=e.adObj,v=[],y=a.parseDomain(e.redirectList[0]||"")||"",m=a.parseDomain(e.redirectList[d-1]||"")||"",f=e.midrollbreak||0,g=e.midrolladsequence||0,b=_.duration||0;return _=e.adObj||{},u||_.type!==l.NOAD?(i=e.errorState||_.type,o=c[i]||i,s=p[i],n=_.beacons.noadimpression||[],v=v.concat(r(n,{err_code:o,initial_domain:y,vendor_domain:m,cuuid:t,player_version:"nextgen",ad_break:f,ad_sequence:g,duration:b})),_.beacons.noadimpression=null,n=_.beacons.errorimpression||[],v=v.concat(r(n,{err_code:s})),_.beacons.errorimpression=null):(n=_.beacons.impression||[],v=v.concat(r(n,{cuuid:t,player_version:"nextgen",ad_break:f,ad_sequence:g,duration:b})),_.beacons.impression=null),v},n.onCompanionDisplayed=function(e){r(e,{})}},{"../../util":"jJTEqU","../common/Constants":104,"../common/Errors":106}],135:[function(e,t,n){"use strict";function i(){var e=this;e.bumper=null,e.preroll=null,e.midroll=null,e.postroll=null}function r(){var e=this;e.adOppEvents=[],e.adCallEvents=[],e.adDeliveryEvents=[]}function o(){var e=this;e.playContext="",e.networkName="",e.adPosition="none",e.subType="",e.taken=!1}function a(){var e=this;e.responseCode="",e.responseType="",e.firstRedirect="",e.redirectCount=0,e.adCallSequence=0,e.networkName="",e.creativeId="",e.bookingId="",e.cacheHit="",e.cacheId="",e.latency=null,e.clipStarted=!1,e.midrollAdBreak="",e.midrollAdPos="",e.adSystem="",e.br_id=""}function s(){var e=this;e.mediaStartLatency=null,e.serveId=null,e.error=""}function l(){var e=this;e.latency=-1}function c(e,t,n,i){var r=this;r._yvapBus=e,r.yvapVersion=t||"default",r.accountId=n||"test",r.playerTimeout=i,r._adProfileMap={},r._allStats={},r._clipStartBoolean={},r._archiveStats={},r._yvapBus.subscribe(d.BEGIN_AD_EXP,r._onBeginAdExperience,r),r._yvapBus.subscribe(d.AD_OPPORTUNITY,r._onAdOpportunity,r),r._yvapBus.subscribe(d.NULL_AD_OPPORTUNITY,r._onNullAdOpportunity,r),r._yvapBus.subscribe(d.AD_CALL_START,r._onAdCallStart,r),r._yvapBus.subscribe(d.AD_CALL_END,r._onAdCallEnd,r),r._yvapBus.subscribe(d.AD_SUBMITTED,r._onAdSubmitted,r),r._yvapBus.subscribe(d.AD_DELIVERED,r._onAdDelivered,r),r._yvapBus.subscribe(d.AD_DELIVERY_ERROR,r._onAdDeliveryError,r),r._yvapBus.subscribe(d.VIDEO_START,r._onContentVideoStart,r),r._yvapBus.subscribe(d.VIDEO_END,r._onContentVideoEnd,r),r._yvapBus.subscribe(d.AD_BREAK_ENDED,r._midRollEnd,r),r._yvapBus.subscribe(d.AD_BREAK_SUBMITTED,r._onAdBreakSubmission,r)}var p=e("../../util"),d=e("../common/Events"),u=e("../common/Errors"),_=e("../common/Constants");t.exports=c;var v={};v[_.NOAD]=2,v[_.AD]=2,v[_.VPAID]=4,v.ERROR=106;var y={};y[_.NOAD]=1,y[_.AD]=2,y[_.VPAID]=2,y[u.AD_CALL_TIMEOUT]=102,y[u.EMPTY_RESPONSE]=5122,y[u.XML_PARSING]=108,y[u.NO_PARSER]=5125,y[u.MISSING_ADTGT]=122,y[u.PLAYER_TIMEOUT]=105,y[u.REQUEST_GENERIC]=104,y[u.THIRD_PARTY_NO_AD]=125,y[u.SSL_MISMATCH]=121,y[u.MISSING_SPACEID]=131,y[u.RESPONSE_GENERIC]=5130,y[u.ADBLOCKER]=124;var m={};m[_.CACHE_L0]=1,m[_.CACHE_L1]=2,m[_.CACHE_L2]=3;var f=[_.PREROLL,_.BUMPER,_.CLIP_START,_.MIDROLL,_.POSTROLL,_.CLIP_END],g={};g[u.INCOMPATIBLE_MEDIA]=120,g[u.MEDIA_PLAYBACK]=114,g[u.GENERIC]=112,g[u.VPAID_TIMEOUT]=115,g[u.ADBLOCKER]=124,g[u.VPAID_SWF_DOWNLOAD_ERROR]=8121;var b={};b[_.NOAD]=125,b[u.AD_CALL_TIMEOUT]=102,b[u.EMPTY_RESPONSE]=124,b[u.XML_PARSING]=108,b[u.MISSING_ADTGT]=122,b[u.PLAYER_TIMEOUT]=105,b[u.REQUEST_GENERIC]=104,b[u.INCOMPATIBLE_MEDIA]=120,b[u.MEDIA_PLAYBACK]=114,b[u.VPAID_TIMEOUT]=127;var E=1,h=2;a.prototype.translate=function(e){var t,n,i,r=this;e&&(t=e.adObj||{},e.errorState?r.responseType=v.ERROR:t.type&&(r.responseType=v[t.type]),n=e.errorState||t.type,r.responseCode=y[n]||"",r.firstRedirect=p.parseDomain(e.redirectList[0])||"",r.redirectCount=e.redirectList.length,n===_.NOAD&&r.redirectCount>0&&(r.responseCode=y[u.THIRD_PARTY_NO_AD]),i=e.cacheState||"",r.cacheHit=m[i]||"",r.creativeId=t.creativeId||"",r.bookingId=t.bookingId||"",r.adId=t.adId||"",r.adXmlParseErr=t.adXmlParseErr||"",e.type===_.MIDROLL&&(r.midrollAdBreak=e.midrollbreak,r.midrollAdPos=e.midrolladsequence))},l.prototype.start=function(){var e=this;e._startTime=(new Date).getTime()},l.prototype.end=function(){var e=this;e._startTime&&(e._latency=(new Date).getTime()-e._startTime)},l.prototype.getLatency=function(){var e=this;return e._latency},c.prototype._onBeginAdExperience=function(e){var t=this;e&&(t._clipStartBoolean[e]=!1,t._allStats[e]=null)},c.prototype._onNullAdOpportunity=function(e,t){var n=this,i=new o;i.adPosition=t,i.taken=h,n._fireAdOpportunity(i)},c.prototype._onAdOpportunity=function(e,t,n,i,r,a){var s,l=this,c=null!==n&&null!==i,p=new o;a||(a=0),p.adPosition=t,n&&(p.subType=n.subType||t),r&&(p.playContext=r.licenseId),i&&(p.networkName=i.communicatorName),p.taken=c?E:h,e&&(s=l._getPositionStats(e,t),s.adOppEvents[a]=p)},c.prototype._onAdCallStart=function(e){var t,n,i=this;e&&(t="adCall"+Math.floor(100*Math.random())+(new Date).getTime(),n=new l,n.start(),i._adProfileMap[t]=n,e.adCallIdentifier=t)},c.prototype._onAdCallEnd=function(e,t){var n,i,r=this;e&&t&&(n=e.adCallIdentifier||"",i=r._adProfileMap[n],i&&(i.end(),t.adCallIdentifier=n))},c.prototype._onAdSubmitted=function(e,t){var n,i,r,o,s,l,c,p,d=this,u=0;t&&e&&(n=t.adCallIdentifier,s=t.type,o=d._adProfileMap[n],c=t.communicatorSpec,p=t.adSpec,s===_.MIDROLL&&(u=t.midrolladsequence),i=new a,i.position=s,l=d._getPositionStats(e,s),l.adCallEvents[u]=i,i.latency=o?o.getLatency():0,i.clipStarted=d._clipStartBoolean[e]?E:h,i.adCallSequence=p.adCallSequence,i.networkName=c.communicatorName,i.translate(t),i.adSystem=t.adSystem||"",i.br_id=t.br_id||"",d._clipStartBoolean[e]&&s!==_.MIDROLL&&(l=d._getArchivedPositionStats(e,s),l&&(r=l.adOppEvents[u],l.adCallEvents[u]=i,d._fireAdCall(r,i))))},c.prototype._onAdBreakSubmission=function(e,t,n,i,r,o,a,s){var l,c,p=this;n=n||0,i=i||0,r=r||0,o=o||0,a=a||0,s=s||0,e&&t===_.MIDROLL&&(l={vx:"99",cf02:p.yvapVersion,brId:s},c={vx:"99",cf02:p.yvapVersion,brId:s,oppN:n,submit:i,noads:r,VAST:o,VPAID:a,ptval:p.playerTimeout},p._yvapBus.publish(d.AD_METRIC,{ywa:l,qos:c}))},c.prototype._getArchivedPositionStats=function(e,t){var n,i=this;return n=i._archiveStats[e],n?n[t]:null},c.prototype._getPositionStats=function(e,t){var n,o,a=this;return n=a._allStats[e]||new i,a._allStats[e]=n,o=n[t]||new r,n[t]=o,o},c.prototype._archivePositionStats=function(e,t,n){var o,a,s,l,c,p,d=this;n=n||0,o=d._allStats[e],s=o[t],o[t]&&(l=o[t].adOppEvents[n],p=o[t].adDeliveryEvents[n],c=o[t].adCallEvents[n],o[t].adOppEvents[n]=null,o[t].adCallEvents[n]=null,o[t].adDeliveryEvents[n]=null),a=d._archiveStats[e]||new i,a[t]=a[t]||new r,l&&(a[t].adOppEvents[n]=l),l&&(a[t].adCallEvents[n]=c),l&&(a[t].adDeliveryEvents[n]=p),d._archiveStats[e]=a},c.prototype._fireForPrecedingPositions=function(e,t){for(var n,i,r,o=this,a=0;a<f.length&&f[a]!==t;a++){if(n=o._getPositionStats(e,f[a]))for(var s=0;s<n.adOppEvents.length;s++)i=n.adOppEvents[s],o._fireAdOpportunity(i),r=n.adCallEvents[s],o._fireAdCall(i,r);o._archivePositionStats(e,f[a])}},c.prototype._onAdDelivered=function(e,t,n,i,r,o,a){var l,c,p,u,v,y,m,f=this,g=r||0,b=o||0,E=a||0,h=0,A=0;if(f._fireForPrecedingPositions(e,t),i&&(A=i.adObj.duration||0),i&&i.type===_.MIDROLL&&(h=i.midrolladsequence),e&&t){if(p=new s,p.mediaStartLatency=n,i&&i.adObj&&i.adObj.serveId&&(p.serveId=i.adObj.serveId),l=f._getPositionStats(e,t),c=f._getArchivedPositionStats(e,t),l.adDeliveryEvents[h]=p,u=l.adOppEvents[h],f._fireAdOpportunity(u),v=l.adCallEvents[h],f._fireAdCall(u,v),c&&(u=u||c.adOppEvents[h],v=v||c.adCallEvents[h]),u&&v&&(y={vx:"12",cf60:v.networkName,cf65:u.adPosition,cf66:v.firstRedirect,cf70:v.redirectCount,cf03:f.accountId,cf02:f.yvapVersion,cf47:v.responseCode,cf48:v.responseType,cf89:v.creativeId,cf90:v.bookingId,cf250:v.cacheHit,cf56:p.mediaStartLatency,cf84:v.adCallSequence,cf17:v.midrollAdBreak,cf39:A},m={vx:"12",cf60:v.networkName,cf65:u.adPosition,subT:u.subType,cf66:v.firstRedirect,cf70:v.redirectCount,cf03:f.accountId,cf02:f.yvapVersion,cf47:v.responseCode,cf48:v.responseType,cf89:v.creativeId,cf90:v.bookingId,cf250:v.cacheHit,cf56:p.mediaStartLatency,cf84:v.adCallSequence,midrolltime:v.midrollAdBreak,midrollpos:v.midrollAdPos,duration:A,ptval:f.playerTimeout,vsl:g,vil:b,vst:E,serveId:p.serveId,ad_id:v.adId,ad_xml_err:v.adXmlParseErr},f._yvapBus.publish(d.AD_METRIC,{ywa:y,qos:m}),window.showLatencies)){var S={vsl:g,vil:b,vst:E,aml:p.mediaStartLatency};window.showLatencies(S,!0)}f._archivePositionStats(e,t,h)}},c.prototype._onAdDeliveryError=function(e,t,n,i,r,o,a){var l,c,p,v,y,m,f,b=this,E=0;n!==_.NOAD&&(b._fireForPrecedingPositions(e,t),i&&i.type===_.MIDROLL&&(E=i.midrolladsequence),e&&t&&(p=new s,p.error=n||u.GENERIC,m=b._getPositionStats(e,t),f=b._getArchivedPositionStats(e,t),m.adDeliveryEvent=p,l=m.adOppEvents[E],b._fireAdOpportunity(l),c=m.adCallEvents[E],b._fireAdCall(l,c),f&&(l=l||f.adOppEvents[E],c=c||f.adCallEvents[E]),l&&c&&(v={vx:"18",cf60:c.networkName,cf65:l.adPosition,cf66:c.firstRedirect,cf70:c.redirectCount,cf03:b.accountId,cf02:b.yvapVersion,cf89:c.creativeId,cf90:c.bookingId,cf47:c.responseCode,cf48:c.responseType,cf93:g[p.error],cf84:c.adCallSequence},y={vx:"18",cf60:c.networkName,cf65:l.adPosition,subT:l.subType,cf66:c.firstRedirect,cf70:c.redirectCount,cf03:b.accountId,cf02:b.yvapVersion,cf89:c.creativeId,cf90:c.bookingId,cf47:c.responseCode,cf48:c.responseType,cf93:g[p.error],cf84:c.adCallSequence,midrolltime:c.midrollAdBreak,midrollpos:c.midrollAdPos,ptval:b.playerTimeout,vsl:r,vil:o,vpaidS:a,ad_id:c.adId,serveId:p.serveId,ad_xml_err:c.adXmlParseErr},b._yvapBus.publish(d.AD_METRIC,{ywa:v,qos:y})),b._archivePositionStats(e,t,E)))},c.prototype._onContentVideoStart=function(e){var t=this;t._clipStartBoolean[e]=!0,t._fireForPrecedingPositions(e,_.CLIP_START)},c.prototype._midRollEnd=function(e){var t=this;t._clipStartBoolean[e]=!0,t._fireForPrecedingPositions(e,_.POSTROLL)},c.prototype._onContentVideoEnd=function(e){var t=this;t._fireForPrecedingPositions(e,_.CLIP_END)},c.prototype._fireAdOpportunity=function(e){var t,n,i=this;e&&(t={vx:"16",cf60:e.networkName,cf65:e.adPosition,cf03:i.accountId,cf02:i.yvapVersion,cf82:e.taken},n={vx:"16",cf60:e.networkName,cf65:e.adPosition,subT:e.subType,cf03:i.accountId,cf02:i.yvapVersion,cf82:e.taken,ptval:i.playerTimeout},i._yvapBus.publish(d.AD_METRIC,{ywa:t,qos:n}))},c.prototype._fireAdCall=function(e,t){var n,i,r,o=this;if(e&&t&&(r=t.clipStarted?E:h,n={vx:"7",cf60:t.networkName,cf65:e.adPosition,cf66:t.firstRedirect,cf70:t.redirectCount,cf03:o.accountId,cf02:o.yvapVersion,cf47:t.responseCode,cf48:t.responseType,cf67:t.clipStarted,cf89:t.creativeId,cf90:t.bookingId,cf250:t.cacheHit,cf61:e.playContext,cf84:t.adCallSequence},i={vx:"7",cf60:t.networkName,cf65:e.adPosition,subT:e.subType,cf66:t.firstRedirect,cf70:t.redirectCount,cf03:o.accountId,cf02:o.yvapVersion,cf47:t.responseCode,cf48:t.responseType,cf67:t.latency,cf89:t.creativeId,cf90:t.bookingId,cf250:t.cacheHit,cf61:e.playContext,cf84:t.adCallSequence,timeout:t.clipStarted,ptval:o.playerTimeout,adblock:_.ADBLOCKER,adSystem:t.adSystem,br_id:t.br_id,ad_id:t.adId,ad_xml_err:t.adXmlParseErr},o._yvapBus.publish(d.AD_METRIC,{ywa:n,qos:i}),window.showLatencies)){var a={adl:t.latency};window.showLatencies(a)}},c.prototype.getArchive=function(){var e=this;return e._archiveStats}},{"../../util":"jJTEqU","../common/Constants":104,"../common/Errors":106,"../common/Events":107}],136:[function(e,t,n){"use strict";function i(){var e=this;e.diagnostic=null}var r=e("../../views/ads-diagnostics.html"),o=e("../../util"),a=e("../common/Constants");t.exports=i,i.prototype.generateDiagnostics=function(e){var t=this,n=[];for(var i in e)if(e.hasOwnProperty(i)){var s={};s.clipId=i;var l=e[i];s.data=[];var c={};c.position=a.PREROLL,c.data=t._generatePositionStat(l.preroll),s.data.push(c);var p={};p.position=a.BUMPER,p.data=t._generatePositionStat(l.bumper),s.data.push(p);var d={};d.position=a.MIDROLL,d.data=t._generatePositionStat(l.midroll),s.data.push(d);var u={};u.position=a.POSTROLL,u.data=t._generatePositionStat(l.postroll),s.data.push(u),n.push(s)}var _;return n&&(_=o.render(r,{clipStats:n})),_},i.prototype._generatePositionStat=function(e){var t=[];if(e)for(var n=e.adOppEvents,i=e.adCallEvents,r=e.adDeliveryEvents,o=0;o<n.length;o++){var a={},s=n[o];s&&(a.taken=1===s.taken?!0:!1,a.communicator=s.networkName);var l=i[o];l&&(a.responseCode=l.responseCode,a.responseType=l.responseType,a.firstRedirect=l.firstRedirect,a.redirectCount=l.redirectCount);var c=r[o];c&&(a.error=c.error,a.mediaStartLatency=c.mediaStartLatency),t.push(a)}return t}},{"../../util":"jJTEqU","../../views/ads-diagnostics.html":76,"../common/Constants":104}],137:[function(e,t,n){"use strict";function i(e,t){var n=this;n._reset(),n._eventBus=e,n._rendererDiv=t,n._rendererDivRect=t&&t.getClientRects?t.getClientRects()[0]:null,n._eventBus.subscribe(l.AD_PLAYBACK_ENDED,n._stop,n),n._eventBus.subscribe(l.Ad.PAUSE,n._pause,n),n._eventBus.subscribe(l.AD_PLAYBACK_RESUMED,n._resume,n),n._eventBus.subscribe(l.FULLSCREEN_CHANGE,n._toggleFullScreenSetting,n),n._rendererDiv&&(n._rendererDiv.id=n._rendererDiv.id?n._rendererDiv.id:"vidView001")}var r=e("../../util"),o=(e("../../../../lib"),e("../../../../lib/logger")),a=e("../yvap-util"),s=(e("../common/Events"),e("../common/Errors"),e("../common/Constants")),l=e("../../event");t.exports=i,i.prototype._reset=function(){var e=this;clearInterval(e._timer),e._timer=null,e._ad=null,e._communicatorName=null,e._isFullScreen=!1,e._firstCheck=!0,e._viewAtInit=0,e._viewabilityBeaconFired=!1,e._viewableTime=0,e._totalViewableTime=0,e._totalPlaybackDuration=0,e._started=0,e._percentViewArr=[],e._isViewabilityMeasurable=s.UNKNOWN},i.prototype._getViewability=function(){var e=this,t=null,n=0,i=e._rendererDiv.id;if(e._isIFrame){var r=top.document.querySelector('iframe[src="'+location.href+'"]');r.getAttribute("id")||r.setAttribute("id","vidView"+(new Date).getTime()),i=r.getAttribute("id")}e._isFullScreen?n=1:(e._darla&&e._darla.yvap.view&&(t=e._darla.yvap.view(i)),n=t?t.iv:0),e._handleViewability(n)},i.prototype._handleViewability=function(e){var t=this;if(t._totalPlaybackDuration=t._firstCheck?0:t._totalPlaybackDuration+s.INTERNAL_POLLING_INTERVAL,e>=s.VIEWABILITY_THRESHOLD&&!t._firstCheck?(t._viewableTime=t._viewableTime+s.INTERNAL_POLLING_INTERVAL,t._totalViewableTime=t._totalViewableTime+s.INTERNAL_POLLING_INTERVAL):t._viewableTime=0,t._firstCheck&&(t._firstCheck=!1,t._viewAtInit=e>=s.VIEWABILITY_THRESHOLD?1:0),t._percentViewArr.push(e),t._viewableTime>=s.TIME_FOR_VIEWABLE_IMPRESSION&&!t._viewabilityBeaconFired){var n=t._getAvBeaconUrl(e),i=t._ad.beacons.viewableimpression||[];if(n||i.length>0){if(n&&r.sendImageBeacon(n),i.length>0)for(var a=0;a<i.length;a++)t._processYamPlusBeacon(i[a],e);o.log("ViewabilityManager: beacon fired"),t._viewabilityBeaconFired=!0}else o.log("ViewabilityManager: beacon params not found.")}},i.prototype._processYamPlusBeacon=function(e,t){var n=this;if(e){var i,o={},a=(new Date).getTime();o.pctview=100*t,o.initview=n._viewAtInit,o.MeasurementType=1,o.Timestamp=a,i=n._populateYamPlusMacros(e,o),r.sendImageBeacon(i)}},i.prototype._populateYamPlusMacros=function(e,t){var n,i=/\{(\w)+\}|\%(\w)+\%/g,r=t,o=function(e){var t,n=/(\w)+/g,i=e.match(n),o=i[0];return t=r[o],"undefined"!=typeof t&&null!==t?t:e};return n=e.replace(i,o)},i.prototype._getAvBeaconUrl=function(e){var t=this,n=t._getBeaconData(e),i="";return n&&t._darla.yvap.avb&&(i=t._darla.yvap.avb(n.spaceId,n.pvId,n.position,n.serveTime)),i},i.prototype._getBeaconData=function(e){var t=this,n={},i={};return i.size=t._rendererDivRect?t._rendererDivRect.width+"x"+t._rendererDivRect.height:"",i.bookID=t._ad.bookingId,i.ioID=999999,i.lineID=999999,i.adID=999999,i.slotID=999999,i.creativeID=t._ad.creativeId,i.impID=t._ad.impressionId,i.pctIV=100*e,i.initIV=t._viewAtInit,n.spaceId=t._ad.spaceId,n.pvId=t._ad.serveId,n.serveTime=t._ad.serveTime,n.position={},n.position[t._ad.position]=i,n},i.prototype._toggleFullScreenSetting=function(){var e=this,t=e._isFullScreen;e._isFullScreen=t?!1:!0},i.prototype._pause=function(){var e=this;clearInterval(e._timer)},i.prototype._resume=function(e){var t=this;1===t._started&&(t._timer=setInterval(function(){t._getViewability()},s.INTERNAL_POLLING_INTERVAL))},i.prototype._stop=function(e){var t=this;clearInterval(t._timer),t._started=0},i.prototype.start=function(e,t){var n,i=this;if(i._reset(),i._rendererDiv&&e)if(i._ad=e.adObj,n=e.communicatorSpec,i._communicatorName=n&&n.communicatorName?n.communicatorName:"",i._communicatorName===s.MME||i._communicatorName===s.PREVIEW)if(a.isViewabilityMeasurable()){var r=a.getDARLA();i._darla=r?r.darla:null,i._isIFrame=r?r.isIFrame:0,i._isViewabilityMeasurable=s.VIEWABILITY_MEASURABLE,i._started=1,i._timer=setInterval(function(){i._getViewability()},s.INTERNAL_POLLING_INTERVAL)}else i._isViewabilityMeasurable=a.getViewabilityNonMeasurableValue(),o.log("ViewabilityManager: Viewability Not measureable: "+i._isViewabilityMeasurable);else o.log("ViewabilityManager: Not a MME Ad. Viewability will not be measured");else o.log("ViewabilityManager: Ad object not present OR Videoplayer element not found")},i.prototype.getViewabilitySummary=function(){var e=this,t={data:e._percentViewArr,max:function(){return this.data.length?Math.max.apply(Math,this.data):0},min:function(){return this.data.length?Math.min.apply(Math,this.data):0},avg:function(){for(var e=this.data,t=e.length,n=0,i=0,r=0;t>r;r++)n+=e[r];return i=n/t||0}},n={vi_tpd:e._totalPlaybackDuration,vi_tvd:e._totalViewableTime,vi_mpv:(100*t.min()).toFixed(0),vi_mxpv:(100*t.max()).toFixed(0),vi_apv:(100*t.avg()).toFixed(0),vi_pw:e._rendererDivRect.width,vi_ph:e._rendererDivRect.height,vi_psnd:s.PLAYER_SOUND_ON,vi_ploc:s.UNKNOWN,vi_pib:s.UNKNOWN,vi_pap:s.UNKNOWN,vi_m:e._isViewabilityMeasurable};return n}},{"../../../../lib":"bRhrlU","../../../../lib/logger":"IS9j5T","../../event":"YJm+dH","../../util":"jJTEqU","../common/Constants":104,"../common/Errors":106,"../common/Events":107,"../yvap-util":144}],138:[function(e,t,n){"use strict";function i(e,t,n,i,r){var o=this;t&&(o.playbackId=e||"",o.resourceType=t.resourceType||"",o.resourceUrl=t.resourceUrl||"",o.scalable=t.scalable||"",o.duration=i||0,o.position=n||"",r&&(o.adParams=r.AdParameters))}t.exports=i},{}],139:[function(e,t,n){"use strict";function i(e){var t=this;t._customParams={},t.rules=null,t.allocation=null,t.adList=null,t.rendererType=null,t.adTargeting=null,t.clipCategory=null,t.iceBreaker=null,e&&(t.clipId=e.clipId,t.clipDuration=e.clipDuration,t.licenseId=e.licenseId,t.spaceId=e.spaceId,t.playlistId=e.playlistId,t.rendererType=e.rendererType,e.yvap&&t._processAdData(e.yvap),t.isLive=e.isLive||!1,t.isLive&&0===t.clipDuration&&(t.clipDuration=450))}t.exports=i;var r=e("./common/Constants"),o=(e("./communicator/VMAPParser"),e("./communicator/ParserManager"));i.prototype.addCustomParams=function(e,t){var n=this;n._customParams[e]=t},i.prototype.getCustomParams=function(e){var t=this;return t._customParams[e]},i.prototype.setAdData=function(e){var t=this;t._processAdData(e)},i.prototype._processAdData=function(e){var t,n=this;if(e){var i=e.adRules;if(i){var a=i.result;if(a){n.rules=a.ruleGroup||{},n.allocation=a.allocation||{},n.rendererType=a.rendererType||"",n.adList=a.adList||[];var s=a.vmap;s&&(t=o.parseAdXml(s),t&&(n.vmapData=t))}else i.adResponse&&(t=o.parseAdXml(i.adResponse),t&&(n.vmapData=t))}n.adTargeting=e.ad_targeting||"",n.clipCategory=e.category||"",n[r.YVAP_INFO_AD_BREAKS]=e[r.YVAP_INFO_AD_BREAKS]||"",n.content_provider_data=e.content_provider_data,n.topics=e.topics}},i.prototype.clean=function(){var e=this;e.rules=null,e.allocation=null,e.rendererType=null,e.adList=null,e.iceBreaker=null,e.vmapData=null,e[r.YVAP_INFO_AD_BREAKS]=null}},{"./common/Constants":104,"./communicator/ParserManager":119,"./communicator/VMAPParser":125}],140:[function(e,t,n){"use strict";function i(e,t){var n=this;n._yvapBus=e,t&&t.getElementsByTagName&&(n._container=t),n._overlayDiv=document.createElement("div"),n._overlayDiv.style.display="inline-block",n._overlayDiv.style.textAlign="auto",n._overlayDiv.style.position="absolute",n._currentDom=null,n._displayTimer=null;n.svgElem=document.createElement("div"),n.svgElem.style.display="block",n.svgElem.style.position="absolute",n.svgElem.style.top="0",n.svgElem.style.right="0",n.svgElem.style.backgroundColor="white",n.svgElem.style.pointerEvents="auto",n.svgElem.style.width="10px",n.svgElem.style.height="10px",n.svgElem.innerHTML='<svg width="10" height="10" xmlns="http://www.w3.org/2000/svg" style="position: absolute; top:0px; right:0px;">        <g>        <title>Layer 1</title>        <polygon fill="#000000" points="10,1.502 8.498,0 5,3.499 1.502,0.001 0,1.503 3.498,5 0,8.498 1.502,10 5,6.502 8.498,10 10,8.498    6.502,5 " id="svg_1"/>        </g>        </svg>',n.svgElem.addEventListener("click",function(e){n.removeOverlay()})}var r=e("../common/Events"),o=e("../../../../lib/logger");t.exports=i,i.prototype.renderOverlay=function(e){var t,n,i,a,s,l,c,p=this,d=document.createElement("div");if(!p._currentDom&&e&&(c=e.playbackId||"",n=e.resourceType||"",t=e.resourceUrl||"",a=e.scalable||!1,s=e.duration||0,l=e.position,"image/jpeg"===n&&t?(i=document.createElement("img"),i.src=t,a&&o.log("scaling not implemented")):o.log("overlay is not known type: "+n+", aborting overlay rendering"),i&&p._container)){p._overlayDiv.style[l]="0px",d.appendChild(i),d.appendChild(p.svgElem),p._currentDom=d;var u=p._overlayDiv.style;u.position="absolute",u.display="block",p._overlayDiv.style[l]="0px",u.height="50px",u.width="100%",u.zIndex=100,u.pointerEvents="none",u.background="transparent",u.textAlign="center",d.style.position="relative",d.style.display="inline-block",d.style.textAlign="auto",d.style.background="transparent",d.style.textAlign="center",d.style.height="50px",p._container.appendChild(p._overlayDiv),p._overlayDiv.appendChild(d),p._displayTimer=setTimeout(function(){p.removeOverlay()},1e3*s),i.style.pointerEvents="auto",i.style.opacity="0.5",i.addEventListener("click",function(e){p._yvapBus&&p._yvapBus.publish(r.OVERLAY_CLICK,c)}),i.addEventListener("mouseover",function(e){e.target.style.opacity="1.0"}),i.addEventListener("mouseout",function(e){e.target.style.opacity="0.85"}),p._yvapBus&&p._yvapBus.publish(r.OVERLAY_RENDERED,c)}},i.prototype.removeOverlay=function(){var e=this;e._container&&e._currentDom&&e._overlayDiv&&(e._overlayDiv.removeChild(e._currentDom),e._container.removeChild(e._overlayDiv),e._currentDom=null),clearTimeout(e._displayTimer)}},{"../../../../lib/logger":"IS9j5T","../common/Events":107}],141:[function(e,t,n){"use strict";function i(e,t,n,i){var r=this,p=e.yvap.accountId,d=e.yvap.timeout;r._config=e,r._eventBus=t,r._yvapBus=new a("yvap"),r._rendererDiv=n||{},r._player=i||{},r._standaloneMode=e.yvap.standaloneAd&&e.yvap.standaloneAd.xml?!0:!1,r._cacheManager=null,r._analytics=new T(r._yvapBus,"fireball",p,d),r._viewabilityManager=new L(r._eventBus,r._rendererDiv),r._adEngine=null,r._allocationManager=E,r._adPlaybackManager=A,r._diagnostics=new S;var u=r._rendererDiv.clientWidth,_=r._rendererDiv.clientHeight;r._vpaidjsRenderer=new h(r._eventBus),r._vpaidflashInterface=new M(r._eventBus,r._yvapBus,u,_,i),r._overlayRenderer=new C(r._yvapBus,r._rendererDiv),r._midrollsHelper=null,(!s.ie||s.ie>=10)&&O.detectAdBlocker(function(e){c.ADBLOCKER=e}),r._currentClipId="",r.playbackMap={},r.waitlistMap={},r._videoStartTime=0,r._lastVolume=1,"number"==typeof e.yvap.volume&&(r._lastVolume=e.yvap.volume),r._mute=e.yvap.mute||!1,r._onVolumeChange(r._lastVolume),r._onMuteChange(r._mute),r._clipStarted=!1,r._yvapBus.subscribe(l.CACHE_UPDATE,r._onCacheUpdate,r),r._yvapBus.subscribe(l.CACHE_REFRESH_REQUEST,r._onCacheRefreshRequest,r),r._yvapBus.subscribe(l.CACHE_UPDATE,r._vpaidjsRenderer.onAdUpdateInCache,r._vpaidjsRenderer),r._yvapBus.subscribe(l.AD_METRIC,r._onAdMetric,r),t.subscribe(o.PLAYBACK_PROGRESS,r._onContentVideoProgress,r),t.subscribe(o.PLAYBACK_STARTED,r._onContentVideoStart,r),t.subscribe(o.PLAYBACK_ENDED,r._onContentVideoEnd,r),t.subscribe(o.AD_PLAYBACK_STARTED,r._onAdStart,r),t.subscribe(o.AD_PLAYBACK_PROGRESS,r._onAdProgress,r),t.subscribe(o.AD_PLAYBACK_ENDED,r._onAdEnd,r),t.subscribe(o.AD_CLICK,r._onAdClick,r),t.subscribe(o.Ad.NO_PLAYABLE_STREAM,r._onAdNotPlayable,r),t.subscribe(o.Ad.NO_AD,r._onNoAd,r),t.subscribe(o.AD_PLAYBACK_ERROR,r._onAdPlaybackError,r),t.subscribe(o.API.PLAYBACK_SEEK_COMPLETE,r._onContentVideoSeek,r),t.subscribe(o.PLAYER_RESIZE,r._onPlayerResize,r),t.subscribe(o.CONTROLS_SET_VOLUME,r._onVolumeChange,r),t.subscribe(o.CONTROLS_SET_MUTE,r._onMuteChange,r),t.subscribe(o.AD_PLAYBACK_REQUEST,r._onAdPlaybackRequest,r),t.subscribe(o.SWF_READY,r._onSwfReady,r),t.subscribe(o.PAUSE_VPAID,r._onPauseVpaid,r),t.subscribe(o.RESUME_VPAID,r._onResumeVpaid,r),r._yvapBus.subscribe(l.OVERLAY_CLICK,r._onOverlayAdClick,r),r._yvapBus.subscribe(l.OVERLAY_RENDERED,r._onOverlayAdStart,r),t.subscribe(o.AD_BREAK_STARTED,r._midRollStart,r),t.subscribe(o.AD_BREAK_ENDED,r._midRollEnd,r),r._secretCode="",r._theBestTeam(),r._standaloneMode&&(r._standaloneAdHelper=new j(r._yvapBus,e.yvap.standaloneAd))}t.exports=i;var r=e("../../../lib/logger"),o=e("../event"),a=e("../../../lib/event-bus"),s=e("../../../lib/user-agent"),l=e("./common/Events"),c=e("./common/Constants"),p=e("./common/Errors"),d=e("./ads-json"),u=e("./engine/AdSpec"),_=e("./player-data"),v=e("./engine/AdEngine"),y=e("./engine/AdEngineIceBreaker"),m=e("./engine/NFLRules"),f=(e("./engine/ActionRule"),e("./allocation/RefreshAllocation")),g=e("./cache/CacheManager"),b=e("./cache/CacheManagerIceBreaker"),E=e("./allocation/AllocationManager"),h=e("./vpaid/vpaidjs-renderer"),A=e("./monitoring/AdPlaybackManager"),S=e("./monitoring/Diagnostics"),T=e("./monitoring/Analytics"),L=e("./monitoring/ViewabilityManager"),I=e("./engine/RuleGroup"),M=e("./vpaid/VPAIDFlashInterface"),C=e("./renderer/HTML5OverlayRenderer"),N=e("./communicator/CommunicatorFactory"),R=e("./allocation/CommunicatorSpec"),D=e("./common/CookieUtil"),O=e("./yvap-util"),P=e("./overlay-json"),w=e("./communicator/MidRollsHelper"),j=e("./communicator/StandaloneAdHelper"),k={};k[c.BUMPER]=!0,k[c.PREROLL]=!0,k[c.POSTROLL]=!0,k[c.NON_LINEAR]=!1;var x=e("./communicator/ParserManager"),B=e("./yvap-util");e("./communicator/YAXvCommunicator");i.prototype._parseNewPlayerData=function(e){var t=this;t._cacheManager||(t._cacheManager=new b(t._yvapBus)),t._adEngine||(t._adEngine=new y);var n=e.clipId,i=e.vmapData,r=t._adEngine.understandRules(i);t._cacheManager.addRuleForClipId(r,n),t._cacheManager.addAllocationForClipId(new f,n),t._cacheManager.addPlayerDataForClipId(e,n),t._cacheManager.updateAdCache(i,n)},i.prototype._parsePlayerData=function(e){var t=this;t._cacheManager||(t._cacheManager=new g(t._yvapBus)),t._adEngine||(t._adEngine=new v);var n=e.clipId,i=e.rules,r=t._adEngine.understandRules(i);r&&t._cacheManager.addRuleForClipId(r,n);var o=e.allocation,a=t._allocationManager.understandAllocation(o);a&&t._cacheManager.addAllocationForClipId(a,n),t._cacheManager.addPlayerDataForClipId(e,n);var s=e.adList;t._cacheManager.updateAdCache(s,n)},i.prototype._handleNFLRules=function(e,t){var n=this,i=new I,r=i.preroll,o=c.NFL_FREE_TIME,a=c.NFL_SESSION_TIME;t&&t.rules&&(o=parseInt(t.rules.freeUserPeriodInSeconds,10),a=parseInt(t.rules.onloaderPeriodInSeconds,10));var s=new m(o,a);s.type=c.PREROLL,r.push(s),n._cacheManager.addRuleForClipId(i,e)},i.prototype.updatePlayerData=function(e){for(var t,n=this,i=0;i<e.length;i++){t=new _(e[i]),t.vmapData?n._parseNewPlayerData(t):n._parsePlayerData(t);var r=t.clipId;if(t.licenseId===c.NFL_NOW_LMSID&&n._handleNFLRules(r,t.content_provider_data),t.hasOwnProperty(c.YVAP_INFO_AD_BREAKS)&&""!==t[c.YVAP_INFO_AD_BREAKS]){var o=x.parseAdXml(t[c.YVAP_INFO_AD_BREAKS])||{};o=o.adBreakMap,n._cacheManager.addCuePointsForClipId(o,r),n._midrollsHelper=new w(n._yvapBus,n._cacheManager)}t.clean()}},i.prototype.getAdsFor=function(e){var t,n,i,r,o,a=this,s=new R;return s.communicatorName=c.YAXv,t=N.getCommunicatorUsingSpec(s),e&&e.clipId?(o=e.clipId,t?(i=new _(e),n=new u(c.PREROLL,["clickable"]),r=t.getKey(n,i),a._cacheManager.addPlayerDataForClipId(i,o),a._yvapBus.publish(l.AD_OPPORTUNITY,o,c.PREROLL,n,s,i),a._cacheManager.getNewAd(t,n,i),a._addKeyToWaitlist(r,n),!0):!1):(a._yvapBus.publish(l.NULL_AD_OPPORTUNITY,o,c.CLIP_DATA_MISSING),!1)},i.prototype.beginAdExperience=function(e,t){var n,i=this;if(i.waitlistMap={},i._currentClipId=e,i._clipStarted=!1,i._overlayRenderer.removeOverlay(),i._vpaidflashInterface.stopAd(),i._yvapBus.publish(l.BEGIN_AD_EXP,e),i._standaloneMode){var a=i._standaloneAdHelper.getAd();return void(a&&(i._yvapBus.publish(l.AD_OPPORTUNITY,e,a.type,a.adSpec,a.communicatorSpec,{}),i._updateAds(a)))}if(n=i._cacheManager.getCuePointsForClipId(e)){var s=[];Object.keys(n).length||0;for(var p in n)if(n.hasOwnProperty(p)){var d=B.convertTimeToSeconds(n[p].timeOffset);
s.push(d)}i._eventBus.publish(o.AD_BREAK_TIMELINE,s),i._midrollsHelper.stopMidRollsFetchThread(),i._midrollsHelper.startMidRollsFetchThread(e)}var u=i._cacheManager.getRuleForClipId(e);if(u){var _=i._getAd(c.PREROLL,e);i._updateAds(_);var v=i._getAd(c.BUMPER,e);i._updateAds(v)}else r.log("Rules missing"),i._yvapBus.publish(l.NULL_AD_OPPORTUNITY,e,c.RULES_MISSING);i._fireAdsReady()},i.prototype._fireAdsReady=function(){var e=this,t=!1;for(var n in e.waitlistMap)e.waitlistMap.hasOwnProperty(n)&&(t=t||e.waitlistMap[n]);t||e._eventBus.publish(o.ADS_READY)},i.prototype._getAd=function(e,t,n){var i=this,r=null,o=i._cacheManager.getRuleForClipId(t),a=i._cacheManager.getPlayerDataForClipId(t),s=i._cacheManager.getAllocationForClipId(t);if(o&&a&&s){var c=i._adEngine.onAdEvent(e,o,a.clipDuration,n),p=s.pickCommunicator(c);if(i._yvapBus.publish(l.AD_OPPORTUNITY,t,e,c,p,a),r=i._cacheManager.getAd(t,p,c),!r){var d=N.getCommunicatorUsingSpec(p);if(d){var u=d.getKey(c,a);i._addKeyToWaitlist(u,c)}}}return r},i.prototype._checkForVPAIDPreInit=function(e){var t,n=this;e&&(t=e.adObj,t&&t.type===c.VPAID&&n._yvapBus.publish(l.VPAID_PREFETCH_REQUEST,t))},i.prototype._createAdsJson=function(e){var t=null;if(e){var n=e.adObj,i=e.type,r="ad"+Math.floor(1e3*Math.random())+(new Date).getTime(),o=0;if(n&&!e.errorState){var a=n.type,s=n.streams,l=n.params?n.params.clickurl:null,p=n.adId;o=n.duration||c.DEFAULT_AD_DURATION,t=new d(r,i,s,l,a,p,o)}else t=new d(r,i,null,"",c.NOAD,"",o)}return t},i.prototype._updateAds=function(e){var t=this,n=[];if(e){var i=e.adObj,r=e.adSpec,a=e.communicatorSpec;if(i&&i.type===c.NOAD){var s=t._cacheManager.getAllocationForClipId(t._currentClipId),d=s&&s.pickFallbackCommunicator&&s.pickFallbackCommunicator(a);if(d){r.adCallSequence++;var u=t._cacheManager.getAd(t._currentClipId,d,r);if(u)u.adSpec=e.adSpec,u.type=e.type,e=u;else{var _=N.getCommunicatorUsingSpec(d);if(_){var v=t._cacheManager.getPlayerDataForClipId(t._currentClipId),y=_.getKey(r,v);t._addKeyToWaitlist(y,r),e=null}}}}}if(e){var m=t._createAdsJson(e),f=m.playbackId;if(t.playbackMap[f]=e,n.push(m),t._clipStarted){var g=e.type;(g===c.BUMPER||g===c.PREROLL)&&(e.errorState=p.PLAYER_TIMEOUT,A.onNoAd(e,t._currentClipId))}"l1"===e.cacheState&&t._checkForVPAIDPreInit(e),t._yvapBus.publish(l.AD_SUBMITTED,t._currentClipId,e)}n.length>0&&(t._eventBus.publish(o.ADS_OBJS_UPDATE,n),t._fireAdsReady())},i.prototype._renderOverlay=function(e){var t=this;if(e){var n=e.adSpec,i=e.adObj;if(i){var r="ad"+Math.floor(1e3*Math.random())+(new Date).getTime();t.playbackMap[r]=e;var o=new P(r,i.nonLinearAd,n.placement,n.duration,i.adParameters),a=o.resourceType;a===c.OVERLAY_VPAID?t._vpaidflashInterface.renderOverlayAd(o):a===c.OVERLAY_IMAGE&&t._overlayRenderer.renderOverlay(o)}}},i.prototype._addKeyToWaitlist=function(e,t){var n=this;e&&t&&(n.waitlistMap[e]=t)},i.prototype.renderVPAIDAd=function(e,t,n,i){var r,a,s=this;if(e){a=s.playbackMap[e]||{},r=a.adObj||{};for(var l=r.streams,c=null,d=null,u=0;u<l.length;u++){var _=l[u],v=_.format||"";v.indexOf("shockwave")>-1?c=_:v.indexOf("javascript")>-1&&(d=_)}c?(r.streams=[c],s._vpaidflashInterface.renderAd(e,a)):d?(r.streams=[d],s._vpaidjsRenderer.render(e,n,i,t,r,s._rendererDiv)):s._eventBus.publish(o.Ad.ERROR,p.INCOMPATIBLE_MEDIA)}else s._eventBus.publish(o.Ad.ERROR,p.GENERIC)},i.prototype.getMidrollAds=function(e){for(var t=this,n=t._midrollsHelper.getMidrollsAds(t._currentClipId,t._cacheManager,e),i=[],r=0;r<n.length;r++){var o=n[r],a=t._createAdsJson(o),s=a.playbackId;t.playbackMap[s]=o,t._yvapBus.publish(l.AD_SUBMITTED,t._currentClipId,o),i.push(a)}return i},i.prototype._onAdPlaybackRequest=function(e){var t,n=this;e&&(t=n.playbackMap[e],t&&A.onAdBreakStart(t))},i.prototype._onCacheUpdate=function(e,t){var n,i,r=this;r._checkForVPAIDPreInit(t),e&&(n=r.waitlistMap[e],n&&(i=r._cacheManager.getAdResponseForKey(e),i&&(i.adSpec=n,i.type=n.type,r.waitlistMap[e]=null,i.type===c.NON_LINEAR?r._renderOverlay(i):r._updateAds(i))))},i.prototype._onCacheRefreshRequest=function(e){var t=this;e&&e.length>0&&t._eventBus.publish(o.SAPI_REFRESH_REQUEST,e)},i.prototype._onAdMetric=function(e){var t=this;t._eventBus.publish(o.AD_METRICS,e)},i.prototype._onContentVideoStart=function(e){var t=this;t._videoStartTime=0,D.incrementTotalClipCount(),D.incrementRecentClipCount(),t._clipStarted=!0,t._yvapBus.publish(l.VIDEO_START,e);var n=t._getAd(c.POSTROLL,e);t._updateAds(n),t._cacheManager.sync();var i=t._analytics.getArchive(),r=t._diagnostics.generateDiagnostics(i);t._eventBus.publish(o.YVAP_INFO_UPDATE,r)},i.prototype._onContentVideoProgress=function(e,t,n){var i,r=this,o=t-r._videoStartTime;r._videoStartTime=t,D.incrementTotalVideoLength(o),D.incrementRecentVideoLength(o);var a=r._getAd(c.NON_LINEAR,e,t);r._renderOverlay(a),i=r._cacheManager.getPlayerDataForClipId(e),i&&i.licenseId===c.NFL_NOW_LMSID&&(D.incrementNFLVideoLength(o),D.createNFLSession())},i.prototype._onContentVideoSeek=function(e){},i.prototype._onContentVideoEnd=function(e){var t=this;t._overlayRenderer.removeOverlay(),t._yvapBus.publish(l.VIDEO_END,t._currentClipId)},i.prototype._midRollStart=function(){},i.prototype._midRollEnd=function(){var e=this;e._yvapBus.publish(l.AD_BREAK_ENDED,e._currentClipId)},i.prototype._onAdEnd=function(e){var t=this;t.playbackMap[e]=null},i.prototype._onOverlayAdClick=function(e){var t,n,i,r=this;e&&(i=r.playbackMap[e],i&&(n=i.adObj||{},t=n.params?n.params.clickurl:null,A.onAdClick(i,0,0),t&&window.open(t,"_blank")))},i.prototype._onOverlayAdStart=function(e){var t,n=this;e&&(t=n.playbackMap[e],t&&A.onAdStart(t,"",n._currentClipId))},i.prototype._onAdStart=function(e,t,n,i,r,o){var a,s,p=this,d=n||"";p._videoStartTime=0,D.resetRecentVideoLength(),D.resetRecentClipCount(),D.incrementAdCount(),p._overlayRenderer.removeOverlay(),e&&(a=p.playbackMap[e],a&&(s=a.adSpec||{},s.placement===c.NFL_ONLOAD?D.resetNFLSession():s.placement===c.NFL_PREROLL&&D.resetRecentVideoLengthNFL(),A.onAdStart(a,t,p._currentClipId),c.VIEWABILITY_ON&&p._viewabilityManager.start(a,p._currentClipId),p._yvapBus.publish(l.AD_DELIVERED,p._currentClipId,a.type,d,a,i,r,o))),p._renderCompanionAd(a)},i.prototype._renderCompanionAd=function(e){var t,n=window.YAHOO_Yvap||{};if(e&&n&&n.load_companions){t=e.adObj,t.companion.list=t.companion;var i=n.load_companions(t.companion);A.onCompanionDisplayed(i)}},i.prototype._onAdProgress=function(e,t,n){var i,r,o=this,a=t-o._videoStartTime;o._videoStartTime=t,D.incrementAdLength(a),e&&(i=o.playbackMap[e],i&&(r=c.VIEWABILITY_ON&&O.isViewabilityMeasurable()?o._viewabilityManager.getViewabilitySummary():{},i.adDuration||(i.adDuration=n),A.onAdProgress(i,t,n,r,o._currentClipId)))},i.prototype._onAdClick=function(e,t,n){var i=this,r=i.playbackMap[e];r&&A.onAdClick(r,t,n)},i.prototype._onAdNotPlayable=function(e){var t=this,n=t.playbackMap[e];n&&(n.errorState=p.INCOMPATIBLE_MEDIA,t._yvapBus.publish(l.AD_DELIVERY_ERROR,t._currentClipId,n.type,p.INCOMPATIBLE_MEDIA,n),A.onNoAd(n,t._currentClipId))},i.prototype._onAdPlaybackError=function(e,t,n){var i=this,r=i.playbackMap[e],o="string"==typeof t?t:p.MEDIA_PLAYBACK;o=c.ADBLOCKER?p.ADBLOCKER:o;var a=-1,s=-1,d=2;n&&(a=n.swfLoadLatency,s=n.initLatency,d=n.timeoutStatus),r&&(r.errorState=o,i._yvapBus.publish(l.AD_DELIVERY_ERROR,i._currentClipId,r.type,o,r,a,s,d),A.onNoAd(r,i._currentClipId))},i.prototype._onNoAd=function(e){var t,n=this,i=n.playbackMap[e];i&&(t=i.adObj,t&&(n._yvapBus.publish(l.AD_DELIVERY_ERROR,n._currentClipId,i.type,c.NOAD,i),A.onNoAd(i,n._currentClipId)))},i.prototype._onSwfReady=function(e){var t=this;e&&(t._swfReady=!0,t._yvapBus.publish(l.PLAYER_SWF_READY,e))},i.prototype._onPauseVpaid=function(){var e=this;e._vpaidflashInterface.pauseAd(),e._vpaidjsRenderer.pauseAd()},i.prototype._onResumeVpaid=function(){var e=this;e._vpaidflashInterface.resumeAd(),e._vpaidjsRenderer.resumeAd()},i.prototype._onPlayerResize=function(e,t){var n=this;n._vpaidflashInterface.updateDimensions(e,t),n._vpaidjsRenderer.updateDimensions(e,t)},i.prototype._onVolumeChange=function(e){var t=this;e>=0&&(t._lastVolume=e,t._vpaidflashInterface.updateVolume(e),t._vpaidjsRenderer.updateVolume(e))},i.prototype._onMuteChange=function(e){var t=this,n=e?0:t._lastVolume;t._vpaidflashInterface.updateVolume(n),t._vpaidjsRenderer.updateVolume(n)},i.prototype._theBestTeam=function(){var e=this,t=[89,86,65,80,84,72,69,66,69,83,84],n=String.fromCharCode.apply(null,t);n=n.toLowerCase(),e._player&&"function"==typeof e._player.skipAd&&document.addEventListener("keydown",function(t){t=t||window.event;var i="number"==typeof t.which?t.which:t.keyCode;i&&0===n.indexOf(e._secretCode)?e._secretCode=e._secretCode+String.fromCharCode(i).toLowerCase():e._secretCode="",e._secretCode.toLowerCase()===n&&(r.log("skip ad"),e._player.skipAd(),e._vpaidflashInterface.stopAd())})}},{"../../../lib/event-bus":"3ECu9u","../../../lib/logger":"IS9j5T","../../../lib/user-agent":"ty5FFo","../event":"YJm+dH","./ads-json":96,"./allocation/AllocationManager":98,"./allocation/CommunicatorSpec":99,"./allocation/RefreshAllocation":100,"./cache/CacheManager":102,"./cache/CacheManagerIceBreaker":103,"./common/Constants":104,"./common/CookieUtil":105,"./common/Errors":106,"./common/Events":107,"./communicator/CommunicatorFactory":114,"./communicator/MidRollsHelper":118,"./communicator/ParserManager":119,"./communicator/StandaloneAdHelper":122,"./communicator/YAXvCommunicator":127,"./engine/ActionRule":128,"./engine/AdEngine":129,"./engine/AdEngineIceBreaker":130,"./engine/AdSpec":131,"./engine/NFLRules":132,"./engine/RuleGroup":133,"./monitoring/AdPlaybackManager":134,"./monitoring/Analytics":135,"./monitoring/Diagnostics":136,"./monitoring/ViewabilityManager":137,"./overlay-json":138,"./player-data":139,"./renderer/HTML5OverlayRenderer":140,"./vpaid/VPAIDFlashInterface":142,"./vpaid/vpaidjs-renderer":143,"./yvap-util":144}],142:[function(e,t,n){"use strict";function i(e,t,n,i,r){var o=this;o._externalBus=e,o._yvapBus=t,o._currentBitrate=0,o._prefetchList=[],o._vpaidCacheAd,o._renderWidth=n||0,o._renderHeight=i||0,o._yvapBus.subscribe(a.PLAYER_SWF_READY,o._onSwfReady,o),o._externalBus.subscribe(l.YVAP_SWF_PROXIED_EVENT,o._onFlashEvent,o),o.overlayLinearState=!1,o._player=r,window.flash_callback_yvap=function(e){o._onFlashEvent(e)}}t.exports=i;var r=e("../common/VPAIDEvent"),o=e("../common/Constants"),a=e("../common/Events"),s=e("../common/Errors"),l=e("../../event"),c=e("../../../../lib");i.prototype.renderAd=function(e,t){var n,i,r,a,s=this;n=t.adObj,n&&e&&n.type===o.VPAID&&(s._onPrefetchRequest(n),i=n.streams||[],r=i[0],a=n.vpaidId,r&&r.format===o.VPAID_FLASH_FORMAT&&a&&(s._swfNode&&s._swfNode.renderVPAIDAd?(s._swfNode.renderVPAIDAd({url:r.url,vpaidId:a,playbackId:e}),s.updateVolume(s._volume)):s._vpaidCacheAd={url:r.url,vpaidId:a,playbackId:e}))},i.prototype.renderOverlayAd=function(e){var t=this;if(t._swfNode){var n="vpaidO_"+Math.floor(100*Math.random())+(new Date).getTime(),i=e.playbackId||"",r=e.resourceType||"",a=e.resourceUrl||"",s=e.duration||0,l=e.position,c=e.adParams||"";r===o.OVERLAY_VPAID&&t._swfNode&&t._swfNode.renderVPAIDOverlayAd&&t._swfNode.renderVPAIDOverlayAd({url:a,vpaidId:n,playbackId:i,duration:s,position:l,adParam:c})}},i.prototype.stopAd=function(){var e=this;e._swfNode&&e._swfNode.resetVPAIDAd&&e._swfNode.resetVPAIDAd()},i.prototype.pauseAd=function(){var e=this;e._swfNode&&e._swfNode.pauseVPAIDAd&&e._swfNode.pauseVPAIDAd()},i.prototype.resumeAd=function(){var e=this;e._swfNode&&e._swfNode.resumeVPAIDAd&&e._swfNode.resumeVPAIDAd()},i.prototype.updateDimensions=function(e,t){var n=this;n._renderWidth=e||0,n._renderHeight=t||0,n._swfNode&&n._swfNode.updateVPAIDAdDimensions&&n._swfNode.updateVPAIDAdDimensions(e,t)},i.prototype.updateVolume=function(e){var t=this;t._volume=e,t._swfNode&&t._swfNode.updateVPAIDAdVolume&&t._swfNode.updateVPAIDAdVolume(t._volume)},i.prototype._onPrefetchRequest=function(e){var t,n,i,r,a,s=this;e&&e.type===o.VPAID&&(n=e.streams||[],i=n[0],r=e.adParameters&&e.adParameters.AdParameters?e.adParameters.AdParameters:"",i&&i.format===o.VPAID_FLASH_FORMAT&&(s._swfNode&&s._swfNode.prefetchVPAIDAd?(a="vpaid_"+Math.floor(100*Math.random())+(new Date).getTime(),e.vpaidId=a,s._swfNode.prefetchVPAIDAd({url:i.url,vpaidId:a,adParam:r})):(t=s._prefetchList||[],t.push(e),s._prefetchList=t)))},i.prototype._onSwfReady=function(e){var t,n,i=this,r=e.tagName||"",o=i._renderWidth||0,a=i._renderHeight||0;if(e&&"object"===r.toLowerCase()){if(i._swfNode=e,i._swfNode&&i._swfNode.updateVPAIDAdDimensions&&i._swfNode.updateVPAIDAdDimensions(o,a),i._swfNode.prefetchVPAIDAd)for(t=i._prefetchList||[];t.length>0;)n=t.shift(),i._onPrefetchRequest(n);i._swfNode.renderVPAIDAd&&i._vpaidCacheAd&&(i._swfNode.renderVPAIDAd(i._vpaidCacheAd),i._vpaidCacheAd=null)}},i.prototype._onFlashEvent=function(e){var t=this,n=e.name||"",i=t._vpaidEventHandlerMap[n],r=t[i];c.isFunction(r)&&r.call(this,e)},i.prototype._progressMap={},i.prototype._progressMap[r.AdVideoStart]=0,i.prototype._progressMap[r.AdVideoFirstQuartile]=.25,i.prototype._progressMap[r.AdVideoMidpoint]=.5,i.prototype._progressMap[r.AdVideoThirdQuartile]=.75,i.prototype._progressMap[r.AdVideoComplete]=1,i.prototype._onAdImpression=function(e){var t=this,n=e.playbackId||"";t._currentBitrate=e.bitrate;var i=e.swfLoadLatency||0,r=e.adInitLatency||0,o=e.latency||0,a=e.vpaidStartLatency;t._externalBus&&t._externalBus.publish(l.AD_PLAYBACK_STARTED,n,t._currentBitrate,o,i,r,a)},i.prototype._onAdQuartile=function(e){var t=this,n=e.name||"",i=t._progressMap[n],r=e.playbackId||"",o=e.duration||0,a=i*o;t._externalBus&&t._externalBus.publish(l.AD_PLAYBACK_PROGRESS,r,a,o)},i.prototype._onAdProgress=function(e){var t=this,n=e.timeupdate||0,i=e.duration||0,r=e.playbackId||"";t._externalBus&&t._externalBus.publish(l.AD_PLAYBACK_PROGRESS,r,n,i)},i.prototype._onAdEnd=function(e){var t=this,n=e.playbackId||"";t._externalBus&&t._externalBus.publish(l.AD_PLAYBACK_ENDED,n)},i.prototype._onAdClick=function(e){var t=this,n=e.playbackId||"",i=e.duration||0,r=e.timeupdate||0;t._externalBus&&t._externalBus.publish(l.AD_CLICK,n,r,i)},i.prototype._onAdError=function(e){var t=this;e.playbackId||"";t._externalBus&&t._externalBus.publish(l.Ad.ERROR,s.MEDIA_PLAYBACK)},i.prototype._onAdLinearChange=function(e){var t=this,n=e.adLinear||!1;n?(t._player.setOverlayActive(!0),t._player.pause()):(t._player.setOverlayActive(!1),t._player.play())},i.prototype._onAdTimeout=function(e){var t=this,n=(e.playbackId||"",{});n.swfLoadLatency=e.loadLatency||-1,n.initLatency=e.initLatency||-1,n.timeoutStatus=e.timeoutStatus,t._externalBus&&t._externalBus.publish(l.Ad.ERROR,s.VPAID_TIMEOUT,n)},i.prototype._onVPAIDSwfDownloadError=function(e){var t=this;t._externalBus&&t._externalBus.publish(l.Ad.ERROR,s.VPAID_SWF_DOWNLOAD_ERROR)},i.prototype._vpaidEventHandlerMap={},i.prototype._vpaidEventHandlerMap[r.AdImpression]="_onAdImpression",i.prototype._vpaidEventHandlerMap[r.AdVideoStart]="_onAdQuartile",i.prototype._vpaidEventHandlerMap[r.AdVideoFirstQuartile]="_onAdQuartile",i.prototype._vpaidEventHandlerMap[r.AdVideoMidpoint]="_onAdQuartile",i.prototype._vpaidEventHandlerMap[r.AdVideoThirdQuartile]="_onAdQuartile",i.prototype._vpaidEventHandlerMap[r.AdVideoComplete]="_onAdQuartile",i.prototype._vpaidEventHandlerMap[r.AdStopped]="_onAdEnd",i.prototype._vpaidEventHandlerMap[r.AdClickThru]="_onAdClick",i.prototype._vpaidEventHandlerMap[r.AdError]="_onAdError",i.prototype._vpaidEventHandlerMap[r.AdTimeout]="_onAdTimeout",i.prototype._vpaidEventHandlerMap[r.AdProgress]="_onAdProgress",i.prototype._vpaidEventHandlerMap[r.AdLinearChange]="_onAdLinearChange",i.prototype._vpaidEventHandlerMap[r.AdSwfDownloadError]="_onVPAIDSwfDownloadError"},{"../../../../lib":"bRhrlU","../../event":"YJm+dH","../common/Constants":104,"../common/Errors":106,"../common/Events":107,"../common/VPAIDEvent":108}],143:[function(e,t,n){"use strict";function i(e){var t=this;t._eventBus=e,t._creativeCallbacks={AdStarted:t._onAdStarted,AdStopped:t._onAdStopped,AdLoaded:t._onAdLoaded,AdVideoStart:t._onAdProgress,AdVideoFirstQuartile:t._onAdProgress,AdVideoMidpoint:t._onAdProgress,AdVideoThirdQuartile:t._onAdProgress,AdVideoComplete:t._onAdComplete,AdClickThru:t._onAdClickThru,AdError:t._onAdError,AdImpression:t._onAdImpression,AdSkipped:t._onAdSkipped,AdSkippableStateChange:t._onAdSkippableStateChange,AdSizeChange:t._onAdSizeChange,AdLinearChange:t._onAdLinearChange,AdDurationChange:t._onAdDurationChange,AdExpandedChange:t._onAdExpandedChange,AdVolumeChange:t._onAdVolumeChange,AdInteraction:t._onAdInteraction,AdUserAcceptInvitation:t._onAdInteraction,AdUserMinimize:t._onAdInteraction,AdUserClose:t._onAdInteraction},t._adloaderframe="adloaderframe",t._adrenderframe="adrenderframe",t._iframeCount=0,t._videoTag,t._videoTagOpacity=1,t._timer,t._targetBitrate=0,t._creative={},t._idToIframeMap={},t._vpaidAdLatencies={}}t.exports=i;var r=e("../../event"),o=e("../../../../lib"),a=e("../common/Errors");i.prototype.onAdUpdateInCache=function(e,t){var n,i=this;if(t&&t.adObj){var r=t.adObj;if(r.vpaidId||(r.vpaidId="vpaidjs_"+Math.floor(100*Math.random())+(new Date).getTime(),i._vpaidAdLatencies[r.vpaidId]={}),"vpaid"===t.adObj.type){var o=t.adObj.streams;if(!o)return;for(var a=0;a<o.length;a++)if("application/javascript"===o[a].format){n=o[a].url;break}}n&&i._load(n,!0,r.vpaidId)}},i.prototype.pauseAd=function(){var e=this,t=e._creative.creative;t&&t.pauseAd()},i.prototype.resumeAd=function(){var e=this,t=e._creative.creative;t&&t.resumeAd()},i.prototype.updateVolume=function(e){var t=this,n=t._creative.creative;n&&n.setAdVolume(e)},i.prototype.updateDimensions=function(e,t){var n=this,i=n._creative.creative;i&&i.resizeAd(e,t)},i.prototype._unload=function(){var e=this;e._creative.creative&&delete e._creative.creative,e._adProgressTimer&&clearInterval(e._adProgressTimer);var t=document.getElementById(e._adrenderframe);if(t&&t.parentNode.removeChild(t),e._videoTag){var n=e._videoTagOpacity||1;e._videoTag.style.opacity=n}e._timer&&window.clearInterval(e._timer)},i.prototype._isVPAIDAdValid=function(){var e,t=this,n=["handshakeVersion","initAd","startAd","stopAd","skipAd","resizeAd","pauseAd","resumeAd","expandAd","collapseAd","subscribe","unsubscribe"],i=t._creative.creative;if(!i)return!1;for(e=0;e<n.length;e++)if(!o.isFunction(i[n[e]]))return!1;return!0},i.prototype._subscribeCreative=function(){var e=this,t=e._creativeCallbacks,n=e._creative.creative;if(n)for(var i in t)t.hasOwnProperty(i)&&n.subscribe(t[i],i,e)},i.prototype._unsubscribeCreative=function(){var e=this,t=e._creativeCallbacks,n=e._creative.creative;if(n)for(var i in t)t.hasOwnProperty(i)&&n.unsubscribe(t[i])},i.prototype._onScriptLoad=function(e,t){var n=this,i=e.contentWindow.getVPAIDAd;return i&&"function"==typeof i&&(n._creative.creative=i(),n._creative.vpaidId=t,n._isVPAIDAdValid())?void n._onVPAIDAdFileLoaded():void n._onAdError({message:"vpaid creative is invalid"})},i.prototype._onVPAIDAdFileLoaded=function(){var e=this;e._subscribeCreative(),e._vpaidAdLatencies[e._creative.vpaidId].vil=(new Date).getTime(),e._creative.creative.initAd(e._adConfig.width,e._adConfig.height,e._adConfig.viewMode,e._adConfig.bitrate,e._adConfig.creativeData,e._adConfig.environmentVars)},i.prototype._onAdLoaded=function(e){var t=this,n=(new Date).getTime();t._vpaidAdLatencies[t._creative.vpaidId].vil=n-t._vpaidAdLatencies[t._creative.vpaidId].vil,t._vpaidAdLatencies[t._creative.vpaidId].vst=(new Date).getTime(),t._creative.creative.startAd()},i.prototype._onAdProgress=function(e){var t=this,n=t._creative.creative,i=t._adConfig.environmentVars.videoSlot;t._eventBus.publish(r.AD_PLAYBACK_PROGRESS,t._playbackId,i.currentTime,n.getAdDuration(),i.buffered)},i.prototype._onAdStarted=function(e){var t=this,n=t._creative.vpaidId,i=(new Date).getTime();t._vpaidAdLatencies[n].vst=i-t._vpaidAdLatencies[n].vst,t._vpaidAdLatencies[n].pst=i-t._vpaidAdLatencies[n].pst;var o=t._vpaidAdLatencies[n].vsl,a=t._vpaidAdLatencies[n].vil,s=t._vpaidAdLatencies[n].vst,l=t._vpaidAdLatencies[n].pst;t._eventBus.publish(r.AD_PLAYBACK_STARTED,t._playbackId,t._targetBitrate,l,o,a,s),t._timer&&window.clearInterval(t._timer),t._timer=window.setInterval(function(){t._onAdProgress()},200)},i.prototype._onAdComplete=function(e){var t=this,n=t._creative.creative;t._eventBus.publish(r.AD_PLAYBACK_PROGRESS,t._playbackId,n.getAdDuration(),n.getAdDuration()),n.stopAd()},i.prototype._onAdStopped=function(e){var t=this;t._unload(),t._eventBus.publish(r.AD_PLAYBACK_ENDED,t._playbackId)},i.prototype._onAdClickThru=function(e){var t,n=this;e.data&&(e.data.playerHandles&&(t=e.data.url?e.data.url:n._adConfig.clickThruUrl),t&&window.open(t,"_blank")),n._eventBus.publish(r.AD_CLICK,n._playbackId)},i.prototype._onAdError=function(e){var t=this;e.yvap_err_type||(e.yvap_err_type=r.AD_PLAYBACK_ERROR),t._unload(),t._eventBus.publish(r.Ad.ERROR,a.MEDIA_PLAYBACK),t._eventBus.publish(r.Ad.ENDED)},i.prototype._onAdImpression=function(e){},i.prototype._onAdSkipped=function(e){},i.prototype._onAdSkippableStateChange=function(e){},i.prototype._onAdSizeChange=function(e){},i.prototype._onAdLinearChange=function(e){},i.prototype._onAdDurationChange=function(e){},i.prototype._onAdExpandedChange=function(e){},i.prototype._onAdVolumeChange=function(e){},i.prototype._onAdInteraction=function(e){},i.prototype._load=function(e,t,n){var i,r,o,a=this;if(!e)throw{message:"vpaid creativeUrl cannot be undefined, null or empty"};a._idToIframeMap[n]||(i=document,r=i.createElement("iframe"),r.id=a._adloaderframe+a._iframeCount,a._iframeCount=a._iframeCount+1,r.style.display="none",r.onload=function(){var i=r.contentDocument||r.contentWindow.document;o=r.contentWindow.document.createElement("script"),o.type="text/javascript",o.onload=function(){var e=(new Date).getTime();a._vpaidAdLatencies[n].vsl=e-a._vpaidAdLatencies[n].vsl,t?a._idToIframeMap[n]=r:a._onScriptLoad(r,n)},o.onerror=function(){a._onAdError({message:"error loading vpaidjs script"})},a._vpaidAdLatencies[n].vsl=(new Date).getTime(),o.src=e,i.getElementsByTagName("head")[0].appendChild(o)},i.body.appendChild(r))},i.prototype.render=function(e,t,n,i,r,o){var a,s,l=this,c=900,p="normal",d={type:"AdError"};if(l._playbackId=e,l._targetBitrate=!i||isNaN(i)?c:i,!t||isNaN(t)||!n||isNaN(n))return d.message="Video dimensions missing",void l._onAdError(d);if(!o||!o.nodeName&&!o.tagName)return d.message="Slot has to be a DOMElement",void l._onAdError(d);if(l._videoTag=o.getElementsByTagName("video")[0],l._videoTag&&(l._videoTagOpacity=l._videoTag.style.opacity,l._videoTag.style.opacity=0),!r)return d.message="Ad object cannot be undefined or null.",void l._onAdError(d);if(r.vpaidId||(r.vpaidId="vpaidjs_"+Math.floor(100*Math.random())+(new Date).getTime(),l._vpaidAdLatencies[r.vpaidId]={}),l._vpaidAdLatencies[r.vpaidId].pst=(new Date).getTime(),s=r.streams,!(s&&s instanceof Array&&s.length>0))return d.message="No valid media file in ad object.",void l._onAdError(d);for(var u=0;u<s.length;u++)if("application/javascript"===s[u].format){a=s[u].url;break}var _=o.childNodes[1];_||(_=o);var v=document.createElement("video");l._adConfig={width:t,height:n,viewMode:p,bitrate:l._targetBitrate,creativeData:r.adParameters,environmentVars:{videoSlot:v},clickThruUrl:r.params?r.params.clickurl:void 0};var y=document.createElement("iframe");y.id=l._adrenderframe,y.style.position="absolute",y.style.height="100%",y.style.width="100%",y.scrolling="no",y.style.border="0",y.style.zIndex=10,y.onload=function(){var e=y.contentDocument||y.contentWindow.document;e=e.body,e.style.margin="0",e.appendChild(v),l._adConfig.environmentVars.slot=e;try{var t=l._idToIframeMap[r.vpaidId];t?l._onScriptLoad(t,r.vpaidId):l._load(a,!1,r.vpaidId)}catch(n){d.message=n.message,l._onAdError(d)}},_.insertBefore(y,_.firstChild)}},{"../../../../lib":"bRhrlU","../../event":"YJm+dH","../common/Errors":106}],144:[function(e,t,n){"use strict";var i=e("./common/Constants"),r=e("../util"),o=e("xhr");n.convertTimeToSeconds=function(e){var t=e.split(":").reverse();t=t.map(function(e){return parseFloat(e,10)});var n=t[0];4===t.length?t=t.slice(1):n=0;var i=t.reduce(function(e,t,n,i){return e+Math.pow(60,n)*t});return i+=n/1e3,isNaN(i)?null:i},n.isViewabilityMeasurable=function(){return window.DARLA&&window.DARLA.yvap||top&&top.DARLA&&top.DARLA.yvap?!0:!1},n.getViewabilityNonMeasurableValue=function(){return window.location!==top.location?i.VIEWABILITY_NOT_MEASURABLE_IFRAME:i.VIEWABILITY_NOT_MEASURABLE_NO_DARLA},n.getDARLA=function(){return window.DARLA?{darla:window.DARLA,isIFrame:0}:top&&top.DARLA?{darla:top.DARLA,isIFrame:1}:null},n.getTimeStamp=function(){var e=new Date,t=[e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds()],n=t.join("");return n},n.expandMacro=function(e,t){var n=/\$\{(\w)+\}/g,i=function(e){var n=/(\w)+/g,i=e.match(n),r=i[0];return t[r]?t[r]:""};return e=e.replace(n,i),e=this.cleanUpUrl(e)},n.cleanUpUrl=function(e){for(var t,n,i=/(\w)+=&/g;e.match(i);)e=e.replace(i,"");for(t=/(\w)+=($|;|;;)/;e.match(t);)e=e.replace(t,"$2");for(n=/(;|;;|&)$/;e.match(n);)e=e.replace(n,"");return e},n.generateYqlQuery=function(e,t){return"select * from "+t+" where "+r.querystring(e," and ",null,function(e){return e})},n.detectAdBlocker=function(e){var t=location.protocol+"//us.adserver.yahoo.com/a?c=x&p=&f=343121&pn=&rs=&l=VIDO&at=";try{o({url:t,method:"GET",sync:!1,timeout:3e3},function(t,n,i){e(!!t)})}catch(n){e(!0)}}},{"../util":"jJTEqU","./common/Constants":104,xhr:161}],145:[function(e,t,n){},{}],146:[function(e,t,n){"use strict";function i(e){var t=this;e=e||{},t._debug=e.debug,t._outstanding=[];var n=parseInt(localStorage.getItem(o));t._estimatedBandwidth=n||a,t._estimatedBandwidth>s&&(t._estimatedBandwidth=s),t._debug&&console.log("initial bandwidth estimate: ",t._estimatedBandwidth)}t.exports=i;var r=.25,o="DASHBandwidthEstimate",a=1e3,s=2e3,l=15e3;i.prototype.startTiming=function(e){var t=this,n=Date.now();t._accumulateTimes(n),e.bandwidthData.accumulated=0,e.bandwidthData.currentStart=n,t._outstanding.push(e)},i.prototype.cancelTiming=function(e){var t=this;t._removeFromOutstanding(e,Date.now())},i.prototype.endTiming=function(e){var t=this,n=Date.now();if(t._removeFromOutstanding(e,n)&&!(e.bandwidthData.size<l||e.bandwidthData.accumulated<=0)){var i=e.bandwidthData.size/e.bandwidthData.accumulated*8;t._estimatedBandwidth=r*i+(1-r)*t._estimatedBandwidth,localStorage.setItem(o,t._estimatedBandwidth.toString()),t._debug&&console.log("new bandwidth estimate: ",t._estimatedBandwidth)}},i.prototype.estimateBandwidth=function(){var e=this;return e._estimatedBandwidth},i.prototype._accumulateTimes=function(e){var t=this;t._outstanding.forEach(function(n){n.bandwidthData.accumulated+=(e-n.bandwidthData.currentStart)/t._outstanding.length,n.bandwidthData.currentStart=e})},i.prototype._removeFromOutstanding=function(e,t){var n=this,i=n._outstanding.indexOf(e);return 0>i?!1:(n._accumulateTimes(t),n._outstanding.splice(i,1),!0)}},{}],147:[function(e,t,n){"use strict";function i(e,t,n,i,r){var o=this;r=r||{},o._videoMetadata=e,o._audioMetadata=t,o._bandwidthEstimator=n,o._node=i,o._videoToAudioCache={},o._videoCeilingCache={},o._debug=r.debug,o._computeInitialTracks()}t.exports=i;var r=.75,o=.1,a=20,s=20,l=.2,c=120,p=1.5,d=5;i.prototype.chooseTrack=function(e,t,n,i,r){var o=this;return n>c?-1:"audio/mp4"===r?o._chooseAudioTrack(e):o._chooseVideoTrack(e,t,n,i,r)},i.prototype._chooseVideoTrack=function(e,t,n,i){var r=this;r._debug&&console.log("occupancy: ",n);for(var o=r._bandwidthEstimator.estimateBandwidth(),a=null,s=i;s>=0;s--){var l=r._predictOccupancy(s,e,n,o);if(r._debug&&console.log("occupancy prediction for stream ",s,": ",l),l.negative>=0&&null===a){var c=s>t?p:0,u=s>t?d:0;l.endRatio>c&&l.endOffset>u&&(a=s)}}return a||0},i.prototype.checkUpgrade=function(e,t,n,i){var r=this,o={track:-1,updateCeiling:!1,verified:!1},a="video/mp4"===i?r._videoMetadata.trackHistory:r._audioMetadata.trackHistory,s=a[e];if(s&&(o.updateCeiling=!0,s.ceiling<n&&s.track===s.ceiling)){var l;o.verified=!0,"video/mp4"===i?l=r._chooseVideoTrack(e,s.track,t,n,i):(l=r._chooseAudioTrack(e,!0),0>l&&(o.updateCeiling=!1)),l>s.track&&(o.track=l)}return o},i.prototype.getTrackCeiling=function(e){var t=this,n=window.devicePixelRatio||1,i=t._node.clientWidth*n,r=t._node.clientHeight*n,o=t._videoCeilingCache[i+"x"+r];if(void 0===o){var a=t._videoMetadata.trackData.length,s=!1;for(o=0;a-1>o;o++){var l=t._videoMetadata.trackData[o],c=l.width,p=l.height;if(p&&c){if(c>i||p>r)break;(c===i||p===r)&&(s=!0)}}s&&o--,t._debug&&(console.log("Display size: ",i,r),console.log("Track ceiling: ",o)),t._videoCeilingCache[i+"x"+r]=o}return"audio/mp4"===e?t._findAudioForVideo(o):o},i.prototype.chooseInitialTrack=function(e,t){var n,i=this;return n="audio/mp4"===e?i._initialAudioTrack:i._initialVideoTrack,void 0!==t&&n>t&&(n=t),n},i.prototype._chooseAudioTrack=function(e,t){var n=this,i=n.getTrackCeiling("video/mp4"),r=n._audioMetadata.chunks[e],o=n._videoMetadata.findChunk(r.startTime),a=n._videoMetadata.findChunk(r.endTime);0>a&&(a=n._videoMetadata.chunks.length-1);for(var s=null,l=o;a>=l;l++){var c=n._videoMetadata.trackHistory[l];if(c){t&&c.ceiling!==i||(s=c.track);break}}if(null===s)return-1;var p=n._findAudioForVideo(s);return p>=0&&n._debug&&console.log("audio track: ",p),p},i.prototype._computeInitialTracks=function(){var e=this,t=e._bandwidthEstimator.estimateBandwidth(),n=e._videoMetadata.trackData;e._initialVideoTrack=0,e._initialAudioTrack=0;for(var i=n.length-1;i>=0;i--){var o=e._findAudioForVideo(i),a=t;if(o>=0&&(a-=e._audioMetadata.trackData[o].bitrate),a*r>=n[i].bitrate){e._initialVideoTrack=i,e._initialAudioTrack=o;break}}e._debug&&(console.log("initial video track: ",e._initialVideoTrack),console.log("initial audio track: ",e._initialAudioTrack))},i.prototype._findAudioForVideo=function(e){var t=this;if(e in t._videoToAudioCache)return t._videoToAudioCache[e];for(var n=t._videoMetadata.trackData[e].bitrate,i=t._audioMetadata.trackData.length,r=-1,a=null,s=0;i>s;s++){var l=t._audioMetadata.trackData[s].bitrate,c=l/(n+l),p=Math.abs(c/o-1);(null===a||a>p)&&(a=p,r=s)}return t._videoToAudioCache[e]=r,r},i.prototype._predictOccupancy=function(e,t,n,i){var r=this,o=r._findAudioForVideo(e);o>=0&&(i-=r._audioMetadata.trackData[o].bitrate);for(var s=0,l=n,c={negative:0,endRatio:0,endOffset:0};;){var p=r._videoMetadata.chunks[t],d=p.tracks[e],u=8*d.size/(1e3*i),_=p.duration;l+=_-u,s+=u,t++;var v=r._getMinimumOccupancy(n,s),y=l-v;if(c.negative>y&&(c.negative=y),s>=a||t>=r._videoMetadata.chunks.length)return c.endRatio=l/v,c.endOffset=y,c}},i.prototype._getMinimumOccupancy=function(e,t){var n=e+l*t;return n>s&&(n=s),n}},{}],148:[function(e,t,n){"use strict";function i(e,t,n){var i=this;if(i.metadata=e,i.dashContext=t,i.mediaSource=t.mediaSource,i.mimeType=i.metadata.trackData[0].mimeType,"video/mp4"===i.mimeType)i.sourceBuffer=new a(i.mediaSource,'video/mp4; codecs="avc1.640028"');else{if("audio/mp4"!==i.mimeType)throw new r.Error(r.ERR_BAD_MIME_TYPE);i.sourceBuffer=new a(i.mediaSource,'audio/mp4; codecs="mp4a.40.2"')}i.dashContext.setStreamEnded(i.mimeType,!1),i.node=t.node,i._debug=n;var s=i.dashContext.policy.getTrackCeiling(i.mimeType),l=i.dashContext.policy.chooseInitialTrack(i.mimeType,s);i.currentTrack=l,i._bufferingBusy=!0,i._consecutiveErrors=0,i._destroyed=!1,i._forceInitSegment=!1,i._waitingMeta=0,i._lastChunk=-1,i._lastCeiling=null,i._playbackRequested=!i.dashContext.node.paused,i.node.addEventListener("play",function(){i._playbackRequested=!0,i.fillBuffer()}),i.node.addEventListener("waiting",i.fillBuffer.bind(i)),i.node.addEventListener("timeupdate",i.fillBuffer.bind(i)),i.metadata.saveTrackHistory(0,l,s),i.tracks=i.metadata.trackData.map(function(e,n){return new o(e,n,i.metadata,t.bandwidthEstimator,i.dashContext.rangeQueryOpts)}),i._waitingMeta=i.tracks.length,i._fetchTrackMetadata(i.tracks[l],!0),i.tracks.forEach(function(e,t){t!==l&&i._fetchTrackMetadata(e,!1)})}var r=e("./error"),o=e("./track"),a=e("./source-buffer-wrapper"),s=e("./util");
t.exports=i;var l=1,c=5,p=1e3,d=5e3,u=5;i.prototype._shouldPreloadAt=function(e){var t=this;return t._playbackRequested?!0:e<t.dashContext.preload},i.prototype._onError=function(e){var t=this;t._bufferingBusy=!0,console.warn("Fragment failed: ",e),t.sourceBuffer.abort(),t._throttleRetry(e,function(){t._forceInitSegment=!0,t._lastChunk=-1,t._bufferingBusy=!1,t.fillBuffer()})},i.prototype._fetchTrackMetadata=function(e,t){var n=this,i=e.fetchInitSegment(t&&n._shouldPreloadAt(0),function(r){if(r)return console.error("Failed to download metadata: ",r),void n._throttleRetry(r,function(){n._fetchTrackMetadata(e,!1)});if("video/mp4"===n.mimeType&&n._waitingMeta===n.tracks.length){var o=n.metadata.chunks,a=n.metadata.chunks[o.length-1].endTime;n.dashContext.setDuration(a)}t&&!i&&(n._bufferingBusy=!1,n._forceInitSegment=!0),n._consecutiveErrors=0,n.dashContext.setError(n.mimeType,null),n._waitingMeta--,n.fillBuffer()});i&&n._bufferFromStream(i)},i.prototype._throttleRetry=function(e,t){var n=this;if(n.dashContext.setError(n.mimeType,e),n._consecutiveErrors>u)return console.error("Too many retries; erroring out"),void n.dashContext.notifyError();var i=p;n._consecutiveErrors>0&&(i=d),n._consecutiveErrors++,window.setTimeout(t,i)},i.prototype._bufferFromStream=function(e){var t=this;t.sourceBuffer.appendStream(e,function(e){return e?void t._onError(e):(t._bufferingBusy=!1,t._consecutiveErrors=0,t.dashContext.setError(t.mimeType,null),void t.fillBuffer())})};var _=5;i.prototype._chooseChunk=function(){var e=this,t=e.node.currentTime,n=s.findEndOfBuffer(e.sourceBuffer.buffer.buffered,t),i={currentTime:t,upgradeChunk:-1,end:n};if(null===n)i.chunk=e.metadata.findChunk(t);else{if(n>t+_){var r=e.metadata.findChunk(t+_);r>=0&&(i.upgradeChunk=r+1)}var o=e.metadata.findChunk(n+s.TIMESTAMP_EPSILON);i.chunk=o>=0?o:-1}return i},i.prototype.fillBuffer=function(){var e=this;if(!e._bufferingBusy&&!e._destroyed&&"closed"!==e.mediaSource.readyState){var t=e.dashContext.policy.getTrackCeiling(e.mimeType),n=e._chooseChunk();if(e._shouldPreloadAt(n.end||0)){var i,r=n.chunk,o=-1;if(!e._waitingMeta&&n.upgradeChunk>=0){var a=n.chunk;0>a&&(a=e.metadata.chunks.length);for(var s=n.upgradeChunk;a>s;s++){i=e.metadata.chunks[s].startTime-n.currentTime;var p=e.dashContext.policy.checkUpgrade(s,i,t,e.mimeType);if(o=p.track,p.track>=0){o=p.track,r=s;break}if(p.verified)break;var d=e.metadata.trackHistory[s];p.updateCeiling>=0&&(d.ceiling=t)}}if(0>r)return void e.dashContext.setStreamEnded(e.mimeType,!0);if(e._waitingMeta){if(o=e.currentTrack,!e.tracks[o].initSegment)return;if(i=e.metadata.chunks[r].startTime-n.currentTime,i>l)return}if(0>o&&(i=e.metadata.chunks[r].startTime-n.currentTime,0>i&&(i=0),o=e.dashContext.policy.chooseTrack(r,e.currentTrack,i,t,e.mimeType)),!(0>o)){var u=c>i;if(r===e._lastChunk&&t===e._lastCeiling)return void console.error("Fetching the same chunk twice");e._lastChunk=r,e._lastCeiling=t,e.metadata.saveTrackHistory(r,o,t),e.dashContext.historyAvailable(e.mimeType),e._debug&&(console.log("Chose track: ",o),console.log("Buffering chunk: ",r));var _=e.currentTrack!==o||e._forceInitSegment,v=e.tracks[o];e._bufferingBusy=!0,e.dashContext.setStreamEnded(e.mimeType,!1),_?e.sourceBuffer.appendBuffer(v.initSegment,function(t){return t?void console.error("Failed to append init segment"):(e.currentTrack=o,void e._bufferFromStream(v.streamFragment(r,u)))}):e._bufferFromStream(v.streamFragment(r,u))}}}},i.prototype.destroy=function(){var e=this;e._destroyed=!0,e.sourceBuffer.remove()}},{"./error":150,"./source-buffer-wrapper":156,"./track":157,"./util":158}],149:[function(e,t,n){"use strict";function i(){var e=this;e._flowing=!0,e.errorVal=null,e._listeners={data:[],done:[],error:[],cancel:[]}}t.exports=i,i.prototype.on=function(e,t){var n=this;n._listeners[e].push(t)},i.prototype.data=function(e){var t=this;t._flowing&&t._listeners.data.forEach(function(t){t(e)})},i.prototype.done=function(){var e=this;e._flowing&&(e._flowing=!1,e._listeners.done.forEach(function(e){e()}))},i.prototype.error=function(e){var t=this;t._flowing&&(t.errorVal=e,t.cancel(),t._listeners.error.forEach(function(t){t(e)}))},i.prototype.cancel=function(){var e=this;e._flowing&&(e._flowing=!1,e._listeners.cancel.forEach(function(e){e()}))}},{}],150:[function(e,t,n){"use strict";function i(e,t){var n=this;n.error=new Error,n.type=e,n.code=e[0],n.message=e[1],t&&(n.message+=": "+t),n.videoErrorType=e[2]}n.Error=i;var r="network",o="decode",a={ERR_REQUEST_FAILURE:[1,"Media GET request failed",r],ERR_REQUEST_LENGTH:[2,"Wrong media data length",r],ERR_REQUEST_TIMEOUT:[3,"Media GET request timed out",r],ERR_METADATA_LENGTH:[4,"Metadata too short",o],ERR_METADATA_FORMAT:[5,"Format error",o],ERR_NO_FRAGMENTS:[6,"No valid fragments in track",o],ERR_ALIGNMENT:[7,"Segments not aligned",o],ERR_BAD_MIME_TYPE:[8,"Invalid MIME type",null],ERR_DESTROYED:[9,"SourceBuffer already destroyed",null],ERR_OPERATION_ABORTED:[10,"SourceBuffer operation aborted",o],ERR_BUFFER_APPEND:[11,"Failed to append to SourceBuffer",o],ERR_MANIFEST_LOAD:[12,"Failed to load MPD",r],ERR_MANIFEST_PARSE:[13,"Failed to parse MPD",o]};Object.keys(a).forEach(function(e){n[e]=a[e]})},{}],151:[function(e,t,n){"use strict";function i(e,t){var n=this;n._opts=t||{},n._bandwidthEstimator=new a(n._opts),n._metadata=null,"string"==typeof e?n._node=document.querySelector(e):n._node=e,Object.defineProperty(n,"error",{enumerable:!0,get:function(){return n._context?n._context.error:null}})}function r(e,t){return e.bitrate-t.bitrate}function o(e,t,n,i){var r=this;r.node=e,r.bandwidthEstimator=n,r.opts=i,r.rangeQueryOpts=null,r.preload=u,r._errorTypes={},t.rangeQuery&&(r.rangeQueryOpts=t.rangeQuery),void 0!==t.preload&&("number"==typeof t.preload&&t.preload>=0?r.preload=t.preload:"none"===t.preload?r.preload=0:"auto"!==t.preload&&console.warn("Invalid preload argument")),t.mpdUrl?c(t.mpdUrl,function(e,t){return e?void r._setError(e):void r._setupMetadata(t.streams)}):r._setupMetadata(t.streams),r.mediaSource=new window.MediaSource,r._opened=!1,r.mediaSource.addEventListener("sourceopen",function(){if("open"===r.mediaSource.readyState){if(r.error)return void r.notifyError();!r._opened&&r._videoMetadata&&r._createControllers(),r._opened=!0}}),r.mediaSource.addEventListener("sourceclose",function(){r._videoController&&(r._videoController.destroy(),r._videoController=null),r._audioController&&(r._audioController.destroy(),r._audioController=null)}),r.node.src=window.URL.createObjectURL(r.mediaSource),r.node.load(),r.error=null}var a=e("./bandwidth-estimator"),s=e("./buffer-controller"),l=e("./metadata"),c=e("./mpd-handler").loadMPD,p=e("./bitrate-policy"),d=e("./util"),u=10;t.exports=i,i.prototype.getMetrics=function(){var e=this,t=0,n=e._node.currentTime,i=d.findEndOfBuffer(e._node.buffered,n);return null!==i&&(t=i-n),{networkBandwidth:e._bandwidthEstimator.estimateBandwidth(),streamInfo:e._context?e._context.getStreamInfo():{},bufferOccupancy:t}},i.prototype.setSrc=function(e){var t=this;return e?void(e!==t._metadata&&(t._metadata=e,t._context=new o(t._node,t._metadata,t._bandwidthEstimator,t._opts))):void(t._node.src="")},o.prototype._setupMetadata=function(e){var t=this,n=[],i=[];e.forEach(function(e){var t=e.mimeType,r=e.codecs;if(r){var o=t+'; codecs="'+r+'"';if(!window.MediaSource.isTypeSupported(o))return}"video/mp4"===t?n.push(e):"audio/mp4"===t&&i.push(e)}),n.sort(r),i.sort(r),t._videoMetadata=new l(n),t._audioMetadata=new l(i),t.policy=new p(t._videoMetadata,t._audioMetadata,t.bandwidthEstimator,t.node,t.opts),t._opened&&t._createControllers()},o.prototype.getStreamInfo=function(){var e=this,t={};if(!e._videoMetadata)return t;var n=e.node.currentTime;return[e._videoMetadata,e._audioMetadata].forEach(function(i){var r=i.findChunk(n),o=i.chunks[r],a=(i.trackHistory[r]||{}).track,s=i.trackData[a],l=0,c=0,p=0,d=0;if(s){d=s.height||0,p=s.width||0,l=s.bitrate||0;var u=o.tracks[a];c=u.size/o.duration*8/1e3}i===e._videoMetadata?(t.videoHeight=d,t.videoWidth=p,t.nominalVideoBitrate=l,t.currentVideoBitrate=c):(t.nominalAudioBitrate=l,t.currentAudioBitrate=c)}),t.nominalBitrate=t.nominalVideoBitrate+t.nominalAudioBitrate,t.currentBitrate=t.currentVideoBitrate+t.currentAudioBitrate,t},o.prototype._createControllers=function(){var e=this;e._endedTypes={},e._videoController=new s(e._videoMetadata,e,e.opts.debug),e._audioController=new s(e._audioMetadata,e,!1)},o.prototype.historyAvailable=function(e){var t=this;"video/mp4"===e&&t._audioController.fillBuffer()},o.prototype.setError=function(e,t){var n=this;t?n._errorTypes[e]||(n._errorTypes[e]=t):n._errorTypes[e]=null,n.error=n._errorTypes["video/mp4"]||n._errorTypes["audio/mp4"]||null},o.prototype.notifyError=function(){var e=this,t=e.error.videoErrorType||"decode";"open"===e.mediaSource.readyState&&e.mediaSource.endOfStream(t)},o.prototype.setStreamEnded=function(e,t){var n=this;if(!n.node.error&&(n._endedTypes[e]=t,t&&"open"===n.mediaSource.readyState)){var i=Object.keys(n._endedTypes).every(function(e){return n._endedTypes[e]});i&&n.mediaSource.endOfStream()}},o.prototype.setDuration=function(e){function t(){i._videoController.sourceBuffer.resume(),i._audioController.sourceBuffer.resume()}function n(n){if(!(0>=r)){if(n)return r=0,void t();r--,0===r&&("open"===i.mediaSource.readyState&&(i.mediaSource.duration=e),t())}}var i=this;if(i._videoController){var r=2;i._videoController.sourceBuffer.pause(n),i._audioController.sourceBuffer.pause(n)}}},{"./bandwidth-estimator":146,"./bitrate-policy":147,"./buffer-controller":148,"./metadata":152,"./mpd-handler":154,"./util":158}],152:[function(e,t,n){"use strict";function i(e,t){var n=this;n.startByte=e,n.size=t,n.endByte=e+t}function r(e,t){var n=this;n.startTime=e,n.duration=t,n.endTime=e+t,n.tracks={}}function o(e){var t=this;t.chunks=[],t.trackData=e,t.trackHistory={}}function a(e,t){var n=this;n.track=e,n.ceiling=t}var s=e("./error");t.exports=o,o.prototype.addData=function(e,t){var n=this;if(0===t.length)return new s.Error(s.ERR_NO_FRAGMENTS);for(var o=!n.chunks.length,a=0;a<t.length;a++){var l,c=t[a];if(o)l=new r(c.startTime,c.duration),n.chunks.push(l);else if(l=n.chunks[a],!l||c.startTime!==l.startTime||c.duration!==l.duration)return new s.Error(s.ERR_ALIGNMENT);l.tracks[e]=new i(c.startByte,c.size)}return null},o.prototype.findChunk=function(e){for(var t=this,n=0;n<t.chunks.length;n++){var i=t.chunks[n+1];if(!i)return e<=t.chunks[n].endTime?n:-1;if(i.startTime>e)return n}},o.prototype.saveTrackHistory=function(e,t,n){var i=this;i.trackHistory[e]=new a(t,n)}},{"./error":150}],153:[function(e,t,n){"use strict";function i(e,t,n){for(var i="",r=0;n>r;r++)i+=String.fromCharCode(e.getUint8(t+r));return i}function r(e,t){var n=this;n.size=e,n.timescaleDuration=t}function o(e,t){var n=this;n.fragments=[],n.timescale=0;try{n._parse(t)}catch(i){return console.error("MP4 parse error: ",i.message),void(n.fragments=[])}var r={time:n.earliestPresentationTime,"byte":e};n.fragments.forEach(function(e){e.fillData(r,n.timescale)})}var a=e("./error");t.exports=o,r.prototype.fillData=function(e,t){var n=this,i=e.time+n.timescaleDuration,r=e["byte"]+n.size;n.startTime=e.time/t,n.duration=n.timescaleDuration/t,n.startByte=e["byte"],e.time=i,e["byte"]=r},o.prototype._parse=function(e){for(var t=this,n=new DataView(e),i=0,r=!1;!r;){var o=t._parseBoxHeaders(n,i);-1===o.size&&(o.size=e.length-i);var s=i+o.headerLen;if(i+=o.size,i>n.byteLength)throw new a.Error(a.ERR_METADATA_LENGTH);switch(o.type){case"sidx":t._parseSidx(n,s,o.version),r=!0}}};var s=["sidx"];o.prototype._parseBoxHeaders=function(e,t){t=t||0;var n=t,r=[];return r.size=e.getUint32(t),t+=4,r.type=i(e,t,4),t+=4,0===r.size?r.size=-1:1===r.size&&(r.size=e.getUint32(t)*Math.pow(2,32)+e.getUint32(t+4),t+=8),-1!==s.indexOf(r.type)&&(r.version=e.getUint8(t),t+=1,r.flags=(e.getUint8(t)<<16)+e.getUint16(t+1),t+=3),r.headerLen=t-n,r},o.prototype._parseSidx=function(e,t,n){var i=this;if(t+=4,i.timescale=e.getUint32(t),t+=4,0===n)i.earliestPresentationTime=e.getUint32(t),t+=4,t+=4;else{if(1!==n)throw new a.Error(a.ERR_METADATA_FORMAT,"Unsupported SIDX version: "+n);i.earliestPresentationTime=e.getUint32(t)*Math.pow(2,32)+e.getUint32(t+4),t+=8,t+=8}t+=2;var o=e.getUint16(t);t+=2;for(var s=0;o>s;s++){var l=e.getUint32(t);t+=4,l&=~(1<<31);var c=e.getUint32(t);t+=4;var p=e.getUint32(t);t+=4;var d=!!(p&1<<31),u=p>>>28&7;if(!d||1!==u){var _="Unsupported SAP type: "+(d?u:"(none)");throw new a.Error(a.ERR_METADATA_FORMAT,_)}i.fragments.push(new r(l,c))}}},{"./error":150}],154:[function(e,t,n){"use strict";function i(e,t){var n=document.createElement("base");n.href=e;var i=document.head;i.insertBefore(n,i.firstChild);var r=document.createElement("a");r.href=t;var o=r.href;return i.removeChild(n),o}function r(e,t){var n=t.querySelector("MPD > Period"),r=n.querySelectorAll("Period > AdaptationSet"),o=[];return Array.prototype.forEach.call(r,function(t){var n=t.getAttribute("mimeType"),r=t.querySelectorAll("AdaptationSet > Representation");Array.prototype.forEach.call(r,function(t){var r=t.getAttribute("mimeType")||n,a=t.getAttribute("codecs"),s=t.querySelector("Representation > BaseURL"),l=t.querySelector("Representation > SegmentBase"),c=l.getAttribute("indexRange").split("-").map(function(e){return parseInt(e,10)}),p={url:i(e,s.textContent),mimeType:r,indexStart:c[0],indexEnd:c[1],bitrate:parseInt(t.getAttribute("bandwidth"),10)/1e3,codecs:a},d=l.getAttribute("firstFragmentEnd");null!==d&&(p.initFetchEnd=parseInt(d,10));var u=t.getAttribute("width");null!==u&&(p.width=parseInt(u,10));var _=t.getAttribute("height");null!==_&&(p.height=parseInt(_,10)),o.push(p)})}),{streams:o}}var o=e("./error"),a=4;n.loadMPD=function(e,t){var n=new XMLHttpRequest;n.overrideMimeType("application/xml"),n.open("GET",e),n.onreadystatechange=function(){if(n.readyState===a){if(n.status>=300||n.status<200)return void t(new o.Error(o.ERR_MANIFEST_LOAD));var i;try{i=r(e,n.responseXML)}catch(s){return void t(new o.Error(o.ERR_MANIFEST_PARSE))}t(null,i)}},n.send()}},{"./error":150}],155:[function(e,t,n){"use strict";function i(e){return e>=200&&300>e}function r(e,t,n,i,r,a){var s=this;s.stream=new o,s._estimator=r,s._size=n-t,s.bandwidthData={size:n-t},s._xhr=new window.XMLHttpRequest,a?(e+=-1===e.indexOf("?")?"?":"&",e+=a.begin+"="+t+"&"+a.end+"="+(n-1),s._xhr.open("GET",e)):(s._xhr.open("GET",e),s._xhr.setRequestHeader("Cache-Control","no-cache"),s._xhr.setRequestHeader("Range","bytes="+t+"-"+(n-1))),s._estimator.startTiming(s),s._finished=!1,s.stream.on("cancel",function(){s._xhr.abort()}),s._offset=0,i?window.MSStreamReader?(s._xhr.responseType="ms-stream",s._xhr.onreadystatechange=s._ieOnReadyStateChange.bind(s)):(s._xhr.overrideMimeType("text/plain; charset=x-user-defined"),s._xhr.onreadystatechange=s._webkitOnReadyStateChange.bind(s)):(s._xhr.responseType="arraybuffer",s._xhr.onreadystatechange=s._noStreamOnReadyStateChange.bind(s)),s._xhr.send()}var o=e("./buffer-stream"),a=e("./error"),s=3,l=4;t.exports=r,r.prototype._noStreamOnReadyStateChange=function(){var e=this;if(e._xhr.readyState===l)return i(e._xhr.status)?void(e._finished||(e._finished=!0,e._offset=e._xhr.response.byteLength,e.stream.data(e._xhr.response),e._onDone())):(e._estimator.cancelTiming(e),void e.stream.error(new a.Error(a.ERR_REQUEST_FAILURE)))},r.prototype._ieOnReadyStateChange=function(){var e=this;if(e._xhr.readyState===s){if(!i(e._xhr.status))return e._estimator.cancelTiming(e),void e.stream.error(new a.Error(a.ERR_REQUEST_FAILURE));var t=e._xhr.response,n=new window.MSStreamReader;n.readAsArrayBuffer(t),n.onprogress=function(){var t=n.result,i=t.slice(e._offset,t.byteLength);e._offset=t.byteLength,e.stream.data(i)},n.onload=function(){e._onDone()},n.onerror=function(){e._estimator.cancelTiming(e),e.stream.error(new a.Error(a.ERR_REQUEST_FAILURE))}}},r.prototype._webkitOnReadyStateChange=function(){var e=this;if(!e._finished&&(e._xhr.readyState===l||e._xhr.readyState===s)){if(!i(e._xhr.status))return e._estimator.cancelTiming(e),void e.stream.error(new a.Error(a.ERR_REQUEST_FAILURE));var t=e._xhr.responseText,n=t.length-e._offset;if(n>0){for(var r=new ArrayBuffer(n),o=new Uint8Array(r),c=0;n>c;c++)o[c]=255&t.charCodeAt(c+e._offset);e._offset=t.length,e.stream.data(r)}e._finished=e._xhr.readyState===l,e._finished&&e._onDone()}},r.prototype._onDone=function(e){var t=this;t._offset===t._size?(t._estimator.endTiming(t),t.stream.done()):(t._estimator.cancelTiming(t),t.stream.error(new a.Error(a.ERR_REQUEST_LENGTH)))}},{"./buffer-stream":149,"./error":150}],156:[function(e,t,n){"use strict";function i(e,t){var n=this;n._destroyed=!1,n._paused=!1,n._mediaSource=e,n.buffer=e.addSourceBuffer(t),n._waitingCallbacks=[],n.buffer.addEventListener("updateend",n._popCallbackQueue.bind(n)),n.buffer.addEventListener("error",function(){n.abort()})}var r=e("./error");t.exports=i,i.prototype.appendBuffer=function(e,t){var n=this;n._waitForNotUpdating(function(i){if(i)return void t(i);try{n.buffer.appendBuffer(e)}catch(o){i=new r.Error(r.ERR_BUFFER_APPEND,o.message)}n._waitForNotUpdating(function(e){t(i||e)},!0)})},i.prototype.abort=function(){var e=this;e._waitingCallbacks.forEach(function(e){e.aborted=!0}),console.warn("Aborting buffer");try{e.buffer.abort()}catch(t){}},i.prototype.pause=function(e){var t=this;t._paused||t._waitForNotUpdating(function(n){n||(t._paused=!0),e(n)})},i.prototype.resume=function(){var e=this;e._paused=!1,e._popCallbackQueue()},i.prototype.appendStream=function(e,t){var n=this,i=!1;e.on("data",function(r){n.appendBuffer(r,function(r){r&&(i||(e.cancel(),n.abort(),t(r)),i=!0)})}),e.on("done",function(){n._waitForNotUpdating(function(e){i||t(e),e&&(i=!0)})}),e.on("error",function(e){t(e),i=!0})},i.prototype._waitForNotUpdating=function(e,t){var n=this;if(n._destroyed)return void e(new r.Error(r.ERR_DESTROYED));var i={cb:e,aborted:!1};t?n._waitingCallbacks.unshift(i):n._waitingCallbacks.push(i),n._popCallbackQueue()},i.prototype._popCallbackQueue=function(){for(var e=this;;){if(0===e._waitingCallbacks.length)return;if(e._paused||e.buffer.updating)return;var t=e._waitingCallbacks[0];e._waitingCallbacks.shift(),t.cb(t.aborted?new r.Error(r.ERR_OPERATION_ABORTED):null)}},i.prototype.remove=function(){var e=this;e._destroyed||(e._destroyed=!0,e.abort(),"closed"!==e._mediaSource.readyState&&e._mediaSource.removeSourceBuffer(e.buffer))}},{"./error":150}],157:[function(e,t,n){"use strict";function i(e,t,n,i,r){var o=this;o._bandwidthEstimator=i,o._rangeQueryOpts=r,o.indexEnd=e.indexEnd,o._initialFetchEnd=e.initialFetchEnd||0,o.url=e.url,o.initSegment=null,o.metadata=n,o.trackNum=t}var r=e("./range-request"),o=e("./mp4-parser");t.exports=i,i.prototype.fetchInitSegment=function(e,t){var n=this,i=n.indexEnd+1,a=i;e&&n._initialFetchEnd>a&&(a=n._initialFetchEnd+1);var s=new Uint8Array(i),l=0,c=new r(n.url,0,a,!0,n._bandwidthEstimator,n._rangeQueryOpts),p=c.stream,d=!1;return p.on("error",function(e){n.initSegment||d||(d=!0,t(e))}),p.on("data",function(e){if(!n.initSegment&&!d){var r=Math.min(i-l,e.byteLength),a=new Uint8Array(e,0,r);if(s.set(a,l),l+=r,l===i){var c=new o(i,s.buffer),p=n.metadata.addData(n.trackNum,c.fragments);p?d=!0:n.initSegment=s.buffer.slice(0,n.indexEnd+1),t(p)}}}),e?p:null},i.prototype.streamFragment=function(e,t){var n=this,i=n.metadata.chunks[e].tracks[n.trackNum],o=new r(n.url,i.startByte,i.endByte,t,n._bandwidthEstimator,n._rangeQueryOpts);return o.stream}},{"./mp4-parser":153,"./range-request":155}],158:[function(e,t,n){"use strict";n.TIMESTAMP_EPSILON=.001,n.findEndOfBuffer=function(e,t){for(var i=0;i<e.length;i++){var r=e.start(i),o=e.end(i);if(t>=r-n.TIMESTAMP_EPSILON&&t<=o+n.TIMESTAMP_EPSILON)return o}return null}},{}],159:[function(e,t,n){var i={};!function(e,t){function n(e){return String(null===e||void 0===e?"":e)}function i(e){return e=n(e),c.test(e)?e.replace(r,"&amp;").replace(o,"&lt;").replace(a,"&gt;").replace(s,"&#39;").replace(l,"&quot;"):e}e.Template=function(e,n,i,r){this.r=e||this.r,this.c=i,this.options=r,this.text=n||"",this.buf=t?[]:""},e.Template.prototype={r:function(e,t,n){return""},v:i,t:n,render:function(e,t,n){return this.ri([e],t||{},n)},ri:function(e,t,n){return this.r(e,t,n)},rp:function(e,t,n,i){var r=n[e];return r?(this.c&&"string"==typeof r&&(r=this.c.compile(r,this.options)),r.ri(t,n,i)):""},rs:function(e,t,n){var i=e[e.length-1];if(!p(i))return void n(e,t,this);for(var r=0;r<i.length;r++)e.push(i[r]),n(e,t,this),e.pop()},s:function(e,t,n,i,r,o,a){var s;return p(e)&&0===e.length?!1:("function"==typeof e&&(e=this.ls(e,t,n,i,r,o,a)),s=""===e||!!e,!i&&s&&t&&t.push("object"==typeof e?e:t[t.length-1]),s)},d:function(e,t,n,i){var r=e.split("."),o=this.f(r[0],t,n,i),a=null;if("."===e&&p(t[t.length-2]))return t[t.length-1];for(var s=1;s<r.length;s++)o&&"object"==typeof o&&r[s]in o?(a=o,o=o[r[s]]):o="";return i&&!o?!1:(i||"function"!=typeof o||(t.push(a),o=this.lv(o,t,n),t.pop()),o)},f:function(e,t,n,i){for(var r=!1,o=null,a=!1,s=t.length-1;s>=0;s--)if(o=t[s],o&&"object"==typeof o&&e in o){r=o[e],a=!0;break}return a?(i||"function"!=typeof r||(r=this.lv(r,t,n)),r):i?!1:""},ho:function(e,t,n,i,r){var o=this.c,a=this.options;a.delimiters=r;var i=e.call(t,i);return i=null==i?String(i):i.toString(),this.b(o.compile(i,a).render(t,n)),!1},b:t?function(e){this.buf.push(e)}:function(e){this.buf+=e},fl:t?function(){var e=this.buf.join("");return this.buf=[],e}:function(){var e=this.buf;return this.buf="",e},ls:function(e,t,n,i,r,o,a){var s=t[t.length-1],l=null;if(!i&&this.c&&e.length>0)return this.ho(e,s,n,this.text.substring(r,o),a);if(l=e.call(s),"function"==typeof l){if(i)return!0;if(this.c)return this.ho(l,s,n,this.text.substring(r,o),a)}return l},lv:function(e,t,i){var r=t[t.length-1],o=e.call(r);return"function"==typeof o&&(o=n(o.call(r)),this.c&&~o.indexOf("{{"))?this.c.compile(o,this.options).render(r,i):n(o)}};var r=/&/g,o=/</g,a=/>/g,s=/\'/g,l=/\"/g,c=/[&<>\"\']/,p=Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)}}("undefined"!=typeof n?n:i)},{}],160:[function(e,t,n){var i={};t.exports=function(e){if(!i[e]){i[e]=!0;var t=document.createElement("style");t.setAttribute("type","text/css"),"textContent"in t?t.textContent=e:t.styleSheet.cssText=e;var n=document.getElementsByTagName("head")[0];n.appendChild(t)}}},{}],161:[function(e,t,n){function i(e,t){function n(){4===p.readyState&&i()}function i(){var e=null,n=p.statusCode=p.status,i=p.body=p.response||p.responseText||p.responseXML;if(1223===n&&(n=204),0===n||n>=400&&600>n){var r=p.responseText||s[String(p.status).charAt(0)];e=new Error(r),e.statusCode=p.status}if(f)try{i=p.body=JSON.parse(i)}catch(o){}t(e,p,i)}function o(e){t(e,p)}"string"==typeof e&&(e={uri:e}),e=e||{},t=a(t);var p=e.xhr||null;!p&&e.cors?p=new c:p||(p=new l);var d,u=p.url=e.uri||e.url,_=p.method=e.method||"GET",v=e.body||e.data,y=p.headers=e.headers||{},m=!!e.sync,f=!1;if("json"in e&&(f=!0,y.Accept="application/json","GET"!==_&&"HEAD"!==_&&(y["Content-Type"]="application/json",v=JSON.stringify(e.json))),p.onreadystatechange=n,p.onload=i,p.onerror=o,p.onprogress=function(){},p.ontimeout=r,p.open(_,u,!m),e.cors&&(p.withCredentials=!0),m||(p.timeout="timeout"in e?e.timeout:5e3),p.setRequestHeader)for(d in y)y.hasOwnProperty(d)&&p.setRequestHeader(d,y[d]);return"responseType"in e&&(p.responseType=e.responseType),p.send(v),p}function r(){}var o=e("global/window"),a=e("once"),s={0:"Internal XMLHttpRequest Error",4:"4xx Client Error",5:"5xx Server Error"},l=o.XMLHttpRequest||r,c="withCredentials"in new l?o.XMLHttpRequest:o.XDomainRequest;t.exports=i},{"global/window":162,once:163}],162:[function(e,t,n){(function(e){"undefined"!=typeof window?t.exports=window:"undefined"!=typeof e?t.exports=e:t.exports={}}).call(this,"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],163:[function(e,t,n){function i(e){var t=!1;return function(){return t?void 0:(t=!0,e.apply(this,arguments))}}t.exports=i,i.proto=i(function(){Object.defineProperty(Function.prototype,"once",{value:function(){return i(this)},configurable:!0})})},{}]},{},[41]);
