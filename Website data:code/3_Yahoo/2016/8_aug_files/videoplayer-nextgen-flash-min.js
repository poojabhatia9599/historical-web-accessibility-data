require=function e(t,n,r){function i(o,s){if(!n[o]){if(!t[o]){var l="function"==typeof require&&require;if(!s&&l)return l(o,!0);if(a)return a(o,!0);throw new Error("Cannot find module '"+o+"'")}var d=n[o]={exports:{}};t[o][0].call(d.exports,function(e){var n=t[o][1][e];return i(n?n:e)},d,d.exports,e,t,n,r)}return n[o].exports}for(var a="function"==typeof require&&require,o=0;o<r.length;o++)i(r[o]);return i}({TL7Kjz:[function(e,t,n){"use strict";function r(e){var t={};switch(e){case d.HTML5_HLS:t={acceptedProtocols:["http"],preferredFormats:["m3u8"],acceptedFormats:["m3u8","m3u8_playlist"]};break;case d.HTML5_RAW:t={acceptedProtocols:["http"],preferredFormats:m,acceptedFormats:y};break;case d.HTML5_DASH:t={acceptedProtocols:["http"],preferredFormats:["mp4dash"],acceptedFormats:["mp4dash","mpd"]};break;case d.HTML5_TV:case d.HTML5_TV_TIZEN:case d.HTML5_TV_ORSAY:t={acceptedProtocols:["http"],preferredFormats:["m3u8","mp4"],acceptedFormats:["m3u8","m3u8_playlist","mp4"]};break;case d.FLASH:t={acceptedProtocols:["http","rtmp"],preferredFormats:["m3u8","mp4","flv","f4m","x-flv"],acceptedFormats:["m3u8","m3u8_playlist","mp4","flv","f4m","x-flv",""]}}return t}function i(e){return"probably"===e}t.exports=r;var a,o=e("./user-agent"),s=e("../nextgen/src/util"),l=document.createElement("video"),d=e("../nextgen/src/renderers/type");try{if(a=!1,l.canPlayType){var c=l.canPlayType('application/vnd.apple.mpegURL; codecs="avc1.42E01E, mp4a.40.2"');a=o.android?!!c:i(c),!a&&o.tv&&(a=i(l.canPlayType("application/vnd.apple.mpegurl")))}}catch(p){a=!1}o.tv&&(window.noHLS&&(a=!1),window.hls&&(a=!0));var u;try{u=l.canPlayType?i(l.canPlayType('video/mp4; codecs="avc1.42E01E, mp4a.40.2"')):!1}catch(p){u=!1}var _;try{_=l.canPlayType?i(l.canPlayType('video/webm; codecs="vp8, vorbis"')):!1}catch(p){_=!1}o.tv&&(_=!1);var m=[];if(o.android&&m.push("mp4b"),(a||o.android&&s.isAndroidVersionAbove4())&&m.push("m3u8"),u&&m.push("mp4"),_){var v=m.indexOf("mp4");o.firefox&&v>-1?m.splice(v,0,"webm"):m.push("webm")}var y=m.slice(),f=y.indexOf("mp4b");f>-1&&y.splice(f+1,0,"mp4"),y.push("")},{"../nextgen/src/renderers/type":47,"../nextgen/src/util":"jJTEqU","./user-agent":"ty5FFo"}],"./lib/capability.js":[function(e,t,n){t.exports=e("TL7Kjz")},{}],"./lib/event-bus.js":[function(e,t,n){t.exports=e("3ECu9u")},{}],"3ECu9u":[function(e,t,n){"use strict";function r(e){var t=this;t.name=e?e:"unnamed",t._events={},t._noLogEvents={"controls-bar-change":1,"cc-position-float":1,beaconSend:1,"seek-bar-mouseover":1,"seek-bar-mouseout":1,"volume-hover":1,"playback-info":1,"ad-metrics":1,"ad-opportunity":1}}t.exports=r;var i=e("./logger");r.prototype.once=function(e,t,n){function r(){a&&a()}var i=this,a=i.subscribe(e,function(){t.apply(n,Array.prototype.slice.call(arguments,0)),a()},i);return r},r.prototype.subscribe=function(e,t,n){function r(){i._unsubscribe(e,a)}var i=this;if(i._events){i._events[e]||(i._events[e]=[]);var a={subscriber:n,cb:t};return i._events[e].push(a),r.detach=r,r}},r.prototype._unsubscribe=function(e,t){var n=this;if(n._events&&e in n._events){var r=n._events[e].indexOf(t);r>-1&&n._events[e].splice(r,1)}},r.prototype.publish=function(e){var t=this;if(t._events){var n=Array.prototype.slice.call(arguments,1);if(e in t._events){var r=t._events[e].slice(0);t._log(e,r.length,n);for(var a=0;a<r.length;a++)try{r[a].cb.apply(r[a].subscriber,Array.prototype.slice.call(arguments,1))}catch(o){i.error("error in event handler:",o.message||o,o.stack)}}else t._log(e,0,n)}},r.prototype._log=function(e,t,n){var r=this,a=e.toLowerCase();if(-1===a.indexOf("timeupdate")&&-1===a.indexOf("progress")&&!(e in r._noLogEvents)){var o=["["+r.name+" bus][event]["+e+"]["+t+" subscribers]",n];!n.length&&o.pop(),i.log.apply(i,o)}},r.prototype.destroy=function(){var e=this;e._events=null}},{"./logger":"IS9j5T"}],"./lib/index.js":[function(e,t,n){t.exports=e("bRhrlU")},{}],bRhrlU:[function(e,t,n){function r(e){return Object.prototype.toString.call(e)}n.isArray=function(e){return Array.isArray(e)},n.isBoolean=function(e){return"boolean"==typeof e},n.isNullOrUndefined=function(e){return null==e},n.isNumber=function(e){return"number"==typeof e&&!isNaN(e)},n.isString=function(e){return"string"==typeof e},n.isObject=function(e){return"[object Object]"===r(e)},n.isFunction=function(e){return"function"==typeof e}},{}],"./lib/logger.js":[function(e,t,n){t.exports=e("IS9j5T")},{}],IS9j5T:[function(e,t,n){var r=e("./index"),i=e("./user-agent");n.keepConsoleLogs="undefined"==typeof false||false,i.phantomJS&&(n.keepConsoleLogs=!1),function(){var e=function(){},t=["log","error","warn"];t.forEach(function(t){if(r.isNullOrUndefined(window.console)||"log"===t&&!n.keepConsoleLogs)n[t]=e;else if(console[t].apply)n[t]=function(){window.console[t].apply(console,arguments)};else{var i=Function.prototype.bind.apply(console[t],console);n[t]=function(){i.apply(console,arguments)}}})}()},{"./index":"bRhrlU","./user-agent":"ty5FFo"}],"./lib/user-agent.js":[function(e,t,n){t.exports=e("ty5FFo")},{}],ty5FFo:[function(e,t,n){"use strict";function r(e){if(null===e)return!1;var t=e[1];return parseFloat(t.split(".",2).join("."))||1}var i=/<[A-Za-z]+.*?(\/>|>.*?<\/[A-Za-z]+>)|javascript:/g,a=navigator.userAgent.toLowerCase().replace(i,"");n.ua=a,n.chromium=r(/chromium\/([^\s]*)/.exec(a)),n.edge=r(/edge\/([^\s]*)/.exec(a)),n.opera=/opr\/|opera\//.test(a),n.chrome=!n.chromium&&!n.edge&&!n.opera&&r(/chrome\/([^\s]*)/.exec(a)),n.ie=r(/msie ([^;]*)/.exec(a))||r(/trident.*; rv:([0-9.]+)/.exec(a)),n.firefox=r(/firefox\/([^\s]*)/.exec(a)),n.android=/android/.test(a),n.androidTablet=n.android&&!/mobile/.test(a),n.htc_one=/htc_one/.test(a),n.vizio=/Vizio/i.test(a)||window.YAHOO&&window.YAHOO.SmartTV&&"vizio"===window.YAHOO.SmartTV.manufacturer,n.tivo=/TiVo/i.test(a),n.firetv=n.android&&/amazonwebappplatform/.test(a)&&/aft/.test(a),n.lg=/web0s/.test(a),n.tizen=/tizen/.test(a),n.orsay=/smarttv/.test(a)&&!n.tizen&&!n.lg,n.samsung=n.orsay||n.tizen,n.sony=/(sony)/.test(a),n.ps4=/(playstation 4)/.test(a),n.ios=/(ipad|iphone|ipod)/.test(a),n.iphone=/(iphone|ipod)/.test(a)&&!/ipad/.test(a),n.ipad=n.ios&&!n.iphone,n.androidBrowser=!n.chrome&&/android/.test(a),n.androidVersion=r(/android\s([0-9\.]*)/.exec(a)),n.safari=!n.chrome&&!n.chromium&&!n.android&&/safari\/([^\s]*)/.test(a)&&r(/version\/([^\s]*)/.exec(a)),n.iosWebView=n.ios&&!navigator.standalone&&!n.safari,n.mobile=n.ios||n.android&&!n.firetv,n.safariDesktop=!n.mobile&&n.safari,n.tv=n.vizio||n.tivo||n.firetv||n.samsung||n.sony||n.ps4||n.lg,n.desktop=!n.mobile&&!n.tv,n.phantomJS=window.window&&window.window._phantom,n.tv?n.vizio?n.os="vizio":n.tivo?n.os="tivo":n.firetv?n.os="firetv":n.lg?n.os="lg":n.samsung?n.os="samsung":n.sony?n.os="sony":n.ps4?n.os="ps4":n.os=null:n.ios?n.os="ios":n.android?n.os="android":/windows|win32/.test(a)?n.os="windows":/macintosh|mac_powerpc/.test(a)?n.os="macintosh":/symbos/.test(a)?n.os="symbos":/linux/.test(a)?n.os="linux":n.os=null,n.winXP="windows"===n.os&&/(windows nt 5\.[1-3])/.test(a),n.winVista="windows"===n.os&&/(windows nt 6\.0)/.test(a),n.win7="windows"===n.os&&/(windows nt 6\.1)/.test(a),n.win8="windows"===n.os&&/(windows nt 6\.2)/.test(a),n.win8_1="windows"===n.os&&/(windows nt 6\.3)/.test(a),n.win10="windows"===n.os&&/(windows nt 10\.0)/.test(a),n.win64="windows"===n.os&&/(wow64|win64)/.test(a)},{}],11:[function(e,t,n){"use strict";function r(e,t,n,r){var i=this,a=n.YVAP;if(!a||!(a.accountId||a.standaloneAd.xml||a.standaloneAd.gemini))return i._enabled=!1,void r.createAdsInfoPanel(null);i._enabled=!0,i._ads={},i._eventBus=e,i._model=n,i._view=r,i._vodAdBreaks=[],i._lastBreaks=[],i._seeked=!1;var l=i._view.rootElem.querySelector(".yvp-content");l.setAttribute("id","yvp-content-node-"+Math.floor(1e4*Math.random())),t.skipNormalAd=function(){var e=i._model.playbackState.isAdPlaying(),t=e&&i._model.playbackState.ad.type===o.ADTYPES.NORMAL;return i._enabled&&i._currentAdId&&e&&t?(i.cancelAd(),i._maybePlayImpl(),!0):!1},t.createAdsInfoPanel=i._view.createAdsInfoPanel,a.volume=n.playbackState.volume,a.mute=n.playbackState.mute,i._view._profiler.add(s.Metrics.YVAP_READY),i._yvap=new m({yvap:a},i._eventBus,l,t,i._view.adsOverlay?i._view.adsOverlay.node:null),i._view._profiler.setEndTime(s.Metrics.YVAP_READY),i._targetBitrate=i._model.playback.desiredBitrate,i._eventBus.subscribe(s.ADS_OBJS_UPDATE,i._onAdsUpdate,i),i._eventBus.subscribe(s.ADS_READY,i._onAdsReady,i),i._eventBus.subscribe(s.AD_BREAK_TIMELINE,i._onAdBreakTimeline,i),i._eventBus.subscribe(s.AD_PLAYBACK_STARTED,i._onAdPlaybackStarted,i),i._eventBus.subscribe(s.AD_PLAYBACK_ENDED,i._onAdPlaybackEnded,i),i._eventBus.subscribe(s.Ad.PLAYING,i._onPlaying,i),i._eventBus.subscribe(s.Ad.PAUSE,i._onPaused,i),i._eventBus.subscribe(s.Ad.TIMEUPDATE,i._onTimeupdate,i),i._eventBus.subscribe(s.Ad.ENDED,i._onEnded,i),i._eventBus.subscribe(s.Ad.ERROR,i._onError,i),i._eventBus.subscribe(s.Ad.CLICK,i._onClick,i),i._eventBus.subscribe(s.CONTROLS_SEEK_END,i._onSeekEnd,i),i._eventBus.subscribe(s.AD_PLAYBACK_PROGRESS,function(e,t,n){i._ads[i._currentAdId].playbackProgress=t}),i._eventBus.subscribe(s.BEFORE_INCOMPLETE_EXIT,function(e){e.vpaidLatencies=i._yvap.getVPAIDLatencies()})}function i(e,t){return!u.isNullOrUndefined(a(e,t))}function a(e,t){for(var n=Object.keys(e),r=0;r<n.length;r++){var i=n[r],a=e[i];if(t(a))return i}return null}t.exports=r;var o=e("./yvap/ads-json"),s=e("./event"),l=e("./states"),d=e("./stream"),c=e("../../lib/user-agent"),p=e("./media-store"),u=e("../../lib"),_=e("../../lib/logger"),m=e("./yvap/video-ad-plugin"),v=e("./renderers/type");r.prototype.prepare=function(e){var t=this;if(t._enabled){t._ads={},t._mediaItem=e,t._lastBreaks=e.progress.adbreaks;try{t._adsReady=!1,e.isCCM?t._yvap.beginAdExperience(e.id,e.progress.position):t._yvap.getAdsFor({clipId:e.id})}catch(n){_.error("[yvap] prepare error",n.message||n,n.stack),t._enabled=!1}}},r.prototype._setupTimeout=function(){var e=this;if(c.desktop&&!e._adsReady){var t=e._model.YVAP&&e._model.YVAP.timeout;t?(clearTimeout(e._adTimeout),e._adTimeout=setTimeout(function(){e._clearAdTimeoutAndPlay()},1e3*t)):(e._adsReady=!0,e._maybePlayImpl())}},r.prototype._clearAdTimeoutAndPlay=function(){var e=this;e._adsReady=!0,e._adTimeout&&(clearTimeout(e._adTimeout),e._adTimeout=null,e._maybePlayImpl())},r.prototype.maybePlay=function(e,t){var n=this;if(!n._enabled)return void t(!1);if(n._cb=t,"start"===e)n._currentAdPosition=o.POSITION.bumper,n._setupTimeout();else{if("end"!==e)return void n._cb(!1);n._currentAdPosition=o.POSITION.postroll}n._resetAdPlaybackInfo(),n._resetState(),n._adTimeout||n._maybePlayImpl()},r.prototype._countAds=function(e,t){var n,r,i,a=this,s=a._ads,l=Object.keys(s),d=function(e,t){return e.some(function(e){return t===e})},c=0;if(!s||!e||"object"!=typeof s)return c;"string"==typeof e&&(e=[e]),l=Object.keys(s);for(var p=0;p<l.length;p++)n=l[p],r=s[n].pos,t&&s[n].type===o.ADTYPES.NO_AD||(i=d(e,r),i&&c++);return c},r.prototype._maybePlayImpl=function(){var e=this,t=e._playCount>0;if(e._currentAdPosition!==o.POSITION.bumper||i(e._ads,function(e){return e.pos===o.POSITION.bumper})||(e._currentAdPosition=o.POSITION.preroll),e._currentAdId=a(e._ads,function(t){return t.pos===e._currentAdPosition}),e._currentAdId){var n=e._ads[e._currentAdId];n.playbackProgress=0,e._model.playbackState.ad=n,e._currentAdPosition===o.POSITION.midroll?n.type!==o.ADTYPES.NO_AD&&(e._midrollCurrent++,e._eventBus.publish(s.UPDATE_AD_COUNT,e._midrollCurrent,e._midrollCount)):e._eventBus.publish(s.UPDATE_AD_COUNT),e._eventBus.publish(s.AD_PLAYBACK_REQUEST,n.playbackId),e._play(n)}else e._model.playback.adPlaybackOnly||e._cb(t)},r.prototype._resetState=function(){var e=this;e._currentAdId=null,e._model.playbackState.ad=null,e._hasPlaybackStarted=!1},r.prototype._resetAdPlaybackInfo=function(){var e=this;e._playCount=0,e._adsStartedCount=0,e._adsErrorCount=0,e._erroredAdsDuration=0,e._adsPlayDurationExpected=0,e._adsPlayDurationActual=0,e._playedAdCreativeIds=[],e._unplayedDuration=0,e._adBreakCancelReason="na",e._adBreakCueInTime="na"},r.prototype._play=function(e){var t,n=this,r=n._model.adsRendererTypes;if(e.type===o.ADTYPES.VPAID)t=-1!==r.indexOf(v.FLASH)?v.FLASH:r.length>0?r[0]:v.HTML5_RAW,n._view.prepareNextRenderer({rendererType:t,ad:e},function(){n._view.switchToNextRenderer(),n._playVPAIDAd(e)});else if(e.type===o.ADTYPES.NO_AD)n._eventBus.publish(s.Ad.NO_AD,n._currentAdId),n._onAdPlaybackEnded();else{var i,a,c=n._model.adsCapabilities;if(e.streams.length)for(var p=0;p<r.length&&(t=r[p],a=c[t],!(i=d.findStreamByProperty(e.streams,"bitrate",n._targetBitrate,a)));p++);i?(n._playCount++,n._currentAdBitrate=i.bitrate,n._requestedTime=Date.now(),n._model.playbackState.state=l.VIDEO,n._view.prepareNextRenderer({rendererType:t,ad:e},function(){n._view.preloadNextAdRenderer({bestStream:i,mediaItem:n._mediaItem,rendererType:t,ad:e}),n._view.switchAndPlayNextRenderer(),n._model.playback.fullscreen&&n._view.setFullscreen(!0)})):(n._eventBus.publish(s.Ad.NO_PLAYABLE_STREAM,n._currentAdId),n._onEnded())}},r.prototype._playVPAIDAd=function(e){var t=this;t._playCount++,t._model.playbackState.state=l.VIDEO,t._model.playbackState.loading=!1,t._view.syncViewState(),t._model.playbackState.paused||t._view.pause(),t._yvap.renderVPAIDAd(e.playbackId,t._targetBitrate,t._view.rootElem.clientWidth,t._view.rootElem.clientHeight,t._model.playbackState.volume,t._model.playbackState.mute,t._model.playbackState.rendererType)},r.prototype.updateYVAPData=function(e){var t=this;if(t._enabled)try{t._yvap.updatePlayerData(e)}catch(n){_.error("[yvap] updatePlayerData error",n.message||n,n.stack),t._enabled=!1}},r.prototype._onAdsUpdate=function(e){var t=this;e.forEach(function(e){var n=e.playbackId;if(t._ads[n]?Object.keys(e).forEach(function(r){t._ads[n][r]=e[r]}):t._ads[n]=e,e.streams){var r=e.streams.map(function(e){return new p.Stream(e)});t._ads[n].streams=r}})},r.prototype._onAdsReady=function(){var e=this;e._model.YVAP&&(e._model.YVAP.adsReady=!0),e._clearAdTimeoutAndPlay()},r.prototype._onPaused=function(){var e=this;e._model.playbackState.paused=!0,e._eventBus.publish(s.AD_PLAYBACK_PAUSED),e._view.syncViewState()},r.prototype._onPlaying=function(){var e=this;if(e._hasPlaybackStarted)e._eventBus.publish(s.AD_PLAYBACK_RESUMED,e._currentAdId);else{e._hasPlaybackStarted=!0,e._model.playbackState.loading=!1,e._view.syncViewState();var t=Date.now()-e._requestedTime;e._eventBus.publish(s.AD_PLAYBACK_STARTED,e._currentAdId,e._currentAdBitrate,t)}e._model.playbackState.paused=!1,e._view.syncViewState()},r.prototype._onTimeupdate=function(e,t,n){var r=this;r._eventBus.publish(s.AD_PLAYBACK_PROGRESS,r._currentAdId,e,t,n)},r.prototype.cancelAd=function(){var e=this;e._enabled&&(e._eventBus.publish(s.Ad.CANCELED,e._currentAdId),e._clearAndResetAdState(),e._view.syncViewState())},r.prototype._cancelAdBreak=function(e){var t=this;if(t._currentAdId){var n=t._ads[t._currentAdId],r=n.duration-n.playbackProgress,i=[],a=[],o=Object.keys(t._ads);t._unplayedDuration+=r>0?r:0;for(var l=0;l<o.length;l++){var d=o[l],c=t._ads[d];c.pos===t._currentAdPosition&&d!==t._currentAdId&&(i.push(c.adObj.creativeId),a.push(c.playbackId),t._unplayedDuration+=c.duration,delete t._ads[d])}t._yvap.skipAd(),t._unplayedDuration=Math.round(t._unplayedDuration),t._adBreakCancelReason=e||t._adBreakCancelReason,t._eventBus.publish(s.Ad.BREAK_CANCELLED,{currentPlaybackId:t._currentAdId,position:t._currentAdPosition,unplayedCreativeIds:i,unplayedPlaybackIds:a,unplayedDuration:t._unplayedDuration,reason:t._adBreakCancelReason})}},r.prototype._setupAdBreakForceEndTimeout=function(e){var t=this;if(window.clearTimeout(t._adbreakForceEndTimeout),t._adbreakForceEndTimeout=null,e.adDuration){var n=10;t._adbreakForceEndTimeout=window.setTimeout(function(){window.clearTimeout(t._adbreakForceEndTimeout),t._adbreakForceEndTimeout=null,t._cancelAdBreak("timeout")},1e3*(e.adDuration+n))}},r.prototype._clearAndResetAdState=function(){var e=this;e._currentAdId&&(delete e._ads[e._currentAdId],e._resetState())},r.prototype._onEnded=function(){var e=this;e._eventBus.publish(s.AD_PLAYBACK_ENDED,e._currentAdId)},r.prototype._onAdPlaybackStarted=function(e,t,n,r,i,a){var o=this,s=o._ads[o._currentAdId];s&&(o._maybePrepareNextContent(),o._trackPlayedAds(n,a))},r.prototype._maybePrepareNextContent=function(){var e=this,t=e._ads[e._currentAdId],n=[o.POSITION.bumper,o.POSITION.preroll],r=!0;t&&-1!==n.indexOf(t.pos)&&1===e._countAds(n,r)&&e._eventBus.publish(s.RENDERER_PP_NEXT,e._mediaItem)},r.prototype._trackPlayedAds=function(e,t){var n=this,r=n._ads[n._currentAdId],i=n._currentAdId,a=n._eventBus.subscribe(s.AD_PLAYBACK_PROGRESS,function(e,t,o){a(),i===n._currentAdId&&(n._adsPlayDurationActual+=o,n._adsPlayDurationExpected+=r.duration)},n);if(n._adsStartedCount++,r.type!==o.ADTYPES.NO_AD){r.adObj&&r.adObj.creativeId&&n._playedAdCreativeIds.push(r.adObj.creativeId);var l=r.type===o.ADTYPES.VPAID?t:e;n._fireAdBreakInfoEvt&&n._fireAdBreakInfoEvt(l)}},r.prototype._onAdPlaybackEnded=function(){var e=this;e._clearAndResetAdState(),e._maybePlayImpl()},r.prototype._onError=function(e,t){var n=this;_.error("Ad errored out",e),n._eventBus.publish(s.AD_PLAYBACK_ERROR,n._currentAdId,e,t);var r=n._ads[n._currentAdId];n._adsErrorCount++,n._erroredAdsDuration+=r&&r.duration||0,n._onEnded()},r.prototype._onClick=function(e){var t=this;if(t._currentAdId){var n=t._ads[t._currentAdId];t._eventBus.publish(s.AD_CLICK,t._currentAdId,e),window.open(n.clickUrl,"_blank")}},r.prototype.hasOccured=function(e){var t=(new Date).getTime(),n=t-e;return 36e5>n},r.prototype._onAdBreakTimeline=function(e){var t=this;c.mobile||(t._vodAdBreaks=e.map(function(e,n){return{time:e,occurred:t.hasOccured(t._lastBreaks[n]||0)}}),t._eventBus.publish(s.UPDATE_AD_BREAKS,t._vodAdBreaks))},r.prototype._startAdBreak=function(e,t,n){var r=this;r._resetAdPlaybackInfo(),r._resetState(),r._currentAdPosition=o.POSITION.midroll,t.occurred=!0,r._nextBreak=null,void 0!==t.adDuration&&r._eventBus.publish(s.UPDATE_AD_BREAKS,r._vodAdBreaks),r._cb=function(e){if(window.clearTimeout(r._adbreakForceEndTimeout),r._adbreakForceEndTimeout=null,e){var t=(new Date).getTime(),i=r._eventBus.subscribe(s.Video.PLAYING,function(){i();var e=(new Date).getTime()-t;r._fireAdBreakEndedEvt&&r._fireAdBreakEndedEvt(e)});r._breakEndEvtTimeout=window.setTimeout(r._fireAdBreakEndedEvt,5e3,"TO")}else r._fireAdBreakEndedEvt&&r._fireAdBreakEndedEvt();n(e)};var i=r._yvap.getMidrollAds(t.time,t.adDuration);r._eventBus.publish(s.AD_BREAK_STARTED,e,t.time);var a=i.filter(function(e){return e.type!==o.ADTYPES.NO_AD});r._createAdBreakEvtSenders(e,t,i,a),i.length>0?(r._midrollCount=a.length,r._midrollCurrent=0,r._eventBus.publish(s.ADS_OBJS_UPDATE,i),r._midrollCount>0?(r._breakInfoEvtTimeout=window.setTimeout(r._fireAdBreakInfoEvt,5e3,"TO"),r._setupAdBreakForceEndTimeout(t)):r._fireAdBreakInfoEvt(),r._maybePlayImpl()):(r._fireAdBreakInfoEvt(),r._cb(!1))},r.prototype.maybeAdBreak=function(e,t){var n=this,r=e.currentTime,i=e.isLive,a=e.adDuration;if(i||!(10>r)){if(!n._enabled)return void t(!1);if(!n._model.playbackState.seeking){if(i){var o={time:r,adDuration:a};return void n._startAdBreak(r,o,t)}n._nextBreak||(n._nextBreak=n._findNextBreak(r,n._vodAdBreaks.filter(function(e){return!e.occurred})));var s=function(e){t(e,d)};if(n._seeked){n._seeked=!1,n._nextBreak=null;var l=n._findPreviousBreak(r,n._vodAdBreaks),d=n._vodAdBreaks.indexOf(l);l&&!l.occurred&&n._startAdBreak(r,l,s)}else n._nextBreak&&n._nextBreak.time<r?n._startAdBreak(r,n._nextBreak,s):t(!1)}}},r.prototype.maybeEndAdBreak=function(e,t){var n=this;n._adBreakCueInTime="number"==typeof t?t:"unknown",n._cancelAdBreak(e)},r.prototype._createAdBreakEvtSenders=function(e,t,n,r){var i=this;window.clearTimeout(i._breakInfoEvtTimeout),window.clearTimeout(i._breakEndEvtTimeout),i._breakInfoEvtTimeout=null,i._breakEndEvtTimeout=null;var a=0;r.forEach(function(e){a+=e.duration});var o=i._yvap.isAdBlockerDetected();i._fireAdBreakInfoEvt=function(l){window.clearTimeout(i._breakInfoEvtTimeout),i._breakInfoEvtTimeout=null,i._fireAdBreakInfoEvt=null;var d=r.map(function(e){return e.adObj.creativeId});i._eventBus.publish(s.AD_BREAK_INFO,{adStartLatency:l||"na",creativeIds:d,numMidrollsTotal:n.length,numMidrollsValid:r.length,readyAdsDuration:Math.round(a),adBlockerDetected:o,adBreakDuration:t.adDuration,contentTime:e,time:t.time})},i._fireAdBreakEndedEvt=function(n){window.clearTimeout(i._breakEndEvtTimeout),i._breakEndEvtTimeout=null,i._fireAdBreakEndedEvt=null,i._eventBus.publish(s.AD_BREAK_ENDED,{videoStartLatency:n||"na",creativeIds:i._playedAdCreativeIds,adsStartedCount:i._adsStartedCount,readyAdsDuration:Math.round(a),adsPlayDurationExpected:Math.round(i._adsPlayDurationExpected),adsPlayDurationActual:Math.round(i._adsPlayDurationActual),adsErrorCount:i._adsErrorCount,erroredAdsDuration:i._erroredAdsDuration,adBlockerDetected:o,unplayedDuration:i._unplayedDuration,adBreakCueInTime:i._adBreakCueInTime,adBreakDuration:t.adDuration,contentTime:e,time:t.time})}},r.prototype._findNextBreak=function(e,t){var n=null;return t.forEach(function(t){t.time>e&&(!n||t.time<n.time)&&(n=t)}),n},r.prototype._findPreviousBreak=function(e,t){var n=null;return t.forEach(function(t){t.time<e&&(!n||t.time>n.time)&&(n=t)}),n},r.prototype._onSeekEnd=function(){var e=this;e._seeked=!0},r.prototype.destroy=function(){var e=this;e._yvap&&e._yvap.destroy()}},{"../../lib":"bRhrlU","../../lib/logger":"IS9j5T","../../lib/user-agent":"ty5FFo","./event":"YJm+dH","./media-store":26,"./renderers/type":47,"./states":50,"./stream":"Af6MnA","./yvap/ads-json":100,"./yvap/video-ad-plugin":151}],12:[function(e,t,n){"use strict";function r(e,t,n,r,i){var a=this;a._eventBus=e,a._view=n,a._model=t,a._controller=r,a._fetcher=i}t.exports=r,t.exports.AGE_GATE_SCREEN_TYPES=l;var i=e("./util"),a=e("../../lib"),o=e("./event"),s=e("./strings"),l={login:"login",birthday:"birthday",warning:"warning",block:"block"},d="vpReleaseTime",c=864e5,p="WAIT";r.prototype._initiateAgeGateScreen=function(e){var t=this;t._view.destroyAgeGateScreen(),t._view.renderAgeGateScreen(t._getScreenStringsObj(e),t),t._activeScreenType=e,t._eventBus.publish(o.API.UI_INTERACT,{srcElement:"age-"+t._ageGateType}),t._model.ui.showAgeGate=!0,t._waitTimeout&&clearTimeout(t._waitTimeout)},r.prototype.run=function(){var e=this,t=e._model.userPreferences.isAuthenticated,n=!i.isOffNetwork(),r=e._model.userPreferences.isAdult,a=e._isUser24HrsBanned();e._ageGateType=e._model.playlist.getCurrentItem()&&e._model.playlist.getCurrentItem().ageGate;var o=e._getApplicableAgeGateScreen(t,n,r,a);o&&"none"!==e._ageGateType?o===p?e._waitTimeout=setTimeout(function(){e._model.ui.showAgeGate||this._initiateAgeGateScreen(l.warning)},1e4):this._initiateAgeGateScreen(o):e._continuePlayerFlow()},r.prototype._getApplicableAgeGateScreen=function(e,t,n,r){var i=this;return e||r?!r&&n?null:a.isNullOrUndefined(i._model.userPreferences.isAdult)&&!r?(i._fetcher.getUserPreferences(),p):l.block:t?l[i._ageGateType]:i._ageGateType===l.birthday?l[i._ageGateType]:l.warning},r.prototype._getScreenStringsObj=function(e){var t=this,n={title:t._getLocalizedString("CONTENT_RESTRICTED"),desc:"",button:"",isBirthday:!1,isBlock:!1};e===l.login?(n.desc=t._getLocalizedString("AGE_GATE_DESC"),n.button=t._getLocalizedString("SIGN_IN_TO_VIEW_ACTION")):e===l.warning?(n.desc=t._getLocalizedString("AGE_GATE_DESC"),n.button=t._getLocalizedString("CONTINUE_ACTION")):e===l.birthday?(n.desc=t._getLocalizedString("AGE_GATE_BDAY_DESC"),n.button=t._getLocalizedString("SUBMIT_ACTION"),n.isBirthday=!0):e===l.block&&(n.desc=t._getLocalizedString("AGE_GATE_NOT_ALLOWED_DESC"),n.isBlock=!0);var r=t._model.playlist.getCurrentItem();return n.imageSrc=r.images.defaultThumbnail,n.width=t._model.uiState.width,n.height=t._model.uiState.height,n},r.prototype._isUser24HrsBanned=function(){var e=this;if(!e._user24HrsBanned){var t=i.localStorage.get(d);isNaN(parseInt(t))||(e._user24HrsBanned=(new Date).getTime()-t<0)}return e._user24HrsBanned},r.prototype._continuePlayerFlow=function(){var e=this;e._model.ui.showAgeGate=!1,e._view.destroyAgeGateScreen(),e._activeScreenType=null,e._waitTimeout&&clearTimeout(e._waitTimeout),e._controller.play()},r.prototype._getLocalizedString=function(e){return s.i18n[e]},r.prototype._handleLoginClick=function(){var e=this;e._eventBus.publish(o.UI_LOGIN,"ui_agebl"),i.showUserAuthPage(e._model)},r.prototype._handleBirthDayClick=function(e,t){if(t){var n=this,r=n._isValidDate(t.inputMonth.value,t.inputDay.value,t.inputYear.value);i.classList(t.inputMonth).remove("validate-error"),i.classList(t.inputDay).remove("validate-error"),i.classList(t.inputYear).remove("validate-error");for(var a=n._getInvalidDateInputNodes(t.inputMonth,t.inputDay,t.inputYear),o=0;o<a.length;o++)i.classList(a[o]).add("validate-error");if(!r||a.length>0)return;n._isUserAdult(new Date(t.inputYear.value,t.inputMonth.value-1,t.inputDay.value),n._model.baseConfig.region)?n._continuePlayerFlow():(n._initiateAgeGateScreen(l.block),i.localStorage.put(d,(new Date).getTime()+c))}},r.prototype._handleWarningClick=function(){var e=this;e._continuePlayerFlow()},r.prototype.handleClickEvent=function(e,t){var n=this;n._activeScreenType===l.login?n._handleLoginClick(e):n._activeScreenType===l.birthday?(n._eventBus.publish(o.CTRL_AGEGATE_BDAY),n._handleBirthDayClick(e,t)):n._activeScreenType===l.warning&&n._handleWarningClick(e),n._eventBus.publish(o.API.UI_INTERACT,{srcElement:"age-"+n._activeScreenType+"-btn"})},r.prototype._isValidDate=function(e,t,n){var r=/^\d{1,2}$/,i=/^\d{4}$/;if(!(r.test(e)&&r.test(t)&&i.test(n)))return!1;var a=parseInt(t),o=parseInt(e),s=parseInt(n);if(1e3>s||s>3e3||0===o||o>12)return!1;var l=[31,28,31,30,31,30,31,31,30,31,30,31];return(s%400===0||s%100!==0&&s%4===0)&&(l[1]=29),a>0&&a<=l[o-1]},r.prototype._getInvalidDateInputNodes=function(e,t,n){var r,i,a,o,s,l,d=[];try{r=parseInt(e.value),o=r>=1&&12>=r}catch(c){o=!1}try{i=parseInt(t.value),s=i>=1&&31>=i}catch(c){s=!1}try{a=parseInt(n.value),l=a>=1900&&a<=(new Date).getFullYear()}catch(c){l=!1}return o||d.push(e),s||d.push(t),l||d.push(n),d},r.prototype._isUserAdult=function(e,t){if(a.isNullOrUndefined(e))return!1;var n=new Date((new Date).getTime()-e.getTime()).getUTCFullYear()-1970;return t.toLowerCase()in["kr","sg","th"]?n>=21:n>=18},r.prototype.filterNonDigitInput=function(e){var t,n,r,i,a=[9,37,39];return e?(r=e.keyCode,i=e.shiftKey,e.stopPropagation?e.stopPropagation():e.cancelBubble=!0,t=r>=48&&57>=r||r>=96&&105>=r||8===r||46===r,n=a.indexOf(r)>-1,!i&&t||n?!0:(e.preventDefault?e.preventDefault():e.returnValue=!1,!1)):!1},r.prototype.isWaitingAuthentication=function(){var e=this;return!a.isNullOrUndefined(e._waitTimeout)},r.prototype.getPlayerWidth=function(){var e=this;return e._model.uiState.width},r.prototype.getPlayerHeight=function(){var e=this;return e._model.uiState.height},r.prototype.destroy=function(){var e=this;e._model.ui.showAgeGate=!0}},{"../../lib":"bRhrlU","./event":"YJm+dH","./strings":"XwKsC9","./util":"jJTEqU"}],13:[function(e,t,n){"use strict";function r(e,t,n,r){function i(e,t){return e-t}var a=this;a._videoTag=e,a._availableBitrates=t?t.sort(i):[],a.reservoirLength=n||s,a.cushionLength=r||l,a.currentBitrate=0,a._bufferingEventsForBitrates={},a._availableBitrates.forEach(function(e){a._bufferingEventsForBitrates[e]=0}),e&&e.addEventListener("waiting",function(){a._bufferingEventsForBitrates[a.currentBitrate]=a._bufferingEventsForBitrates[a.currentBitrate]+1},!1)}t.exports=r;var i=e("./util"),a="yvpTargetBitrate",o=900,s=10,l=20;r.prototype.setTargetBitrate=function(e){i.localStorage.put(a,e)},r.prototype.getTargetBitrate=function(){var e=this,t=i.localStorage.get(a);return t||(t=o,e.setTargetBitrate(o)),t},r.prototype.getBufferOccupancy=function(){for(var e=this,t=e._videoTag.buffered,n=e._videoTag.currentTime,r=0;r<t.length;r++){var i=t.start(r),a=t.end(r);if(n>=i&&a>=n){var o=a-n;if(o>=e._videoTag.length-n)return Number.MAX_VALUE}return o}return 0},r.prototype._getIdealRecommendedBitrate=function(e,t){var n=this;if(t===Number.MAX_VALUE)return n.currentBitrate;var r=e[0];if(t>n.reservoirLength){var i=e[0],a=e[e.length-1],o=(a-i)/n.cushionLength;r=(t-n.reservoirLength)*o+i}return r},r.prototype._findMaxLessEqualIdealRate=function(e,t){for(var n=e.length-1;n>=0;n--){var r=e[n];if(t>=r)return r}return e[0]},r.prototype._findMinGreaterEqualIdealRate=function(e,t){for(var n=0;n<e.length;n++){var r=e[n];if(r>=t)return r}return e[e.length-1]},r.prototype.getRecommendedBitrate=function(e,t,n){var r=this;t=t||r._availableBitrates,n=void 0===n?r.getBufferOccupancy():n,e=void 0===e?t.indexOf(r.currentBitrate):e;var i=t[e],a=t[0],o=t[t.length-1],s=i===o?o:t[e+1],l=i===a?a:t[e-1],d=r._getIdealRecommendedBitrate(t,n),c=i;return d>=s?c=r._findMaxLessEqualIdealRate(t,d):l>=d&&(c=r._findMinGreaterEqualIdealRate(t,d)),c},r.prototype.getNumberOfBufferingsForBitrate=function(e){var t=this;return t._bufferingEventsForBitrates[e]}},{"./util":"jJTEqU"}],14:[function(e,t,n){"use strict";function r(e,t){var n=this;n._model=e,n._eventBus=t,s=window.chrome,n._session=null,n._sessionStatus=null,n._mediaSession=null,n._currentLocalMediaItem=null,n._currentCastingYVPMediaItem=null,n._receiverAvailable=!1,n._progressTimer=null,s.cast?s.cast.isAvailable?n._initializeCastApi():setTimeout(n._initializeCastApi.bind(n),1e3):window.__onGCastApiAvailable||(window.__onGCastApiAvailable=function(e,t){e&&n._initializeCastApi()},d.lazyLoad(m,1e4,function(e){})),n._eventBus.subscribe(l.MEDIA_ITEM_LOADED,n._onLocalPlayerMediaItemLoaded,n)}function i(e){return{onSuccess:function(){var t=Array.prototype.slice.call(arguments,1);a("[media command executed]",e,t.length?t:"")},onError:function(){var t=Array.prototype.slice.call(arguments,1);o("[media command failed]",e,t.length?t:"")}}}function a(){p.log.apply(console,["[cast]"].concat(Array.prototype.slice.call(arguments)))}function o(){p.warn.apply(console,["[cast]"].concat(Array.prototype.slice.call(arguments)))}t.exports=r;var s,l=e("./event"),d=e("./util"),c=e("../../lib"),p=e("../../lib/logger"),u=e("./error"),_=e("./constants"),m="https://www.gstatic.com/cv/js/sender/v1/cast_sender.js",v=1e3,y="urn:x-cast:com.yahoo.video.custom",f={hls:"application/vnd.apple.mpegurl",dash:"application/dash+xml",mp4:"video/mp4"};r.prototype._initializeCastApi=function(){var e=this,t={CUSTOM:_.CHROMECAST_RECEIVER_ID,DEFAULT:s.cast.media.DEFAULT_MEDIA_RECEIVER_APP_ID},n=new s.cast.SessionRequest(t.CUSTOM),r=e._sessionListener.bind(e),i=e._receiverListener.bind(e),o=s.cast.AutoJoinPolicy.PAGE_SCOPED,d=new s.cast.ApiConfig(n,r,i,o),c=function(){a("cast sender-api initialization: Successful"),e._initialized=!0,e._resetCastState(),e._eventBus.subscribe(l.API.UI_INTERACT,e._onUIInteract,e),e._eventBus.subscribe(l.API.PLAYER_MUTE_CHANGE,e.setMute,e),e._eventBus.subscribe(l.CONTROLS_SET_VOLUME,e.setVolume,e),e._eventBus.subscribe(l.API.PLAYER_VOLUME_CHANGE,e.setVolume,e),e._eventBus.subscribe(l.CONTROLS_SEEKING,e.seek,e),e._eventBus.subscribe(l.TOGGLE_PLAY_PAUSE,e._togglePlayPause,e),e._eventBus.subscribe(l.CC.TOGGLE,e._onCCToggle,e)},p=function(t){a("cast sender-api initialization: Error",t),e._initialized=!1};s.cast.initialize(d,c,p)},r.prototype._resetCastState=function(){var e=this;e._model.castState={connected:!1,mediaLoaded:!1,paused:!1,playerState:s.cast.media.PlayerState.IDLE,progress:null,volume:{level:null,muted:null},items:{},currentItemId:null,currentItemYVPUUID:null,captionsOn:!1,captionsAvailable:!1},e._model.castState.getCurrentCastingYVPMediaItem=function(){return e._model.playlist.getMediaItemById(this.currentItemYVPUUID)}},r.prototype._receiverListener=function(e){a("receiverStatus",e);var t=this;t._receiverAvailable=e===s.cast.ReceiverAvailability.AVAILABLE,t._updateCastingAvailability(),!t._receiverAvailable&&t._session&&t._updateSession(null)},r.prototype._togglePlayPause=function(){var e=this;if(e._session)if(e.isCastMediaLoaded()){var t=e._model.castState.playerState;t===s.cast.media.PlayerState.PLAYING?e.pause():e.play();
}else e._requestMediaLoad()},r.prototype._onCCToggle=function(e){var t=this;t.isCastMediaLoaded()&&(e?t._enableCaptions():t._disableCaptions())},r.prototype._updateCastingAvailability=function(){var e=this,t=e._receiverAvailable&&e._isMediaItemCastable(e._currentLocalMediaItem);e._eventBus.publish(l.API.CAST_AVAILABILITY_CHANGE,t),a("Is receiver available: %s. Is casting available = %s",e._receiverAvailable,t)},r.prototype._sessionListener=function(e){a("sessionListener found pre-existing session for auto-joining with numMediaItems="+e.media.length);var t=this;t._updateSession(e),0!==e.media.length&&(t._onMediaDiscovered("Auto-Joining exisiting session",e.media[0]),t._onMediaStatusUpdate())},r.prototype._requestNewCastingSession=function(){var e=this;a("requesting new casting session"),s.cast.requestSession(e._onRequestSessionSuccess.bind(e),e._onRequestSessionError.bind(e))},r.prototype._onRequestSessionSuccess=function(e){a("new casting session request: success");var t=this;t._updateSession(e),t._requestMediaLoad()},r.prototype._onRequestSessionError=function(e){var t=this;a("new casting session request: error",e),t._publishCastError(u.CAST_CODES.E_CAST_CONNECTION_REQUEST_FAILED,e)},r.prototype._updateSession=function(e){a("updateSession",{session:e});var t=this;if(t._session=e,!e){var n=t._model.castState.items[t._model.castState.currentItemId];return t._updateCastingMediaSession(null),void t._handleCastConnectionChanged(!1,n)}t._session.addUpdateListener(t._sessionUpdateListener.bind(t)),t._sessionUpdateListener(),t._session.addMediaListener(function(e){a("** Session.Medialistener **** A sender from current session changed a media on cast device",e)}),t._session.addMessageListener(y,function(e,t){var n=JSON.parse(t);a("** cast msg received **",n)})},r.prototype._sessionUpdateListener=function(){var e=this,t=s.cast.SessionStatus;if(a("_sessionUpdateListener, status=",e._session.status,{s:e._session}),e._sessionStatus!==e._session.status)switch(e._sessionStatus=e._session.status,e._session.status){case t.STOPPED:e._updateSession(null);break;case t.CONNECTED:e._handleCastConnectionChanged(!0);break;case t.DISCONNECTED:}e._session&&(e._model.castState.volume.level!==e._session.receiver.volume.level&&(e._model.castState.volume.level=e._session.receiver.volume.level,e._eventBus.publish(l.CAST.VOLUME_CHANGED,e._session.receiver.volume.level)),e._model.castState.volume.muted!==e._session.receiver.volume.muted&&(e._model.castState.volume.muted=e._session.receiver.volume.muted,e._eventBus.publish(l.CAST.MUTE_CHANGED,e._session.receiver.volume.muted)))},r.prototype._endSession=function(){var e=this,t=function(e){a("end session success")},n=function(){a("end session error",arguments)};e._session.stop(t,n)},r.prototype._onLocalPlayerMediaItemLoaded=function(e){var t=this;t._currentLocalMediaItem=e,t._updateCastingAvailability()},r.prototype._onUIInteract=function(e){var t=this;switch(e.srcElement){case"ctrl-cast-start":case"ctrl-cast-stop":a("chromecast icon clicked"),t.isCastConnected()?t._endSession():t._requestNewCastingSession();break;case"ctrl-cast-disconnect":t._endSession();break;case"ctrl-cast-overlay":t._eventBus.publish(l.TOGGLE_PLAY_PAUSE)}},r.prototype._requestMediaLoad=function(){var e=this;if(a("sending request for media-load"),e._session&&!e._attemptingLoadMedia){var t=e._model.playlist.position,n=e._generateMediaInfo(e._currentLocalMediaItem),r=new s.cast.media.LoadRequest(n);r.autoplay=!0,r.currentTime=e._currentLocalMediaItem.progress.position||0,r.customData={media_uuid:n.customData.uuid,playlist_pos:t>-1?t:"unknown",videoSession:e._currentLocalMediaItem.videoSession,pageSpaceId:e._model.baseConfig.pageSpaceId,site:e._model.baseConfig.site,pls:e._model.guid,senderType:"desktop"};var i=function(t){e._attemptingLoadMedia=!1,e._onMediaDiscovered("loadMedia request",t)},o=function(){e._attemptingLoadMedia=!1,a("receiver cast device media load request errored",arguments)};e._attemptingLoadMedia=!0,e._session.loadMedia(r,i,o)}},r.prototype._onMediaDiscovered=function(e,t){var n=this;if(a("New casting media discovered via:",e),n._mediaSession===t)return void a("same mediasession as before, therefore not updating it");n._updateCastingMediaSession(t);var r=n._onMediaStatusUpdate.bind(n);n._mediaSession.addUpdateListener(r),t.currentTime&&t.items&&t.items.length&&n._eventBus.publish(l.CAST.PLAYBACK_PROGRESS,t.media.customData.uuid,t.currentTime,t.media.duration),setTimeout(function(){var e=n._mediaSession;e&&e.playerState!==n._model.castState.playerState&&(o("playerState not synced. _onMediaStatusUpdate() was not called. calling _checkReceiverPlayerStatus"),n._checkReceiverPlayerStatus())},2e3)},r.prototype._onMediaStatusUpdate=function(){var e=this,t=e._model.castState.currentItemId;if(a("_onMediaStatusUpdate.",e._mediaSession.playerState,{mediasession:e._mediaSession}),e._hasLoadedMediaChanged()&&(e._awaitingPlaybackStart=!0,e._handleCastMediaChanged(e._mediaSession.media.customData)),e._model.castState.currentItemId=e._mediaSession.currentItemId,e._model.castState.playerState!==e._mediaSession.playerState){e._stopProgressTimer();var n=e._model.castState.playerState;switch(e._model.castState.playerState=e._mediaSession.playerState,n===s.cast.media.PlayerState.BUFFERING&&e._handleCastBufferingChanged(!1),e._mediaSession.playerState){case s.cast.media.PlayerState.PLAYING:e._progressTimer=setInterval(e._updateProgress.bind(e),v),e._awaitingPlaybackStart&&(e._awaitingPlaybackStart=!1,e._handleCastPlayingChanged(!0));break;case s.cast.media.PlayerState.PAUSED:e._awaitingPlaybackStart=!0,e._handleCastPlayingChanged(!1);break;case s.cast.media.PlayerState.BUFFERING:e._handleCastBufferingChanged(!0);break;case s.cast.media.PlayerState.IDLE:e._mediaSession.idleReason===s.cast.media.IdleReason.FINISHED&&e._handleCastVideoEnded(t),e._hasPlaylistEnded()&&(e._handleCastMediaChanged(null),e._handleCastPlaylistEnded(),e._updateCastingMediaSession(null))}}},r.prototype._hasLoadedMediaChanged=function(){var e=this,t=e._mediaSession.currentItemId,n=null!==t&&t!==e._model.castState.currentItemId;return n},r.prototype._hasPlaylistEnded=function(){var e=this;return null===e._mediaSession.items},r.prototype._updateCastingMediaSession=function(e){var t=this;t._mediaSession=e,t._mediaSession||(t._currentCastingYVPMediaItem=null,t._model.castState.currentItemId=null,t._model.castState.currentItemYVPUUID=null,t._model.castState.paused=!1,t._model.castState.mediaLoaded=!1,t._stopProgressTimer(),t._model.castState.captionsAvailable=!1),t._attemptingLoadMedia=!1,t._updatePlaylistItemsData()},r.prototype._handleCastConnectionChanged=function(e,t){if("boolean"==typeof e){var n=this,r=n._model.castState;if(e!==r.connected){var i={};e?i.receiverName=n._session.receiver.friendlyName:t&&(i.uuid=t.media_uuid,i.playlist_pos=t.playlist_pos),n._model.castState.connected=e,n._eventBus.publish(l.CAST.CONNECTION_STATUS_CHANGED,e,i),!e&&n._resetCastState()}}},r.prototype._handleCastMediaChanged=function(e){var t=this;if(t._model.castState.mediaLoaded=!!e,e?(t._model.castState.currentItemYVPUUID=e.uuid,t._currentCastingYVPMediaItem=t._model.castState.getCurrentCastingYVPMediaItem()):t._model.castState.currentItemYVPUUID=null,t._eventBus.publish(l.CAST.MEDIA_CHANGED,e),e){var n=t._mediaSession.media&&t._mediaSession.currentItemId||null,r=null!==n?t._model.castState.items[n]:null;t._model.castState.captionsAvailable=!!(r&&r.captions&&r.captions.length)}else t._model.castState.captionsAvailable=!1;t._eventBus.publish(l.CAST.CAPTION_AVAILABILITY_CHANGED,t._model.castState.captionsAvailable),t._model.castState.captionsAvailable&&t._model.userPreferences.closedCaptions.show&&t._enableCaptions()},r.prototype._handleCastPlayingChanged=function(e){var t=this;t._model.castState.paused=!e,t._eventBus.publish(l.CAST.TOGGLE_PLAYING,e)},r.prototype._handleCastBufferingChanged=function(e){var t=this;t._eventBus.publish(l.CAST.BUFFERING,e)},r.prototype._handleCastVideoEnded=function(e){var t=this;t._model.castState.mediaLoaded=!1,t._model.castState.paused=!1,t._currentCastingYVPMediaItem&&(t._currentCastingYVPMediaItem.progress.position=0);var n=t._model.castState.items[e];t._eventBus.publish(l.CAST.VIDEO_ENDED,n.media_uuid)},r.prototype._handleCastPlaylistEnded=function(e){var t=this;t._eventBus.publish(l.CAST.PLAYLIST_ENDED)},r.prototype._checkReceiverPlayerStatus=function(){var e=this,t=i("get-status");e._mediaSession&&e._mediaSession.getStatus(null,t.onSuccess,t.onError)},r.prototype._updateProgress=function(){var e=this;if(e._session&&e._mediaSession){var t,n=e._mediaSession.media;n&&null!==n.duration?(t=e._mediaSession.getEstimatedTime(),e._eventBus.publish(l.CAST.PLAYBACK_PROGRESS,n.customData.uuid,t,n.duration)):(t=0,e._stopProgressTimer()),e._currentCastingYVPMediaItem&&(e._currentCastingYVPMediaItem.progress.position=t),e._model.castState.progress=t}},r.prototype._stopProgressTimer=function(){var e=this;e._progressTimer&&(clearInterval(e._progressTimer),e._progressTimer=null)},r.prototype._updatePlaylistItemsData=function(){var e=this;e._model.castState.items={};var t=e._mediaSession&&e._mediaSession.items;t&&t.forEach(function(t){var n=[];t.media.tracks&&t.media.tracks.forEach(function(e){e.type===s.cast.media.TrackType.TEXT&&n.push(e)}),e._model.castState.items[t.itemId]=t.customData,e._model.castState.items[t.itemId].captions=n})},r.prototype._enqueueMediaOnReceiver=function(e){var t=this,n=t._model.playlist,r=[],i=n.items.length-n.position-1,a=n.position+1;e&&(i=e.length,a=0);for(var o=a,s=a+i;s>o;o++){var l=e?e[o]:n.getMediaItemAt(o);l&&t._isMediaItemCastable(l)&&r.push(l)}r.length&&t._insertMediaItems(r)},r.prototype._insertMediaItems=function(e){var t=this,n=[];e.forEach(function(e){var r=t._generateMediaInfo(e),i=new s.cast.media.QueueItem(r);i.autoplay=!0,i.customData={media_uuid:r.customData.uuid,playlist_pos:"unknown"},i.preloadTime=10,i.startTime=0,n.push(i)});var r=new s.cast.media.QueueInsertItemsRequest(n),o=i("queue-items"),l=function(){a("queue-items successful"),t._updatePlaylistItemsData()};t._mediaSession.queueInsertItems(r,l,o.onError)},r.prototype._generateMediaInfo=function(e){var t=this,n=s.cast.media.StreamType,r=Math.floor(e.streams.length/2),i=e.streams[r].url,a=e.images.large||e.images.thumbnail||e.images.medium||e.images.small||e.images.provider,o=new s.cast.media.MediaInfo(i);o.metadata=new s.cast.media.GenericMediaMetadata,o.metadata.metadataType=s.cast.media.MetadataType.GENERIC,o.metadata.title=e.title,o.metadata.images=[{url:a}],o.streamType=e.isLive()?n.LIVE:n.BUFFERED,o.duration=e.duration,o.customData={uuid:e.id,title:e.title,thumbnail:a,mediaURL:i,isCCM:e.isCCM};var l=e.getType();return o.contentType=f[l],o.textTrackStyle=new s.cast.media.TextTrackStyle,o.tracks=t._createMediaInfoTracks(e,o),o},r.prototype._createMediaInfoTracks=function(e){var t;if(e.closedCaptions.length){var n=1,r=[];e.closedCaptions.forEach(function(e){var t=new s.cast.media.Track(n,s.cast.media.TrackType.TEXT);t.trackContentId=e.url,t.trackContentType=e.content_type,t.language=e.lang,t.name=e.lang,t.customData=null,n++,r.push(t)}),t=r.sort(function(e,t){return e.language===t.language?-1*e.trackContentType.localeCompare(t.trackContentType):e.language.localeCompare(t.language)})}return t},r.prototype._isMediaItemCastable=function(e){return!0},r.prototype._publishCastError=function(e,t){var n=this;n._eventBus.publish(l.WARNING,d.createErr("P",n._model.playbackState,u.E_CAST,e,t))},r.prototype._setCaptionTracks=function(e,t,n){var r=this,i=new s.cast.media.EditTracksInfoRequest(e);r._mediaSession.editTracksInfo(i,t,n)},r.prototype._enableCaptions=function(e){var t=this;if(t._mediaSession&&!c.isNullOrUndefined(t._mediaSession.currentItemId)){e=(e||t._model.userPreferences.closedCaptions.lang).toLocaleLowerCase();var n=t._model.castState,r=n.items[t._mediaSession.currentItemId].captions;if(0!==r.length){for(var i,s=function(){a("enable-captions successful"),n.captionsOn=!0},l=function(){o("enable-captions error")},d=0;d<r.length;d++){var p=(r[d].language||"").toLocaleLowerCase();if(p===e){i=r[d];break}}i||(i=r[0]),t._setCaptionTracks([i.trackId],s,l)}}},r.prototype._disableCaptions=function(){var e=this;if(e._mediaSession&&!c.isNullOrUndefined(e._mediaSession.currentItemId)){var t=function(){a("disable-captions successful"),e._model.castState.captionsOn=!1},n=function(){o("disable-captions error")};e._setCaptionTracks([],t,n)}},r.prototype._executeMediaCommand=function(e,t){var n=this;if(!n._mediaSession)return void a("trying "+e+" without a casting media loaded");if(!n._mediaSession[e])return void a("Command "+e+" is not allowed to be executed");var r=null;if("seek"===e){if("number"!=typeof t||0>t)throw"numSeconds while requesting seek on cast device needs to be defined and positive";r=new s.cast.media.SeekRequest,r.currentTime=t||0,r.resumeState=s.cast.media.ResumeState.PLAYBACK_START}var o=i(e);n._mediaSession[e](r,o.onSuccess,o.onError)},r.prototype.isCastMediaLoaded=function(){var e=this;if(e._initialized){var t=s.cast.media.PlayerState;return!(!e._mediaSession||e._mediaSession.playerState===t.IDLE)}return!1},r.prototype.isCastConnected=function(){var e=this;return e._initialized?!(!e._session||e._session.status!==s.cast.SessionStatus.CONNECTED):!1},r.prototype.play=function(){var e=this;e.isCastMediaLoaded()?e._executeMediaCommand("play"):(a("no castingMediaLoaded. Requesting to load media and cancelling this play request"),e._requestMediaLoad())},r.prototype.pause=function(){var e=this;e._executeMediaCommand("pause")},r.prototype.stop=function(){var e=this;e._executeMediaCommand("stop")},r.prototype.seek=function(e){var t=this;t._executeMediaCommand("seek",e)},r.prototype.setMute=function(e){var t=this;t._session&&t._session.setReceiverMuted(e)},r.prototype.setVolume=function(e){var t=this;t._session&&t._session.setReceiverVolumeLevel(e)}},{"../../lib":"bRhrlU","../../lib/logger":"IS9j5T","./constants":17,"./error":20,"./event":"YJm+dH","./util":"jJTEqU"}],zKzgQw:[function(e,t,n){"use strict";function r(e,t,n){var r=this;r._eventBus=e,r._model=t,r._view=n,r._userPreferences=r._model.userPreferences.closedCaptions;var i=a.localStorage.get(_);r._syncCCLocalData(i),r._eventBus.subscribe(s.Video.PLAYING,r._onVideoPlaybackStarted,r),r._eventBus.subscribe(s.PLAYBACK_STARTED,r._onVideoPlaybackStarted,r),l.tv||(r._eventBus.subscribe(s.AD_PLAYBACK_STARTED,r._onAdPlaybackStarted,r),r._eventBus.subscribe(s.Ad.PLAYING,r._onAdPlaybackStarted,r),r._eventBus.subscribe(s.AD_BREAK_STARTED,r._onAdPlaybackStarted,r),r._eventBus.subscribe(s.AD_BREAK_ENDED,r._onVideoPlaybackStarted,r)),r._eventBus.subscribe(s.PLAYBACK_ENDED,r.disable,r),r._eventBus.subscribe(s.PLAYBACK_PROGRESS,r._onPlaybackProgress,r),r._eventBus.subscribe(s.FULLSCREEN_CHANGE,r._adjustCCSizeToScreen,r),r._eventBus.subscribe(s.API.PLAYER_VIEWPORT_CHANGE,r._adjustCCSizeToScreen,r),r._eventBus.subscribe(s.MEDIA_ITEM_LOADED,r._onMediaItemLoaded,r),r._eventBus.subscribe(s.VTT_SEGMENT_LOADED,r._loadVttSegment,r),r._eventBus.subscribe(s.CC.REQUEST_UI_DATA_FOR_MEDIA_ITEM,r._onMediaItemLoaded,r),r._eventBus.subscribe(s.CC.LANGUAGE_CHANGE,r._onLanguageChange,r),r._eventBus.subscribe(s.CC.UI_TOGGLE,r._toggle,r),r._eventBus.subscribe(s.CC.UPDATE_STYLE,r._updateCCStyle,r),r._eventBus.subscribe(s.CC.POSITION_CHANGE,r._updateCCPosition,r),r._eventBus.subscribe(s.CC.POSITION_FLOAT,r._floatCCPosition,r),r._eventBus.subscribe(s.RECOVERY_START,r._onRecoveryStart,r);var p=r._eventBus.subscribe(s.CC.FETCHED,function(){p()},r);r._eventBus.subscribe(s.CC.USER_STYLE_PREFERENCES_CHANGE,r._syncCCPreferences,r),r._isAvailable=!1,r._currentMediaCCPool=[],r._defaultLang=c,r._ccElement=document.createElement("div"),a.classList(r._ccElement).add("cc-element"),r._CCElementInnerSpan=document.createElement("span"),r._ccElement.appendChild(r._CCElementInnerSpan),r._currentFontSize=r._userPreferences.fontSize,r._updateCCStyle(),r._view.getMainElement()&&r._view.getMainElement().appendChild(r._ccElement),(l.tv||l.safariDesktop&&r._model.isHtmlEnforced())&&o.isFunction(d)&&(r._vttFetcher=new d(r._eventBus,r._model))}var i=e("xhr"),a=e("./util"),o=e("../../lib"),s=(e("../../lib/logger"),e("./event")),l=e("../../lib/user-agent"),d=e("./vtt-fetcher");t.exports=r;var c="en-us",p=".vtt",u=".ttml",_="yvpCC",m={none:"",dropshadow:"2px 1px 1px rgba(0, 0, 0, 1)",raised:"3px 3px 4px rgba(0, 0, 0, 0.75)",depressed:"0px -4px 4px rgba(0, 0, 0, 0.54)",uniform:"-2px -2px 0 #000, -2px 2px 0 #000, -2px 0 0 #000, 2px -2px 0 #000, 2px 2px 0 #000, 2px 0 0 #000, 0 -2px 0 #000, 0 2px 0 #000"},v=Math.floor((Math.pow(2,33)-1)/90);r.prototype._onPlaybackProgress=function(e,t,n){var r=this;r._isLive?r._renderLiveCC(t):r._renderVODCC(t,n)},r.prototype._renderVODCC=function(e,t){var n=this;if(!n._isAvailable||!n._currentCCParsedCaptions||!n._currentCCParsedCaptions.length)return void(n._CCElementInnerSpan.innerHTML="");for(var r=e/t,i=Math.floor(r*n._currentCCParsedCaptions.length);i>0&&i<n._currentCCParsedCaptions.length&&e<n._currentCCParsedCaptions[i].begin;)i--;for(;i<n._currentCCParsedCaptions.length&&e>n._currentCCParsedCaptions[i].end;)i++;var a=i>=0&&i<n._currentCCParsedCaptions.length;if(a=a&&n._currentCCParsedCaptions[i].begin<=e&&e<=n._currentCCParsedCaptions[i].end&&!!n._currentCCParsedCaptions[i].text){n._decorateCCSpan(!0);var o=n._currentCCParsedCaptions[i].text||"";n._CCElementInnerSpan.innerHTML=l.tv?o:n._breakLinesAndPadSides(o)}else n._CCElementInnerSpan.innerHTML="",n._decorateCCSpan()},r.prototype._decorateCCSpan=function(e){var t=this;if(t._CCSpanHasBeenDecorated!==e){var n=null,r=null;e&&(n="1.38em",r="0.104em"),t._CCSpanHasBeenDecorated=e,t._CCElementInnerSpan.style.lineHeight=n,t._CCElementInnerSpan.style.padding=r}},r.prototype._breakLinesAndPadSides=function(e){var t,n=this;if(e){var r=e.split("<br/>");if(r.length>1){for(t=0;t<r.length;t++)r[t].trim()&&(r[t]="&nbsp;"+r[t]+"&nbsp;",t<r.length-1&&(r[t]+="<br/>"));return r.join("")}e=e.trim(),n._CCElementInnerSpan.innerHTML=e;var i,a=Math.floor(n._CCElementInnerSpan.offsetHeight/(n._currentFontSize+2)),o=[],s=0;for(t=0;a>t;t++){if(i=t===a-1)l=e.length;else{var l=Math.floor(e.length/a*(t+1));/\s/.test(e.charAt(l))||(l=e.indexOf(" ",e.lastIndexOf(" ",l)))}l>s&&o.push("&nbsp;"+e.substring(s,l)+"&nbsp;"+(i?"":"<br/>")),s=l+1}return o.join("")}return e},r.prototype._renderLiveCC=function(e){var t=this;if(t._currentCCParsedCaptions&&t._currentCCParsedCaptions.length){for(var n=0;n<t._currentCCParsedCaptions.length&&t._currentCCParsedCaptions[n].end<e;)n++;if(n>0){var r=setTimeout(function(){t._currentCCParsedCaptions.splice(0,n),r=null},100);if(n>=t._currentCCParsedCaptions.length)return}var i=!1;t._currentCCParsedCaptions[n]&&(i=e>=t._currentCCParsedCaptions[n].begin&&e<=t._currentCCParsedCaptions[n].end),i?(t._decorateCCSpan(!0),t._CCElementInnerSpan.innerHTML=t._breakLinesAndPadSides(t._currentCCParsedCaptions[n].text||"")):t._ccLiveClearTO||(t._ccLiveClearTO=setTimeout(function(){t._CCElementInnerSpan.innerHTML="",t._decorateCCSpan(),clearTimeout(t._ccLiveClearTO),t._ccLiveClearTO=null},1e3))}else""!==t._CCElementInnerSpan.innerHTML&&(t._CCElementInnerSpan.innerHTML="",t._decorateCCSpan())},r.prototype._syncCCLocalData=function(e){var t=this;if(e&&e.ccSettings)for(var n in e.ccSettings)if(e.ccSettings.hasOwnProperty(n)&&!o.isNullOrUndefined(e.ccSettings[n])){if("hasChanged"===n)continue;t._userPreferences[n]=e.ccSettings[n]}},r.prototype._syncCCPreferences=function(){var e=this;e._updateCCStyle()},r.prototype._adjustCCSizeToScreen=function(){var e=this,t=e._view.getMainElement()&&e._view.getMainElement().offsetWidth,n=Math.ceil(e._userPreferences.fontSize*(t/640));t>640?n=Math.ceil(.8*n):640>t?10>n&&(n=10):n=e._userPreferences.fontSize,e._currentFontSize=n,e._ccElement.style.fontSize=e._currentFontSize+"px"},r.prototype._onLanguageChange=function(e){var t=this;t._userPreferences.lang=e,t._userPreferences.hasChanged=!0,t.enable(e)},r.prototype._toggle=function(e){var t=this;t._userPreferences.show=e,e?t.enable():t.disable()},r.prototype._onVideoPlaybackStarted=function(){var e=this;e._previouslyPlayingAd&&(e._isAvailable&&(e._userPreferences.show&&e.enable(),e._eventBus.publish(s.CC.SHOW_CONTROLS,!0)),e._previouslyPlayingAd=null)},r.prototype._onAdPlaybackStarted=function(){var e=this;e._previouslyPlayingAd=!0,e._hideAndDisableCC()},r.prototype._hideAndDisableCC=function(e){var t=this;t._eventBus.publish(s.CC.SHOW_CONTROLS,!1),t._currentCC=null,t.disable(),e&&(t._isAvailable=!1,t._currentMediaCCPool=[],t._eventBus.publish(s.CC.REMOVED))},r.prototype._loadVttSegment=function(e,t){var n=this;if(n._isLive){n._isVTTFirstSegment=!1,n._currentCCParsedCaptions&&n._isAvailable||(n._currentCCParsedCaptions=n._currentCCParsedCaptions||[],n._isAvailable=!0,n._eventBus.publish(s.CC.FETCHED,{langList:["en-US"],selectedLang:"en-US"}),n._eventBus.publish(s.CC.SHOW_CONTROLS,!0),n._userPreferences.show&&n.enable(),n._isVTTFirstSegment=!n._currentCCParsedCaptions.length);var r=e.adjustedTime?e.adjustedTime:0;n._currentCCParsedCaptions=n._currentCCParsedCaptions.concat(n._parseVTT(e.data,r,t))}},r.prototype._onRecoveryStart=function(){var e=this;e._currentCCParsedCaptions=[]},r.prototype._onMediaItemLoaded=function(e){var t=this;t._isLive=e.isLive(),e&&e.closedCaptions.length>0?(t._isAvailable=!0,t._currentCC=null,t._eventBus.publish(s.CC.SHOW_CONTROLS,!0),t._processAndPropagateCC(e.closedCaptions)):t._hideAndDisableCC(!0)},r.prototype._processAndPropagateCC=function(e){var t=this,n=function(e){t._currentMediaCCPool=e,t._currentMediaCCPool.length>0?(l.mobile?t._eventBus.publish(s.CC.FETCH_MOBILE,{langList:t._currentMediaCCPool,selectedLang:t._userPreferences.lang}):t._eventBus.publish(s.CC.FETCHED,{langList:t._currentMediaCCPool.map(function(e){return e.lang}),selectedLang:t._userPreferences.lang}),t._userPreferences.show?t.enable(t._userPreferences.lang):t.disable()):t._hideAndDisableCC(!0)};t._getCCByRenderer(n,e,l.desktop||l.tv)},r.prototype._transformTTMLToVTT=function(e,t){var n=this,r=!1,i=[],a=function(n){i.push(n),i.length===t.length&&e(i)};t.forEach(function(t){n._ccUrlToVttBlobUrl(t.url,function(n){n?(t.url=n,a(t)):(!r&&e(i),r=!0)})})},r.prototype._ccUrlToVttBlobUrl=function(e,t){var n=this,r={url:e};l.ie&&l.ie<10&&(r.cors=!0),i(r,function(r,i,a){if(r)return void t(null);try{var o=e.indexOf("ttml")>-1?n._ttmlToVtt(a):a,s=new Uint8Array(n._utf8ToBytes(o)),l=URL.createObjectURL(new Blob([s],{type:"text/vtt"}));t(l)}catch(r){t(null)}})},r.prototype._getCCByRenderer=function(e,t,n){var r,i=this,a=function(e){return-1===e.url.indexOf(r)};if(n)r=p,e(t.filter(a));else{r=u;var o=t.filter(a);0===o.length?i._transformTTMLToVTT(e,t):e(o)}},r.prototype._utf8ToBytes=function(e){for(var t=[],n=0;n<e.length;n++){var r=e.charCodeAt(n);if(127>=r)t.push(r);else{var i=n;r>=55296&&57343>=r&&n++;for(var a=encodeURIComponent(e.slice(i,n+1)).substr(1).split("%"),o=0;o<a.length;o++)t.push(parseInt(a[o],16))}}return t},r.prototype._ttmlToVtt=function(e){var t="WEBVTT\n\n",n=new window.DOMParser,r=n.parseFromString(e,"application/xml"),i=r.documentElement.querySelectorAll("p");return Array.prototype.forEach.call(i,function(e){var n=e.getAttribute("id"),r=e.getAttribute("begin"),i=e.getAttribute("end"),a="";Array.prototype.forEach.call(e.childNodes,function(e){""!==e.textContent&&(a+=e.textContent+" ")}),a=a.replace(/<br.*?\/\>/," "),t+=n+"\n",t+=r+" --> "+i+"\n",t+=a+"\n\n"}),t},r.prototype._grabCCFromTTML=function(e){for(var t=this,n=[],r=new window.DOMParser,i=r.parseFromString(e,"application/xml"),a=i.documentElement.querySelectorAll("p"),o=0;o<a.length;o++){var s={};if(s.begin=t._parseToSeconds(a[o].getAttribute("begin")),s.end=t._parseToSeconds(a[o].getAttribute("end")),!s.end&&(s.end=t._parseToSeconds(a[o].getAttribute("dur"))&&t._parseToSeconds(a[o].getAttribute("begin"))+t._parseToSeconds(a[o].getAttribute("dur")),!s.end)){n=null,t._hideAndDisableCC(!0);break}""!==a[o].textContent&&(s.text=a[o].textContent),n.push(s)}return n},r.prototype._parseVTT=function(e,t,n){for(var r,i=this,a=/\r\n|\r|\n/,o=e.split(a),s=o.length,d=/(\d{2,}:\d{2}:?\d{2}\.?\d{3})\s+.+\s+(\d{2,}:\d{2}:?\d{2}\.?\d{3})/,c=[],p=0,u=0,_=0;s>_;_++)if(d.test(o[_])){if(u>0){for(r=u;_>r;r++)c[p].text+=o[r]+(_>r+2?"<br/>":"");p++}var m=o[_].match(d);!n||i._zeroTimeIndicator||l.tizen||(i._zeroTimeIndicator=1e3*i._parseToSeconds(m[1]));var y=1e3*i._parseToSeconds(m[1]),f=1e3*i._parseToSeconds(m[2]);n&&!l.tizen?(y-=i._zeroTimeIndicator,f-=i._zeroTimeIndicator):(y=y%v+t,f=f%v+t),c[p]={begin:y/1e3,end:f/1e3,text:""},u=_+1}if(u>0&&s>u)for(r=u;s>r;r++)c[p].text+=o[r]+(s>r+2?"<br/>":"");return c},r.prototype._parseToSeconds=function(e){if(e){for(var t=0,n=e.split(":"),r=2;r>=0;r--)t+=n[n.length-1-r]*Math.pow(60,r);return t}},r.prototype._saveAndPropagateData=function(e,t){var n=this;n._userPreferences.lang=t||n._userPreferences.lang,n._userPreferences.hasChanged=!0,n._eventBus.publish(s.CC.TOGGLE,e),n._eventBus.publish(s.CC.SAVE_TO_LOCAL_STORAGE,{ccSettings:n._userPreferences})},r.prototype._prepareCCForRendering=function(e){var t=this,n={url:e.url};l.ie&&l.ie<10&&(n.cors=!0),e.parsedCC||i(n,function(n,r,i){return n?void t._hideAndDisableCC():void(t._currentCCParsedCaptions=e.parsedCC=t._grabCCFromTTML(i))})},r.prototype.enable=function(e){var t=this;return t._isAvailable?t._isLive?(t._ccElement.style.display="block",t._ccElement.style.textAlign="left",t._ccElement.style.width="90%",t._ccElement.style.left="5%",t._saveAndPropagateData(!0,c),!0):(t._currentCC=t._getCCByLanguage(e),t._currentCC||(t._currentCC=t._getCCByLanguage(t._userPreferences.lang)||t._currentMediaCCPool[0]),l.desktop||l.tv?(t._prepareCCForRendering(t._currentCC),t._currentCCParsedCaptions=t._currentCC.parsedCC,t._ccElement.style.display="block",t._saveAndPropagateData(!0,t._currentCC.lang),!0):(!l.desktop&&a.warn("Renderer was unable to enable CC"),!l.desktop)):void t._saveAndPropagateData(!0)},r.prototype.disable=function(){var e=this;return this._saveAndPropagateData(!1),e._isLive||(e._currentCCParsedCaptions=null),e._ccElement.style.display="none",!0},r.prototype._getCCByLanguage=function(e){for(var t,n=this,r=0;r<n._currentMediaCCPool.length;r++){if(e&&n._currentMediaCCPool[r].lang.toLowerCase()===e.toLowerCase().replace("_","-"))return n._currentMediaCCPool[r];n._currentMediaCCPool[r].lang===c&&(t=n._currentMediaCCPool[r])}return t},r.prototype._updateCCStyle=function(){var e=this;if(e._ccElement){var t=a.cssHexToRgb(e._userPreferences.bgColor)||{r:0,g:0,b:0},n=0===e._userPreferences.bgOpacity?"transparent":"rgba("+t.r+","+t.g+","+t.b+","+e._userPreferences.bgOpacity+")",r=m[e._userPreferences.fontEffect];e._ccElement.style.fontFamily=e._userPreferences.fontName,e._adjustCCSizeToScreen(),e._ccElement.style.color=e._userPreferences.fontColor,e._CCElementInnerSpan.style.backgroundColor=n,e._ccElement.style.textShadow=r,l.tv&&(l.samsung&&e._applyExtraCCSettings(),e._ccElement.style.position="absolute",e._ccElement.style.width="100%",e._ccElement.style.textAlign="center",e._ccElement.style.bottom="14%",e._ccElement.style.zIndex="30")}},r.prototype._floatCCPosition=function(e){var t=this,n=t._ccElement;if(t._isAvailable&&"none"!==n.style.display){var r=t._userPreferences.ccPos;"bottom"===r&&(e?(a.classList(n).remove("float"),a.classList(n).add("bottom")):(a.classList(n).add("float"),a.classList(n).remove("bottom")))}},r.prototype._updateCCPosition=function(e){var t=this,n=t._ccElement;e?(a.classList(n).remove("bottom"),a.classList(n).add("top")):(a.classList(n).add("bottom"),a.classList(n).remove("top"))},r.prototype.hasUserPreferencesChanged=function(){var e=this;return e._userPreferences.hasChanged},r.prototype.resetPreferenceChange=function(){var e=this;e._userPreferences.hasChanged=!1},r.prototype.destroy=function(){},r.prototype._applyExtraCCSettings=function(){var e=this,t=m[e._userPreferences.fontEffect],n=a.cssHexToRgb(e._userPreferences.windowBgColor)||{r:0,g:0,b:0},r=0===e._userPreferences.windowBgOpacity?"transparent":"rgba("+n.r+","+n.g+","+n.b+","+e._userPreferences.windowBgOpacity+")";e._ccElement.style.backgroundColor=r;var i=a.cssHexToRgb(e._userPreferences.fontColor)||{r:255,g:255,b:255},o=0===e._userPreferences.fontOpacity?"transparent":"rgba("+i.r+","+i.g+","+i.b+","+e._userPreferences.fontOpacity+")";e._CCElementInnerSpan.style.color=o;var s=a.cssHexToRgb(e._userPreferences.fontEdgeColor);switch(e._userPreferences.fontEffect){case"dropshadow":case"raised":case"depressed":t=t.replace("rgba(0, 0, 0","rgba("+s.r+", "+s.g+", "+s.b);break;case"uniform":t=t.replace(/#000/g,e._userPreferences.fontEdgeColor)}e._ccElement.style["text-shadow"]=t},r.prototype.getLanguageForCode=function(e){e=e.toLowerCase().split("-"),e.length>1&&(e.pop(),e=e.join("-"));var t={id:"Bahasa Indonesia",ms:"Bahasa Melayu",cs:"čeština",da:"dansk",de:"Deutsch",et:"eesti",en:"English",es:"español",fil:"Filipino",fr:"français",hr:"hrvatski",it:"italiano",lv:"latviešu",lt:"lietuvių",hu:"magyar",nl:"Nederlands",nb:"norsk bokmål",pl:"polski",pt:"português",ro:"română",sk:"slovenčina",sl:"slovenščina",fi:"suomi",sv:"svenska",vi:"Tiếng Việt",tr:"Türkçe",el:"Ελληνικά",bg:"български",ru:"русский","sr-cyrl":"Српски",uk:"українська",he:"‎עברית‏‎",ar:"‎العربية‏‎",mr:"मराठी",hi:"हिन्दी",bn:"বাংলা",gu:"ગુજરાતી",ta:"தமிழ்",te:"తెలుగు",kn:"ಕನ್ನಡ",ml:"മലയാളം",th:"ไทย",ur:"اردو زبان",ko:"한국어","zh-hans":"简体中文","zh-hant":"繁體中文",ja:"日本人"};return t[e]}},{"../../lib":"bRhrlU","../../lib/logger":"IS9j5T","../../lib/user-agent":"ty5FFo","./event":"YJm+dH","./util":"jJTEqU","./vtt-fetcher":99,xhr:215}],"./nextgen/src/cc.js":[function(e,t,n){t.exports=e("zKzgQw")},{}],17:[function(e,t,n){"use strict";n.VIDEO_TAG_READY_STATES={HAVE_NOTHING:0,HAVE_METADATA:1,HAVE_CURRENT_DATA:2,HAVE_FUTURE_DATA:3,HAVE_ENOUGH_DATA:4},n.CHROMECAST_RECEIVER_ID="EF65F6AF",n.PLAYLIST_THUMB_DIMENSION="130x72",n.LIVE_STATES_FOR_VOD={SCHEDULED:"scheduled",NO_ARCHIVE:"no-archive",REPLAY:"replay",VOD:"vod"}},{}],18:[function(e,t,n){"use strict";function r(e,t){var n=this;n._profiler=new m(e),n._profiler.add(l.Metrics.INIT_TO_STARTSCREEN),n._profiler.add(l.Metrics.INIT_TO_SAPI),n._profiler.add(l.Metrics.RENDER_TO_SWF),n._profiler.add(l.Metrics.INIT_TO_APPS_INIT),n._profiler.add(l.Metrics.VP_CONSTRUCTOR),n._eventBus=new d("internal"),n._model=new _.Model(e,t),n._restAPI=new E(n._model,n._profiler),n.ifPlaybackProgressCalled=!1,n._firstPlaylistBatchLoaded=!1,window.performance&&window.performance.timing&&window.performance.timing.navigationStart&&(n._model.metrics.pageLatency=(new Date).getTime()-window.performance.timing.navigationStart),y.mobile?n._model.playback.autoplay=!1:n._model.playback.adPlaybackOnly?n._model.playback.autoplay=!0:n._model.playback.autoplay&&f.localStorage.get("yvp-dont-autoplay")&&(n._model.playback.autoplay=!1),f.localStorage.get("yvp-dont-autoplay")&&!n._model.ui.showStartScreen&&(n._model.ui.showStartScreen=!0),n._model.playback.autoplay&&(n._profiler.add(l.Metrics.INIT_TO_START),n._profiler.add(l.Metrics.HLS_FIRST_TS_LOAD_START)),n._model.endScreenToPlaylistEnabled()&&n._migrateEndScreenExprience(),n._metrics=new u.Metrics(n._model,n._eventBus,n._profiler,e.rapidConfig),n._eventBus.subscribe(l.ERROR,n._onError,n),n._eventBus.subscribe(l.INFO,n._onError,n),n._eventBus.subscribe(l.WARNING,n._onWarning,n),n._eventBus.subscribe(l.START_SCREEN_CLICK,n._onStartScreenClick,n),n._eventBus.subscribe(l.END_SCREEN_CLICK,n._onEndScreenClick,n),n._eventBus.subscribe(l.RELATED_ITEM_CLICK,n._onRelatedItemClick,n),n._eventBus.subscribe(l.FETCH_MORE_RELATED_ITEMS,n._onFetchMoreRelatedItems,n),n._eventBus.subscribe(l.MEDIA_ITEM_LOADED,n._onMediaItemLoaded,n),n._eventBus.subscribe(l.TOGGLE_PLAY_PAUSE,n._togglePlayPause,n),n._eventBus.subscribe(l.CONTROLS_SEEK_START,n._onControlsSeekStart,n),n._eventBus.subscribe(l.CONTROLS_SEEK_END,n._onControlsSeekEnd,n),n._eventBus.subscribe(l.CONTROLS_SEEKING,n._onControlsSeeking,n),n._eventBus.subscribe(l.Video.CLICK,n._onVideoClick,n),n._eventBus.subscribe(l.Video.PLAYING,n._onPlaybackPlaying,n),
n._eventBus.subscribe(l.Video.TIMEUPDATE,n._onPlaybackProgress,n),n._eventBus.subscribe(l.Video.PAUSE,n._onPlaybackPaused,n),n._eventBus.subscribe(l.Video.SEEKING,n._onSeeking,n),n._eventBus.subscribe(l.Video.SEEKED,n._onSeeked,n),n._eventBus.subscribe(l.Video.ENDED,n._onPlaybackEnded,n),n._eventBus.subscribe(l.Video.ERROR,n._onPlaybackError,n),n._eventBus.subscribe(l.Video.WAITING,n._onWaiting,n),n._eventBus.subscribe(l.PLAYBACK_REQUEST,n._setPlaybackTimeout,n),n._playbackStartEvenUnsubscriber=n._eventBus.subscribe(l.PLAYBACK_STARTED,function(){n._notifyVideoStarted()}),n._adPlaybackStartEvenUnsubscriber=n._eventBus.subscribe(l.AD_PLAYBACK_STARTED,function(){n._notifyVideoStarted()}),n._eventBus.subscribe(l.SELECTED_STREAM_CHANGE,n._onSelectedStreamChange,n),n._eventBus.subscribe(l.SELECTED_STREAM_URL_CHANGE,n._onSelectedStreamChange,n),n._eventBus.subscribe(l.PLAYER_DIMENSION_CHANGE,n._onDimensionChange,n),n._eventBus.subscribe(l.MEDIA_RELOAD_BEGIN,n._onMediaReloadBegin,n),n._eventBus.subscribe(l.MEDIA_RELOAD_END,n._onMediaReloadEnd,n),n._eventBus.subscribe(l.QUALITY_CHANGE,n._onQualityChange,n),n._eventBus.subscribe(l.METADATA_AVAILABLE,n._onMetadata,n),n._eventBus.subscribe(l.REFRESH_METADATA_AVAILABLE,n._updateYVAPData,n),n._eventBus.subscribe(l.SAPI_REFRESH_REQUEST,n._refreshMetadata,n),n._eventBus.subscribe(l.USER_AUTHENTICATED,n._onUserAuthentication,n),n._eventBus.subscribe(l.CONTROLS_SET_VOLUME,n._onVolumeChange,n),n._eventBus.subscribe(l.CONTROLS_SET_MUTE,n._onMuteChange,n),n._eventBus.subscribe(l.CC.SAVE_TO_LOCAL_STORAGE,n.saveCCSettingsToLocalStorage,n),n._eventBus.subscribe(l.API.BITRATE_CHANGE,n._onBitrateChange,n),n._eventBus.subscribe(l.KEYDOWN,n._onKeyDown,n),n._eventBus.subscribe(l.QUALITY_SELECTED,n._onQualitySelected,n),n._eventBus.subscribe(l.BITRATE_LIST_CHANGED,n._onBitrateListChanged,n),n._eventBus.subscribe(l.PTS_DISCONTINUITY,n._onPTSDiscontinuity,n),n._eventBus.subscribe(l.RELOAD_FRAGMENT,n._onReloadFragment,n),n._eventBus.subscribe(l.RECOVERY_START,n._onRecoveryStart,n),n._eventBus.subscribe(l.RECOVERY_METADATA_READY,n._onRecoveryMetadata,n),n._eventBus.subscribe(l.ER_READY,n._onER,n),n._eventBus.subscribe(l.API.CUEPOINT_STARTED,n._onHLSCueStart,n),n._eventBus.subscribe(l.API.CUEPOINT_STOPPED,n._onHLSCueEnd,n),n._eventBus.subscribe(l.TIMED_METADATA_RECEIVED,n._onTimedMetadata,n),n._eventBus.subscribe(l.RENDERER_SWITCHED,n._onRendererSwitched,n),n._fetcher=new c(n._model,n._eventBus,n._profiler),n._eventBus.publish(l.VIDEO_REQUEST,n._model.playlist.getCurrentItem().isPrefetch),n._playbackStarted={},n._profiler.setEndTime(l.Metrics.VP_CONSTRUCTOR),n._profiler.add(l.Metrics.INIT_RENDER_GAP),y.chrome>=32&&!n._model.disableCasting&&y.desktop&&(n._castController=new a(n._model,n._eventBus),n._eventBus.subscribe(l.CAST.CONNECTION_STATUS_CHANGED,n._onCastConnectionChange,n),n._eventBus.subscribe(l.CAST.PLAYLIST_ENDED,n._onCastPlaylistEnded,n),n._eventBus.subscribe(l.CAST.TOGGLE_PLAYING,function(){n._view.syncViewState()},n),n._eventBus.subscribe(l.CAST.VIDEO_ENDED,function(){n._view.syncViewState()},n))}t.exports=r;var i=e("./ads-controller"),a=e("./cast-controller"),o=e("./age-gate-controller"),s=e("./error"),l=e("./event"),d=e("../../lib/event-bus"),c=e("./metadata-fetcher"),p=e("./media-store"),u=e("./metrics/metrics"),_=e("./model"),m=e("./profiler"),v=e("./states"),y=e("../../lib/user-agent"),f=e("./util"),g=e("../../lib"),b=e("../../lib/logger"),h=e("./view"),E=e("./restapi"),T=e("./cc"),A=e("./metrics/metrics-constants"),S=e("./recoverer"),I=e("./renderers/type"),L="yvpVolume",M="yvpCC",C=1e4,N=1e4,D=30,R="yvpResumeTimeItems";r.prototype._togglePlayPause=function(){var e=this;e._model.castState&&e._model.castState.connected||e._model.playbackState.state===v.VIDEO&&(e._model.playbackState.paused?(e.play(),e._eventBus.publish(l.CTRL_PLAYPAUSE,"play")):(e.pause(),e._eventBus.publish(l.CTRL_PLAYPAUSE,"pause")))},r.prototype.render=function(e){var t=this;t._profiler.setEndTime(l.Metrics.INIT_RENDER_GAP),t._profiler.add(l.Metrics.CREATE_RENDERER);var n;n=g.isString(e)?document.querySelector(e):e._node||e,null===n&&t._eventBus.publish(l.Error,f.createErr("C",t._model.playbackState,s.E_PLAYER,s.PLAYER_CODES.E_INVALID_CONFIGURATION,"Invalid DOM node or CSS selector specified. Cannot render player.")),t._metrics.setRootElem(n),t._view=new h(n,t._model,t._eventBus,t._profiler),t._view.render(t._model),g.isFunction(T)&&(t._ccController=new T(t._eventBus,t._model,t._view));var r={play:function(){t.play()},pause:function(){t.pause()},setOverlayActive:function(e){t._view.setOverlayActive(e)}};if(t._initVolume(),g.isFunction(i)&&(t._adsController=new i(t._eventBus,r,t._model,t._view)),t._playerReadyEventFired=!1,t._enterInitState(),t._model.playback.autoplay)var a={type:A.AUTOPLAY,action:A.AUTOPLAY};return t._model.playlist.id?t._fetcher.fetchPlaylist(function(){t._model.playback.autoplay&&t.play(a)}):t._fetcher.updateMetadata(),t._model.playback.autoplay&&t.play(a),t._eventBus.publish(l.API.PLAYER_RENDERED),t._profiler.setEndTime(l.Metrics.CREATE_RENDERER),t},r.prototype._initVolume=function(){var e=this,t=1,n=!1,r=f.localStorage.get(L);r&&(t=r.volume,n=r.mute),null===e._model.playbackState.volume&&(e._model.playbackState.volume=t),null===e._model.playbackState.mute&&(e._model.playbackState.mute=n)},r.prototype._onVolumeChange=function(e){var t=this,n=t._model.playbackState.volume;t._model.playbackState.volume=e,e>0&&(t._model.playbackState.mute=!1),t._view.setVolume(e),f.localStorage.put(L,{volume:e,mute:t._model.playbackState.mute}),t._eventBus.publish(l.CTRL_VOLUME,n)},r.prototype._onMuteChange=function(e){var t=this;t._model.playbackState.mute=e,t._view.setMute(e),f.localStorage.put(L,{volume:t._model.playbackState.volume,mute:e})},r.prototype._onKeyDown=function(e){var t=this,n=e.keyCode,r="key-"+n;(32===n||38===n||40===n)&&(e.preventDefault(),t._eventBus.publish(l.API.UI_INTERACT,{srcElement:r}))},r.prototype.getCustomControlsNode=function(){var e=this;return e._view.getCustomControlsNode()},r.prototype.getVideoElement=function(){var e=this;return e._view.getVideoElement()},r.prototype.saveCCSettingsToLocalStorage=function(e){var t=f.localStorage.get(M)||{};for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);f.localStorage.put(M,t)},r.prototype.supportSendBeacon=function(){return!(y.ie||y.safari||y.ios)},r.prototype.saveResumeTime=function(e){var t=f.localStorage.get(R)||{};t[e.id]=e.progress,f.localStorage.put(R,t)},r.prototype._onMetadata=function(e){var t=this,n=t._model.playlist.getCurrentItem();t._updateYVAPData(e),n&&-1!==e.indexOf(n.id)&&n.recoveryStatus!==p.ItemRecoveryStatus.RECOVERING&&t._loadMediaItem(n)},r.prototype._updateYVAPData=function(e){var t=this,n=[];t._adsController&&(e.forEach(function(e){var r=t._model.mediaStore.get(e),i="dash"===r.rendererType?"html":r.rendererType,a=r.isLive();n.push({clipId:r.id,clipDuration:r.duration,licenseId:r.license.licenseId,spaceId:r.metrics.pageSpaceId,playlistId:t._model.playlist.id,yvap:r.yvap,isLive:a,hasLiveMidrolls:a&&!!r.liveMidrollsMaxDur,liveMidrollsMaxDur:r.liveMidrollsMaxDur,rendererType:i})}),t._adsController.updateYVAPData(n))},r.prototype._refreshMetadata=function(e){var t=this;t._fetcher.refreshMetadata(e)},r.prototype._loadMediaItem=function(e){var t=this,n=e.status.code,r=e.progress&&e.progress.position||t._model.playback.startTime;if(t._createRecoverer(),e.state===p.ItemState.HAS_DATA)t._model.playbackState.attemptingPlayback()||t._findCriticalError()||t._enterInitState(),t._adsController&&t._adsController.prepare(e),t._view.prepareNextRenderer({rendererType:e.rendererType,mediaItem:e},function(n){return n?void t._clearPlaybackTimeout():(t._notifedVideoStarted=!1,t._view.preloadNextRenderer({mediaItem:e,startTime:r})||t._eventBus.publish(l.ERROR,f.createErr("S",t._model.playbackState,s.E_SAPI_STREAM,s.SAPI_CODES.E_SAPI_NO_PLAYABLE_STREAMS)),t._model.playbackState.loadedItem=e,void t._eventBus.publish(l.MEDIA_ITEM_LOADED,e))});else{if(n&&n.length>0||(n=s.SAPI_CODES.E_SAPI_NOT_FOUND),!t._isSAPIRequestError(n)){var i=s.isInfoCode(n);t._eventBus.publish(i?l.INFO:l.ERROR,f.createErr("S",t._model.playbackState,i?s.E_INFO:s.E_SAPI_STREAM,n))}t._model.playbackState.loadedItem=e,t._eventBus.publish(l.MEDIA_ITEM_LOADED,e)}},r.prototype._isSAPIRequestError=function(e){return e===s.E_PLAYER_CMS_JSONP_REQUEST_FAILURE||e===s.E_PLAYER_CMS_JSONP_REQUEST_FAILURE_SILENT_FAIL||e===s.E_PLAYER_CMS_RESPONSE||e===s.E_PLAYER_CMS_JSONP_REQUEST_TIMEOUT||e===s.E_PLAYER_CMS_JSONP_REQUEST_TIMEOUT_SILENT_FAIL||e===s.E_PLAYER_CMS_XHR_REQUEST_SERVER_CONNECTION_FAILED||e===s.E_PLAYER_CMS_XHR_REQUEST_SERVER_CONNECTION_FAILED_TIMEOUT||e===s.E_PLAYER_CMS_XHR_REQUEST_RESPONSE_NOT_RECEIVED||e===s.E_PLAYER_CMS_XHR_REQUEST_RESPONSE_NOT_RECEIVED_TIMEOUT||e===s.E_PLAYER_CMS_XHR_REQUEST_LOAD_FAILED||e===s.E_PLAYER_CMS_XHR_REQUEST_LOAD_FAILED_TIMEOUT||e===s.E_PLAYER_CMS_XHR_REQUEST_LOAD_FAILED_408||e===s.E_PLAYER_CMS_XHR_REQUEST_NOT_COMPLETE||e===s.E_PLAYER_CMS_XHR_REQUEST_NOT_COMPLETE_TIMEOUT||e===s.E_PLAYER_CMS_XHR_REQUEST_NOT_COMPLETE_408||e===s.E_PLAYER_CMS_XHR_REQUEST_ERROR||e===s.E_PLAYER_CMS_XHR_REQUEST_TIMEOUT},r.prototype._onMediaItemLoaded=function(e){var t=this;t._playerReadyEventFired||(t._playerReadyEventFired=!0,t._eventBus.publish(l.API.PLAYER_READY)),t._attachWatchHistoryHandler(e)},r.prototype._attachWatchHistoryHandler=function(e){var t=this,n=function(){t._watchHistoryHandlerUnsub&&t._watchHistoryHandlerUnsub(),t._watchHistoryHandlerUnsub=null},r=function(){n(),t._model.userPreferences.isAuthenticated&&t._restAPI.saveToWatchHistory(e.id,function(e,t){},t)};n(),e.duration<=D?t._watchHistoryHandlerUnsub=t._eventBus.subscribe(l.PLAYBACK_ENDED,r,t):t._watchHistoryHandlerUnsub=t._eventBus.subscribe(l.PLAYBACK_PROGRESS,function(e,t){t>=D&&r()},t)},r.prototype._onCastConnectionChange=function(e,t){var n=this;if(e)n._model.playbackState.isVideoPlaying()&&n._pausePlayer();else if(t.playlist_pos===n._model.playlist.position){var r=n._model.playlist.getCurrentItem();n._model.playbackState.state!==v.VIDEO||r.isLive()||n.seek(r.progress.position),n.play()}else if(g.isNumber(t.playlist_pos)&&"unknown"!==t.playlist_pos)n.setPlaylistPosition(t.playlist_pos,!0);else if(t.media_uuid){var i=n._model.playlist.items.indexOf(t.media_uuid);n.setPlaylistPosition(i>-1?i:0,!0)}else n.play();n._view.syncViewState()},r.prototype._onCastPlaylistEnded=function(){var e=this;e._model.playlist.position=e._model.playlist.items.length-1,e._onPlaybackEnded()},r.prototype.play=function(e,t){var n=this;if(n._model.castState&&n._model.castState.connected)return void n._castController.play();var r=g.isNullOrUndefined(t)?!0:t;if(n._model.playbackState.paused&&n._model.playbackState.isVpaidAdPlaying())return n._eventBus.publish(l.RESUME_VPAID),void n._onPlaybackResumed();if(!n._model.playbackState.attemptingPlayback()){var i=n._model.playlist.getCurrentItem();if(i){if(n._spinnerMonitorStartTime=null,n._model.playbackState.paused)return void n._view.play();if(e&&(n._model.playback.requestType=e.type,e.action&&(n._model.playback.requestAction=e.action)),i.ageGate&&n._model.ui.showAgeGate)return void n._initiateAgeGate();if(n._model.ui.showAgeGate&&n._view.destroyAgeGateScreen(),n._profiler.add(l.Metrics.PLAYBACK_START),n._resetStateFlags(),i===n._model.playbackState.loadedItem)n._model.playbackState.loading=!0,n.setSelectedStreams(),n._eventBus.publish(l.PLAYBACK_REQUEST,i.id),n._startPlaying(i,r);else if(y.mobile)n._eventBus.publish(l.INFO,f.createErr("C",n._model.playbackState,s.E_WARNING,s.PLAYER_CODES.E_PLAYER_HTML5_PLAYBACK_ERROR_PLAY_INITIATED_BEFORE_METADATA_READY,"Cannot play before metadata is available"));else{n._model.playbackState.state=v.WAITING,n._model.playbackState.loading=!0;var a=n._eventBus.subscribe(l.MEDIA_ITEM_LOADED,function(e){if(e===i){if(a(),n.setSelectedStreams(),i.ageGate&&n._model.ui.showAgeGate)return n._model.playbackState.state=v.INIT,void n._initiateAgeGate();n._eventBus.publish(l.PLAYBACK_REQUEST,i.id),n._startPlaying(i,r)}})}n._view.syncViewState()}}},r.prototype.setSelectedStreams=function(){var e=this,t=e._model.playlist.getCurrentItem();t&&t.selectedStreams&&0===t.selectedStreams.length&&t.streams.length&&e._view.setSelectedStreams(t.streams)},r.prototype._startPlaying=function(e,t){var n=this,r="start";if(e===n._model.playlist.getCurrentItem()&&!n._findCriticalError()){e.restartIfNeeded();var i=function(){var t=e.progress.position;n.getAutoplay()||n._firstPlayCalled||(n._firstPlayCalled=!0,n._profiler.add(l.Metrics.CLICK_TO_START)),e.isLongForm()&&t>0?(n._model.playback.isResume=!0,n._view.switchAndPlayNextRenderer(t),n._eventBus.publish(l.PLAYBACK_STARTED,e.id,e.progress.position)):(n._view.switchAndPlayNextRenderer(n._model.playback.startTime),n._model.playback.startTime=NaN),n._model.playback.fullscreen&&n._view.setFullscreen(!0)},a=function(){n._model.playbackState.state=v.VIDEO,n._resetStateFlags(),n._model.playbackState.loading=!0,n._view.syncViewState()};n._adsController&&t?n._adsController.maybePlay(r,function(t){a(),t?(n._profiler.add(l.Metrics.PLAYBACK_START),n._view.prepareNextRenderer({rendererType:e.rendererType,mediaItem:e},function(){n._view.preloadNextRenderer({mediaItem:e}),i()})):i()}):(a(),i())}},r.prototype._setPlaybackTimeout=function(){var e=this,t=e._model.playlist.getCurrentItem();e._view.didRendererTimeOut()||e._playbackTimeout||"error"===t.state||(e._playbackTimeout=setTimeout(function(){e._eventBus.publish(l.API.PLAYBACK_TIMEOUT,f.createErr("P",e._model.playbackState,s.E_WARNING,s.WARNING_CODES.E_PLAYBACK_TIMEOUT,"No playback after 10 seconds of requesting to play on player"))},C))},r.prototype._clearPlaybackTimeout=function(){var e=this;e._playbackTimeout&&clearTimeout(e._playbackTimeout)},r.prototype._notifyVideoStarted=function(){var e=this;e._notifedVideoStarted||(e._eventBus.publish(l.API.VIDEO_STARTED),e._notifedVideoStarted=!0),e._clearPlaybackTimeout()},r.prototype.pause=function(){var e=this,t=e._model.castState;t&&t.connected?!t.paused&&e._castController.pause():e._pausePlayer()},r.prototype._pausePlayer=function(){var e=this;e._model.playbackState.isVpaidAdPlaying()?(e._eventBus.publish(l.PAUSE_VPAID),e._onPlaybackPaused()):e._model.playbackState.attemptingPlayback()&&(e._view.pause(),e._clearPlaybackTimeout())},r.prototype.seek=function(e){var t=this;t._model.castState&&t._model.castState.connected?t._castController.seek(e):t._model.playbackState.state===v.VIDEO&&t._view.seek(e)},r.prototype.recover=function(){var e=this;e._recoverer.recover()},r.prototype.disableControls=function(){var e=this;e._view.disableControls()},r.prototype.enableControls=function(){var e=this;e._view.enableControls()},r.prototype.setCC=function(e,t){var n=this;n._ccController&&(e?n._ccController.enable(t):n._ccController.disable())},r.prototype.isPlaying=function(){var e=this;return"video"===e._model.playbackState.state&&!e._model.playbackState.paused},r.prototype.isLoading=function(){var e=this;return e._model.playbackState.videoLoading()},r.prototype.endVideo=function(){var e=this;e._view.endVideo()},r.prototype.getOpenSimSim=function(){var e=this;return e._view.getOpenSimSim()},r.prototype.setFullscreen=function(e){var t=this;t._view.setFullscreen(e)},r.prototype.getFullscreen=function(){var e=this;return e._view.getFullscreen()},r.prototype.setVolume=function(e){var t=this;t._eventBus.publish(l.CONTROLS_SET_VOLUME,e)},r.prototype.getVolume=function(){var e=this;return e._model.playbackState.volume},r.prototype.setMute=function(e){var t=this;t._eventBus.publish(l.CONTROLS_SET_MUTE,e)},r.prototype.getMute=function(){var e=this;return e._model.playbackState.mute},r.prototype.setLoop=function(e){var t=this;t._model.playback.loop=e},r.prototype.getLoop=function(){var e=this;return e._model.playback.loop},r.prototype.setContinuousPlay=function(e){var t=this;t._model.playback.continuousPlay=e},r.prototype.getContinuousPlay=function(){var e=this;return e._model.playback.continuousPlay},r.prototype.resumeContinuousPlay=function(e){var t=this;if(t.setContinuousPlay(!0),t._model.playbackState.state===v.END){var n=t._model.playlist.getNextPosition(t._model.playback.continuousPlay,t._model.playback.loop);-1!==n&&t.setPlaylistPosition(n,!0,e)}},r.prototype.getAutoplay=function(){var e=this;return e._model.playback.autoplay},r.prototype.getMediaStore=function(){var e=this;return e._model.mediaStore},r.prototype.getPlaybackState=function(){var e=this;return e._model.playbackState.state},r.prototype.getCurrentMediaItem=function(){var e=this;return e._model.playlist.getCurrentItem()},r.prototype.getPlaylistItems=function(){var e=this;return e._model.playlist.items},r.prototype.getPlaylist=function(){var e=this;return e._model.playlist},r.prototype._onDimensionChange=function(e){var t=this;t._model.uiState.width=e.width,t._model.uiState.height=e.height},r.prototype._onRendererSwitched=function(e){var t=this,n=e.active;t._metrics.setActiveRenderer(n)},r.prototype._onSelectedStreamChange=function(e,t){var n,r=this,i=r._model.playlist.getCurrentItem();if(t){t.cdn=f.getMediaCDNName(i,e,t.selectedStreamUrl),t.url=t.selectedStreamUrl;var a=[t];n=a}else{for(var o=e.length,s=0;o>s;s++)e[s].cdn=f.getMediaCDNName(i,e,null);n=e}i.fillSelectedStreams(n,null)},r.prototype._findCriticalError=function(){for(var e=this,t=e._model.errors,n=0;n<t.length;n++)if(t[n].category||t[n].subcategory)return t[n];return null},r.prototype._onStartScreenClick=function(){var e=this;e._eventBus.publish(l.CTRL_PLAYREQUEST,"ctp"),e._profiler.add(l.Metrics.HLS_FIRST_TS_LOAD_START);var t={type:A.CLICK,action:A.CLICK};e.play(t)},r.prototype._onVideoClick=function(){var e=this;if(e._eventBus.publish(l.API.UI_INTERACT,{srcElement:"video-click"}),e._view.controls)if(e._model.playbackState.rendererType===I.FLASH){var t=e._model.playbackState.paused?"play":"pause";e._eventBus.publish(l.CTRL_PLAYPAUSE,t),e._view.setKeyboardFocus()}else e._togglePlayPause()},r.prototype._onEndScreenClick=function(e,t){var n=this,r=n._model.playlist;0===t?(n._eventBus.publish(l.API.UI_INTERACT,{srcElement:"es-rpl"}),n._eventBus.publish(l.CTRL_REPLAY)):(n._eventBus.publish(l.API.UI_INTERACT,{srcElement:"es-vid-"+t}),n._eventBus.publish(l.CTRL_ENDSCREEN_VID,{vid:e,vindex:t}));var i={type:A.CONTINUOUS,action:A.CLICK};n.setPlaylistPosition(r.appendItem(e),!0,i)},r.prototype._onRelatedItemClick=function(e,t,n,r){var i,a=this,o=a._model.playlist,s=n?"next-vid-":"es-vid-",d={srcElement:s+t},c=-1===t?l.CTRL_REPLAY:l.CTRL_ENDSCREEN_VID;-1===t&&(d.srcElement="es-rpl"),t>-2&&a._eventBus.publish(l.API.UI_INTERACT,d),a._eventBus.publish(c,{vid:e,vindex:t});var p={type:A.CONTINUOUS,action:r?A.AUTOPLAY:A.CLICK};i=a._view.showPlaylist()?o.getItemPosition(e):o.appendItem(e),a.setPlaylistPosition(i,!0,p)},r.prototype._onFetchMoreRelatedItems=function(e,t,n){var r=this,i=function(e,t){var i=[];t||(t=[]),t&&t.length>0&&(i=t.map(function(e){return r._view.showPlaylist()&&r.getPlaylistItems().indexOf(e)<0&&r._model.playlist.appendItem(e),r._model.mediaStore.get(e)})),n?n(e,i):r._eventBus.publish(l.RELATED_ITEMS_LOADED,e,i)};r._fetcher.getRelatedVideosChannel(e,t,i)},r.prototype.setPlaylistPosition=function(e,t,n){var r=this;r._resetPlaybackStarted(),r._model.errors=[],r._model.playbackState.criticalError=null,r._destroyRecoverer(),r._model.playbackState.isAdPlaying()&&r._adsController.cancelAd();var i=r._model.playlist,a=i.getCurrentItem();r.endVideo(),i.position=e;var o=i.getCurrentItem();if(r._model.playbackState.looped=!1,o){var s=o.streams.length>0&&o.streams[0].path?p.getSapiVsId(o.streams[0].path):"";o.videoSession=s+"_"+o.generateVSid(),o.samplingId=o.generateSamplingId(),p.updateVsInStreams(o.streams,o.videoSession),r._view.resetState(),r._eventBus.publish(l.API.PLAYLIST_POSITION_CHANGE,i.position),r._enterInitState(),r._eventBus.publish(l.VIDEO_REQUEST,o.isPrefetch),o.fetchFinished()&&r._loadMediaItem(o)}else t=!1;o&&"error"!==o.state?t&&r.play(n):null!==a&&r._endPlayback(a)},r.prototype.setContentHeightForNFL=function(){var e=this,t=e._model.playlist.getCurrentItem(),n=t?t.provider:null;n&&"video.nflhighlights.com"===n.providerId&&e._view._setContentHeightForNFL()},r.prototype.sendPrefetchInfo=function(e){var t=this,n={url:e.url,source:e.source,latency:e.latency||"na",http_code:e.http_code||"na",resp_len:e.resp_len||"na",instrument:e.instrument||"na",perfInfo:e.perfInfo||"na",perfStack:e.perfStack||"na"};return n.source&&n.url?(t._eventBus.publish(l.API_CALLED,n),!0):!1},r.prototype._endPlayback=function(e){var t=this;t._view.setFullscreen(!1),t._model.playbackState.previousItem=e,t._model.playbackState.state=v.END,t._resetStateFlags(),t._view.syncViewState()},r.prototype._enterInitState=function(){var e=this;e._model.playbackState.state=v.INIT,e._resetStateFlags(),e._view.syncViewState()},r.prototype._resetStateFlags=function(){var e=this,t=e._model.playbackState;t.paused=!1,t.seeking=!1,t.loading=!1},r.prototype.removePlaylistItems=function(e,t){var n=this,r=n._model.playlist;r.items.splice(e,t),r.position>=e+t?r.position-=t:e<=r.position&&r.position<e+t&&n.setPlaylistPosition(-1)},r.prototype.prefetch=function(e){var t=this,n=!(t._model.playlist.getCurrentItem().id in e);t._fetcher.prefetch(e,n)},r.prototype._onPlaybackError=function(e){var t=this;t._eventBus.publish(l.PLAYBACK_ERROR,e)},r.prototype._onError=function(e){var t=this;if(!t._recoverer||t._recoverer.shouldRenderErrorScreen(e)){try{throw new Error("Stack Trace")}catch(n){b.error(n.stack)}t._model.errors.push(e),t._maybeSkip(function(){var e=t._findCriticalError();e&&(t._clearPlaybackTimeout(),t._applyErrorFilters(e),t._model.playbackState.criticalError=e,t._model.playbackState.state=v.END,t._resetStateFlags(),t._view.syncViewState())})}},r.prototype._onWarning=function(e,t){var n=this;t&&n._onError(e)},r.prototype._onPTSDiscontinuity=function(e){var t=this;t._eventBus.publish(l.WARNING,f.createErr("P",t._model.playbackState,s.E_WARNING,s.PLAYER_CODES.E_PLAYER_PTS_DISCONTINUITY,null,"consecutive frame time diference is "+e))},r.prototype._onReloadFragment=function(e){var t=this;t._eventBus.publish(l.WARNING,f.createErr("P",t._model.playbackState,s.E_WARNING,s.PLAYER_CODES.E_PLAYER_RELOAD_FRAGMENT,null,e))},r.prototype._applyErrorFilters=function(e){var t=this,n=function(){!f.isFlashInstalled()&&y.desktop&&(e.category=s.E_PLAYER,e.subcategory=s.PLAYER_CODES.E_PLAYER_NOT_ENABLED)};switch(e.category){case s.E_SAPI_ABSTRACT:case s.E_SAPI_STREAM:case s.E_SAPI_PLAYLIST:case s.E_SAPI_RELATED:case s.E_SAPI_POPULAR:switch(e.subcategory){case s.SAPI_CODES.E_SAPI_EXTERNAL_NO_STREAMS:var r=t._model.playlist.getCurrentItem();r&&r.shareUrl&&f.redirect(r.shareUrl,!0);break;case s.SAPI_CODES.E_SAPI_UNSUPPORTED_FORMAT:n();break;case s.INFO_CODES.E_SAPI_UNSUPPORTED_LIVE_ON_HTML:y.android?(e.category=s.E_INFO,e.subcategory=s.INFO_CODES.E_PLAYER_ANDROID_CHROME_REQUIRED):n();break;case s.SAPI_CODES.E_SAPI_DRM_RESTRICTED:y.desktop&&n()}break;case s.E_PLAYER:switch(e.subcategory){case s.PLAYER_CODES.E_PLAYER_HTML5_PLAYBACK_ERROR_ENCRYPTED:n()}}},r.prototype._initiateAgeGate=function(){var e=this;e._ageGateController||(e._ageGateController=new o(e._eventBus,e._model,e._view,e,e._fetcher)),e._ageGateController.run()},r.prototype._onUserAuthentication=function(){var e=this;e._ageGateController&&e._ageGateController.isWaitingAuthentication()&&e._initiateAgeGate()},r.prototype._onPlaybackStarted=function(e){var t=this;t.ifPlaybackProgressCalled=!1,t._eventBus.publish(l.PLAYBACK_STARTED,e.id),t._playbackStarted[e.id]=!0},r.prototype._onPlaybackPlaying=function(){var e=this,t=e._model.playlist.getCurrentItem();e._model.playbackState.videoLoading()&&(y.android||e._toggleSpinner(!1)),e._model.playbackState.paused&&(e._eventBus.publish(l.PLAYBACK_RESUMED,t.id),e._onPlaybackResumed()),e._playbackStarted[t.id]||e._onPlaybackStarted(t)},r.prototype._resetPlaybackStarted=function(){var e=this;e._playbackStarted={}},r.prototype._onPlaybackProgress=function(e,t,n){var r=this;y.android&&!r.ifPlaybackProgressCalled&&(r._toggleSpinner(!1),r.ifPlaybackProgressCalled=!0);var i=r._model.playlist.getCurrentItem();if(i){i.progress.position=Math.floor(e);var a=1.5,o=r._view.getClientVideoDimension();r._model.playerDimension.width!==o.width&&r._model.playerDimension.height!==o.height&&(r._model.playerDimension.width=o.width,r._model.playerDimension.height=o.height,r._eventBus.publish(l.PLAYER_DIMENSION_CHANGE,{width:r._model.playerDimension.width,height:r._model.playerDimension.height})),r._eventBus.publish(l.PLAYBACK_PROGRESS,i.id,e,t,n),!g.isNumber(e)||!g.isNumber(t)||e>t+1||(i.isCCM||null!==i.duration||i.isLive()||(i.duration=t),r._model.playbackState.loading&&(!y.safari||y.safari<6)?r._spinnerMonitorStartTime?e-r._spinnerMonitorStartTime>=a&&(r._spinnerMonitorStartTime=null,r._toggleSpinner(!1)):r._spinnerMonitorStartTime=e:r._spinnerMonitorStartTime=null,i.isLive()||(r._model.castState&&r._model.castState.connected||r._tryPlayAdBreak(i),!i.isLongForm()||i.progress.position%10!==0||r._model.playbackState.seeking||r._model.playbackState.ad||r.saveResumeTime(i)))}},r.prototype._onTimedMetadata=function(e){var t=this;e&&"cue_out"===e.type&&void 0!==e.duration&&t._onHLSCueStart(1e3*e.duration)},r.prototype._onHLSCueStart=function(e){var t=this;e=parseInt(e,10);var n=t._model.playlist.getCurrentItem(),r=isNaN(e)?null:e/1e3;t._tryPlayAdBreak(n,r)},r.prototype._tryPlayAdBreak=function(e,t){var n=this,r=e.progress.position,i={currentTime:r,isLive:e.isLive(),adDuration:t};n._adsController&&n._adsController.maybeAdBreak(i,function(t,i){t&&(n._model.playbackState.state=v.VIDEO,n._resetStateFlags(),n._model.playbackState.loading=!0,n._view.prepareNextRenderer({rendererType:e.rendererType,mediaItem:e},function(){n._view.preloadNextRenderer({mediaItem:e}),n._view.switchAndPlayNextRenderer(r),e.progress.adbreaks[i]=(new Date).getTime()}))})},r.prototype._onHLSCueEnd=function(e){var t=this;t._model.playbackState.isAdPlaying()&&t._adsController&&t._adsController.maybeEndAdBreak("cuein",e)},r.prototype._onControlsSeekStart=function(){var e=this;e._model.castState&&e._model.castState.connected||e._model.playbackState.seeking||(e._model.playbackState.seeking=!0,e._view.syncViewState())},r.prototype._onControlsSeekEnd=function(){var e=this;e._model.castState&&e._model.castState.connected||e._model.playbackState.seeking&&(e._model.playbackState.paused||e._view.play(),e._model.playbackState.seeking=!1,e._view.syncViewState())},r.prototype._onControlsSeeking=function(e){var t=this;t._model.castState&&t._model.castState.connected||t._view.seek(e)},r.prototype._onPlaybackPaused=function(){var e=this;e._model.playbackState.state!==v.INIT&&e._model.playbackState.state!==v.END&&(e._model.playbackState.paused=!0,e._view.syncViewState())},r.prototype._onPlaybackResumed=function(){var e=this;e._model.playbackState.paused=!1,e._view.syncViewState()},r.prototype._onPlaybackEnded=function(){var e=this;e._resetPlaybackStarted();var t=e._model.playlist,n=t.getCurrentItem();if(n){var r=e._model.playback.continuousPlay,i=e._model.playback.loop,a={},o=t.getNextPosition(r,i,a);e._eventBus.publish(l.PLAYBACK_ENDED,n.id,a.ended);var s=function(){if(n.progress.position=0,!n.isLongForm()||e._model.playbackState.seeking||e._model.playbackState.ad||e.saveResumeTime(n),-1!==o){if(r||i)var t={type:A.CONTINUOUS,action:A.AUTOPLAY};e.setPlaylistPosition(o,r||i,t),e._model.playbackState.looped=a.looped}else e._endPlayback(n),e._eventBus.publish(l.API.PLAYLIST_COMPLETE)};e._adsController?e._adsController.maybePlay("end",s):s()}},r.prototype._onSeeking=function(){var e=this;e._toggleSpinner(!0)},r.prototype._onSeeked=function(){var e=this;e._toggleSpinner(!1),e._eventBus.publish(l.API.PLAYBACK_SEEK_COMPLETE),e._spinnerMonitorStartTime=null},r.prototype._onBitrateChange=function(e){var t=this;t._model.playback.bitrate=e},r.prototype.error=function(e){var t=this;e&&t._eventBus.publish(l.ERROR,f.createErr("C",t._model.playbackState,e.type,e.code,e.msg))},r.prototype._onMediaReloadBegin=function(){var e=this;e._toggleSpinner(!0)},r.prototype._onMediaReloadEnd=function(){var e=this;e._toggleSpinner(!1)},r.prototype._onQualityChange=function(){return!1},r.prototype._toggleSpinner=function(e){var t=this;t._model.playbackState.loading=e,t._view.syncViewState()},r.prototype._onQualitySelected=function(e){var t=this;t._view.setQuality(e)},r.prototype._onBitrateListChanged=function(e,t){var n=this;n._model.playback.bitrates=e,n._model.playback.heights=t},r.prototype._onRecoveryStart=function(e){var t=this;t._model.playbackState.loading||(t._model.playbackState.loading=!0,t._view.syncViewState()),t._model.playlist.id?t._fetcher.fetchPlaylist(e):t._fetcher.updateMetadata(e)},r.prototype._onRecoveryMetadata=function(){var e=this,t=e._model.playbackState.state;e.pause(),e._view.stopMedia(),e._loadMediaItem(e._model.playlist.getCurrentItem()),e._model.playbackState.loading=!1,e._view.syncViewState(),e._model.playbackState.state=v.INIT,e._model.playlist.getCurrentItem().recoveryStatus=p.ItemRecoveryStatus.RECOVERED,t===v.VIDEO&&e.play(null,!1)},r.prototype._onER=function(e){var t=this;t._fetcher.fillFromER(e),t._onRecoveryMetadata()},r.prototype._onWaiting=function(e){var t=this;if(!y.tv){var n=e&&e.value;if(t._toggleSpinner(n),n&&!e.ignoreBuffering)t._profiler.add(l.Metrics.PLAYBACK_STALLED);else if(!e.ignoreBuffering){t._profiler.setEndTime(l.Metrics.PLAYBACK_STALLED);var r=t._profiler.getItem(l.Metrics.PLAYBACK_STALLED);r&&t._eventBus.publish(l.PLAYBACK_STALLED,r.timeDiff?r.timeDiff/1e3:"")}}},r.prototype._migrateEndScreenExprience=function(){var e=this,t=e._model.ui.showEndScreen,n=e._model.ui.showReplayOnlyEndScreen,r=e._model.ui.playlistUI&&e._model.ui.playlistUI.show;t===!0&&n===!1&&r===!1&&(e._model.ui.playlistUI.show=!0,e._model.ui.playlistUI.position="hidden",e._model.ui.playlistUI.theme="light")},r.prototype.isDocked=function(){var e=this;return e._view.isDocked()},r.prototype.updateDockingConfig=function(e,t,n,r,i,a){var o=this;o._view.updateDockingConfig(e,t,n,r,i,a)},r.prototype.dockVideoPlayer=function(){var e=this;e._view.dockVideoPlayer()},r.prototype.undockVideoPlayer=function(e){var t=this;t._view.undockVideoPlayer(e)},r.prototype.destroy=function(){var e=this;e._model&&e._model.destroy(),e._view&&e._view.destroy(),e._destroyRecoverer(),e._fetcher&&e._fetcher.destroy(),e._eventBus&&e._eventBus.destroy(),e._ccController&&e._ccController.destroy(),e._adsController&&e._adsController.destroy(),e._metrics&&e._metrics.destroy()},r.prototype._destroyRecoverer=function(){var e=this;e._recoverer&&(e._recoverer.destroy(),e._recoverer=null)},r.prototype._createRecoverer=function(){var e=this;e._recoverer||y.mobile||!e._model.playlist.getCurrentItem().isLive()&&!e._profiler._config.enableRecoverer||(e._recoverer=new S(e._eventBus,e._model))},r.prototype._maybeSkip=function(e){var t=this,n=t._model.skipOnError;switch(n){case"always":t._maybeSkipImpl(e);break;case"timebased":e(),setTimeout(function(){t._maybeSkipImpl()},N);break;case"never":e();break;default:e()}},r.prototype._maybeSkipImpl=function(e){var t=this,n=t._model.playlist.getNextPosition(t._model.playback.continuousPlay,t._model.playback.loop);-1===n?e&&e():(t.setPlaylistPosition(n,t._model.playback.autoplay),t._view.syncViewState())}},{"../../lib":"bRhrlU","../../lib/event-bus":"3ECu9u","../../lib/logger":"IS9j5T","../../lib/user-agent":"ty5FFo","./ads-controller":11,"./age-gate-controller":12,"./cast-controller":14,"./cc":"zKzgQw","./error":20,"./event":"YJm+dH","./media-store":26,"./metadata-fetcher":"QCpdmG","./metrics/metrics":34,"./metrics/metrics-constants":33,"./model":38,"./profiler":39,"./recoverer":40,"./renderers/type":47,"./restapi":48,"./states":50,"./util":"jJTEqU","./view":60}],19:[function(e,t,n){"use strict";function r(e,t){var n=this;n._cb=t,n._touches=[],n._type=e,n._bindTouchEvents(),n._bindKeys()}t.exports=r;var i={UP:"up",DOWN:"down",LEFT:"left",RIGHT:"right",TAP:"tap"},a={AD:[{combination:[38,38,40,40,191],alt:!0}],NORMAL:[{combination:[79,80,69,78,83,73,77,83,73,77]
},{combination:[79,80,83,83]},{combination:[37,37,39,39,13],alt:!0}]},o={AD:[i.LEFT,i.RIGHT,i.UP,i.DOWN,i.TAP,i.TAP,i.TAP],NORMAL:[i.UP,i.DOWN,i.LEFT,i.RIGHT,i.TAP,i.TAP]};r.prototype._bindKeys=function(){var e=this,t=[],n=0,r=0,i=a[e._type];i.forEach(function(e){e.length=e.combination.length,e.value=e.length?e.combination.toString():null,e.length>n&&(n=e.length)}),e._onKeyDown=function(a){r=a.altDown||a.altKey?r+1:0,t.push(a.keyCode),t.length>n&&t.shift();var o=i.some(function(e){var n=t.slice(Math.max(t.length-e.length,0)).toString(),i=n===e.value;return e.alt?i&&r>e.length:i});o&&e._cb(),"AD"===e._type},document.addEventListener("keydown",e._onKeyDown,!1)},r.prototype._bindTouchEvents=function(){var e=this,t=o[e._type];e._touchstart=function(t){e._startX=t.changedTouches[0].pageX,e._startY=t.changedTouches[0].pageY,e._stopX=0,e._stopY=0},document.addEventListener("touchstart",e._touchstart,!1),e._touchmove=function(t){if(1===t.touches.length){var n=t.touches[0];e._stopX=n.pageX,e._stopY=n.pageY}},document.addEventListener("touchmove",e._touchmove,!1),e._touchend=function(){var n;if(e._stopX||e._stopY){var r=Math.abs(e._startX-e._stopX),a=Math.abs(e._startY-e._stopY);n=r>a?e._startX-e._stopX<0?i.RIGHT:i.LEFT:e._startY-e._stopY<0?i.DOWN:i.UP}else n=i.TAP;e._touches.push(n),e._touches.length>t.length&&e._touches.shift(),e._touches.length===t.length&&e._touches.every(function(e,n){return e===t[n]})&&e._cb()},document.addEventListener("touchend",e._touchend,!1)},r.prototype.destroy=function(){var e=this;document.removeEventListener("keydown",e._onKeyDown,!1),document.removeEventListener("touchstart",e._touchstart,!1),document.removeEventListener("touchmove",e._touchmove,!1),document.removeEventListener("touchend",e._touchend,!1)}},{}],20:[function(e,t,n){"use strict";function r(e){return e.group+e.phase+"-"+e.category+"-"+e.subcategory}function i(e,t,n,r,i){var a=this;if(!e||!t||!n)throw"Error must be created with a group, category, and subcategory!";a.errorInfo=r,a.userAgent=i,a.group=e,a.phase=a._getPhaseFromState(r),a.category=t,a.subcategory=n,a._msg=r?r.msg:null,a.debugMessage=r?r.debugMsg:null,a.prefetch=r&&void 0!==r.prefetch?r.prefetch:!1}var a=e("./strings"),o=e("./states"),s=["305","306","307"];n.E_INFO="100",n.E_WARNING="200",n.E_YVAP="300";var l=n.E_PLAYER="400",d=n.E_PLAYER_FAILOVER="407",c=n.E_PLAYER_DRM="410",p=n.E_PLAYER_DASH="420",u=n.E_PLAYER_JS_HLS="430",_=n.E_SAPI_ABSTRACT="500";n.E_SAPI_STREAM="501",n.E_SAPI_PLAYLIST="502",n.E_SAPI_RELATED="503",n.E_SAPI_POPULAR="504";var m=n.E_SAPI_CLOSEDCAPTION="505";n.E_CAST="800";var v=n.INFO_CODES={E_SAPI_LICENSE_ERROR:"200",E_SAPI_UNAVAILABLE_TEMP:"201",E_SAPI_GEO:"202",E_SAPI_DEVICE:"203",E_SAPI_EMBED:"204",E_SAPI_BLACKOUT:"208",E_SAPI_UNSUPPORTED_LIVE_ON_HTML:"305",E_PLAYER_ANDROID_CHROME_REQUIRED:"500",E_PLAYER_FLASH_IS_BLOCKED_SAFARI_STYLE_NONE:"610",E_PLAYER_FLASH_IS_BLOCKED_GENERAL_STYLE_NONE:"611",E_PLAYER_FLASH_IS_BLOCKED_REPLACED_BY_BGINACTIVE:"612",E_PLAYER_FLASH_IS_BLOCKED_POWER_SAVING:"613",E_PLAYER_FLASH_IS_BLOCKED_BLOCKERS_SCREEN:"614",E_PLAYER_NO_COMPATIBLE_FORMAT:"700"},y=n.WARNING_CODES={E_PLAYBACK_TIMEOUT:"1",E_LIVE_PLAYBACK_COMPLETE:"800",E_FLASH_CRASHED:"801",E_PLAYBACK_FROZEN_DETECTED:"900",E_ER_TRY:"901"},f=n.PLAYER_CODES={E_PLAYER_PLAYBACK_ERROR:"100",E_PLAYER_NOT_ENABLED:"200",E_PLAYER_NOT_UPTO_DATE:"201",E_PLAYER_PTS_DISCONTINUITY:"250",E_PLAYER_RELOAD_FRAGMENT:"251",E_PLAYER_HTML5_PLAYBACK_ERROR:"303",E_PLAYER_HTML5_PLAYBACK_ERROR_ABORTED:"304",E_PLAYER_HTML5_PLAYBACK_ERROR_NETWORK:"305",E_PLAYER_HTML5_PLAYBACK_ERROR_DECODE:"306",E_PLAYER_HTML5_PLAYBACK_ERROR_SRC_NOT_SUPPORTED:"307",E_PLAYER_HTML5_PLAYBACK_ERROR_ENCRYPTED:"308",E_PLAYER_HTML5_PLAYBACK_ERROR_PLAY_INITIATED_BEFORE_METADATA_READY:"309",E_PLAYER_HTML5_PLAYBACK_ERROR_URL_NOT_AUTHORIZED:"310",E_PLAYER_HTML5_PLAYBACK_ERROR_URL_NOT_FOUND:"311",E_PLAYER_CMS_JSONP_REQUEST_FAILURE:"101",E_PLAYER_CMS_JSONP_REQUEST_FAILURE_SILENT_FAIL:"102",E_PLAYER_CMS_RESPONSE:"405",E_PLAYER_CMS_JSONP_REQUEST_TIMEOUT:"408",E_PLAYER_CMS_JSONP_REQUEST_TIMEOUT_SILENT_FAIL:"409",E_PLAYER_CMS_XHR_REQUEST_SERVER_CONNECTION_FAILED:"700",E_PLAYER_CMS_XHR_REQUEST_SERVER_CONNECTION_FAILED_TIMEOUT:"701",E_PLAYER_CMS_XHR_REQUEST_RESPONSE_NOT_RECEIVED:"710",E_PLAYER_CMS_XHR_REQUEST_RESPONSE_NOT_RECEIVED_TIMEOUT:"711",E_PLAYER_CMS_XHR_REQUEST_LOAD_FAILED:"720",E_PLAYER_CMS_XHR_REQUEST_LOAD_FAILED_TIMEOUT:"721",E_PLAYER_CMS_XHR_REQUEST_LOAD_FAILED_408:"722",E_PLAYER_CMS_XHR_REQUEST_NOT_COMPLETE:"730",E_PLAYER_CMS_XHR_REQUEST_NOT_COMPLETE_TIMEOUT:"731",E_PLAYER_CMS_XHR_REQUEST_NOT_COMPLETE_408:"732",E_PLAYER_CMS_XHR_REQUEST_ERROR:"740",E_PLAYER_CMS_XHR_REQUEST_TIMEOUT:"750",E_PLAYER_CMS_XHR_REQUEST_CORS_ERROR:"760",E_INTERNAL_VIOLATION:"600",E_INVALID_CONFIGURATION:"601"},g=n.FLASH_CODES={E_PLAYER_SECURITY_CROSS_DOMAIN_XML_ERROR:2,E_PLAYER_MEDIA_LOAD_FAILURE:7,E_PLAYER_INVALID_F4M:23,E_PLAYER_FLASH_CONNECTION_REJECTED:11,E_PLAYER_FLASH_CONNECTION_APP_INVALID:12,E_PLAYER_FLASH_CONNECTION_FAILED:13,E_PLAYER_FLASH_CONNECTION_TIMEOUT:14,E_PLAYER_FLASH_STREAM_FAILED:15,E_PLAYER_FLASH_STREAM_NOT_FOUND:16,E_FLASH_HLS_FRAGMENT_PARSING_ERROR:55,E_FLASH_HLS_FRAGMENT_HTTP_GET_ERROR:56,E_FLASH_HLS_FRAGMENT_TIMEOUT_ERROR:57,E_FLASH_HLS_FRAGMENT_NW_ERROR:58,E_HLS_CLIENT_DISABLE_COOKIES:59,E_PLAYER_FLASH_ACCESSOR_ERROR:301,E_PLAYER_FLASH_URL_ACCESSOR_ERROR:302},b=n.PLAYER_DRM_CODES={E_FLASH_DRM_CONTENT_DATA_NOT_SET_ERROR:52,E_FLASH_DRM_TIMEOUT_LOAD_VOUCHER_ERROR:53,E_FLASH_DRM_SYSTEM_UPDATE_ERROR:54,E_PLAYER_DRM_UNSUPPORTED_STREAM_ERROR:601,E_FLASH_DRM_LOWER_BOUND_ERROR:3301,E_FLASH_DRM_UPPER_BOUND_ERROR:3766,E_FLASH_DRM_INCOGNITO_MODE_ERROR:3365,E_FLASH_DRM_VOUCHER_INVALID:3300,E_FLASH_DRM_INTERNAL_ACCESS_FAILURE:3307,E_FLASH_DRM_FILE_SYSTEM_WRITE:3313,E_FLASH_DRM_DEVICE_BINDING:3322,E_FLASH_DRM_INTERNAL_STORES_CORRUPT_SCENARIO_1:3323,E_FLASH_DRM_RESET_LICENSE_FILES:3324,E_FLASH_DRM_INTERNAL_STORES_CORRUPT_SCENARIO_2:3325,E_FLASH_DRM_VOUCHER_EXPIRED:3332,E_FLASH_DRM_INTERNAL_ERROR:3343,E_FLASH_DRM_FAILED_MIGRATING_DATA:3346,E_FLASH_DRM_CHROME_SETTING_ERROR:3370},h=n.PLAYER_DASH_CODES={E_DASH_REQUEST_FAILURE:"1",E_DASH_REQUEST_LENGTH:"2",E_DASH_REQUEST_TIMEOUT:"3",E_DASH_METADATA_LENGTH:"4",E_DASH_METADATA_FORMAT:"5",E_DASH_NO_FRAGMENTS:"6",E_DASH_ALIGNMENT:"7",E_DASH_BAD_MIME_TYPE:"8",E_DASH_DESTROYED:"9",E_DASH_OPERATION_ABORTED:"10",E_DASH_BUFFFER_APPEND:"11",E_DASH_MANIFEST_LOAD:"12",E_DASH_MANIFEST_PARSE:"13"},E=n.PLAYER_JS_HLS_CODES={MEDIA_ERR_ABORTED:"1",MEDIA_ERR_NETWORK:"2",MEDIA_ERR_DECODE:"3",MEDIA_ERR_SRC_NOT_SUPPORTED:"4",ERR_XHR_LOAD:"11",ERR_PLAYLIST_LOAD:"12",ERR_SUBS_LOAD:"13",ERR_SEGMENT_LOAD:"14",ERR_PARTIAL_LOAD:"15",ERR_MASTER_PLAYLIST_PARSE:"16",ERR_MEDIA_PLAYLIST_PARSE:"17",ERR_API_NO_NODE:"18"},T=n.SAPI_CODES={E_SAPI_INCOMPATIBLE_FORMAT:"100",E_SAPI_NO_STREAMS_RETURNED:"103",E_SAPI_USER_NOT_AUTHORIZED:"205",E_SAPI_RESTRICTED_TO_INTERNAL:"206",E_SAPI_DRM_RESTRICTED:"207",E_SAPI_UNSUPPORTED_FORMAT:"300",E_SAPI_EXTERNAL_NO_STREAMS:"301",E_SAPI_NO_PLAYABLE_STREAMS:"302",E_SAPI_NOT_FOUND:"400",E_SAPI_TEMP_ERR_JAPI_TIMEOUT:"500",E_SAPI_TEMP_ERR_JAPI_UNKNOWN:"502",E_SAPI_TEMP_ERR_JAPI_CARMOT:"503",E_SAPI_TEMP_ERR_JAPI_UNMAPPED:"550",E_SAPI_EMPTY_ATLAS_ACCOUNT_NAME:"401",E_SAPI_EMPTY_SECURE_KEY:"402",E_SAPI_EMPTY_LIST:"403",E_SAPI_INVALID_DATA:"404",E_SAPI_INVALID_VIDEO:"405",E_SAPI_EMPTY_STREAM_URL:"406",E_SAPI_MISSING_PROVIDER:"501",E_SAPI_SYSTEM_ERROR:"504"},A=(n.CAST_CODES={E_CAST_CONNECTION_REQUEST_FAILED:"1"},function(e,t,n){t.forEach(function(t){e[t]=n})}),S=function(e){var t=[];if(e)for(var n in e)e.hasOwnProperty(n)&&t.push(e[n]);return t},I={};A(I,[v.E_SAPI_LICENSE_ERROR,v.E_SAPI_UNAVAILABLE_TEMP,v.E_SAPI_GEO,v.E_SAPI_BLACKOUT],a.i18n.ERR_TITLE_VIDEO_NOT_AVAILABLE),S(v).forEach(function(e){I[e]||(I[e]=a.i18n.ERR_TITLE_CANNOT_PLAY_VIDEO)});var L={};L[v.E_SAPI_UNAVAILABLE_TEMP]=a.i18n.ERR_UNAVAILABLE,L[v.E_SAPI_LICENSE_ERROR]=a.i18n.ERR_UNAVAILABLE,L[v.E_SAPI_GEO]=a.i18n.ERR_GEO,L[v.E_SAPI_BLACKOUT]=a.i18n.ERR_BLACKOUT,L[v.E_SAPI_DEVICE]=a.i18n.ERR_DEVICE,L[v.E_SAPI_EMBED]=a.i18n.ERR_EMBED,L[v.E_PLAYER_ANDROID_CHROME_REQUIRED]=a.i18n.ERR_ANDROID_LIVE_CHROME_REQUIRED,L[v.E_PLAYER_NO_COMPATIBLE_FORMAT]=a.i18n.ERR_BROWSER_UNSUPPORTED,A(L,[v.E_SAPI_UNSUPPORTED_LIVE_ON_HTML,v.E_PLAYER_FLASH_IS_BLOCKED_SAFARI_STYLE_NONE,v.E_PLAYER_FLASH_IS_BLOCKED_GENERAL_STYLE_NONE,v.E_PLAYER_FLASH_IS_BLOCKED_REPLACED_BY_BGINACTIVE,v.E_PLAYER_FLASH_IS_BLOCKED_POWER_SAVING,v.E_PLAYER_FLASH_IS_BLOCKED_BLOCKERS_SCREEN],a.i18n.ERR_FLASH_IS_BLOCKED);var M={};M[f.E_PLAYER_HTML5_PLAYBACK_ERROR_SRC_NOT_SUPPORTED]=a.i18n.ERR_TITLE_VIDEO_NOT_AVAILABLE,A(M,[f.E_PLAYER_NOT_ENABLED,f.E_PLAYER_NOT_UPTO_DATE,f.E_PLAYER_HTML5_PLAYBACK_ERROR_ABORTED],a.i18n.ERR_TITLE_CANNOT_PLAY_VIDEO),S(f).forEach(function(e){M[e]||(M[e]=a.i18n.ERR_TITLE_SOMETHING_WENT_WRONG)});var C={};C[f.E_PLAYER_NOT_ENABLED]=a.i18n.ERR_FLASH_LATEST_DOWNLOAD,C[f.E_PLAYER_NOT_UPTO_DATE]=a.i18n.ERR_FLASH_LATEST_DOWNLOAD,C[f.E_PLAYER_HTML5_PLAYBACK_ERROR_NETWORK]=a.i18n.ERR_NETWORK_ISSUE,S(f).forEach(function(e){C[e]||(C[e]=a.i18n.ERR_GENERAL_ERROR)}),M[g.E_FLASH_HLS_FRAGMENT_NW_ERROR]=a.i18n.ERR_TITLE_CANNOT_PLAY_VIDEO,M[g.E_HLS_CLIENT_DISABLE_COOKIES]=a.i18n.ERR_TITLE_CANNOT_PLAY_VIDEO,M[g.E_PLAYER_FLASH_STREAM_NOT_FOUND]=a.i18n.ERR_TITLE_VIDEO_NOT_AVAILABLE,S(g).forEach(function(e){M[e]||(M[e]=a.i18n.ERR_TITLE_SOMETHING_WENT_WRONG)}),C[g.E_FLASH_HLS_FRAGMENT_NW_ERROR]=a.i18n.ERR_NETWORK_ISSUE,C[g.E_HLS_CLIENT_DISABLE_COOKIES]=a.i18n.ERR_COOKIE_DISABLED,S(g).forEach(function(e){e!==g.E_FLASH_HLS_FRAGMENT_NW_ERROR&&e!==g.E_HLS_CLIENT_DISABLE_COOKIES&&(C[e]=a.i18n.ERR_GENERAL_ERROR)});var N={};N[b.E_PLAYER_DRM_UNSUPPORTED_STREAM_ERROR]=a.i18n.ERR_TITLE_VIDEO_NOT_AVAILABLE,A(N,[b.E_FLASH_DRM_CONTENT_DATA_NOT_SET_ERROR,h.E_FLASH_DRM_TIMEOUT_LOAD_VOUCHER_ERROR,h.E_FLASH_DRM_SYSTEM_UPDATE_ERROR,h.E_FLASH_DRM_LOWER_BOUND_ERROR,h.E_FLASH_DRM_UPPER_BOUND_ERROR,h.E_FLASH_DRM_INTERNAL_STORES_CORRUPT_SCENARIO_2],a.i18n.ERR_TITLE_SOMETHING_WENT_WRONG),S(b).forEach(function(e){N[e]||(N[e]=a.i18n.ERR_TITLE_CANNOT_PLAY_VIDEO)});var D={};D[b.E_FLASH_DRM_CHROME_SETTING_ERROR]=a.i18n.ERR_DRM_CHROME_SETTING,D[b.E_FLASH_DRM_INCOGNITO_MODE_ERROR]=a.i18n.ERR_DRM_INCOGNITO_MODE,D[b.E_PLAYER_DRM_UNSUPPORTED_STREAM_ERROR]=a.i18n.ERR_MISSING_OR_DAMAGED,A(D,[b.E_FLASH_DRM_CONTENT_DATA_NOT_SET_ERROR,b.E_FLASH_DRM_TIMEOUT_LOAD_VOUCHER_ERROR,b.E_FLASH_DRM_SYSTEM_UPDATE_ERROR,b.E_FLASH_DRM_LOWER_BOUND_ERROR,b.E_FLASH_DRM_UPPER_BOUND_ERROR,b.E_FLASH_DRM_INTERNAL_STORES_CORRUPT_SCENARIO_2],a.i18n.ERR_GENERAL_ERROR),S(b).forEach(function(e){D[e]||(D[e]=a.i18n.ERR_DRM_BAD_LICENSE_FILE)});var R={};S(E).forEach(function(e){R[e]=a.i18n.ERR_TITLE_SOMETHING_WENT_WRONG});var O={};S(E).forEach(function(e){O[e]=a.i18n.ERR_GENERAL_ERROR});var P={};P[h.E_DASH_BAD_MIME_TYPE]=a.i18n.ERR_TITLE_VIDEO_NOT_AVAILABLE,S(h).forEach(function(e){e!==h.E_DASH_BAD_MIME_TYPE&&(P[e]=a.i18n.ERR_TITLE_SOMETHING_WENT_WRONG)});var w={};w[h.E_DASH_BAD_MIME_TYPE]=a.i18n.ERR_MISSING_OR_DAMAGED,S(h).forEach(function(e){e!==h.E_DASH_BAD_MIME_TYPE&&(w[e]=a.i18n.ERR_GENERAL_ERROR)});var k={};A(k,[T.E_SAPI_INCOMPATIBLE_FORMAT,T.E_SAPI_NO_STREAMS_RETURNED,T.E_SAPI_TEMP_ERR_JAPI_TIMEOUT,T.E_SAPI_TEMP_ERR_JAPI_UNKNOWN,T.E_SAPI_TEMP_ERR_JAPI_CARMOT,T.E_SAPI_TEMP_ERR_JAPI_UNMAPPED],a.i18n.ERR_TITLE_SOMETHING_WENT_WRONG),A(k,[T.E_SAPI_USER_NOT_AUTHORIZED,T.E_SAPI_DRM_RESTRICTED],a.i18n.ERR_TITLE_CANNOT_PLAY_VIDEO),S(T).forEach(function(e){k[e]||(k[e]=a.i18n.ERR_TITLE_VIDEO_NOT_AVAILABLE)});var x={};x[T.E_SAPI_USER_NOT_AUTHORIZED]=a.i18n.ERR_UNAUTHORIZED,x[T.E_SAPI_RESTRICTED_TO_INTERNAL]=a.i18n.ERR_UNAVAILABLE,x[T.E_SAPI_DRM_RESTRICTED]=a.i18n.ERR_DRM_RESTRICTED,A(x,[T.E_SAPI_INCOMPATIBLE_FORMAT,T.E_SAPI_NO_STREAMS_RETURNED,T.E_SAPI_TEMP_ERR_JAPI_TIMEOUT,T.E_SAPI_TEMP_ERR_JAPI_UNKNOWN,T.E_SAPI_TEMP_ERR_JAPI_CARMOT,T.E_SAPI_TEMP_ERR_JAPI_UNMAPPED],a.i18n.ERR_GENERAL_ERROR),S(T).forEach(function(e){x[e]||(x[e]=a.i18n.ERR_MISSING_OR_DAMAGED)});var B={};S(y).forEach(function(e){e!==y.E_LIVE_PLAYBACK_COMPLETE&&(B[e]=a.i18n.ERR_TITLE_SOMETHING_WENT_WRONG)}),B[y.E_LIVE_PLAYBACK_COMPLETE]=a.i18n.ERR_TITLE_VIDEO_NOT_AVAILABLE;var j={};j[y.E_LIVE_PLAYBACK_COMPLETE]=a.i18n.ERR_LIVE_PLAYBACK_COMPLETE,S(y).forEach(function(e){e!==y.E_LIVE_PLAYBACK_COMPLETE&&(j[e]=a.i18n.ERR_GENERAL_ERROR)}),n.Error=i,Object.defineProperty(i.prototype,"rep",{get:function(){return r(this)}}),i.prototype._getPhaseFromState=function(e){var t="S";return e&&e.playbackState&&(e.playbackState.state===o.VIDEO||e.playbackState.state===o.END)&&(t="P"),t},i.prototype.isSAPIError=function(){var e=this;return e.category>=_&&e.category<=m},Object.defineProperty(i.prototype,"title",{get:function(){var e=this,t=null,r=e.errorInfo.playbackState&&e.errorInfo.playbackState.loadedItem&&e.errorInfo.playbackState.loadedItem.isLive();if(e.isSAPIError())t=k;else{if(e.category===l&&-1!==s.indexOf(e.subcategory)&&r&&e.userAgent&&(e.userAgent.android||e.userAgent.ios))return a.i18n.ERR_TITLE_SOMETHING_WENT_WRONG;e.category===l||e.category===d?t=M:e.category===n.E_WARNING?t=B:e.category===n.E_INFO?t=I:e.category===c?t=N:e.category===p?t=P:e.category===u&&(t=R)}return t&&t[e.subcategory]||a.i18n.ERR_TITLE_SOMETHING_WENT_WRONG}}),Object.defineProperty(i.prototype,"message",{get:function(){var e=this,t=null,r=e.errorInfo.playbackState&&e.errorInfo.playbackState.loadedItem&&e.errorInfo.playbackState.loadedItem.isLive();if(e.isSAPIError())t=x;else{if(e.category===l&&-1!==s.indexOf(e.subcategory)&&r&&e.userAgent&&(e.userAgent.android||e.userAgent.ios))return a.i18n.ERR_LIVE_IOS_PLAYBACK;e.category===l||e.category===d?t=C:e.category===n.E_WARNING?t=j:e.category===n.E_INFO?t=L:e.category===c?t=D:e.category===p?t=w:e.category===u&&(t=O)}return this._msg||t&&t[e.subcategory]||a.i18n.ERR_TECH_DIFFICULTIES}}),n.isInfoCode=function(e){for(var t in v)if(v.hasOwnProperty(t)&&v[t]===e)return!0;return!1}},{"./states":50,"./strings":"XwKsC9"}],"./nextgen/src/event.js":[function(e,t,n){t.exports=e("YJm+dH")},{}],"YJm+dH":[function(e,t,n){"use strict";n.API={PLAYER_RENDERED:"render",PLAYER_READY:"playerReady",PLAYER_ERROR:"playerError",PLAYER_FULLSCREEN_CHANGE:"fullscreenChange",PLAYER_VOLUME_CHANGE:"volumeChange",PLAYER_MUTE_CHANGE:"muteChange",PLAYBACK_ERROR:"playbackError",PLAYBACK_READY:"playbackReady",PLAYBACK_START:"playbackStart",DURATION_CHANGE:"durationChange",BITRATE_CHANGE:"bitrateChange",PLAYBACK_PAUSE:"playbackPause",PLAYBACK_RESUMED:"playbackResumed",PLAYBACK_TIME_UPDATE:"playbackTimeUpdate",PLAYBACK_SEEK_COMPLETE:"playbackSeek",PLAYBACK_COMPLETE:"playbackComplete",AD_PLAYBACK_START:"adStart",AD_PLAYBACK_PAUSE:"adPause",AD_PLAYBACK_RESUME:"adResume",AD_PLAYBACK_PROGRESS:"adProgress",AD_PLAYBACK_STOP:"adComplete",AD_NONE:"adNone",AD_ERROR:"adError",PLAYLIST_COMPLETE:"playlistComplete",PLAYLIST_POSITION_CHANGE:"playlistPositionChange",UI_INTERACT:"uiInteract",BEACON_SEND:"beaconSend",LOADING_BEGIN:"loading-begin",LOADING_END:"loading-end",PLAYBACK_TIMEOUT:"playback-timeout",VIDEO_STARTED:"video-started",METADATA_READY:"metadata-ready",CC_AVAILABLE:"media-item-cc-available",CAST_AVAILABILITY_CHANGE:"cast-availability-change",CAST_CONNECTED_STATE_CHANGE:"cast-connected-state-change",CUEPOINT_STARTED:"cuepointStarted",CUEPOINT_STOPPED:"cuepointStopped",CUEPOINT_DETECTED:"cuepointDetected",PLAYER_VIEWPORT_CHANGE:"player-viewport-change",PLAYER_DOCKED_CHANGE:"player-docked-change"},n.TIMED_METADATA_RECEIVED="timed-metadata-received",n.ERROR="player-error",n.WARNING="player-warning",n.INFO="player-info",n.KEYDOWN="keydown",n.START_SCREEN_RENDERED="start-screen-rendered",n.START_SCREEN_CLICK="start-screen-click",n.END_SCREEN_RENDERED="end-screen-rendered",n.END_SCREEN_CLICK="end-screen-click",n.CTRL_ENDSCREEN_VID="selected-endscreen-video",n.RELATED_ITEM_CLICK="related-item-click",n.FETCH_MORE_RELATED_ITEMS="fetch-more-related-items",n.UP_NEXT_PG_CLICK="upnext-pg-click",n.SEEK_BAR_MOUSEOVER="seek-bar-mouseover",n.SEEK_BAR_MOUSEOUT="seek-bar-mouseout",n.TOGGLE_PLAY_PAUSE="toggle-play-pause",n.CONTROLS_SEEK_START="controls-seek-start",n.CONTROLS_SEEK_END="controls-seek-end",n.CONTROLS_SEEKING="controls-seeking",n.CONTROLS_SET_VOLUME="controls-set-volume",n.CONTROLS_SET_MUTE="controls-set-mute",n.FULLSCREEN_CHANGE="fullscreen-change",n.PLAYER_DIMENSION_CHANGE="player-dimension-change",n.CONTROLS_BAR_CHANGE="controls-bar-change",n.METADATA_AVAILABLE="metadata-available",n.REFRESH_METADATA_AVAILABLE="refresh-metadata-available",n.RELATED_ITEMS_LOADED="related-items-loaded",n.RENDERER_SWITCHED="renderer-switched",n.RENDERER_PP_NEXT="renderer-prepare-preload-next",n.RENDER_PLAYLIST_FIRST_BATCH="render-playlist-first-batch",n.MEDIA_ITEM_LOADED="media-item-loaded",n.CAST={TOGGLE_PLAYING:"cast-toggle-playing",BUFFERING:"cast-buffering",MEDIA_CHANGED:"cast-media-changed",PLAYBACK_PROGRESS:"cast-playback-progress",VIDEO_ENDED:"cast-video-ended",PLAYLIST_ENDED:"cast-playlist-ended",CONNECTION_STATUS_CHANGED:"cast-connection-changed",VOLUME_CHANGED:"cast-receiver-volume-changed",MUTE_CHANGED:"cast-receiver-mute-changed",CAPTION_AVAILABILITY_CHANGED:"cast-captions-availability-changed"},n.SWF_READY="swf-ready",n.SWF_READY_TIMEOUT="swf-ready-timeout",n.PAUSE_VPAID="pause-vpaid",n.RESUME_VPAID="resume-vpaid",n.PLAYER_RESIZE="player-resize",n.SELECTED_STREAM_CHANGE="selectedStreamChange",n.SELECTED_STREAM_URL_CHANGE="selectedStreamUrlChange",n.RENDERER_PLUGIN_LOADED="rendererPluginLoaded",n.RENDERER_PLUGIN_LOAD_FAILED="rendererPluginLoadFailed",n.RENDERER_PLUGIN_LOAD_TIMED_OUT="rendererPluginLoadTimedOut",n.VTT_SEGMENT_LOADED="vttSegmentLoaded",n.MEDIA_RELOAD_BEGIN="mediaReloadBegin",n.MEDIA_RELOAD_END="mediaReloadEnd",n.MEDIA_PLAYLIST_LOADED="mediaPlaylistLoaded",n.MEDIA_PLAYLIST_UPDATED="mediaPlaylistUpdated",n.SUBTITLE_PLAYLIST_UPDATED="subtitlePlaylistUpdated",n.QUALITY_CHANGE="qualityChange",n.QUALITY_SELECTED="qualitySelected",n.BITRATE_LIST_CHANGED="bitrateListChanged",n.ABR_DATA_UPDATE="abrDataUpdate",n.FRAG_LOAD_RETRY_FAILURE="fragLoadRetryFailure",n.LIVE_MEDIA_PLAYLIST_LOAD_RETRY_FAILURE="liveMediaPlaylistLoadRetryFailure",n.LIVE_LOADING_LATE="liveLoadingLate",n.RECOVERY_START="recoveryStart",n.RECOVERY_METADATA_READY="recoveryMetadataReady",n.ER_READY="erReady",n.PLAYBACK_INFO="playback-info",n.USER_AUTHENTICATED="user-authenticated",n.VIDEO_APPS_LOADED="video-apps-loaded",n.OPEN_FEEDBACK="open-feedback",n.CC_HOVER="cc-hover",n.VOLUME_HOVER="volume-hover",n.PTS_DISCONTINUITY="PTSDiscontinuity",n.RELOAD_FRAGMENT="ReloadFragment",n.nativeVideoEvents=["ended","error","loadedmetadata","loadeddata","pause","stalled","loadstart","play","playing","seeking","seeked","timeupdate","volumechange","waiting"],n.html5HlsEvents=["infoUpdate","vttSegmentLoaded","streamSwitched","liveLoadingLate","streamUpdated","hlsWaiting","cuepointDetected","cuepointStarted","subtitleStreamUpdated","abrDataUpdated","preloadProgress"],n.Video={CLICK:"video-click",SWITCHING:"switching",SWITCHED:"switched",WARNING:"warning"},n.Ad={CLICK:"ad-click",NO_AD:"ad-no-ad",NO_PLAYABLE_STREAM:"ad-no-playable-stream",CANCELED:"ad-canceled",BREAK_CANCELLED:"ad-break-cancelled"},n.nativeVideoEvents.forEach(function(e){n.Video[e.toUpperCase()]="video-"+e,n.Ad[e.toUpperCase()]="ad-"+e}),n.VIDEO_REQUEST="video-request",n.PLAYBACK_REQUEST="playback-request",n.PLAYBACK_STARTED="playback-started",n.PLAYBACK_RESUMED="playback-resumed",n.PLAYBACK_PROGRESS="playback-progress",n.PLAYBACK_STALLED="playback-stalled",n.PLAYBACK_ENDED="playback-ended",n.PLAYBACK_ERROR="playback-error",n.API_CALLED="api-called",n.FEEDBACK_INFO="feedback-info",n.HLS_FIRST_TS_LOAD_START="hls-first-ts-load-start",n.HLS_FIRST_TS_FIRST_BYTE_ARRIVE="hls-first-ts-first-byte-arrive",n.CTRL_PLAYPAUSE="ctrl-play-pause",n.CTRL_SEEK="ctrl-seek",n.CTRL_VOLUME="ctrl-volume",n.CTRL_FULLSCREEN="ctrl-fullscreen",n.CTRL_SETTINGS="ctrl-settings",n.CTRL_AGEGATE_BDAY="ctrl-agegate-bday",n.CTRL_SHARE="ctrl-share",n.CTRL_REPLAY="ctrl-replay",n.CTRL_TIMER="ctrl-timer",n.CTRL_PLAYREQUEST="ctrl-playrequest",n.UI_LOGIN="ui-login",n.AD_PLAYBACK_REQUEST="ad-playback-request",n.AD_PLAYBACK_STARTED="ad-playback-started",n.AD_PLAYBACK_PAUSED="ad-playback-paused",n.AD_PLAYBACK_RESUMED="ad-playback-resumed",n.AD_PLAYBACK_PROGRESS="ad-playback-progress",n.AD_PLAYBACK_ENDED="ad-playback-ended",n.AD_BREAK_STARTED="ad-break-started",n.AD_BREAK_INFO="ad-break-info",n.AD_BREAK_ENDED="ad-break-ended",n.CUEIN_DETECTED="cue-in-detected",n.AD_PLAYBACK_ERROR="ad-playback-error",n.AD_CLICK="ad-exposed-click",n.UPDATE_AD_COUNT="update-ad-count",n.UPDATE_AD_BREAKS="update-ad-breaks",n.ADS_OBJS_UPDATE="ads-object-update",n.ADS_READY="ads-ready",n.AD_BREAK_TIMELINE="ad-break-timeline",n.YVAP_INFO_UPDATE="yvap-info-update",n.YVAP_MIDROLL_CACHE_UPDATE="yvap-midroll-cache-update",n.YVAP_SWF_PROXIED_EVENT="yvap-swf-proxied-event",n.AD_METRICS="ad-metrics",n.SAPI_REFRESH_REQUEST="sapi-refresh-request",n.CC={SETTINGS:"cc-settings",TOGGLE:"cc-toggle",UI_TOGGLE:"cc-ui-toggle",FETCHED:"cc-fetched",FETCH_MOBILE:"cc-fetche-mobile",REQUEST_UI_DATA_FOR_MEDIA_ITEM:"cc-request-ui-data-for-media-item",REMOVED:"cc-destroy",SHOW_CONTROLS:"cc-show-controls",LANGUAGE_CHANGE:"cc-language-change",CC_OPTIONS_LANGUAGE_CHANGE:"cc-options-language-change",FONT_SIZE_CHANGE:"cc-font-size-change",FONT_FACE_CHANGE:"cc-font-face-change",BG_OPACITY_CHANGE:"cc-bg-opacity-change",USER_STYLE_PREFERENCES_CHANGE:"cc-user-style-preferences-change",SAVE_TO_LOCAL_STORAGE:"cc-save-to-local-storage",UPDATE_STYLE:"cc-update-style",POSITION_CHANGE:"cc-position-change",POSITION_FLOAT:"cc-position-float"},n.CTV={GET_BITRATE_FOR_OPSS:"ctv-get-bitrate-for-opss"},n.BEFORE_PROGRESS_BEACON="before-progress-beacon",n.BEFORE_INCOMPLETE_EXIT="before-incomplete-exit",n.Metrics={INIT_TO_STARTSCREEN:{type:"titssc",desc:"VideoPlayer init to StartScreen Rendered"},HLS_FIRST_TS_LOAD_START:{type:"hftls",desc:"First ts loading starts in HLS"},HLS_FIRST_TS_FIRST_BYTE_ARRIVE:{type:"hftfba",desc:"First byte arrives for the first ts loading in HLS"},CLICK_TO_START:{type:"ttsapf",desc:"Player click to playback start"},INIT_TO_START:{type:"ttsapt",desc:"Init to playback start (autoplay)"},PLAYBACK_START:{type:"tpb",desc:"Playback request to playback start"},PLAYBACK_STALLED:{type:"tps",desc:"Playback buffering start to buffering end"},LOAD_TO_LOADED_DATA:{type:"tltld",desc:"Time from load() to loaded data"},SAPI_REQUEST:{type:"tsapic",desc:"SAPI request to SAPI response"},SWF_READY:{type:"tswfr",desc:"Player SWF is ready"},SWF_OBJECT_TO_INIT_START:{type:"tobtswfinit",desc:"Time from creation of object tag to call of swf constructor"},INIT_RENDER_GAP:{type:"tirg",desc:"Time gap between end of construction and beginning of render"},INIT_TO_SAPI:{type:"titsc",desc:"Time from beginning of construction to first updateMetaData"},RENDER_TO_SWF:{type:"trtswf",desc:"Time from init to object tag creation"},DRM_METADATA_IS_SET:{type:"tdmds",desc:"Time interval from play to drm meta data is set"},DRM_AUTH_COMPLETE:{type:"ttauth",desc:"Time to complete DRM authentication after drm metadata is set"},INIT_TO_APPS_INIT:{type:"ttapp",desc:"Player init to Video Apps Init"},SET_WATCH_HISTORY:{type:"tsetwh",desc:"YQL+ call to save watch history"},VP_CONSTRUCTOR:{type:"tcons",desc:"VideoPlayer Constructor"},GET_USER_PREFS:{type:"tgetcc",desc:"YQL+ call to get captions preferences"},PLAYLIST_LOADED:{type:"tploaded",desc:"Playlist loaded"},SAPI_LOADCLIPS:{type:"tsapiclips",desc:"SAPI request for clips"},CREATE_RENDERER:{type:"trcreate",desc:"Creating the renderer (swf/html)"},YVAP_READY:{type:"tyvapr",desc:"VideoAdPlugin is ready"},YVAP_NOAD:{type:"tyvapadn",desc:"Ad None"},YVAP_ADSTARTED:{type:"tyvapads",desc:"Ad Started"},STREAM_REQUEST_TO_RENDER:{type:"treqtr",desc:"Stream Latency (From request to render)"},STREAM_PLAY_TO_RENDER:{type:"tsltps",desc:"Media playback start to video render"},SAPI_LOADRELATED:{type:"tsapilr",desc:"SAPI Get for related videos"}}},{}],23:[function(e,t,n){"use strict";function r(e,t){var n=this;n._model=t,n._eventBus=e,n._segments={},n._events=[],n._processedCueOuts={},n._processedCueIns={},n._trackedCueOutSeqNum=null,n._masterPlaylist="",n._mediaPlaylist="",n._processingTime=0,n._refreshPlaylistTimer=null,n._bindEvents()}t.exports=r;var i=e("./util"),a=e("./event"),o=(e("../../lib"),e("../../lib/logger"),8e3),s=/^#(EXT-X-MEDIA-SEQUENCE|EXTINF|EXT-X-CUE-OUT(?:-CONT)?|EXT-X-CUE-IN|EXT-X-ENDLIST):?([0-9\.]+)?(?:\/([0-9\.]+)?)?,?$/;r.prototype.updatePlaylistURLs=function(e,t){var n=this;n._masterPlaylist=e,n._mediaPlaylist=t},r.prototype._initCueTracking=function(e,t){var n=this;n._getMediaPlaylist(e,t,function(e,t){e||n._extractCuePoints(t)}),n._stopCueTracking(),n._refreshPlaylistTimer=setTimeout(function(){n._initCueTracking(e,t)},o)},r.prototype._stopCueTracking=function(){var e=this;clearTimeout(e._refreshPlaylistTimer),e._refreshPlaylistTimer=null},r.prototype._extractCuePoints=function(e){for(var t=this,n=e.split("\n"),r=0;n.length;){var i=n.shift(),o=i.match(s);if(o)switch(o[1]){case"EXT-X-MEDIA-SEQUENCE":r=parseInt(o[2]);break;case"EXTINF":if(r++,t._segments[r]){t._processingTime=t._segments[r].end;break}var l=parseFloat(o[2]);t._processingTime+=l,t._segments[r]={dur:l,end:t._processingTime};break;case"EXT-X-CUE-OUT":t._processingTime=0,t._processedCueOuts[r]||(t._trackedCueOutSeqNum=r,t._processedCueOuts[r]=!0);break;case"EXT-X-CUE-IN":if(!t._processedCueIns[r]){var d=Math.round(t._processingTime);t._events.push({type:a.API.CUEPOINT_STOPPED,seqNum:r,cueOutSeqNum:t._trackedCueOutSeqNum,time:d}),t._processedCueIns[r]=!0,t._onCueInDetected(d,t._trackedCueOutSeqNum)}break;case"EXT-X-ENDLIST":t._stopCueTracking()}}},r.prototype._checkCues=function(e,t){var n=this,r=null,i=-1;if(n._events.forEach(function(n,a){e>=n.time&&t===n.cueOutSeqNum&&(r=n,i=a)}),r){n._events=n._events.slice(i+1);var o=[r.type];r.type===a.API.CUEPOINT_STOPPED&&o.push(r.time),n._eventBus.publish.apply(n._eventBus,o)}},r.prototype._bindEvents=function(){function e(){clearInterval(i._cueOutTimeUpdater),i._cueOutTimeUpdater=null}function t(e){if(!i._model)return null;var t=i._model.playlist.getCurrentItem().streamProfiles||[];return t=t.filter(function(e){return"stream"===e.type}),t[e]?t[e].url:null}function n(n,r,a){var s=1e3;o=a.cueoutStartSeqNum,i._mediaPlaylist=t(a.cueoutStreamIndex)||i._mediaPlaylist,i._initCueTracking(i._masterPlaylist,i._mediaPlaylist),e();var l=0;i._cueOutTimeUpdater=window.setInterval(function(){i._checkCues(++l,o)},s)}function r(){e(),i._stopCueTracking(),i._events.length=0}var i=this,o=null;i._onCueInDetected=function(e,t){t===o&&i._eventBus.publish(a.CUEIN_DETECTED,e)},i._eventBus.subscribe(a.API.CUEPOINT_STARTED,n,i),i._eventBus.subscribe(a.API.CUEPOINT_STOPPED,r,i),i._eventBus.subscribe(a.AD_BREAK_ENDED,r,i)},r.prototype._getMediaPlaylist=function(e,t,n){var r=this;return r._masterPlaylist=e,t?(r._mediaPlaylist=t,r._fetchPlaylist(r._mediaPlaylist,n)):void i.ajax(r._masterPlaylist,{method:"GET",context:r,successHandler:function(e){return r._mediaPlaylist=r._getPlaylistUrl(e),""!==r._mediaPlaylist?r._fetchPlaylist(r._mediaPlaylist,n):n("bad mpl url")},failureHandler:function(e){return n(e)}})},r.prototype._fetchPlaylist=function(e,t){var n=this;if(!e.match(/^https?:/)){var r=n._masterPlaylist.match(/^(https?:.*\/).*?\.m3u8?/)[1];r&&(e=r+e)}i.ajax(e,{method:"GET",context:n,successHandler:function(e){return t(null,e)},failureHandler:function(e){return t(e)}})},r.prototype._getPlaylistUrl=function(e){for(var t=e.split("\n");t.length;){var n=t.shift();if(n.match(/^[^#].*\.m3u8.*?$/))return n}return""},r.prototype.destroy=function(){var e=this;e._stopCueTracking()}},{"../../lib":"bRhrlU","../../lib/logger":"IS9j5T","./event":"YJm+dH","./util":"jJTEqU"}],24:[function(e,t,n){"use strict";function r(e,t,n){var r=this,a=i.getWindow(),o=a.location.protocol;r._iframeControlsGetMethods={isPlaying:null,getDuration:null,getCurrentTime:null,getTimeRemaining:null,getFullscreen:null,getVolume:null,getMute:null},r._iframePlaylistGetMethods={getCurrentItemTitle:null,getCurrentItemDescription:null,getCurrentItemProviderName:null},r._iframeVID="VID-"+Math.floor(1e3*Math.random()),r._configData=JSON.parse(JSON.stringify(e)),r._player=n,r._iframe=null,r._startTime=Date.now(),r._iframeLoaded=!1,r._receiveMessageHandlerOnPage=null,r._receiveMessageHandlerOnIframe=null,r._iframeHost="https:"===o?"https://s.yimg.com":"http://l.yimg.com",e.insideIframeConfig||(r._receiveMessageHandlerOnPage=r._pageReceiveFromIframe.bind(r),window.addEventListener("message",r._receiveMessageHandlerOnPage,!1))}t.exports=r;var i=e("./util"),a=e("../../lib"),o=e("./error"),s=e("./event"),l={EVENT:"EVENT",CLEAR_IFRAME_NAME:"CLEAR_IFRAME_NAME"};r.prototype.destroy=function(){var e=this;e._receiveMessageHandlerOnPage&&window.removeEventListener("message",e._receiveMessageHandlerOnPage,!1),e._receiveMessageHandlerOnIframe&&window.removeEventListener("message",e._receiveMessageHandlerOnIframe,!1)},r.prototype.constructIframe=function(e){var t,n=this,r=i.getWindow();if(t=a.isString(e)?document.querySelector(e):e._node||e,null===t)return void n._eventBus.publish(s.Error,i.createErr("C",null,o.E_PLAYER,o.PLAYER_CODES.E_INVALID_CONFIGURATION,"Invalid DOM node or CSS selector specified. Cannot render player."));n._configData.insideIframeConfig={startTime:n._startTime,iframeVID:n._iframeVID,parentURL:r.location.protocol+"//"+r.location.host};var l=document.createElement("iframe"),d=encodeURIComponent(JSON.stringify(n._configData)),c=n._iframeHost+"/rx/builds/7.86.34.1468869355/iframe-controller-page.html";l.setAttribute("src",c),l.setAttribute("name",d),l.setAttribute("id",n._iframeVID),l.setAttribute("width","100%"),l.setAttribute("height","100%"),l.setAttribute("frameBorder","0"),l.setAttribute("allowFullScreen",""),t.appendChild(l),n._iframe=l,n._iframe.onload=function(){n._iframeLoaded=!0}},r.prototype._pageSendToIframe=function(){var e=this;if(e._iframe&&e._iframeLoaded){var t=Array.prototype.slice.call(arguments),n=JSON.stringify(t);e._iframe.contentWindow.postMessage(n,e._iframeHost)}},r.prototype._pageReceiveFromIframe=function(e){var t=this,n=null,r=null,i={},o=null,s=t._iframeControlsGetMethods,d=t._iframePlaylistGetMethods;if(e.origin===t._iframeHost){try{n=JSON.parse(e.data)}catch(c){return}if(n&&a.isArray(n)&&n.length>=2){if(o=n.pop(),!a.isString(o)||0!==o.indexOf("VID-"))return;if(t._iframeVID!==o)return;if(r=n.pop(),!r||!l[r])return;switch(r){case l.EVENT:i=n.pop(),Object.keys(i).forEach(function(e){t._iframeControlsGetMethods.hasOwnProperty(e)?s[e]=i[e]:t._iframePlaylistGetMethods.hasOwnProperty(e)&&(d[e]=i[e])}),t._player._iframeController._iframeControlsGetMethods=s,t._player._iframeController._iframePlaylistGetMethods=d,t._player.publish.apply(t._player,n);break;case l.CLEAR_IFRAME_NAME:t._iframe.setAttribute("name","")}}}},r.prototype.routeControlsApiToIframe=function(){var e=this,t="controls",n="playlist",r=["addItems","addItem","setPositionById","setPosition","removeItem","removeItems","removeItemById","removeItemsById"],i=["getCurrentItemTitle","getCurrentItemDescription","getCurrentItemProviderName"],a=function(n){return function(){var r=Array.prototype.slice.call(arguments);e._pageSendToIframe(t,n,r)}},o=function(t){return function(){return e._iframeControlsGetMethods[t]}},s=function(t){return-1!==r.indexOf(t)?function(){var r=Array.prototype.slice.call(arguments);e._pageSendToIframe(n,t,r)}:-1!==i.indexOf(t)?function(){return e._iframePlaylistGetMethods[t]}:function(){throw new Error("playlist API "+t+" is not supported when safe frame is enabled")}},l=function(e){return function(){throw new Error("player API "+e+" is not supported when safe frame is enabled")}};for(var d in e._player[t])if("function"==typeof e._player[t][d]){if(void 0!==e._iframeControlsGetMethods[d]){e._player[t][d]=o(d);continue}e._player[t][d]=a(d)}for(var c in e._player[n])"function"==typeof e._player[n][c]&&(e._player[n][c]=s(c));e._player.getCustomControlsNode=l("getCustomControlsNode"),e._player.fetchMetaData=l("fetchMetaData"),e._player.getMediaStore=l("getMediaStore");
},r.prototype.routeAPIeventToPage=function(e){var t=this,n=window.YAHOO.VideoPlatform.API_Events[e];t._player.on(n,function(){var e=Array.prototype.slice.call(arguments);e.unshift(n),e.push(t.refreshControlsAPIData()),e.push(l.EVENT),e.push(t._configData.insideIframeConfig.iframeVID),t._iframeSendToPage(JSON.stringify(e))})},r.prototype.sendClearIframeNameToPage=function(){var e=this,t=[];t.push(l.CLEAR_IFRAME_NAME),t.push(e._configData.insideIframeConfig.iframeVID),e._iframeSendToPage(JSON.stringify(t))},r.prototype._iframeSendToPage=function(e){var t=this,n=null;t._configData.insideIframeConfig&&(n=t._configData.insideIframeConfig.parentURL),window.parent.postMessage(e,n)},r.prototype._iframeReceiveFromPage=function(e){var t=this,n=null,r=null,i=null,a=null;if(e.data){try{a=JSON.parse(e.data)}catch(o){return}Array.isArray(a)&&(n=a.length>0?a[0]:null,r=a.length>1?a[1]:null,i=a.length>2?a[2]:null),n&&r&&t._player&&t._player[n]&&t._player[n][r]&&t._player[n][r].apply(t._player[n],i)}},r.prototype.refreshControlsAPIData=function(){var e=this,t={isPlaying:e._player.controls.isPlaying(),getDuration:e._player.controls.getDuration(),getCurrentTime:e._player.controls.getCurrentTime(),getTimeRemaining:e._player.controls.getTimeRemaining(),getFullscreen:e._player.controls.getFullscreen(),getVolume:e._player.controls.getVolume(),getMute:e._player.controls.getMute(),getCurrentItemTitle:e._player.playlist.getCurrentItemTitle(),getCurrentItemDescription:e._player.playlist.getCurrentItemDescription(),getCurrentItemProviderName:e._player.playlist.getCurrentItemProviderName()};return t},r.prototype.setupIframeToPageCommunication=function(){var e=this;e._receiveMessageHandlerOnIframe=e._iframeReceiveFromPage.bind(e),window.addEventListener("message",e._receiveMessageHandlerOnIframe,!1);for(var t in window.YAHOO.VideoPlatform.API_Events)window.YAHOO.VideoPlatform.API_Events.hasOwnProperty(t)&&e.routeAPIeventToPage(t)}},{"../../lib":"bRhrlU","./error":20,"./event":"YJm+dH","./util":"jJTEqU"}],25:[function(e,t,n){"use strict";var r=e("./event"),i=e("./util"),a=e("./video-player");i.setSingleton("VideoPlayer",a),i.setSingleton("API_Events",r.API)},{"./event":"YJm+dH","./util":"jJTEqU","./video-player":59}],26:[function(e,t,n){"use strict";function r(e){return f.isString(e)&&""!==e}function i(e,t){var n=this;s(L,e,n,t),f.isString(n.url)&&0!==n.url.length||(n.url=n.host+n.path),n.format||(n.format=y.getFormat(n.url)),!n.host&&n.url.length>0&&(n.host=y.getHostname(n.url))}function a(){var e=this;e.streams=[],e.selectedStreams=[],e.relatedVideoIds=[],e.state=_.NO_DATA,e.recoveryStatus=m.NOT_RECOVERING,e.isCCM=!0,e.tryCount=1,e.failoverCount=0}function o(){var e=this;e._items={},e._finishedListeners=[]}function s(e,t,n,r){l(e,t,n,null,r),t.CMS&&Object.keys(t.CMS).forEach(function(e){n.CMS[e]=t.CMS[e]}),t.html5_hls&&Object.keys(t.html5_hls).forEach(function(e){n.html5_hls[e]=t.html5_hls[e]})}function l(e,t,n,r,i){var a=n,o=t,s=!0,c=!1;if("configName"in e&&(r=e.configName),r&&(f.isObject(t)&&r in t?(o=t[r],c=!0):s=!1),s&&"transform"in e&&(o=e.transform(o)),"defaultVal"in e){var p=e.defaultVal;if(void 0===n&&(a=f.isFunction(p)?p():p),c){var u=!0;if("overwrite"in e){var _=e.overwrite;f.isFunction(e.overwrite)?u=_(a,o):_||(u=a===p)}u&&("validator"in e?e.validator(o)?a=o:d("Bad configuration data for '"+r+"'",i):a=o)}else e.required&&d("Missing required configuration parameter '"+r+"'",i)}else{a=n||{},s&&!f.isObject(o)&&(r?d("Expecting object in configuration for '"+r+"'",i):d("Expecting object for configuration",i),s=!1),s||(o={});for(var m in e)if(e.hasOwnProperty(m)&&-1===N.indexOf(m)){var v=e[m];a[m]=l(v,o,a[m],m,i)}}return a}function d(e,t){var n=new Error(e);if(!t)throw n;t.push(n)}function c(e){if(!e)return"";for(var t=e.split("&"),n=0;n<t.length;n++)if(0===t[n].indexOf("ps=")&&t[n].length>3){var r=t[n].substring(3),i=r.split("_");return i[0]}return""}function p(e,t){for(var n=e.split("&"),r=0;r<n.length;r++)if(0===n[r].indexOf("ps=")&&n[r].length>3){n[r]=n[r].replace(n[r].substring(3),t);break}return n.join("&")}function u(e,t){e&&e.length>0&&e.forEach(function(e){e.path&&(e.path=p(e.path,t)),e.url&&(e.url=p(e.url,t)),e.hlsInfo&&e.hlsInfo.ts_url&&(e.hlsInfo.ts_url=p(e.hlsInfo.ts_url,t))})}var _={NO_DATA:"no-data",FETCHING:"fetching",HAS_DATA:"has-data",ERROR:"error"},m={NOT_RECOVERING:"not-recovering",RECOVERING:"recovering",RECOVERED:"recovered"};t.exports={MediaStore:o,Stream:i,MediaItem:a,ItemState:_,ItemRecoveryStatus:m,fillFromConfig:s,addError:d,getSapiVsId:c,updateVsInStreams:u};var v=e("./event"),y=e("./util"),f=e("../../lib"),g=e("../../lib/logger"),b=e("./stream"),h=e("./error"),E=(e("../../lib/user-agent"),e("./renderers/type")),T=e("./constants"),A="yvpResumeTimeItems",S=10,I={Community:{providerId:"video.community.sony.com"},"Sin City Saints":{providerId:""},"Other Space":{providerId:""}},L={mimeType:{configName:"mime_type",defaultVal:"",validator:r},format:{defaultVal:"",transform:function(e){if(!f.isString(e))return null;var t=e.toLowerCase().split("/");return t[t.length-1]},validator:r},width:{defaultVal:0,validator:f.isNumber},height:{defaultVal:0,validator:f.isNumber},bitrate:{defaultVal:0,validator:f.isNumber},duration:{defaultVal:0,validator:f.isNumber},host:{defaultVal:"",validator:f.isString},path:{defaultVal:"",validator:f.isString},url:{defaultVal:"",validator:r},live:{defaultVal:!1,validator:f.isBoolean},isPrimary:{configName:"is_primary",defaultVal:!1,validator:f.isBoolean},cdn:{configName:"cdn",defaultVal:"",validator:f.isString},hlsInfo:{configName:"hls_info",defaultVal:null},dashInfo:{configName:"dash_info",defaultVal:null},drmType:{configName:"drm_type",defaultVal:null},deliveryType:{defaultVal:""},manifestContent:{configName:"mediaPlaylist",defaultVal:null},type:{defaultVal:"",validator:f.isString},frameRate:{defaultVal:0,validator:f.isNumber,configName:"framerate"},channels:{configName:"channels",defaultVal:null}};i.prototype.isRTMP=function(){var e=this,t=/^rtmp(?:e|t|te|s)?:\/\//;return t.test(e.host)||t.test(e.url)},i.prototype.isRTX=function(){var e=this;return e.url.indexOf("/rtx/")>-1},i.prototype.isAtlas=function(){var e=this,t=e.host;return e.hlsInfo&&(t=e.hlsInfo.ts_url),/atlas\.cdn\.yimg\.com/.test(t)},i.prototype.isDrmProtected=function(){var e=this;return"adobe"===e.drmType||"apple"===e.drmType},i.prototype.isStreamCompatibleForDrm=function(e){var t=this;return t.isDrmProtected()?"flash"===e&&"f4m"===t.format?1:-1:0},i.prototype._getProtocol=function(){var e=this,t="http",n=e.url.split(":");return n.length>1&&(t=n[0]),t},i.prototype.getType=function(){var e=this,t="unknown",n=e.url,r=e._getProtocol();return n&&(r&&(r.indexOf("rtmp")>-1||r.indexOf("rtsp")>-1)?t=r:/\/*\.f4m/i.test(n)?t=e.isRTX()?"rtx-hds":"hds":/\/*\.m3u8/i.test(n)||n.length>0&&n.indexOf("content=hls")>-1?t=e.isRTX()?"rtx-hls":"hls":/\/*\.mp4/i.test(n)?t="mp4":/\/*\.webm/i.test(n)&&(t="webm")),t};var M={id:{configName:"id",defaultVal:null,validator:f.isString},license:{configName:"license",licensorName:{configName:"account_name",defaultVal:"",validator:f.isString},licensorId:{configName:"account_id",defaultVal:"",validator:f.isString},licenseName:{configName:"title",defaultVal:"",validator:f.isString},licenseId:{configName:"salesforce_id",defaultVal:"",validator:f.isString},originatingProperty:{configName:"originating_property",defaultVal:"",validator:f.isString}},metrics:{ywa:{defaultVal:[],validator:function(e){return f.isArray(e)&&e.every(f.isString)}},comscoreC5:{configName:"comscore_cm5",defaultVal:"",validator:f.isString},comscoreC6:{configName:"comscore6",defaultVal:"",validator:f.isString},pageSpaceId:{configName:"pspid",defaultVal:"",validator:f.isString},beacons:{defaultVal:{},transform:function(e){if(!f.isArray(e))return null;for(var t={},n=0;n<e.length;n++){var r=e[n],i=r.events,a=r.target||"",o=r.data||"",s=r.urlTemplate;if(!f.isArray(i))return null;f.isString(s)||(s=null);for(var l=0;l<i.length;l++){var d=i[l],c=d.param||"";if(!f.isObject(d)||!f.isString(d.name))return null;d.name in t||(t[d.name]=[]);var p={url:s};o&&c&&(p.target=a,p.addParam="&"+o+c),t[d.name].push(p)}}return t},validator:f.isObject},mmActivityId:{configName:"mmActivityId",defaultVal:"",validator:f.isString},mediametrie:{configName:"mediametrie",defaultVal:null,validator:f.isString}},status:{code:{defaultVal:"",validator:f.isString},msg:{defaultVal:"",validator:f.isString}},yvap:{defaultVal:{}},closedCaptions:{configName:"closedcaptions",defaultVal:[],url:{validator:f.isString},lang:{validator:f.isString}},visualSeek:{configName:"visualseek",defaultVal:{},frequency:{defaultVal:0,validator:f.isNumber},width:{defaultVal:0,validator:f.isNumber},height:{defaultVal:0,validator:f.isNumber},images:{defaultVal:[],validator:f.isArray}},vpaTraceDigest:{defaultVal:"",validator:f.isString},progress:{position:{defaultVal:null,validator:f.isNumber},adbreaks:{defaultVal:[],validator:f.isArray}},seriesInfo:{defaultVal:{},series_id:{configName:"series_id",defaultVal:null,validator:f.isNumber},videoType:{configName:"type",defaultVal:"",validator:f.isString},seasonNumber:{configName:"season_number",defaultVal:0,validator:f.isNumber},episodeNumber:{configName:"episode_number",defaultVal:0,validator:f.isNumber}},annotations:{configName:"annotations",defaultVal:{},content:{defaultVal:[],validator:f.isArray},theme:{defaultVal:"dark",validator:f.isString},transition:{defaultVal:{},"class":{defaultVal:"dissolve",validator:f.isString}},version:{defaultVal:"1",validator:f.isString}},algo:{defaultVal:null,transform:function(e){return e.algo_name},validator:f.isString},instrument:{defaultVal:{},transform:function(e){return e?e:{}},validator:f.isObject}},C={description:{defaultVal:"",validator:f.isString,transform:function(e){return y.sanitizeAndUnescape(e)}},title:{defaultVal:"",validator:f.isString,transform:function(e){return y.sanitizeAndUnescape(e)}},snapshots:{count:{defaultVal:null,validator:f.isNumber},height:{defaultVal:null,validator:f.isNumber},width:{defaultVal:null,validator:f.isNumber},url:{defaultVal:null,validator:f.isString}},provider:{name:{defaultVal:"",validator:f.isString},providerId:{configName:"provider_id",defaultVal:null,validator:f.isString},providerVideoId:{configName:"provider_video_id",defaultVal:null,validator:f.isString},publisherId:{configName:"publisher_id",defaultVal:null,validator:f.isString},providerLogoUrl:{configName:"logourl",defaultVal:null,validator:f.isString}},provisioningSource:{configName:"provisioning_source",defaultVal:"",validator:f.isString},genres:{configName:"genre",defaultVal:[],transform:function(e){return f.isString(e)?e.split(","):null},validator:f.isArray},duration:{defaultVal:null,validator:f.isNumber},publishTime:{configName:"publish_time",defaultVal:null,validator:f.isString},credits:{mainArtists:{configName:"main_artists",defaultVal:[],transform:function(e){return f.isString(e)?e.split(/[,;]/):null},validator:f.isArray},label:{defaultVal:null,validator:f.isString}},images:{large:{defaultVal:null,validator:f.isString},medium:{defaultVal:null,validator:f.isString},small:{defaultVal:null,validator:f.isString},provider:{defaultVal:null,validator:f.isString},thumbnail:{defaultVal:null,validator:f.isString}},_thumbnail:{configName:"thumbnail",defaultVal:null,validator:f.isString},thumbnails:{configName:"thumbnails",defaultVal:[],validator:f.isArray},resized_thumbnails:{configName:"resized_thumbnails",defaultVal:[],validator:f.isArray},showName:{configName:"show_name",defaultVal:"",validator:f.isString},shareUrl:{configName:"url",defaultVal:"",overwrite:!1,validator:f.isString},embedCode:{configName:"embedCode",defaultVal:"",overwrite:!1,validator:f.isString},embedRights:{configName:"embed_rights",defaultVal:!1,validator:f.isBoolean},eventBeginTime:{configName:"event_start",defaultVal:null,validator:f.isNumber},eventEndTime:{configName:"event_stop",defaultVal:null,validator:f.isNumber},liveState:{configName:"live_state",defaultVal:null,validator:f.isString},ageGate:{configName:"age_gate",defaultVal:"",validator:f.isString},castable:{configName:"castable",defaultVal:!0,validator:f.isBoolean},liveMidrollsMaxDur:{configName:"midroll_adpod_dur",defaultVal:null,validator:f.isNumber},seriesInfo:{configName:"seriesInfo",defaultVal:{},type:{defaultVal:"",validator:f.isString}}};a.prototype.getRecoveryStatusForBeacon=function(){var e=this,t=e.recoveryStatus===m.RECOVERED;return t&&(e.recoveryStatus=m.NOT_RECOVERING),t},a.prototype.fetchFinished=function(){var e=this;return e.state===_.HAS_DATA||e.state===_.ERROR},a.prototype.isLongForm=function(){var e=this;return e.duration>600},a.prototype.fillFromRaw=function(e,t,n,r){var a=this;e.shareUrl&&(e.url=e.shareUrl),s(M,e,a,r);var o=e.meta||e;if(s(C,o,a,r),null===a.id&&(a.isCCM=!1,a.id=y.generateGuid()),null!==a.duration&&a.isLongForm()){if(null===a.progress.position){var l=y.localStorage.get(A);l&&l[a.id]?a.progress=l[a.id]:a.progress.position=0}a.restartIfNeeded()}a.thumbnails.forEach(function(e){e.hasOwnProperty("tag")&&e.tag===T.PLAYLIST_THUMB_DIMENSION&&(a.images.small=e.url)}),a.resized_thumbnails.forEach(function(e){e.hasOwnProperty("tag")&&e.tag===T.PLAYLIST_THUMB_DIMENSION&&(a.images.small=e.url)}),a.images.thumbnail=a.images.thumbnail||a._thumbnail,a.images.defaultThumbnail=a.images.large||a.images.thumbnail||a.images.medium||a.images.small||a.images.provider,a.fillStreamsFromRaw(e.streams,t,n,r),e.streamProfiles&&(a.streamProfiles=e.streamProfiles.map(function(e){return new i(e,r)})),a.isCCM?a.hasStreams()&&a.hasThumbnail()?a.state=_.HAS_DATA:a.hasStreams()&&a.state===_.FETCHING&&(a.state=_.HAS_DATA):a.hasStreams()?a.state=_.HAS_DATA:a.state=_.ERROR},a.prototype.restartIfNeeded=function(){var e=this;e.progress.position+S>e.duration&&(e.progress.position=0)},a.prototype.hasStreams=function(){var e=this;return 0!==e.streams.length},a.prototype.getCDN=function(){var e=this;return e.selectedStreams.length>0?e.selectedStreams[0].cdn:null},a.prototype.isLive=function(){var e,t=this;for(e=0;e<t.streams.length;e++)if(t.streams[e].live)return!0;if(t.liveState){var n=T.LIVE_STATES_FOR_VOD,r=Object.keys(n);for(e=0;e<r.length;e++)if(n[r[e]]===t.liveState)return!1;return!0}return!1},a.prototype.hasThumbnail=function(){var e=this;return!!e.images.defaultThumbnail},a.prototype.fillStreamsFromRaw=function(e,t,n,r){var a=this;if(e&&0===a.streams.length){var o=e.map(function(e){return new i(e,r)});if(o&&o.length>0&&o[0].live){var s=t.indexOf(E.HTML5_HLS),l=window.location.href.indexOf("enableHTML5HLS=true")>-1;-1===s||l||(t=t.slice(),t.splice(s,1))}if(o.length){for(var d=0;d<t.length;d++){var c=t[d],p=n[c],u=b.findAcceptedStreams(o,p);if(0!==u.length){a.rendererType=c,a.streams=u;break}}if(0===a.streams.length){var _=new Error("None of the streams is accepted. Possiblemismatch in accepted format or/and protocol.");g.error(_.message),r.push(_),a.status.code=h.SAPI_CODES.E_SAPI_INCOMPATIBLE_FORMAT,a.status.msg=_.message,"m3u8"===o[0].format&&o[0].live&&-1===t.indexOf("flash")&&(a.status.code=h.INFO_CODES.E_SAPI_UNSUPPORTED_LIVE_ON_HTML)}else a.streams.sort(function(e,t){return e.bitrate-t.bitrate})}else{var m=new Error("No streams returned");g.error(m.message),r.push(m),a.status.code=h.SAPI_CODES.E_SAPI_NO_STREAMS_RETURNED,a.status.msg=m.message}}},a.prototype.generateVSid=function(){for(var e=[],t="abcdefghijklmnopqrstuvwxyz123456789",n=0;8>n;n++)e.push(t.charAt(Math.floor(Math.random()*t.length)));var r=e.join("");return r},a.prototype.generateSamplingId=function(){return Math.floor(10*Math.random())},a.prototype.fillSelectedStreams=function(e,t){var n=this,r=e.map(function(e){return new i(e,t)});r.length&&(n.selectedStreams=r),n.selectedStreams&&n.selectedStreams.length>1&&n.selectedStreams.sort(function(e,t){return e.bitrate-t.bitrate})},a.prototype.hasDrmStreams=function(){for(var e=this,t=0;t<e.streams.length;t++)if(e.streams[t].isDrmProtected())return!0;return!1},a.prototype.getType=function(){var e=this;return e.hasStreams()?e.selectedStreams.length>0?e.selectedStreams[0].getType():e.streams[0].getType():"none"},a.prototype.getShowName=function(){var e=this;return e.showName},a.prototype.isOriginalShow=function(e){var t=this;return e||(e=t.getShowName()),e&&I[e]?!0:!1},a.prototype.isSeriesEpisode=function(){var e=this;return e.seriesInfo&&"episode"===e.seriesInfo.videoType?!0:!1},a.prototype.updateVideoSession=function(e){var t=this;t.isPrefetch=!1,e.streams&&e.streams.length>0?(t.videoSession=c(e.streams[0].path)+"_"+t.generateVSid(),t.isPrefetch=!0):e.algo||(t.videoSession=t.generateVSid()),t.samplingId=t.generateSamplingId(),u(e.streams,t.videoSession)},o.prototype.get=function(e){var t=this;return e?t._items[e]||null:null},o.prototype.getAll=function(){var e=this;return e._items},o.prototype.updateItemFromRaw=function(e,t,n,r){var i=this,o=i.get(e.id);return o||(o=new a,o.updateVideoSession(e)),o.fillFromRaw(e,t,n,r),i._items[o.id]=o,o},o.prototype.fillFromSapi=function(e,t,n,r){var i=this;if(f.isArray(e))return e.map(function(e){return i.updateItemFromRaw(e,t,n,r).id});var a=new Error("No SAPI data available");return r.push(a),[]},o.prototype.notifyFetchFinished=function(e,t){var n=this;e.forEach(function(e){var r=n.get(e);r.state!==_.HAS_DATA&&(r.state=_.ERROR,t&&(r.status.code=t))}),n._finishedListeners.forEach(function(t){t(e)})},o.prototype.registerFinished=function(e){var t=this,n=function(t){e.publish(v.METADATA_AVAILABLE,t)};return t._finishedListeners.push(n),function(){var e=t._finishedListeners.indexOf(n);-1!==e&&t._finishedListeners.splice(e,1)}};var N=["configName","defaultVal","validator","transform","overwrite"]},{"../../lib":"bRhrlU","../../lib/logger":"IS9j5T","../../lib/user-agent":"ty5FFo","./constants":17,"./error":20,"./event":"YJm+dH","./renderers/type":47,"./stream":"Af6MnA","./util":"jJTEqU"}],"./nextgen/src/metadata-fetcher.js":[function(e,t,n){t.exports=e("QCpdmG")},{}],QCpdmG:[function(e,t,n){function r(e,t,n){var r=this;r._model=e,r._eventBus=t,r._profiler=n,r._sapi=new s(r._model,t,n),r._prefetchEmitted=!1,r._unsubNotifyFinished=r._model.mediaStore.registerFinished(r._eventBus)}var i=e("./error"),a=e("./event"),o=e("./media-store"),s=e("./sapi"),l=e("./util"),d=e("../../lib"),c=e("../../lib/logger");t.exports=r,r.prototype._emitPrefetchAvailable=function(){var e=this,t=[],n=e._model.mediaStore.getAll();for(var r in n)if(n.hasOwnProperty(r)){var i=n[r];i.state===o.ItemState.HAS_DATA&&t.push(r)}t.length&&e._eventBus.publish(a.METADATA_AVAILABLE,t)},r.prototype.updateMetadata=function(e,t,n){var r=this;r._prefetchEmitted||(r._emitPrefetchAvailable(),r._prefetchEmitted=!0,r._profiler.setEndTime(a.Metrics.INIT_TO_SAPI));var i=[],s=r._model.mediaStore.getAll();for(var l in s)if(s.hasOwnProperty(l)){var d=s[l];(d.state===o.ItemState.NO_DATA||d.recoveryStatus===o.ItemRecoveryStatus.RECOVERING)&&(i.push(l),d.state=o.ItemState.FETCHING)}r._updateUUIDsFromSAPI(i,e,!1,t,n)},r.prototype._getMetaConfig=function(){var e=this;return{width:e._model.ui.thumbnailDimensions.width||e._model.uiState.width,height:e._model.ui.thumbnailDimensions.height||e._model.uiState.height,site:e._model.baseConfig.site,expb:e._model.baseConfig.experienceBucket,expn:e._model.baseConfig.experienceName,lang:e._model.baseConfig.lang,region:e._model.baseConfig.region,synd:e._model.baseConfig.syndication,pspid:e._model.CMS.suppressAdContext?"":e._model.baseConfig.pageSpaceId,acctid:e._model.YVAP.accountId,topic:e._model.YVAP.cTopic,plidl:e._model.CMS.suppressAdContext?"":e._model.YVAP.playContext,rt:e._model.rendererTypes,autoplay:e._model.playback.autoplay,showPlaylist:e._model.ui.playlistUI&&e._model.ui.playlistUI.show}},r.prototype.fetchPlaylist=function(e){var t=this;e=e||function(){};var n=t._getMetaConfig();n.uuid=t._model.playlist.id,t._profiler.add(a.Metrics.PLAYLIST_LOADED),t._sapi.loadPlaylist(n,t._model.capabilities,function(n,r){if(n)return void e(n);try{var o=r.query.results.mediaObj;t._profiler.setEndTime(a.Metrics.PLAYLIST_LOADED)}catch(n){var s=l.createErr("S",t._model.playbackState,i.E_PLAYER,i.PLAYER_CODES.E_PLAYER_CMS_RESPONSE);return t._eventBus.publish(a.ERROR,s),void e(s)}o&&(t._model.playlist.appendFromRaw(o,t._model.rendererTypes,t._model.capabilities,[]),t.updateMetadata(e,null,null))})},r.prototype._updateUUIDsFromSAPI=function(e,t,n,r,i){var o=this;t=t||function(){};var s=o._getMetaConfig();if(s.uuids=e,e.length>0){if(o._model.playlist){var l=o._model.playlist.getCurrentItem();l&&l.id===e[0]&&(s.ps=l.videoSession)}o._profiler.add(a.Metrics.SAPI_LOADCLIPS),o._sapi.loadClips(s,o._model.capabilities,function(a,s,l){t(o._onSAPI(a,s,e,n,l,r,i))},i)}else t(null)},r.prototype.refreshMetadata=function(e){var t=this;t._updateUUIDsFromSAPI(e,void 0,!0)},r.prototype._onSAPI=function(e,t,n,r,o,s,c){var p=this;s=d.isNullOrUndefined(s)?!1:s,c=d.isNullOrUndefined(c)?!1:c;var u=null;if(e){u=e;var _,m=s?a.WARNING:a.ERROR,v=s?i.E_WARNING:i.E_PLAYER;_=e.message===l.JSONP_ERROR?s?i.PLAYER_CODES.E_PLAYER_CMS_JSONP_REQUEST_FAILURE_SILENT_FAIL:i.PLAYER_CODES.E_PLAYER_CMS_JSONP_REQUEST_FAILURE:e.message===l.JSONP_TIMED_OUT?s?i.PLAYER_CODES.E_PLAYER_CMS_JSONP_REQUEST_TIMEOUT_SILENT_FAIL:i.PLAYER_CODES.E_PLAYER_CMS_JSONP_REQUEST_TIMEOUT:e.subcategory,u=l.createErr("S",p._model.playbackState,v,_,null,o+"; "+u.debugMessage,c),p._eventBus.publish(m,u)}else{var y;try{y=t.query.results.mediaObj,p._profiler.setEndTime(a.Metrics.SAPI_LOADCLIPS)}catch(e){u=l.createErr("S",p._model.playbackState,i.E_PLAYER,i.PLAYER_CODES.E_PLAYER_CMS_RESPONSE),p._eventBus.publish(a.ERROR,u)}if(!u){var f=[];p._model.mediaStore.fillFromSapi(y,p._model.rendererTypes,p._model.capabilities,f),f.length}p._model.CMS.colo=t.query?t.query.results.colo:"none",r?p._eventBus.publish(a.REFRESH_METADATA_AVAILABLE,n):p._model.mediaStore.notifyFetchFinished(n,u?u.subcategory:null)}return u},r.prototype.fillFromER=function(e){var t=this,n=e.query.results.mediaObj,r=[];t._model.mediaStore.fillFromSapi(n,t._model.rendererTypes,t._model.capabilities,r),r.length,t._model.CMS.colo=e.query?e.query.results.colo:"none"},r.prototype.prefetch=function(e,t){for(var n=this,r=!0,i=0,o=e.length;o>i;i++){var s=n._model.mediaStore.get(e[i]);if(!s||"has-data"!==s.state){r=!1;break}}return r?void n._eventBus.publish(a.API.METADATA_READY,e):(e.forEach(function(e){n._model.mediaStore.updateItemFromRaw({id:e})}),void n.updateMetadata(function(){},t,!0))},r.prototype.updateUserPreferences=function(e){var t=this;t._sapi.updateUserPreferences(function(){},e)},r.prototype.getUserPreferences=function(){var e=this;if(e._model.userPreferences.isAuthenticated){if(e._model.userPreferences.closedCaptions.isAvailable&&!d.isNullOrUndefined(e._model.userPreferences.isAdult))return;var t=l.getSingleton("userPrefs");if(!d.isNullOrUndefined(t))return void e._updateUserPreferencesData(t);e._profiler.add(a.Metrics.GET_USER_PREFS),e._sapi.getUserPreferences(function(t,n){return t?void c.error("User preferences failed on SAPI call.",t):void(n.userprefs&&(e._profiler.setEndTime(a.Metrics.GET_USER_PREFS),e._updateUserPreferencesData(n.userprefs,!0)))})}},r.prototype._updateUserPreferencesData=function(e){var t=this,n=e[0]?e[0].closedcaptionprefs:null;if(t._model.userPreferences.isAdult=e[1]?e[1].isAdult:null,!n&&"Invalid_GUID"===e[0].err)return t._model.userPreferences.isAuthenticated=!1,void t._eventBus.publish(a.USER_AUTHENTICATED);if(t._model.userPreferences.isAuthenticated=!0,t._eventBus.publish(a.USER_AUTHENTICATED),n&&!n.err){var r;e[0].closedcaptionprefs.show=t._model.userPreferences.closedCaptions.show,o.fillFromConfig(t._model.getModelSchema().userPreferences.closedCaptions,e[0],t._model.userPreferences.closedCaptions,r),r||(t._model.userPreferences.closedCaptions.isAvailable=!0,t._eventBus.publish(a.CC.USER_STYLE_PREFERENCES_CHANGE),l.setSingleton("userPrefs",e))}},r.prototype.getRelatedVideosChannel=function(e,t,n){var r=this;n=n||function(){},r._sapi.loadRelatedVideosChannel({count:t.count||12,start:t.start||0,region:r._model.baseConfig.region,site:r._model.baseConfig.site,lang:r._model.baseConfig.lang,expn:r._model.baseConfig.experienceName,videoUuid:t.videoUuid,playlistId:t.playlistId||"",playlistAlias:t.playlistAlias||""},function(e,t){if(e)return void n(e);var i;try{if(i=t.channel.result[0].videos,d.isNullOrUndefined(i))return void n(null);i.forEach(function(e){e.credits&&!e.credits.mainArtists&&delete e.credits})}catch(e){return void n(e)}var a=[],o=r._model.mediaStore.fillFromSapi(i,r._model.rendererTypes,r._model.capabilities,a);r.updateMetadata(function(e){e?n(e):n(null,o)})})},r.prototype.destroy=function(){var e=this;e._unsubNotifyFinished(),e._sapi.cancelAll()}},{"../../lib":"bRhrlU","../../lib/logger":"IS9j5T","./error":20,"./event":"YJm+dH","./media-store":26,"./sapi":49,"./util":"jJTEqU"}],29:[function(e,t,n){"use strict";function r(e){var t=this,n=("https:"===document.location.protocol?"https://sb":"http://b")+".scorecardresearch.com/p",r={rn:e.randomVal,C4:e.comscoreC4,C5:e.comscoreC5,C6:e.comscoreC6,C1:function(){return"1"},C2:function(){return"7241469"},cv:function(){return"2.0"}};t.sendOpts={baseUrl:n,target:"cs",paramGetters:r,beginningKeys:["C1","C2","C4","C5","C6","cv","rn"]},t.beaconMappings={PLAYBACK_START:{keys:[],data:{}},AD_START:{keys:[],data:{C5:"09"}}}}t.exports=r},{}],30:[function(e,t,n){"use strict";function r(e,t,n){var r=this;r._model=e,r._eventBus=t,r._commonFields=n;var a=e.metrics.skipComscore;if(r._streamSenseTag=a?function(){}:null,r._comscoreBeaconQueue=[],r._comscorePersistentLabels={},r._eventBus.subscribe(o.MEDIA_ITEM_LOADED,r._onMediaItemChanged,r),r._eventBus.subscribe(o.PLAYBACK_ENDED,r._onPlaybackComplete,r),r._eventBus.subscribe(o.Video.SEEKING,r._onPlaybackSeeking,r),r._eventBus.subscribe(o.Video.SEEKED,r._onPlaybackSeeked,r),r._eventBus.subscribe(o.Video.PAUSE,r._onPlaybackPaused,r),r._eventBus.subscribe(o.PLAYBACK_RESUMED,r._onPlaybackResumed,r),r._eventBus.subscribe(o.Video.WAITING,r._onWaiting,r),r._eventBus.subscribe(o.PLAYBACK_STARTED,r.setVideoClipLabels,r),r._eventBus.subscribe(o.Video.PLAYING,r._onPlaying,r),r._eventBus.subscribe(o.CONTROLS_SET_VOLUME,r._onVolumeChanged,r),r._eventBus.subscribe(o.AD_PLAYBACK_ENDED,r._onAdPlaybackComplete,r),r._eventBus.subscribe(o.AD_PLAYBACK_STARTED,r.setAdClipLabels,r),r._eventBus.subscribe(o.AD_PLAYBACK_PAUSED,r._onAdPaused,r),r._eventBus.subscribe(o.AD_PLAYBACK_RESUMED,r._onAdResumed,r),!a&&!p.tv){var l=i.getAssetUrl(e.isLocal(),e.version,s);window.ns_&&window.ns_.StreamSense?r._createStreamingTag():i.lazyLoad(l,d,function(e){e||r._createStreamingTag()},a)}}t.exports=r;var i=e("../util"),a=e("../../../lib"),o=(e("../../../lib/logger"),e("../event")),s="streamsense.min.js",l="scorecardresearch.com/p?c1=2&c2=7241469",d=1e4,c=e("./metrics-constants"),p=e("../../../lib/user-agent");e("../renderers/type");r.prototype._createStreamingTag=function(){var e=this,t=("https:"===document.location.protocol?"https://sb.":"http://b.")+l;e._streamSenseTag=new window.ns_.StreamSense({},t),e._eventMap={play:window.ns_.StreamSense.PlayerEvents.PLAY,pause:window.ns_.StreamSense.PlayerEvents.PAUSE,buffer:window.ns_.StreamSense.PlayerEvents.BUFFER,end:window.ns_.StreamSense.PlayerEvents.END}},r.prototype._onMediaItemChanged=function(){var e=this,t=e._commonFields;e._currentIndex=0,e._contentIndex=null,e._partNumber=0;var n;switch(t.location()){case"3":n="Emb onNet";break;case"4":n="Emb offNet";break;default:n="onProp"}e.setComscorePersistentLabels(e._commonFields),e.addToComscoreQueue(function(){e.setPlaylist({y_lms:t.licenseId(),c6:t.comscoreC6(),y_sp:t.streamProtocol(),y_stype:t.streamType(),ns_st_pl:t.videoTitle(),ns_st_cs:t.dimensions(),y_st:t.site(),y_rg:t.region(),y_lc:n,y_pb:c.STRING_DEFAULT})})},r.prototype._onPlaybackSeeking=function(e){var t=this,n=e>0?e:t._commonFields.playbackPosition();t.addToComscoreQueue(function(){t.notifyState("pause",{ns_st_ui:"seeking"},(1e3*n).toString())})},r.prototype._onPlaybackSeeked=function(e){var t=this;t.addToComscoreQueue(function(){t.notifyState("play",{ns_st_ui:"seeking"},(1e3*e).toString())})},r.prototype._onWaiting=function(e){var t=this;if(!e||!e.ignoreBuffering&&e.value){var n=t._commonFields.playbackPosition();t.addToComscoreQueue(function(){t.notifyState("buffer",{},(1e3*n).toString())}),t._bufferingStart=!0}},r.prototype._onPlaying=function(){var e=this,t=e._commonFields.playbackPosition();e._bufferingStart&&(e.addToComscoreQueue(function(){e.notifyState("play",{},(1e3*t).toString())}),e._bufferingStart=!1)},r.prototype._onPlaybackComplete=function(e,t){var n=this,r=n._commonFields.playbackPosition(),i=n._model.playback.bitrate,a={ns_st_br:i.toString()};t&&(a.ns_st_pe="1"),n.addToComscoreQueue(function(){n.notifyState("end",a,(1e3*r).toString())})},r.prototype._onPlaybackPaused=function(){var e=this,t=e._commonFields.playbackPosition();e.addToComscoreQueue(function(){e.notifyState("pause",{},(1e3*t).toString())})},r.prototype._onPlaybackResumed=function(){var e=this,t=e._commonFields.playbackPosition();e.addToComscoreQueue(function(){e.notifyState("play",{},(1e3*t).toString())})},r.prototype._onAdPaused=function(){var e=this,t=e._commonFields.playbackPosition();e.addToComscoreQueue(function(){e.notifyState("pause",{},(1e3*t).toString())})},r.prototype._onVolumeChanged=function(e){var t=this;t.addToComscoreQueue(function(){t.updateClipAttrs({ns_st_vo:Math.round(100*e)})})},r.prototype._onAdResumed=function(){var e=this,t=e._commonFields.playbackPosition();e.addToComscoreQueue(function(){e.notifyState("play",{},(1e3*t).toString())})},r.prototype._onAdOrContentStarted=function(){var e=this,t=e._commonFields.playbackPosition();e.addToComscoreQueue(function(){var n=e._model.playback.bitrate,r={};0!==n&&(n=n.toString(),r.ns_st_br=n),e.notifyState("play",r,(1e3*t).toString())})},r.prototype._onAdPlaybackComplete=function(){var e=this,t=e._commonFields.adPlaybackPosition();e.addToComscoreQueue(function(){e.notifyState("end",{},(1e3*t).toString())})},r.prototype.setComscorePersistentLabels=function(){var e=this,t=e._commonFields,n=e._comscorePersistentLabels,r=t.rendererType();n.ns_site="yahoo-video","dash"===r?n.ns_st_mp="dash":"html"===r?n.ns_st_mp="h":n.ns_st_mp="f",n.ns_st_mv=t.playerVersion(),n.cA1=t.comscoreCA1(),n.cA2=t.comscoreCA2(),n.cA4=t.comscoreC4(),n.cA6=t.comscoreC6(),n.c3="*null",n.c4=t.comscoreC4(),n.c7=t.pageUrl(),n.c9=t.pageReferrer(),e.addToComscoreQueue(function(){e.setPersistentLabels(n)})},r.prototype.setVideoClipLabels=function(){var e=this,t=e._commonFields,n="true"===t.autoplay()?"1":"0";a.isNullOrUndefined(e._contentIndex)&&(e._currentIndex++,e._contentIndex=e._currentIndex);var r={c5:t.comscoreC5(),cA5:t.comscoreC5(),ns_st_pr:t.videoTitle(),ns_st_ep:t.videoShowName(),ns_st_ge:t.genre(),ns_st_cu:t.pageUrl(),ns_st_vo:Math.round(t.volumeLevel()),ns_st_ty:t.contentType(),ns_st_cn:e._contentIndex,ns_st_ci:t.videoId(),y_pid:t.providerId(),y_lbl:t.label(),ns_st_pn:++e._partNumber,y_art:t.mainArtist(),y_pvid:t.providerVideoId(),y_s:t.pageSpaceId(),y_c:t.cdn(),y_ap:n},i=t.videoLength(),o="vc11";if("na"!==i&&i>600&&(o="vc12"),t.isLive()){var s=t.eventBegin(),l=t.eventEnd();i=""!==s&&""!==l?l-s:null,r.ns_st_li="1",o="vc23"}r.ns_st_ct=o,r.ns_st_cl=i&&"na"!==i?(1e3*i).toString():c.INT_DEFAULT;var d=e._model.playbackState.looped;e.addToComscoreQueue(function(){d?e.setClip(r,!0):e.setClip(r)}),e._onAdOrContentStarted()},r.prototype.setAdClipLabels=function(){var e=this,t=e._commonFields,n="true"===t.autoplay()?"1":"0",r="va11",i=t.adId()||c.INT_DEFAULT,a=t.adPosition(),o=t.adDuration();t.isLive()?r="va21":"postroll"===a?r="va13":"midroll"===a&&(r="va12");var s={c5:t.comscoreC5ForAd(),cA5:t.comscoreCA5ForAd(),ns_st_ty:t.contentType(),ns_st_ct:r,ns_st_ad:"1",ns_st_pr:"ad",ns_st_ep:"ad",ns_st_cu:c.STRING_DEFAULT,ns_st_vo:Math.round(t.volumeLevel()),ns_st_cn:++e._currentIndex,ns_st_ci:i,ns_st_cl:o?(1e3*o).toString():c.STRING_DEFAULT,ns_st_pn:"1",y_pid:t.providerId(),y_lbl:t.label(),y_art:t.mainArtist(),y_pvid:t.providerVideoId(),y_s:t.pageSpaceId(),y_ap:n};e.addToComscoreQueue(function(){e.setClip(s)}),e._onAdOrContentStarted();
},r.prototype.setPersistentLabels=function(e){var t=this;t._streamSenseTag.setLabels(e)},r.prototype.setPlaylist=function(e){var t=this;t._streamSenseTag.setPlaylist(e)},r.prototype.setClip=function(e){var t=this;t._streamSenseTag.setClip(e)},r.prototype.notifyState=function(e,t,n){var r=this;r._streamSenseTag.notify(r._eventMap[e],t,n)},r.prototype.updateClipAttrs=function(e){var t=this,n=t._streamSenseTag.getClip();n&&n.setLabels(e)},r.prototype._fireComscoreBeacons=function(){var e=this,t=e._comscoreBeaconQueue;t.forEach(function(e){e()}),e._comscoreBeaconQueue=[]},r.prototype.addToComscoreQueue=function(e){var t=this,n=t._comscoreBeaconQueue;n.push(e),t._streamSenseTag&&t._fireComscoreBeacons()}},{"../../../lib":"bRhrlU","../../../lib/logger":"IS9j5T","../../../lib/user-agent":"ty5FFo","../event":"YJm+dH","../renderers/type":47,"../util":"jJTEqU","./metrics-constants":33}],31:[function(e,t,n){"use strict";function r(e){var t=this,n=e.mmActivityId(),r=["rnd"],i={rnd:e.randomVal},a={baseUrl:n,keys:[],data:{}};t.sendOpts={baseUrl:n,target:"marketingpixel",paramGetters:i,beginningKeys:r,iFrameBeacon:!0},t.beaconMappings={PLAYBACK_START:a}}var i=e("../../../lib");t.exports=r,r.prototype.shouldFire=function(e){var t=this,n=i.isNullOrUndefined(e.metrics.mmActivityId)?"":e.metrics.mmActivityId.toString();return""!==n&&t.isValidUrl(n)?(t.sendOpts.baseUrl=n,!0):!1},r.prototype.isValidUrl=function(e){return e.match(/^https:\/\/[a-z0-9-\.]+\.[a-z]{2,4}\/?([^\s<>\#%"\,\{\}\\|\\\^\[\]`]+)?$/)}},{"../../../lib":"bRhrlU"}],32:[function(e,t,n){"use strict";function r(e,t,n){var r=this;r._model=e,r._eventBus=t,r._commonFields=n;var l=e.metrics.skipComscore;r._streamTag=l?function(){}:null;var d=i.getAssetUrl(e.isLocal(),e.version,o);r._mediaMetrieQueue=[],r._position=0,r._eventBus.subscribe(a.PLAYBACK_STARTED,r._setVideoLabels,r),r._eventBus.subscribe(a.Video.TIMEUPDATE,r._onPlaybackProgress,r),r._eventBus.subscribe(a.API.PLAYLIST_COMPLETE,r._onPlaybackComplete,r),r._eventBus.subscribe(a.API.PLAYLIST_POSITION_CHANGE,r._onPlaybackComplete,r),r._eventBus.subscribe(a.Video.PAUSE,r._onPlaybackPaused,r),r._eventBus.subscribe(a.PLAYBACK_RESUMED,r._onPlaybackResumed,r),r._eventBus.subscribe(a.Video.SEEKING,r._onPlaybackSeeking,r),r._eventBus.subscribe(a.Video.SEEKED,r._onPlaybackSeeked,r),r._eventBus.subscribe(a.MEDIA_ITEM_LOADED,r._onMediaItemLoaded,r),l||(window.eStatTag?r._mediaMetrieJSLoaded=!0:i.lazyLoad(d,s,function(e){e||(r._mediaMetrieJSLoaded=!0)},l))}t.exports=r;var i=e("../util"),a=(e("../../../lib/logger"),e("../event")),o="mu-yahoo-integration-5.1.js",s=1e4,l=e("./metrics-constants"),d=220020212974;r.prototype._onMediaItemLoaded=function(){var e=this;e._mediaMetrieJSLoaded&&e._createTags()},r.prototype._createTags=function(){var e=this;e._streamTag&&(e._streamTag=null,e.confStreamingAnalyticsMediametrie=null),e.confStreamingAnalyticsMediametrie={serial:e._getSerial(),measure:"streaming",levels:{level_1:"",level_2:"",level_3:"",level_4:"",level_5:""},streaming:{diffusion:"replay",callbackPosition:function(){return e._position},playerObj:e._model.guid,streamDuration:"",playerName:"yahoo video player",playerVersion:e._model.version,streamName:"",streamURL:"",streamGenre:""}},e._mediaMetrieJSLoaded&&(e._streamTag=new window.eStatTag(e.confStreamingAnalyticsMediametrie))},r.prototype._getSerial=function(){var e=this,t=e._model.playlist.getCurrentItem(),n=t&&t.metrics.mediametrie;return n?n:d},r.prototype._setVideoLabels=function(){var e=this,t=e._commonFields;e.addToMediaMetrieQueue(function(){var n=e.confStreamingAnalyticsMediametrie;if(n){n.serial=e._getSerial(),n.levels.level_1=t.site(),n.levels.level_2=t.providerId(),n.levels.level_3=t.licenseId(),n.levels.level_4=t.mediaMetaTags(),t.isLive()&&(n.levels.diffusion="live");var r=t.videoLength();n.streaming.streamDuration=r&&"na"!==r?r.toString():l.INT_DEFAULT,n.streaming.streamName=t.videoTitle(),n.streaming.streamGenre=t.genre(),n.streaming.streamURL=t.pageUrl(),e.setLabels(n)}});var n=t.playbackPosition();e.addToMediaMetrieQueue(function(){e.notifyState("play",n.toString())})},r.prototype._onPlaybackProgress=function(e){var t=this,n=t._commonFields;t._position=parseInt(e),t.addToMediaMetrieQueue(function(){var e=t.confStreamingAnalyticsMediametrie;e&&n.isLive()&&(e.levels.diffusion="timeshifting",t.setLabels(e))})},r.prototype._onPlaybackComplete=function(){var e=this,t=e._commonFields,n=t.playbackPosition();e.addToMediaMetrieQueue(function(){e.notifyState("stop",n.toString())})},r.prototype._onPlaybackPaused=function(){var e=this,t=e._commonFields,n=t.playbackPosition();e.addToMediaMetrieQueue(function(){e.notifyState("pause",n.toString())})},r.prototype._onPlaybackResumed=function(){var e=this,t=e._commonFields,n=t.playbackPosition();e.addToMediaMetrieQueue(function(){e.notifyState("play",n.toString())})},r.prototype._onPlaybackSeeking=function(e){var t=this,n=t._commonFields,r=n.playbackPosition();t.addToMediaMetrieQueue(function(){t.notifyState("pause",r.toString())})},r.prototype._onPlaybackSeeked=function(e){var t=this;t._model.playbackState.paused||t.addToMediaMetrieQueue(function(){t.notifyState("play",e.toString())})},r.prototype.setLabels=function(e){var t=this;t._streamTag.set(e)},r.prototype.notifyState=function(e,t){var n=this;n._position=parseInt(t),n._streamTag.notifyPlayer(e,n._position)},r.prototype._fireMediaMetrieBeacons=function(){var e=this;e._mediaMetrieQueue.forEach(function(e){e()}),e._mediaMetrieQueue=[]},r.prototype.addToMediaMetrieQueue=function(e){var t=this,n=t._mediaMetrieQueue;n.push(e),t._streamTag&&t._fireMediaMetrieBeacons()}},{"../../../lib/logger":"IS9j5T","../event":"YJm+dH","../util":"jJTEqU","./metrics-constants":33}],33:[function(e,t,n){"use strict";t.exports={PROGRESS_INTERVAL:10,TRUE_STREAMS_INTERVAL:3,QUARTILE_PROGRESS_INTERVAL:25,BEACON_HIDE_VALUE:{},BEACON_HIDE_KEY_VALUE:{},STRING_DEFAULT:"none",INT_DEFAULT:"",CLICK:"click",AUTOPLAY:"autoplay",API:"api",CONTINUOUS:"continuous",HOVER:"hover",SCROLL:"scroll",PLAYBACK_PROGRESS_MODE_CLASSIC:{fixed:[3],recurring:10,playerUnload:!1,playPause:!1,firingCriteria:"FREQ_MODE_CLASSIC"},PLAYBACK_PROGRESS_MODE_STANDARD:{fixed:[3,10],recurring:30,playerUnload:!0,playPause:!0,firingCriteria:"FREQ_MODE_STANDARD"},BEACON_DISASTER_MODE:{global:0,PLAYBACK_START:1,PLAYER_ERROR:.05},SEG_INFO_LENGTH:6}},{}],34:[function(e,t,n){"use strict";function r(e,t,n,r){var a=this;a._model=e,a._eventBus=t,a._profiler=n,a._rapid=r?r.rapid:null,a._rapidClickParams=r?r.clickParams:null,a._rapidUUIDMap={},a._eventBus.subscribe(_.VIDEO_REQUEST,a._onVideoRequest,a),a._eventBus.subscribe(_.START_SCREEN_RENDERED,a._onStartScreenRendered,a),a._eventBus.subscribe(_.HLS_FIRST_TS_LOAD_START,a._onContentFirstTSLoadStart,a),a._eventBus.subscribe(_.HLS_FIRST_TS_FIRST_BYTE_ARRIVE,a._onContentFirstTSFirstByteArrive,a),a._eventBus.subscribe(_.PLAYBACK_STARTED,a._onContentStarted,a),a._eventBus.subscribe(_.PLAYBACK_REQUEST,a._onPlaybackRequested,a),a._eventBus.subscribe(_.PLAYBACK_RESUMED,a._onPlaybackResumed,a),a._eventBus.subscribe(_.PLAYBACK_STALLED,a._onPlaybackStalled,a),a._eventBus.subscribe(_.API.UI_INTERACT,a._onUIInteraction,a),a._eventBus.subscribe(_.VIDEO_APPS_LOADED,a._onVideoAppsLoaded,a),a._eventBus.subscribe(_.API.BITRATE_CHANGE,a._onBitrateChange,a),a._eventBus.subscribe(_.API_CALLED,a._onApiCalled,a),a._eventBus.subscribe(_.FEEDBACK_INFO,a._onFeedbackCalled,a),a._eventBus.subscribe(_.RECOVERY_METADATA_READY,a._onRecoveryMetadata,a),a._eventBus.subscribe(_.ABR_DATA_UPDATE,a._onABRDataUpdate,a),a._eventBus.subscribe(_.CTRL_PLAYPAUSE,a._onCtrlPlayPause,a),a._eventBus.subscribe(_.CTRL_SEEK,a._onSeek,a),a._eventBus.subscribe(_.CTRL_VOLUME,a._onVolume,a),a._eventBus.subscribe(_.FULLSCREEN_CHANGE,a._onFullscreen,a),a._eventBus.subscribe(_.CTRL_SETTINGS,a._onSettings,a),a._eventBus.subscribe(_.CTRL_PLAYREQUEST,a._onCtrlPlayRequest,a),a._eventBus.subscribe(_.CC.UI_TOGGLE,a._onCCTog,a),a._eventBus.subscribe(_.CC.LANGUAGE_CHANGE,a._onCCLang,a),a._eventBus.subscribe(_.CC.UPDATE_STYLE,a._onCCStyle,a),a._eventBus.subscribe(_.CC.SETTINGS,a._onCCSettings,a),a._eventBus.subscribe(_.CTRL_AGEGATE_BDAY,a._onAgeBday,a),a._eventBus.subscribe(_.CTRL_SHARE,a._onShare,a),a._eventBus.subscribe(_.CTRL_REPLAY,a._onReplay,a),a._eventBus.subscribe(_.QUALITY_SELECTED,a._onQualitySelected,a),a._eventBus.subscribe(_.WL_CHANGE_REQUEST,a._onWatchLaterUpdate,a),a._eventBus.subscribe(_.CTRL_TIMER,a._onTimerUpdate,a),a._eventBus.subscribe(_.UI_LOGIN,a._onUILogin,a),a._eventBus.subscribe(_.CTRL_ENDSCREEN_VID,a._onSelectedEndscreenVideo,a),a._eventBus.subscribe(_.API.PLAYER_MUTE_CHANGE,a._onMuteChange,a),a._eventBus.subscribe(_.Video.TIMEUPDATE,a._onPlaybackProgress,a),a._eventBus.subscribe(_.PLAYBACK_ENDED,a._onPlaybackComplete,a),a._eventBus.subscribe(_.Video.PAUSE,a._onPlaybackPaused,a),a._eventBus.subscribe(_.Video.SEEKING,a._onPlaybackSeeking,a),a._eventBus.subscribe(_.Video.SEEKED,a._onPlaybackSeeked,a),a._eventBus.subscribe(_.Video.WAITING,a._onWaiting,a),a._eventBus.subscribe(_.AD_METRICS,a._onAdMetrics,a),a._eventBus.subscribe(_.AD_PLAYBACK_STARTED,a._onAdPlaybackStarted,a),a._eventBus.subscribe(_.AD_PLAYBACK_PROGRESS,a._onAdPlaybackProgress,a),a._eventBus.subscribe(_.AD_PLAYBACK_ENDED,a._onAdPlaybackComplete,a),a._eventBus.subscribe(_.AD_PLAYBACK_ERROR,a._onAdError,a),a._eventBus.subscribe(_.AD_BREAK_INFO,a._onAdBreakInfo,a),a._eventBus.subscribe(_.AD_BREAK_ENDED,a._onAdBreakEnd,a),a._eventBus.subscribe(_.Ad.BREAK_CANCELLED,a._onAdBreakCancelled,a),a._eventBus.subscribe(_.YVAP_MIDROLL_CACHE_UPDATE,a._onMidrollCacheUpdated,a),a._eventBus.subscribe(_.RENDERER_PLUGIN_LOADED,a._onRendererPluginLoaded,a),a._eventBus.subscribe(_.RENDERER_PLUGIN_LOAD_FAILED,a._onRendererPluginLoadFailed,a),a._eventBus.subscribe(_.RENDERER_PLUGIN_LOAD_TIMED_OUT,a._onRendererPluginLoadTimedOut,a),v.getWindow().addEventListener("unload",a._onWindowUnload.bind(a)),a._rendererPluginLoadStatus=0,a._rootElem=null,a._renderer=null,a._eventBus.subscribe(_.ERROR,a._onError,a),a._eventBus.subscribe(_.WARNING,a._onWarning,a),a._eventBus.subscribe(_.INFO,a._onInfo,a),a._eventBus.subscribe(_.API.PLAYBACK_TIMEOUT,a._onWarning,a),a.debugSt="",a._playEventFired=!1,a._commonFields=a._getCommonFieldsTable(),a._continuousPlayCount=0,a._guid=a._model.guid,a._trueStreamsProgressFired=!1,a._trueStreamsAdProgressFired=!1,a._totalWatchedPlaybackTime=0,a._totalBufferingTime=0,a._segInfo=[],a._buffTimeTrueStream=0,a._buffTimeDiff=0,a._segmentwiseBuffTime=0,a._progressBeaconDistance=0,a._recoveredPlayback=!1,a._jsDownloadTime,a._systems=[],a._beaconDisasterMode=a._model.failOver&&a._model.failOver.beaconDisasterMode||!1,a._progressBeaconMode=S.PLAYBACK_PROGRESS_MODE_STANDARD,a._model.metrics.progressBeaconStrategy&&(a._progressBeaconMode=a._model.metrics.progressBeaconStrategy,a._progressBeaconMode.firingCriteria="FREQ_MODE_CONFIG"),a._warningCount=0,a._warningErrorFiredMap={},a._criticalErrorFiredMap={},a._guidMap={},a._videoQuartile=0,a._adQuartile=0,Math.random()<=a._model.metrics.ultSamplingRate&&a._systems.push(new g(e,a._commonFields)),"vidible"===a._model.baseConfig.syndication&&a._systems.push(new b(a._commonFields)),a._systems.push(new E(a._commonFields)),a._systems.push(new h(a._commonFields)),a._templateMetrics=new i(e,a._commonFields),a._comscoreMetrics=new T(e,a._eventBus,a._commonFields),"FR"===a._model.baseConfig.region.toUpperCase()&&(a._mediaMetrie=new A(e,a._eventBus,a._commonFields)),a._sendPageView(),a._sendPlayerLoaded()}function i(e,t){var n=this;n._model=e,n._paramGetters={RANDOM_VALUE:t.randomVal,PLAYLIST_INDEX:t.playlistPosition,VOLUME_LEVEL:t.volumeLevel,DEVICE_NAME:t.deviceName,MAKE:t.deviceMake,MODEL:t.deviceModel,OS:t.deviceOS,AD_ID:t.adId,AD_LOADED:function(){return t.adLoaded()?"yes":"no"},AD_TYPE:t.adType,EVT_NAME:function(e){switch(e){case"PLAYBACK_START":case"AD_START":return"play";case"PLAYBACK_PAUSE":return"pause";case"PLAYBACK_COMPLETE":case"AD_COMPLETE":return"end";default:return"unknown"}}}}function a(e,t){return v.strSubstitute(e,function(e){var n=t(e);return null!==n?n:(f.error("Metrics: unknown substitution key: "+e),"")})}function o(e,t,n,r,i){var a=n.beginningKeys||[],o=n.endKeys||[],l=n.paramGetters,d=[].concat(a,e,o),c=d.filter(function(e,t){return d.indexOf(e)===t}),p=[];c.forEach(function(e){var n;if(n=e in t?t[e]:e in l?l[e]():null,y.isNullOrUndefined(n)&&(n=S.BEACON_HIDE_KEY_VALUE),n===S.BEACON_HIDE_VALUE&&(n=null),n!==S.BEACON_HIDE_KEY_VALUE){var r={};r[e]=n,p.push(r)}});var u=n.baseUrl+"?"+v.querystring(p,"&","=",s);return r&&(u+=r),n.iFrameBeacon?v.sendIframeBeacon(u):n.unloadBeacon?v.sendUnloadBeacon(u):(v.sendImageBeacon(u),void i.publish(_.API.BEACON_SEND,{url:u,date:new Date}))}function s(e){return encodeURIComponent(e).replace(/[!'()]/g,escape).replace(/\*/g,"%2A")}function l(e){return y.isBoolean(e)&&(e=e?"1":"0"),y.isArray(e)&&(e=e.toString()),e&&""!==e?e:S.STRING_DEFAULT}function d(){try{return window.top.document}catch(e){return null}}function c(e){if(window.performance&&window.performance.getEntriesByType){var t,n=window.performance.getEntriesByType("resource");for(t in n)if(n[t].name.match(e))return n[t].duration}return null}function p(e){return e=u(e),e?e.split("?")[0]:""}function u(e){return e?e.replace(/(_ylt(.)+(\?)|_ylt(.)+)/,"?"):e}t.exports={Metrics:r};var _=e("../event"),m=e("../../../lib/user-agent"),v=e("../util"),y=e("../../../lib"),f=e("../../../lib/logger"),g=e("./ult-metrics"),b=e("./vidible-metrics"),h=(e("./sizmek-metrics"),e("./marketingpx-metrics")),E=e("./comscore-metrics"),T=e("./comscore"),A=e("./media-metrie"),S=e("./metrics-constants"),I=e("../error"),L=e("../media-store"),M=e("../renderers/type"),C=4,N=1e3,D={801:1};r.prototype._createClipGuid=function(e){var t=this,n=Math.floor(4294967295*Math.random());return e&&!t._guidMap[e.id]&&(t._guidMap[e.id]=n),n},r.prototype._getCommonFieldsTable=function(){var e=this,t=e._model,n=function(){return t.playlist.getCurrentItem()},r=function(t){var n=e._profiler.getItem(t);return n&&!y.isNullOrUndefined(n.timeDiff)?n.timeDiff:S.INT_DEFAULT},i=function(t){var n=e._profiler.getItem(t);return n&&!y.isNullOrUndefined(n.startTime)?n.startTime+e._profiler.startTime:S.INT_DEFAULT},a=function(e,t){var r,i=n(),a=i?i.metrics.beacons:null;if(a){var o=a[e]&&a[e][0]||{};if("cs"===o.target&&o.addParam){var s=o.addParam.split("&");s.forEach(function(e){-1!==e.indexOf(t)&&(r=e.split("=")[1])})}}return r||S.INT_DEFAULT},o={yvapID:function(){return e._model.YVAP&&e._model.YVAP.accountId?e._model.YVAP.accountId:""},currVolume:function(){return e._model.playbackState.volume},tsapic:function(){var t=e._profiler.getItem(_.Metrics.SAPI_REQUEST);return t&&t.timeDiff&&0!==t.timeDiff?t.timeDiff:""},sapiColo:function(){return e._model.CMS.colo||""},cachedVs:function(){return e._model.CMS.cachedVs||""},flashVersion:function(){var t="na";return e._renderer&&e._model.playbackState.rendererType===M.FLASH&&(t=e._renderer.getFlashVersion(),t&&t.join(".")),t},site:function(){var e=t.baseConfig.siteAnalytics.toLowerCase();return l(e?e.toLowerCase():t.baseConfig.site.toLowerCase())},region:function(){return l(t.baseConfig.region.toLowerCase())},autoplay:function(){return t.playback.autoplay?"true":"false"},dimensions:function(){return t.uiState.width+"x"+t.uiState.height},videoSeqNum:function(){return e._seqNum},isLive:function(){var e=n();return e&&e.isLive()?1:0},isResume:function(){return t.playback.isResume?1:0},liveState:function(){var e=n();return e&&e.liveState?e.liveState:""},bitrate:function(){return t.playback.bitrate},quality:function(){return t.playback.quality},continuousPlay:function(){return t.playback.continuousPlay?1:0},continuousPlayCount:function(){return e._continuousPlayCount},location:function(){return v.isOffNetwork()?4:v.isIFrame()?3:1},offNetwork:function(){return v.isOffNetwork()?1:S.BEACON_HIDE_KEY_VALUE},lang:function(){return t.baseConfig.lang.toLowerCase()},licensorName:function(){var e=n();return l(e?e.license.licensorName:null)},licenseId:function(){var e=n();return e?e.license.licenseId:S.INT_DEFAULT},videoId:function(){var e=n();return e?e.id:S.INT_DEFAULT},videoTitle:function(){var e=n();return l(e?e.title:null)},videoShowName:function(){var e=n();return l(e?e.showName||e.license.licenseName:null)},videoQuartile:function(t){return t===!0?e._adQuartile:e._videoQuartile},playbackPosition:function(){return Math.round(e._playbackPosition)},adPlaybackPosition:function(){return Math.round(e._adPlaybackPosition)},seqStart:function(){return Math.round(e._seqStart)},playerInt32Guid:function(){return e._guid},clipGuid:function(){return e._clipGuid||""},masterPlayerInt32Guid:function(){return e._masterPlayerGuid},videoLength:function(){var e=n();return l(e?e.duration:null)},pageTitle:function(){var e=d();return e?e.title:S.STRING_DEFAULT},pageUrl:function(){return u(v.getHostUrl())},eventBegin:function(){var e=n();return e&&e.eventBeginTime?e.eventBeginTime:""},eventEnd:function(){var e=n();return e&&e.eventEndTime?e.eventEndTime:""},pageReferrer:function(){if(t.baseConfig.referrer)return t.baseConfig.referrer;var e=d();return e&&""===e.referrer&&window.history&&window.history.state&&window.history.state.referer?p(window.history.state.referer):e?p(e.referrer):S.STRING_DEFAULT},streamProtocol:function(){var e=n(),t=e?e.streams[0]:null;return l(t?t.url.split(":")[0]:null)},streamType:function(){var r=n();if(!r){var i=e._model.playlist.items.length,a=t.playlist.position;e.debugSt+="il:"+i,e.debugSt+=",p:"+a}return r?r.getType():"none"},errorCode:function(){for(var e=t.errors,n=0;n<e.length;n++)if(e[n].code)return e[n].code;return 100},syndication:function(){return t.baseConfig.syndication},playerVersion:function(){return t.version},experienceName:function(){return t.baseConfig.experienceName.toLowerCase()},experienceType:function(){return t.baseConfig.experienceType.toLowerCase()},experienceBucket:function(){return t.baseConfig.experienceBucket},playListId:function(){return l(t.playlist.id)},jurisdiction:function(){return t.baseConfig.jurisdiction},randomVal:function(){return Math.random()},pageSpaceId:function(){return t.baseConfig.pageSpaceId||S.INT_DEFAULT},videoSpaceId:function(){var e=n();return e?e.metrics.pageSpaceId:S.INT_DEFAULT},percentWatched:function(e,t){return t>0?Math.floor(100*e/t):0},ccode:function(){return t.metrics.ccode},sec:function(){return t.metrics.sec},cpos:function(){return t.metrics.cpos},comscoreCA1:function(){return a("PLAYBACK_START","CA1")},comscoreCA2:function(){return a("PLAYBACK_START","CA2")},comscoreCA5ForAd:function(){return a("AD_START","CA5")},comscoreC4:function(){return t.metrics.comscoreC4},comscoreC5:function(){var e=n();return e?e.metrics.comscoreC5:S.INT_DEFAULT},comscoreC5ForAd:function(){return"09"},comscoreC6:function(){var e=n();return e?e.metrics.comscoreC6:S.INT_DEFAULT},rendererType:function(){return e.getMetricRendererType(t.playbackState.rendererType)},contentRendererType:function(){var t=n();return t?e.getMetricRendererType(t.rendererType):S.STRING_DEFAULT},playerType:function(){return"nextgen-desktop"},jsDownloadTime:function(){return l(t.pageLatency.pagePlayerJsDownloadTime)},providerId:function(){var e=n();return e&&e.provider.providerId?e.provider.providerId:S.INT_DEFAULT},providerVideoId:function(){var e=n();return e&&e.provider.providerVideoId?e.provider.providerVideoId:S.INT_DEFAULT},publisherId:function(){var e=n();return l(e?e.provider.publisherId:null)},genre:function(){var e=n();return l(e&&e.genres.length?e.genres[0]:null)},syndicationId:function(){return t.baseConfig.syndication.split("-")[0]},mainArtist:function(){var e=n();return l(e&&e.credits.mainArtists.length?e.credits.mainArtists[0]:null)},label:function(){var e=n();return l(e&&e.credits?e.credits.label:null)},tripleplay:function(){var e=n();return e&&"tripleplay"===e.provisioningSource?1:S.INT_DEFAULT},playlistPosition:function(){return t.playlist.position},volumeLevel:function(){return t.playbackState.mute?0:100*t.playbackState.volume},deviceName:function(){return R.name},deviceMake:function(){return R.make},deviceModel:function(){return R.model},deviceOS:function(){return R.os},adId:function(){var e=t.playbackState.ad;return l(e?e.adId:null)},adDuration:function(){var e=t.playbackState.ad;return l(e?e.duration:null)},adPosition:function(){var e=t.playbackState.ad;return l(e?e.position:null)},adLoaded:function(){return!!t.playbackState.ad},adType:function(){var e=t.playbackState.ad;return l(e?e.position:null)},typeOfContent:function(){return t.playbackState.videoSet()?t.playbackState.ad?"ad":"vid":"na"},playbackState:function(){return t.playbackState.state},mediaMetaTags:function(){var e=n();return l(e?e.metrics.ywa:null)},isDrm:function(){var e=n();return l(e?e.hasDrmStreams():null)},videoSession:function(){var e=n();return e&&e.videoSession?e.videoSession:S.STRING_DEFAULT},samplingId:function(){var e=n();return e&&!isNaN(e.samplingId)?e.samplingId:S.STRING_DEFAULT},isMature:function(){var e=n();return e&&"none"!==e.ageGate?1:0},isMute:function(){return t.playbackState.mute?"m":"um"},cdn:function(){var e=n(),t=e?e.getCDN():null;return t?t:"uncalculated"},contentType:function(){return e._getContentType()},playerLocation:function(){var e=v.isOffNetwork()?4:v.isIFrame()?3:1;switch(e){case 3:return"Emb onNet";case 4:return"Emb offNet";default:return"onProp"}},ucLatency:function(){var t=e._profiler.getItem(_.Metrics.CLICK_TO_START),n=t?t.timeDiff:null;return n?n:""},apLatency:function(){var t=e._profiler.getItem(_.Metrics.INIT_TO_START),n=t?t.timeDiff:null;return n?n:""},apLatencyStartTime:function(){return i(_.Metrics.INIT_TO_START)},viewability:function(){return e.viewability+"%"},playbackWatchedTime:function(){return Math.round(e._totalWatchedPlaybackTime)},bufferingTime:function(){return Math.round(e._totalBufferingTime)},rendererPluginLoadStatus:function(){return e._rendererPluginLoadStatus},loadFirstFragmentTime:function(){var t=e._profiler.getItem(_.Metrics.HLS_FIRST_TS_LOAD_START),n=t?t.timeDiff:null;return n?n:S.INT_DEFAULT},firstByteFirstFragmentTime:function(){var t=e._profiler.getItem(_.Metrics.HLS_FIRST_TS_FIRST_BYTE_ARRIVE),n=t?t.timeDiff:null;return n?n:S.INT_DEFAULT},mmActivityId:function(){var e=n();return e.metrics.mmActivityId},wrapInFn:function(e){return function(){return e}},hostingEnv:function(){var e=v.getSingleton("PlayerHosting");return e&&e.env?e.env:t.isLocal()?"l":"p"},hostingBucket:function(){var e=v.getSingleton("PlayerHosting");return e&&e.bucket?e.bucket:S.STRING_DEFAULT},hostingColo:function(){var e=v.getSingleton("PlayerHosting");return e&&e.colo?e.colo:S.STRING_DEFAULT},algo:function(){var e=n();if(e){if(e.relatedVideoIds.length){var r=t.mediaStore.get(e.relatedVideoIds[0]);return r.instrument&&r.instrument.algo?r.instrument.algo:""}return e.instrument&&e.instrument.algo?e.instrument.algo:""}return null},instrument:function(){var e=n(),t="";return e&&e.instrument&&Object.keys(e.instrument).length>0&&(t=JSON.stringify(e.instrument)),t},displayMode:function(){return e.fullScreenMode?"full":"window"},constructLatency:function(){return r(_.Metrics.VP_CONSTRUCTOR)},renderCreateLatency:function(){return r(_.Metrics.CREATE_RENDERER)},sapiLatency:function(){return r(_.Metrics.SAPI_REQUEST)},sapiLatencyStartTime:function(){return i(_.Metrics.SAPI_REQUEST)},swfLatency:function(){return r(_.Metrics.SWF_READY)},swfLatencyStartTime:function(){return i(_.Metrics.SWF_READY)},initToSapiLatency:function(){return r(_.Metrics.INIT_TO_SAPI)},renderToSwfLatency:function(){return r(_.Metrics.RENDER_TO_SWF)},initRenderGapLatency:function(){return r(_.Metrics.INIT_RENDER_GAP)},ccPrefLatency:function(){return r(_.Metrics.GET_USER_PREFS)},hlsPlaylistLatency:function(){return r(_.Metrics.LOAD_TO_LOADED_DATA)},streamLatency:function(){return r(_.Metrics.STREAM_REQUEST_TO_RENDER)},streamLatencyStartTime:function(){return i(_.Metrics.STREAM_REQUEST_TO_RENDER)},playToRenderLatency:function(){return r(_.Metrics.STREAM_PLAY_TO_RENDER)},segInfo:function(){return JSON.stringify({seg:e._segInfo.slice(0,Math.min(S.SEG_INFO_LENGTH,e._segInfo.length))})},buffTimeDiff:function(){return e._buffTimeDiff},segmentBuffTime:function(){return e._segmentwiseBuffTime},progressBeaconDistance:function(){var t=Math.round(e._totalWatchedPlaybackTime)-Math.round(e._progressBeaconDistance);return t>=0?t:0},getRecoveryStatus:function(){var e=n();return e.getRecoveryStatusForBeacon()},recoveryStatus:function(){var t=n();return e._recoveredPlayback?L.ItemRecoveryStatus.RECOVERED:t&&t.recoveryStatus===L.ItemRecoveryStatus.RECOVERING?L.ItemRecoveryStatus.RECOVERING:S.BEACON_HIDE_KEY_VALUE},watchPercent:function(){var t=n(),r=t&&t.duration>0?Math.round(100*e._totalWatchedPlaybackTime/t.duration):"";return r>100?100:r},pageLatency:function(){return t.metrics.pageLatency?t.metrics.pageLatency:"na"},playerJsDownloadTime:function(){return e._jsDownloadTime||(e._jsDownloadTime=c("videoplayer-nextgen-(?!apps)")),"number"==typeof e._jsDownloadTime?Math.round(e._jsDownloadTime):"na"},playerSwfDownloadTime:function(){return e._swfDownloadTime||(e._swfDownloadTime=c(/player\.swf$/)),"number"==typeof e._swfDownloadTime?Math.round(e._swfDownloadTime):"na"},requestType:function(){return e._model.playback.requestType||S.STRING_DEFAULT},requestAction:function(){return e._model.playback.requestAction||S.STRING_DEFAULT},playlistUI:function(){return e._model.ui.playlistUI&&e._model.ui.playlistUI.show===!0?"true":"false"},clientWidth:function(){return e._model.playerDimension.width},clientHeight:function(){return e._model.playerDimension.height},retinaDisplayDetected:function(){return window.devicePixelRatio>1},getVPATraceDigest:function(){var e=n();return e&&e.vpaTraceDigest?e.vpaTraceDigest:"na"},getProgressBeaconMode:function(){return e._progressBeaconMode},manufacturer:function(){return t.CTV.man},deviceClass:function(){return t.CTV["class"]},closedCaptionsUserPreference:function(){var t=e._model.userPreferences&&e._model.userPreferences.closedCaptions&&e._model.userPreferences.closedCaptions.show;return t?"1":"0"},isPlayerDocked:function(){return e._model.uiState.isDocked},expMode:function(){return t.uiState.isFullscreen?"fullscreen":"lightbox"===t.baseConfig.experienceName.toLowerCase()?"lightbox":t.uiState.isDocked?"docked":"na"},playlistUIType:function(){var t=e._model.ui&&e._model.ui.playlistUI&&e._model.ui.playlistUI.show===!0&&e._model.ui.playlistUI.position,n="";return n="right"!==t||e._model.ui.playlistUI.inStream?null!==t?t:"none":"hero"},playlistUIUuid:function(){var t="";return e._model.ui&&e._model.ui.playlistUI&&e._model.ui.playlistUI.show===!0&&(t=e._model.ui.playlistUI.playlistId||e._model.ui.playlistUI.playlistAlias||""),t},sizmekIfrmValue:function(){return 1}};return o},r.prototype.setRootElem=function(e){var t=this;t._rootElem=e},r.prototype.setActiveRenderer=function(e){var t=this;t._renderer=e},r.prototype._sendBeacon=function(e){var t=this,n=Array.prototype.slice.call(arguments,1),r=[],i=null,a={INCOMPLETE_EXIT:!0};t._beaconDisasterMode&&t._checkRateLimit(e)||(n.length>0&&(r=[n[0].data],i=n[0].fireCriteria),t._systems.forEach(function(n){var s=n.beaconMappings[e];if(s){var l=t._model.playlist,d=l?l.getCurrentItem():null;if(!n.shouldFire||n.shouldFire(d)!==!1){var c=s.keys;y.isFunction(c)&&(c=c.apply(n,r));var p=s.data;y.isFunction(p)&&(p=p.apply(n,r));var u=v.extend({},n.sendOpts);if(s.overrideBaseKeys&&(u.beginningKeys=u.endKeys=[]),s.baseUrl&&(u.baseUrl=s.baseUrl),a[e]&&(u.unloadBeacon=!0),d){var _,m=d.metrics.beacons;if(e in m)for(var f=d.metrics.beacons[e]||[],g=0;g<f.length;g++){var b=f[g];if(b.target===u.target&&b.addParam){_=t._generateStackedBeaconParams(b.addParam);break}}}if((!i||s.firingCriteria.indexOf(i)>=0)&&o(c,p,u,_,t._eventBus),s.extras)for(var h=0;h<s.extras.length;h++){u.baseUrl=s.extras[h].baseUrl;var E=s.extras[h].data;y.isFunction(E)&&(E=E.apply(n,r)),o(s.extras[h].keys,E,u,null,t._eventBus)}}}}),t._templateMetrics.sendBeacon(e,r))},r.prototype._checkRateLimit=function(e){var t=S.BEACON_DISASTER_MODE,n=!1;return t.global<1&&(n=Math.random()>t.global),t[e]&&(n=1===t[e]?!1:Math.random()>t[e]),n},r.prototype._generateStackedBeaconParams=function(e){var t=this,n=t._commonFields;return y.isString(e)?e.replace("{COMSCORE_C4}",n.comscoreC4()).replace("{COMSCORE_C5}",n.comscoreC5()).replace("{COMSCORE_C6}",n.comscoreC6()):null},r.prototype._sendPageView=function(){var e=this,t=v.getSingleton("Metrics");t||(t={},v.setSingleton("Metrics",t)),t.PageView?e._masterPlayerGuid=t.MasterPlayer:(e._masterPlayerGuid=e._guid,t.MasterPlayer=e._masterPlayerGuid,t.PageView=!0,e._sendBeacon("PAGE_VIEW"))},r.prototype._onVideoRequest=function(e){var t=this;t._sendBeacon("VIDEO_REQUEST",{data:e})},r.prototype._onCtrlPlayRequest=function(e){var t=this;t._sendBeacon("CTRL_PLAYREQUEST",{data:e?e:""})},r.prototype._sendPlayerLoaded=function(){var e=this;e._sendBeacon("PLAYER_LOADED")},r.prototype._onStartScreenRendered=function(){var e=this;e._profiler.setEndTime(_.Metrics.INIT_TO_STARTSCREEN);var t=e._profiler.getItem(_.Metrics.INIT_TO_STARTSCREEN);t&&e._sendBeacon("INIT_TO_STARTSCREEN",{data:t.timeDiff})},r.prototype._onPlaybackRequested=function(){var e=this;e._seeking=!1,e._playbackPosition=0,e._initProgressBeaconState(),e._lastProgressBeaconPosition=e._playbackPosition,e._totalWatchedPlaybackTime=0,e._buffTimeTrueStream=0,e._progressBeaconDistance=0,e._seqNum=1,e._seqStart=e._playbackPosition,e._continuousPlayCount++,e._totalBufferingTime=0,e._recoveredPlayback=e._commonFields.getRecoveryStatus(),e._recoveredPlayback?(e._bufferingStart=!0,e._bufferingStartTime=Date.now()):(e._segInfo=[],e._segmentwiseBuffTime=0,e._trueStreamsProgressFired=!1)},r.prototype._onUIInteraction=function(e){var t=this,n=["ui_pl_nxt_clk","ui_pl_nxt_hvr","ui_pl_scrl","ui_pl_thmb_clk"],r={srcElement:e.srcElement,evt:n.indexOf(e.srcElement)>-1?"ui_pl":"none"};t._sendBeacon("UI_INTERACT",{data:r})},r.prototype._onSeek=function(e){var t=this;t._sendBeacon("CTRL_SEEK",{data:e?e:""})},r.prototype._onVolume=function(e){var t=this,n=t._model.playbackState.volume;n!==e&&t._sendBeacon("CTRL_VOLUME",{data:e})},r.prototype._onCCTog=function(e){var t=this;t._sendBeacon("CC_TOGGLE",{data:e?"1":"0"})},r.prototype._onCCLang=function(e){var t=this;t._sendBeacon("CC_LANG",{data:e?e:"na"})},r.prototype._onCCStyle=function(e){var t=this;t._sendBeacon("CC_STYLE",{data:e?e:"na"})},r.prototype._onCCSettings=function(){var e=this;e._sendBeacon("CC_SETTINGS")},r.prototype._onAgeBday=function(){var e=this;e._sendBeacon("CTRL_AGEGATE_BDAY")},r.prototype._onFullscreen=function(e){var t=this;t.fullScreenMode=e,t._sendBeacon("FULLSCREEN",{data:e?"ON":"OFF"});var n=t._commonFields.videoId();t._rapid&&Object.keys(t._rapid).length&&!t._rapidUUIDMap[n]&&t.fullScreenMode&&(t._fireRapidBeacon("fullscreen"),t._rapidUUIDMap[n]=1)},r.prototype._onSettings=function(){var e=this;e._sendBeacon("CTRL_SETTINGS")},r.prototype._onShare=function(e){var t=this;t._sendBeacon("CTRL_SHARE",{data:e})},r.prototype._onQualitySelected=function(e){var t=this;t._sendBeacon("QUALITY_SELECTED",{data:e.preference})},r.prototype._onReplay=function(){var e=this;e._sendBeacon("CTRL_REPLAY");var t=e._commonFields.videoId();e._rapid&&Object.keys(e._rapid).length&&!e._rapidUUIDMap[t]&&(e._fireRapidBeacon("replay"),e._rapidUUIDMap[t]=1)},r.prototype._onWatchLaterUpdate=function(e){var t=this,n="";"add"===e.operation?n="1":"delete"===e.operation&&(n="0"),t._sendBeacon("WL_CHANGE_REQUEST",{data:n})},r.prototype._onTimerUpdate=function(e){var t=this;t._sendBeacon("CTRL_TIMER",{data:e})},r.prototype._onUILogin=function(e){var t=this;t._sendBeacon("UI_LOGIN",{data:e})},r.prototype._onSelectedEndscreenVideo=function(e){var t=this;t._sendBeacon("CTRL_ENDSCREEN_VID",{data:e})},r.prototype._onMuteChange=function(e){var t=this,n=t._commonFields.videoId();t._rapid&&Object.keys(t._rapid).length&&!t._rapidUUIDMap[n]&&!e&&(t._fireRapidBeacon("unmute"),t._rapidUUIDMap[n]=1)},r.prototype._updatePlayerViewability=function(){var e=this,t=e._rootElem,n=t.getElementsByClassName("yvp-main");
e.viewability=v.getElementViewability(n[0])},r.prototype._onContentFirstTSLoadStart=function(){var e=this,t=e._profiler.getItem(_.Metrics.HLS_FIRST_TS_LOAD_START);t&&null===t.endTime&&(e._profiler.setEndTime(_.Metrics.HLS_FIRST_TS_LOAD_START),e._profiler.add(_.Metrics.HLS_FIRST_TS_FIRST_BYTE_ARRIVE))},r.prototype._onContentFirstTSFirstByteArrive=function(){var e=this,t=e._profiler.getItem(_.Metrics.HLS_FIRST_TS_FIRST_BYTE_ARRIVE);t&&null===t.endTime&&e._profiler.setEndTime(_.Metrics.HLS_FIRST_TS_FIRST_BYTE_ARRIVE)},r.prototype._onContentStarted=function(e,t){var n=this;t&&(n._playbackPosition=t);var r=n._profiler.getItem(_.Metrics.PLAYBACK_START);r&&null===r.endTime&&(n._profiler.setEndTime(_.Metrics.PLAYBACK_START),n._onAdOrContentStarted(),n._clipGuid=n._createClipGuid(n._model.playlist.getCurrentItem()),n._updatePlayerViewability(),n._sendBeacon("PLAYBACK_START",{data:{timeDiff:r.timeDiff,debugSt:n.debugSt,startTime:r.startTime+n._profiler.startTime}}),n._model.playback.requestType=null,n._model.playback.requestAction=null)},r.prototype._getContentType=function(){var e,t=this,n=t._commonFields,r=n.isLive()?"live":n.adLoaded()?"ad":"",i=n.adPosition();switch(r){case"ad":e="ad pre-roll","postroll"===i?e="ad post-roll":"midroll"===i&&(e="ad mid-roll");break;case"live":e=n.liveState()||"live";break;default:e="vod short";var a=t._model.playlist.getCurrentItem();if(!a)break;var o=n.videoLength();a.isCCM?"na"!==o&&o>600&&(e="vod long"):e="streamurl"}return e},r.prototype._onAdOrContentStarted=function(){var e=this,t={},n=e._profiler.getItem(_.Metrics.LOAD_TO_LOADED_DATA);n&&(t[_.Metrics.LOAD_TO_LOADED_DATA.type]=n.timeDiff);var r=e._profiler.getItem(_.Metrics.DRM_METADATA_IS_SET);r&&(t[_.Metrics.DRM_METADATA_IS_SET.type]=r.timeDiff);var i=e._profiler.getItem(_.Metrics.DRM_AUTH_COMPLETE);i&&(t[_.Metrics.DRM_AUTH_COMPLETE.type]=i.timeDiff);var a=e._profiler.getItem(_.Metrics.STREAM_REQUEST_TO_RENDER);a&&(t[_.Metrics.STREAM_REQUEST_TO_RENDER.type]=a.timeDiff),e._trueStreamsProgressFired=!1,e._trueStreamsAdProgressFired=!1;var o=e._profiler.getItem(_.Metrics.CLICK_TO_START);if(o&&null===o.endTime){e._profiler.setEndTime(_.Metrics.CLICK_TO_START),t[_.Metrics.CLICK_TO_START.type]=o.timeDiff;var s=o.timeDiff;e._sendBeacon("CLICK_TO_START",{data:t}),e._comscoreMetrics.addToComscoreQueue(function(){e._comscoreMetrics.updateClipAttrs({y_ucl:s?s.toString():S.INT_DEFAULT})})}var l=e._profiler.getItem(_.Metrics.INIT_TO_START);if(l&&null===l.endTime){e._profiler.setEndTime(_.Metrics.INIT_TO_START),t[_.Metrics.INIT_TO_START.type]=l.timeDiff,e._sendBeacon("INIT_TO_START",{data:t});var d=l.timeDiff;e._comscoreMetrics.addToComscoreQueue(function(){e._comscoreMetrics.updateClipAttrs({y_apl:d?d.toString():S.INT_DEFAULT})})}},r.prototype._getVideoQuartile=function(e,t){var n=this,r=n._commonFields,i=r.percentWatched(e,t);return Math.floor(i/S.QUARTILE_PROGRESS_INTERVAL)},r.prototype._onPlaybackProgress=function(e){var t=this;if(!t._seeking){var n=e-t._playbackPosition;n&&(t._totalWatchedPlaybackTime+=n),t._playbackPosition=e,t._updateWaitTime(),t._recoveredPlayback&&(t._fireProgressBeacon(null,null,!0),t._recoveredPlayback=t._commonFields.getRecoveryStatus());var r=t._model.playlist.getCurrentItem(),i=r?r.duration:0,a=t._checkProgressFrequency(e,i);a.quartileBeacon&&t._fireProgressBeacon(a.quartileBeacon,!1),a.progressBeacon&&(t._updatePlayerViewability(),t._fireProgressBeacon(a.progressBeacon))}},r.prototype._updateBufferingStats=function(e){var t=this;e=e||!1,t._eventBus.publish(_.BEFORE_PROGRESS_BEACON,t._segInfo),t._computeBuffTimeDiff(),(t._segInfo.useDefaultBufferDuration||e)&&(t._segInfo=[{buf_dur:t._totalBufferingTime}],t._segmentwiseBuffTime=t._totalBufferingTime,t._buffTimeDiff=0)},r.prototype._updateWaitTime=function(){var e=this;e._bufferingStart&&(e._bufferingStart=!1,e._totalBufferingTime+=Date.now()-e._bufferingStartTime)},r.prototype._checkProgressFrequency=function(e,t){var n=this,r={},i=n._progressBeaconMode.firingCriteria;n._fixedIntervalProgressBeacons&&n._totalWatchedPlaybackTime>=n._fixedIntervalProgressBeacons[0]?(n._fixedIntervalProgressBeacons[0]!==S.TRUE_STREAMS_INTERVAL||n._trueStreamsProgressFired||(i=S.TRUE_STREAMS_INTERVAL,n._trueStreamsProgressFired=!0),r.progressBeacon=i,n._fixedIntervalProgressBeacons.shift()):n._totalWatchedPlaybackTime>=n._lastProgressBeaconPosition+n._progressBeaconMode.recurring&&(r.progressBeacon=n._progressBeaconMode.firingCriteria,n._lastProgressBeaconPosition+=n._progressBeaconMode.recurring);var a=n._getVideoQuartile(e,t);return a&&a!==n._videoQuartile&&(n._videoQuartile=a,r.quartileBeacon=S.QUARTILE_PROGRESS_INTERVAL),r},r.prototype._initProgressBeaconState=function(){var e=this,t=e._model.playlist.getCurrentItem();t?t.duration:0;e._fixedIntervalProgressBeacons=[],e._quartileIntervalProgressBeacons=[],e._fixedIntervalProgressBeacons=e._progressBeaconMode.fixed.slice()},r.prototype._fireProgressBeacon=function(e,t,n){var r=this;e=e||r._progressBeaconMode.firingCriteria,t=y.isNullOrUndefined(t)?!0:t,n=n||!1,r._updateWaitTime(),t&&r._updateBufferingStats(n),e===S.TRUE_STREAMS_INTERVAL?(r._sendBeacon("PLAYBACK_STREAM_START",{fireCriteria:S.TRUE_STREAMS_INTERVAL}),r._buffTimeTrueStream=r._totalBufferingTime):r._sendBeacon("PLAYBACK_PROGRESS",{fireCriteria:e,data:{playEventFired:r._playEventFired}}),e!==S.QUARTILE_PROGRESS_INTERVAL&&(r._progressBeaconDistance=r._totalWatchedPlaybackTime),t&&(r._totalBufferingTime=0,r._segInfo.splice(0,Math.min(S.SEG_INFO_LENGTH,r._segInfo.length)))},r.prototype._onPlayerDestroyed=function(e){var t=this;if(t._progressBeaconMode.playerUnload){var n={reason:e?e:null};t._updateBufferingStats(),t._model.playbackState.isVpaidAdPlaying()&&t._eventBus.publish(_.BEFORE_INCOMPLETE_EXIT,n),t._sendBeacon("INCOMPLETE_EXIT",{data:n})}},r.prototype._onWindowUnload=function(){var e=this;e._onPlayerDestroyed("unload")},r.prototype._onAdPlaybackProgress=function(e,t){var n=this;n._commonFields;n._adPlaybackPosition=t,!n._trueStreamsAdProgressFired&&t>=S.TRUE_STREAMS_INTERVAL?(n._trueStreamsAdProgressFired=!0,n._updatePlayerViewability(),n._sendBeacon("AD_PROGRESS",{fireCriteria:S.TRUE_STREAMS_INTERVAL}),n._sendBeacon("AD_STREAMS")):t>=n._lastAdProgressBeaconPosition+S.PROGRESS_INTERVAL&&(n._lastAdProgressBeaconPosition+=S.PROGRESS_INTERVAL,n._updatePlayerViewability(),n._sendBeacon("AD_PROGRESS",{fireCriteria:S.PROGRESS_INTERVAL}))},r.prototype._onPlaybackComplete=function(){var e=this;e._updatePlayerViewability(),e._updateBufferingStats(),e._sendBeacon("PLAYBACK_COMPLETE"),e._totalBufferingTime=0,e._buffTimeTrueStream=0},r.prototype._onPlaybackPaused=function(){var e=this;e._sendBeacon("PLAYBACK_PAUSE")},r.prototype._onPlaybackStalled=function(e){var t=this;t._sendBeacon("PLAYBACK_STALLED",{data:e?e:""})},r.prototype._onPlaybackResumed=function(){var e=this;e._sendBeacon("PLAYBACK_RESUMED")},r.prototype._onCtrlPlayPause=function(e){var t=this;t._sendBeacon("CTRL_PLAYPAUSE",{data:e?e:""}),t._progressBeaconMode.playPause===!0&&"pause"===e&&t._fireProgressBeacon()},r.prototype._onRecoveryMetadata=function(){var e=this;(e._commonFields.progressBeaconDistance()>0||e._totalBufferingTime>0)&&e._fireProgressBeacon(null,null,!0)},r.prototype._onABRDataUpdate=function(e){var t=this;t._sendBeacon("ABR_DATA_UPDATE",{data:e})},r.prototype._onApiCalled=function(e){var t=this;t._sendBeacon("API_CALLED",{data:e})},r.prototype._onFeedbackCalled=function(e){var t=this;t._sendBeacon("FEEDBACK_INFO",{data:e})},r.prototype._onVideoAppsLoaded=function(){var e=this;e._profiler.setEndTime(_.Metrics.INIT_TO_APPS_INIT);var t=e._profiler.getItem(_.Metrics.INIT_TO_APPS_INIT);t&&e._sendBeacon("INIT_TO_APPS_INIT",{data:t.timeDiff})},r.prototype._onBitrateChange=function(e,t){var n=this;n._sendBeacon("BITRATE_CHANGE",{data:{bitrate:e,reason:t.reason,newFrameRate:t.newFrameRate,oldFrameRate:t.oldFrameRate}})},r.prototype._onPlaybackSeeking=function(e){var t=this;t._seeking||(t._seqStart=e,t._seeking=!0)},r.prototype._onPlaybackSeeked=function(e){var t=this;t._seeking=!1,t._seqNum++,t._playbackPosition=e,t._sendBeacon("PLAYBACK_SEEK"),t._seqStart=e},r.prototype._onWaiting=function(e){var t=this;if(e){if(e.ignoreBuffering===!0)return;if(e.value===!1)return t._bufferingStart=!1,void(t._totalBufferingTime+=Date.now()-t._bufferingStartTime)}t._bufferingStart=!0,t._bufferingStartTime=Date.now()},r.prototype._isCriticalError=function(e){return e.category!==I.E_INFO&&e.category!==I.E_WARNING&&e.category!==I.E_YVAP},r.prototype._onError=function(e){var t=this,n=t._commonFields.videoId(),r=t._isCriticalError(e),i=t._criticalErrorFiredMap[n];e.group=i?"E":e.group,r&&(i?t._criticalErrorFiredMap[n]++:t._criticalErrorFiredMap[n]=1),(!t._criticalErrorFiredMap[n]||t._criticalErrorFiredMap[n]<C)&&(e.category===I.E_PLAYER&&e.subcategory===I.PLAYER_CODES.E_PLAYER_HTML5_PLAYBACK_ERROR_ABORTED?setTimeout(function(){t._sendBeacon("PLAYER_ERROR",{data:e})},1e3):t._sendBeacon("PLAYER_ERROR",{data:e}))},r.prototype._onWarning=function(e){var t=this,n=t._commonFields.videoId();t._warningErrorFiredMap[n]||(t._warningErrorFiredMap[n]={});var r,i=D[e.subcategory]?D[e.subcategory]:N;t._warningErrorFiredMap[n][e.subcategory]?r=t._warningErrorFiredMap[n][e.subcategory]:(t._warningErrorFiredMap[n][e.subcategory]=0,r=0),t._warningCount<N&&i>r&&(t._sendBeacon("PLAYER_WARNING",{data:e}),t._warningCount++,t._warningErrorFiredMap[n][e.subcategory]++)},r.prototype._onInfo=function(e){var t=this;t._sendBeacon("PLAYER_INFO",{data:e})},r.prototype._onAdMetrics=function(e){var t=this;t._sendBeacon("AD_METRICS",{data:e})},r.prototype._onAdPlaybackStarted=function(e,t,n,r,i,a){var o=this;o._adPlaybackPosition=0,o._lastAdProgressBeaconPosition=o._adPlaybackPosition,o._onAdOrContentStarted(),o._clipGuid=o._createClipGuid(),o._updatePlayerViewability();var s=void 0!==a,l=s?a:n;o._sendBeacon("AD_START",{data:{latency:l,isVpaid:s}})},r.prototype._onAdPlaybackComplete=function(){var e=this;e._updatePlayerViewability();var t=e._guidMap[e._model.playlist.getCurrentItem().id];t&&(e._clipGuid=t),e._sendBeacon("AD_COMPLETE")},r.prototype._onAdError=function(){var e=this;e._sendBeacon("AD_ERROR")},r.prototype._onAdBreakInfo=function(e){var t=this;t._sendBeacon("AD_BREAK_INFO",{data:e})},r.prototype._onAdBreakEnd=function(e){var t=this;t._sendBeacon("AD_BREAK_ENDED",{data:e})},r.prototype._onAdBreakCancelled=function(e){var t=this;t._sendBeacon("AD_BREAK_CANCELLED",{data:e})},r.prototype._onMidrollCacheUpdated=function(e){var t=this;t._sendBeacon("MIDROLL_CACHE_UPDATE",{data:e})},r.prototype._onRendererPluginLoaded=function(){var e=this;e._rendererPluginLoadStatus=1},r.prototype._onRendererPluginLoadFailed=function(){var e=this;e._rendererPluginLoadStatus=2},r.prototype._onRendererPluginLoadTimedOut=function(){var e=this;e._rendererPluginLoadStatus=3},r.prototype._computeBuffTimeDiff=function(){var e=this,t=e._totalBufferingTime;e._buffTimeTrueStream&&(t+=e._buffTimeTrueStream,e._buffTimeTrueStream=0);var n=e._segInfo.slice(0,Math.min(S.SEG_INFO_LENGTH,e._segInfo.length));e._segmentwiseBuffTime=0;for(var r=0;r<n.length;r++)e._segmentwiseBuffTime+=n[r].buf_dur;e._buffTimeDiff=e._segmentwiseBuffTime-t},r.prototype._fireRapidBeacon=function(e){var t=this,n=t._commonFields.videoId(),r=t._commonFields.videoTitle();if(t._rapidClickParams){t._rapidClickParams.itc=1,t._rapidClickParams.g=t._rapidClickParams.g?t._rapidClickParams.g:n,t._rapidClickParams.vid=n;var i=t._rapidClickParams.sec?t._rapidClickParams.sec:"yvp",a=t._rapidClickParams.slk?t._rapidClickParams.slk:r,o=t._rapidClickParams._p?t._rapidClickParams._p:1;t._rapid.beaconClick(i,a,o,t._rapidClickParams,e)}},r.prototype.getMetricRendererType=function(e){var t=S.STRING_DEFAULT;if(!e)return t;switch(e){case M.FLASH:t="flash";break;case M.HTML5_HLS:t="html5-hls";break;case M.HTML5_DASH:t="dash";break;case M.HTML5_RAW:case M.HTML5_TV:case M.HTML5_TV_TIZEN:case M.HTML5_TV_ORSAY:t="html";break;default:t="html"}return t},r.prototype.destroy=function(){var e=this;e._onPlayerDestroyed("destroy")},i.prototype.sendBeacon=function(e,t){var n=this,r=n._model.playlist.getCurrentItem();if(r){var i=function(r){var i=n._paramGetters[r];return i?i.apply(null,[e].concat(t)):null},o=r.metrics.beacons[e]||[];o.forEach(function(e){var t=e.url;t&&(t=a(t,i),v.sendImageBeacon(t))})}};var R=function(){return m.android?{name:"android",make:"unknown",model:"android",os:"android"}:m.ipad?{name:"iPad",make:"apple",model:"ipad",os:"ios"}:m.iphone?{name:"iPhone",make:"apple",model:"iphone",os:"ios"}:m.chrome?{name:"web",make:"chrome",model:m.chrome,os:m.os}:m.firefox?{name:"web",make:"firefox",model:m.firefox,os:m.os}:m.ie?{name:"web",make:"ie",model:m.ie,os:m.os}:m.safari?{name:"web",make:"safari",model:m.safari,os:m.os}:{name:"web",make:"na",model:"na",os:m.os}}()},{"../../../lib":"bRhrlU","../../../lib/logger":"IS9j5T","../../../lib/user-agent":"ty5FFo","../error":20,"../event":"YJm+dH","../media-store":26,"../renderers/type":47,"../util":"jJTEqU","./comscore":30,"./comscore-metrics":29,"./marketingpx-metrics":31,"./media-metrie":32,"./metrics-constants":33,"./sizmek-metrics":35,"./ult-metrics":36,"./vidible-metrics":37}],35:[function(e,t,n){"use strict";function r(e){var t=this,n="https://bs.serving-sys.com/Serving/ActivityServer.bs",r=["cn","ActivityId","rnd","ifrm"],i={cn:e.wrapInFn("as"),ActivityId:e.mmActivityId,rnd:e.randomVal,ifrm:e.sizmekIfrmValue},a={baseUrl:n,keys:[],data:{}};t.sendOpts={baseUrl:n,target:"sizmek",paramGetters:i,beginningKeys:r,iFrameBeacon:!0},t.beaconMappings={PLAYBACK_START:a}}var i=e("../../../lib");t.exports=r,r.prototype.shouldFire=function(e){var t=i.isNullOrUndefined(e.metrics.mmActivityId)?"":e.metrics.mmActivityId.toString();return""!==t&&t.match(/^\d+$/)?!0:!1}},{"../../../lib":"bRhrlU"}],36:[function(e,t,n){"use strict";function r(e,t){var n=this,r=["t","_V","s","V_sec","evt","ccode","sec","cpos","type","_ex","_NOL"],s=["vid","pstaid","prt","cprt","lms_id","vs","psz","cdn","st","sp","bit","pls","vlng","site","lang","intl","lbl","synd","pver","expn","expt","expb","loc","auto","cont","bckt","snd","test","_w","vsid","_R","pltype","cached_vs","man","class","smpl","env"],l=["ctv_db","ctv_dc","_di","ctv_di","ctv_ddv","ctv_dfv","_dv","_lo","_dm","_dl","_dc","_osv","ctv_yb","_sr","ctv_yr","ctv_ybv","ctv_yv","_an","_av","_at"],d=function(t){return function(){return e.CTV.ctvMetricsParams[t]}},c={ctv_db:d("ctv_db"),ctv_dc:d("ctv_dc"),_di:d("_di"),ctv_di:d("ctv_di"),ctv_ddv:d("ctv_ddv"),ctv_dfv:d("ctv_dfv"),_dv:d("_dv"),_lo:d("_lo"),_dm:d("_dm"),_dl:d("_dl"),_dc:d("_dc"),_osv:d("_osv"),ctv_yb:d("ctv_yb"),_sr:d("_sr"),ctv_yr:d("ctv_yr"),ctv_ybv:d("ctv_ybv"),ctv_yv:d("ctv_yv"),_an:d("_an"),_av:d("_av"),_at:d("_at")},p={t:t.randomVal,s:t.pageSpaceId,vsid:t.videoSpaceId,vid:t.videoId,adid:t.adId,pstaid:t.videoId,lms_id:t.licenseId,pls:t.playerInt32Guid,psz:t.dimensions,site:t.site,lang:t.lang,intl:t.region,prt:t.rendererType,cprt:t.contentRendererType,pltype:t.playerType,lbl:t.label,synd:t.syndicationId,_w:t.pageUrl,ccode:t.ccode,sec:t.sec,cpos:t.cpos,pver:t.playerVersion,expn:t.experienceName,expt:t.experienceType,expb:t.experienceBucket,loc:t.playerLocation,_R:t.pageReferrer,dur:t.playbackWatchedTime,dur_d:t.progressBeaconDistance,vlng:t.videoLength,adlng:t.adDuration,toc:t.typeOfContent,pbst:t.playbackState,_ex:t.offNetwork,_NOL:t.offNetwork,auto:t.autoplay,cont:t.continuousPlayCount,cdn:t.cdn,ucl:t.ucLatency,apl:t.apLatency,s_apl:t.apLatencyStartTime,bit:t.bitrate,view:t.viewability,sp:t.streamProtocol,st:t.streamType,bckt:t.hostingBucket,snd:t.isMute,type:t.contentType,rsm:t.isResume,test:t.experienceBucket,algo:t.algo,disp:t.displayMode,consl:t.constructLatency,trcreate:t.renderCreateLatency,tsltps:t.playToRenderLatency,tmeta_call:t.sapiLatency,s_tsapic:t.sapiLatencyStartTime,tswf_ready:t.swfLatency,s_tswfr:t.swfLatencyStartTime,tcc_pref:t.ccPrefLatency,tltld:t.hlsPlaylistLatency,strml:t.streamLatency,s_strml:t.streamLatencyStartTime,buff_info:t.segInfo,client_width:t.clientWidth,client_height:t.clientHeight,retina:t.retinaDisplayDetected,vpa_td:t.getVPATraceDigest,vs:t.videoSession,cached_vs:t.cachedVs,jsdt:t.jsDownloadTime,pgltcy:t.pageLatency,buf_dur:t.segmentBuffTime,man:t.manufacturer,smpl:t.samplingId,ccap:t.closedCaptionsUserPreference,env:t.hostingEnv,"class":t.deviceClass,expm:t.expMode,pl_type:t.playlistUIType,pl_uuid:t.playlistUIUuid,pl_intr:t.instrument,_V:function(){return"V"}};s=a.tv?s.concat(l):s,p=a.tv?o.extend(p,c):p,n.sendOpts={baseUrl:"//bats.video.yahoo.com/p",target:"ult",paramGetters:p,beginningKeys:r,endKeys:s},n.beaconMappings={AD_BREAK_INFO:{keys:["poddur","mttl","mvalid","mdur_ready","latency","cids","adblk"],data:function(e){return{V_sec:"pb",evt:"pod-start-inf",poddur:e.adBreakDuration,mttl:e.numMidrollsTotal,mvalid:e.numMidrollsValid,mdur_ready:e.readyAdsDuration,latency:e.adStartLatency,cids:e.creativeIds.join(",")||"none",adblk:e.adBlockerDetected}}},AD_BREAK_ENDED:{keys:["poddur","merr","merr_dur","mnum","mdur_ready","mdur_true","mdur_rndr","latency","cids","adblk","unpld_dur","cuein_time"],data:function(e){return{V_sec:"pb",evt:"pod-end-inf",poddur:e.adBreakDuration,merr:e.adsErrorCount,merr_dur:e.erroredAdsDuration,mnum:e.adsStartedCount,mdur_ready:e.readyAdsDuration,mdur_true:e.adsPlayDurationExpected,mdur_rndr:e.adsPlayDurationActual,latency:e.videoStartLatency,cids:e.creativeIds.join(",")||"none",adblk:e.adBlockerDetected,unpld_dur:e.unplayedDuration,cuein_time:e.adBreakCueInTime}}},MIDROLL_CACHE_UPDATE:{keys:["retry_cnt","target_ads_dur","uniq_ads_num","no_ads_num","dup_ads_num","uniq_ads_dur"],data:function(e){return{V_sec:"pb",evt:"pod-cache-updt",retry_cnt:e.retryCount,target_ads_dur:e.targetAdsDuration,no_ads_num:e.totalNoAds,dup_ads_num:e.totalDuplicatedAds,uniq_ads_num:e.totalUniqueAds,uniq_ads_dur:e.uniqueAdsDuration}}},AD_BREAK_CANCELLED:{keys:["unpld_cids","unpld_dur","reason"],data:function(e){return{V_sec:"pb",evt:"pod-cancelled",unpld_cids:e.unplayedCreativeIds.join(",")||"none",unpld_dur:e.unplayedDuration,reason:e.reason}}},AD_METRICS:{keys:function(e){var t=Object.keys(e.ult);return t.push("V_sec"),t},data:function(e){var t=e.ult;return t.V_sec="pb",t}},ABR_DATA_UPDATE:{keys:["sc","ib","bft","ci","dw","dh","pr","eb","bl","swc","dfr","fbl","ted","ni","rs"],data:function(e){return{V_sec:"pb",evt:"v_abr",sc:e.sc,ib:e.ib,bft:e.bft,ci:e.ci,dw:e.dw,dh:e.dh,pr:e.pr,eb:e.eb,bl:e.bl,swc:e.swc,dfr:e.dfr,fbl:e.fbl?e.fbl.toString():"",ted:e.ted.map(function(e){return JSON.stringify(e)}).toString(),ni:e.ni,rs:e.rs}}},VIDEO_REQUEST:{keys:["prefetch"],data:function(e){return{V_sec:"pb",evt:"v_request",prefetch:e}}},PLAYBACK_START:{keys:["ucl","apl","s_apl","dur","view","rsm","disp","consl","trcreate","tmeta_call","s_tsapic","tswf_ready","s_tswfr","tcc_pref","tltld","strml","s_strml","tsltps","tpb","s_tpb","pgltcy","jsdt","swfdt","req_type","req_action","ccap","d_st","expm","pl_type","pl_uuid","pl_intr"],data:function(e){return{V_sec:"pb",evt:"v_start",rsm:t.isResume(),tmeta_call:t.tsapic(),tpb:e.timeDiff,s_tpb:e.startTime,pgltcy:t.pageLatency(),jsdt:t.playerJsDownloadTime(),swfdt:t.playerSwfDownloadTime(),req_type:t.requestType(),req_action:t.requestAction(),d_st:e.debugSt}}},PLAYBACK_PROGRESS:{keys:["dur","dur_d","view","buff_info","buf_dur","p_width","p_height","retina","rcvr_status","expm","pl_type","pl_uuid","pl_intr","vpa_td"],firingCriteria:[t.getProgressBeaconMode().firingCriteria],data:function(){return{V_sec:"pb",evt:"v_prog",rcvr_status:t.recoveryStatus(),p_width:t.clientWidth(),p_height:t.clientHeight(),retina:t.retinaDisplayDetected()}}},PLAYBACK_STREAM_START:{keys:["view","buff_info","buf_dur","dur","dur_d","expm","pl_type","pl_uuid","pl_intr","vpa_td"],firingCriteria:[i.TRUE_STREAMS_INTERVAL],data:function(){return{V_sec:"pb",evt:"v_strm_view"}}},PLAYBACK_COMPLETE:{keys:["dur","dur_d","view","watchpct","stall_t","buff_info","buf_dur","expm","pl_type","pl_uuid","pl_intr","vpa_td"],data:function(){return{V_sec:"pb",evt:"v_comp",dur:t.playbackPosition(),watchpct:t.watchPercent(),stall_t:t.bufferingTime()}}},INCOMPLETE_EXIT:{keys:["dur","dur_d","view","watchpct","stall_t","buff_info","buf_dur","rcvr_status","expm","pl_type","pl_uuid","pl_intr","vpa_td","toc","pbst","tswf_ready","tmeta_call","strml","ext_resn","vsl","vil","vst","s_vsl","s_vil","s_vst"],data:function(e){return{V_sec:"pb",evt:"v_ncomp",rcvr_status:t.recoveryStatus(),watchpct:t.watchPercent(),stall_t:t.bufferingTime(),ext_resn:e.reason||"na",vsl:e.vpaidLatencies&&e.vpaidLatencies.vsl||"na",vil:e.vpaidLatencies&&e.vpaidLatencies.vil||"na",vst:e.vpaidLatencies&&e.vpaidLatencies.vst||"na",s_vsl:e.vpaidLatencies&&e.vpaidLatencies.sVsl||"na",s_vil:e.vpaidLatencies&&e.vpaidLatencies.sVil||"na",s_vst:e.vpaidLatencies&&e.vpaidLatencies.sVst||"na"}}},PLAYBACK_RESUMED:{keys:[],data:function(){return{V_sec:"pb",evt:"p_resm"}}},PLAYBACK_STALLED:{keys:["value","play_pos","dur"],data:function(e){return{V_sec:"pb",evt:"v_stall",value:e,play_pos:t.playbackPosition()}}},BITRATE_CHANGE:{keys:["play_pos","value","value_e","dur","reason","fr","fr_old"],data:function(e){return{V_sec:"pb",evt:"v_btrt",play_pos:t.playbackPosition(),value:e.bitrate,value_e:t.bitrate(),reason:e.reason,fr:e.newFrameRate,fr_old:e.oldFrameRate}}},AD_START:{keys:["adid","adlng","ucl","apl","dur","view","latency"],data:function(e){return{V_sec:"pb",evt:"ad_start",dur:t.adPlaybackPosition(),latency:e.latency,vpaid:e.isVpaid}}},AD_PROGRESS:{keys:["dur","adlng","adid","view"],firingCriteria:[i.TRUE_STREAMS_INTERVAL,i.PROGRESS_INTERVAL],data:function(){return{V_sec:"pb",evt:"ad_prog",dur:t.adPlaybackPosition()}}},AD_COMPLETE:{keys:["dur","adlng","adid","view"],data:function(){return{V_sec:"pb",evt:"ad_comp",dur:t.adPlaybackPosition()}}},UI_INTERACT:{keys:["V_slk","dur","algo","pl_intr"],data:function(e){return{V_sec:"ctrl",evt:e.evt,V_slk:e.srcElement}}},CTRL_PLAYPAUSE:{keys:["value","dur","play_pos"],data:function(e){return{V_sec:"ctrl",evt:"ui_pp",value:e,play_pos:t.playbackPosition()}}},CTRL_SEEK:{keys:["value","value_e","dur"],data:function(e){return{V_sec:"ctrl",evt:"ui_seek",value:t.playbackPosition(),value_e:e}}},CTRL_VOLUME:{keys:["value","value_e","play_pos"],data:function(e){return{V_sec:"ctrl",evt:"ui_cv",value:e,value_e:t.currVolume(),play_pos:t.playbackPosition()}}},CTRL_SHARE:{keys:["value"],data:function(e){return{evt:"ui_shbtn",V_sec:"ctrl",value:e}}},CTRL_REPLAY:{keys:[],data:function(){return{evt:"ui_esrpl",V_sec:"ctrl"}}},CTRL_PLAYREQUEST:{keys:["req_type"],data:function(e){return{V_sec:"ctrl",evt:"ui_pb_req",req_type:e}}},QUALITY_SELECTED:{keys:["play_pos","value","dur"],data:function(e){return{evt:"ui_qual",V_sec:"ctrl",value:e,play_pos:t.playbackPosition()}}},CC_TOGGLE:{keys:["value","play_pos"],data:function(e){return{V_sec:"ctrl",evt:"ui_cctog",value:e,play_pos:t.playbackPosition()}}},CC_LANG:{keys:["play_pos","value"],data:function(e){return{V_sec:"ctrl",evt:"ui_cclng",play_pos:t.playbackPosition(),value:e}}},CC_STYLE:{keys:["play_pos","value"],data:function(e){return{V_sec:"ctrl",evt:"ui_ccstl",play_pos:t.playbackPosition(),value:e}}},CC_SETTINGS:{keys:["play_pos"],data:function(){return{V_sec:"ctrl",evt:"ui_ccstg",play_pos:t.playbackPosition()}}},CTRL_AGEGATE_BDAY:{keys:[],data:function(){return{V_sec:"ctrl",evt:"ui_agesm"}}},FULLSCREEN:{keys:["value","play_pos"],data:function(e){return{V_sec:"ctrl",evt:"ui_fs",value:e,play_pos:t.playbackPosition()}}},CTRL_SETTINGS:{keys:["play_pos"],data:function(){return{V_sec:"ctrl",evt:"ui_stgs",play_pos:t.playbackPosition()}}},WL_CHANGE_REQUEST:{keys:["value","play_pos"],data:function(e){return{V_sec:"ctrl",evt:"ui_wltr",play_pos:t.playbackPosition(),value:e}}},CTRL_TIMER:{keys:["value","play_pos"],data:function(e){return{V_sec:"ctrl",evt:"ui_timer",play_pos:t.playbackPosition(),value:e}}},UI_LOGIN:{keys:["value"],data:function(e){return{V_sec:"ctrl",evt:"ui_login",value:e}}},CTRL_ENDSCREEN_VID:{keys:["value","value_e"],data:function(e){return{V_sec:"ctrl",evt:"ui_esvid",value:e.vindex,value_e:e.vid}}},PLAYER_ERROR:{keys:["ecode","estring","dur","play_pos"],data:function(e){return{V_sec:"pb",evt:"error",ecode:e.rep,estring:e.debugMessage||e.message,play_pos:t.playbackPosition()}}},PLAYER_WARNING:{keys:["ecode","estring"],data:function(e){return{V_sec:"pb",evt:"warn",ecode:e.rep,estring:e.debugMessage||e.message}}},PLAYER_INFO:{keys:["ecode","estring"],data:function(e){return{V_sec:"pb",evt:"info",ecode:e.rep,estring:e.debugMessage||e.message}}},API_CALLED:{keys:["source","url","latency","http_code","resp_len","instrument","perf_info","perf_stack"],data:function(e){return{V_sec:"pb",evt:"v_api",source:e.source||"na",url:e.url,latency:e.latency||t.tsapic(),http_code:e.http_code||"na",resp_len:e.resp_len||"na",instrument:e.instrument,perf_info:e.perfInfo,perf_stack:e.perfStack}}},FEEDBACK_INFO:{keys:["group","evtlog","fb_text","src"],data:function(e){return{V_sec:"pb",evt:"v_feedback",group:"g1",evtlog:e.eventLog,fb_text:e.feedbackText,src:e.source}},extras:[{baseUrl:n.sendOpts.baseUrl,keys:["group","history"],data:function(e){return{V_sec:"pb",evt:"v_feedback",group:"g2",history:JSON.stringify(e.opssInfo.history)}}},{baseUrl:n.sendOpts.baseUrl,keys:["group","profile"],data:function(e){return{V_sec:"pb",evt:"v_feedback",group:"g3",profile:JSON.stringify(e.opssInfo.profile)}}},{baseUrl:n.sendOpts.baseUrl,keys:["group","playbackInfo"],data:function(e){return{V_sec:"pb",evt:"v_feedback",group:"g4",playbackInfo:JSON.stringify(e.opssInfo.playbackInfo)}}},{baseUrl:n.sendOpts.baseUrl,keys:["group","model"],data:function(e){return{V_sec:"pb",evt:"v_feedback",group:"g5",model:JSON.stringify(e.model)}}}]},STREAMING_SESSION_BEGIN:{keys:[],data:function(){return{V_sec:"streaming",evt:"st_session_begin"}}},STREAMING_SESSION_END:{keys:[],data:function(){return{V_sec:"streaming",evt:"st_session_end"}}},STREAMING_ERROR:{keys:["code","status","details"],data:function(e){return{V_sec:"streaming",evt:"st_error",code:e.code,status:e.status,details:encodeURIComponent(e.details)}}},STREAMING_ISSUE:{keys:["code","playbackTime","desc","details"],data:function(e){return{V_sec:"streaming",evt:"st_issue",code:e.code,playbackTime:e.playbackTime,desc:encodeURIComponent(e.desc),details:encodeURIComponent(e.details)}}},STREAMING_PHASE:{keys:["playbackRequest","playbackStarted","playbackCompleted"],data:function(e){return{V_sec:"streaming",evt:"st_phase",playbackRequest:e.playbackRequest,playbackStarted:e.playbackStarted,playbackCompleted:e.playbackCompleted}}},STREAMING_DATA:{keys:["startupBitrate","bitrateSwitches","bufferEventCount","playTime","totalBufferingTime","totalRebufferingRatio","sampledRebufferingRatio","sampledBufferingTime","sampledBufferingCount","mediaPlaylistLoadCount","minPlaylistUpdateInterval","maxPlaylistUpdateInterval","avgPlaylistUpdateInterval","rebufferingTimeoutCount","playbackFrozenCount","loadingLateCount","recoveryCount"],data:function(e){return{V_sec:"streaming",evt:"st_data",startupBitrate:e.startupBitrate,bitrateSwitches:e.bitrateSwitches,bufferEventCount:e.bufferEventCount,playTime:e.playTime,totalBufferingTime:e.totalBufferingTime,totalRebufferingRatio:e.totalRebufferingRatio,sampledRebufferingRatio:e.sampledRebufferingRatio,sampledBufferingTime:e.sampledBufferingTime,sampledBufferingCount:e.sampledBufferingCount,mediaPlaylistLoadCount:e.mediaPlaylistLoadCount,minPlaylistUpdateInterval:e.minPlaylistUpdateInterval,maxPlaylistUpdateInterval:e.maxPlaylistUpdateInterval,avgPlaylistUpdateInterval:e.avgPlaylistUpdateInterval,rebufferingTimeoutCount:e.rebufferingTimeoutCount,playbackFrozenCount:e.playbackFrozenCount,bufferFrozenCount:e.bufferFrozenCount,loadingLateCount:e.loadingLateCount,recoveryCount:e.recoveryCount}}},STREAMING_WARNING:{keys:["code","playbackTime","desc","details"],data:function(e){return{V_sec:"streaming",evt:"st_warning",code:e.code,playbackTime:e.playbackTime,desc:encodeURIComponent(e.desc),details:encodeURIComponent(e.details)}}},STREAMING_PLAYER_WARNING:{keys:["code","status","details"],data:function(e){return{V_sec:"streaming",evt:"st_player_warning",code:e.code,status:e.status,details:encodeURIComponent(e.details)}}}}}t.exports=r;var i=e("./metrics-constants"),a=e("../../../lib/user-agent"),o=e("../util")},{"../../../lib/user-agent":"ty5FFo","../util":"jJTEqU","./metrics-constants":33}],37:[function(e,t,n){"use strict";function r(e){var t=this,n=["pid","vid","vpt","r","cb"],r={pid:function(){return o},vid:e.videoId,vpt:e.autoplay,w:function(){var t=e.dimensions().split("x");return t[0]},h:function(){var t=e.dimensions().split("x");return t[1]},q:e.videoQuartile,r:e.pageUrl,cb:e.randomVal,nv:function(){return"1"},at:function(){return"preroll"},aen:function(){return"Yahoo"},asn:function(){return"1"},ar:function(){return"yes"},v:function(){return"54d54a0be4b0417331ae4e01"},acid:function(){return"54d54cc3e4b0417331ae4e26"},aert:function(){return"50"},asid:function(){return"54d54cf8e4b0417331ae4e29"}},o=i(e,n,r);t.sendOpts={baseUrl:"//trk.vidible.tv/trk/",target:"vidible",paramGetters:r,beginningKeys:n},t.beaconMappings={PLAYBACK_START:{baseUrl:t.sendOpts.baseUrl+"video-play.gif",keys:["h","w"],data:{}},PLAYBACK_PROGRESS:{baseUrl:t.sendOpts.baseUrl+"video-quartile.gif",firingCriteria:[a.QUARTILE_PROGRESS_INTERVAL],keys:["q"],data:{}},AD_START:{baseUrl:t.sendOpts.baseUrl+"ad-request.gif",keys:["at","asn"],data:{},extras:[{keys:["at","aen","asid","acid","v"],data:{},baseUrl:t.sendOpts.baseUrl+"ad-engine-request.gif"},{keys:["aen","at","ar","asid","acid","aert","v"],data:{},baseUrl:t.sendOpts.baseUrl+"ad-engine-response.gif"},{keys:["at","aen","stg","asid","acid","v"],data:{stg:"loaded"},baseUrl:t.sendOpts.baseUrl+"ad-engine-flow.gif"},{keys:["at","aen","stg","asid","acid","v"],data:{stg:"win"},baseUrl:t.sendOpts.baseUrl+"ad-engine-flow.gif"},{keys:["at","aen","asid","acid","stg","v"],data:{stg:"started"},baseUrl:t.sendOpts.baseUrl+"ad-engine-flow.gif"}]},AD_COMPLETE:{baseUrl:t.sendOpts.baseUrl+"ad-engine-flow.gif",keys:["at","aen","asid","acid","stg","v"],data:{stg:"finished"}}}}function i(e,t,n){var r=decodeURIComponent(e.experienceType().replace(/&(amp;)+/g,"%26")),i=r.split("&"),a=i.shift();return i.forEach(function(e){var r=e.split("="),i=r[0],a=r[1];n[i]=function(){return a},-1===t.indexOf(i)&&t.push(i)}),a}t.exports=r;var a=e("./metrics-constants")},{"./metrics-constants":33}],38:[function(e,t,n){"use strict";function r(e){return!!e}function i(e,t){var n={defaultVal:e||!1,transform:r};return t&&(n.configName=t),n}function a(e,t){var n={defaultVal:e||"",validator:S.isString};return t&&(n.configName=t),n}function o(){return A.isFlashInstalled()&&S.isFunction(b)}function s(){if(!S.isFunction(f))return!1;var e=window.MediaSource;return e&&e.isTypeSupported('video/mp4; codecs="avc1.640028"')&&e.isTypeSupported('audio/mp4; codecs="mp4a.40.2"')?!0:!1}function l(){return T.mobile?!1:T.chrome&&T.chrome>=37?!0:T.ie?!0:!1}function d(){if(!S.isFunction(g))return!1;var e=window.MediaSource;return e?!0:!1}function c(e,t,n){return T.mobile?!1:!n||"sidekicktv"!==n.toLowerCase()||"news"!==t&&"finance"!==t&&"sports"!==t?T.chrome<47&&T.firefox<44&&T.ie<11&&T.edge<12||window.location.href.indexOf("forceFlash=true")>-1?!1:window.location.href.indexOf("enableHTML5HLS=true")>-1||A.isInternalUser()?!0:T.winXP||T.winVista||T.win8?!1:"windows"!==T.os||T.win64?"cavideo"===n?!1:window.location.href.indexOf("finance.yahoo.com/brklivestream")>-1?!1:T.chrome>=47?!0:T.firefox>=44?!0:!1:!1:!1}function p(){return T.mobile?!1:!T.safari||T.safari<8||window.location.href.indexOf("forceFlash=true")>-1?!1:window.location.href.indexOf("enableHTML5=true")>-1||A.isInternalUser()?!0:!1}function u(e){var t=this;t.items=[],t.position=-1,t._mediaStore=e}function _(){var e=this;e.ad=null,e.state=E.INIT,e.paused=!1,e.seeking=!1,e.loading=!0,e.criticalError=null,e.previousItem=null,e.looped=!1,e.loadedItem=null,e.rendererType=null}function m(e,t){var n,r,i,a,m=this;if(m.guid=A.generateGuid(),m.mediaStore=t||new h.MediaStore,m.errors=[],e){m._config=e,m.playbackState=new _,h.fillFromConfig(C,e,m,m.errors),
(e.userprefs||{}).closedcaptionprefs?m.userPreferences.closedCaptions.isAvailable=!0:m.userPreferences.closedCaptions.isAvailable=!1,m.disableCasting="boolean"==typeof e.disableCasting?e.disableCasting:!1,m.ui.chromeless&&(m.ui.showStartScreen=!1,m.ui.showControls=!1,m.ui.showEndScreen=!1,m.ui.showAgeGate=!1),m.rendererTypes=[];var v=!1;m.adsRendererTypes=[],n=("hls"===m.baseConfig._html5||c(m._config.region,m._config.site,m._config.expName))&&d()&&"raw"!==m.baseConfig._html5,a=!n&&p(),r=("dash"===m.baseConfig._html5||l())&&s(),v=!r&&m.baseConfig._html5!==!0&&"raw"!==m.baseConfig._html5,i=v&&o()&&!S.isFunction(M)&&!T.mobile&&!T.tv,m.useFlash=i,n&&m.rendererTypes.push(L.HTML5_HLS),a&&m.rendererTypes.push(L.HTML5_RAW),r&&m.rendererTypes.push(L.HTML5_DASH),i&&m.rendererTypes.push(L.FLASH),m.rendererTypes.push(L.HTML5_RAW),i&&m.adsRendererTypes.push(L.FLASH),m.adsRendererTypes.push(L.HTML5_RAW),T.tv&&(m.rendererTypes=[],m.adsRendererTypes=[],T.tizen?(m.rendererTypes.push(L.HTML5_TV_TIZEN),m.adsRendererTypes.push(L.HTML5_TV_TIZEN)):T.orsay?(m.rendererTypes.push(L.HTML5_TV_ORSAY),m.adsRendererTypes.push(L.HTML5_TV_ORSAY)):(m.rendererTypes.push(L.HTML5_TV),m.adsRendererTypes.push(L.HTML5_TV))),m.capabilities={},m.adsCapabilities={},m.rendererTypes.forEach(function(e){m.capabilities[e]=y(e),m.playback.skipFormats.length>0&&(m.capabilities[e].preferredFormats=m.capabilities[e].preferredFormats.filter(function(e){return-1===m.playback.skipFormats.indexOf(e)}))}),m.adsRendererTypes.forEach(function(e){m.adsCapabilities[e]=y(e),m.playback.skipFormats.length>0&&(m.adsCapabilities[e].preferredFormats=m.adsCapabilities[e].preferredFormats.filter(function(e){return-1===m.playback.skipFormats.indexOf(e)}))}),m.errors.length;var f=(((e.prefetch||{}).query||{}).results||{}).mediaObj;f&&m.mediaStore.fillFromSapi(f,m.rendererTypes,m.capabilities,m.errors);var g=e.prefetchIds;if(g&&S.isArray(g)){var b=g.map(function(e){return{id:e}});m.mediaStore.fillFromSapi(b,m.rendererTypes,m.capabilities,m.errors)}m.playlist=new u(m.mediaStore),e.playlist&&(m.playlist.initializeFromRaw(e.playlist,m.rendererTypes,m.capabilities,m.errors),m.errors.length),e.ignoreEndlist&&(m.playback.ignoreEndlist=!0)}}t.exports={Model:m,Playlist:u,_PlaybackState:_};var v=e("./yvap/ads-json"),y=e("../../lib/capability"),f=e("./renderers/html5-dash"),g=e("./renderers/html5-hls"),b=(e("./renderers/html5-tv"),e("./renderers/tizen"),e("./renderers/orsay"),e("./renderers/flash")),h=e("./media-store"),E=e("./states"),T=e("../../lib/user-agent"),A=e("./util"),S=e("../../lib"),I=(e("../../lib/logger"),e("./metrics/metrics-constants")),L=e("./renderers/type"),M=e("./views/tumblr-controls"),C={version:{defaultVal:"7.86.34.1468869355",validator:S.isString},playlist:{id:{defaultVal:null,validator:S.isString}},CMS:{colo:{defaultVal:null,validator:S.isString},suppressAdContext:i(),enableCache:i(T.tv?!1:!0),cachedVs:{defaultVal:null,validator:S.isString}},pageLatency:{pagePlayerJsDownloadTime:{defaultVal:null,validator:S.isNumber}},forcePreloadBufferLimit:{defaultVal:32,validator:S.isNumber},html5_hls:{useWorker:i(!0),preloadBufferLimit:{defaultVal:8,validator:S.isNumber}},ui:{configName:null,contentTypeLabel:{defaultVal:null,validator:S.isString},chromeless:i(!1,"chromeless"),startScreenConfig:{configName:"startscreen",transform:function(e){return S.isObject(e)?e:{}},showProvider:i(!0),showDescription:i(!0,"showDesc"),showButton:i(!0),showTitle:i(!0)},showStartScreen:{configName:"startscreen",defaultVal:!0,transform:function(e){return S.isObject(e)?!0:r(e)}},showControls:i(!0),showTitleOnStart:{defaultVal:"",validator:S.isString},showTitleOnHover:i(!0),showEndScreen:i(!0,"endscreen"),showFullscreen:i(!0,"fullscreenBtn"),showReplayOnlyEndScreen:i(!1,"replayonlyendscreen"),showAgeGate:{defaultVal:i(!0),validator:S.isBoolean},thumbnailDimensions:{height:{defaultVal:null,validator:S.isNumber},width:{defaultVal:null,validator:S.isNumber}},vttIndex:{defaultVal:null,validator:S.isNumber},playlistUI:{show:i(!1),playlistId:{defaultVal:null,validator:S.isString},playlistAlias:{defaultVal:null,validator:S.isString},position:{defaultVal:null,validator:S.isString},theme:{defaultVal:"light",validator:S.isString},inStream:i(!1)},docking:{enableOnScrollDown:i(!1),enableOnScrollUp:i(!1),fadeInAnimation:i(!0),positionTop:{defaultVal:-1,validator:S.isNumber},positionRight:{defaultVal:20,validator:S.isNumber},positionLeft:{defaultVal:-1,validator:S.isNumber},positionBottom:{defaultVal:20,validator:S.isNumber},width:{defaultVal:320,validator:S.isNumber},height:{defaultVal:180,validator:S.isNumber},threshold:{defaultVal:50,validator:S.isNumber},enableOnMuted:i(!0),showInfoCard:i(!0)}},YVAP:{accountId:{defaultVal:null,validator:S.isString},playContext:{defaultVal:null,validator:S.isString},timeout:{defaultVal:3,transform:function(e){return parseInt(e)}},cTopic:{defaultVal:null,validator:S.isString},standaloneAd:{xml:{defaultVal:null,validator:S.isString},gemini:{defaultVal:null},rules:{defaultVal:null},beacons:{defaultVal:null},showAdSlug:i(!1)},vpaidTimeout:{defaultVal:null,validator:S.isNumber},adsReady:i(),customSPID:{defaultVal:null,validator:S.isString},customDomain:{defaultVal:"",validator:S.isString},preInitVpaid:i(!1)},metrics:{configName:null,comscoreC4:{defaultVal:"",validator:function(e){return S.isString(e)&&""!==e}},ccode:{defaultVal:"",validator:S.isString},sec:{defaultVal:"",validator:S.isString},skipComscore:{defaultVal:!1,validator:S.isBoolean},skipABRBeacon:i(!0),ywaSamplingRate:{defaultVal:1,validator:S.isNumber},ultSamplingRate:{defaultVal:1,validator:S.isNumber},qosSamplingRate:{defaultVal:1,validator:S.isNumber},cpos:{defaultVal:"",validator:S.isString},progressBeaconStrategy:{configName:"progressBeaconStrategy",defaultVal:null,fixed:{configName:"fixed",defaultVal:[],validator:function(e){return S.isArray(e)&&e.every(function(e){return S.isNumber(e)})}},recurring:{configName:"recurring",defaultVal:null,validator:S.isNumber},playerUnload:i(!1),playPause:i(!1)}},playback:{configName:null,continuousPlay:i(),autoplay:i(),bitrate:{configName:null,defaultVal:0,validator:S.isNumber},targetBitrate:{defaultVal:NaN,validator:S.isNumber},disableGPU:i(!1),quality:{defaultVal:"auto",validator:S.isString},bitrates:{defaultVal:[],validator:function(e){return S.isArray(e)&&e.every(function(e){return S.isNumber(e)})}},heights:{defaultVal:[],validator:function(e){return S.isArray(e)&&e.every(function(e){return S.isNumber(e)})}},desiredBitrate:{defaultVal:900,validator:S.isNumber},loop:i(),startTime:{defaultVal:NaN,validator:S.isNumber},stopBufferingOnPause:i(!1),conviva:i(!0),preload:i(!1,"preload"),preconnect:i(!0),fullscreen:i(),abr:i(),adPlaybackOnly:i(),protocol:{configName:null,defaultVal:"",validator:S.isString},skipFormats:{defaultVal:[],validator:function(e){return S.isArray(e)&&e.every(function(e){return S.isString(e)})}},playInlineVideo:i(!0,"playinlinevideos"),isResume:i(!1),ignoreEndlist:i(!1),requestType:{configName:null,defaultVal:null,validator:function(e){return[null,I.CLICK,I.AUTOPLAY,I.API,I.CONTINUOUS].indexOf(e)>-1}},requestAction:{defaultVal:null,validator:function(e){return[null,I.CLICK,I.AUTOPLAY,I.HOVER,I.SCROLL].indexOf(e)>-1}}},playbackState:{configName:null,mute:{defaultVal:null,transform:r},volume:{defaultVal:null,validator:function(e){return S.isNumber(e)&&e>=0&&1>=e}}},uiState:{configName:null,width:{configName:null,defaultVal:null},height:{configName:null,defaultVal:null},startScreenRendered:{configName:null,defaultVal:!1},isDocked:{configName:null,defaultVal:!1}},userPreferences:{configName:"userprefs",validator:S.isObject,closedCaptions:{configName:"closedcaptionprefs",show:i(!1),lang:{defaultVal:"en-US",validator:S.isString},fontSize:{defaultVal:24,validator:S.isNumber},fontName:{defaultVal:"Arial, Helvetica, sans-serif",validator:S.isString},fontColor:{defaultVal:"#ffffff",validator:S.isString},fontOpacity:{defaultVal:1,validator:S.isNumber},fontEffect:{defaultVal:"none",validator:S.isString},bgColor:{defaultVal:"#000000",validator:S.isString},bgOpacity:{defaultVal:.75,validator:S.isNumber},ccPos:{defaultVal:"bottom",validator:S.isString},isAvailable:i(!1),hasChanged:i(!1)},isAdult:{defaultVal:null,validator:S.isBoolean},isAuthenticated:{defaultVal:i(!0),validator:S.isBoolean}},baseConfig:{configName:null,site:{defaultVal:"",validator:S.isString},siteAnalytics:{configName:"site_analytics",defaultVal:"",validator:S.isString},region:{defaultVal:"",transform:function(e){return S.isString(e)?e.toUpperCase():void 0},validator:S.isString},lang:{defaultVal:"",validator:S.isString},referrer:{defaultVal:"",validator:S.isString},jurisdiction:{defaultVal:"",validator:S.isString},_html5:{configName:"html5",defaultVal:!1,validator:function(e){return"dash"===e||"hls"===e||"raw"===e||S.isBoolean(e)}},experienceType:{configName:"expType",defaultVal:"",validator:S.isString},experienceName:{configName:"expName",defaultVal:"",validator:S.isString},experienceBucket:{configName:"expBucket",defaultVal:"",validator:S.isString},pageSpaceId:{defaultVal:"",validator:S.isString},syndication:{configName:"synd",defaultVal:"",validator:S.isString}},playerDimension:{configName:null,width:{configName:null,defaultVal:0},height:{configName:null,defaultVal:0}},CTV:{man:{defaultVal:"",validator:S.isString},"class":{defaultVal:"",validator:S.isString},ctvMetricsParams:{ctv_db:a(),ctv_dc:a(),_di:a(),ctv_di:a(),ctv_ddv:a(),ctv_dfv:a(),_dv:a(),_lo:a(),_dm:a(),_dl:a(),_dc:a(),_osv:a(),ctv_yb:a(),_sr:a(),ctv_yr:a(),ctv_ybv:a(),ctv_yv:a(),_an:a(),_av:a(),_at:a()},forceHttp:{defaultVal:!1,validator:S.isBoolean}},skipOnError:{defaultVal:"never",validator:S.isString},failOver:{configName:"failover",beaconDisasterMode:{defaultVal:!1,configName:"beaconDisasterMode",validator:S.isBoolean},sapiUrl:{defaultVal:null,validator:S.isString},convivaSamplingRate:{configName:"convivaSamplingRate",vod:{defaultVal:0,validator:function(e){return S.isNumber(e)&&e>=0&&1>=e}},live:{defaultVal:.5,validator:function(e){return S.isNumber(e)&&e>=0&&1>=e}}}}};u.prototype.initializeFromRaw=function(e,t,n,r){var i=this;e&&(S.isObject(e)?e.id?i.id=e.id:i.appendFromRaw(e.mediaItems,t,n,r):h.addError("Playlist must be an object",r))},u.prototype.appendFromRaw=function(e,t,n,r){var i=this;if(e){if(!S.isArray(e))return void h.addError("mediaItems must be an array",r);for(var a=e.length,o=0;a>o;o++){var s=e[o],l=i._mediaStore.updateItemFromRaw(s,t,n,r);i.items.push(l.id)}a&&-1===i.position&&(i.position=0)}},u.prototype.getMediaItemAt=function(e){var t=this;return 0>e||e>=t.items.length?null:t._mediaStore.get(t.items[e])},u.prototype.getMediaItemById=function(e){var t=this;return e?t._mediaStore.get(e):null},u.prototype.getCurrentItem=function(){var e=this;return e.getMediaItemAt(e.position)},u.prototype.appendItem=function(e){var t=this,n=t.items.length;return t.items.push(e),n},u.prototype.getItems=function(){for(var e=this,t=[],n=0;n<e.items.length;n++)t.push(e.getMediaItemAt(n));return t},u.prototype.getItemPosition=function(e){var t=this,n=t.items.indexOf(e);return n},u.prototype.getNextPosition=function(e,t,n){var r=this;if(n=n||{},n.looped=!1,n.ended=!1,-1===r.position)return-1;if(!r.items.length)return-1;if(e){var i=r.position+1;if(i<r.items.length)return i;if(t&&i===r.items.length)return n.looped=!0,0;r.playbackStopped=!0}return!e&&t?(n.looped=!0,r.position):(n.ended=!0,-1)},u.prototype.getCurrentVideoShowName=function(){var e=this,t=e.getCurrentItem();return t&&t.getShowName()},u.prototype.isCurrentVideoOriginalShow=function(){var e=this,t=e.getCurrentItem();return t&&t.isOriginalShow()===!0?!0:!1},u.prototype.isCurrentVideoSeriesEpisode=function(){var e=this,t=e.getCurrentItem();return t&&t.isSeriesEpisode()===!0?!0:!1},_.prototype.attemptingPlayback=function(){var e=this;return e.videoSet()&&!e.paused||e.state===E.WAITING},_.prototype.isVideoPlaying=function(){var e=this;return e.videoSet()&&!e.paused},_.prototype.videoSet=function(){var e=this;return e.state===E.VIDEO},_.prototype.isOnCriticalError=function(){var e=this;return e.state===E.END&&e.criticalError},_.prototype.videoLoading=function(){var e=this;return e.videoSet()&&e.loading},_.prototype.isAdPlaying=function(){var e=this;return e.videoSet()&&e.ad},_.prototype.isVpaidAdPlaying=function(){var e=this;return e.isAdPlaying()&&e.ad.type===v.ADTYPES.VPAID},m.prototype.endScreenToPlaylistEnabled=function(){return-1!==window.location.href.indexOf("playlistExp=true")},m.prototype.getConfig=function(){var e=this;return e._config},m.prototype.isLocal=function(){var e=this;return e.version.indexOf("local")>-1},m.prototype.isFlashRendererEnabled=function(){var e=this;return!!e.useFlash},m.prototype.isHtmlEnforced=function(){var e=this;return e.baseConfig._html5===!0||"dash"===e.baseConfig._html5||"hls"===e.baseConfig._html5},m.prototype.destroy=function(){var e=this;e.playlist.position=-1},m.prototype.getModelSchema=function(){return C}},{"../../lib":"bRhrlU","../../lib/capability":"TL7Kjz","../../lib/logger":"IS9j5T","../../lib/user-agent":"ty5FFo","./media-store":26,"./metrics/metrics-constants":33,"./renderers/flash":42,"./renderers/html5-dash":155,"./renderers/html5-hls":44,"./renderers/html5-tv":155,"./renderers/orsay":155,"./renderers/tizen":155,"./renderers/type":47,"./states":50,"./util":"jJTEqU","./views/tumblr-controls":155,"./yvap/ads-json":100}],39:[function(e,t,n){"use strict";function r(e){var t=this;t._config=e,t.startTime=e&&e.insideIframeConfig&&e.insideIframeConfig.startTime?e.insideIframeConfig.startTime:Date.now(),t.startTime=Date.now(),t._profileItems=[]}t.exports=r;var i=e("../../lib/user-agent"),a=e("./util"),o=e("./views/profiler.html");r.prototype.add=function(e){var t=this,n=t._findItem(e);n>-1&&t._profileItems.splice(n,1),t._profileItems.push({type:e.type,desc:e.desc,startTime:Date.now()-t.startTime,endTime:null})},r.prototype._findItem=function(e){for(var t=this,n=0;n<t._profileItems.length;n++){var r=t._profileItems[n];if(e.type===r.type)return n}return-1},r.prototype.getItem=function(e){var t=this,n=t._findItem(e);return n>-1?t._profileItems[n]:null},r.prototype.setEndTime=function(e,t,n){var r=this,i=r.getItem(e);t||(t=Date.now(),n=!0),i&&(i.endTime=n?t-r.startTime:t,i.timeDiff=i.endTime-i.startTime)},r.prototype.render=function(e){var t=this,n=t._profileItems.slice(0);n.forEach(function(e){e.startWidth=e.startTime/4,e.barWidth=e.timeDiff/4});var r=a.render(o,{config:JSON.stringify(t._config,null,2),profileItems:n});if(e){var s=document.createElement("div");s.appendChild(r),s.appendChild(e),r=s}if(i.mobile)document.write(r.innerHTML);else{var l=window.open();l&&l.document.write(r.innerHTML)}}},{"../../lib/user-agent":"ty5FFo","./util":"jJTEqU","./views/profiler.html":88}],40:[function(e,t,n){"use strict";function r(e,t){var n=this;n._eventBus=e,n._model=t,n._reset(),n._ER=null,n._cdnDownTimeout=null,n._eventBus.subscribe(a.Video.WAITING,n._onWaiting,n),n._eventBus.subscribe(a.ERROR,n._onError,n)}t.exports=r;var i=e("./error"),a=e("./event"),o=e("./media-store"),s=e("./util"),l=(e("../../lib"),e("./states"),e("../../lib/logger"),["400","501"]),d=["7","57"],c=["700","701","710","711","720","721","722","730","731","732","740","750","760"],p=["103","500","502","503","550","403","404","504"],u={INIT_OR_PLAYING:0,BUFFERING:1,ERROR:2,API:3},_=1e4,m=1e4,v=2e3,y=1e4,f=1e4,g=2e4;r.prototype._reset=function(){var e=this;e._recoveryTimeoutVal=Math.random()*m+_,e._recoveryTimeoutIncr=v,e._stopTimer(),e._recoveryState=u.INIT_OR_PLAYING,e._ERTried=!1},r.prototype._onWaiting=function(e){var t=this,n=e&&e.value;n?t._startTimer(t._recoveryTimeoutVal):t._reset()},r.prototype._onError=function(e){var t=this;if(e&&t._shouldRecover(e)){if("400"===e.category.toString()&&"7"===e.subcategory.toString())return t._cdnDownTimeout&&(clearTimeout(t._cdnDownTimeout),t._cdnDownTimeout=null),void(t._cdnDownTimeout=setTimeout(function(){t.recover(u.ERROR)},Math.random()*y));t.recover(u.ERROR)}},r.prototype.recover=function(e){var t=this;t._recoveryState===u.INIT_OR_PLAYING&&(t._stopTimer(),t._isERConfigured()&&(t._fetchERTimeout=setTimeout(function(){t._getER()},f)),t._recoveryState=e?e:u.API,t._model.playlist.getCurrentItem().failoverCount++,t._model.playlist.getCurrentItem().recoveryStatus=o.ItemRecoveryStatus.RECOVERING,t._eventBus.publish(a.RECOVERY_START,t._onSapiErr.bind(t)))},r.prototype.shouldRenderErrorScreen=function(e){return e?l.indexOf(e.category.toString())<0||d.indexOf(e.subcategory.toString())<0&&c.indexOf(e.subcategory.toString())<0&&p.indexOf(e.subcategory.toString())<0:!1},r.prototype._shouldRecover=function(e){var t=this;return e?(c.indexOf(e.subcategory.toString())>=0||e.category===i.E_SAPI_STREAM)&&t._model.playlist.getCurrentItem().failoverCount>0?!1:!t.shouldRenderErrorScreen(e):!1},r.prototype._isERConfigured=function(){var e=this;return e._model.failOver&&e._model.failOver.sapiUrl},r.prototype._onSapiErr=function(e){var t=this;return t._recoveryState?(t._eventBus.publish(a.WARNING,s.createErr("P",t._model.playbackState,i.E_WARNING,i.WARNING_CODES.E_PLAYBACK_FROZEN_DETECTED,null,t._recoveryState)),void(e?t._isERConfigured()?t._getER():t._restartTimer():(t._eventBus.publish(a.RECOVERY_METADATA_READY),t._reset()))):void t._model.playlist.getCurrentItem().failoverCount--},r.prototype._getER=function(){var e=this;if(e._ER)return e._eventBus.publish(a.ER_READY,e._ER),void e._reset();if(e._ERTried)return void e._restartTimer();var t={context:e,timeout:g,responseTypeJson:!0,jsonpHandler:function(){},successHandler:function(t){e._publishERCallInfo("success "+n),e._ER=t,e._eventBus.publish(a.ER_READY,e._ER),e._reset()},failureHandler:function(t){e._publishERCallInfo("failure "+n),e._restartTimer()}},n=e._model.failOver.sapiUrl.replace(new RegExp("{uuid}"),e._model.playlist.getCurrentItem().id);s.ajax(n,t),e._ERTried=!0},r.prototype._startTimer=function(e){var t=this;t._stopTimer(),t._frozenDetectionTimeout=setTimeout(function(){t.recover(t._recoveryState?t._recoveryState:u.BUFFERING)},e)},r.prototype._stopTimer=function(){var e=this;e._fetchERTimeout&&(clearTimeout(e._fetchERTimeout),e._fetchERTimeout=null),e._frozenDetectionTimeout&&(clearTimeout(e._frozenDetectionTimeout),e._frozenDetectionTimeout=null)},r.prototype._restartTimer=function(){var e=this;e._recoveryTimeoutVal+=e._recoveryTimeoutIncr,e._recoveryTimeoutIncr*=2,e._startTimer(e._recoveryTimeoutVal),e._ERTried=!1},r.prototype._publishERCallInfo=function(e){var t=this;t._eventBus.publish(a.WARNING,s.createErr("P",t._model.playbackState,i.E_WARNING,i.WARNING_CODES.E_ER_TRY,null,e))},r.prototype.destroy=function(){var e=this;e._reset(),e._ER=null,e._cdnDownTimeout=null}},{"../../lib":"bRhrlU","../../lib/logger":"IS9j5T","./error":20,"./event":"YJm+dH","./media-store":26,"./states":50,"./util":"jJTEqU"}],41:[function(e,t,n){"use strict";var r=e("../../lib/user-agent"),i=e("../../lib/logger"),a=e("./util"),o=e("./event"),s=e("./renderers/type"),l=e("./renderers/modes"),d="yvp-mode-",c={};c[s.FLASH]=e("./renderers/flash"),c[s.HTML5_TV]=e("./renderers/html5-tv"),c[s.HTML5_DASH]=e("./renderers/html5-dash"),c[s.HTML5_HLS]=e("./renderers/html5-hls"),c[s.HTML5_RAW]=e("./renderers/html5-raw"),c[s.HTML5_TV_TIZEN]=e("./renderers/tizen"),c[s.HTML5_TV_ORSAY]=e("./renderers/orsay");var p=function(e){var t=this;t._view=e,t._eventBus=e.getEventBus(),t._model=e.getModel(),t._profiler=e.getProfiler(),t._contentNode=e.getContentNode(),t._mainNode=e.getMainElement(),t._flashRenderer=null,t._activeRenderer=null,t._nextRenderer=null,t._nextRendererSignature=null,t._nextRendererPreloadSignature=null,t._inactiveRenderers={},t._bindEvents()};p.prototype._bindEvents=function(){var e=this;e._eventBus.subscribe(o.RENDERER_PP_NEXT,e._handleAdvancePreparePreloadNextRenderer,e)},p.prototype._createRenderer=function(e){var t=this,n=t._model,i=t._eventBus,a=t._profiler,o=t._model.capabilities[e],d=t._inactiveRenderers[e];if(d)return t._toggleRendererOperation(d,!0),d;switch(e){case s.FLASH:if(t._flashRenderer)return t._flashRenderer;d=new c[s.FLASH](i,n,a),d.detectFlashBlockers(t._mainNode),t._flashRenderer=d;break;case s.HTML5_DASH:d=new c[s.HTML5_DASH](i,n);break;case s.HTML5_HLS:d=new c[s.HTML5_HLS](i,n,a);break;case s.HTML5_TV:d=new c[s.HTML5_TV](i,o,a,n);break;case s.HTML5_TV_TIZEN:d=new c[s.HTML5_TV_TIZEN](i,o,a,n);break;case s.HTML5_TV_ORSAY:d=new c[s.HTML5_TV_ORSAY](i,o,a,n);break;default:d=new c[s.HTML5_RAW](i,o,a,n)}return t._mainNode.appendChild(d.create()),e!==s.FLASH&&t._model.ui&&t._model.ui.showControls&&(r.iphone||r.android)&&(d.node.controls=!0),d.mode=l.VIDEO,t._inactiveRenderers[e]=d,d},p.prototype._setupRenderer=function(e){var t,n=this;return t=r.tv?r.tizen?n._createRenderer(s.HTML5_TV_TIZEN):r.orsay?n._createRenderer(s.HTML5_TV_ORSAY):n._createRenderer(s.HTML5_TV):n._createRenderer(e)},p.prototype._updateSelectedStreams=function(e,t){if(e&&t){for(var n=0;n<t.length;n++)t[n].cdn=a.getMediaCDNName(e,t,null);e.fillSelectedStreams(t,null)}},p.prototype._addToInactiveRenderers=function(e){var t,n=this,r=!0;e&&(t=e.type,n._inactiveRenderers[t]||(n._inactiveRenderers[t]=e,r=!1),n._toggleRendererOperation(e,!1),r&&t!==s.FLASH&&e.destroy())},p.prototype._toggleRendererOperation=function(e,t){var n;e&&(n=e.type,n===s.FLASH?t||(e.stopMedia(),e.unbindPlaybackEvents()):t?(e.detachNode&&e.detachNode(),e.reattachNode&&e.reattachNode()):(e.detachNode&&e.detachNode(),e.stopMedia&&e.stopMedia()))},p.prototype._handleRendererTimeout=function(){var e=this;e._view.syncViewState(),(r.safari||r.firefox)&&e._view.setBlockedFlashState()},p.prototype._generateRendererSignature=function(e,t){var n,r,i=[],a=e.ad,o=e.mediaItem;return i.push(e.rendererType),i.push(t),a?(i.push("ad"),i.push(a.playbackId),i.push(a.adId),i.push(a.position),n=a.streams,n&&n.length>0&&i.push(n[0].url),r=a.adObj,r&&(i.push(r.adFormat),i.push(r.creativeId),i.push(r.bookingId),i.push(r.serveId))):o&&(i.push("mediaItem"),i.push(o.id),n=o.streams,n&&n.length>0&&i.push(n[0].url)),i.join("|")},p.prototype._handleAdvancePreparePreloadNextRenderer=function(e){var t=this;e&&e.rendererType===s.HTML5_HLS&&t.prepareNextRenderer({rendererType:e.rendererType,mediaItem:e},function(n){n||t._nextRenderer===t._activeRenderer||e.isLive()||t.preloadNextRenderer({mediaItem:e,isAdvancePreload:!0,forcePreloadStream:!0})})},p.prototype.setupDefault=function(){var e=this;return e._model.isFlashRendererEnabled()?void e._setupRenderer(s.FLASH):!0},p.prototype.prepareNextRenderer=function(e,t){var n,a,o=this;return t||(t=function(){}),e?(n=e.rendererType,o._contentNode?n?(a=o._generateRendererSignature(e),o._nextRendererSignature===a?void t():((r.mobile||r.tv)&&o._activeRenderer?o._nextRenderer=o._activeRenderer:o._nextRenderer=o._setupRenderer(n),o._nextRendererSignature=a,void o._nextRenderer.waitForReady(function(e){e&&o._handleRendererTimeout(),t(e)}))):(i.log("RendererController.prepareNextRenderer: no renderer type is given"),void t(new Error("no renderer type is given"))):(i.log("RendererController.prepareNextRenderer: no container node is set"),void t(new Error("no container node is set")))):void t(new Error("no data is given"))},p.prototype.preloadNextAdRenderer=function(e){var t=this,n=e.bestStream,r=e.mediaItem,i={rendererType:e.rendererType,ad:e.ad},a=function(){t.preloadNextAdRenderer(e)},o=function(){var e=t._generateRendererSignature(i),a={streams:[n]};return r&&n?(t._updateSelectedStreams(r,a.streams),t._nextRendererPreloadSignature===e?!0:t._nextRenderer?(t._nextRendererPreloadSignature=e,t._nextRenderer.setStreams(a)):void 0):!1},s=t._generateRendererSignature(i);return t._nextRendererSignature===s?o():void t.prepareNextRenderer(i,a)},p.prototype.preloadNextRenderer=function(e){var t,n,r,i,a=!1;if(!e)return!1;if(t=e.mediaItem,n=e.startTime,r=e.forcePreloadStream,i=e.isAdvancePreload,!t)return!1;var o=this,l={rendererType:t.rendererType,mediaItem:t},d=function(){o.preloadNextRenderer(e)},c=function(){var e,d=o._generateRendererSignature(l,n),c={streams:t.streams,streamProfiles:t.streamProfiles,abr:o._model.playback.abr,uuid:t.id,isCCM:t.isCCM,startTime:n,ignoreEndlist:t.isLive()&&o._model.playback.ignoreEndlist};return i||o._updateSelectedStreams(t,c.streams),o._nextRendererPreloadSignature===d?!0:o._nextRenderer?(o._nextRendererPreloadSignature=d,a=o._nextRenderer.setStreams(c),a&&r&&o._nextRenderer.type===s.HTML5_HLS&&(e=o._model.forcePreloadBufferLimit||30,o._nextRenderer.preload(e)),a):void 0},p=o._generateRendererSignature(l);return o._nextRendererSignature===p?c():void o.prepareNextRenderer(l,d)},p.prototype.switchToRenderer=function(e){var t=this,n=t._activeRenderer;t._activeRenderer=e,t._model.playbackState.rendererType=t._activeRenderer.type,t.setVolume(t._model.playbackState.volume),t.setMute(t._model.playbackState.mute),n?n!==t._activeRenderer&&(t._activeRenderer.type===s.FLASH&&t._activeRenderer.bindPlaybackEvents(),a.classList(n.node).remove("yvp-renderer-active"),a.classList(t._activeRenderer.node).add("yvp-renderer-active"),t._addToInactiveRenderers(n)):(t._activeRenderer.type===s.FLASH&&t._activeRenderer.bindPlaybackEvents(),a.classList(t._activeRenderer.node).add("yvp-renderer-active")),t._view.syncViewState(),t._eventBus.publish(o.RENDERER_SWITCHED,{active:t._activeRenderer})},p.prototype.switchAndPlayNextRenderer=function(e){var t=this;t.switchToNextRenderer(),t.play(e)},p.prototype.switchToNextRenderer=function(){var e=this;e._nextRenderer&&(delete e._inactiveRenderers[e._nextRenderer.type],e.switchToRenderer(e._nextRenderer),e._nextRendererSignature=null,e._nextRendererPreloadSignature=null)},p.prototype.endVideo=function(){var e=this;e._activeRenderer&&(e._activeRenderer.ended||(e._activeRenderer.ended=!0,e._activeRenderer.type===s.HTML5_TV_TIZEN||e._activeRenderer.type===s.HTML5_TV_ORSAY?e._activeRenderer.stop():e._activeRenderer.node.pause()))},p.prototype.setSelectedStreams=function(e){var t=this;t._activeRenderer&&t._activeRenderer.setSelectedStreams(e)},p.prototype.didRendererTimeOut=function(){var e=this;return e._activeRenderer&&!!e._activeRenderer.timedOut},p.prototype.getActiveRenderer=function(){var e=this;return e._activeRenderer},p.prototype.setRendererMode=function(e){var t=this,n=d+e,r=a.classList(t._contentNode);t._activeRenderer&&(t._activeRenderer.mode=e),Object.keys(l).forEach(function(e){var t=d+l[e];r.contains(t)&&t!==n&&r.remove(t)}),r.contains(n)||r.add(n)},p.prototype.syncPlaybackState=function(){var e=this,t=e._model.playbackState;e._activeRenderer&&(e._activeRenderer.paused=t.paused,e._activeRenderer.seeking=t.seeking)},p.prototype.rewindAfterEnd=function(e){var t=this;if(t._activeRenderer)if(e)switch(t._activeRenderer.type){case s.HTML5_RAW:case s.HTML5_HLS:case s.HTML5_DASH:t._activeRenderer.node.src=""}else t._activeRenderer.seek(0)},p.prototype.play=function(e){var t=this;t._activeRenderer&&t._activeRenderer.play(e)},p.prototype.pause=function(){var e=this;e._activeRenderer&&(e._activeRenderer.type===s.HTML5_TV_TIZEN||e._activeRenderer.type===s.HTML5_TV_ORSAY?e._activeRenderer.pause():e._activeRenderer.node.pause())},p.prototype.setQuality=function(e){var t=this;t._activeRenderer&&t._activeRenderer.setQuality(e)},p.prototype.seek=function(e){var t=this;t._activeRenderer&&t._activeRenderer.seek(e)},p.prototype.setVolume=function(e){var t=this;t._activeRenderer&&t._activeRenderer.setVolume(e)},p.prototype.setMute=function(e){var t=this;t._activeRenderer&&(e=!!e,t._activeRenderer.setVolume(e?0:t._model.playbackState.volume))},p.prototype.enterFS=function(){var e=this;e._activeRenderer&&e._activeRenderer.node&&e._activeRenderer.node.webkitEnterFullscreen&&e._activeRenderer.node.webkitEnterFullscreen()},p.prototype.exitFS=function(){var e=this;e._activeRenderer&&e._activeRenderer.node&&e._activeRenderer.node.webkitExitFullscreen&&e._activeRenderer.node.webkitExitFullscreen()},p.prototype.getCurrentTime=function(){var e=this;return e._activeRenderer&&e._activeRenderer.getCurrentTime()||0},p.prototype.getDuration=function(){var e=this;return e._activeRenderer&&e._activeRenderer.getDuration()||0},p.prototype.stopMedia=function(){var e=this;return e._activeRenderer&&e._activeRenderer.stopMedia()},p.prototype.destroy=function(){var e=this;e._activeRenderer&&e._activeRenderer.destroy()},t.exports=p},{"../../lib/logger":"IS9j5T","../../lib/user-agent":"ty5FFo","./event":"YJm+dH","./renderers/flash":42,"./renderers/html5-dash":155,"./renderers/html5-hls":44,"./renderers/html5-raw":45,"./renderers/html5-tv":155,"./renderers/modes":46,"./renderers/orsay":155,"./renderers/tizen":155,"./renderers/type":47,"./util":"jJTEqU"}],42:[function(e,t,n){"use strict";function r(e){var t='<object id="'+e.id+'" class="yvp-flash-video yvp-swf-not-ready" type="application/x-shockwave-flash" data="'+e.swfUrl+'" width="100%" height="100%">';e.params.forEach(function(e){t+='<param name="'+e.name+'" value="'+e.value+'">'}),t+="</object>";var n=document.createElement("div");return n.innerHTML=t,n.children[0]}function i(e,t,n){var r=this;r.type=u.FLASH,r._error=a,r._eventBus=e,r._model=t,r._profiler=n,r.seeking=!1,r.ended=!1,r._isSeeking=!1;var i=s.VIDEO;Object.defineProperty(r,"mode",{get:function(){return i},set:function(e){i!==e&&(i=e,r._callFlashMethod("set","playMode",e))}}),r._commandQueue=[],r._swfReady=!1,r.timedOut=!1,r._drmState=v.NO_DRM}t.exports=i;var a=e("../error.js"),o=e("../event"),s=e("./modes"),l=e("../../../lib/user-agent"),d=e("../util"),c=e("../../../lib/logger"),p=e("../states"),u=e("./type"),_=e("../hls-cue-tracker"),m="player.swf",v={NO_DRM:"no-drm",DRM_INITIAL:"drm-initial",DRM_METADATA_IS_SET:"drm-metadata-set",DRM_AUTH_COMPLETE:"drm-auth-complete"},y={validateScenarioOne:function(e){var t=e.querySelector("object");return t&&"none"===t.style.display?l.safari?d.createErr("R","S",a.E_INFO,a.INFO_CODES.E_PLAYER_FLASH_IS_BLOCKED_SAFARI_STYLE_NONE):d.createErr("R","S",a.E_INFO,a.INFO_CODES.E_PLAYER_FLASH_IS_BLOCKED_GENERAL_STYLE_NONE):null},validateScenarioTwo:function(e){return e.querySelector("div[bginactive]")?d.createErr("R","S",a.E_INFO,a.INFO_CODES.E_PLAYER_FLASH_IS_BLOCKED_REPLACED_BY_BGINACTIVE):null},validateScenarioThree:function(e){return l.safari&&e.querySelector('div[aria-label~="Safari Power Saver"]')?d.createErr("R","S ",a.E_INFO,a.INFO_CODES.E_PLAYER_FLASH_IS_BLOCKED_POWER_SAVING):null},validateScenarioFour:function(e){return e.querySelector('div[style~="chrome-extension"]')?d.createErr("R","S",a.E_INFO,a.INFO_CODES.E_PLAYER_FLASH_IS_BLOCKED_BLOCKERS_SCREEN):null}};i.prototype.create=function(){var e=this,t=d.generateGuid(),n=d.getAssetUrl(e._model.isLocal(),e._model.version,m);return e._eventHandlerName="__YVPFlashHandler_"+e._model.guid,e._bindEvents(),e._profiler&&e._profiler.add(o.Metrics.SWF_OBJECT_TO_INIT_START),e.node=r({id:t,swfUrl:n,params:[{name:"allowscriptaccess",value:"always"},{name:"allowFullScreen",value:"true"},{name:"wmode",value:e._determineWindowMode()},{name:"flashVars",value:"YUIBridgeCallback="+e._eventHandlerName+"&allowedDomain="+document.location.hostname}]}),e.node.pause=function(){e._swfReady?e._pause():e._commandQueue.push(["_pause"])},e._removeSWFNotReadyTimeout=setTimeout(function(){d.classList(e.node).remove("yvp-swf-not-ready")},1e3),e._swfReadyTimeout=setTimeout(function(){e.timedOut=!0,e._eventBus.publish(o.SWF_READY_TIMEOUT,e.node)},7e3),e._profiler&&(e._profiler.setEndTime(o.Metrics.RENDER_TO_SWF),e._profiler.add(o.Metrics.SWF_READY)),e.node},i.prototype.waitForReady=function(e){var t=this;if(t._swfReady)return void e();if(t.timedOut)return void e(new Error("swf timeout"));var n=!1;t._eventBus.subscribe(o.SWF_READY_TIMEOUT,function(){n||(n=!0,e(new Error("swf timeout")))}),t._eventBus.subscribe(o.SWF_READY,function(){n||(n=!0,e())})},i.prototype.isReady=function(){var e=this;return e._swfReady},i.prototype._determineWindowMode=function(){return"macintosh"===l.os&&(l.chrome||l.safari||l.firefox)?"direct":"opaque"},i.prototype._flushCommandQueue=function(){var e=this,t=e._commandQueue;e._commandQueue=[],t.forEach(function(t){var n=t[0],r=t[1];e[n].apply(e,r)})},i.prototype._removeFromCommandQueue=function(e){
for(var t=this,n=0;n<t._commandQueue.length;n++){var r=t._commandQueue[0];if(r[0]===e){t._commandQueue.splice(n,1);break}}},i.prototype.setSelectedStreams=function(e){var t=this;t._eventBus.publish(o.SELECTED_STREAM_CHANGE,e)},i.prototype.bindPlaybackEvents=function(){var e=this;e._unsubscribeEventBusEvents=[],e._unsubscribeEventBusEvents.push(e._eventBus.subscribe(o.BEFORE_PROGRESS_BEACON,e._beforeProgressBeaconSend,e))},i.prototype._bindEvents=function(){var e=this;window[e._eventHandlerName]=function(t){try{o.Video[t.type.toUpperCase()]?e._onVideoEvent(t):e._onFlashEvent(t)}catch(n){c.error("Error in flash event handler:",n.message||n,n.stack)}},e._onVideoEvent=function(t){var n,r=t.type;if(e.mode===s.VIDEO)n=o.Video[r.toUpperCase()];else{if(e.mode!==s.AD)return;n=o.Ad[r.toUpperCase()]}switch("playing"===r&&e._profiler&&(e._profiler.setEndTime(o.Metrics.STREAM_PLAY_TO_RENDER),e._profiler.setEndTime(o.Metrics.STREAM_REQUEST_TO_RENDER)),r){case"timeupdate":case"seeking":case"seeked":if("timeupdate"===r&&e._isSeeking)break;if("seeked"===r&&(e._isSeeking=!1),e._model.playbackState.isOnCriticalError()||e._model.playbackState.state===p.END)break;var i=t.buffered,a={length:1,start:function(){return i?i.start:0},end:function(){return i?i.end:0}};e._eventBus.publish(n,t.currentTime,t.duration,a);break;case"error":if(e.mode===s.VIDEO){var l,c=e._error;t.code===c.PLAYER_DRM_CODES.E_FLASH_DRM_CONTENT_DATA_NOT_SET_ERROR?l=d.createErr("C",e._model.playbackState,c.E_PLAYER_DRM,c.PLAYER_DRM_CODES.E_FLASH_DRM_CONTENT_DATA_NOT_SET_ERROR):t.code===c.PLAYER_DRM_CODES.E_FLASH_DRM_TIMEOUT_LOAD_VOUCHER_ERROR?l=d.createErr("S",e._model.playbackState,c.E_PLAYER_DRM,c.PLAYER_DRM_CODES.E_FLASH_DRM_TIMEOUT_LOAD_VOUCHER_ERROR):t.code===c.FLASH_CODES.E_FLASH_DRM_SYSTEM_UPDATE_ERROR?l=d.createErr("R",e._model.playbackState,c.E_PLAYER,c.FLASH_CODES.E_FLASH_DRM_SYSTEM_UPDATE_ERROR,null,t.msg+"; "+t.detail):t.code===c.FLASH_CODES.E_FLASH_DRM_CHROME_SETTING_ERROR?l=d.createErr("R",e._model.playbackState,c.E_PLAYER_DRM,c.FLASH_CODES.E_FLASH_DRM_CHROME_SETTING_ERROR):t.code>=c.FLASH_CODES.E_FLASH_DRM_LOWER_BOUND_ERROR&&t.code<=c.FLASH_CODES.E_FLASH_DRM_UPPER_BOUND_ERROR?l=d.createErr("C",e._model.playbackState,c.E_PLAYER_DRM,t.code,null,t.msg+t.detail):t.code===c.FLASH_CODES.E_HLS_CLIENT_DISABLE_COOKIES?l=d.createErr("R",e._model.playbackState,c.E_PLAYER,t.code,null,t.msg+"; "+t.detail):(0===t.code&&(t.code=c.PLAYER_CODES.E_PLAYER_PLAYBACK_ERROR),l=d.createErr("P",e._model.playbackState,c.E_PLAYER,t.code,null,t.msg+"; "+t.detail)),t.critical&&e._callFlashMethod("stopMedia"),e._eventBus.publish(o.ERROR,l)}else e._eventBus.publish(o.Ad.ERROR,e._callFlashMethod("get","error"));break;case"ended":e.ended=!0,e._eventBus.publish(n);break;case"pause":if(e.ended)break;if(e.seeking)break;e._eventBus.publish(n);break;case"loadeddata":e._profiler&&e._profiler.setEndTime(o.Metrics.LOAD_TO_LOADED_DATA),e._eventBus.publish(n);break;case"warning":/Remove Last Fragment Buffer/.test(t.msg)&&e._eventBus.publish(o.RELOAD_FRAGMENT,t.msg);break;default:e._eventBus.publish(n,t)}}},i.prototype._onFlashEvent=function(e){var t=this,n=e.type;switch(n){case"infoupdate":var r=e.mediaInfo;t._model.playback.bitrate=r.currentStreamBitrate,t._model.playback.protocol=r.deliveryProtocol,t._eventBus.publish(o.PLAYBACK_INFO,r);break;case"swfReady":t._swfReady=!0,t._profiler.setEndTime(o.Metrics.SWF_READY),t._profiler.setEndTime(o.Metrics.SWF_OBJECT_TO_INIT_START,t._callFlashMethod("get","swfInitTimestamp"),!0),clearTimeout(t._swfReadyTimeout),d.classList(t.node).remove("yvp-swf-not-ready"),t._setPlayerInfo(),t._flushCommandQueue(),t._eventBus.publish(o.SWF_READY,t.node);break;case"playerPluginResize":t._eventBus.publish(o.PLAYER_RESIZE,e.width,e.height);break;case"selectedStreamChange":t._eventBus.publish(o.SELECTED_STREAM_CHANGE,e.selectedStreams);break;case"selectedStreamUrlChange":t._eventBus.publish(o.SELECTED_STREAM_URL_CHANGE,null,e);break;case"jsLog":break;case"yvap_flash":t._eventBus.publish(o.YVAP_SWF_PROXIED_EVENT,e);break;case"drmMetadataSet":t._profiler&&(t._profiler.setEndTime(o.Metrics.DRM_METADATA_IS_SET),t._profiler.add(o.Metrics.DRM_AUTH_COMPLETE),t._drmState=v.DRM_METADATA_IS_SET);break;case"drmAuthComplete":t._profiler&&(t._profiler.setEndTime(o.Metrics.DRM_AUTH_COMPLETE),t._drmState=v.DRM_AUTH_COMPLETE);break;case"uiInteract":t.mode===s.VIDEO?t._eventBus.publish(o.Video.CLICK):t.mode===s.AD&&t._eventBus.publish(o.Ad.CLICK,t._callFlashMethod("get","currentTime"));break;case"bitratechange":var i=e.bitrate,l=e.info;t._eventBus.publish(o.API.BITRATE_CHANGE,i,l);break;case"durationchange":break;case"pluginLoadComplete":t._eventBus.publish(o.RENDERER_PLUGIN_LOADED);break;case"pluginLoadError":t._eventBus.publish(o.RENDERER_PLUGIN_LOAD_FAILED);break;case"pluginLoadTimedOut":t._eventBus.publish(o.RENDERER_PLUGIN_LOAD_TIMED_OUT);break;case"loadFirstFragment":t._eventBus.publish(o.HLS_FIRST_TS_LOAD_START);break;case"firstFragmentFirstByteFReceived":t._eventBus.publish(o.HLS_FIRST_TS_FIRST_BYTE_ARRIVE);break;case"reloadBegin":t._eventBus.publish(o.MEDIA_RELOAD_BEGIN);break;case"reloadEnd":t._eventBus.publish(o.MEDIA_RELOAD_END);break;case"mediaPlaylistLoaded":t._eventBus.publish(o.MEDIA_PLAYLIST_LOADED);break;case"mediaPlaylistUpdated":t._eventBus.publish(o.MEDIA_PLAYLIST_UPDATED,e.interval);break;case"qualityChanged":t._eventBus.publish(o.QUALITY_CHANGE);break;case"streamLoadBegin":t._profiler&&t._profiler.add(o.Metrics.STREAM_REQUEST_TO_RENDER);break;case"vttSegmentLoaded":t._eventBus.publish(o.VTT_SEGMENT_LOADED,e.vttSegmentInfo);break;case"bitrateListChanged":t._eventBus.publish(o.BITRATE_LIST_CHANGED,e.bitrates,e.heights);break;case"playbackComplete":t._model.playlist.getCurrentItem().isLive()&&t._eventBus.publish(o.WARNING,d.createErr("P",t._model.playbackState,a.E_WARNING,a.WARNING_CODES.E_LIVE_PLAYBACK_COMPLETE),!0);break;case"fragLoadRetryFailure":t._eventBus.publish(o.FRAG_LOAD_RETRY_FAILURE);break;case"liveMediaPlaylistLoadRetryFailure":t._eventBus.publish(o.LIVE_MEDIA_PLAYLIST_LOAD_RETRY_FAILURE);break;case"liveLoadingLate":t._eventBus.publish(o.LIVE_LOADING_LATE);break;case"PTSDiscontinuity":t._eventBus.publish(o.PTS_DISCONTINUITY,e.timedifference);break;case"cuepointStarted":var c={cueoutStartSeqNum:e.startSeqNum,cueoutStreamIndex:e.cueoutStreamIndex};t._eventBus.publish(o.API.CUEPOINT_STARTED,e.cuepointDuration,e.cuepointPlayedTime,c);break;case"cuepointStopped":t._eventBus.publish(o.API.CUEPOINT_STOPPED);break;case"cuepointDetected":t._eventBus.publish(o.API.CUEPOINT_DETECTED,e.cuepointDuration,e.timeGapBeforeCUEOUT);break;case"abrDataUpdated":t._model.metrics.skipABRBeacon||t._eventBus.publish(o.ABR_DATA_UPDATE,e)}},i.prototype._setPlayerInfo=function(){var e=this,t=e._model,n={name:"Fireball",site:t.baseConfig.site,version:t.version,region:t.baseConfig.region,autoplay:t.playback.autoplay,spaceid:t.baseConfig.pageSpaceId,hostEnv:t.isLocal()?"l":"p",lang:t.baseConfig.lang,conviva:t.playback.conviva,bucket:d.bucketize(),browserName:e._getBrowserName(),os:l.os,expType:t.baseConfig.experienceType,expName:t.baseConfig.experienceName,convivaSamplingRate:t.failOver?t.failOver.convivaSamplingRate:null,disableGPU:t.playback.disableGPU};e._callFlashMethod("set","playerInfo",n)},i.prototype._getBrowserName=function(){var e="";return l.chrome?e="chrome":l.firefox?e="firefox":l.safari?e="safari":l.ie?e="ie":l.opera&&(e="opera"),e},i.prototype.setStreams=function(e){var t=this;return e.mode=t.mode,t._swfReady?t._setStreamsImpl(e):t._commandQueue.push(["_setStreamsImpl",[e]]),!0},i.prototype._setStreamsImpl=function(e){var t=this,n=(t._error,e.streams),r=e.mode;t.ended=!1,t._isSeeking=!1,!n||n.length<=0||(r===s.AD?t._setAdSrc(e):e.isCCM?t._setVideoSrc(e):t._setStreamUrlSrc(e))},i.prototype._setSrc=function(e){var t=this;t._model.playback.preconnect?t._setSrcImpl(e):(t._removeFromCommandQueue("_setSrcImpl"),t._commandQueue.push(["_setSrcImpl",[e]]))},i.prototype._setSrcImpl=function(e){var t=this;e.live&&"hls"===e.streamType&&(t._hlsCueTracker||(t._hlsCueTracker=new _(t._eventBus,t._model)),t._hlsCueTracker.updatePlaylistURLs(null,e.streams[0].url)),t._callFlashMethod("set","src",e)},i.prototype._setAdSrc=function(e){var t=this,n=e.streams;try{t._callFlashMethod("set","src",{live:!1,rtx:!1,url:n[0].url})}catch(r){t._eventBus.publish(o.Ad.ERROR)}},i.prototype._setStreamUrlSrc=function(e){var t=this,n={live:!1,rtx:!1};if(e.streams&&e.streams.length){var r=e.streams[0];"m3u8"===r.format?(e.streams.forEach(function(e){e.url&&""!==e.url&&(e.host=e.url)}),n.streams=e.streams):n.url=r.url,n.live=r.live,r.isDrmProtected()&&(t._drmState=v.DRM_INITIAL)}t._error;t._profiler.add(o.Metrics.LOAD_TO_LOADED_DATA),t._callFlashMethod("set","src",n)},i.prototype._setVideoSrc=function(e){var t=this,n=t._error,r=e.streamProfiles&&e.streamProfiles.length>0?e.streamProfiles:e.streams;e.mode;t._profiler.add(o.Metrics.LOAD_TO_LOADED_DATA);var i=[],a=[],s=!1;if(r.forEach(function(e){if("subtitle"===e.type)return void i.push(e);e=d.extend({},e),e.format.indexOf("m3u8")>-1&&(e.format="m3u8"),e.path&&e.path.indexOf("content=hls")>-1&&(e.format="m3u8"),e.isAtlas()&&t._fixPathForFlash(e);var n=e.isStreamCompatibleForDrm("flash");return-1===n?void(s=!0):(1===n&&(t._drmState=v.DRM_INITIAL),void a.push(e))}),a.length<=0){if(s){var l=d.createErr("C",t._model.playbackState,n.E_PLAYER_DRM,n.PLAYER_DRM_CODES.E_PLAYER_DRM_UNSUPPORTED_STREAM_ERROR);t._eventBus.publish(o.ERROR,l)}}else{var c=a.filter(function(e){return!t._isProgressiveDownload(e)}),p=t._model.playlist.getCurrentItem(),u={uuid:e.uuid,showName:p?p.showName:"",title:p?p.title:"",duration:p?p.duration:0};e.startTime&&(u.startTime=e.startTime),i.length>0&&(u.subtitles=i),c.length>0?(u.streamType=c[0].getType(),u.streams=c,u.live=c[0].live,u.rtx=c[0].isRTX()):(a=a.sort(function(e,t){return t.bitrate-e.bitrate}),u.streamType=a[0].getType(),u.url=a[0].url,u.rtx=a[0].isRTX(),u.bitrate=a[0].bitrate),t._callFlashMethod("set","stopBufferingOnPause",t._model.playback.stopBufferingOnPause),t._callFlashMethod("set","preload",t._model.playback.preload),t._callFlashMethod("set","ignoreEndlist",e.ignoreEndlist),t._setSrc(u),t._model.playback.targetBitrate&&t._setQuality({preference:"config",bitrate:t._model.playback.targetBitrate})}},i.prototype._fixPathForFlash=function(e){if(e.format){var t="mp4"===e.format.toLowerCase(),n=e.path.replace(/^\/?mp4:/,"");(t||"flv"===e.format.toLowerCase())&&(n=n.replace(/^\//,"")),t&&e.isRTMP()&&(n="mp4:"+n),e.path=n}},i.prototype._isProgressiveDownload=function(e){return!e.host||/^http[s]?:\/\//.test(e.host)&&"m3u8"!==e.format&&"f4m"!==e.format},i.prototype.play=function(e){var t=this,n=t._error;if(!t.seeking||t._model.playbackState.paused)if(t._profiler&&t._profiler.add(o.Metrics.STREAM_PLAY_TO_RENDER),t._swfReady){t.seeking=!1,t.ended=!1,t._isSeeking=!1;var r=0;if(t._model.playback.preconnect||(t.mode===s.VIDEO?t._flushCommandQueue():t.mode===s.AD&&(r=1)),t._commandQueue.length>r&&t._eventBus.publish(o.ERROR,d.createErr("P",t._model.playbackState,n.E_PLAYER,n.PLAYER_CODES.E_INTERNAL_VIOLATION)),t._callFlashMethod("playMedia",e),t._profiler&&t._drmState===v.DRM_INITIAL){var i=t._profiler.getItem(o.Metrics.DRM_METADATA_IS_SET);i||t._profiler.add(o.Metrics.DRM_METADATA_IS_SET)}}else t._commandQueue.push(["play",[e]])},i.prototype._pause=function(){var e=this;e._callFlashMethod("pauseMedia")},i.prototype.seek=function(e){var t=this;if(t._swfReady)if(t._isSeeking=!0,t._callFlashMethod("get","seekable"))t._callFlashMethod("set","currentTime",e);else var n=t._eventBus.subscribe(o.Video.PLAYING,function(){t._callFlashMethod("set","currentTime",e),n.detach()});else t._commandQueue.push(["seek",[e]])},i.prototype.getCurrentTime=function(){var e=this;return e._callFlashMethod("get","currentTime")},i.prototype.getDuration=function(){var e=this;return e._callFlashMethod("get","duration")},i.prototype.getFlashVersion=function(){var e=this;return e._swfReady?e._callFlashMethod("get","flashVersion"):null},i.prototype.setVolume=function(e){var t=this;t._swfReady?t._callFlashMethod("set","volume",e):t._commandQueue.push(["setVolume",[e]])},i.prototype.setQuality=function(e){var t=this;t._setQuality({preference:e.preference,bitrate:e.stream.bitrate})},i.prototype._setQuality=function(e){var t=this;t._swfReady?t._callFlashMethod("set","quality",e):t._commandQueue.push(["_setQuality",[e]])},i.prototype._isFlashBlocked=function(e){var t=this;if(e)for(var n in y)if(y.hasOwnProperty(n)){var r=y[n].call(t,e);if(r)return t._eventBus.publish(o.INFO,r),t._DOMChangeObserver&&t._DOMChangeObserver.disconnect(),!0}return!1},i.prototype._beforeProgressBeaconSend=function(e){var t,n=this,r=document.getElementsByClassName("yvp-main"),i=!d.isPlayerInBackground()&&0!==d.getElementViewability(r[0]);if(n._swfReady&&e)for(t=n._callFlashMethod("get","segmentMetrics");t&&t.length;){var a=t.shift();a.vis||(a.vis=i),e.push(a)}},i.prototype.detectFlashBlockers=function(e){var t=this;if(!t._isFlashBlocked(e)){var n=window.MutationObserver||window.WebKitMutationObserver||window.MozMutationObserver;if(l.ie&&l.ie<11||"undefined"==typeof n)return;t._DOMChangeObserver=new n(function(n){var r={};try{n.forEach(function(n){if(t._isFlashBlocked(e))throw r})}catch(i){if(i!==r)throw i;t._DOMChangeObserver.disconnect()}});var r={attributes:!0,childList:!0,characterData:!0};t._DOMChangeObserver.observe(e,r)}},i.prototype._unbindEvents=function(){},i.prototype.unbindPlaybackEvents=function(){var e=this;e._unsubscribeEventBusEvents&&(e._unsubscribeEventBusEvents.forEach(function(e){e()}),e._unsubscribeEventBusEvents=[])},i.prototype._callFlashMethod=function(e){var t=this,n=Array.prototype.slice.call(arguments,1);try{if(t._swfReady)return t.node[e].apply(t.node,n)}catch(r){c.error("Flash crashed:",r);var i,s=!0;"get"===e&&"segmentMetrics"===n[0]&&(s=!1,i="segInfo-flash-error"),t._eventBus.publish(o.WARNING,d.createErr("P",t._model.playbackState,a.E_WARNING,a.WARNING_CODES.E_FLASH_CRASHED,i),s)}},i.prototype.stopMedia=function(){var e=this;e._callFlashMethod("stopMedia")},i.prototype.destroy=function(){var e=this;e._callFlashMethod("stopMedia"),delete window[e._eventHandlerName],e._unbindEvents(),clearTimeout(e._removeSWFNotReadyTimeout),clearTimeout(e._swfReadyTimeout),e.node=null}},{"../../../lib/logger":"IS9j5T","../../../lib/user-agent":"ty5FFo","../error.js":20,"../event":"YJm+dH","../hls-cue-tracker":23,"../states":50,"../util":"jJTEqU","./modes":46,"./type":47}],43:[function(e,t,n){"use strict";function r(){var e=document.createElement("div");return p.tv?e.innerHTML='<video class="yvp-html5-video" preload="meta" crossorigin="anonymous"><source/></video>':e.innerHTML='<video class="yvp-html5-video" preload></video>',e.children[0]}function i(){}t.exports=i;var a=e("../cc"),o=e("../error"),s=e("../event"),l=e("./modes"),d=e("../tap"),c=(e("../../../lib/logger"),e("../util")),p=e("../../../lib/user-agent");i.prototype.create=function(e){var t=this;return t.node=e||r(),t.node.setAttribute("id",c.generateGuid()),t._bindEvents(),t.node},i.prototype.detachNode=function(){var e=this;e._unbindEvents(),e.node&&e.node.pause&&e.node.pause()},i.prototype.reattachNode=function(){var e=this;e._bindEvents()},i.prototype._bindEvents=function(){var e=this;e._onVideoEvent=function(t){if(!e.ended){var n,r=t.type;if(e.mode===l.VIDEO)n=s.Video[r.toUpperCase()];else{if(e.mode!==l.AD)return;n=s.Ad[r.toUpperCase()]}e._handleVideoEvent(r,n)}},s.nativeVideoEvents.forEach(function(t){e.node.addEventListener(t,e._onVideoEvent)}),p.iphone||(e._videoTap=new d(e.node),e._onVideoTap=function(){e.mode===l.VIDEO?e._eventBus.publish(s.Video.CLICK):e.mode===l.AD&&(e._eventBus.publish(s.Ad.CLICK,e.node.currentTime),e.node.pause())},e.node.addEventListener("tap",e._onVideoTap)),p.safari>=8&&e._setupTimedMetadataTrackListener(),e._unsubscribeEventBusEvents=[],e._unsubscribeEventBusEvents.push(e._eventBus.subscribe(s.CC.FETCH_MOBILE,e._enableMobilCC,e)),e._unsubscribeEventBusEvents.push(e._eventBus.subscribe(s.FULLSCREEN_CHANGE,function(t){e._eventBus.publish(s.PLAYER_RESIZE,e.node.clientWidth,e.node.clientHeight)},e)),e._unsubscribeEventBusEvents.push(e._eventBus.subscribe(s.BEFORE_PROGRESS_BEACON,e._beforeProgressBeaconSend,e))},i.prototype._beforeProgressBeaconSend=function(e){e.useDefaultBufferDuration=!0},i.prototype.setSelectedStreams=function(e){var t=this;t._eventBus.publish(s.SELECTED_STREAM_CHANGE,e)},i.prototype.seek=function(e){var t=this;try{t.node.currentTime=e}catch(n){if("InvalidStateError"===n.name)var r=t._eventBus.subscribe(s.Video.LOADEDMETADATA,function(){t.node.currentTime=e,r.detach()})}},i.prototype.getCurrentTime=function(){var e=this;return e.node.currentTime},i.prototype.getDuration=function(){var e=this;return e.node.duration},i.prototype.setVolume=function(e){var t=this;t.node&&(t.node.volume=e)},i.prototype._enableMobilCC=function(e){var t=this,n=document.createDocumentFragment();t._deleteTracks(),e.langList.forEach(function(t){var r=document.createElement("track");r.setAttribute("label",a.prototype.getLanguageForCode.call(null,t.lang)),r.setAttribute("srclang",t.lang),r.setAttribute("kind","subtitles"),r.setAttribute("type","text/vtt"),t.lang===e.selectedLang&&r.setAttribute("default",!0),r.src=t.url,r.mode="hidden",n.appendChild(r)}),t.node.appendChild(n)},i.prototype._deleteTracks=function(){for(var e=this,t=e.node.querySelectorAll("track"),n=0;n<t.length;n++)e.node.removeChild(t[n])},i.prototype._setupTimedMetadataTrackListener=function(){var e=this;if(e.node.textTracks){var t=function(t){var n=t.track;"metadata"===n.kind&&(n.mode="hidden",n.addEventListener("cuechange",function(t){var n=t.target,r=n.activeCues[0],i=r.value&&r.value.data;try{i=JSON.parse(i)}catch(a){i={}}e._eventBus.publish(s.TIMED_METADATA_RECEIVED,i)}))};e.node.textTracks.addEventListener("addtrack",t),e._removeTimedMetadataTrackListener=function(){e.node.textTracks.removeEventListener("addtrack",t)}}},i.prototype._unbindEvents=function(){var e=this;e._removeTimedMetadataTrackListener&&e._removeTimedMetadataTrackListener(),s.nativeVideoEvents.forEach(function(t){e.node.removeEventListener(t,e._onVideoEvent)}),e._videoTap&&(e._videoTap.destroy(),e.node.removeEventListener("tap",e._onVideoTap)),e._unsubscribeEventBusEvents&&(e._unsubscribeEventBusEvents.forEach(function(e){e()}),e._unsubscribeEventBusEvents=[])},i.prototype._getCodeForNodeError=function(e){if(!(e&&e instanceof window.MediaError))return o.PLAYER_CODES.E_PLAYER_HTML5_PLAYBACK_ERROR;switch(e.code){case window.MediaError.MEDIA_ERR_ABORTED:return o.PLAYER_CODES.E_PLAYER_HTML5_PLAYBACK_ERROR_ABORTED;case window.MediaError.MEDIA_ERR_NETWORK:return o.PLAYER_CODES.E_PLAYER_HTML5_PLAYBACK_ERROR_NETWORK;case window.MediaError.MEDIA_ERR_DECODE:return o.PLAYER_CODES.E_PLAYER_HTML5_PLAYBACK_ERROR_DECODE;case window.MediaError.MEDIA_ERR_SRC_NOT_SUPPORTED:return o.PLAYER_CODES.E_PLAYER_HTML5_PLAYBACK_ERROR_SRC_NOT_SUPPORTED;case window.MediaError.MEDIA_ERR_ENCRYPTED:return o.PLAYER_CODES.E_PLAYER_HTML5_PLAYBACK_ERROR_ENCRYPTED;default:return o.PLAYER_CODES.E_PLAYER_HTML5_PLAYBACK_ERROR}},i.prototype.destroy=function(){var e=this;e._unbindEvents(),e.node.pause(),e.node.src="",e.node.load(),e._CCStyleTag&&(e._CCStyleTag.parentNode.removeChild(e._CCStyleTag),e._CCStyleTag=null),e.hlsCues&&e.hlsCues.destroy(),e.node.parentNode.removeChild(e.node),e.node=null}},{"../../../lib/logger":"IS9j5T","../../../lib/user-agent":"ty5FFo","../cc":"zKzgQw","../error":20,"../event":"YJm+dH","../tap":"dsc79Q","../util":"jJTEqU","./modes":46}],44:[function(e,t,n){"use strict";function r(e,t,n){var r=this;r.type=l.HTML5_HLS,r._eventBus=e,r._model=t,r._profiler=n,r.mode=d.VIDEO,r.seeking=!1,r.ended=!1,r._numVideoStreams=0,r._playingCalled=!0}t.exports=r;var i=e("../error"),a=e("../event"),o=e("./html5-base.js"),s=e("js-hls"),l=e("./type"),d=e("./modes"),c=e("../util"),p=e("../../../lib");e("../../../lib/logger");c.inherits(r,o),r.prototype.create=function(){var e=this;o.prototype.create.apply(e,arguments);var t=e._getHtml5HlsConfig();return e._jsPlayer=new s(e.node,t),a.html5HlsEvents.forEach(function(t){e.node.addEventListener(t,function(t){e._handleVideoEvent(t.type,t)})}),e.node},r.prototype._getHtml5HlsConfig=function(){var e=this;e._sendAbrAnalytics=!1;var t={debug:c.keepConsoleLogs,sendAbrAnalytics:e._sendAbrAnalytics},n=e._model.html5_hls;for(var r in n)if(n.hasOwnProperty(r)){if("preloadBufferLimit"===r&&e._model.playback.preload!==!0)continue;t[r]=n[r]}return t},r.prototype.waitForReady=function(e){e(null)},r.prototype._handleVideoEvent=function(e,t){var n=this;if("playing"===e&&n._profiler){n._profiler.setEndTime(a.Metrics.STREAM_PLAY_TO_RENDER);var r=n._profiler.getItem(a.Metrics.STREAM_REQUEST_TO_RENDER);r&&null===r.endTime&&n._profiler.setEndTime(a.Metrics.STREAM_REQUEST_TO_RENDER)}switch(e){case"seeking":case"seeked":"seeked"===e&&(n._seeked=!0),n._eventBus.publish(t,n.node.currentTime,n.node.duration,n.node.buffered);break;case"error":var o=n.node.error;if(n.mode===d.VIDEO){var s,l,u=n._jsPlayer.error||{};p.isNumber(u.code)?(s=u.code.toString(),l=c.createErr("P",n._model.playbackState,i.E_PLAYER_JS_HLS,s,null,u.message)):(s=o.code.toString(),l=c.createErr("P",n._model.playbackState,i.E_PLAYER_JS_HLS,s)),n._eventBus.publish(a.Video.ERROR,o),n._eventBus.publish(a.ERROR,l)}else n._eventBus.publish(a.Ad.ERROR,o);break;case"ended":n.ended=!0,n._hasPlayed=!1,n._eventBus.publish(t);break;case"pause":if(n.ended)break;if(n.seeking)break;n._eventBus.publish(t);break;case"play":n._playingCalled=!1,n._eventBus.publish(t);break;case"playing":n._playingCalled=!0,n._eventBus.publish(t);break;case"timeupdate":n._eventBus.publish(t,n.node.currentTime,n.node.duration,n.node.buffered),n._playingCalled||(n._playingCalled=!0,n._eventBus.publish(a.Video.PLAYING));break;case"loadeddata":n._profiler&&n._profiler.setEndTime(a.Metrics.LOAD_TO_LOADED_DATA),n._eventBus.publish(t);break;case"infoUpdate":var _=t.detail.mediaInfo;n._model.playback.bitrate=_.currentStreamBitrate,n._model.playback.protocol=_.deliveryProtocol,n._eventBus.publish(a.PLAYBACK_INFO,_);break;case"streamSwitched":var m=t.detail.bitrate,v={reason:t.detail.reason,oldFrameRate:t.detail.oldFrameRate,newFrameRate:t.detail.newFrameRate};n._eventBus.publish(a.API.BITRATE_CHANGE,m,v);break;case"hlsWaiting":t&&t.detail&&!p.isNullOrUndefined(t.detail.bufferInit)&&n._eventBus.publish(a.Video.WAITING,{value:t.detail.value,ignoreBuffering:t.detail.bufferInit});break;case"vttSegmentLoaded":n._eventBus.publish(a.VTT_SEGMENT_LOADED,t.detail);break;case"liveLoadingLate":n._eventBus.publish(a.LIVE_LOADING_LATE);break;case"streamUpdated":n._eventBus.publish(a.MEDIA_PLAYLIST_UPDATED);break;case"cuepointDetected":n._eventBus.publish(a.API.CUEPOINT_DETECTED,t.detail.cuepointDuration,t.detail.timeGapBeforeCUEOUT);break;case"cuepointStarted":n._eventBus.publish(a.API.CUEPOINT_STARTED,t.detail.cuepointDuration,t.detail.cuepointPlayedTime);break;case"subtitleStreamUpdated":n._eventBus.publish(a.SUBTITLE_PLAYLIST_UPDATED);break;case"abrDataUpdated":n._sendAbrAnalytics&&n._eventBus.publish(a.ABR_DATA_UPDATE,t.detail);break;case"preloadProgress":n._profiler.setEndTime(a.Metrics.STREAM_REQUEST_TO_RENDER);break;case"waiting":break;default:n._eventBus.publish(t)}},r.prototype.setStreams=function(e){var t=this;t.ended=!1,t._numVideoStreams=0;t._hasPlayed=!1;var n=e.streamProfiles;if(n&&n.length||(n=e.streams),!n)return!1;var r=[];n.forEach(function(e){e.format.indexOf("m3u8")>=0&&(e.hls_info=e.hlsInfo,r.push(e))});for(var i=[],o=0;o<r.length;o++)"subtitle"===r[o].type&&(i.push(r.splice(o,1)[0]),o--);return t._profiler&&(t._profiler.add(a.Metrics.STREAM_REQUEST_TO_RENDER),t.mode===d.VIDEO&&t._profiler.add(a.Metrics.LOAD_TO_LOADED_DATA)),r.length>0?(t._jsPlayer.setSrc({streams:r,subtitleStreams:i}),!0):!1},r.prototype.setQuality=function(e){var t=this;return t._jsPlayer.setQuality(e),!1},r.prototype.stopMedia=function(){var e=this;e._jsPlayer.unload()},r.prototype.play=function(e){var t=this;t.ended=!1,t.seeking=!1,t._profiler&&t._profiler.add(a.Metrics.STREAM_PLAY_TO_RENDER),t._jsPlayer.play(e)},r.prototype.preload=function(e){var t=this;t._jsPlayer.preload(e)},r.prototype._beforeProgressBeaconSend=function(e){var t,n=this,r=document.getElementsByClassName("yvp-main"),i=!c.isPlayerInBackground()&&0!==c.getElementViewability(r[0]);if(e)for(t=n._jsPlayer.getSegInfo();t&&t.length;){var a=t.shift();a.vis||(a.vis=i),e.push(a)}}},{"../../../lib":"bRhrlU","../../../lib/logger":"IS9j5T","../error":20,"../event":"YJm+dH","../util":"jJTEqU","./html5-base.js":43,"./modes":46,"./type":47,"js-hls":194}],45:[function(e,t,n){"use strict";function r(e,t,n,r){var i=this;i.type=l.HTML5_RAW,i._eventBus=e,i._model=r,i._capabilities=t,i._profiler=n,i.mode=d.VIDEO,i.seeking=!1,i.ended=!1,i._isSwitching=!1,i._currentSrcFormat="",i._currentStream=null,i._lastUpdatedTime=0,i._retryCount=0,i._retryStreams=[],i._retryState=null,i._waitingEventTimer=null,i._lastTime=0,i._playbackStuck=!1,i._seeked=!1,i._hasPlayed=!1,i._fsEvt=!1}t.exports=r;var i=e("../bitrate-selector"),a=e("../error"),o=e("../event"),s=e("./html5-base.js"),l=e("./type"),d=e("./modes"),c=e("../stream"),p=e("../../../lib/user-agent"),u=e("../util"),_=e("../../../lib"),m=(e("../../../lib/logger"),e("../states")),v=e("../constants"),y=10,f=2,g=[1,5],b=250;u.inherits(r,s),r.prototype.waitForReady=function(e){e(null)},r.prototype._handleVideoEvent=function(e,t){var n=this;switch("playing"===e&&n._profiler&&(n._profiler.setEndTime(o.Metrics.STREAM_PLAY_TO_RENDER),n._profiler.setEndTime(o.Metrics.STREAM_REQUEST_TO_RENDER)),e){case"timeupdate":case"seeking":case"seeked":if("timeupdate"===e){var r=n.node.currentTime;p.android&&(!n._hasPlayed&&p.chrome<33&&r>1&&2>r&&(n._model.playlist.getCurrentItem().isLive()?(n.node.pause(),n.node.play()):n.seek(0),n._hasPlayed=!0),!n._fsEvt&&p.androidVersion<=4.4&&n.node.addEventListener("webkitfullscreenchange",function(){var e=n.node.currentTime;n._fsEvt=!0,n.node.load();var t=n._eventBus.subscribe(o.Video.LOADEDMETADATA,function(){n.node.play(),n._model.playlist.getCurrentItem().isLive()||(n.node.currentTime=parseInt(e,10)),t.detach()})},!1))}"seeked"===e&&(n._seeked=!0),n._isSwitching?"seeked"===e&&n._playNewStream():n._eventBus.publish(t,n.node.currentTime,n.node.duration,n.node.buffered),n._lastUpdatedTime=n.node.currentTime;break;case"error":var i=n.node.error;if(n.mode===d.VIDEO){var s=n._getCodeForNodeError(i),l=a.E_WARNING,c=o.WARNING,_=n._retryStreams.length<=1&&n._retryCount>=f;_&&(l=a.E_PLAYER,c=o.ERROR);var m=u.createErr("P",n._model.playbackState,l,s,null,n.node.src);if(parseInt(m.subcategory)>=303&&parseInt(m.subcategory)<=308){n._retryCount++,_||n._eventBus.publish(c,m);var v=null;return v=n._model.playlist.getCurrentItem().isLive()?n.retryStreams(0):n.retryStreams(n._lastUpdatedTime),v?void u.getUrlStatus(v.url,function(e){401===e?m.subcategory=a.PLAYER_CODES.E_PLAYER_HTML5_PLAYBACK_ERROR_URL_NOT_AUTHORIZED:404===e&&(m.subcategory=a.PLAYER_CODES.E_PLAYER_HTML5_PLAYBACK_ERROR_URL_NOT_FOUND),m.errorType=a.E_PLAYER,n._eventBus.publish(o.ERROR,m)}):void 0}n._eventBus.publish(o.Video.ERROR,i),m.errorType=a.E_PLAYER,n._eventBus.publish(c,m)}else n._eventBus.publish(o.Ad.ERROR,i);break;case"ended":n.ended=!0,n._hasPlayed=!1,n._waitingEventTimer&&clearInterval(n._waitingEventTimer),n._playbackStuck&&n._publishWaitingEvent(!1,!1),n._eventBus.publish(t);break;case"loadeddata":if(n._isSwitching){n._seekToCurrentTime();break}n._profiler&&n._profiler.setEndTime(o.Metrics.LOAD_TO_LOADED_DATA),n._eventBus.publish(t);break;case"pause":if(n.ended||n.node.ended)break;if(n.seeking)break;if(!n.node.paused)break;n._eventBus.publish(t);break;case"play":case"playing":if(n._isSwitching){"playing"===e&&n._finishSwitching();break}n._eventBus.publish(t);break;case"waiting":break;default:n._eventBus.publish(t)}},r.prototype._checkFormat=function(e,t){return e.indexOf(t)>-1},r.prototype._areFormatsCrashy=function(e,t){var n=this;return n._checkFormat(e,"mp4")&&n._checkFormat(t,"m3u8")||n._checkFormat(e,"m3u8")&&n._checkFormat(t,"mp4")},r.prototype.setStreams=function(e){var t=this,n=e.streams,r=!1,a=null;if(t._streams=n,t._retryStreams=n.slice(0),t._handleWaitingEvent(),p.safari>=6&&n.forEach(function(e){e.format.indexOf("m3u8")>-1&&(e.isPrimary||e.is_primary||!a)&&(a=e,r=!0)}),!r){var s=[];n.forEach(function(e){s.push(parseInt(e.bitrate))}),s=s.sort(),t._bitrateSelector=new i(t.node,s);var l=t._model.playback.targetBitrate?t._model.playback.targetBitrate:t._bitrateSelector.getTargetBitrate();a=t._getBestStream(l)}return a?(t._setSrc(a,e.startTime),r||(t._updateStreamBitrateInfo(a),e.abr&&s.length>1&&(t._eventBus.subscribe(o.Video.TIMEUPDATE,t._onPlaybackProgress,t),t._lastABRCheckTime=0)),!0):!1},r.prototype.setQuality=function(e){var t=this;t._switchSrc(e.stream.url),t._updateStreamBitrateInfo(e.stream)},r.prototype.retryStreams=function(e){var t=this,n=t._currentStream;if(t._retryCount<=f)setTimeout(function(){t._retryStream(n,e)},1e3*g[t._retryCount-1]);else{t._retryCount=0;var r=t._retryStreams.indexOf(n);if(t._retryStreams.splice(r,1),0===t._retryStreams.length)return n;var i=c.findStreamByProperty(t._retryStreams,c.BITRATE,t._bitrateSelector.getTargetBitrate(),t._capabilities);t._retryStream(i,e)}return null},r.prototype._getFirstPrimaryStream=function(){var e=this,t=null;if(e._streams)for(var n=0;n<e._streams.length;n++)if(e._streams[n].isPrimary){t=e._streams[n];break}return t},r.prototype._getBestStream=function(e){var t=this,n=t._getFirstPrimaryStream();return n||(n=c.findStreamByProperty(t._streams,"bitrate",e,t._capabilities)),!n&&t._streams&&t._streams.length>0&&(n=t._streams[0]),n},r.prototype._onPlaybackProgress=function(e){var t=this;if(e-t._lastABRCheckTime>y){t._lastABRCheckTime=e;var n=t._getBestStream(t._bitrateSelector.getRecommendedBitrate());n&&(t._switchSrc(n.url),t._updateStreamBitrateInfo(n))}},r.prototype._updateStreamBitrateInfo=function(e){var t=this;t._bitrateSelector.currentBitrate=e.bitrate,t._eventBus.publish(o.PLAYBACK_INFO,{currentStreamBitrate:e.bitrate,qualityLevels:t._streams.length})},r.prototype._setSrc=function(e,t,n){var r=this;if(r.ended=!1,r._hasPlayed=!1,r.node.src!==e.url||n){if(p.iphone&&r.node.hasOwnProperty("webkitDisplayingFullscreen")&&!r.node.webkitDisplayingFullscreen&&r._areFormatsCrashy(e.format,r._currentSrcFormat)){var i=r.node.parentNode;r.destroy(),i.appendChild(r.create())}if(p.android&&e.live&&(p.chrome&&p.chrome<30||!u.isAndroidVersionAbove4())){var s=u.createErr("R",r._model.playbackState,a.E_INFO,a.INFO_CODES.E_PLAYER_ANDROID_CHROME_REQUIRED);return void r._eventBus.publish(o.INFO,s)}if(r._deleteTracks(),p.mobile&&e.drmType&&("adobe"===e.drmType||"apple"===e.drmType)&&(e.url=e.url+"&dv=0"),r._profiler&&r._profiler.add(o.Metrics.STREAM_REQUEST_TO_RENDER),r.node.src=e.url,t)var l=r._eventBus.subscribe(o.Video.LOADEDMETADATA,function(){r.node.currentTime=t,l.detach()});r._firstPlay=!0,r._currentSrcFormat=e.format,r._currentStream=e,r._profiler&&r.mode===d.VIDEO&&r._profiler.add(o.Metrics.LOAD_TO_LOADED_DATA),p.mobile||(r.node.load(),r._model.playbackState.state===m.VIDEO&&r.play())}},r.prototype._calculateCanvasPosition=function(){var e=this,t=e.node.videoWidth,n=e.node.videoHeight,r=t/n,i=e.node.clientWidth,a=e.node.clientHeight,o=i/a,s=0,l=0;o>r?(l=a.toFixed(2),s=(r*a).toFixed(2)):(s=i.toFixed(2),l=(i/r).toFixed(2));var d=Math.max((i-s)/2,0),c=Math.max((a-l)/2,0);return{width:s,height:l,left:d,top:c}},r.prototype._seekToCurrentTime=function(){var e=this;e.seek(e._currentTime)},r.prototype._playNewStream=function(){var e=this;e.node.play(),e._canvas.parentNode.removeChild(e._canvas)},r.prototype._finishSwitching=function(){var e=this;e._eventBus.publish(o.Video.SWITCHED),e._isSwitching=!1},r.prototype._switchSrc=function(e){var t=this,n=t.node.clientWidth,r=t.node.clientHeight;if(t.node.src===e)return t._eventBus.publish(o.Video.SWITCHING),void t._eventBus.publish(o.Video.SWITCHED);t._isSwitching=!0,t.node.pause(),t._currentTime=t.node.currentTime;
var i=document.createElement("canvas");t._canvas=i,i.className="yvp-switching-canvas",i.width=n,i.height=r;var a=t._calculateCanvasPosition();i.style.cssText="width:"+a.width+"px;height:"+a.height+"px;left:"+a.left+"px;top:"+a.top+"px",t.node.parentNode.appendChild(i),i.getContext("2d").drawImage(t.node,0,0,n,r),t._eventBus.publish(o.Video.SWITCHING),t.node.src=e},r.prototype._retryStream=function(e,t){var n=this;n._setSrc(e,t,!0),n._updateStreamBitrateInfo(e)},r.prototype.play=function(e){var t=this;if(t.ended=!1,t._firstPlay){if(p.ios){var n=t.node.src;t.node.src="",t.node.load(),t.node.src=n}p.mobile&&t.node.load()}else{var r=isNaN(t.node.duration)?t._model.playlist.getCurrentItem().duration:t.node.duration;_.isNumber(e)&&e>0&&r>e&&(t.node.currentTime=e)}t._firstPlay=!1,t.seeking=!1,t._profiler&&t._profiler.add(o.Metrics.STREAM_PLAY_TO_RENDER),t.node.play()},r.prototype._handleWaitingEvent=function(){var e=this;e._waitingEventTimer&&(clearInterval(e._waitingEventTimer),e._waitingEventTimer=null),e._waitingEventTimer=setInterval(function(){if(!e||!e.node)return void clearInterval(e._waitingEventTimer);var t=e.node.currentTime,n=!1;if(p.safari>=6){var r=0;e.node.buffered&&e.node.buffered.length>0&&(r=e.node.buffered.end(e.node.buffered.length-1)),n=e.node.readyState!==v.VIDEO_TAG_READY_STATES.HAVE_ENOUGH_DATA||r>0&&t>r}if(e.node.seeking)t!==e._lastTime&&e._publishWaitingEvent(!0,!0);else if(t!==e._lastTime&&!n||e.node.paused||0===t){if(t>e._lastTime&&!n){var i=e.seeked||!e._playbackStuck;e._publishWaitingEvent(!1,i),e._seeked=!1}}else e._playbackStuck?e._publishWaitingEvent(!0,!0):e._publishWaitingEvent(!0,!1);e._lastTime=t},b)},r.prototype.getCurrentTime=function(){var e=this;return e.node.currentTime},r.prototype.stopMedia=function(){},r.prototype._publishWaitingEvent=function(e,t){var n=this;n._eventBus.publish(o.Video.WAITING,{type:"waiting",value:e,ignoreBuffering:t}),n._playbackStuck=e}},{"../../../lib":"bRhrlU","../../../lib/logger":"IS9j5T","../../../lib/user-agent":"ty5FFo","../bitrate-selector":13,"../constants":17,"../error":20,"../event":"YJm+dH","../states":50,"../stream":"Af6MnA","../util":"jJTEqU","./html5-base.js":43,"./modes":46,"./type":47}],46:[function(e,t,n){t.exports={VIDEO:"video",AD:"ad",VPAID:"vpaid"}},{}],47:[function(e,t,n){t.exports={FLASH:"flash",HTML5_DASH:"html5-dash",HTML5_HLS:"html5-hls",HTML5_RAW:"html5-raw",HTML5_TV:"html5-tv",HTML5_TV_TIZEN:"html5tv-tizen",HTML5_TV_ORSAY:"html5tv-orsay"}},{}],48:[function(e,t,n){"use strict";function r(e,t){var n=this;n._model=e,n._profiler=t}t.exports=r;var i=e("./util"),a=e("./event"),o="//video-api.yql.yahoo.com/v1/video/user/watchhistory/set?wh=";r.prototype._jsonp=function(e,t,n,r){var a=this;n=n||null,r&&a._profiler.add(r);var o={jsonpHandler:function(i,o){i=i||o.error,r&&a._profiler.setEndTime(r),i?t.call(n,i,null,e):t.call(n,null,o)}};i.jsonp(e,o)},r.prototype.saveToWatchHistory=function(e,t,n){var r=this,i={uuid:e},s=o+encodeURIComponent(JSON.stringify(i));r._jsonp(s,t,n,a.Metrics.SET_WATCH_HISTORY)}},{"./event":"YJm+dH","./util":"jJTEqU"}],49:[function(e,t,n){"use strict";function r(e,t,n){var r=this;r._model=e,r.guid=e?e.guid:"",r._outstandingRequests=[],r._eventBus=t,r._profiler=n,r._xhrErrorCodes={0:{timeout:o.PLAYER_CODES.E_PLAYER_CMS_XHR_REQUEST_SERVER_CONNECTION_FAILED_TIMEOUT,"default":o.PLAYER_CODES.E_PLAYER_CMS_XHR_REQUEST_SERVER_CONNECTION_FAILED},1:{timeout:o.PLAYER_CODES.E_PLAYER_CMS_XHR_REQUEST_RESPONSE_NOT_RECEIVED_TIMEOUT,"default":o.PLAYER_CODES.E_PLAYER_CMS_XHR_REQUEST_RESPONSE_NOT_RECEIVED},2:{408:o.PLAYER_CODES.E_PLAYER_CMS_XHR_REQUEST_LOAD_FAILED_408,timeout:o.PLAYER_CODES.E_PLAYER_CMS_XHR_REQUEST_LOAD_FAILED_TIMEOUT,"default":o.PLAYER_CODES.E_PLAYER_CMS_XHR_REQUEST_LOAD_FAILED},3:{408:o.PLAYER_CODES.E_PLAYER_CMS_XHR_REQUEST_NOT_COMPLETE_408,timeout:o.PLAYER_CODES.E_PLAYER_CMS_XHR_REQUEST_NOT_COMPLETE_TIMEOUT,"default":o.PLAYER_CODES.E_PLAYER_CMS_XHR_REQUEST_NOT_COMPLETE},"default":{timeout:o.PLAYER_CODES.E_PLAYER_CMS_XHR_REQUEST_TIMEOUT,cors:o.PLAYER_CODES.E_PLAYER_CMS_XHR_REQUEST_CORS_ERROR,"default":o.PLAYER_CODES.E_PLAYER_CMS_XHR_REQUEST_ERROR}},a.preconnect("preConnector","//"+a.getHostname(u))}t.exports=r;var i=e("../../lib/user-agent"),a=e("./util"),o=e("./error"),s=e("./event"),l=e("../../lib"),d=(e("../../lib/logger"),e("./media-store")),c=e("./renderers/type"),p=e("./constants"),u="//video-api.yql.yahoo.com/v1/video/sapi",_="//video-api.yql.yahoo.com/v1/video/user/prefs/get",m="//video-api.yql.yahoo.com/v1/video/user/ccprefs/set",v="//video-api.yql.yahoo.com/v1/video/alias/channels",y=2,f=6e4;r.prototype._buildClipParams=function(e,t){var n=this,r=[],o=[];e.rt.forEach(function(e){var n=t[e];r=r.concat(n.acceptedProtocols),o=o.concat(n.preferredFormats)}),r=a.uniquifyArray(r),o=a.uniquifyArray(o);var s=e.rt.indexOf(c.FLASH)>=0?"flash":"html",l={protocol:r.join(","),format:o.join(","),srid:Math.floor(4294967295*Math.random()),rt:s,devtype:i.tv?"tv-widget":i.mobile?"smartphone":"desktop",offnetwork:a.isOffNetwork(),region:e.region,site:e.site,expb:e.expb,expn:e.expn,lang:e.lang,width:e.width,height:e.height,resize:!0,ps:e.ps,autoplay:e.autoplay,image_sizes:e.showPlaylist?p.PLAYLIST_THUMB_DIMENSION:"",acctid:e.acctid,synd:e.synd,pspid:e.pspid,plidl:e.plidl,topic:e.topic,pver:n._model.version,"try":n._model.playlist.getCurrentItem().tryCount,failover_count:n._model.playlist.getCurrentItem().failoverCount};i.tv&&(l.dv=0,l.devtype="tv-widget",l.man=n._model.CTV.man,l["class"]=n._model.CTV["class"]),n._shouldPrefetchMasterPlaylist(e.rt)&&(l.hlspre="true");var d=n._model.getModelSchema();for(var u in n._model.CMS)u in d.CMS||(l[u]=n._model.CMS[u]);return l},r.prototype._shouldPrefetchMasterPlaylist=function(e){if(!e||!l.isArray(e))return!1;var t=e.indexOf(c.HTML5_HLS);if(-1!==t)return!0;var n=e.indexOf(c.HTML5_RAW),r=e.indexOf(c.FLASH);return-1!==n&&-1!==r&&r>n?!1:-1!==r?!0:!1},r.prototype.loadClips=function(e,t,n,r){var i=this,l=i._buildClipParams(e,t);if(""===l.format)i._eventBus.publish(s.INFO,a.createErr("P",i._model.playbackState,o.E_INFO,o.INFO_CODES.E_PLAYER_NO_COMPATIBLE_FORMAT));else{var c=i._model.playlist.getCurrentItem().recoveryStatus===d.ItemRecoveryStatus.RECOVERING||i._model.failOver&&i._model.failOver.sapiUrl?0:null;i._makeSapiYqlpRequest(e.uuids,"/streams",l,n,c,r)}},r.prototype.loadRelatedVideosChannel=function(e,t){var n=this,r="wf-channel=related-videos",o=v+"/"+r,s={video_uuid:e.videoUuid,channel_id:e.playlistId,channel_alias:e.playlistAlias,count:e.count,start:e.start,dev_type:i.mobile?"smartphone":"desktop",offnetwork:a.isOffNetwork(),site:e.site,region:e.region,lang:e.lang,expn:e.expn,vp:0,image_sizes:p.PLAYLIST_THUMB_DIMENSION,ssl:!0};o+="?"+a.querystring(s),n._makeSAPIRequest(o,t)},r.prototype.loadPlaylist=function(e,t,n){var r=this,i=r._buildClipParams(e,t);r._makeSapiYqlpRequest(e.uuid,"/playlist",i,n)},r.prototype.cancelAll=function(){var e=this;e._outstandingRequests.forEach(function(e){e()}),e._outstandingRequests=[]},r.prototype._makeSapiYqlpRequest=function(e,t,n,r,i,o){var s=this,l=u;l+=t,l+="/"===l[l.length-1]?"":"/",n.env&&"prod"!==n.env&&(l="beta"===n.env?l.replace(/video-api/i,"video.beta.media"):l.replace(/video-api\.yql/i,"video-yql.rc-staging.media")),l+=e+"?"+a.querystring(n),s._makeSAPIRequest(l,r,i,o)},r.prototype._generateConfig=function(e,t,n){var r=this;return{context:r,timeout:2e4,responseTypeJson:!0,withCookie:!0,jsonpHandler:e,successHandler:t,failureHandler:n}},r.prototype._makeSAPIRequest=function(e,t,n,r){var i=this,c=i.getSapiRequestCacheKeyFromUrl(e);l.isNullOrUndefined(n)&&(n=y);var p=e+"&try="+(y-n+1),v=e.indexOf(u+"/streams")>-1;l.isNullOrUndefined(r)&&(r=!1);var g=function(e){var t=a.createErr("S",i._model.playbackState,o.E_WARNING,e.code,e.msg,e.debugMsg,e.prefetch);i._eventBus.publish(s.WARNING,t)},b=function(e){if(i._profiler&&v){var t=i._profiler.getItem(s.Metrics.SAPI_REQUEST);if(t&&!t.endTime){var n=e?t.startTime:null;i._profiler.setEndTime(s.Metrics.SAPI_REQUEST,n)}}},h=function(s,l,d){if(s=s||l.error,i._outstandingRequests.splice(i._outstandingRequests.indexOf(L),1),i._publishApiCallInfo(e,l,d),s)if(i._model.playlist.getCurrentItem().tryCount++,a.replaceStrParam(e,"try",i._model.playlist.getCurrentItem().tryCount),0===n)b(!0),t(s,null,e);else{var c=o.PLAYER_CODES.E_PLAYER_CMS_JSONP_REQUEST_FAILURE;s.message===a.JSONP_TIMED_OUT&&(c=o.PLAYER_CODES.E_PLAYER_CMS_JSONP_REQUEST_TIMEOUT),g({code:c,msg:null,debugMsg:e+" timeout: "+Date.now(),prefetch:r}),i._makeSAPIRequest(e,t,n-1,r)}else b(!1),t(null,l)},E=function(n,r,o){if(i._outstandingRequests.splice(i._outstandingRequests.indexOf(L),1),b(!1),t(null,n),r!==!0&&(i._publishApiCallInfo(p,n,o),c&&i._model.playlist.getCurrentItem()&&i._model.playlist.getCurrentItem().isLive())){var s={val:JSON.stringify(n),expiration:(new Date).getTime()+f,cachedVs:d.getSapiVsId(e)};0===i._model.playlist.getCurrentItem().failoverCount&&a.localStorage.put(c,s)}},T=function(o,s,d,c,u){var _=s,m=d;i._outstandingRequests.splice(i._outstandingRequests.indexOf(L),1),i._model.playlist.getCurrentItem()&&i._model.playlist.getCurrentItem().tryCount++,s=l.isNullOrUndefined(s)||l.isNullOrUndefined(i._xhrErrorCodes[s])?"default":s,o.message===a.XHR_TIMEOUT?d="timeout":l.isNullOrUndefined(i._xhrErrorCodes[s][d])&&(d="default");var v=i._xhrErrorCodes[s][d];if(i._publishApiCallInfo(p,null,u),0===n){b(!0);var y=a.createErr("S",i._model.playbackState,o,v,null,"state: "+_+"; status: "+m+"; timeDiff: "+c);t(y,null,e)}else g({code:v,msg:null,debugMsg:e+"; state: "+_+"; status: "+m,prefetch:r}),a.replaceStrParam(e,"try",i._model.playlist.getCurrentItem()&&i._model.playlist.getCurrentItem().tryCount),i._makeSAPIRequest(e,t,n-1,r)};if(c){a.localStorage.getAllKeys().forEach(function(e){/sapi\/streams/.test(e)&&a.localStorage.get(e).expiration<(new Date).getTime()&&a.localStorage.remove(e)});var A=a.localStorage.get(c);if(A){var S=JSON.parse(A.val);return i._model.CMS.cachedVs=A.cachedVs,void E(S,!0)}}v&&!r&&i._profiler&&!i._profiler.getItem(s.Metrics.SAPI_REQUEST)&&i._profiler.add(s.Metrics.SAPI_REQUEST);var I=i._generateConfig(h,E,T);v&&(I.collectPerfData=!0);var L,M=e.indexOf(_)>-1||e.indexOf(m)>-1;L=M?a.jsonp(e,I):a.ajax(e,I),i._outstandingRequests.push(L)},r.prototype._publishApiCallInfo=function(e,t,n){var r=this;if(n){if(n.url=e,n.instrument=t&&t.query&&t.query.results&&t.query.results.instrument?JSON.stringify(t.query.results.instrument):"none",n.perfInfo="na",n.perfStack="na",n.source="player",n.resourceTiming){var i={};if(["connectEnd","connectStart","domainLookupEnd","domainLookupStart","duration","fetchStart","redirectEnd","redirectStart","requestStart","responseEnd","responseStart","startTime"].forEach(function(e){i[e]=n.resourceTiming[e].toFixed(2)}),n.perfInfo=JSON.stringify(i),n.perfStack=[],n.resourceTimingEntries&&n.resourceTiming.requestStart-n.resourceTiming.connectStart>500)for(var a=0;a<n.resourceTimingEntries.length;a++)n.resourceTimingEntries[a].startTime<n.resourceTiming.startTime&&n.perfStack.push({url:n.resourceTimingEntries[a].name,st:n.resourceTimingEntries[a].startTime.toFixed(2),du:(n.resourceTimingEntries[a].responseEnd-n.resourceTimingEntries[a].startTime).toFixed(2)});n.perfStack=0===n.perfStack.length?"na":JSON.stringify(n.perfStack)}r._eventBus.publish(s.API_CALLED,n)}},r.prototype.updateUserPreferences=function(e,t){var n=this;n._makeSAPIRequest(m+"?userccp="+encodeURIComponent(JSON.stringify(t)),e)},r.prototype.getUserPreferences=function(e){var t=this;t._makeSAPIRequest(_,e)},r.prototype.getSapiRequestCacheKeyFromUrl=function(e){var t=this,n=e.split(/\/sapi\/streams\//),r=null;return t._model.CMS.enableCache&&n.length>1&&(r=n[1].replace(/&ps=(.*?)&/g,"&"),r=r.replace(/&try=(.*?)&/g,"&"),r="sapi/streams/"+r.replace(/&srid=(.*?)&/g,"&")),r}},{"../../lib":"bRhrlU","../../lib/logger":"IS9j5T","../../lib/user-agent":"ty5FFo","./constants":17,"./error":20,"./event":"YJm+dH","./media-store":26,"./renderers/type":47,"./util":"jJTEqU"}],50:[function(e,t,n){t.exports={INIT:"init",WAITING:"waiting",VIDEO:"video",END:"end"}},{}],Af6MnA:[function(e,t,n){"use strict";function r(e,t){return t.some(function(t){return e===t})}function i(e,t){var n=!1;return t.forEach(function(t){e.indexOf(t)>-1&&(n=!0)}),n}var a=function(e,t,n){var r=null;return e&&e.forEach(function(e){r?e[n]<=t&&(r=e):r=e}),r};n.findAcceptedStreams=function(e,t){return e.filter(function(e){return r(e.format,t.acceptedFormats)&&i(e._getProtocol(),t.acceptedProtocols)})},n.findStreamByProperty=function(e,t,r,i){return e=n.findAcceptedStreams(e,i).sort(function(e,n){return e[t]-n[t]}),"resolution"===t&&(t="height"),a(e,r,t)},n.isHlsLive=function(e){return e.url.match(/\.m3u8/)&&e.live||!1},n.BITRATE="bitrate",n.RESOLUTION="resolution"},{}],"./nextgen/src/stream.js":[function(e,t,n){t.exports=e("Af6MnA")},{}],"./nextgen/src/strings.js":[function(e,t,n){t.exports=e("XwKsC9")},{}],XwKsC9:[function(e,t,n){"use strict";n.i18n={ON:"On",OFF:"Off",MENU:"Menu",ELAPSED_TIME:"elapsed time",REMAINING_TIME:"remaining time",NUM_SECONDS:"{num-seconds} seconds",NUM_SECOND:"{num-seconds} second",OPTIONS:"Options",LINK:"Link",EMBED:"Embed",SHARE:"Share",SHARING:"Sharing",SHARING_UNAVAILABLE_MESSAGE:"Sharing is not available for this video.",TIMESTAMP:"Starts at",NOW_WATCHING:"Now Watching",NOW_PLAYING:"Now Playing",ADVERTISEMENT:"Advertisement",LIVE:"Live",FEEDBACK:"Feedback",PLAY_VIDEO:"Play Video",REPLAY:"Replay",BACK:"Back",FEEDBACK_BUTTON:"Report issue",FEEDBACK_SUBMIT_BUTTON:"Submit",FEEDBACK_TITLE:"Report Yahoo Videoplayer Issue",FEEDBACK_SUBTITLE_RESPONSE_MESSAGE:"Thank you for your report.",FEEDBACK_SUBTITLE_RESPONSE_ID:"Report id: ",FEEDBACK_DISCLAIMER:"* By submitting this report, you agree to allow Yahoo! to collect video playback data from your current session to help us deliver a great experience to all users. Thanks for your help!",CONTENT_RESTRICTED:"Content Restricted",AGE_GATE_DESC:"This content is intended for mature audiences. Viewer discretion advised.",SIGN_IN_TO_VIEW_ACTION:"Sign-in to view",CONTINUE_ACTION:"Continue",AGE_GATE_BDAY_DESC:"This content is intended for mature audiences. Please enter your date of birth below to continue.",SUBMIT_ACTION:"Submit",AGE_GATE_NOT_ALLOWED_DESC:"Sorry. This content is intended for mature audiences.",MATURE:"Mature",SETTINGS:"Settings",PREFERENCES:"Preferences",VIDEO_QUALITY:"Video Quality",QUALITY:"QUALITY",AUTO:"Auto",LOW:"Low",MEDIUM:"Medium",HIGH:"High (HD)",QUALITY_INDICATOR:"Quality Indicator",AUTOPLAY:"Autoplay",AUTOPLAY_DESCRIPTION:"When applicable, the video will automatically start playing as soon as it can do so without stopping.",HTML5_PREFERENCE:"HTML5 Preference",PREFERENCE_DESCRIPTION:"Where possible, the HTML5 player is used by default instead of Flash player.",SIGN_IN:"Sign In",LOGIN_MESSAGE:"Please sign in to use this feature.",EMBED_NOT_ALLOWED:"This video cannot be embedded due to provider license restrictions.",TOP:"Top",BOTTOM:"Bottom",CC_PREVIEW:"Bottom",CC_PREVIEW_MESSAGE:"Captions will look like this",FONT:"font",BACKGROUND:"background",EFFECTS:"effects",NONE:"none",DROPSHADOW:"dropshadow",RAISED:"raised",DEPRESSED:"depressed",UNIFORM:"uniform",NO_ITEM_AVAILABLE:"No item available",SEE_MORE:"See More",EXAMPLE:"Example",CC:"Closed Captions",CAPTION:"Caption",EXPIRED_VIDEO:"[Expired Video]",LANGUAGE:"Language",SIZE:"Size",STYLE:"Style",REMOVE:"Remove",POSITION:"Position",WATCH_LATER:"Watch Later",LOGIN_BUTTON_LABEL:"Sign in to Yahoo",LOADING:"Loading your saved videos ...",NO_WATCH_LATER:"There are no videos in your Watch Later list. You can add one by clicking the clock in lower right corner of the video.",WATCH_LATER_ADDED:"Added to Watch Later",WATCH_LATER_REMOVED:"Removed from Watch Later",WATCH_LATER_JUST_ADDED:"Just Added",WATCH_LATER_ERROR_MESSAGE:"Sorry! We are unable to fetch your watch later videos. Please reload the page to try again.",ICON:"Icon",SOCIAL:"Social",MY_STUFF:"My Stuff",SNAP_IT:"Snap It",ERROR_CODE:"Error Code",SHORTCUTS:"Shortcuts",ESC:"Esc",CLOSE_SETTINGS:"Close Settings",SPACE:"Space",PLAY_PAUSE:"Play/Pause",FULLSCREEN:"Fullscreen",UP_ARROW:"Up Arrow",DOWN_ARROW:"Down Arrow",INCREASE_VOLUME:"Increase Volume",DECREASE_VOLUME:"Decrease Volume",ERR_ANDROID_LIVE_CHROME_REQUIRED:'This video requires Android 4.0 or above and the latest version of the Google Chrome browser.<br>You can get the latest version of Chrome from the <a href="https://play.google.com/store/apps/details?id=com.android.chrome">Google Play store</a>.',ERR_LIVE_PLAYBACK_COMPLETE:"This live event has ended.",ERR_NETWORK_ISSUE:"Videos cannot play due to a network issue. Please check your Internet connection and try again.",ERR_DEVICE:"Due to license restrictions, this video cannot be viewed on this device.",ERR_DRM_BAD_LICENSE_FILE:"The video license file must be reset to watch this video. See the <a href='http://www.macromedia.com/support/documentation/en/flashplayer/help/settings_manager08.html'> Flash Settings Manager support</a> page for details.",ERR_DRM_INCOGNITO_MODE:"This video cannot be played in incognito or private browsing mode. Play it in a regular browser tab instead.",ERR_DRM_RESTRICTED:"Please download the Yahoo! <a href='https://yho.com/5xx'>Screen App</a> to watch this video.",ERR_EMBED:"Due to license restrictions, this video can only be viewed on Yahoo.",ERR_FLASH_IS_BLOCKED:"This video requires Flash. Verify Flash is not disabled or blocked, then <a href='javascript:window.location.reload();'>reload</a> the page.",ERR_COOKIE_DISABLED:"This video cannot be played due to a browser settings issue. Enable third party cookies in your browser, then <a href='javascript:window.location.reload();'>reload</a> the page.",ERR_FLASH_LATEST_DOWNLOAD:"The latest version of Adobe Flash is required to play this video. <a class='yvp-error-flash-download-wrapper' href='http://get.adobe.com/flashplayer/'>Download the free Flash player here.</a>",ERR_GEO:"Unfortunately, this video is not available in your region.",ERR_BLACKOUT:"Due to local blackout restrictions, this live event cannot be viewed in your area.",ERR_TECH_DIFFICULTIES:"If this error is occurring repeatedly, we may be experiencing technical difficulties. We apologize for the inconvenience. <a class='yvp-browser-refresh' href='javascript:window.location.reload();'>Refresh Browser</a>",ERR_UNAUTHORIZED:"You must be a paid subscriber to view this video.",ERR_UNAVAILABLE:"Unfortunately, this video is no longer available.",ERR_MISSING_OR_DAMAGED:"Unfortunately, this video is missing or damaged and cannot be played.",ERR_DRM_CHROME_SETTING:"You must adjust your Chrome browser settings to watch this secure video. Open chrome://settings/content in Chrome browser, then check 'Allow identifiers for protected content' checkbox.",ERR_BROWSER_UNSUPPORTED:"This browser is unsupported. To view this video, try another browser.",ERR_GENERAL_ERROR:"Unfortunately, an error occurred. To try again, <a href='javascript:window.location.reload();'>refresh the browser</a>.",ERR_LIVE_IOS_PLAYBACK:"Unfortunately, an error occurred. To try again, either <a href='javascript:window.location.reload();'>refresh</a> the browser or download the <a class='yvp-browser-refresh' href='https://mobile.yahoo.com/sports'>Yahoo Sports app</a>",ERR_TITLE_CANNOT_PLAY_VIDEO:"Cannot Play Video",ERR_TITLE_SOMETHING_WENT_WRONG:"Something Went Wrong",ERR_TITLE_VIDEO_NOT_AVAILABLE:"Video Not Available",CHROMECAST:"Chromecast",DISCONNECT:"Disconnect",CAST_PLAYING_RECEIVER:"Playing on {device-name}",PAUSE_VIDEO:"Pause Video",GO_TO_FULLSCREEN:"Go to full screen",GO_TO_NORMAL_SCREEN:"Go to normal screen",UNMUTE:"Unmute",MUTE:"Mute",CLOSE:"Close",REMOVE_FROM_WATCH_LATER:"Remove from watch later",SEEK_SLIDER:"Seek slider",UP_NEXT:"Up next",FULLSCREEN_SPACE:"Full Screen",PRESETS:"Presets",CC_SETTINGS:"Closed Caption Settings",CC_TYPE_SIZE:"Type Size",COLOR:"Color",TRANSPARENCY:"Transparency",SUBMIT_FEEDBACK:"Submit Feedback",BACK_TO_SETTINGS:"Back to Settings",BACK_TO_OPTIONS:"Back to Options",ADV_SHORT:"Ad:",TEXT:"Text",STYLE_OPTIONS:"Style Options",PLAIN:"Plain",SHADOW:"Shadow",LOWERED:"Lowered",OUTLINE:"Outline",CAPTIONS_ON:"Captions On",CAPTIONS_OFF:"Captions Off",CAPTIONS_AVAILABLE:"Captions Available",CAPTIONS_NOT_AVAILABLE:"Captions Not Available",EXIT_FULLSCREEN:"Exit Full Screen"}},{}],dsc79Q:[function(e,t,n){"use strict";function r(e,t,n){var r=this;e=i.isString(e)?document.getElementById(e):e,r.element=e,r.moved=!1,r.mouseDown=!1,i.isFunction(t)?(r.onTap=t,r.shouldPropagate=i.isBoolean(n)?n:!1):(r.onTap=function(){},r.shouldPropagate=i.isBoolean(t)?t:!1),e.addEventListener("tap",r.onTap,!1),a.forEach(function(t){e.addEventListener(t,r,!1)})}t.exports=r;var i=e("../../lib"),a=["touchstart","touchmove","touchend","touchcancel","mousedown","mouseup"];r.isTouchDevice=!1,r.prototype._start=function(e){var t=this,n="touchstart"===e.type;if(n){r.isTouchDevice=!0;var i=e.touches[0]}t.mouseDown=!0,t.startX=n?i.clientX:e.clientX,t.startY=n?i.clientY:e.clientY,t.lastPageX=n?i.pageX:e.pageX,t.lastPageY=n?i.pageY:e.pageY,t.moved=!1},r.prototype._move=function(e){var t=this,n=e.touches[0];t.lastPageX=n.pageX,t.lastPageY=n.pageY,(Math.abs(n.clientX-t.startX)>10||Math.abs(n.clientY-t.startY)>10)&&(t.moved=!0)},r.prototype._end=function(e){var t,n=this;!n.moved&&n.mouseDown&&(n.mouseDown=!1,void 0!==document.CustomEvent?t=new document.CustomEvent("tap",{bubbles:!0,cancelable:!0}):(t=document.createEvent("Event"),t.initEvent("tap",!0,!0)),t.pageX=e.pageX||n.lastPageX,t.pageY=e.pageY||n.lastPageY,t.eventSource=e.srcElement,t.eventTarget=e.target,(!e.handled||n.shouldPropagate)&&n.element.dispatchEvent(t),e.handled=!0)},r.prototype._cancel=function(){var e=this;e.moved=!1},r.prototype.destroy=function(){var e=this,t=e.element;t&&(t.removeEventListener("tap",e.onTap,!1),a.forEach(function(n){t.removeEventListener(n,e,!1)}),e.element=null)},r.prototype.handleEvent=function(e){var t=this;switch(e.type){case"mousedown":if(r.isTouchDevice)return;case"touchstart":t._start(e);break;case"touchmove":t._move(e);break;case"mouseup":if(r.isTouchDevice)return;case"touchend":t._end(e);break;case"touchcancel":t._cancel(e)}}},{"../../lib":"bRhrlU"}],"./nextgen/src/tap.js":[function(e,t,n){t.exports=e("dsc79Q")},{}],jJTEqU:[function(e,t,n){"use strict";function r(e){return o.isString(e)?e:o.isBoolean(e)?e.toString():o.isNumber(e)&&isFinite(e)?e.toString():""}function i(e){var t,r={"www.yahoo.com":!0,"news.yahoo.com":!0,"sports.yahoo.com":!0,"finance.yahoo.com":!0,"www.tumblr.com":!0,"beta.finance.yahoo.com":!0,"au.yahoo.com":!0,"be.yahoo.com":!0,"fr-be.yahoo.com":!0,"br.yahoo.com":!0,"ca.yahoo.com":!0,"de.yahoo.com":!0,"espanol.yahoo.com":!0,"es.yahoo.com":!0,"fr.yahoo.com":!0,"gr.yahoo.com":!0,"hk.yahoo.com":!0,"id.yahoo.com":!0,"ie.yahoo.com":!0,"in.yahoo.com":!0,"it.yahoo.com":!0,"my.yahoo.com":!0,"nz.yahoo.com":!0,"ro.yahoo.com":!0,"se.yahoo.com":!0,"sg.yahoo.com":!0,"tw.yahoo.com":!0,"uk.yahoo.com":!0,"us.yahoo.com":!0,"ve.yahoo.com":!0,"vn.yahoo.com":!0,"maktoob.yahoo.com":!0,"en-maktoob.yahoo.com":!0,"za.yahoo.com":!0,"qc.yahoo.com":!0,"att.yahoo.com":!0,"espanol.att.yahoo.com":!0,"frontier.yahoo.com":!0,"verizon.yahoo.com":!0,"ca.rogers.yahoo.com":!0,"fr-ca.rogers.yahoo.com":!0,"tatadocomo.yahoo.com":!0,"tikona.yahoo.com":!0,"ideanetsetter.yahoo.com":!0,"mtsindia.yahoo.com":!0,"smartfren.yahoo.com":!0,"tournament.fantasysports.yahoo.com":!0,"baseball.fantasysports.yahoo.com":!0,"football.fantasysports.yahoo.com":!0,"hockey.fantasysports.yahoo.com":!0,"basketball.fantasysports.yahoo.com":!0},i=/.*mg\d*\.mail\.yahoo\.com$/,o=n.getWindow(),s=o.location.protocol,l=o.location.hostname,d="player.swf",c="https:"===s?n.assetDomainHttps:n.assetDomainHttp,p=c+"/rx/builds/"+e+"/assets/"+d;return a.chrome&&(o.parent!==o&&(t=n.parseDomain(o.document.referrer),t&&(l=t)),r[l]?p=s+"//"+l+"/sy/rx/builds/"+e+"/assets/"+d:i.test(l)&&(p=s+"//"+l+"/lyimg/videoinmail/"+e+"/assets/"+d)),p}var a=e("../../lib/user-agent"),o=e("../../lib"),s=(e("../../lib/logger"),e("xhr")),l=e("./error"),d=e("./renderers/type"),c=!1;n.assetDomainHttp="http://l.yimg.com",n.assetDomainHttps="https://s.yimg.com",n.setSingleton=function(e,t){window.YAHOO=window.YAHOO||{},window.YAHOO.VideoPlatform=window.YAHOO.VideoPlatform||{},window.YAHOO.VideoPlatform[e]=t,window.YUI&&!c&&(c=!0,window.YUI.add("videoplayer",function(e){Object.keys(window.YAHOO.VideoPlatform).forEach(function(t){var n=window.YAHOO.VideoPlatform[t];e.namespace("VideoPlatform")[t]=n})}))},n.getSingleton=function(e){return window.YAHOO&&window.YAHOO.VideoPlatform&&window.YAHOO.VideoPlatform[e]?window.YAHOO.VideoPlatform[e]:null},n.createErr=function(e,t,n,r,i,o,s){return new l.Error(e,n,r,{playbackState:t,msg:i,debugMsg:o,prefetch:s},a)},n.extend=function(e){o.isObject(e)||(e={});var t=Array.prototype.slice.call(arguments,1);return t.forEach(function(t){if(t)for(var n in t)e[n]=t[n]}),e},n.once=function(e){var t=function(){return t.called?t.value:(t.called=!0,t.value=e.apply(this,arguments),t.value)};return t.called=!1,t},n.querystring=function(e,t,n,i){return t=t||"&",n=n||"=",i=i||encodeURIComponent,o.isObject(e)&&(e=[e]),e.map(function(e){return Object.keys(e).map(function(a){var s=i(r(a));return null===e[a]?s:(s+=n,o.isArray(e[a])?e[a].map(function(e){return s+i(r(e))}).join(t):s+i(r(e[a])))}).join(t)}).join(t)},n.getCookie=function(e,t){t=t||{},e+="=";for(var n=document.cookie.split(/;\s*/),r=n.length-1;r>=0;r--)if(!n[r].indexOf(e)){var i=n[r].replace(e,"");return t.raw?i:decodeURIComponent(i)}},n.setCookie=function(e,t,n){n=n||{},n.raw||(t=encodeURIComponent(t));var r=e+"="+t,i=n.expires?n.expires.toGMTString():"Thu, 01-Jan-1970 00:00:01 GMT";n.session||(r+="; expires="+i);var a=n.path;a&&(r+="; path="+a);var o=n.domain;o&&(r+="; domain="+o),document.cookie=r},n.generateGuid=function(){return Math.floor(4294967295*Math.random()).toString()},n.sanitizeAndUnescape=function(e){if(o.isNullOrUndefined(e))return"";var t=e.toString().replace(/<\/?[^>]+>/g,""),n=document.createElement("div");return n.innerHTML=t,n.textContent},n.getHostUrl=function(){var e=document.referrer;try{window.top.location.href&&(e=window.top.location.href)}catch(t){}return e},n.generateLoginUrl=function(e,t,r){var i="https://login.yahoo.com",a={".src":"vp",".intl":e,".lang":t,".done":r||n.getHostUrl()};return n.fillUrl(i,a)},n.fillUrl=function(e,t){return e+"?"+n.querystring(t)},n.isOffNetwork=function(e){e=e||n.getHostUrl();var t=n.parseDomain(e),r=["yahoo.com","yahoo.co.jp","yahoo.net","yahoo.fr","yimg.com","rivals.com","tumblr.com","txmblr.com","flickr.com","maktoob.com","grindtv.com","thepostgame.com","nfl.com","nfljapan.com","movie.yahoo-leisure.hk","mmovie.yahoo-leisure.hk","localhost"];return e?a.samsung?!1:!t||!r.some(function(e){return-1!==t.indexOf(e,t.length-e.length)}):!1},n.isIFrame=function(){try{return window.top!==window.self}catch(e){return!0}},n.render=function(e,t,n){var r=document.createElement("div");return r.innerHTML=e.render(t,n),r.children[0]},n.inherits=function(e,t){e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}})},n.getTextFromNode=function(e){return e?e.textContent.trim():null},n.parseDomain=function(e){var t=/^https?:\/\/([A-Za-z0-9\.\-]*)(?:$|\/|:)/.exec(e);return t?t[1]:null},n.parseRootHost=function(e){var t=n.parseDomain(e),r=null;if(t){var i=t.split(".");r=i.length>=2?i[i.length-2]:t}return r},n.localStorage={get:function(e){var t=null;try{t=JSON.parse(localStorage.getItem(e))}catch(n){t=null}return t},put:function(e,t){if(!e||!t)return!1;try{return t=JSON.stringify(t),localStorage.setItem(e,t),!0}catch(n){return!1}},remove:function(e){try{localStorage.removeItem(e)}catch(t){return}},getAllKeys:function(){try{for(var e=[],t=0,n=localStorage.length;n>t;++t)e.push(localStorage.key(t));return e}catch(r){return e}}},n.sendImageBeacon=function(e){function t(){r.onload=r.onabort=r.onerror=null,r=null}e=n.fixProtocol(e);var r=new Image;r.onload=r.onabort=r.onerror=t,r.src=e},n.sendIframeBeacon=function(e){var t=this;e=n.fixProtocol(e);var r,i=Math.random(),a="vp-beacons",o=document.querySelector("#"+a),s=a+"-"+i;return o||(o=t.createBeaconsIframe(document,a),document.body.appendChild(o)),r=t.createBeaconsIframe(o.contentDocument,s),r.src=e,"complete"===o.contentDocument.readyState?o.contentDocument.body.appendChild(r):o.contentDocument.body.onload=function(){o.contentDocument.body.appendChild(r)},!0},n.sendUnloadBeacon=function(e){navigator&&navigator.sendBeacon?navigator.sendBeacon(e,null):n.sendImageBeacon(e)},n.createBeaconsIframe=function(e,t){var n=e.createElement("iframe");return n.frameBorder=0,n.width=0,n.height=0,n.marginwidth=0,n.marginheight=0,n.hspace=0,n.vspace=0,n.frameborder=0,n.scrolling="no",n.id=t,n.style.display="none",n.title="",n},n.getWindow=function(){return window},n.getAssetUrl=function(e,t,r){var a,o=n.getWindow(),s=o.location.protocol,l="https:"===s?n.assetDomainHttps:n.assetDomainHttp;return a=e?"/assets/"+r:"player.swf"===r?i(t):l+"/rx/builds/"+t+"/assets/"+r},n.getScriptUrl=function(e,t,r){var i,a=window.location.href.match(/videoplayer.*\-debug.js/)||window.location.href.match(/minimal\.html/)?"-debug.js":"-min.js";if(e)i="/"+r+"-debug.js";else{var o="https:"===document.location.protocol?n.assetDomainHttps:n.assetDomainHttp;i=o+"/rx/builds/"+t+"/"+r+a}return i},n.classList=function(e){function t(t){return function(n){var r=e&&o.isString(e.className)?e.className.split(/\s+/):[],i=r.indexOf(n),a=t(r,i,n);return e&&o.isString(e.className)&&(e.className=r.join(" ")),a}}if(e.classList)return e.classList;var n={add:t(function(e,t,n){~t||e.push(n)}),remove:t(function(e,t){~t&&e.splice(t,1)}),toggle:t(function(e,t,n){~t?e.splice(t,1):e.push(n)}),contains:t(function(e,t){return!!~t})};return n},n.forceDOMRedrawOnElement=function(e){e&&e.offsetHeight},n.uniquifyArray=function(e){return e.filter(function(e,t,n){return n.indexOf(e)===t})},n.isInternalUser=function(){var e=n.getSingleton("PlayerHosting");return e&&"s"===e.env},n.strSubstitute=function(e,t){return e.replace(/\{([^\{\}]*)\}/g,function(e,n){var r="function"==typeof t?t(n):t[n];return o.isNullOrUndefined(r)?e:r})},n.showUserAuthPage=function(e){var t="https://login.yahoo.com/?.src=vp&.intl={region}&.lang={language}&.done={referrer}",r=n.strSubstitute(t,{region:e.baseConfig.region,language:e.baseConfig.lang,referrer:encodeURI(n.getHostUrl())});n.redirect(r)},n.lazyLoad=function(e,t,n,r){function i(t){a.loadedScripts[e]&&a.loadedScripts[e].forEach(function(e){e(t)}),a.loadComplete[e]=t,clearTimeout(l)}var a=this,s=document.createElement("script");if(o.isNullOrUndefined(a.loadedScripts)&&(a.loadedScripts={},a.loadComplete={}),o.isNullOrUndefined(a.loadedScripts[e])&&(a.loadedScripts[e]=[],a.loadComplete[e]=!1),a.loadedScripts&&a.loadedScripts.hasOwnProperty(e)){if(a.loadComplete[e]!==!1)return n(a.loadComplete[e]);if(a.loadedScripts[e].push(n),a.loadedScripts[e].length>1)return}s.async=!0,s.src=e;var l=window.setTimeout(function(){a.loadedScripts[e]&&a.loadedScripts[e].forEach(function(e){e("Script load timeout")}),a.loadComplete[e]="Script load timeout"},t);return s.onload=function(){i(null)},s.onerror=function(){i("Failed to load script")},r&&i("Cancelling script execution"),document.body.appendChild(s),function(){i("Cancelling script execution")}},n.XHR_ERROR="XHR error",n.XHR_TIMEOUT="XHR request timed out",n.ajax=function(e,t){e=n.fixProtocol(e);var r=2,i=t.context,l=t.responseTypeJson,d=t.withCookie,c=t.timeout,p=n.once(t.successHandler),u=n.once(t.failureHandler),_=(o.isNullOrUndefined(t.earlyRetries)?r:t.earlyRetries,!1),m=null,v={url:e,cors:a.ie&&a.ie<10||d,withCredentials:d,timeout:c||3e3};if(i&&p&&u){var y=(new Date).getTime(),f=new s(v,function(r,a,s){if(!_)if(t.collectPerfData&&(m={},o.isFunction(f.getResponseHeader)&&(m.resp_len=f.getResponseHeader("Content-Length")||"na"),window.performance&&window.performance.getEntriesByName&&(m.resourceTiming=window.performance.getEntriesByName(location.protocol+e).pop(),
m.resourceTimingEntries=window.performance.getEntries()),m.http_code=a.status),r){a.timeDiff=(new Date).getTime()-y;var d=null;o.isFunction(f.getResponseHeader)&&(d=f.getResponseHeader("Access-Control-Allow-Origin"));var v=window.location.protocol+"//"+window.location.host;if(d&&d!==v)u.call(i,new Error(n.XHR_ERROR),"default","cors");else{var g=a.timeDiff>=c?n.XHR_TIMEOUT:n.XHR_ERROR;u.call(i,new Error(g),a.previousState,a.status,a.timeDiff,m)}}else p.call(i,l?JSON.parse(s):s,!1,m)});f.previousState=f.readyState;var g=f.onreadystatechange;f.onreadystatechange=function(){4===f.readyState?g.call(f):f.previousState=f.readyState}}return function(){_=!0}},n.JSONP_ERROR="jsonp error",n.JSONP_TIMED_OUT="jsonp request timed out",n.jsonp=function(e,t){function r(e){}function i(e){s.removeChild(c),e?delete window[o]:window[o]=function(){},clearTimeout(p)}function a(){r("cancelled"),window[o]&&i(!1)}e=n.fixProtocol(e);var o,s=document.getElementsByTagName("head")[0],l=n.once(t.jsonpHandler);do o="_callback"+Math.round(1e7*Math.random());while(void 0!==window[o]);var d=e+(e.indexOf("?")+1?"&":"?");d+="callback="+o;var c=document.createElement("script");c.type="text/javascript",c.src=d;var p=window.setTimeout(function(){r("timeout"),i(!1),l(new Error(n.JSONP_TIMED_OUT),null,n.fetchJsonpPerfData(e,o,t.collectPerfData))},2e4);return c.onerror=function(){i(!0),l(new Error(n.JSONP_ERROR),null,n.fetchJsonpPerfData(e,o,t.collectPerfData))},window[o]=function(r){i(!0),l(null,r,n.fetchJsonpPerfData(e,o,t.collectPerfData,r))},s.appendChild(c),a},n.fetchJsonpPerfData=function(e,t,n,r){var i={};if(n){if(i.resp_len="na",window.performance&&window.performance.getEntriesByName,r){var a=location.protocol+e+"&callback="+t;i.resourceTiming=window.performance.getEntriesByName(a).pop(),i.resourceTimingEntries=window.performance.getEntries()}r&&(i.http_code=r.status||"na",i.resp_len=r.length||"na")}return i},n.isFlashInstalled=function(){if(void 0!==n.isFlashInstalledMem)return n.isFlashInstalledMem;var e=null;if(a.ie)try{var t=new window.ActiveXObject("ShockwaveFlash.ShockwaveFlash");e=t.GetVariable("$version").replace(/[A-Za-z\s]+/g,"").split(",")}catch(r){}else{var i=navigator.mimeTypes["application/x-shockwave-flash"];if(i){var o=i.enabledPlugin;o&&(e=o.description.replace(/\s[rd]/g,".").replace(/[A-Za-z\s]+/g,"").split("."))}}return e?n.isFlashInstalledMem="0"!==e[0]:n.isFlashInstalledMem=!1,n.isFlashInstalledMem},n.getMediaCDNName=function(e,t,r){var i,a,o,s,l="unknown";if(t&&t.length>0){if(a=t[0],a.cdn&&a.cdn.length>0)return a.cdn;a.url?i=a.url:(o=a.host,s=a.path,i=o+s),!e.isLive()&&a.hlsInfo&&(i=a.hlsInfo.ts_url)}else r&&r.length>0&&(i=r);return i&&i.length>0&&(l=i.indexOf("akamai")>-1||0===i.indexOf("rtmp")&&e.isLive()?"akamai":i.indexOf("yahoo.com")>-1||i.indexOf("yimg.com")>-1?"atlas":i.indexOf("llnwd.net")>-1?"limelight":i.indexOf("fastly.com")>-1?"fastly":n.parseRootHost(i)),l},n.redirect=function(e,t){try{t?window.top.location.replace(e):window.top.location.assign(e)}catch(n){typeof n===window.DOMException}},n.showHide=function(e,t){e.style.display=t?"block":"none"},n.formatTime=function(e){var t=Math.floor(e/3600),n=Math.floor((e-3600*t)/60),r=Math.floor(e-3600*t-60*n),i="";return 10>r&&(r="0"+r),t>0?(10>n&&(n="0"+n),t+":"+n+":"+r):o.isNumber(n)?n+":"+r:i},n.getOffsetTopFromEl=function(e,t){for(var r=0;e;)isNaN(e.offsetTop)||(r+=e.offsetTop),e=e.offsetParent,t&&n.classList(e).contains(t)&&(e=null);return r},n.getOffsetTopFromDocument=function(e){var t=e.getBoundingClientRect(),n=document.body,r=document.documentElement,i=window.pageYOffset||r.scrollTop||n.scrollTop,a=r.clientTop||n.clientTop||0;return Math.round(t.top+i-a)},n.setupMouseWheelListener=function(e){var t=function(t){var n=Math.max(-1,Math.min(1,t.wheelDelta||-t.detail)),r=n>0,i=e.scrollHeight>e.offsetHeight,a=r&&e.scrollTop<1,o=!r&&e.scrollTop>=e.scrollHeight-e.offsetHeight;i&&(a||o)&&t.preventDefault()};return e&&(e.addEventListener("mousewheel",t),e.addEventListener("DOMMouseScroll",t)),t},n.destroyMouseWheelListener=function(e,t){e&&o.isFunction(t)&&(e.removeEventListener("mousewheel",t),e.removeEventListener("DOMMouseScroll",t))},n.bucketize=function(){return Math.floor(100*Math.random())},n.cssHexToRgb=function(e){var t=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(e);return t?{r:parseInt(t[1],16),g:parseInt(t[2],16),b:parseInt(t[3],16)}:null},n.getElementViewability=function(e){var t,n=e.getBoundingClientRect();return t=n.top>=0?n.bottom>window.innerHeight?window.innerHeight-n.top>0?window.innerHeight-n.top:0:n.height:n.bottom>window.innerHeight?window.innerHeight:n.bottom<0?0:n.bottom,Math.round(t/n.height*100)},n.noPropagation=function(e){o.isFunction(e.stopPropagation)&&e.stopPropagation()},n.getHostname=function(e){var t=document.createElement("a");return t.href=e,t.hostname},n.getFormat=function(e){var t=["mp4","m3u8","webm","flv","f4m","mp4b","m3u8_playlist","m3u8_master"],n=null;return t.forEach(function(t){-1!==e.indexOf(t)&&(n=t)}),n},n.mapStreamsToQualities=function(e){var t=1,n=2,r=1500,i=2500,a=null,o=null,s=null;if(e.bitrates){for(var l=[],d=0;d<e.bitrates[d];d++)l.push({bitrate:e.bitrates[d],height:e.heights[d]});e=l}for(d=0;d<e.length;d++){var c,p=e[d],u=t*p.bitrate+n*p.height;r>=u?a?(c=a.bitrate+2*a.height,u>c&&(a=p)):a=p:i>=u?o?(c=o.bitrate+2*o.height,u>c&&(o=p)):o=p:s?(c=s.bitrate+2*s.height,u>c&&(s=p)):s=p}return{low:a,medium:o,high:s}},n.getUrlStatus=function(e,t){var n=new XMLHttpRequest;n.open("GET",e,!0),n.onreadystatechange=function(){4===n.readyState&&t(n.status)},n.send()},n.isPlayerInBackground=function(){return this.hidden||("undefined"!=typeof document.hidden?this.hidden="hidden":"undefined"!=typeof document.mozHidden?this.hidden="mozHidden":"undefined"!=typeof document.msHidden?this.hidden="msHidden":"undefined"!=typeof document.webkitHidden?this.hidden="webkitHidden":this.hidden="unsupported"),"unsupported"===this.hidden?!document.hasFocus():document[this.hidden]},n.shouldEnableQualitySelector=function(e){var t=["html","flash","html5-hls"],n=e.playbackState.rendererType,r=e.playlist.getCurrentItem();if(t.indexOf(n)>-1&&r){if("flash"!==n)return r.streams.length>1||r.streamProfiles.length>1;if("hls"===r.streams[0].getType())return r.isLive()?!0:r.streams.length>1}return!1},n.replaceStrParam=function(e,t,n){return e.replace(new RegExp(t+"=\\w*"),t+"="+n)},n.isAndroidVersionAbove4=function(){if(a.androidVersion){var e=parseInt(a.androidVersion);return e>=4}return!1},n.isHtmlRenderer=function(e){return e===d.HTML5_DASH||e===d.HTML5_HLS||e===d.HTML5_RAW},n.preconnect=function(e,t){if(document&&!document.head.querySelector("#"+e)){var n=document.createElement("link");n.setAttribute("rel","preconnect"),n.setAttribute("id",e),n.setAttribute("href",t);var r=document.getElementsByTagName("head")[0];r&&r.appendChild(n)}},n.fixProtocol=function(e){return a.samsung&&0===e.indexOf("//")?"https:"+e:e}},{"../../lib":"bRhrlU","../../lib/logger":"IS9j5T","../../lib/user-agent":"ty5FFo","./error":20,"./renderers/type":47,xhr:215}],"./nextgen/src/util.js":[function(e,t,n){t.exports=e("jJTEqU")},{}],59:[function(e,t,n){"use strict";function r(e,t){function n(e){var t=p[e];r._eventBus.subscribe(t,function(){var t=Array.prototype.slice.call(arguments,0);setTimeout(function(){r.publish.apply(r,[u[e]].concat(t))})})}var r=this;if(r.config=e,r.mediaStore=t,l.call(r,"API"),r.isIframeEnabled(r.config)&&(r._iframeController=new d(e,t,r),!r.config.insideIframeConfig))return r.controls=new i(null,this),void(r.playlist=new a(null,this));var c=null;t&&(c=t._privateMediaStore||null),r._controller=new o(e,c),r.controls=new i(r._controller),r.playlist=new a(r._controller),r._eventBus=r._controller._eventBus;var p=[s.PLAYBACK_STARTED,s.Video.PAUSE,s.PLAYBACK_RESUMED,s.PLAYBACK_PROGRESS,s.PLAYBACK_ENDED,s.AD_PLAYBACK_STARTED,s.Ad.PAUSE,s.AD_PLAYBACK_RESUMED,s.AD_PLAYBACK_PROGRESS,s.AD_PLAYBACK_ENDED,s.AD_PLAYBACK_ERROR,s.Ad.NO_AD,s.ERROR,s.METADATA_AVAILABLE,s.CC.FETCHED],u=[s.API.PLAYBACK_START,s.API.PLAYBACK_PAUSE,s.API.PLAYBACK_RESUMED,s.API.PLAYBACK_TIME_UPDATE,s.API.PLAYBACK_COMPLETE,s.API.AD_PLAYBACK_START,s.API.AD_PLAYBACK_PAUSE,s.API.AD_PLAYBACK_RESUME,s.API.AD_PLAYBACK_PROGRESS,s.API.AD_PLAYBACK_STOP,s.API.AD_ERROR,s.API.AD_NONE,s.API.PLAYER_ERROR,s.API.METADATA_READY,s.API.CC_AVAILABLE];for(var _ in s.API)if(-1===u.indexOf(_)){var m=s.API[_];p.push(m),u.push(m)}for(var v=0;v<p.length;v++)n(v);r._eventBus.subscribe(s.FULLSCREEN_CHANGE,function(e){r.publish(s.API.PLAYER_FULLSCREEN_CHANGE,e),r._controller.setContentHeightForNFL()})}function i(e,t){var n=this;n._controller=e}function a(e){var t=this;t._controller=e}t.exports=r;var o=e("./controller"),s=e("./event"),l=e("../../lib/event-bus"),d=e("./iframe-controller"),c=e("./util"),p=e("../../lib"),u=e("./states"),_=e("./metrics/metrics-constants");e("../../lib/user-agent");c.inherits(r,l),r.prototype.apiVersion=r.apiVersion=2,r.prototype.render=function(e){var t=this;if(t.isIframeEnabled(t.config)){if(!t.config.insideIframeConfig)return t._iframeController.constructIframe(e),t._iframeController.routeControlsApiToIframe(),t;t._iframeController.setupIframeToPageCommunication(),t._iframeController.sendClearIframeNameToPage()}return t._controller.render(e),t},r.prototype.isIframeEnabled=function(e){return e&&e.iframeRender},r.prototype.getCustomControlsNode=function(){var e=this;return e._controller.getCustomControlsNode()},r.prototype.getVideoElement=function(){var e=this;return e._controller.getVideoElement()},r.prototype.getEventBus=function(){var e=this;return e._eventBus},r.prototype.getOpenSimSim=function(){var e=this;return e._controller.getOpenSimSim()},r.prototype.destroy=function(){var e=this;return e._controller&&e._controller.destroy(),e._iframeController&&e._iframeController.destroy(),l.prototype.destroy.call(e),e},r.prototype.fetchMetaData=function(e){var t=this;if(!p.isArray(e)||!e.every(p.isString))throw new Error("fetchMetaData called with invalid list of ids");return t._controller.prefetch(e),t},r.prototype.getMediaStore=function(){var e=this;return{_privateMediaStore:e._controller.getMediaStore()}},r.prototype.isDocked=function(){var e=this;return e._iframeController?!1:e._controller&&e._controller.isDocked()},r.prototype.updateDockingConfig=function(e,t,n,r,i,a){var o=this;o._controller.updateDockingConfig(e,t,n,r,i,a)},r.prototype.dockVideoPlayer=function(){var e=this;e._controller.dockVideoPlayer()},r.prototype.undockVideoPlayer=function(e){var t=this;t._controller.undockVideoPlayer(e)},r.prototype.on=r.prototype.subscribe,r.prototype.before=r.prototype.subscribe,r.prototype.after=r.prototype.subscribe,r.prototype.fire=r.prototype.publish,i.prototype.play=function(e){var t=this;t._controller.getPlaybackState()===u.INIT&&p.isNumber(e)&&e>0&&e<t.getDuration()&&(t._controller.getCurrentMediaItem().progress.position=e);var n={type:_.API};t._controller.play(n)},i.prototype.pause=function(){var e=this;e._controller.pause()},i.prototype.seek=function(e){var t=this;t._controller.seek(e)},i.prototype.disableControls=function(){var e=this;e._controller.disableControls()},i.prototype.enableControls=function(){var e=this;e._controller.enableControls()},i.prototype.enableCC=function(e){var t=this;t._controller.setCC(!0,e)},i.prototype.disableCC=function(){var e=this;e._controller.setCC(!1)},i.prototype.isPlaying=function(){var e=this;return e._controller.isPlaying()},i.prototype.isLoading=function(){var e=this;return e._controller.isLoading()},i.prototype.getDuration=function(){var e=this;return e._controller.getCurrentMediaItem().duration},i.prototype.getCurrentTime=function(){var e=this;return e._controller._view&&e._controller._view.getCurrentTime()||0},i.prototype.getTimeRemaining=function(){var e=this;return e.getDuration()-e.getCurrentTime()},i.prototype.setFullscreen=function(e){var t=this;t._controller.setFullscreen(e)},i.prototype.getFullscreen=function(){var e=this;return e._controller.getFullscreen()},i.prototype.setVolume=function(e){var t=this;e=0>e?0:e,e=e>1?1:e,t._controller.setVolume(e)},i.prototype.getVolume=function(){var e=this;return e._controller.getVolume()},i.prototype.setMute=function(e){var t=this;t._controller.setMute(e)},i.prototype.getMute=function(){var e=this;return e._controller.getMute()},i.prototype.setLoop=function(e){var t=this;return t._controller.setLoop(e)},i.prototype.setContinuousPlay=function(e){var t=this;return t._controller.setContinuousPlay(e)},i.prototype.resumeContinuousPlay=function(){var e=this,t={type:_.API};e._controller.resumeContinuousPlay(t)},i.prototype.getBitrate=function(){throw new Error("getBitrate is unimplemented!")},i.prototype.setResolution=function(){throw new Error("setResolution is unimplemented!")},i.prototype.displayClosedCaptions=function(){throw new Error("displayClosedCaptions is unimplemented!")},i.prototype.endVideo=function(){var e=this;e._controller.endVideo()},a.prototype.getSize=function(){var e=this;return e._controller.getPlaylistItems().length},a.prototype.getPosition=function(){var e=this;return e._controller.getPlaylist().position},a.prototype.sendPrefetchInfo=function(e){var t=this;return t._controller.sendPrefetchInfo(e)},a.prototype.setPosition=function(e){var t=this;if(!(e in t._controller.getPlaylistItems()))throw new Error("setPosition called with invalid position");var n=t._controller.getAutoplay();if(n)var r={type:_.API,action:_.AUTOPLAY};t._controller.setPlaylistPosition(e,n,r)},a.prototype.setPositionById=function(e){var t=this,n=t._controller.getPlaylistItems().indexOf(e);if(-1===n)throw new Error("setPositionById called with id not in playlist");var r=t._controller.getAutoplay();if(r)var i={type:_.API,action:_.AUTOPLAY};t._controller.setPlaylistPosition(n,r,i)},a.prototype.addItem=function(e){var t=this;t.addItems([e])},a.prototype.addItems=function(e){var t=this,n=e.filter(function(e){return null===t._controller.getMediaStore().get(e)});n.length>0&&t._controller.prefetch(n),e.forEach(function(e){t._controller.getPlaylistItems().push(e)})},a.prototype.getItems=function(){var e=this;return e._controller.getPlaylistItems().slice(0)},a.prototype.getItemId=function(e){var t=this,n=t._controller.getPlaylistItems();if(!(e in n))throw new Error("getItemId called with invalid position");return n[e]},a.prototype.getCurrentItemId=function(){var e=this,t=e._controller.getPlaylist();return-1!==t.position?t.items[t.position]:null},a.prototype.getCurrentItem=function(){var e=this,t=e._controller.getCurrentMediaItem();return t?e.getItemById(t.id):null},a.prototype.getCurrentItemTitle=function(){var e=this,t=e.getCurrentItem();return t?t.title:null},a.prototype.getCurrentItemDescription=function(){var e=this,t=e.getCurrentItem();return t?t.description:null},a.prototype.getCurrentItemProviderName=function(){var e=this,t=e.getCurrentItem();return t&&t.provider?t.provider.name:null},a.prototype.getItem=function(e){var t=this,n=t._controller.getPlaylistItems();if(!(e in n))throw new Error("getItem called with invalid position");return t.getItemById(n[e])},a.prototype.getItemById=function(e){var t=this,n=t._controller.getMediaStore().get(e);return n?{id:n.id,title:n.title,description:n.description,duration:n.duration,publishTime:n.publishTime,provider:n.provider,credits:n.credits,shareUrl:n.shareUrl,setShareUrl:function(e){this.shareUrl=e,n.shareUrl=e},thumbnail:n.images.defaultThumbnail,visualSeek:n.visualSeek,isLive:n.isLive(),closedCaptions:n.closedCaptions,streams:n.streams}:null},a.prototype.getIndexForId=function(e){var t=this;return t._controller.getPlaylistItems().indexOf(e)},a.prototype.removeItem=function(e){var t=this;if(!(e in t._controller.getPlaylistItems()))throw new Error("removeItem called with invalid position");t._controller.removePlaylistItems(e,1)},a.prototype.removeItems=function(e,t){var n=this,r=n._controller.getPlaylistItems();if(!(e in r&&e+t-1 in r))throw new Error("removeItems called with invalid position/count");n._controller.removePlaylistItems(e,t)},a.prototype.removeItemById=function(e){var t=this,n=t._controller.getPlaylistItems().indexOf(e);if(-1===n)throw new Error("removeItemById called with id not in playlist");t._controller.removePlaylistItems(n,1)},a.prototype.removeItemsById=function(e){var t=this;e.forEach(function(e){t.removeItemById(e)})},a.prototype.clear=function(){var e=this;e._controller.removePlaylistItems(0,e._controller.getPlaylistItems().length)}},{"../../lib":"bRhrlU","../../lib/event-bus":"3ECu9u","../../lib/user-agent":"ty5FFo","./controller":18,"./event":"YJm+dH","./iframe-controller":24,"./metrics/metrics-constants":33,"./states":50,"./util":"jJTEqU"}],60:[function(e,t,n){"use strict";function r(e,t,n,r){var i=this;i.rootElem=e,i._model=t,i._eventBus=n,i._profiler=r,i._nflBarDimensions=H,i._nflBranding=null,i._nflBrandingNode=null,i._viewSize=D.NORMAL,i._isFullScreen=!1,i._controlsHideTimeout=x,i._showPlaylist=null,i._playlistPosition=null,i._isDocked=!1,i.lastScrollY=0;var a=i.rootElem.clientWidth,o=i.rootElem.clientHeight;i._viewSize=i._getViewSize(a,o),i._eventBus.subscribe(p.MEDIA_ITEM_LOADED,function(e){i.toggleSettings(null,!1,!0),e.isLive()?T.classList(i._contentElem).add("yvp-live"):T.classList(i._contentElem).remove("yvp-live"),i.isStreamMode()&&!i.getFullscreen()&&T.classList(i._contentElem).add("yvp-stream"),i.isMiniStreamMode()&&!i.getFullscreen()&&T.classList(i._contentElem).add("yvp-ministream")},i),i._eventBus.subscribe(p.PLAYBACK_STARTED,function(){(i._model.ui.docking.enableOnScrollDown||i._model.ui.docking.enableOnScrollUp)&&i._isDocked&&i._updateDockedElements()}),i._playlistDimensions={rootElem:{height:null,width:null},contentElem:{height:null,width:null},mainElem:{height:null,width:null}},i._eventBus.subscribe(p.Video.SWITCHING,function(){i._setFlag(N.SWITCHING,!0)}),i._eventBus.subscribe(p.Video.SWITCHED,function(){i._setFlag(N.SWITCHING,!1)}),i.showPlaylist()&&i.getPlaylistUIPosition()===z&&(a-=i.isPlaylistInStream()?U:j),i._eventBus.publish(p.PLAYER_DIMENSION_CHANGE,{width:a||1,height:i.rootElem.clientHeight||1}),i._eventBus.subscribe(p.API.PLAYER_MUTE_CHANGE,i._onMuteChange,i),i._eventBus.subscribe(p.UP_NEXT_PG_CLICK,i._onUpnextPgClick,i),i._eventBus.subscribe(p.PLAYER_DIMENSION_CHANGE,i._onDimensionChange,i),i._eventBus.subscribe(p.FULLSCREEN_CHANGE,function(){i._onFullScreenChange(i.getFullscreen())},i)}t.exports=r;var i=(e("fs"),e("insert-css")),a=e("./views/controls"),o=e("./views/nfl-branding"),s=e("./easter-egg"),l=e("./views/playlist"),d=e("./views/error-screen"),c=e("./views/age-gate-screen"),p=e("./event"),u=e("./views/open-sim-sim"),_=e("./views/ads-info-panel.js"),m=e("./views/feedback-screen"),v=e("./renderers/modes"),y=e("./views/start-screen"),f=e("./views/loading-screen"),g=e("./states"),b=e("./views/tumblr-controls"),h=e("./views/tumblr-loading-screen"),E=e("../../lib/user-agent"),T=e("./util"),A=e("../../lib"),S=(e("../../lib/logger"),e("./views/ads-overlay")),I=e("./renderer-controller"),L="flash_download_logo.svg",M=e("./views/base.html"),C={END_SCREEN:"end-screen",ERROR:"error",VIDEO:"video",START_SCREEN:"start-screen",BLOCKED:"blocked"},N={LOADING:"loading",SWITCHING:"switching",PLAYING:"playing",PAUSED:"paused",CASTING:"casting"},D={NORMAL:"normal",SMALL:"smallscreen",VERY_SMALL:"verysmallscreen"},R={SMALL_WIDTH:350,SMALL_HEIGHT:210,VERY_SMALL_WIDTH:200,VERY_SMALL_HEIGHT:175},O=["webkitfullscreenchange","mozfullscreenchange","msfullscreenchange","MSFullscreenChange","fullscreenchange"],P="yvp-state-",w="yvp-flag-",k="yvp-browser-",x=5e3,B=83,j=318,U=276,V=75,F="bottom",z="right",Y="hidden",H={DESKTOP:{HEIGHT:36},MOBILE:{HEIGHT:52}};i('.yvp-content{position:relative;width:100%;height:100%;overflow:visible;font-family:Helvetica Neue Regular,Helvetica Neue,helvetica,arial,sans-serif;font-size:16px;text-align:initial;cursor:default;background-color:#000;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.yvp-content .yvp-main,.yvp-content .yvp-playlist-container{outline:none;}.yvp-content .yvp-main [tabindex],.yvp-content .yvp-playlist-container [tabindex]{outline:none}.yvp-content h3,.yvp-content h4,.yvp-content p,.yvp-content label,.yvp-content input,.yvp-content div,.yvp-content button,.yvp-content img,.yvp-content li,.yvp-content ul{margin:0;padding:0;border:0}.yvp-main{position:relative;width:100%;height:100%}.yvp-state-error .yvp-error-screen{-webkit-user-select:text;-moz-user-select:text;-ms-user-select:text;user-select:text;display:block}.yvp-state-error .yvp-start-screen,.yvp-state-error .yvp-end-screen,.yvp-state-error .yvp-html5-video,.yvp-state-error .yvp-end-screen-fuji{display:none}.yvp-state-end-screen .yvp-end-screen,.yvp-state-end-screen .yvp-end-screen-fuji{display:block}.yvp-state-end-screen .yvp-error-screen,.yvp-state-end-screen .yvp-html5-video{display:none}.yvp-state-video .yvp-html5-video,.yvp-state-blocked .yvp-html5-video,.yvp-flag-playing.yvp-state-video.yvp-browser-iphone .yvp-html5-video{display:block}.yvp-state-video .yvp-start-screen,.yvp-state-blocked .yvp-start-screen,.yvp-flag-playing.yvp-state-video.yvp-browser-iphone .yvp-start-screen,.yvp-state-video .yvp-end-screen,.yvp-state-blocked .yvp-end-screen,.yvp-flag-playing.yvp-state-video.yvp-browser-iphone .yvp-end-screen,.yvp-state-video .yvp-error-screen,.yvp-state-blocked .yvp-error-screen,.yvp-flag-playing.yvp-state-video.yvp-browser-iphone .yvp-error-screen,.yvp-state-video .yvp-end-screen-fuji,.yvp-state-blocked .yvp-end-screen-fuji,.yvp-flag-playing.yvp-state-video.yvp-browser-iphone .yvp-end-screen-fuji{display:none}.yvp-flag-casting .yvp-start-screen,.yvp-flag-casting .yvp-end-screen,.yvp-flag-casting .yvp-end-screen-fuji{display:none}.yvp-state-start-screen .yvp-start-screen,.yvp-state-video.yvp-browser-iphone .yvp-start-screen{display:block}.yvp-state-start-screen .yvp-end-screen,.yvp-state-video.yvp-browser-iphone .yvp-end-screen,.yvp-state-start-screen .yvp-error-screen,.yvp-state-video.yvp-browser-iphone .yvp-error-screen,.yvp-state-start-screen .yvp-html5-video,.yvp-state-video.yvp-browser-iphone .yvp-html5-video,.yvp-state-start-screen .yvp-end-screen-fuji,.yvp-state-video.yvp-browser-iphone .yvp-end-screen-fuji{display:none}.yvp-state-start-screen .yvp-html5-video,.yvp-state-video.yvp-browser-iphone .yvp-html5-video{top:-2000px}object.yvp-swf-not-ready.yvp-flash-video{opacity:0}.yvp-state-video{z-index:5}.yvp-content{z-index:0}.yvp-html5-video{z-index:5}.yvp-switching-canvas{z-index:15}.yvp-loading-screen .yvp-spinner-outer,.yvp-loading-screen .yvp-spinner-inner{z-index:20}.yvp-flash-video{position:absolute;left:0;visibility:visible}.yvp-html5-video{position:absolute;width:100%;height:100%;top:0;cursor:pointer;visibility:hidden}.yvp-flash-video.yvp-renderer-active,.yvp-html5-video.yvp-renderer-active{visibility:visible}.yvp-switching-canvas{position:absolute}.yvp-start-screen,.yvp-end-screen{position:absolute;height:100%;width:100%;background-color:#000;cursor:pointer;overflow:hidden}.yvp-nfl-branding-container{width:100%;height:36px;position:relative;z-index:22;background:#011832;background:-moz-linear-gradient(left,#011832 0%,#103155 40%,#011832 100%);background-image:-webkit-linear-gradient(left, #011832 0%, #103155 40%, #011832 100%);background-image:-o-linear-gradient(left, #011832 0%, #103155 40%, #011832 100%);background-image:linear-gradient(left, #011832 0%, #103155 40%, #011832 100%);*background:#011832;white-space:nowrap}.yvp-browser-mobile .yvp-nfl-branding-container{height:52px}.yvp-nfl-branding{position:relative;margin:10px auto;vertical-align:middle;display:inline-block;zoom:1;width:30%}.yvp-browser-mobile .yvp-nfl-branding{margin:15px auto}.yvp-nfl-branding-container .yvp-nfl-brand-span{background-image:url("data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyMCIgaGVpZ2h0PSIyMCI+PHBhdGggZmlsbD0iI0ZGRiIgZD0iTTkuOTgzIDE5LjM4cy40MTctLjcyLjgyNC0xLjExMmMuNTc0LS41NSAxLjM5LS44OTcgMi40OS0xLjA1NiAxLjM4Mi0uMiAyLjM4NS0uNjcgMi45NzYtMS4zODIuNDc4LS41OC41NS0xLjE2Mi41NS0xLjQ1NlYyLjcyN2gtLjQ1NGMtLjU5LjQyLTEuNzE1Ljk5Ni0zLjE2LjY0QzEwLjcgMi43NSA5Ljk4Mi41ODggOS45ODIuNTg4UzkuMjY4IDIuNzUgNi43NiAzLjM2NWMtMS40NS4zNTctMi41NzQtLjIyLTMuMTYyLS42NGgtLjQ1MnYxMS42NDhjMCAuMjkzLjA3Mi44NzUuNTUgMS40NTYuNTkuNzEzIDEuNTkgMS4xOCAyLjk3NCAxLjM4MiAxLjEwMy4xNTggMS45MTcuNTA1IDIuNDkyIDEuMDU4LjQyMi40MDYuODIgMS4xMS44MiAxLjExIi8+PHBhdGggZmlsbD0iIzAxMzc2OSIgZD0iTTE2LjQxMyAzLjE4MnMtMS4zNzMgMS4wNjYtMy4zMDMuNTgzYy0yLjI1Mi0uNTYyLTMuMTI3LTIuMjUtMy4xMjctMi4yNXMtLjg3NCAxLjY4OC0zLjEyNSAyLjI1Yy0xLjkzLjQ4My0zLjMwMi0uNTgzLTMuMzAyLS41ODN2MTEuMTkyYzAgLjM4LjE2IDEuOTk1IDMuMTcyIDIuNDMyIDEuMTkuMTcyIDIuMDguNTU1IDIuNzIgMS4xNy4yMjguMjE4LjQwMy40NC41MzYuNjUuMTMzLS4yMS4zMDgtLjQzMi41NC0uNjUuNjM2LS42MTUgMS41MjUtLjk5OCAyLjcxNC0xLjE3IDMuMDE1LS40MzYgMy4xNzQtMi4wNSAzLjE3NC0yLjQzMlYzLjE4MnoiLz48cGF0aCBmaWxsPSIjRkZGIiBkPSJNOS45ODMgMTcuNDg2cy44NzUtMS4wOCAzLjE0Ni0xLjQzMmMyLjYwMy0uNCAyLjUyNi0xLjYyMiAyLjUyNi0xLjY4M1Y4LjUxTDQuMzEgOC41MXY1Ljg2YzAgLjA2My0uMDc1IDEuMjg1IDIuNTI3IDEuNjg1IDIuMjcyLjM1IDMuMTQ2IDEuNDMgMy4xNDYgMS40MyIvPjxwYXRoIGZpbGw9IiNENTBBMEEiIGQ9Ik03LjMzOCAxMi43OTN2LTIuNzg2bC0uMzUtLjE5N3YtLjcyNWgxLjU5NHYuNzI1bC0uMzMzLjE5N3Y1LjY4NmwtLjg1My0uMjU1LTEuMjMtMy42MzN2Mi4zOTNsLjM5LjN2Ljc0bC0xLjcxLS40MzZ2LS42MjdsLjM5LS4xNTZ2LTQuMDFsLS40LS4ydi0uNzI1aDEuMjk1TTEwLjI3MyAxNS4zNDRsLjM0LjQwN3YuNzI1bC0xLjY5My0uNjMzdi0uNjEzbC4zNzUtLjE1NnYtNS4wNjdsLS4zNzItLjE5di0uNzMyaDIuOTR2MS40NzNoLS42NDdsLS4xOTUtLjYwNGgtLjc0N3YxLjdoLjU2bC4yMi0uMzJoLjQ1MnYxLjUxaC0uNDVsLS4yMTQtLjMwNmgtLjU2N00xMi4xNDMgMTUuNTk4di0uNzIzbC40Mi0uMzQ1di00LjUyM2wtLjM2LS4xOXYtLjczMmgxLjY5M3YuNzMzbC0uMzMuMTl2NC4yNDJsLjcyOC0uMTk2LjEzNy0xLjExMmguN3YxLjg2Ii8+PHBhdGggZmlsbD0iI0ZGRiIgZD0iTTQuNjA1IDcuMzA4bC0uNTEyLS4zODVoLjYyOGwuMjA3LS41OTMuMjA4LjU5M2guNjI2bC0uNTEuMzg1LjE4Ny42MDUtLjUxLS4zNTgtLjUxLjM1OE02LjgzMyA3LjMwOGwtLjUxNS0uMzg1aC42MjhsLjIwNy0uNTkzLjIwOC41OTNoLjYyN2wtLjUxMy4zODUuMTkuNjA1LS41MS0uMzU4LS41MS4zNThNNC42MDUgNS4zbC0uNTEyLS4zODRoLjYyOGwuMjA3LS41OTQuMjA4LjU5NGguNjI2bC0uNTEuMzg1LjE4Ny42MDQtLjUxLS4zNi0uNTEuMzZNNi44MzMgNS4zbC0uNTE1LS4zODRoLjYyOGwuMjA3LS41OTQuMjA4LjU5NGguNjI3bC0uNTEzLjM4NS4xOS42MDQtLjUxLS4zNi0uNTEuMzZNMTUuNTUgNy45MTNsLS41MS0uMzU4LS41MS4zNTguMTktLjYwNS0uNTEyLS4zODVoLjYyNmwuMjA2LS41OTMuMjEuNTkzaC42MjZsLS41MTUuMzg1TTEzLjMyNiA3LjkxM2wtLjUxLS4zNTgtLjUxLjM1OC4xODctLjYwNS0uNTE0LS4zODVoLjYyNmwuMjEtLjU5My4yMDYuNTkzaC42MjdsLS41MTUuMzg1TTE1LjU1IDUuOTA0bC0uNTEtLjM2LS41MS4zNi4xOS0uNjAzLS41MTItLjM4NGguNjI2bC4yMDYtLjU5NC4yMS41OTRoLjYyNmwtLjUxNS4zODVNMTMuMzI2IDUuOTA0bC0uNTEtLjM2LS41MS4zNi4xODctLjYwMy0uNTE0LS4zODRoLjYyNmwuMjEtLjU5NC4yMDYuNTk0aC42MjdsLS41MTUuMzg1TTEwLjQ3MiA0Ljg2M2MtLjIyOC0uMTg3LS40ODUtLjMxLS43NTctLjM2OC4wNjUtLjA2My4xMzQtLjExNS4xOTItLjE2NC4zNC4wOC41Ny4yMzQuNzI1LjM2NS0uMDU1LjA1NS0uMTEuMTEyLS4xNi4xNjhtLS4zMy40Yy0uMjE3LS4xODctLjQ4LS4zMi0uNzgzLS4zOC4wNDUtLjA2LjEtLjEyNC4xNS0uMTguMjMuMDQuNTIyLjE2Ljc4LjM3LS4wNTMuMDY0LS4xMDIuMTI2LS4xNDguMTltLS4yOTYuNDE1Yy0uMjM1LS4xOTctLjUwOC0uMzE3LS43NzgtLjM3IDAgMCAuMDgyLS4xMzMuMTI4LS4yMDIuMzMuMDY1LjU5Ny4yMTguNzgyLjM3Ny0uMDQ3LjA2Ny0uMDkyLjEzMi0uMTMyLjE5NW0xLjU1Mi0xLjk5cy0uMjY3LjE0LS42MzcuNTAyYy4wODQuMDUuMTc4LjExNS4yMzIuMTYtLjA1Ny4wNS0uMTEzLjEwNC0uMTY3LjE1NC0uMjQtLjE5OC0uNDkyLS4zLS42ODUtLjM0OC4wNjQtLjA0NS4xMzMtLjA5Mi4yLS4xMzMuMTA0LjAyNC4yMDcuMDY3LjIwNy4wNjcuNDE4LS4zMi43OC0uNDU3Ljc4LS40NTdzLS4wNDItLjAyLS4xNTMtLjAyYy0xLjY0OC4wMjItMy4xNjUgMS4yNS0yLjg4IDMuMzU2LjAzNC4yMi4xMi42MjguMjMuODA1LjAzOC0uMzUuMTctMS4xMjQuNTYtMS45NTYtLjEzNy0uMDUtLjI1LS4wNy0uMjUtLjA3LjA0LS4wODMuMDk2LS4xOS4wOTYtLjE5LjI4OC4wNTUuNTQyLjE3Ny43NjQuMzUtLjA1Mi4wODYtLjA4OC4xNC0uMTE0LjE4OC0uMDgtLjA2My0uMTU3LS4xMTQtLjI0Mi0uMTYzLS40NC43NjctLjY0NCAxLjQ5My0uNzI4IDEuODcyLjAwNi4wMjIuMDUzLjAzNi4wOTMuMDMgMS44MDQtLjIzNSAyLjY1LTEuMTU0IDIuOTA1LTIuMTUyLjE3LS42NTQuMTE0LTEuMzM3LS4xMTItMS44OTYtLjAxNi0uMDQtLjA0Ni0uMTA1LS4wOTgtLjEiLz48L3N2Zz4=");background-repeat:no-repeat;position:absolute;width:20px;height:20px;margin:-2px 0 0 10px}.yvp-browser-mobile .yvp-nfl-branding-container .yvp-nfl-brand-span{background-image:url("data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIzMCIgaGVpZ2h0PSIzMCI+PHBhdGggZmlsbD0iI0ZGRiIgZD0iTTE1IDI5LjA5MnMuNjI0LTEuMDggMS4yMzQtMS42NjhjLjg2Mi0uODI3IDIuMDg0LTEuMzQ2IDMuNzM2LTEuNTg0IDIuMDczLS4zIDMuNTc2LTEgNC40NjMtMi4wNzIuNzE1LS44NzIuODIzLTEuNzQuODI1LTIuMTg0VjQuMTE0aC0uNjgzYy0uODguNjMtMi41NjggMS40OTMtNC43MzguOTU4QzE2LjA3NSA0LjE0OCAxNSAuOTA2IDE1IC45MDZzLTEuMDc2IDMuMjQtNC44MzcgNC4xNjZjLTIuMTczLjUzNS0zLjg2LS4zMy00Ljc0Mi0uOTZoLS42Nzh2MTcuNDcyYzAgLjQ0LjEwOCAxLjMxMi44MjUgMi4xODQuODg1IDEuMDcyIDIuMzg2IDEuNzcgNC40NiAyLjA3MiAxLjY1NS4yMzggMi44NzYuNzU3IDMuNzM4IDEuNTg4LjYzMy42MDggMS4yMzQgMS42NjQgMS4yMzQgMS42NjQiLz48cGF0aCBmaWxsPSIjMDEzNzY5IiBkPSJNMjQuNjQgNC43OTZzLTIuMDU2IDEuNi00Ljk1Ljg3NUMxNi4zMSA0LjgzIDE1IDIuMjk4IDE1IDIuMjk4cy0xLjMxMiAyLjUzLTQuNjkgMy4zNzRjLTIuODk3LjcyNS00Ljk1My0uODc0LTQuOTUzLS44NzR2MTYuNzg4YzAgLjU3LjI0IDIuOTkzIDQuNzU4IDMuNjQ2IDEuNzg2LjI2IDMuMTIuODMyIDQuMDc4IDEuNzU0LjM0NC4zMy42MDYuNjY2LjgwNS45NzguMi0uMzEyLjQ2LS42NDguODA4LS45NzguOTU2LS45MjIgMi4yOS0xLjQ5NCA0LjA3NC0xLjc1NCA0LjUyLS42NTIgNC43Ni0zLjA3NiA0Ljc2LTMuNjQ2VjQuNzk2eiIvPjxwYXRoIGZpbGw9IiNGRkYiIGQ9Ik0xNSAyNi4yNTNzMS4zMS0xLjYyMiA0LjcyLTIuMTQ3YzMuOTAzLS42IDMuNzg4LTIuNDMzIDMuNzg4LTIuNTI1di04Ljc5NGwtMTcuMDIuMDAydjguNzkyYzAgLjA5My0uMTEyIDEuOTI1IDMuNzkgMi41MjUgMy40MS41MjYgNC43MiAyLjE0OCA0LjcyIDIuMTQ4Ii8+PHBhdGggZmlsbD0iI0Q1MEEwQSIgZD0iTTExLjAzIDE5LjIxM3YtNC4xOGwtLjUyMy0uMjk1VjEzLjY1aDIuMzl2MS4wODhsLS41LjI5NXY4LjUzbC0xLjI3OC0uMzg0LTEuODQ3LTUuNDV2My41OWwuNTg2LjQ1MnYxLjExbC0yLjU2NS0uNjU3di0uOTRsLjU4Ni0uMjMydi02LjAxNWwtLjYtLjNWMTMuNjVoMS45NE0xNS40MzIgMjMuMDM4bC41MS42MXYxLjA4NmwtMi41MzgtLjk0OHYtLjkybC41Ni0uMjN2LTcuNjAzbC0uNTU2LS4yODN2LTEuMWg0LjQwOHYyLjIxaC0uOTY4bC0uMjk1LS45MDdoLTEuMTJ2Mi41NTJoLjg0bC4zMy0uNDg0aC42Nzd2Mi4yN2gtLjY3NmwtLjMyLS40NmgtLjg1Mk0xOC4yMzYgMjMuNDJ2LTEuMDg1bC42My0uNTE3di02Ljc4NWwtLjU0LS4yODN2LTEuMWgyLjU0MnYxLjFsLS40OTcuMjgzdjYuMzY0bDEuMDkzLS4yOTMuMjA3LTEuNjdoMS4wNXYyLjc5Ii8+PHBhdGggZmlsbD0iI0ZGRiIgZD0iTTYuOTMyIDEwLjk4NmwtLjc3LS41OGguOTQybC4zMS0uODg4LjMxMi44OWguOTRsLS43Ny41NzguMjgzLjkwNy0uNzY3LS41MzctLjc2NC41MzdNMTAuMjcyIDEwLjk4NmwtLjc3LS41OGguOTRsLjMxLS44ODguMzEyLjg5aC45NGwtLjc3LjU3OC4yODUuOTA3LS43NjctLjUzNy0uNzY0LjUzN002LjkzMiA3Ljk3NWwtLjc3LS41NzhoLjk0MmwuMzEtLjg5LjMxMi44OWguOTRsLS43Ny41NzguMjgzLjkwNS0uNzY3LS41NC0uNzY0LjU0TTEwLjI3MiA3Ljk3NWwtLjc3LS41NzhoLjk0bC4zMS0uODkuMzEyLjg5aC45NGwtLjc3LjU3OC4yODUuOTA1LS43NjctLjU0LS43NjQuNTRNMjMuMzQ4IDExLjg5M2wtLjc2NC0uNTM4LS43NjYuNTM4LjI4NC0uOTA3LS43Ny0uNTc4aC45NGwuMzEyLS44OS4zMS44OWguOTQybC0uNzcuNTc4TTIwLjAxIDExLjg5M2wtLjc2NC0uNTM4LS43NjcuNTM4LjI4NC0uOTA3LS43NzItLjU3OGguOTRsLjMxNC0uODkuMzEuODloLjk0bC0uNzcuNTc4TTIzLjM0OCA4Ljg4bC0uNzY0LS41NC0uNzY2LjU0LjI4NC0uOTA1LS43Ny0uNTc4aC45NGwuMzEyLS44OS4zMS44OWguOTQybC0uNzcuNTc4TTIwLjAxIDguODhsLS43NjQtLjU0LS43NjcuNTQuMjg0LS45MDUtLjc3Mi0uNTc4aC45NGwuMzE0LS44OS4zMS44OWguOTRsLS43Ny41NzhNMTUuNzMgNy4zMThjLS4zNDItLjI4LS43MjctLjQ2NC0xLjEzNS0uNTUyLjEtLjA5NC4yMDItLjE3Mi4yODgtLjI0Ny41MS4xMi44NTQuMzUgMS4wODguNTQ1LS4wOC4wODQtLjE2My4xNy0uMjQuMjUzbS0uNDkzLjU5OGMtLjMyNy0uMjgtLjcyNC0uNDgtMS4xNzUtLjU3LjA3LS4wODguMTUtLjE4NS4yMjgtLjI3LjM0My4wNi43ODIuMjQgMS4xNjcuNTU3LS4wOC4wOTYtLjE1Mi4xOS0uMjIuMjgzbS0uNDQ1LjYyNGMtLjM1My0uMjk1LS43NjMtLjQ3NS0xLjE2Ni0uNTUzIDAgMCAuMTIyLS4yMDIuMTkzLS4zMDQuNDkuMDk2Ljg5My4zMjcgMS4xNy41NjQtLjA3LjEtLjEzOC4yLS4xOTguMjkzbTIuMzI4LTIuOTgzcy0uNC4yMDgtLjk1Ni43NTNjLjEyNi4wNzQuMjY4LjE3LjM0OC4yNC0uMDg1LjA3Mi0uMTcuMTU0LS4yNS4yMy0uMzYtLjMtLjczOC0uNDUtMS4wMy0uNTIzLjA5Ny0uMDY3LjItLjEzOC4zMDItLjIuMTU2LjAzNy4zMS4xLjMxLjEuNjI3LS40NzggMS4xNy0uNjg2IDEuMTctLjY4NnMtLjA2Mi0uMDMtLjIzLS4wMjhjLTIuNDcuMDMzLTQuNzQ2IDEuODc2LTQuMzE4IDUuMDM0LjA0OC4zMzQuMTc2Ljk0NC4zNDMgMS4yMS4wNTQtLjUyNi4yNTItMS42ODcuODM4LTIuOTM0LS4yMDUtLjA3My0uMzc1LS4xMDMtLjM3NS0uMTAzLjA2Mi0uMTI3LjE0NS0uMjg2LjE0NS0uMjg2LjQzMy4wODIuODE0LjI2NSAxLjE0Ni41MjUtLjA3OC4xMjctLjEzMy4yMS0uMTcuMjgtLjExOC0uMDk0LS4yMzYtLjE3LS4zNjQtLjI0NC0uNjYgMS4xNS0uOTY1IDIuMjQtMS4wOSAyLjgwOC4wMDguMDM0LjA3OC4wNTMuMTM4LjA0NSAyLjcwNi0uMzUzIDMuOTczLTEuNzMgNC4zNTgtMy4yMy4yNTMtLjk4LjE3Mi0yLjAwNS0uMTY4LTIuODQ0LS4wMjQtLjA1Ny0uMDctLjE1Ni0uMTQ4LS4xNSIvPjwvc3ZnPg==");background-repeat:no-repeat;width:30px;height:30px}.yvp-nfl-branding-container .yvp-nfl-brand-logo{background-image:url("data:image/svg+xml;base64,PCFET0NUWVBFIHN2ZyBQVUJMSUMgIi0vL1czQy8vRFREIFNWRyAxLjEvL0VOIiAiaHR0cDovL3d3dy53My5vcmcvR3JhcGhpY3MvU1ZHLzEuMS9EVEQvc3ZnMTEuZHRkIiBbCgk8IUVOVElUWSBuc19leHRlbmQgImh0dHA6Ly9ucy5hZG9iZS5jb20vRXh0ZW5zaWJpbGl0eS8xLjAvIj4KCTwhRU5USVRZIG5zX2FpICJodHRwOi8vbnMuYWRvYmUuY29tL0Fkb2JlSWxsdXN0cmF0b3IvMTAuMC8iPgoJPCFFTlRJVFkgbnNfZ3JhcGhzICJodHRwOi8vbnMuYWRvYmUuY29tL0dyYXBocy8xLjAvIj4KCTwhRU5USVRZIG5zX3ZhcnMgImh0dHA6Ly9ucy5hZG9iZS5jb20vVmFyaWFibGVzLzEuMC8iPgoJPCFFTlRJVFkgbnNfaW1yZXAgImh0dHA6Ly9ucy5hZG9iZS5jb20vSW1hZ2VSZXBsYWNlbWVudC8xLjAvIj4KCTwhRU5USVRZIG5zX3NmdyAiaHR0cDovL25zLmFkb2JlLmNvbS9TYXZlRm9yV2ViLzEuMC8iPgoJPCFFTlRJVFkgbnNfY3VzdG9tICJodHRwOi8vbnMuYWRvYmUuY29tL0dlbmVyaWNDdXN0b21OYW1lc3BhY2UvMS4wLyI+Cgk8IUVOVElUWSBuc19hZG9iZV94cGF0aCAiaHR0cDovL25zLmFkb2JlLmNvbS9YUGF0aC8xLjAvIj4KXT48c3ZnIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgd2lkdGg9IjEwOS44OTYiIGhlaWdodD0iMTMuOTc4Ij48c3dpdGNoPjxmb3JlaWduT2JqZWN0IHJlcXVpcmVkRXh0ZW5zaW9ucz0iaHR0cDovL25zLmFkb2JlLmNvbS9BZG9iZUlsbHVzdHJhdG9yLzEwLjAvIiB4PSIwIiB5PSIwIiB3aWR0aD0iMSIgaGVpZ2h0PSIxIi8+PHBhdGggZmlsbC1ydWxlPSJldmVub2RkIiBjbGlwLXJ1bGU9ImV2ZW5vZGQiIGZpbGw9IiNmZmYiIGQ9Ik0xMDkuODk2IDEuMDI1bC0zLjY3OCAxMi45NWgtNS41OThsMS41NC01LjQ0Ny0zLjgyMyA0Ljc0MmgtMS44MjJsLTIuMTgtOC4zNWgtNC4zNmwuODktMy44OTZoOC4zMmwuODggNS4xMzggNC4yMzQtNS4xMzV2LS4wMDNoNS41OTV6TTg3LjEzIDEwLjIyYy0uNTY2IDEuODItMi41NTMgMy43NTUtNC40MTQgMy43NTVINzQuNDFjLTEuODYgMC0yLjkyLTEuOTM0LTIuMzU0LTMuNzU1bDEuMzI3LTQuMjc3aDUuODk0TDc3Ljk3IDkuODM3aDMuMjNsMS42Ni00Ljg4NmgtOS4xMmMuNjctMS42OSAyLjYyOC0zLjkyNSA0LjM5NC0zLjkyNWg4LjMwNmMxLjg2IDAgMi44NCAyLjI3IDIuMjc0IDQuMDlMODcuMTMgMTAuMjJ6TTcxLjM1MiA2LjY0Nkg2Ni4yNGwuNTY1LTEuNjc0aC0yLjczbC0xLjY1MyA0Ljg1aDIuNzNsLjQxMi0uOTI0aDUuMDg0bC0uNzYgMi40MjZjLS41NjYgMS44Mi0yLjIxNSAyLjY1LTQuMDc2IDIuNjVoLTYuNDdjLTEuODYgMC0yLjkyLTEuOTMzLTIuMzU0LTMuNzU0bDEuNTg0LTUuMTA1Yy41NjYtMS44MiAyLjA0LTQuMDkgNC43MTctNC4wOWg2LjA1NWMyLjAyNyAwIDMuMDQ1IDIuNDYgMi40OTYgNC4xODhsLS40OSAxLjQzM3ptLTIxLjY2IDcuMzNsMS4xNTUtNC45OThoNC41MUw1NC4yIDEzLjk3NmgtNC41MDh6bS01LjE3NS00Ljk5OGg0LjUwOGwtMS4xNTYgNC45OThoLS4zNDd2LjAwMmgtOC40OXYtLjAwNEgzNS4wM0wzOC4zNzYgMi42NWgtMS4zNGwuODEtMi42M2gxLjM0Vi4wMTZoNi40N0w0Mi4yNzYgMTFoMS43M2wuNTEyLTIuMDIyem0tOS4zNC00LjMxN2gtNC41OWwuNDIzLTEuNjYzaC0xMEwyMS42NDUuMDJoMTQuNjZsLS4wMS4wNDJoLjA0M2wtMS4xNiA0LjZ6TTEyLjI1IDEzLjk3Nkg3LjUwNEw2LjIxNiAyLjY1aC00LjE5bC44MS0yLjYzaDMuMDdWLjAxNmg2LjE0TDEzLjI2IDEwLjI2IDE2LjQwOC4wMTVoMy44MzhsLTQuMTU4IDEzLjk2SDEyLjI1ek01LjI5MyAzLjY3TDUuNiA2LjgzNGwtMi4xMjYgNy4xNEguMDJMMy4xMzUgMy42NjhoMi4xNTh6bTIyLjQ4LjMyNmwtLjY0MiAyLjQ2aDUuMThMMzEuNyA4Ljk5aC01LjM2bC0xLjUzMiA0Ljk4NWgtNi4wNDNsMy4wMS05Ljk4aDUuOTk4em02NS40OCAxLjg3N2wxLjAyIDQuMzg1LTEuMDAyIDMuNzE4aC00LjczNWwyLjM1Mi04LjEwM2gyLjM2NXoiLz48L3N3aXRjaD48L3N2Zz4=");background-repeat:no-repeat;width:110px;height:14px;display:block;position:absolute;margin-left:40px;margin-top:2px}.yvp-browser-mobile .yvp-nfl-branding-container .yvp-nfl-brand-logo{background-image:url("data:image/svg+xml;base64,PCFET0NUWVBFIHN2ZyBQVUJMSUMgIi0vL1czQy8vRFREIFNWRyAxLjEvL0VOIiAiaHR0cDovL3d3dy53My5vcmcvR3JhcGhpY3MvU1ZHLzEuMS9EVEQvc3ZnMTEuZHRkIiBbCgk8IUVOVElUWSBuc19leHRlbmQgImh0dHA6Ly9ucy5hZG9iZS5jb20vRXh0ZW5zaWJpbGl0eS8xLjAvIj4KCTwhRU5USVRZIG5zX2FpICJodHRwOi8vbnMuYWRvYmUuY29tL0Fkb2JlSWxsdXN0cmF0b3IvMTAuMC8iPgoJPCFFTlRJVFkgbnNfZ3JhcGhzICJodHRwOi8vbnMuYWRvYmUuY29tL0dyYXBocy8xLjAvIj4KCTwhRU5USVRZIG5zX3ZhcnMgImh0dHA6Ly9ucy5hZG9iZS5jb20vVmFyaWFibGVzLzEuMC8iPgoJPCFFTlRJVFkgbnNfaW1yZXAgImh0dHA6Ly9ucy5hZG9iZS5jb20vSW1hZ2VSZXBsYWNlbWVudC8xLjAvIj4KCTwhRU5USVRZIG5zX3NmdyAiaHR0cDovL25zLmFkb2JlLmNvbS9TYXZlRm9yV2ViLzEuMC8iPgoJPCFFTlRJVFkgbnNfY3VzdG9tICJodHRwOi8vbnMuYWRvYmUuY29tL0dlbmVyaWNDdXN0b21OYW1lc3BhY2UvMS4wLyI+Cgk8IUVOVElUWSBuc19hZG9iZV94cGF0aCAiaHR0cDovL25zLmFkb2JlLmNvbS9YUGF0aC8xLjAvIj4KXT48c3ZnIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgd2lkdGg9IjE1Ny4wNDIiIGhlaWdodD0iMjAuMDE1Ij48c3dpdGNoPjxmb3JlaWduT2JqZWN0IHJlcXVpcmVkRXh0ZW5zaW9ucz0iaHR0cDovL25zLmFkb2JlLmNvbS9BZG9iZUlsbHVzdHJhdG9yLzEwLjAvIiB4PSIwIiB5PSIwIiB3aWR0aD0iMSIgaGVpZ2h0PSIxIi8+PHBhdGggZmlsbC1ydWxlPSJldmVub2RkIiBjbGlwLXJ1bGU9ImV2ZW5vZGQiIGZpbGw9IiNmZmYiIGQ9Ik0xNTYuOTYgMS44NzdsLTUuMjU1IDE4LjEyNmgtNy45OTJsMi4xOTgtNy4zODQtNS40NiA2LjM0aC0yLjZsLTMuMTE0LTExLjgzaC02LjIyN2wxLjI3LTUuMjUyaDExLjg4bDEuMjU3IDcuMjUgNi4wNDctNy4yNDZ2LS4wMDVoNy45OTV6bS0zMi41MTMgMTMuMjRjLS44MDggMi42ODgtMy42NDUgNC44ODctNi4zMDIgNC44ODdoLTExLjg2Yy0yLjY2IDAtNC4xNzItMi4yLTMuMzY0LTQuODg3bDEuODk4LTYuMzEyaDguNDE2bC0xLjg2NiA1Ljc0N2g0LjYxbDIuMzc1LTcuMzc2aC0xMy4wMjZjLjk1OC0yLjUgMy43NTItNS4yOTggNi4yNzUtNS4yOThoMTEuODZjMi42NTcgMCA0LjA1NiAzLjAxOCAzLjI0NyA1LjcwNWwtMi4yNjQgNy41MzR6bS0yMi41My01LjI3NmgtNy4zMDJsLjgwOC0yLjYzMmgtMy45bC0yLjM2IDcuMzIyaDMuOWwuNTg3LTEuMzY1aDcuMjZsLTEuMDg0IDMuNThjLS44MSAyLjY4OC0zLjE2MyAzLjI1OC01LjgyIDMuMjU4aC05LjI0Yy0yLjY1NiAwLTQuMTctMi4yLTMuMzYyLTQuODg3bDIuMjY0LTcuNTMzYy44MDgtMi42ODggMi45MS01LjcwNSA2LjczNS01LjcwNWg4LjY1YzIuODkzIDAgNC4zNDggMy4zIDMuNTYyIDUuODVsLS42OTggMi4xMTN6TTcwLjk4NSAyMC4wMDdsMS42NS02LjcyMmg2LjQ0bC0xLjY1MiA2LjcyMmgtNi40Mzh6bS03LjM5LTYuNzJoNi40MzhsLTEuNjUgNi43MmgtLjQ5NXYuMDAzSDU1Ljc2NnYtLjAwN2gtNS43Mmw0Ljc4LTE2LjA1OGgtMS45MTJMNTQuMDcuMDY1aDEuOTFsLjAwNC0uMDFoOS4yMzhMNjAuMzk2IDE2LjI3aDIuNDY3bC43MzItMi45ODR6TTUwLjI1OCA2LjkxMkg0My43bC43MjQtMi45N2gtMTQuNjVMMzAuOTMuMDY3aDIwLjkzNmwtLjAxNC4wNmguMDZMNTAuMjYgNi45MTR6TTE3LjUxOCAyMGgtNi43ODJMOC45IDMuOTQ1SDIuOTE1TDQuMDcuMDY1aDQuMzg2di0uMDFoOC43N2wxLjcyOCAxNS4xMiA0LjUtMTUuMTJoNS40OGwtNS45NCAxOS45NDZoLTUuNDc3ek03LjU3OCA1LjQ1bC40NCA0LjY3My0zLjAzNyA5Ljg4SC4wNTNMNC40OTYgNS40NUg3LjU4em0zMi4zNDYtLjI3OGwtMS4yMTcgNC4wMzJoNy4zOTdsLS44NzMgMy43NGgtNy42NUwzNS40NSAyMGgtOC42M2w0LjQ3Ni0xNC44MjhoOC42M3ptOTMuMjY0IDMuNTNsMS40NTcgNi40Ny0xLjQzIDQuODMyaC02Ljc2NEwxMjkuODEgOC43aDMuMzh6Ii8+PC9zd2l0Y2g+PC9zdmc+");background-repeat:no-repeat;margin-left:50px;margin-top:2px;width:157px;height:20px}div.yvp-agegate-container{width:100%;height:100%;color:#fff;font-family:\'Helvetica Neue Regular\',\'Helvetica Neue\',helvetica,arial,sans-serif;position:absolute;background-color:#000;z-index:25}.yvp-agegate-container .yvp-agegate-info-wrapper{padding:17% 25% 0 25%;text-align:center;position:absolute;top:0;}.yvp-stream .yvp-agegate-container .yvp-agegate-info-wrapper{padding:14% 15% 0 15%}.yvp-agegate-container .yvp-agegate-title{font-size:20px;line-height:24px;font-weight:normal;margin-bottom:2%}.yvp-agegate-container .yvp-agegate-desc{font-size:12px;line-height:20px;color:rgba(255,255,255,0.6)}.yvp-stream .yvp-agegate-container.yvp-agegate-birthday .yvp-agegate-info-wrapper{padding:8% 10% 0 10%}.yvp-stream .yvp-agegate-container.yvp-agegate-birthday .yvp-agegate-desc{line-height:14px}.yvp-stream .yvp-agegate-container.yvp-agegate-birthday .yvp-agegate-action-wrapper{margin-top:5.2%}.yvp-stream .yvp-agegate-container.yvp-agegate-birthday .yvp-agegate-btn{display:block;margin:5% auto 0 auto}.yvp-agegate-container .yvp-agegate-action-wrapper{margin-top:9.2%}.yvp-agegate-container .yvp-agegate-date-input,p.yvp-agegate-input{display:inline}.yvp-agegate-container .yvp-agegate-date-input /*input*/{width:56px;height:33px;margin:0 5px 0 0;border:none;border-radius:2px;color:#fff;text-align:center;background-color:rgba(255,255,255,0.15)}input.yvp-agegate-date-input.validate-error{border:1px solid #cc4a4a}.yvp-agegate-container .yvp-agegate-btn{padding:10px 22px 9px 22px;background-color:#188fff;border:none;outline:none;border-radius:2px;color:#fff;font-family:\'Helvetica Neue Regular\',\'Helvetica Neue\',helvetica,arial,sans-serif;font-size:12px;line-height:13px;cursor:pointer}.yvp-agegate-container .yvp-agegate-btn.disable{display:none}.yvp-agegate-container .yvp-agegate-icon{position:absolute;right:20px;bottom:20px;background-size:100%;display:none;zoom:1}.yvp-agegate-back-image{opacity:.3;display:block;width:100%;height:auto}.yvp-start-screen{z-index:21;}.yvp-start-screen .yvp-start-screen-image{display:block;width:100%;height:auto}.yvp-start-screen .yvp-start-screen-provider{font-size:91%;font-weight:normal;margin-bottom:5px}.yvp-start-screen .yvp-start-screen-title{font-weight:bold;font-size:100%;margin-bottom:3px;width:100%;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.yvp-start-screen .yvp-start-screen-description{-webkit-font-smoothing:antialiased;font-weight:200;font-size:85%;letter-spacing:.07em;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.yvp-start-screen .yvp-start-screen-bar-wrapper{position:absolute;top:0;left:0;width:100%;height:100%;background-color:transparent;-webkit-transition:all .3s ease-in-out;-moz-transition:all .3s ease-in-out;-o-transition:all .3s ease-in-out;transition:all .3s ease-in-out}.yvp-start-screen:hover .yvp-start-screen-bar-wrapper{background-color:rgba(0,0,0,0.4)}.yvp-start-screen .yvp-start-screen-bar{position:absolute;width:96%;min-height:30px;max-height:70px;bottom:0;color:#fff;overflow:hidden;padding:10px 2%;text-shadow:#000 0 1px 3px;background-image:-webkit-linear-gradient(top, transparent, rgba(0,0,0,0.7));background-image:-o-linear-gradient(top, transparent, rgba(0,0,0,0.7));background-image:linear-gradient(top, transparent, rgba(0,0,0,0.7))}.yvp-start-screen .yvp-start-screen-button{position:absolute;left:50%;top:50%;width:90px;height:90px;background-image:url("data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iODgiIGhlaWdodD0iODgiIHZpZXdCb3g9IjAgMCA4OCA4OCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48ZGVmcz48bGluZWFyR3JhZGllbnQgeDE9IjIuMDY2JSIgeTE9Ijk2Ljc1MSUiIHgyPSI5NS42NTklIiB5Mj0iMi45NjklIiBpZD0iYSI+PHN0b3Agc3RvcC1jb2xvcj0iIzZEMDBGNiIgb2Zmc2V0PSIwJSIvPjxzdG9wIHN0b3AtY29sb3I9IiMwMDNBQkMiIG9mZnNldD0iMTAwJSIvPjwvbGluZWFyR3JhZGllbnQ+PC9kZWZzPjxnIGZpbGw9Im5vbmUiIGZpbGwtcnVsZT0iZXZlbm9kZCI+PHBhdGggZD0iTTEyLjY3NiA3Ny4zNzZjMy45ODMgMy42MDggOC42NjcgNi4yOCAxNC4wMjcgOC4wMTdDMzIuMDc4IDg3LjEyNSAzNy44OSA4OCA0NC4xNjMgODhjNi4xNjQgMCAxMS45MzQtLjg3NSAxNy4yOTYtMi42MDcgMi4xNTQtLjY5NCA0LjE4Ni0xLjU0NyA2LjExNi0yLjU0MyAyLjg4NC0xLjQ5IDUuNTMtMy4zMTIgNy45MTYtNS40NzQgMy45OS0zLjYwNyA3LjA5Ny04LjE4MyA5LjMzLTEzLjcwN0M4Ny4wNSA1OC4xMzYgODguMTY4IDUxLjU4IDg4LjE2OCA0NGMwLTcuNTg2LTEuMTE4LTE0LjE0LTMuMzQ2LTE5LjY3LTIuMjMzLTUuNTMtNS4zNC0xMC4xLTkuMzMtMTMuNzA1LTMuOTg1LTMuNjE3LTguNjYtNi4yODUtMTQuMDMzLTguMDJDNTYuMDk2Ljg3IDUwLjMyNiAwIDQ0LjE2MiAwYy02LjI3MyAwLTEyLjA4NS44NjgtMTcuNDYgMi42MDYtMS43NDMuNTYtMy40MTIgMS4yMzYtNS4wMSAyLjAwNS0zLjMyIDEuNTgzLTYuMzMgMy41NzgtOS4wMTcgNi4wMTVDOC42ODggMTQuMjMgNS41NzggMTguOCAzLjM0NiAyNC4zMyAxLjExNiAyOS44NiAwIDM2LjQxNCAwIDQ0YzAgNy41ODIgMS4xMTcgMTQuMTM3IDMuMzQ2IDE5LjY3IDIuMjMyIDUuNTIzIDUuMzQyIDEwLjEgOS4zMyAxMy43MDZ6IiBmaWxsLW9wYWNpdHk9Ii42NSIgZmlsbD0idXJsKCNhKSIvPjxwYXRoIGQ9Ik0zNi43MyA1OWgtLjA2NmMtLjkyIDAtMS42NjQtLjc0Mi0xLjY2NC0xLjY1NlYzMC42NTZjMC0uOTE1Ljc0LTEuNjU2IDEuNjY0LTEuNjU2LjAzIDAgLjA2IDAgLjA5LjAwMi4zOC0uMDczLjc4OC0uMDE0IDEuMTUyLjE5NmwyMi42MjIgMTMuMDZjLjc5OC40NiAxLjA3NSAxLjQ3NC42MTMgMi4yNzYtLjAyMy4wNC0uMDQ4LjA4LS4wNzUuMTE4LS4xMzcuMjctLjM1LjUwMy0uNjMuNjdsLTIyLjQ0IDEzLjQ4NGMtLjM5NS4yNC0uODUuMjk1LTEuMjY1LjE5M3oiIGZpbGw9IiNGRkYiLz48L2c+PC9zdmc+");background-color:transparent;background-position:50% 50%;background-repeat:no-repeat;background-size:100%;border-radius:0;margin:-45px 0 0 -45px}div.yvp-feedback-btn{position:absolute;background:#7f6af6;color:#fff;font-size:11px;font-weight:100;padding:3px;overflow:hidden;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;opacity:.8;}div.yvp-feedback-btn:hover{opacity:1}.yvp-browser-mobile div.yvp-feedback-btn{font-size:10px}.yvp-end-screen{position:absolute;font-family:HelveticaNeue,Helvetica,Arial,sans-serif;color:#fff;text-align:center;box-sizing:border-box;}.yvp-end-screen.yvp-replay-only .yvp-metadata{display:none}.yvp-error-screen{position:absolute;width:100%;height:100%;font-family:\'Helvetica Neue\',Helvetica,Arial,sans-serif;font-weight:normal;}.yvp-error-screen .yvp-error-screen-image{position:absolute;display:block;width:100%;height:100%}.yvp-error-screen .yvp-error-screen-background{position:absolute;height:100%;width:100%;background-image:-webkit-linear-gradient(210deg, rgba(0,0,0,0.4), #000);background-image:-o-linear-gradient(210deg, rgba(0,0,0,0.4), #000);background-image:linear-gradient(210deg, rgba(0,0,0,0.4), #000)}.yvp-error-screen .yvp-error-title{position:relative;display:block;top:35%;width:100%;margin:0 auto;font-size:20px;line-height:24px;text-align:center;color:#fff;overflow:hidden;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;}.yvp-stream .yvp-error-screen .yvp-error-title{top:22%}.yvp-ministream .yvp-error-screen .yvp-error-title{top:30%;font-size:16px;line-height:18px}.yvp-error-screen .yvp-error-desc{position:relative;width:288px;top:37%;margin:0 auto;font-size:16px;line-height:20px;letter-spacing:0;text-align:center;color:rgba(255,255,255,0.6);}.yvp-error-screen .yvp-error-desc a:link{color:rgba(255,255,255,0.6)}.yvp-error-screen .yvp-error-desc a:visited{color:rgba(255,255,255,0.6)}.yvp-error-screen .yvp-error-desc a:active{color:rgba(115,0,255,0.8)}.yvp-stream .yvp-error-screen .yvp-error-desc{top:25%;width:85%}.yvp-ministream .yvp-error-screen .yvp-error-desc{display:none;top:25%;width:85%}.yvp-error-screen .yvp-error-desc .yvp-browser-refresh{display:block;padding-top:10px}.yvp-error-screen .yvp-error-desc .yvp-error-flash-download-wrapper{display:block;padding-top:10px;background-color:transparent;cursor:pointer}.yvp-error-screen .yvp-error-desc .yvp-error-flash-download-icon{display:block;width:30%;height:25%;margin-top:10px;background-repeat:no-repeat;}.yvp-browser-mobile .yvp-error-screen .yvp-error-desc .yvp-error-flash-download-icon{visibility:hidden}.yvp-error-screen .yvp-error-code{position:relative;top:40%;width:100%;display:block;color:rgba(255,255,255,0.3);margin:0 auto;font-size:12px;line-height:16px;font-weight:normal;text-align:center;overflow:hidden;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;}.yvp-stream .yvp-error-screen .yvp-error-code{top:30%}.yvp-ministream .yvp-error-screen .yvp-error-code{font-size:12px;line-height:16px}.yvp-browser-mobile .yvp-error-screen .yvp-error-code{font-size:10px}.yvp-error-screen .yvp-error-feedback-btn{bottom:12%;right:5%;}.yvp-ministream .yvp-error-screen .yvp-error-feedback-btn{display:none}.yvp-opensimsim{display:none;position:absolute;z-index:100;background-color:rgba(0,0,0,0.6);width:100%;height:100%;color:rgba(255,255,255,0.8);overflow-x:scroll;-webkit-user-select:text;-moz-user-select:text;-ms-user-select:text;user-select:text;}.yvp-opensimsim .yvp-close-btn{display:block;position:absolute;top:10px;right:10px;width:27px;height:27px;background:url("data:image/svg+xml;base64,PHN2ZyB2ZXJzaW9uPSIxLjEiIGlkPSJMYXllcl8xIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIiB4PSIwcHgiIHk9IjBweCIKICAgIHdpZHRoPSIxMHB4IiBoZWlnaHQ9IjEwcHgiIHZpZXdCb3g9IjAgMCAxMCAxMCIgZW5hYmxlLWJhY2tncm91bmQ9Im5ldyAwIDAgMTAgMTAiIHhtbDpzcGFjZT0icHJlc2VydmUiPgo8cG9seWdvbiBmaWxsPSIjQ0NDQ0NDIiBwb2ludHM9IjEwLDEuNTAyIDguNDk4LDAgNSwzLjQ5OSAxLjUwMiwwLjAwMSAwLDEuNTAzIDMuNDk4LDUgMCw4LjQ5OCAxLjUwMiwxMCA1LDYuNTAyIDguNDk4LDEwIDEwLDguNDk4IAogICAgNi41MDIsNSAiLz4KPC9zdmc+Cg==") no-repeat center center;cursor:pointer;z-index:10;opacity:.8;}.yvp-opensimsim .yvp-close-btn:hover{opacity:1}.yvp-opensimsim .yvp-opensimsim-feedback-btn{top:12px;right:6%;z-index:1;font-weight:bold;padding:5px;text-align:center;cursor:pointer}.yvp-opensimsim .yvp-opensimsim-info{font-size:10px;margin-left:20px;margin-right:20px;position:relative;}.yvp-opensimsim .yvp-opensimsim-info .yvp-opensimsim-title{color:#714fff;padding-top:20px;padding-bottom:10px}.yvp-opensimsim .yvp-opensimsim-info .yvp-opensimsim-graphs{width:100%;height:80px;margin-bottom:25px;}.yvp-opensimsim .yvp-opensimsim-info .yvp-opensimsim-graphs .yvp-opensimsim-graph{float:left;width:150px;}.yvp-opensimsim .yvp-opensimsim-info .yvp-opensimsim-graphs .yvp-opensimsim-graph div{margin-bottom:5px}.yvp-opensimsim .yvp-opensimsim-info .yvp-profile-btn{padding-top:20px;color:#fff;margin-bottom:20px;font-size:14px;cursor:pointer;}.yvp-opensimsim .yvp-opensimsim-info .yvp-profile-btn:hover{text-decoration:underline}.yvp-opensimsim-info .yvp-midrollcache-data{display:inline-block;line-height:7px;}.yvp-opensimsim-info .yvp-midrollcache-data::after{display:table;content:\'\';clear:both}.yvp-opensimsim-info .floated-item{float:left;padding:0 8px;border-right:2px solid #ddd}.yvp-opensimsim-info .yvp-table{display:table;color:#000;text-align:center;width:100%;margin-bottom:25px;}.yvp-opensimsim-info .yvp-table > div:first-child{display:table-caption;background-color:#95b5c0;text-align:left;padding:0 15px;line-height:15px}.yvp-opensimsim-info .yvp-table header.yvp-tablerow{font-weight:bold;background-color:#ccc !important}.yvp-opensimsim-info .yvp-tablerow{display:table-row;background-color:#fff;}.yvp-opensimsim-info .yvp-tablerow.yvp-altrow{background-color:#e5e5e5}.yvp-opensimsim-info .yvp-tablerow.currad{background-color:#feb}.yvp-opensimsim-info .yvp-tablerow.emptyrow{background-color:#b7b7b7}.yvp-opensimsim-info .yvp-tablecell{display:table-cell;padding:2px;border-style:solid;border-color:#000;border-width:1px 1px 0 0}.yvp-opensimsim-info .linkbtn{background:none !important;border:none;padding:0 !important;border-bottom:1px solid #444;cursor:pointer}.yvp-tablecell.st-error{color:#f00}.yvp-tablecell.st-playing{color:#0f0}.yvp-tablecell.st-unplayed{color:#786f78}.yvp-tablecell.st-cancelled{color:#f9cc9d}.emptyrow .yvp-tablecell{border-width:1px 0 0 0;}.emptyrow .yvp-tablecell *{visibility:hidden}.yvp-browser-tv .yvp-opensimsim-config{position:absolute;top:0;right:0}.yvp-feedback-screen{display:none;position:absolute;z-index:150;background-color:#000;width:100%;height:100%;color:#ccc;overflow-x:scroll;-webkit-user-select:text;-moz-user-select:text;-ms-user-select:text;user-select:text;}.yvp-feedback-screen .yvp-feedback-screen-close-btn{display:block;position:absolute;top:10px;right:10px;width:27px;height:27px;background:url("data:image/svg+xml;base64,PHN2ZyB2ZXJzaW9uPSIxLjEiIGlkPSJMYXllcl8xIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIiB4PSIwcHgiIHk9IjBweCIKICAgIHdpZHRoPSIxMHB4IiBoZWlnaHQ9IjEwcHgiIHZpZXdCb3g9IjAgMCAxMCAxMCIgZW5hYmxlLWJhY2tncm91bmQ9Im5ldyAwIDAgMTAgMTAiIHhtbDpzcGFjZT0icHJlc2VydmUiPgo8cG9seWdvbiBmaWxsPSIjQ0NDQ0NDIiBwb2ludHM9IjEwLDEuNTAyIDguNDk4LDAgNSwzLjQ5OSAxLjUwMiwwLjAwMSAwLDEuNTAzIDMuNDk4LDUgMCw4LjQ5OCAxLjUwMiwxMCA1LDYuNTAyIDguNDk4LDEwIDEwLDguNDk4IAogICAgNi41MDIsNSAiLz4KPC9zdmc+Cg==") no-repeat center center;cursor:pointer;z-index:10;opacity:.8;}.yvp-feedback-screen .yvp-feedback-screen-close-btn:hover{opacity:1}.yvp-feedback-screen .yvp-feedback-screen-info{font-size:10px;margin-top:0;margin-right:20px;margin-left:20px;height:100%;}.yvp-feedback-screen .yvp-feedback-screen-info .yvp-feedback-screen-title{font-size:18px;color:#ccc;display:inline-block;padding-top:10px;padding-bottom:7px}.yvp-feedback-screen .yvp-feedback-screen-info .yvp-feedback-screen-response{color:#ccc;padding-top:20px;padding-bottom:5px;font-size:14px;margin-left:0}.yvp-feedback-screen .yvp-feedback-screen-info .yvp-feedback-screen-refid{color:#ccc;padding-top:0;padding-bottom:0;margin-left:0;font-size:10px}.yvp-feedback-screen .yvp-feedback-screen-info .yvp-feedback-screen-text{box-sizing:border-box;margin-top:10px;margin-bottom:10px;overflow:auto;resize:none;width:100%;height:105px;border:1px solid #ccc;opacity:.8;padding:5px;color:#000}.yvp-feedback-screen .yvp-feedback-screen-info .yvp-feedback-screen-button-container{text-align:right}.yvp-feedback-screen .yvp-feedback-screen-info .yvp-feedback-screen-btn{display:inline-block;background-color:#7f6af6;color:#ccc;cursor:pointer;font-size:12px;text-align:center;padding:5px;opacity:.8;}.yvp-feedback-screen .yvp-feedback-screen-info .yvp-feedback-screen-btn:hover{opacity:1}.yvp-feedback-screen .yvp-feedback-screen-info .yvp-feedback-screen-disclaimer{position:absolute;bottom:10px;padding-right:10px}.yvp-ads-overlay{position:absolute;height:100%;width:100%;display:none;-webkit-transition:height .2s ease-in-out 2s;-moz-transition:height .2s ease-in-out 2s;-o-transition:height .2s ease-in-out 2s;transition:height .2s ease-in-out 2s}.yvp-docked-fadein{-webkit-animation-name:fade_in;animation-name:fade_in;-webkit-animation-duration:.247s;-moz-animation-duration:.247s;animation-duration:.247s;animation-timing-function:ease-in-out}.yvp-docked-animated{-webkit-transition:all .2s ease-in-out;-moz-transition:all .2s ease-in-out;-o-transition:all .2s ease-in-out;transition:all .2s ease-in-out}.yvp-docked{position:fixed !important;z-index:9999;box-shadow:0 0 10px rgba(0,0,0,0.2)}.yvp-content.yvp-browser-desktop .yvp-docked-meta{position:relative;opacity:0;visibility:hidden;display:none;height:68px;font-size:16px;color:#121717;background:#fff;line-height:20px;padding-top:16px;left:0;right:0;Box-shadow:0 2px 8px 0 rgba(0,0,0,0.5);}.yvp-content.yvp-browser-desktop .yvp-docked-meta .yvp-docked-title{position:relative;margin:0 16px 5px 16px;max-height:40px;overflow:hidden;-webkit-line-clamp:2;text-overflow:ellipsis;display:-webkit-box;-webkit-box-orient:vertical}.yvp-content.yvp-browser-desktop .yvp-docked-meta .yvp-docked-provider{position:relative;margin:0 16px 16px 16px;opacity:.8;line-height:16px;font-size:11px}.yvp-content.yvp-browser-desktop.yvp-docked-show-meta .yvp-docked-meta{visibility:visible;opacity:1;display:block}.yvp-content.yvp-browser-desktop.yvp-docked-show-meta.yvp-state-fullscreen .yvp-docked-meta{visibility:hidden;opacity:0;display:none}.yvp-docked-bg{position:absolute;top:0;left:0;right:0;bottom:0;z-index:10;}.yvp-docked-bg .yvp-docked-img{position:relative}.yvp-docked-bg .yvp-docked-overlay{position:absolute;top:0;left:0;right:0;bottom:0;background-color:rgba(0,0,0,0.75);}.yvp-docked-bg .yvp-docked-overlay .yvp-docked-overlay-text{position:absolute;width:100%;text-align:center;bottom:34px;color:#fff;font-size:13px;line-height:16px}@-moz-keyframes fadeInOut{0%{opacity:0}45%{opacity:1}55%{opacity:1}100%{opacity:0}}@-webkit-keyframes fadeInOut{0%{opacity:0}45%{opacity:1}55%{opacity:1}100%{opacity:0}}@-o-keyframes fadeInOut{0%{opacity:0}45%{opacity:1}55%{opacity:1}100%{opacity:0}}@-ms-keyframes fadeInOut{0%{opacity:0}45%{opacity:1}55%{opacity:1}100%{opacity:0}}@keyframes fadeInOut{0%{opacity:0}45%{opacity:1}55%{opacity:1}100%{opacity:0}}@-moz-keyframes fade_in{0%{opacity:0}100%{opacity:1}}@-webkit-keyframes fade_in{0%{opacity:0}100%{opacity:1}}@-o-keyframes fade_in{0%{opacity:0}100%{opacity:1}}@-ms-keyframes fade_in{0%{opacity:0}100%{opacity:1}}@keyframes fade_in{0%{opacity:0}100%{opacity:1}}'),
r.prototype.prepareNextRenderer=function(e,t){var n=this;n._rendererController.prepareNextRenderer(e,t)},r.prototype.preloadNextRenderer=function(e){var t=this;return t._rendererController.preloadNextRenderer(e)},r.prototype.preloadNextAdRenderer=function(e){var t=this;return t._rendererController.preloadNextAdRenderer(e)},r.prototype.getEventBus=function(){var e=this;return e._eventBus},r.prototype.getModel=function(){var e=this;return e._model},r.prototype.getProfiler=function(){var e=this;return e._profiler},r.prototype.setBlockedFlashState=function(){var e=this;e._setViewState(C.BLOCKED)},r.prototype.switchAndPlayNextRenderer=function(e){var t=this;t._rendererController.switchAndPlayNextRenderer(e)},r.prototype.switchToNextRenderer=function(){var e=this;e._rendererController.switchToNextRenderer()},r.prototype.didRendererTimeOut=function(){var e=this;return e._rendererController.didRendererTimeOut()},r.prototype.render=function(){var e=this;if(e._contentElem=T.render(M,{enableDocking:e._model.ui.docking.enableOnScrollDown||e._model.ui.docking.enableOnScrollUp}),e._mainElem=e._contentElem.querySelector(".yvp-main"),e.rootElem.appendChild(e._contentElem),T.classList(e._contentElem).add(e._viewSize),Object.keys(E).filter(function(e){return E[e]}).forEach(function(t){"os"===t&&(t=E.os),"ie"===t&&T.classList(e._contentElem).add("yvp-"+t.toLowerCase()+E[t]),T.classList(e._contentElem).add(k+t.toLowerCase())}),A.isFunction(b)?e._loadingScreen=new h:e._model.ui.chromeless||A.isFunction(f)&&(e._loadingScreen=new f(e._eventBus)),e._loadingScreen&&e._mainElem.appendChild(e._loadingScreen.create()),e._model.ui.showControls&&!E.iphone&&!E.android){e.controls=new a(e._eventBus,e,e._model);var t=e.controls.create();t.forEach(function(t){e._mainElem.appendChild(t)})}var n=function(t){e._mouseMoveHandler()},r=function(t){e._mouseOutHandler(t)};e.bindMouseEvents=function(){e._lastMouseMoveCoordinates={},e._contentElem.addEventListener("mousemove",function(t){e._lastMouseMoveCoordinates.x!==t.clientX&&e._lastMouseMoveCoordinates.y!==t.clientY&&(n(t),e._lastMouseMoveCoordinates.x=t.clientX,e._lastMouseMoveCoordinates.y=t.clientY)}),e._contentElem.addEventListener("mouseover",n),e._contentElem.addEventListener("mouseout",r)},E.tv||E.mobile||e.bindMouseEvents(),e.unbindMouseEvents=function(){e._contentElem.removeEventListener("mousemove",n),e._contentElem.removeEventListener("mouseover",n),e._contentElem.removeEventListener("mouseout",r)},A.isFunction(e._handleFullscreenChange.bind)&&(e._fullscreenChangeEventHandler=e._handleFullscreenChange.bind(e),O.forEach(function(t){document.addEventListener(t,e._fullscreenChangeEventHandler)})),E.mobile||e._model.ui.chromeless||(e.adsOverlay=new S(e._eventBus,e),e._mainElem.appendChild(e.adsOverlay.create())),e._feedbackScreen=new m(e._model,e._eventBus,e),e._settingsNode=e.getSettingsNode(),e._setContentDimensionsForPlaylist(),e._bindDockingScrollListener(),e._rendererController=new I(e),e._rendererController.setupDefault(),e._easterEgg=new s("NORMAL",function(){e._openSimSim||(e._openSimSim=new u(e._model,e._eventBus,e._profiler,e._rendererController),e._mainElem.appendChild(e._openSimSim.create())),e._openSimSim.render()}),e.createAdsInfoPanel=function(t){e._adsEasterEgg||(e._adsEasterEgg=new s("AD",function(){e._adsInfoPanel||(e._adsInfoPanel=new _(e._model,e._eventBus,e._profiler,t),e._mainElem.appendChild(e._adsInfoPanel.create())),e._adsInfoPanel.show()}))}},r.prototype.isDocked=function(){var e=this;return e._isDocked},r.prototype._bindDockingScrollListener=function(){var e=this;e._detectViewportChangeHandler&&e._removeDockingScrollListener();var t=E.ie>0&&E.ie<10,n=!E.mobile&&!t;n&&(e._model.ui.docking.enableOnScrollDown||e._model.ui.docking.enableOnScrollUp)&&(e._detectViewportChangeHandler=e._detectViewportChange.bind(e),window.addEventListener("scroll",e._detectViewportChangeHandler))},r.prototype._removeDockingScrollListener=function(){var e=this;e._detectViewportChangeHandler&&(window.removeEventListener("scroll",e._detectViewportChangeHandler),e._detectViewportChangeHandler=null)},r.prototype._detectViewportChange=function(){var e=this,t=window.pageYOffset;if(t!==e.lastScrollY&&!e.isFullscreen){e.lastScrollY=t;var n=T.getElementViewability(e.rootElem),r=n>=e._model.ui.docking.threshold;r||e._isDocked||e._model.playbackState.state!==g.VIDEO||e._model.playbackState.paused?r&&e._isDocked&&e.undockVideoPlayer():e.dockVideoPlayer()}},r.prototype._setContentElementFixed=function(){var e=this,t=e.rootElem.getBoundingClientRect(),n=document.querySelector("body").clientWidth;e._model.ui.docking.positionTop>-1&&(e._contentElem.style.top=t.top+"px"),e._model.ui.docking.positionBottom>-1&&(e._contentElem.style.bottom=t.bottom+"px"),e._model.ui.docking.positionRight>-1&&(e._contentElem.style.right=n-t.right+"px"),e._model.ui.docking.positionLeft>-1&&(e._contentElem.style.left=t.left+"px"),e._contentElem.style.width=e._preDockedWidth+"px",e._contentElem.style.height=e._preDockedHeight+"px",e._contentElem.style.position="fixed"},r.prototype._updateDockedElements=function(){var e=this;if(e._model.ui.docking.enableOnScrollDown||e._model.ui.docking.enableOnScrollUp){e._dockedMetaTitleElem&&e._dockedBg||(e._dockedMetaTitleElem=e._contentElem.querySelector(".yvp-docked-title"),e._dockedMetaProviderElem=e._contentElem.querySelector(".yvp-docked-provider"),e._dockedBg=document.createElement("div"),e._dockedBg.setAttribute("class","yvp-docked-bg"),e._dockedBgImg=document.createElement("img"),e._dockedBgImg.setAttribute("class","yvp-docked-img"),e._dockedBgOverlay=document.createElement("div"),e._dockedBgOverlay.setAttribute("class","yvp-docked-overlay"),e._dockedBgOverlayText=document.createElement("div"),e._dockedBgOverlayText.setAttribute("class","yvp-docked-overlay-text"),e._dockedBgOverlayText.innerHTML="Scroll back up to restore default view.",e._dockedBgOverlay.appendChild(e._dockedBgOverlayText),e._dockedBg.appendChild(e._dockedBgImg),e._dockedBg.appendChild(e._dockedBgOverlay),e.rootElem.appendChild(e._dockedBg)),e._dockedCloseButton||(e._dockedCloseButton=e._contentElem.querySelector(".yvp-docked-close-button")),e._muteIndicator||(e._muteIndicator=e._contentElem.querySelector(".yvp-mute-indicator"));var t=e._model.playlist.getCurrentItem();e._dockedBgImg.setAttribute("src",t._thumbnail),e._dockedMetaTitleElem.innerHTML=t.title,e._dockedMetaProviderElem.innerHTML=t.provider&&t.provider.name}},r.prototype.dockVideoPlayer=function(){var e=this,t=!0,n=window.scrollY,r=e._model.ui.docking.width,i=e._model.ui.docking.height;if(e.lastScrollY>n&&(t=!1),e._model.ui.docking.enableOnScrollDown===t&&e._model.ui.docking.enableOnScrollUp!==t&&!e._fsDocked&&(e._model.ui.docking.enableOnMuted||!e._model.playbackState.mute)){if(e.toggleSettings(null,!1,!0),e._preDockedWidth=e._contentElem.clientWidth,e._preDockedHeight=e._contentElem.clientHeight,e._isDocked=!0,e._eventBus.publish(p.API.PLAYER_DOCKED_CHANGE,!0),e._updateDockedElements(),e.togglePlaylistUI(!0),T.classList(e._contentElem).add("yvp-docked"),e._model.ui.docking.showInfoCard&&T.classList(e._contentElem).add("yvp-docked-show-meta"),e._model.ui.docking.fadeInAnimation){if(T.classList(e._contentElem).add("yvp-docked-fadein"),T.classList(e.rootElem).add("yvp-docked-mode"),e._model.ui.docking.positionTop>-1&&(e._contentElem.style.top=e._model.ui.docking.positionTop+"px"),e._model.ui.docking.positionBottom>-1&&e._model.ui.docking.positionTop<0){var a=0;e._model.ui.docking.showInfoCard&&(a=V),e._contentElem.style.bottom=a+e._model.ui.docking.positionBottom+"px"}e._model.ui.docking.positionRight>-1&&e._model.ui.docking.positionLeft<0&&(e._contentElem.style.right=e._model.ui.docking.positionRight+"px"),e._model.ui.docking.positionLeft>-1&&(e._contentElem.style.left=e._model.ui.docking.positionLeft+"px")}else{e._setContentElementFixed();var o=e._contentElem.getBoundingClientRect(),s=document.querySelector("body").clientWidth,l=window.innerHeight,d=0,c=0;if(e._model.ui.docking.positionTop>-1&&(c=e._model.ui.docking.positionTop,e._contentElem.style.top="0px"),e._model.ui.docking.positionBottom>-1){var u=0;e._model.ui.docking.showInfoCard&&(u=V),c=l-i-u-e._model.ui.docking.positionBottom,e._contentElem.style.bottom=""}e._model.ui.docking.positionRight>-1&&(d=s-o.left-r-e._model.ui.docking.positionRight,e._contentElem.style.right=""),e._model.ui.docking.positionLeft>-1&&(d=e._model.ui.docking.positionLeft,e._contentElem.style.left="0px"),e._contentElem.style.transform="translate3d("+d+"px, "+c+"px, 0)",T.classList(e._contentElem).add("yvp-docked-animated"),T.classList(e.rootElem).add("yvp-docked-mode")}if(e._dockedCloseButton)if(e._nflBranding){var _=E.mobile?e._nflBarDimensions.MOBILE.HEIGHT:e._nflBarDimensions.DESKTOP.HEIGHT;e._dockedCloseButton.style.bottom=i-22-_+"px"}else e._dockedCloseButton.style.bottom=i-22+"px";e._muteIndicator&&(e._muteIndicator.style.top=i-50+"px"),e._contentElem.style.width=r+"px",e._contentElem.style.height=i+"px",e._eventBus.publish(p.API.PLAYER_VIEWPORT_CHANGE,!1),e._eventBus.publish(p.PLAYER_DIMENSION_CHANGE,{width:r,height:i}),e._setContentHeight(),e._model.uiState.isDocked=!0}},r.prototype.undockVideoPlayer=function(e){var t=this;T.classList(t._contentElem).remove("yvp-docked"),T.classList(t._contentElem).remove("yvp-docked-show-meta"),t._model.ui.docking.fadeInAnimation?(T.classList(t._contentElem).remove("yvp-docked-fadein"),t._contentElem.style.top="",t._contentElem.style.right="",t._contentElem.style.bottom="",t._contentElem.style.left="",t._contentElem.style.width="",t._contentElem.style.height=""):(t._contentElem.style.transform="translate3d(0, 0, 0)",t._setContentElementFixed()),t._isDocked=!1,t._eventBus.publish(p.API.PLAYER_DOCKED_CHANGE,!1),t.togglePlaylistUI(!1),e&&t._eventBus.publish(p.TOGGLE_PLAY_PAUSE),setTimeout(function(){t._isDocked||(t._model.uiState.isDocked=!1,t._muteIndicator&&(t._muteIndicator.style.top=""),t._model.ui.docking.fadeInAnimation||(t._contentElem.style.width="",t._contentElem.style.height="",T.classList(t._contentElem).remove("yvp-docked-animated"),t._contentElem.style.position="",t._contentElem.style.transform="",t._contentElem.style.top="",t._contentElem.style.right="",t._contentElem.style.bottom="",t._contentElem.style.left=""),t._dockedBg&&(t.rootElem.removeChild(t._dockedBg),t._dockedBg=null),T.classList(t.rootElem).remove("yvp-docked-mode"),t._setContentHeight(),t._eventBus.publish(p.API.PLAYER_VIEWPORT_CHANGE,!0),t._eventBus.publish(p.PLAYER_DIMENSION_CHANGE,{width:t._preDockedWidth,height:t._preDockedHeight}))},250)},r.prototype.updateDockingConfig=function(e,t,n,r,i,a){var o=this;"boolean"==typeof e&&(o._model.ui.docking.enableOnScrollDown=e),"boolean"==typeof t&&(o._model.ui.docking.enableOnScrollUp=t),isNaN(n)||(o._model.ui.docking.positionTop=n),isNaN(r)||(o._model.ui.docking.positionRight=r),isNaN(i)||(o._model.ui.docking.positionLeft=i),isNaN(a)||(o._model.ui.docking.positionBottom=a),e||t?(o._bindDockingScrollListener(),o._isDocked&&o.dockVideoPlayer()):(o._removeDockingScrollListener(),o._isDocked&&o.undockVideoPlayer())},r.prototype.getContentNode=function(){var e=this;return e._contentElem},r.prototype.getOpenSimSim=function(){var e=this;return e._openSimSim},r.prototype.getMainElement=function(){var e=this;return e._mainElem},r.prototype.getVideoElement=function(){var e=this;return e.rootElem.getElementsByTagName("video")[0]},r.prototype.getCustomControlsNode=function(){var e=this;return e.rootElem.querySelector(".yvp-custom-controls")},r.prototype.getSettingsNode=function(){var e=this;return e.rootElem.querySelector(".yvp-settings-container")},r.prototype._setContentDimensionsForPlaylist=function(){var e=this;if(e.showPlaylist()){var t=e.getPlaylistUIPosition(),n=e.isPlaylistInStream();switch(e._playlistUIRendered=!0,e._model.playback.continuousPlay=!0,t){case F:var r=e.rootElem.clientHeight,i=r+B;e.rootElem.style.height=i+"px",e._contentElem.style.height=r+"px",e._contentElemPlaylistHeight=r+"px",e._playlistDimensions.rootElem.height=i,e._playlistDimensions.contentElem.height=e._contentElem.clientHeight;break;case z:var a=e._mainElem.clientWidth,o=e._contentElem.clientWidth,s=n?U:j,l=0;if(n)l=a-s,e._mainElem.style.width=l+"px",e._mainElemPlaylistWidth=l+"px";else{var d=o-s;l=100*d/o,e._mainElem.style.width=l+"%",e._mainElemPlaylistWidth=l+"%"}e._bindPlaylistWindowResize(),e._playlistDimensions.rootElem.width=e.rootElem.clientWidth,e._playlistDimensions.mainElem.width=n?l:d;break;case Y:}}},r.prototype._bindPlaylistWindowResize=function(){var e=this;e.getPlaylistUIPosition()!==z||e.isPlaylistInStream()||window.addEventListener("resize",function(){var t=(e._mainElem.clientWidth,e._contentElem.clientWidth),n=t-j,r=100*n/t;t>1e3&&e.getFullscreen()===!1&&(e._mainElem.style.width=r+"%",e._mainElemPlaylistWidth=r+"%")})},r.prototype._setContentHeightForNFL=function(){var e=this;setTimeout(function(){e._setContentHeight()},700)},r.prototype._setContentHeight=function(){var e=this;if(e._nflBranding&&e._contentElem&&e._mainElem){var t=E.mobile?e._nflBarDimensions.MOBILE.HEIGHT:e._nflBarDimensions.DESKTOP.HEIGHT,n=e._contentElem.offsetHeight-t+"px";e._mainElem.style.height=n}},r.prototype._loadNFLBranding=function(){var e=this;if(!e._nflBranding){e._nflBranding=new o(e._eventBus,e,e._model),e._setContentHeight();var t=e._contentElem.querySelector(".yvp-playlist-container");e._nflBrandingNode=e._nflBranding.create(),e.showPlaylist()&&e.getPlaylistUIPosition()===F&&t?t.parentNode.insertBefore(e._nflBrandingNode,t):e._contentElem.appendChild(e._nflBrandingNode)}},r.prototype._removeNFLBranding=function(){var e=this;e._mainElem&&(e._mainElem.style.height="100%"),e._nflBranding&&(e._contentElem.removeChild(e._nflBranding.node),e._nflBranding.destroy(),e._nflBranding=null,e._nflBrandingNode=null)},r.prototype.getNFLBrandingNode=function(){var e=this;return e._nflBrandingNode},r.prototype.setKeyboardFocus=function(){var e=this;e._contentElem.focus()},r.prototype.updateViewOnEscPress=function(){var e=this;e._openSimSim&&e._openSimSim.isOpen()?e._openSimSim.close():e._adsInfoPanel&&e._adsInfoPanel.isOpen()?e._adsInfoPanel.close():e._feedbackScreen&&e._feedbackScreen.isOpen()?e._feedbackScreen.close():T.classList(e._contentElem).contains("yvp-show-settings")?e.toggleSettings(null,!1):e.getFullscreen()&&e.setFullscreen(!1)},r.prototype.toggleSettings=function(e,t,n){var r=this;if(e&&(r._settingBtn=e),r._settingBtn||(r._settingBtn=r._contentElem.querySelector(".yvp-setting-btn")),r._settingBtn){var i="",a=r._settingBtn.querySelector(".yvp-setting-pointer");T.classList(r._settingBtn).contains("selected")&&t!==!0||t===!1?(T.classList(r._settingsNode).remove("open"),T.classList(r._settingBtn).remove("selected"),T.classList(a).remove("open"),T.classList(r._contentElem).remove("yvp-settings-on"),i="OFF"):T.classList(r._settingBtn).contains("selected")&&t!==!0||(T.classList(r._settingsNode).add("open"),T.classList(r._settingBtn).add("selected"),T.classList(a).add("open"),T.classList(r._contentElem).add("yvp-settings-on"),i="ON"),n||r._eventBus.publish(p.CTRL_SETTINGS)}},r.prototype.disableControls=function(){var e=this;T.classList(e._contentElem).add("yvp-disable-controls")},r.prototype.enableControls=function(){var e=this;T.classList(e._contentElem).remove("yvp-disable-controls")},r.prototype.hideContentRenderer=function(e){var t=this;e?T.classList(t._contentElem).add("yvp-hide-content-on"):T.classList(t._contentElem).remove("yvp-hide-content-on")},r.prototype.resetState=function(){var e=this;e._destroyStartScreen(),e._destroyEndScreen(),e._removeNFLBranding()},r.prototype.checkForNFLBranding=function(){var e=this,t=e._model.playlist.getCurrentItem(),n=t?t.provider:null;n&&"video.nflhighlights.com"===n.providerId&&e._loadNFLBranding()},r.prototype.syncViewState=function(){var e,t=this,n=t._model,r=n.playbackState,i=n.castState,a=i&&i.connected,o=t._model.playlist&&t._model.playlist.getCurrentItem();t._setFlag(N.CASTING,a),a&&(i.mediaLoaded&&!i.paused?T.classList(t._contentElem).add("yvp-cast-playing"):T.classList(t._contentElem).remove("yvp-cast-playing"));var s=T.classList(t._contentElem).contains(w+N.LOADING);switch(t._setFlag(N.LOADING,r.loading),!s&&r.loading?t._eventBus.publish(p.API.LOADING_BEGIN):s&&!r.loading&&t._eventBus.publish(p.API.LOADING_END),r.state){case g.INIT:case g.WAITING:e=C.START_SCREEN,t._nflBranding||t.checkForNFLBranding(),(!t._model.playback.continuousPlay||0===t._model.playlist.position||"always"!==t._model.skipOnError&&"timebased"!==t._model.skipOnError)&&!t._model.playback.autoplay&&o&&(o.hasThumbnail()&&!E.mobile||o.fetchFinished())&&t._renderStartScreen();break;case g.VIDEO:var l,d=r.isVpaidAdPlaying();t._nflBranding||t.checkForNFLBranding(),l=d?v.VPAID:r.isAdPlaying()?v.AD:v.VIDEO,t._rendererController.setRendererMode(l),e=C.VIDEO;var c=!r.paused;c?(t._setFlag(N.PLAYING,!0),t._setFlag(N.PAUSED,!1)):(t._setFlag(N.PLAYING,!1),t._setFlag(N.PAUSED,!0)),t._rendererController.syncPlaybackState();break;case g.END:if(t.endVideo(),t._removeNFLBranding(),r.criticalError)t._model.ui.chromeless?t._eventBus.publish(p.API.PLAYER_ERROR,r.criticalError):t._renderErrorScreen(r.criticalError,o,t._model.guid),e=C.ERROR;else{var u=o&&o.isLive();t._rendererController.rewindAfterEnd(u),t._prepEndScreen(r.previousItem),e=C.END_SCREEN}}t._currentViewState=e,t._setViewState(e),t._synchAriaState()},r.prototype.getCurrentViewState=function(){return this._currentViewState},r.prototype._setViewState=function(e){var t=this,n=P+e,r=T.classList(t._contentElem);Object.keys(C).forEach(function(e){var t=P+C[e];r.contains(t)&&t!==n&&r.remove(t)}),r.contains(n)||r.add(n)},r.prototype.setSelectedStreams=function(e){},r.prototype.play=function(e){var t=this;t._rendererController.play(e)},r.prototype.pause=function(){var e=this;e._rendererController.pause()},r.prototype._setFlag=function(e,t){var n=this,r=T.classList(n._contentElem),i=w+e,a=r.contains(i);t?a||r.add(i):a&&r.remove(i)},r.prototype.renderAgeGateScreen=function(e,t){if(e){var n=this;n._ageGateScreen=new c(n._eventBus,t),n._mainElem.appendChild(n._ageGateScreen.create(e))}},r.prototype.destroyAgeGateScreen=function(){var e=this;e._ageGateScreen&&(e._mainElem.removeChild(e._ageGateScreen.node),e._ageGateScreen.destroy(),e._ageGateScreen=null)},r.prototype._renderStartScreen=function(){var e=this,t=null,n=null,r=e._model.YVAP;if(!e._startScreen){var i=function(){n&&(n(),clearTimeout(t),n=t=null),e._renderStartScreenImpl(e._model.playlist.getCurrentItem(),e._model)};E.mobile&&r&&r.accountId&&!r.adsReady?(n=e._eventBus.subscribe(p.ADS_READY,i,e),t=setTimeout(i,1e3)):i()}},r.prototype._renderStartScreenImpl=function(e,t){var n=this;n._startScreen||(t.ui.showStartScreen&&(n._startScreen=new y(n._eventBus),n._mainElem.appendChild(n._startScreen.create(e,t))),n._eventBus.publish(p.START_SCREEN_RENDERED))},r.prototype._destroyStartScreen=function(){var e=this,t=e._startScreen&&e._startScreen.node;t&&(e._mainElem.removeChild(t),e._startScreen.destroy(),e._startScreen=null)},r.prototype._prepEndScreen=function(e){var t,n=this;n._endScreen||n.showPlaylist()||(n._model.ui.showEndScreen?e.isCCM&&(n._model.ui.showReplayOnlyEndScreen||!e.relatedVideoIds||e.relatedVideoIds.length<1)?n._eventBus.publish(p.FETCH_MORE_RELATED_ITEMS,e,{start:0,count:12,videoUuid:e.id},function(t,r){n._renderEndScreen(e,r)}):(t=e.relatedVideoIds.map(function(e){return n._model.mediaStore.get(e)}),n._renderEndScreen(e,t)):n._renderEndScreen(e,[]))},r.prototype._renderEndScreen=function(e,t){var n=this;if(!n._endScreen){var r=t&&t.length>0;if(n._endScreen=new l(n._eventBus,n,n._model),n._endScreen){var i=r&&!n._model.ui.showReplayOnlyEndScreen?"endscreen":"endscreen-rp";n._mainElem.appendChild(n._endScreen.create(i,e)),r&&"endscreen-rp"!==i&&n._endScreen.renderPlaylist(t),n._startScreen||"endscreen-rp"!==i||n._renderStartScreen()}n._eventBus.publish(p.END_SCREEN_RENDERED),n._eventBus.publish(p.API.UI_INTERACT,{srcElement:"es-view"})}},r.prototype._destroyEndScreen=function(){var e=this;e._endScreen&&(e._mainElem.removeChild(e._endScreen._node),e._endScreen.destroy(),e._endScreen=null)},r.prototype._renderErrorScreen=function(e,t,n){var r=this;if(!r._errorScreen){r._errorScreen=new d(r._eventBus);var i=t?t.images.defaultThumbnail:"",a=T.getAssetUrl(r._model.isLocal(),r._model.version,L);if(r._model.isLocal())a="assets/flash_download_logo.svg";else{var o="https:"===document.location.protocol?"https://s.yimg.com":"http://l.yimg.com";a=o+"/rx/builds/"+r._model.version+"/assets/flash_download_logo.svg"}t=t?t:r._model.playlist.getCurrentItem(),r._mainElem.appendChild(r._errorScreen.create(e,n,t.videoSession,i,a)),r._eventBus.publish(p.API.UI_INTERACT,{srcElement:"err-view-"+e.category+"-"+e.subcategory})}},r.prototype._synchAriaState=function(){var e=this;e.controls&&e.controls.syncAriaState()},r.prototype.endVideo=function(){var e=this;e._rendererController.endVideo()},r.prototype.seek=function(e){var t=this;t._rendererController.seek(e)},r.prototype.getCurrentTime=function(){var e=this;return e._rendererController.getCurrentTime()},r.prototype.getDuration=function(){var e=this;return e._rendererController.getDuration()},r.prototype.setQuality=function(e){var t=this;t._rendererController.setQuality(e)},r.prototype.setFullscreen=function(e){var t=this,n=t._contentElem,r=n.requestFullscreen||n.webkitRequestFullscreen||n.mozRequestFullScreen||n.msRequestFullscreen,i=document.exitFullscreen||document.webkitExitFullscreen||document.mozCancelFullScreen||document.msExitFullscreen;e?(E.ios?t._rendererController.enterFS():E.android&&!t.controls?t._rendererController.enterFS():r?r.call(n):t._enterLightbox(),t._eventBus.publish(p.CTRL_FULLSCREEN,"ON")):(E.ios?t._rendererController.exitFS():i?i.call(document):t._exitLightbox(),t._eventBus.publish(p.CTRL_FULLSCREEN,"OFF")),t._isFullScreen===e||r||i||(t._handleFullscreenChange(),t._eventBus.publish(p.FULLSCREEN_CHANGE,e),t._isFullScreen=e),t._synchAriaState()},r.prototype._enterLightbox=function(){var e=this,t=document.querySelector("body");if(!T.classList(t).contains("yvp-lightbox")){for(var n=e._contentElem.parentNode;"BODY"!==n.nodeName;)T.classList(n).add("yvp-lightbox-ancestor"),n=n.parentNode;T.classList(t).add("yvp-lightbox")}},r.prototype._exitLightbox=function(){var e=this,t=document.querySelector("body");if(T.classList(t).contains("yvp-lightbox")){T.classList(t).remove("yvp-lightbox");for(var n=e._contentElem.parentNode;"BODY"!==n.nodeName;)T.classList(n).remove("yvp-lightbox-ancestor"),n=n.parentNode}},r.prototype.getFullscreen=function(){var e=this,t=document.fullscreenElement||document.mozFullScreenElement||document.webkitFullscreenElement||document.msFullscreenElement,n=E.mobile&&(document.isFullScreen||document.webkitIsFullScreen);return t===e._contentElem||T.classList(document.querySelector("body")).contains("yvp-lightbox")||n},r.prototype.toggleFullscreen=function(){var e=this;e.setFullscreen(!e.getFullscreen())},r.prototype.setVolume=function(e){var t=this;t._rendererController.setVolume(e),t._eventBus.publish(p.API.PLAYER_VOLUME_CHANGE,e)},r.prototype._onMuteChange=function(e){var t=this;e?T.classList(t._contentElem).add("yvp-muted"):T.classList(t._contentElem).remove("yvp-muted")},r.prototype.setMute=function(e){var t=this;t._rendererController.setMute(e),t._eventBus.publish(p.API.PLAYER_MUTE_CHANGE,e)},r.prototype._mouseMoveHandler=function(){var e=this;e._autoHideControlsTimeout&&clearTimeout(e._autoHideControlsTimeout),T.classList(e._contentElem).remove("yvp-hide-controls"),e._objectOverlay&&T.classList(e._objectOverlay).remove("yvp-overlay-hide-cursor"),e._model.playbackState.seeking||e._model.playbackState.paused||(e._autoHideControlsTimeout=setTimeout(e._onAutoHideControls.bind(e),e._controlsHideTimeout)),e._eventBus.publish(p.CONTROLS_BAR_CHANGE,!0,!0);var t=e.getFullscreen();t||e._eventBus.publish(p.CC.POSITION_FLOAT,!0)},r.prototype._mouseOutHandler=function(e){var t=this;if("mouseout"===e.type){t._autoHideControlsTimeout&&clearTimeout(t._autoHideControlsTimeout),T.classList(t._contentElem).add("yvp-hide-controls"),t._eventBus.publish(p.CONTROLS_BAR_CHANGE,!1,!1);var n=t.getFullscreen();n||t._eventBus.publish(p.CC.POSITION_FLOAT,!1)}},r.prototype._onAutoHideControls=function(){var e=this;e._objectOverlay=e._contentElem&&e._contentElem.querySelector(".yvp-object-overlay"),clearTimeout(e._autoHideControlsTimeout),e._autoHideControlsTimeout=null,T.classList(e._contentElem).add("yvp-hide-controls"),e._eventBus.publish(p.CONTROLS_BAR_CHANGE,!1,!0)},r.prototype._onUpnextPgClick=function(){var e=this;e._autoHideControlsTimeout&&clearTimeout(e._autoHideControlsTimeout),e._model.playbackState.seeking||(e._autoHideControlsTimeout=setTimeout(e._onAutoHideControls.bind(e),e._controlsHideTimeout))},r.prototype._handleFullscreenChange=function(){var e=this,t=e.getFullscreen();t?(T.classList(e._contentElem).add("yvp-state-fullscreen"),e._isDocked&&(e._fsDocked=!0,e.undockVideoPlayer())):(T.classList(e._contentElem).remove("yvp-state-fullscreen"),(e._isDocked||e._fsDocked)&&(e._fsDocked=!1,e.dockVideoPlayer())),e._isFullScreen!==t&&(e._model.uiState.isFullscreen=t,e._eventBus.publish(p.FULLSCREEN_CHANGE,t),e._isFullScreen=t)},r.prototype._onDimensionChange=function(e){var t=this,n=e.width||1,r=e.height||1,i=t._getViewSize(n,r);(t.isStreamMode()||t.isMiniStreamMode())&&i===D.NORMAL&&t._removeStreamMode(),i===D.VERY_SMALL?T.classList(t._contentElem).add("yvp-ministream"):i===D.SMALL&&T.classList(t._contentElem).add("yvp-stream")},r.prototype._removeStreamMode=function(){var e=this,t=e.getContentNode();T.classList(t).remove("yvp-ministream"),T.classList(t).remove("yvp-stream")},r.prototype._getViewSize=function(e,t){var n=D.NORMAL;return(e<=R.VERY_SMALL_WIDTH||t<=R.VERY_SMALL_HEIGHT)&&(n=D.VERY_SMALL),(e<=R.SMALL_WIDTH&&e>R.VERY_SMALL_WIDTH||t<=R.SMALL_HEIGHT&&t>R.VERY_SMALL_HEIGHT)&&(n=D.SMALL),n},r.prototype.clearAutoHideTimeout=function(){var e=this;e._autoHideControlsTimeout&&clearTimeout(e._autoHideControlsTimeout)},r.prototype.setOverlayActive=function(e){var t=this;e?T.classList(t._contentElem).add("yvp-overlay-active"):T.classList(t._contentElem).remove("yvp-overlay-active")},r.prototype.destroyFullscreenChangeListeners=function(){var e=this;e._fullscreenChangeEventHandler&&O.forEach(function(t){document.removeEventListener(t,e._fullscreenChangeEventHandler)})},r.prototype.getClientVideoDimension=function(){var e=this;return{width:e._contentElem.clientWidth,height:e._contentElem.clientHeight}},r.prototype.getCurrentTime=function(){var e=this;return e._rendererController.getCurrentTime()},r.prototype.getControls=function(){var e=this;return e.controls},r.prototype.isStreamMode=function(){var e=this;return e._viewSize===D.SMALL||T.classList(e._contentElem).contains("yvp-stream")},r.prototype.isMiniStreamMode=function(){var e=this;return e._viewSize===D.VERY_SMALL||T.classList(e._contentElem).contains("yvp-ministream")},r.prototype.stopMedia=function(){var e=this;return e._rendererController.stopMedia()},r.prototype.showPlaylist=function(){var e=this,t=null,n=null,r=null;return null!==e._showPlaylist?e._showPlaylist:(r=e._model.ui.playlistUI&&e._model.ui.playlistUI.show===!0,r&&!E.mobile?(t=e.getPlaylistUIPosition(),n=e._model.uiState.width||e.rootElem.clientWidth,r=t===Y&&n>=480?!0:t===F&&n>=560?!0:t===z&&(e.rootElem.clientWidth>=835||e.rootElem._clientWidth>=835)?!0:!1):r=!1,e._showPlaylist=r,e._showPlaylist)},r.prototype.getPlaylistUIPosition=function(){var e=this;return null!==e._playlistPosition?e._playlistPosition:(e._playlistPosition=e._model.ui.playlistUI&&e._model.ui.playlistUI.show===!0&&e._model.ui.playlistUI.position,e._playlistPosition)},r.prototype.isPlaylistInStream=function(){var e,t=this,n=t.getPlaylistUIPosition(),r=t._model.ui.playlistUI&&t._model.ui.playlistUI.inStream===!0;return e=n===z&&r?!0:!1},r.prototype.togglePlaylistUI=function(e){var t=this,n=t.getPlaylistUIPosition();if(!t.getFullscreen()&&t.showPlaylist()&&n!==Y){var r=".yvp-playlist-mode-"+n,i=t._contentElem.querySelector(r);e?T.classList(i).add("yvp-hide-playlist"):T.classList(i).remove("yvp-hide-playlist"),n===z&&(e===!0?(t._mainElem.removeAttribute("style"),t.rootElem.style.width=t._playlistDimensions.mainElem.width+"px"):(t._mainElem.style.width=t._playlistDimensions.mainElem.width+"px",t.rootElem.style.width=t._playlistDimensions.rootElem.width+"px")),n===F&&(e===!0?t._contentElem.style.height=t._playlistDimensions.rootElem.height+"px":(t._contentElem.style.height=t._playlistDimensions.contentElem.height+"px",t.rootElem.height=t._playlistDimensions.rootElem.height+"px"))}},r.prototype._onFullScreenChange=function(e){var t=this;t.showPlaylist()&&!t._isDocked&&t._handlePlaylistFullScreen(e)},r.prototype._handlePlaylistFullScreen=function(e){var t=this;(t.getPlaylistUIPosition()===F||t.getPlaylistUIPosition()===z)&&(e===!0?t.getPlaylistUIPosition()===F?t._contentElem.style.height="100%":t.getPlaylistUIPosition()===z&&t._mainElem.style&&t._mainElem.style&&(t._mainElem.style.width="100%",t._mainElem.style["z-index"]=1):t.getPlaylistUIPosition()===F?t._contentElem.style.height=t._contentElemPlaylistHeight:t.getPlaylistUIPosition()===z&&(t._mainElem.style.width=t._mainElemPlaylistWidth,t._mainElem.style["z-index"]="auto"))},r.prototype.destroy=function(){var e=this;e.controls&&e.controls.destroy(),e._easterEgg&&e._easterEgg.destroy(),e._adsEasterEgg&&e._adsEasterEgg.destroy(),e._endScreen&&e._endScreen.destroy(),e._errorScreen&&e._errorScreen.destroy(),e._loadingScreen&&e._loadingScreen.destroy(),e._rendererController&&e._rendererController.destroy(),e._startScreen&&e._startScreen.destroy(),e.destroyAgeGateScreen(),e.destroyFullscreenChangeListeners(),E.tv||E.mobile||e.unbindMouseEvents(),e._ageGateController&&e._ageGateController.destroy(),e._openSimSim&&e._openSimSim.destroy(),e._adsInfoPanel&&e._adsInfoPanel.destroy(),e._feedbackScreen&&e._feedbackScreen.destroy(),e.rootElem.innerHTML="",e._removeDockingScrollListener()}},{"../../lib":"bRhrlU","../../lib/logger":"IS9j5T","../../lib/user-agent":"ty5FFo","./easter-egg":19,"./event":"YJm+dH","./renderer-controller":41,"./renderers/modes":46,"./states":50,"./util":"jJTEqU","./views/ads-info-panel.js":63,"./views/ads-overlay":65,"./views/age-gate-screen":67,"./views/base.html":68,"./views/controls":73,"./views/error-screen":76,"./views/feedback-screen":78,"./views/loading-screen":80,"./views/nfl-branding":82,"./views/open-sim-sim":84,"./views/playlist":87,"./views/start-screen":92,"./views/tumblr-controls":155,"./views/tumblr-loading-screen":155,fs:155,"insert-css":157}],61:[function(e,t,n){var r=new(e("hogan.js/lib/template").Template)(function(e,t,n){var r=this;return r.b(n=n||""),r.b("<div>"),r.b("\n"+n),r.b("    <table border='1'>"),r.b("\n"+n),r.b("        <tr>"),r.b("\n"+n),r.b("            <th>Clip</th>"),r.b("\n"+n),r.b("            <th>Position</th>"),r.b("\n"+n),r.b("        </tr>"),r.b("\n"+n),r.b("        "),r.b("\n"+n),r.s(r.f("clipStats",e,t,1),e,t,0,143,1206,"{{ }}")&&(r.rs(e,t,function(e,t,r){r.b("            <tr>"),r.b("\n"+n),r.b("                <td>"),r.b(r.v(r.f("clipId",e,t,0))),r.b("</td>"),r.b("\n"+n),r.b("                <td>"),r.b("\n"+n),r.b("                	<table border='1'>"),r.b("\n"+n),r.b("                	<tr>"),r.b("\n"+n),r.s(r.f("data",e,t,1),e,t,0,303,362,"{{ }}")&&(r.rs(e,t,function(e,t,n){n.b("                		<th>"),n.b(n.v(n.f("position",e,t,0))),n.b("</th>"),n.b("\n")}),e.pop()),r.b("                	</tr>"),r.b("\n"+n),r.b("                	<tr>"),r.b("\n"+n),r.s(r.f("data",e,t,1),e,t,0,443,1111,"{{ }}")&&(r.rs(e,t,function(e,t,r){r.b("                		<td>"),r.b("\n"+n),r.s(r.f("data",e,t,1),e,t,0,495,1060,"{{ }}")&&(r.rs(e,t,function(e,t,r){r.b("	                		<ul>"),r.b("\n"+n),r.b("	                			<li>Ad Opportunity: "),r.b(r.v(r.f("taken",e,t,0))),r.b("</li>"),r.b("\n"+n),r.b("	                			<li>Communicator: "),r.b(r.v(r.f("communicator",e,t,0))),r.b("</li>"),r.b("\n"+n),r.b("	                			<li>Response Code: "),
r.b(r.v(r.f("responseCode",e,t,0))),r.b("</li>"),r.b("\n"+n),r.b("	                			<li>Response Type: "),r.b(r.v(r.f("responseType",e,t,0))),r.b("</li>"),r.b("\n"+n),r.b("	                			<li>First Redirect: "),r.b(r.v(r.f("firstRedirect",e,t,0))),r.b("</li>"),r.b("\n"+n),r.b("	                			<li>Redirect count: "),r.b(r.v(r.f("redirectCount",e,t,0))),r.b("</li>"),r.b("\n"+n),r.b("	                			<li>Ad Delivery error: "),r.b(r.v(r.f("error",e,t,0))),r.b("</li>"),r.b("\n"+n),r.b("	                			<li>Ad Media Start latency: "),r.b(r.v(r.f("mediaStartLatency",e,t,0))),r.b("</li>"),r.b("\n"+n),r.b("	                		</ul>"),r.b("\n")}),e.pop()),r.b("                		</td>"),r.b("\n")}),e.pop()),r.b("                	</tr>"),r.b("\n"+n),r.b("                	</table>"),r.b("\n"+n),r.b("				</td>"),r.b("\n"+n),r.b("            </tr>"),r.b("\n")}),e.pop()),r.b("    </table>"),r.b("\n"+n),r.b("</div>"),r.b("\n"),r.fl()});t.exports={render:function(){return r.render.apply(r,arguments)},r:function(){return r.r.apply(r,arguments)},ri:function(){return r.ri.apply(r,arguments)}}},{"hogan.js/lib/template":156}],62:[function(e,t,n){var r=new(e("hogan.js/lib/template").Template)(function(e,t,n){var r=this;return r.b(n=n||""),r.b("<div class='yvp-adspanel yvp-opensimsim' style='display: none'>"),r.b("\n"+n),r.b("    <button class='yvp-opensimsim-close-btn yvp-close-btn'></button>"),r.b("\n"+n),r.b("\n"+n),r.b("    <div class='yvp-opensimsim-info'>"),r.b("\n"+n),r.b("        <div class='yvp-opensimsim-title'>Yahoo Video Ads</div>"),r.b("\n"+n),r.b("        <div>Version : "),r.b(r.v(r.f("version",e,t,0))),r.b("</div>"),r.b("\n"+n),r.b("        <div>Page SpaceID : "),r.b(r.v(r.f("spaceId",e,t,0))),r.b("</div>"),r.b("\n"+n),r.b("        <div class='yvp-sessionId'></div>"),r.b("\n"+n),r.b("        <div>YVAP Acct. ID : "),r.b(r.v(r.f("yvap_accountId",e,t,0))),r.b("</div>"),r.b("\n"+n),r.b("        <div>YVAP Play Context : "),r.b(r.v(r.f("yvap_playContext",e,t,0))),r.b("</div>"),r.b("\n"+n),r.b("        <div class='yvp-videoSpaceId'></div>"),r.b("\n"+n),r.b("        <div class='yvp-opensimsim-uuid'></div>"),r.b("\n"+n),r.b("        <div class='yvp-opensimsim-renderertype'></div>"),r.b("\n"+n),r.b("        <div>Midroll Cache Stats: <div class='yvp-midrollcache-data'></div></div>"),r.b("\n"+n),r.b("        <div class='yvp-opensimsim-title'>Ads Info</div>"),r.b("\n"+n),r.b("        <br>"),r.b("\n"+n),r.b("        <div class='yvp-adsinfopanel-adsinfo'><div style='text-align: center;'>YVAP disabled!!</div></div>"),r.b("\n"+n),r.b("    </div>"),r.b("\n"+n),r.b("\n"+n),r.b("    <section class='ad-info-table yvp-table'>"),r.b("\n"+n),r.b("        <div>"),r.b("</div>"),r.b("\n"+n),r.b("        <header class='yvp-tablerow'>"),r.b("\n"+n),r.b("            <div class='yvp-tablecell'>position</div>"),r.b("\n"+n),r.b("            <div class='yvp-tablecell'>dur</div>"),r.b("\n"+n),r.b("            <div class='yvp-tablecell'>adPbId</div>"),r.b("\n"+n),r.b("            <div class='yvp-tablecell'>crId</div>"),r.b("\n"+n),r.b("            <div class='yvp-tablecell'>vCrId</div>"),r.b("\n"+n),r.b("            <div class='yvp-tablecell'>bId</div>"),r.b("\n"+n),r.b("            <div class='yvp-tablecell'>State</div>"),r.b("\n"+n),r.b("            <div class='yvp-tablecell'>log</div>"),r.b("\n"+n),r.b("        </header>"),r.b("\n"+n),r.b("        <div class='yvp-tablerow'>"),r.b("\n"+n),r.b("            <div class='adposition yvp-tablecell'></div>"),r.b("\n"+n),r.b("            <div class='addur yvp-tablecell'></div>"),r.b("\n"+n),r.b("            <div class='adPbId yvp-tablecell'></div>"),r.b("\n"+n),r.b("            <div class='crId yvp-tablecell'></div>"),r.b("\n"+n),r.b("            <div class='vCrId yvp-tablecell'></div>"),r.b("\n"+n),r.b("            <div class='bId yvp-tablecell'></div>"),r.b("\n"+n),r.b("            <div class='pbstate yvp-tablecell'></div>"),r.b("\n"+n),r.b("            <div class='yvp-tablecell'><button class='linkbtn'>log</button></div>"),r.b("\n"+n),r.b("        </div>"),r.b("\n"+n),r.b("    </section>"),r.b("\n"+n),r.b("</div>"),r.b("\n"),r.fl()});t.exports={render:function(){return r.render.apply(r,arguments)},r:function(){return r.r.apply(r,arguments)},ri:function(){return r.ri.apply(r,arguments)}}},{"hogan.js/lib/template":156}],63:[function(e,t,n){"use strict";function r(e,t,n,r){var a=this;a._model=e,a._eventBus=t,a._profiler=n,a._diagnostics=r,a._yvapEnabled=null!==r,a._eventBus.subscribe(i.YVAP_MIDROLL_CACHE_UPDATE,a._updateMidrollCacheStats,a)}t.exports=r;var i=e("../event"),a=e("../util"),o=(e("../../../lib"),e("../tap")),s=e("./ads-info-panel.html"),l=e("../strings");r.prototype.create=function(){var e=this;e._node=a.render(s,{version:e._model.version,spaceId:e._model.baseConfig.pageSpaceId,yvap_accountId:e._model.YVAP.accountId,yvap_playContext:e._model.YVAP.playContext,strings:l.i18n}),e._midrollCacheStats=e._node.querySelector(".yvp-midrollcache-data"),e._adsInfoArea=e._node.querySelector(".yvp-adsinfopanel-adsinfo");var t=e._adInfoTableTemplate=e._node.removeChild(e._node.querySelector(".ad-info-table"));return e._adInfoRowTemplate=t.removeChild(t.querySelector("div.yvp-tablerow")),e._closeTap=new o(e._node.querySelector(".yvp-opensimsim-close-btn"),function(t){t.stopPropagation(),e.close()}),e._tableTap=new o(e._adsInfoArea,function(t){if("linkbtn"===t.eventSource.className)try{e._logAdDiagnosticsById(t.eventSource.parentNode.parentNode.customData.playbackId)}catch(n){}}),e._node},r.prototype.show=function(){var e=this;e._node.style.display="block",e._yvapEnabled&&(e._updateBasicMediaItemInfo(),e._drawAdInfoTables(),e._registerAdDataUpdateCallbacks())},r.prototype.isOpen=function(){var e=this;return"none"!==e._node.style.display},r.prototype.close=function(){var e=this;e._node.style.display="none",e._yvapEnabled&&e._unregisterAdDataUpdateCallbacks()},r.prototype._registerAdDataUpdateCallbacks=function(){var e=this;e._diagnostics.registerAdStateChangeListener(e._onAdStateChange.bind(e)),e._diagnostics.registerAdDataAvailableListener(e._onAdDataAvailable.bind(e))},r.prototype._unregisterAdDataUpdateCallbacks=function(){var e=this;e._diagnostics.registerAdStateChangeListener(null),e._diagnostics.registerAdDataAvailableListener(null)},r.prototype._onAdStateChange=function(e,t,n){var r=this,i=r._adsInfoArea.querySelector("[apbid="+e+"]");r._updateAdStateInRow(i,t,n)},r.prototype._onAdDataAvailable=function(e){var t=this,n=t._adsInfoArea.querySelector("[relvideo="+e.clipId+"]");t._insertRow(n,e)},r.prototype._updateMidrollCacheStats=function(e){function t(e,t){return"<div class='floated-item'>"+e+":<span> "+t+"</span></div>"}var n=this,r="",i={retryCount:"retries",targetAdsDuration:"target",totalUniqueAds:"num_uniq",totalDuplicatedAds:"num_dup",totalNoAds:"num_noad",uniqueAdsDuration:"uniq_dur"};Object.keys(e).forEach(function(n){var a=i[n]||n;r+=t(a,e[n])}),n._midrollCacheStats.innerHTML=r},r.prototype._updateBasicMediaItemInfo=function(){var e=this,t=e._model.playlist.getCurrentItem(),n=e._node.querySelector(".yvp-opensimsim-uuid");n.innerHTML="UUID : "+(t?t.id:""),n=e._node.querySelector(".yvp-opensimsim-renderertype"),n.innerHTML="Renderer Type : "+(t?t.rendererType:""),n=e._node.querySelector(".yvp-videoSpaceId"),n.innerHTML="Video SpaceID : "+(t?t.metrics.pageSpaceId:""),n=e._node.querySelector(".yvp-sessionId"),n.innerHTML="SessionId : "+(t?t.videoSession:"none")},r.prototype._updateAdStateInRow=function(e,t){var n=e,r=a.classList(n);"playing"===t?r.add("currad"):r.contains("currad")&&r.remove("currad"),n=e.querySelector(".pbstate"),r=a.classList(n),r.remove("st-"+e.customData.adstate),e.customData.adstate=t,r.add("st-"+t),n.innerHTML=t},r.prototype._drawAdInfoTables=function(){var e=this;e._adsInfoArea.innerHTML="";var t=e._diagnostics.getAllAdDiagnostics();Object.keys(t).forEach(function(n){e._drawAdDiagnosticsTable(t[n],n)})},r.prototype._drawAdDiagnosticsTable=function(e,t){var n=this,r=n._adInfoTableTemplate.cloneNode(!0);r.children[0].innerHTML="<strong>uuid: </strong>"+t,Object.keys(e).forEach(function(t){var i=e[t];n._insertRow(r,i)}),r.setAttribute("relvideo",t),n._adsInfoArea.appendChild(r)},r.prototype._insertRow=function(e,t){var n=this;if(e&&t){var r=n._adInfoRowTemplate.cloneNode(!0);if(t){var i=t.playbackId,o=t.clipId;r.setAttribute("apbid",i),r.customData={playbackId:i,uuid:o,adstate:t.adstate},r.querySelector(".adPbId").innerHTML=i,r.querySelector(".addur").innerHTML=t.duration,r.querySelector(".adposition").innerHTML=t.position,r.querySelector(".crId").innerHTML=t.creativeId,r.querySelector(".vCrId").innerHTML=t.vastCreativeId,r.querySelector(".bId").innerHTML=t.bookingId,n._updateAdStateInRow(r,t.adstate,t.adstateData),e.rowCount=void 0===e.rowCount?0:e.rowCount+1,e.rowCount%2!==0&&a.classList(r).add("yvp-altrow")}else a.classList(r).add("emptyrow");e.appendChild(r)}},r.prototype._logAdDiagnosticsById=function(e){var t=this,n=t._diagnostics.getAdDiagnosticsById(e),r=console;r.log.apply(r,["[ad diagnostics]",n])},r.prototype.destroy=function(){var e=this;e._closeTap&&e._closeTap.destroy(),e._tableTap&&e._tableTap.destroy()}},{"../../../lib":"bRhrlU","../event":"YJm+dH","../strings":"XwKsC9","../tap":"dsc79Q","../util":"jJTEqU","./ads-info-panel.html":62}],64:[function(e,t,n){var r=new(e("hogan.js/lib/template").Template)(function(e,t,n){var r=this;return r.b(n=n||""),r.b("<div class='yvp-ads-overlay'></div>"),r.b("\n"),r.fl()});t.exports={render:function(){return r.render.apply(r,arguments)},r:function(){return r.r.apply(r,arguments)},ri:function(){return r.ri.apply(r,arguments)}}},{"hogan.js/lib/template":156}],65:[function(e,t,n){"use strict";function r(e,t){var n=this;n._eventBus=e,n._view=t,n._controlsBottomBar=n._view.rootElem.querySelector(".yvp-bottom-bar"),n._controlsSlider=n._view.rootElem.querySelector(".yvp-slider"),n._eventBus.subscribe(a.CONTROLS_BAR_CHANGE,n._adjustOverlayHeight,n)}t.exports=r;var i=e("../util"),a=e("../event"),o=e("./ads-overlay.html");r.prototype.create=function(){var e=this;return e.node=i.render(o),e.node},r.prototype._adjustOverlayHeight=function(e){var t,n=this,r=n._controlsBottomBar.offsetHeight,i=n._view.rootElem.offsetHeight;t=e?i-r:i,n.node.style.height=t+"px"},r.prototype.destroy=function(){var e=this;e.node=null}},{"../event":"YJm+dH","../util":"jJTEqU","./ads-overlay.html":64}],66:[function(e,t,n){var r=new(e("hogan.js/lib/template").Template)(function(e,t,n){var r=this;return r.b(n=n||""),r.b("<div class='yvp-agegate-container "),r.s(r.f("isBirthday",e,t,1),e,t,0,49,69,"{{ }}")&&(r.rs(e,t,function(e,t,n){n.b("yvp-agegate-birthday")}),e.pop()),r.b("'>"),r.b("\n"+n),r.b("    <img class='yvp-agegate-back-image' src='"),r.b(r.v(r.f("imageSrc",e,t,0))),r.b("' width='"),r.b(r.v(r.f("width",e,t,0))),r.b("' height='"),r.b(r.v(r.f("height",e,t,0))),r.b("'>"),r.b("\n"+n),r.b("    <div class='yvp-agegate-info-wrapper'>"),r.b("\n"+n),r.b("        <h3 class='yvp-agegate-title'>"),r.b(r.v(r.f("title",e,t,0))),r.b("</h3>"),r.b("\n"+n),r.b("        <p class='yvp-agegate-desc'>"),r.b(r.v(r.f("desc",e,t,0))),r.b("</p>"),r.b("\n"+n),r.b("        <div class='yvp-agegate-action-wrapper'>"),r.b("\n"+n),r.s(r.f("isBirthday",e,t,1),e,t,0,406,830,"{{ }}")&&(r.rs(e,t,function(e,t,r){r.b("                <p class='yvp-agegate-input'>"),r.b("\n"+n),r.b("                    <input type='text' name='month' class='yvp-agegate-date-input' maxlength='2' placeholder='MM'>"),r.b("\n"+n),r.b("                    <input type='text' name='day' class='yvp-agegate-date-input' maxlength='2' placeholder='DD'>"),r.b("\n"+n),r.b("                    <input type='text' name='year' class='yvp-agegate-date-input' maxlength='4' placeholder='YYYY'>"),r.b("\n"+n),r.b("                </p>"),r.b("\n")}),e.pop()),r.s(r.f("isBlock",e,t,1),e,t,1,0,0,"")||(r.b("                <button class='yvp-agegate-btn'>"),r.b(r.v(r.f("button",e,t,0))),r.b("</button>"),r.b("\n")),r.b("        </div>"),r.b("\n"+n),r.b("    </div>"),r.b("\n"+n),r.b("</div>"),r.b("\n"),r.fl()});t.exports={render:function(){return r.render.apply(r,arguments)},r:function(){return r.r.apply(r,arguments)},ri:function(){return r.ri.apply(r,arguments)}}},{"hogan.js/lib/template":156}],67:[function(e,t,n){"use strict";function r(e,t){var n=this;n._eventBus=e,n._controller=t}t.exports=r;var i=e("../util"),a=e("../tap"),o=e("./age-gate-screen.html");r.prototype.create=function(e){var t=this;if(t.node=i.render(o,e),t._ageGateObj=e,t._actionButton=t.node.querySelector(".yvp-agegate-btn"),t._ageGateObj.isBirthday){var n=t.node.querySelectorAll(".yvp-agegate-date-input");t._inputMonth="month"===n[0].name?n[0]:null,t._inputDay="day"===n[1].name?n[1]:null,t._inputYear="year"===n[2].name?n[2]:null}return t._bindUI(),t.node},r.prototype._bindUI=function(){var e=this;e._ageGateObj.isBlock||(e._actionButtonTap=new a(e._actionButton),e._onButtonTap=function(t){t.stopPropagation();var n=e._ageGateObj.isBirthday&&{inputMonth:e._inputMonth,inputDay:e._inputDay,inputYear:e._inputYear};e._controller.handleClickEvent(t,n)},e._actionButton.addEventListener("tap",e._onButtonTap)),e._ageGateObj.isBirthday&&(e._onKeyDown=function(t){e._controller.filterNonDigitInput(t)},e._inputMonth.addEventListener("keydown",e._onKeyDown),e._inputDay.addEventListener("keydown",e._onKeyDown),e._inputYear.addEventListener("keydown",e._onKeyDown))},r.prototype._unBindUI=function(){var e=this;e._ageGateObj.isBlock||(e._actionButtonTap.destroy(),e._actionButton.removeEventListener("tap",e._onButtonTap)),e._ageGateObj.isBirthday&&(e._inputMonth.removeEventListener("keydown",e._onKeyDown),e._inputDay.removeEventListener("keydown",e._onKeyDown),e._inputYear.removeEventListener("keydown",e._onKeyDown))},r.prototype.getNode=function(){var e=this;return e.node},r.prototype.destroy=function(){var e=this;e._unBindUI(),e.node=null}},{"../tap":"dsc79Q","../util":"jJTEqU","./age-gate-screen.html":66}],68:[function(e,t,n){var r=new(e("hogan.js/lib/template").Template)(function(e,t,n){var r=this;return r.b(n=n||""),r.b("<div tabindex='0' class='yvp-content yvp-hide-controls' aria-label='Yahoo Video Player'>"),r.b("\n"+n),r.b("    <div class='yvp-main' tabindex='0'></div>"),r.b("\n"+n),r.b("    <div class='yvp-docked-meta'>"),r.b("\n"+n),r.b('        <div class="yvp-docked-title"></div>'),r.b("\n"+n),r.b('        <div class="yvp-docked-provider"></div>'),r.b("\n"+n),r.b("    </div>"),r.b("\n"+n),r.b("</div>"),r.b("\n"),r.fl()});t.exports={render:function(){return r.render.apply(r,arguments)},r:function(){return r.r.apply(r,arguments)},ri:function(){return r.ri.apply(r,arguments)}}},{"hogan.js/lib/template":156}],69:[function(e,t,n){var r=new(e("hogan.js/lib/template").Template)(function(e,t,n){var r=this;return r.b(n=n||""),r.b("<div class='yvp-cc-options-more close'>"),r.b("\n"+n),r.b("    <div class='yvp-cc-back'>"),r.b("\n"+n),r.b("         <div class='yvp-settings-caret-icon left'></div>"),r.b("\n"+n),r.b("         <div class='yvp-cc-back-header'>"),r.b(r.v(r.d("strings.BACK",e,t,0))),r.b("</div>"),r.b("\n"+n),r.b("    </div>"),r.b("\n"+n),r.b('    <div class="yvp-tab-container">'),r.b("\n"+n),r.b('        <ul class="yvp-tabs-nav">'),r.b("\n"+n),r.b('            <li class="yvp-tab tab-selected">'),r.b(r.v(r.d("strings.PRESETS",e,t,0))),r.b("</li>"),r.b("\n"+n),r.b('            <li class="yvp-tab">'),r.b(r.v(r.d("strings.TEXT",e,t,0))),r.b("</li>"),r.b("\n"+n),r.b('            <li class="yvp-tab">'),r.b(r.v(r.d("strings.BACKGROUND",e,t,0))),r.b("</li>"),r.b("\n"+n),r.b('            <li class="yvp-tab">'),r.b(r.v(r.d("strings.EFFECTS",e,t,0))),r.b("</li>"),r.b("\n"+n),r.b("        </ul>"),r.b("\n"+n),r.b('        <div class="yvp-tabs-content">'),r.b("\n"+n),r.b('            <div class="yvp-tabcontent preset-container tab-show">'),r.b("\n"+n),r.b('                <div class="yvp-cc-preset">Aa</div>'),r.b("\n"+n),r.b('                <div class="yvp-cc-preset">Aa</div>'),r.b("\n"+n),r.b('                <div class="yvp-cc-preset">Aa</div>'),r.b("\n"+n),r.b('                <div class="yvp-cc-preset">Aa</div>'),r.b("\n"+n),r.b('                <div class="yvp-cc-preset">Aa</div>'),r.b("\n"+n),r.b('                <div class="yvp-cc-preset">Aa</div>'),r.b("\n"+n),r.b('                <div class="yvp-cc-preset">Aa</div>'),r.b("\n"+n),r.b('                <div class="yvp-cc-preset">Aa</div>'),r.b("\n"+n),r.b("            </div>"),r.b("\n"+n),r.b('            <div class="yvp-tabcontent font-list">'),r.b("\n"+n),r.b('                <div class="yvp-colorpicker fontcolorpicker"></div>'),r.b("\n"+n),r.b("            </div>"),r.b("\n"+n),r.b('            <div class="yvp-tabcontent bg-opacity-list">'),r.b("\n"+n),r.b('                <div class="yvp-colorpicker bgcolorpicker"></div>'),r.b("\n"+n),r.b("            </div>"),r.b("\n"+n),r.b('            <div class="yvp-tabcontent effects">'),r.b("\n"+n),r.b('                <div class="yvp-effect none">'),r.b("\n"+n),r.b("                    <p>Aa</p>"),r.b("\n"+n),r.b("                    <div class='yvp-cc-effect-header'>"),r.b(r.v(r.d("strings.PLAIN",e,t,0))),r.b("</div>"),r.b("\n"+n),r.b("                </div>"),r.b("\n"+n),r.b('                <div class="yvp-effect dropshadow">'),r.b("\n"+n),r.b("                    <p>Aa</p>"),r.b("\n"+n),r.b("                    <div class='yvp-cc-effect-header'>"),r.b(r.v(r.d("strings.SHADOW",e,t,0))),r.b("</div>"),r.b("\n"+n),r.b("                </div>"),r.b("\n"+n),r.b('                <div class="yvp-effect raised">'),r.b("\n"+n),r.b("                    <p>Aa</p>"),r.b("\n"+n),r.b("                    <div class='yvp-cc-effect-header'>"),r.b(r.v(r.d("strings.RAISED",e,t,0))),r.b("</div>"),r.b("\n"+n),r.b("                </div>"),r.b("\n"+n),r.b('                <div class="yvp-effect depressed">'),r.b("\n"+n),r.b("                    <p>Aa</p>"),r.b("\n"+n),r.b("                    <div class='yvp-cc-effect-header'>"),r.b(r.v(r.d("strings.LOWERED",e,t,0))),r.b("</div>"),r.b("\n"+n),r.b("                </div>"),r.b("\n"+n),r.b('                <div class="yvp-effect uniform">'),r.b("\n"+n),r.b("                    <p>Aa</p>"),r.b("\n"+n),r.b("                    <div class='yvp-cc-effect-header'>"),r.b(r.v(r.d("strings.OUTLINE",e,t,0))),r.b("</div>"),r.b("\n"+n),r.b("                </div>"),r.b("\n"+n),r.b("            </div>"),r.b("\n"+n),r.b("        </div>"),r.b("\n"+n),r.b("    </div>"),r.b("\n"+n),r.b('    <div class="yvp-cc-style-preview">'),r.b("\n"+n),r.b('        <div class="yvp-cc-options-message">'),r.b(r.v(r.d("strings.CC_PREVIEW_MESSAGE",e,t,0))),r.b("</div>"),r.b("\n"+n),r.b("    </div>"),r.b("\n"+n),r.b("</div>"),r.b("\n"),r.fl()});t.exports={render:function(){return r.render.apply(r,arguments)},r:function(){return r.r.apply(r,arguments)},ri:function(){return r.ri.apply(r,arguments)}}},{"hogan.js/lib/template":156}],70:[function(e,t,n){var r=new(e("hogan.js/lib/template").Template)(function(e,t,n){var r=this;return r.b(n=n||""),r.b("<div class='yvp-cc-options-main close'>"),r.b("\n"+n),r.b("    <div class='yvp-cc-back-to-settings'>"),r.b("\n"+n),r.b("        <div class='yvp-settings-caret-icon left'></div>"),r.b("\n"+n),r.b("        <div class='yvp-back-to-settings'>"),r.b(r.v(r.d("strings.BACK",e,t,0))),r.b("</div>"),r.b("\n"+n),r.b("    </div>"),r.b("\n"+n),r.b("\n"+n),r.b("    <div class='yvp-cc-box'>"),r.b("\n"+n),r.b("        <div class='yvp-cc-header yvp-cc-item'>"),r.b(r.v(r.d("strings.CC",e,t,0))),r.b("</div>"),r.b("\n"+n),r.b("        <div class='yvp-cc-toggle'>"),r.b("\n"+n),r.b("            <div data-cc-state='on' class='yvp-settings-item yvp-cc-on'>"),r.b(r.v(r.d("strings.ON",e,t,0))),r.b("</div>"),r.b("\n"+n),r.b("            <div data-cc-state='off' class='yvp-settings-item yvp-cc-off'>"),r.b(r.v(r.d("strings.OFF",e,t,0))),r.b("</div>"),r.b("\n"+n),r.b("        </div>"),r.b("\n"+n),r.b("        <div class='yvp-cc-header yvp-cc-item'>"),r.b(r.v(r.d("strings.LANGUAGE",e,t,0))),r.b("</div>"),r.b("\n"+n),r.b("        <div class='yvp-cc-language yvp-cc-item'></div>"),r.b("\n"+n),r.b("    </div>"),r.b("\n"+n),r.b("\n"+n),r.b("    <div class='yvp-cc-divider'></div>"),r.b("\n"+n),r.b("    <div class='yvp-cc-box'>"),r.b("\n"+n),r.b("        <div class='yvp-cc-position yvp-cc-item'>"),r.b("\n"+n),r.b("            <div class='yvp-cc-header yvp-cc-item'>"),r.b(r.v(r.d("strings.POSITION",e,t,0))),r.b("</div>"),r.b("\n"+n),r.b("            <div class='yvp-cc-pos-wrapper'>"),r.b("\n"+n),r.b("                <ul class='yvp-cc-pos-selection'></ul>"),r.b("\n"+n),r.b("            </div>"),r.b("\n"+n),r.b("        </div>"),r.b("\n"+n),r.b("        <div class='yvp-cc-size yvp-cc-item'>"),r.b("\n"+n),r.b("            <div class='yvp-cc-header yvp-cc-item'>"),r.b(r.v(r.d("strings.CC_TYPE_SIZE",e,t,0))),r.b("</div>"),r.b("\n"+n),r.b("            <div class='yvp-cc-size-selector'>"),r.b("\n"+n),r.b("                <div class='yvp-cc-size-indicators'>"),r.b("\n"+n),r.b("                    <div class='yvp-cc-indicator yvp-cc-indicator-0' data-size-value='0'>A</div>"),r.b("\n"+n),r.b("                    <div class='yvp-cc-indicator yvp-cc-indicator-25' data-size-value='25'>A</div>"),r.b("\n"+n),r.b("                    <div class='yvp-cc-indicator yvp-cc-indicator-50' data-size-value='50'>A</div>"),r.b("\n"+n),r.b("                    <div class='yvp-cc-indicator yvp-cc-indicator-75' data-size-value='75'>A</div>"),r.b("\n"+n),r.b("                    <div class='yvp-cc-indicator yvp-cc-indicator-100' data-size-value='100'>A</div>"),r.b("\n"+n),r.b("                </div>"),r.b("\n"+n),r.b("            </div>"),r.b("\n"+n),r.b("        </div>"),r.b("\n"+n),r.b("    </div>"),r.b("\n"+n),r.b("\n"+n),r.b("    <div class='yvp-cc-divider'></div>"),r.b("\n"+n),r.b("    <div class='yvp-cc-box'>"),r.b("\n"+n),r.b("        <div class='yvp-cc-style yvp-cc-item'>"),r.b("\n"+n),r.b("            <div class='yvp-cc-style-preview'>Aa</div>"),r.b("\n"+n),r.b("            <div class='yvp-cc-style-more'>"),r.b("\n"+n),r.b("                <div class='yvp-cc-item'>"),r.b(r.v(r.d("strings.STYLE_OPTIONS",e,t,0))),r.b("</div>"),r.b("\n"+n),r.b("                <div class='yvp-settings-caret-icon right'></div>"),r.b("\n"+n),r.b("            </div>"),r.b("\n"+n),r.b("        </div>"),r.b("\n"+n),r.b("        "),r.b("\n"+n),r.b("        <div class='yvp-cc-feedback-link yvp-cc-item'>"),r.b("\n"+n),r.b("            <a href='http://info.yahoo.com/legal/us/yahoo/cc/en-us/' target='_blank'>"),r.b("\n"+n),r.b("                <div class='yvp-cc-item'>"),r.b(r.v(r.d("strings.SUBMIT_FEEDBACK",e,t,0))),r.b("</div>"),r.b("\n"+n),r.b("            </a>"),r.b("\n"+n),r.b("        </div>"),r.b("\n"+n),r.b("        <div class='yvp-cc-preview'>"),r.b("\n"+n),r.b("            <div class='yvp-cc-preview-message'>"),r.b(r.v(r.d("strings.CC_PREVIEW_MESSAGE",e,t,0))),r.b("</div>"),r.b("\n"+n),r.b("        </div>"),r.b("\n"+n),r.b("    </div>"),r.b("\n"+n),r.b("</div>"),r.b("\n"),r.fl()});t.exports={render:function(){return r.render.apply(r,arguments)},r:function(){return r.r.apply(r,arguments)},ri:function(){return r.ri.apply(r,arguments)}}},{"hogan.js/lib/template":156}],71:[function(e,t,n){"use strict";function r(e,t){var n=this;n._eventBus=e,n._model=t,n._eventBus.subscribe(p.CC.FONT_SIZE_CHANGE,n._onSizeChange,n),n._eventBus.subscribe(p.CC.FETCHED,n._populateUI,n),n._eventBus.subscribe(p.CC.LANGUAGE_CHANGE,n._syncLanguageMenu,n),n._eventBus.subscribe(p.CC.TOGGLE,n._syncToggleSelection,n),n._eventBus.subscribe(p.CC.USER_STYLE_PREFERENCES_CHANGE,n._syncCCPreferences,n),n._eventBus.subscribe(p.CC.FONT_FACE_CHANGE,n._applyFontFaceChange,n),n._eventBus.subscribe(p.CC.BG_OPACITY_CHANGE,n._applyBgOpacityChange,n),n._eventBus.subscribe(p.PLAYBACK_STARTED,n._syncCCPreferences,n)}t.exports=r;var i=(e("fs"),e("insert-css")),a=e("../states"),o=e("../strings"),s=e("../util"),l=e("../../../lib"),d=e("../tap"),c=e("../cc"),p=e("../event"),u=(e("../views/uiwidgets/tooltip"),e("../views/uiwidgets/drop-down-menu")),_=e("../views/uiwidgets/slider"),m=e("./cc-options.html"),v=e("./cc-more-options.html"),y="data-cc-state",f=["on","off"],g=["bottom","top"],b={0:16,25:20,50:24,75:28,100:32},h="yvp-settings-activated",E="yvp-cc-preview-activated",T="yvp-cc-preview-",A="top",S="on",I={Font:"font",Background:"bg"};i('.cc-element{position:absolute;bottom:16%;width:95%;left:2.5%;text-align:center;z-index:6;-webkit-transition-property:bottom;-webkit-transition-duration:.5s;-webkit-transition-delay:0s;transition-property:bottom;transition-duration:.5s;transition-delay:0s;}.cc-element.bottom.float{bottom:10%}.cc-element.top.float{top:10%;bottom:initial}.cc-element.top{top:5%;bottom:initial}.cc-element.bottom{bottom:16%}.yvp-cc-options-main,.yvp-cc-options-more{min-width:496px;max-height:212px;color:#fff;}.yvp-cc-options-main.open,.yvp-cc-options-more.open{display:block}.yvp-cc-options-main.close,.yvp-cc-options-more.close{display:none}.yvp-cc-options-main .yvp-ddm-wrapper,.yvp-cc-options-more .yvp-ddm-wrapper{margin-left:0;padding:0;width:150px;color:#fff;display:inline-block;position:relative;z-index:1;vertical-align:middle}.yvp-cc-options-main .yvp-ddm-availability,.yvp-cc-options-more .yvp-ddm-availability{display:none;background-color:#3db224;width:6px;height:6px;border-radius:8px;position:relative;top:-9px;left:3px;}.yvp-cc-options-main .yvp-ddm-availability.not-available,.yvp-cc-options-more .yvp-ddm-availability.not-available{background-color:#ccc}.yvp-cc-options-main .yvp-ddm-selected,.yvp-cc-options-more .yvp-ddm-selected{text-align:left;padding-left:5px;overflow:hidden;text-overflow:ellipsis;height:20px;line-height:20px}.yvp-cc-options-main .yvp-ddm-selected-wrapper,.yvp-cc-options-more .yvp-ddm-selected-wrapper{width:100%;border:1px solid #5f5f5f;border-radius:3px;}.yvp-cc-options-main .yvp-ddm-selected-wrapper:hover,.yvp-cc-options-more .yvp-ddm-selected-wrapper:hover{cursor:pointer;}.yvp-cc-options-main .yvp-ddm-selected-wrapper:hover .yvp-ddm-chevron,.yvp-cc-options-more .yvp-ddm-selected-wrapper:hover .yvp-ddm-chevron{opacity:.9}.yvp-cc-options-main .yvp-ddm-chevron,.yvp-cc-options-more .yvp-ddm-chevron{background-image:url("data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiIHN0YW5kYWxvbmU9Im5vIj8+Cjxzdmcgd2lkdGg9IjI0cHgiIGhlaWdodD0iMjRweCIgdmlld0JveD0iMCAwIDI0IDI0IiB2ZXJzaW9uPSIxLjEiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgeG1sbnM6eGxpbms9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmsiIHhtbG5zOnNrZXRjaD0iaHR0cDovL3d3dy5ib2hlbWlhbmNvZGluZy5jb20vc2tldGNoL25zIj4KICAgIDxnIGlkPSJQYWdlLTEiIHN0cm9rZT0ibm9uZSIgc3Ryb2tlLXdpZHRoPSIxIiBmaWxsPSJub25lIiBmaWxsLXJ1bGU9ImV2ZW5vZGQiIHNrZXRjaDp0eXBlPSJNU1BhZ2UiPgogICAgICAgIDxnIGlkPSJjY19jYXJyb3QtIiBza2V0Y2g6dHlwZT0iTVNBcnRib2FyZEdyb3VwIiBmaWxsPSIjRkZGRkZGIj4KICAgICAgICAgICAgPHBhdGggZD0iTTEyLjcyNSw3LjQyMTgzNzc3IEw5LDExLjk5ODgzNzggTDEyLjcyNSwxNi41NzQ4Mzc4IEMxMi45NSwxNi44NTI4Mzc4IDEzLjI4NywxNi45OTc4Mzc4IDEzLjYyNiwxNi45OTc4Mzc4IEMxMy44NzMsMTYuOTk3ODM3OCAxNC4xMjIsMTYuOTIwODM3OCAxNC4zMzEsMTYuNzYxODM3OCBDMTQuODI4LDE2LjM4NjgzNzggMTQuOTE2LDE1LjY5MjgzNzggMTQuNTI1LDE1LjIxMzgzNzggTDExLjkwOSwxMS45OTg4Mzc4IEwxNC41MjUsOC43ODM4Mzc3NyBDMTQuOTE2LDguMzA0ODM3NzcgMTQuODI4LDcuNjEwODM3NzcgMTQuMzMxLDcuMjM0ODM3NzcgQzEzLjgzNSw2Ljg1ODgzNzc3IDEzLjExNSw2Ljk0MzgzNzc3IDEyLjcyNSw3LjQyMTgzNzc3IFoiIGlkPSJGaWxsLTMiIHNrZXRjaDp0eXBlPSJNU1NoYXBlR3JvdXAiIHRyYW5zZm9ybT0idHJhbnNsYXRlKDEyLjAwMDAwMCwgMTIuMDAwMDAwKSByb3RhdGUoLTkwLjAwMDAwMCkgdHJhbnNsYXRlKC0xMi4wMDAwMDAsIC0xMi4wMDAwMDApICI+PC9wYXRoPgogICAgICAgIDwvZz4KICAgIDwvZz4KPC9zdmc+Cg==");position:absolute;padding-left:11px;padding-right:7px;top:0;height:19px;width:5px;right:1.5%;opacity:.7;}.yvp-cc-options-main .yvp-ddm-list,.yvp-cc-options-more .yvp-ddm-list{position:absolute;background-color:rgba(0,0,0,0.8);max-height:120px;display:none;padding:0;min-width:100%;overflow-x:hidden;overflow-y:auto;border:1px solid rgba(255,255,255,0.2);border-top:none;box-sizing:border-box;width:101%;}.yvp-cc-options-main .yvp-ddm-list.open,.yvp-cc-options-more .yvp-ddm-list.open{cursor:pointer;display:block}.yvp-cc-options-main .yvp-ddm-item,.yvp-cc-options-more .yvp-ddm-item{text-align:left;padding:7px 5px;overflow:hidden;text-overflow:ellipsis;border-bottom:1px solid rgba(255,255,255,0.1);background:rgba(0,0,0,0);}.yvp-cc-options-main .yvp-ddm-item:first-child,.yvp-cc-options-more .yvp-ddm-item:first-child{padding-top:9px}.yvp-cc-options-main .yvp-ddm-item:last-child,.yvp-cc-options-more .yvp-ddm-item:last-child{border-bottom:none}.yvp-cc-options-main .yvp-ddm-item:hover,.yvp-cc-options-more .yvp-ddm-item:hover{cursor:pointer;background:rgba(0,0,0,0.4)}.yvp-cc-options-main .yvp-cc-header,.yvp-cc-options-more .yvp-cc-header{color:rgba(255,255,255,0.6);font-weight:normal}.yvp-cc-options-more .yvp-tab-container{padding:0;width:100%;border:0;position:relative;margin-top:16px;max-height:100px;}.yvp-cc-options-more .yvp-tab-container .yvp-tabs-nav{width:100%;padding-bottom:0;margin-bottom:0;height:32px;display:block;background-color:transparent;text-align:center;overflow:hidden;box-sizing:border-box;}.yvp-cc-options-more .yvp-tab-container .yvp-tabs-nav .yvp-tab{display:block;float:left;width:25%;color:rgba(255,255,255,0.6);margin:0;padding:0;border-bottom:1px solid rgba(255,255,255,0.2);background-color:transparent;box-sizing:border-box;text-transform:capitalize;cursor:pointer;height:32px;line-height:24px;}.yvp-cc-options-more .yvp-tab-container .yvp-tabs-nav .yvp-tab:hover{color:rgba(255,255,255,0.8);border-bottom:3px solid rgba(255,255,255,0.3)}.yvp-cc-options-more .yvp-tab-container .yvp-tabs-nav .yvp-tab:last-child{border-right:none}.yvp-cc-options-more .yvp-tab-container .yvp-tabs-nav .yvp-tab.tab-selected{border-bottom:3px solid #0087ff;color:#fff}.yvp-cc-options-more .yvp-tab-container .yvp-tabs-content .yvp-tabcontent{display:none;background-color:transparent;padding:16px 0;height:40px;position:relative;}.yvp-cc-options-more .yvp-tab-container .yvp-tabs-content .yvp-tabcontent.tab-show{display:block}.yvp-cc-options-more .yvp-tab-container .yvp-tabs-content .yvp-ddm-wrapper{display:inline-block;width:150px;margin:0 0 43px 75px;border-radius:3px}.yvp-cc-options-more .yvp-tab-container .yvp-tabs-content .yvp-ddm-availability{display:none}.yvp-cc-options-more .yvp-tab-container .yvp-tabs-content .yvp-ddm-list{width:auto;max-height:108px}.yvp-cc-options-more .yvp-tab-container .yvp-tabs-content .yvp-ddm-selected-wrapper{width:auto;}.yvp-cc-options-more .yvp-tab-container .yvp-tabs-content .yvp-ddm-selected-wrapper.hide{display:none}.yvp-cc-options-more .yvp-colorpicker{margin-left:auto;margin-right:auto;padding:0;width:100%;margin-left:-4px;margin-top:1px;display:inline-block;white-space:normal;}.yvp-cc-options-more .yvp-colorpicker .color-option{border:1px solid rgba(255,255,255,0.2);border-radius:2px;width:16px;height:16px;display:inline-block;margin:3px;cursor:pointer;}.yvp-cc-options-more .yvp-colorpicker .color-option:hover{border:1px solid rgba(255,255,255,0.6)}.yvp-cc-options-more .yvp-colorpicker .color-option.nocolor::before{content:" ";position:absolute;border-bottom:1px solid #f00;width:26px;transform:rotate(135deg) translate(9px,-3px);-ms-transform:rotate(135deg) translate(9px,-3px);}.yvp-cc-options-more .yvp-colorpicker .color-option.color-selected{border:1px solid #fff}.yvp-cc-options-more .fontcolorpicker{display:inline-block;width:100px;margin-left:65px}.yvp-cc-options-more .bgcolorpicker{display:inline-block;width:144px;margin-left:65px}.yvp-cc-options-more .effects{margin-left:75px}.yvp-cc-options-more .yvp-effect{display:inline-block;position:relative;width:54px;height:32px;font-size:18px;line-height:30px;background-color:rgba(102,102,102,0.5);border:1px solid rgba(255,255,255,0.2);border-radius:4px;margin-left:2%;box-sizing:border-box;background-repeat:no-repeat;background-position:center;text-align:center;cursor:pointer;}.yvp-cc-options-more .yvp-effect:hover{border:1px solid rgba(255,255,255,0.6)}.yvp-cc-options-more .yvp-effect.none{margin-left:5px}.yvp-cc-options-more .yvp-effect.dropshadow{text-shadow:2px 1px 1px #000}.yvp-cc-options-more .yvp-effect.raised{text-shadow:3px 3px 4px rgba(0,0,0,0.75)}.yvp-cc-options-more .yvp-effect.depressed{text-shadow:0 -4px 4px rgba(0,0,0,0.54)}.yvp-cc-options-more .yvp-effect.uniform{text-shadow:-2px -2px 0 #000,-2px 2px 0 #000,-2px 0 0 #000,2px -2px 0 #000,2px 2px 0 #000,2px 0 0 #000,0 -2px 0 #000,0 2px 0 #000}.yvp-cc-options-more .yvp-effect.effect-selected{border:1px solid #fff;}.yvp-cc-options-more .yvp-effect.effect-selected .yvp-cc-effect-header{color:#fff}.yvp-cc-options-more .yvp-effect .yvp-cc-effect-header{font-size:11px;text-transform:capitalize;color:rgba(255,255,255,0.6);text-shadow:none}.yvp-cc-options-more .preset-container{width:100%;height:100px;position:relative;max-height:100px;display:inline-block}.yvp-cc-options-more .yvp-cc-preset{display:inline-block;width:53px;height:32px;line-height:30px;border:1px solid rgba(255,255,255,0.2);border-radius:3px;font-size:1.3em;box-sizing:border-box;text-align:center;margin:3px;cursor:pointer;}.yvp-cc-options-more .yvp-cc-preset:hover{border:1px solid rgba(255,255,255,0.6);margin:3px}.yvp-cc-options-more .preset-separator{clear:both;width:100%;height:9%}.yvp-cc-options-more .yvp-cc-back{max-width:65px;background-color:transparent;color:inherit;font-size:11px;position:relative;outline:none;cursor:pointer}.yvp-cc-options-more .yvp-cc-back-header{display:inline-block;margin-left:3px;color:rgba(255,255,255,0.6);}.yvp-cc-options-more .yvp-cc-back-header:hover{color:#fff}.yvp-cc-options-more .yvp-cc-style-preview{margin:40px 0 20px 85px;display:block;position:relative;font-size:20px;line-height:20px;max-width:260px;}.yvp-cc-options-more .yvp-cc-style-preview .yvp-cc-options-message{margin-left:18px}.yvp-cc-options-main .yvp-cc-back-to-settings{max-width:65px}.yvp-cc-options-main .yvp-back-to-settings{display:inline-block;cursor:pointer;margin-left:3px;color:rgba(255,255,255,0.6);}.yvp-cc-options-main .yvp-back-to-settings:hover{color:#fff}.yvp-cc-options-main .yvp-cc-box{display:block;margin-top:16px;clear:both}.yvp-cc-options-main .yvp-cc-item{display:inline-block}.yvp-cc-options-main .yvp-cc-divider{display:block;height:1px;margin:16px 0 16px 0;background:rgba(255,255,255,0.2)}.yvp-cc-options-main .yvp-cc-toggle{display:inline-block;margin:0 20px}.yvp-cc-options-main .yvp-cc-language{margin-left:20px}.yvp-cc-options-main .yvp-cc-position{max-width:175px}.yvp-cc-options-main .yvp-cc-size{margin-left:20px}.yvp-cc-options-main .yvp-cc-toggle-selection,.yvp-cc-options-main .yvp-cc-pos-selection,.yvp-cc-options-main .yvp-cc-style-preview,.yvp-cc-options-main .yvp-cc-size-selector{display:inline-block;margin-left:56px;padding-bottom:18px}.yvp-cc-options-main .yvp-cc-style{padding-bottom:5px}.yvp-cc-options-main .yvp-cc-toggle-selection,.yvp-cc-options-main .yvp-cc-pos-selection{margin-left:0;}.yvp-cc-options-main .yvp-cc-toggle-selection .yvp-cc-position-top,.yvp-cc-options-main .yvp-cc-pos-selection .yvp-cc-position-top{margin-bottom:6px}.yvp-cc-options-main .yvp-cc-pos-selection{padding-bottom:0;vertical-align:middle}.yvp-cc-options-main .yvp-cc-size-selector{margin:0;padding:0}.yvp-cc-options-main .yvp-cc-indicator{display:inline-block;margin-left:19px;padding:0 4px;cursor:pointer;border:1px solid transparent;border-radius:3px;vertical-align:middle;color:#fff;}.yvp-cc-options-main .yvp-cc-indicator:hover{background-color:rgba(255,255,255,0.2)}.yvp-cc-options-main .yvp-cc-indicator.size-active{background-color:rgba(255,255,255,0.4);}.yvp-cc-options-main .yvp-cc-indicator.size-active:hover{background-color:rgba(255,255,255,0.4)}.yvp-cc-options-main .yvp-cc-indicator-0{font-size:15px}.yvp-cc-options-main .yvp-cc-indicator-25{font-size:18px}.yvp-cc-options-main .yvp-cc-indicator-50{font-size:24px}.yvp-cc-options-main .yvp-cc-indicator-75{font-size:28px}.yvp-cc-options-main .yvp-cc-indicator-100{font-size:32px}.yvp-cc-options-main .yvp-slider-wrapper{margin-top:1px;width:213px;color:#ccc;border-top:1px solid #646464;display:none}.yvp-cc-options-main .yvp-slider-track{display:block;width:100%;position:relative;margin-top:-3px;-webkit-touch-callout:none;-webkit-user-select:none;-khtml-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;}.yvp-cc-options-main .yvp-slider-track:active{cursor:pointer}.yvp-cc-options-main .yvp-slider-track .yvp-slider-handle{position:absolute;display:inline-block;border-radius:50%;height:5px;width:5px;margin:0;background-color:#fff;border:1px solid #fff;}.yvp-cc-options-main .yvp-slider-track .yvp-slider-handle:hover{background-color:#fff;border-width:1px solid #fff;border-radius:50%;width:10px;height:10px;margin-left:-2px;margin-top:-2px;cursor:pointer;}.yvp-cc-options-main .yvp-slider-track .yvp-slider-anchor{position:absolute;margin-right:0;display:inline-block;border-radius:50%;background-color:rgba(255,255,255,0.6);height:5px;width:5px;top:0;}.yvp-cc-options-main .yvp-slider-track .yvp-slider-anchor:hover{background-color:#fff;height:10px;width:10px;margin-right:5px;top:-1px;margin-left:-2px;cursor:pointer}.yvp-cc-options-main .yvp-cc-feedback-link{font-size:11px;float:right;}.yvp-cc-options-main .yvp-cc-feedback-link a:link{color:#fff}.yvp-cc-options-main .yvp-cc-feedback-link a:visited{color:#fff}.yvp-cc-options-main .yvp-cc-feedback-link a:hover{color:#fff}.yvp-cc-options-main .yvp-cc-feedback-link a:active{color:#fff}.yvp-cc-options-main .yvp-cc-feedback-link a{text-decoration:none}.yvp-cc-options-main .yvp-cc-style-more{display:inline-block;font-size:11px;background-color:transparent;color:inherit;outline:none;overflow:visible;cursor:pointer}.yvp-cc-options-main .yvp-cc-style-preview{display:none;border:1px solid rgba(255,255,255,0.2);border-radius:3px;color:#fff;min-width:54px;max-width:80px;font-size:1.5em;height:32px;line-height:32px;text-align:center;padding:1px 2px;margin:0 0 0 20px;}.yvp-cc-options-main .yvp-cc-style-preview .yvp-cc-style-preview-label{font-size:11px;position:absolute;top:-35px;left:-10px;color:#ccc;text-shadow:0 1px 1px rgba(0,0,0,0.4);font-family:Helvetica Neue Regular,Helvetica Neue,helvetica,arial,sans-serif}.yvp-cc-options-main .yvp-cc-pos-wrapper{position:relative;display:inline-block;vertical-align:middle;margin:5px 20px 0 20px}.yvp-cc-options-main .yvp-cc-position-top,.yvp-cc-options-main .yvp-cc-position-bottom{display:inline;margin-right:20px;cursor:pointer;color:rgba(255,255,255,0.5);}.yvp-cc-options-main .yvp-cc-position-top:hover,.yvp-cc-options-main .yvp-cc-position-bottom:hover{color:#fff}.yvp-cc-preview{position:absolute;z-index:4;text-align:center;left:65px;bottom:auto;top:auto;font-size:20px;font-weight:bold;opacity:0;pointer-events:none;}.yvp-cc-preview.yvp-cc-preview-activated{opacity:1}.yvp-cc-preview.yvp-cc-preview-top{top:4px;bottom:auto}.yvp-cc-preview.yvp-cc-preview-bottom{bottom:4px;top:auto}.yvp-cc-preview-message{display:inline-block;padding:5px 15px;margin:0 auto}.yvp-content.yvp-state-fullscreen .yvp-cc-preview-message,.yvp-content.yvp-state-fullscreen .yvp-cc-options-message{display:none}'),
r.prototype.render=function(){var e=this;return e.node=s.render(m,{strings:o.i18n}),e.ccMoreOptionsNode=s.render(v,{strings:o.i18n}),e._applyUIControls(),e._renderAdvancedCCOptions(),e._bindUI(),e._nodes=[e.node,e.ccMoreOptionsNode],e._currentScreenIndex=0,e._nodes},r.prototype._syncLanguageMenu=function(e,t){var n=this;if(e&&!(t.length<0)){var r=c.prototype.getLanguageForCode.call(null,e||n._model.userPreferences.closedCaptions.lang);n._DDMenu&&n._DDMenu.syncData({selected:r,items:t?t.map(function(e){return c.prototype.getLanguageForCode.call(null,e)}):null,itemsData:t})}},r.prototype._syncCCPreferences=function(){function e(e,t,r,i){var a=e.querySelectorAll(t);Array.prototype.forEach.call(a,function(e){n._model.userPreferences.closedCaptions[i]===e.val?s.classList(e).add(r):s.classList(e).remove(r)})}var t,n=this;for(var r in b)if(b.hasOwnProperty(r)&&b[parseInt(r)]===n._model.userPreferences.closedCaptions.fontSize){t=r;break}var i=n._letterOptionsBtns.querySelector(".yvp-cc-indicator-"+t);i&&s.classList(i).add("size-active"),e(n._fontColorPicker,".color-option","color-selected","fontColor"),e(n._bgColorPicker,".color-option","color-selected","bgColor"),e(n._effectPicker,".yvp-effect","effect-selected","fontEffect"),e(n._ccPositionSelection,".yvp-settings-item",h,"ccPos"),n._lastPosSelected=n._ccPositionSelection.querySelector("."+h),n._fontDDM.syncData({items:[],itemsData:[],selected:n._getFontPropertyByFontName(n._model.userPreferences.closedCaptions.fontName).name}),n._bgOpactiyDDM.syncData({items:[],itemsData:[],selected:n._stringifyBgOpacity(100*n._model.userPreferences.closedCaptions.bgOpacity)}),n._sizeSlider.setValue(t,!0),n._updateCCStylePreviewBoxes()},r.prototype._applyUIControls=function(){var e=this;e._applyCCToggling(),e._applyCCLanguageMenu(),e._applySize(),e._applyAdvancedOptions(),e._applyCCPosition()},r.prototype._applyCCToggling=function(){var e=this,t=e._model.userPreferences.closedCaptions.show;e._ccToggleSelectionNodes=e.node.querySelector(".yvp-cc-toggle"),e._toggleSelections=[],f.forEach(function(n){var r=e._ccToggleSelectionNodes.querySelector(".yvp-cc-"+n),i=n===S;(t&&i||!t&&!i)&&(s.classList(r).add(h),e._lastToggleSelected=r),e._toggleSelections.push(r)})},r.prototype._applyCCLanguageMenu=function(){var e=this;if(e._ccLanguageMenu=e.node.querySelector(".yvp-cc-language"),e._model.userPreferences.closedCaptions&&e._model.userPreferences.closedCaptions.lang){var t={selected:c.prototype.getLanguageForCode.call(null,e._model.userPreferences.closedCaptions.lang),items:null,noItemsText:o.i18n.NO_ITEM_AVAILABLE};e._DDMenu=new u(P,t,e._eventBus),e._ccLanguageMenu.appendChild(e._DDMenu.create()),e._eventBus.publish(p.CC.REQUEST_UI_DATA_FOR_MEDIA_ITEM,e._model.playlist.getCurrentItem())}},r.prototype._populateUI=function(e){var t=this,n="top"===t._model.userPreferences.closedCaptions.ccPos;t._syncLanguageMenu(e.selectedLang,e.langList),t._syncToggleSelection(t._model.userPreferences.closedCaptions.show),t._eventBus.publish(p.CC.POSITION_CHANGE,n)},r.prototype._applySize=function(){var e,t,n=this,r=n.node.querySelector(".yvp-cc-size-selector"),i={wrapper:"yvp-slider-wrapper",track:"yvp-slider-track",handle:"yvp-slider-handle",anchor:"yvp-slider-anchor"},a={anchors:5,minValue:0,maxValue:100,initialValue:n._model.userPreferences.closedCaptions.fontSize},o=[];n._sizeSlider=new _(i,a,n._eventBus),r.appendChild(n._sizeSlider.create()),n._sliderValues=n.node.querySelectorAll(".yvp-slider-anchor");var l=n._sliderValues.length;for(e=0;l>e;e++){var c=n._sliderValues[e].style.left.trim();o.push(parseFloat(c))}n._ccSizeLetterIndicator=function(e){var t=e.target,r=t.getAttribute("data-size-value")||"";switch(r){case"0":n._sizeSlider.setValue(o[0]);break;case"25":n._sizeSlider.setValue(o[1]);break;case"50":n._sizeSlider.setValue(o[2]);break;case"75":n._sizeSlider.setValue(o[3]);break;case"100":n._sizeSlider.setValue(o[4])}Array.prototype.forEach.call(n._letterOptionsBtns.children,function(e){s.classList(e).remove("size-active")}),s.classList(t).add("size-active")},n._letterOptionsBtns=n.node.querySelector(".yvp-cc-size-indicators"),n._letterOptionsTaps=[];var p=n._letterOptionsBtns.children.length;for(t=0;p>t;t++)n._letterOptionsTaps[t]=new d(n._letterOptionsBtns.children[t]),n._letterOptionsBtns.children[t].addEventListener("tap",n._ccSizeLetterIndicator)},r.prototype._updateCCStylePreviewBoxes=function(){var e=this,t=s.cssHexToRgb(e._model.userPreferences.closedCaptions.bgColor)||{r:0,g:0,b:0};Array.prototype.forEach.call(e._ccStylePreviewBoxes,function(n){n.style.fontSize=e._model.userPreferences.closedCaptions.fontSize,n.style.fontFamily=e._model.userPreferences.closedCaptions.fontName,n.style.color=e._model.userPreferences.closedCaptions.fontColor,n.style.textShadow=D[e._model.userPreferences.closedCaptions.fontEffect],n.style.backgroundColor="rgba("+t.r+","+t.g+","+t.b+","+e._model.userPreferences.closedCaptions.bgOpacity+")"}),e._model.playbackState.state!==a.INIT&&e._eventBus.publish(p.CC.SAVE_TO_LOCAL_STORAGE,{ccSettings:e._model.userPreferences.closedCaptions})},r.prototype._applyFontFaceChange=function(e){for(var t=this,n=0;n<R.length;n++)if(R[n].name===e){t._model.userPreferences.closedCaptions.fontName=e,t._model.userPreferences.closedCaptions.hasChanged=!0,t._eventBus.publish(p.CC.UPDATE_STYLE,"font: "+e),t._updateCCStylePreviewBoxes();break}},r.prototype._applyBgOpacityChange=function(e){var t=this;t._model.userPreferences.closedCaptions.bgOpacity=e/100,t._model.userPreferences.closedCaptions.hasChanged=!0,t._eventBus.publish(p.CC.UPDATE_STYLE,"opacity: "+e),t._updateCCStylePreviewBoxes()},r.prototype._getFontPropertyByFontName=function(e){for(var t=0;t<R.length;t++)if(R[t].name===e)return R[t];return R[3]},r.prototype._applyFontList=function(){var e=this,t=e.ccMoreOptionsNode.querySelector(".font-list"),n=R.map(function(e){return e.name}),r=e._getFontPropertyByFontName(e._model.userPreferences.closedCaptions.fontName),i={selected:r.name,items:n,noItemsText:o.i18n.NO_ITEM_AVAILABLE};e._fontDDM=new u(P,i,e._eventBus),t.insertBefore(e._fontDDM.create(),t.querySelector(".fontcolorpicker")),e._fontDDM.registerEvent(p.CC.FONT_FACE_CHANGE)},r.prototype._stringifyBgOpacity=function(e){return 100===e?e+"% (opaque)":e+"% (transparency)"},r.prototype._applyBgOpacityList=function(){var e=this,t=e.ccMoreOptionsNode.querySelector(".bg-opacity-list"),n=100*e._model.userPreferences.closedCaptions.bgOpacity,r={selected:100===n?n+"% (opaque)":n+"% (transparency)",items:O.map(e._stringifyBgOpacity),itemsData:O,noItemsText:o.i18n.NO_ITEM_AVAILABLE};e._bgOpactiyDDM=new u(P,r,e._eventBus),t.insertBefore(e._bgOpactiyDDM.create(),t.querySelector(".bgcolorpicker")),e._bgOpactiyDDM.registerEvent(p.CC.BG_OPACITY_CHANGE)},r.prototype._renderAdvancedCCOptions=function(){var e=this;e._fontColorPicker=e.ccMoreOptionsNode.querySelector(".fontcolorpicker"),e._bgColorPicker=e.ccMoreOptionsNode.querySelector(".bgcolorpicker"),e._effectPicker=e.ccMoreOptionsNode.querySelector(".yvp-tabcontent:nth-child(4)"),e._applyCCPresetStyles(),e._applyColorPickerPresetStyles(),e._applyFontList(),e._applyBgOpacityList(),e._renderEffectPickerPresets()},r.prototype._applyCCPresetStyles=function(){for(var e=this,t=e.ccMoreOptionsNode.querySelectorAll(".yvp-cc-preset"),n=0;n<t.length;n++){var r=t[n];r.presetIndex=n,r.style.color=C[n].fontColor,r.style.backgroundColor=C[n].bgColor}},r.prototype._applyColorPickerPresetStyles=function(){function e(e,t,n){for(var r,i=0;i<e.length;i++)r=document.createElement("div"),s.classList(r).add("color-option"),r.style.backgroundColor=e[i].color,r.val=e[i].color,"transparent"===e[i].color&&s.classList(r).add("nocolor"),r.colorpickerType=n,t.appendChild(r)}var t=this;e(L,t._fontColorPicker,I.Font),e(M,t._bgColorPicker,I.Background)},r.prototype._renderEffectPickerPresets=function(){for(var e=this,t=e._effectPicker.querySelectorAll(".yvp-effect"),n=0;n<t.length;n++){var r=t[n];r.val=N[n].name}},r.prototype._applyAdvancedOptions=function(){var e=this;e._ccStylePreviewBoxes=[e.node,e.ccMoreOptionsNode].map(function(e){return e.querySelector(".yvp-cc-style-preview")}),this._updateCCStylePreviewBoxes()},r.prototype._applyCCPosition=function(){var e=this;e._ccPositionSelection=e.node.querySelector(".yvp-cc-pos-selection"),e._ccPositionOptionNodes=[];var t="top"===e._model.userPreferences.closedCaptions.ccPos,n=document.createDocumentFragment();g.forEach(function(r){var i=document.createElement("li");s.classList(i).add("yvp-settings-item"),s.classList(i).add("yvp-cc-position-"+r),i.setAttribute("cc-pos-data",r),i.val=r;var a;a=document.createTextNode(o.i18n[r.toUpperCase()]),(t&&r===A||!t&&r!==A)&&(s.classList(i).add(h),e._lastPosSelected=i),e._ccPositionOptionNodes.push(i),i.appendChild(a),n.appendChild(i)}),e._ccPositionSelection.appendChild(n)},r.prototype._bindUI=function(){var e=this;e._bindCCToggle(),e._bindLanguageMenu(),e._bindSizeSelector(),e._bindAdvancedOptions(),e._bindCCPosition(),e._bindFeedback()},r.prototype._unBindUI=function(){var e=this;e._unBindToggle(),e._unBindLanguageMenu(),e._unBindSizeSelector(),e._unBindAdvancedOptions(),e._unBindCCPosition(),e._unBindCCPreview(),e._unBindFeedback()},r.prototype._syncToggleSelection=function(e){var t=this,n=t._ccToggleSelectionNodes.querySelector(".yvp-cc-"+(e?"on":"off"));s.classList(n).contains(h)||(s.classList(t._lastToggleSelected).remove(h),s.classList(n).add(h),t._lastToggleSelected=n)},r.prototype._bindCCToggle=function(){var e=this;e._toggleTaps=[],e._toggleCC=function(t){var n=t.target.getAttribute(y)===S;e._model.userPreferences.closedCaptions.hasChanged=!0,e._eventBus.publish(p.CC.UI_TOGGLE,n)},e._toggleSelections.forEach(function(t){var n=new d(t);e._toggleTaps.push(n),t.addEventListener("tap",e._toggleCC)})},r.prototype._unBindToggle=function(){var e=this;e._toggleTaps.forEach(function(e){e.destroy()}),e._toggleSelections.forEach(function(t){t.removeEventListener("tap",e._toggleCC)})},r.prototype._bindLanguageMenu=function(){var e=this;e._DDMenu&&e._DDMenu.registerEvent(p.CC.LANGUAGE_CHANGE)},r.prototype._unBindLanguageMenu=function(){var e=this;e._DDMenu.destroy()},r.prototype._bindSizeSelector=function(){var e=this;e._sizeSlider.registerEvent(p.CC.FONT_SIZE_CHANGE)},r.prototype._onSizeChange=function(e){var t=this,n=b[e];t._model.userPreferences.closedCaptions.fontSize=n,t._model.userPreferences.closedCaptions.hasChanged=!0,t._model.playbackState.state!==a.INIT&&(t._eventBus.publish(p.CC.UPDATE_STYLE,"size: "+e),t._eventBus.publish(p.CC.SAVE_TO_LOCAL_STORAGE,{ccSettings:t._model.userPreferences.closedCaptions})),t._showCCPreview()},r.prototype._unBindSizeSelector=function(){for(var e=this,t=0;t<e._letterOptionsBtns.children.length;t++)e._letterOptionsBtns.children[t].removeEventListener("tap",e._ccSizeLetterIndicator);e._sizeSlider.destroy()},r.prototype._bindFeedback=function(){var e=this;e._feedbackLink=e.node.querySelector(".yvp-cc-feedback-link"),e._feedbackLinkTap=new d(e._feedbackLink),e._onSubmitFeedback=function(t){var n=e._model.playbackState;n.paused||e._eventBus.publish(p.TOGGLE_PLAY_PAUSE)},e._feedbackLink.addEventListener("tap",e._onSubmitFeedback)},r.prototype._unBindFeedback=function(){var e=this;e._feedbackLinkTap.destroy()},r.prototype._bindAdvancedOptions=function(){var e=this;e._moreOptionShowComponent=function(t){e._currentScreenIndex=1,s.classList(e._nodes[0]).remove("open"),s.classList(e._nodes[0]).add("close"),s.classList(e._nodes[1]).remove("close"),s.classList(e._nodes[1]).add("open"),e._syncCCPreferences()},e._advancedMenuBackButtonTapListener=function(t){e._currentScreenIndex=0,s.classList(e._nodes[1]).remove("open"),s.classList(e._nodes[1]).add("close"),s.classList(e._nodes[0]).remove("close"),s.classList(e._nodes[0]).add("open")},e._moreOptionsBtn=e.node.querySelector(".yvp-cc-style-more"),e._moreOptionsBtnTap=new d(e._moreOptionsBtn),e._moreOptionsBtn.addEventListener("tap",e._moreOptionShowComponent),e._advancedMenuBackButton=e.ccMoreOptionsNode.querySelector(".yvp-cc-back"),e._advancedMenuBackButtonTap=new d(e._advancedMenuBackButton),e._advancedMenuBackButton.addEventListener("tap",e._advancedMenuBackButtonTapListener),e._bindStylePresetsUI(),e._bindTabUI(),e._bindColorPickerUI(),e._bindEffectPickerUI()},r.prototype._unBindAdvancedOptions=function(){var e=this;e._moreOptionsBtn&&e._moreOptionsBtnTap&&(e._moreOptionsBtnTap.destroy(),e._moreOptionsBtn.removeEventListener("tap",e._moreOptionShowComponent)),e._advancedMenuBackButton&&e._advancedMenuBackButtonTap&&(e._advancedMenuBackButtonTap.destroy(),e._advancedMenuBackButton.removeEventListener("tap",e._advancedMenuBackButtonTapListener)),e._ccOptionPresets&&e._ccOptionPresetsTap&&(e._ccOptionPresetsTap.destroy(),e._ccOptionPresets.removeEventListener("tap",e._ccOptionPresetsTapListener)),e._unbindTabUI&&e._unbindTabUI(),e._unbindColorPickerUI&&e._unbindColorPickerUI(),e._unbindEffectPickerUI&&e._unbindEffectPickerUI(),e._fontDDM.destroy(),e._bgOpactiyDDM.destroy()},r.prototype._togglePosition=function(e){var t=this,n=e.getAttribute("cc-pos-data")===A;s.classList(t._lastPosSelected).remove(h),s.classList(e).add(h),t._lastPosSelected=e,t._model.userPreferences.closedCaptions.hasChanged=!0,t._eventBus.publish(p.CC.POSITION_CHANGE,n),t._model.userPreferences.closedCaptions.ccPos=n?"top":"bottom",t._eventBus.publish(p.CC.SAVE_TO_LOCAL_STORAGE,{ccSettings:t._model.userPreferences.closedCaptions})},r.prototype._bindCCPosition=function(){var e=this;e._positionTaps=[],e._togglePositionByButton=function(t){var n=t.target;e._togglePosition(n)},e._ccPositionOptionNodes.forEach(function(t){var n=new d(t);e._positionTaps.push(n),t.addEventListener("tap",e._togglePositionByButton)})},r.prototype._unBindCCPosition=function(){var e=this;e._positionTaps.forEach(function(e){e.destroy()}),e._ccPositionOptionNodes.forEach(function(t){t.removeEventListener("tap",e._togglePosition)})},r.prototype._showCCPreview=function(e){var t=this,n=t.node.querySelector(".yvp-cc-preview"),r=t._model.userPreferences.closedCaptions,i=T+e,a=600;e&&(s.classList(n).remove(t._previousAlignmentClassname),s.classList(n).add(i),t._previousAlignmentClassname=i),n.style.fontSize=r.fontSize+"px",n.style.color=r.fontColor,n.style.backgroundColor=r.bgColor,n.style.fontFamily=r.fontName,s.classList(n).add(E),t._ccPreviewTimeout&&clearTimeout(t._ccPreviewTimeout),t._ccPreviewTimeout=setTimeout(function(){s.classList(n).remove(E),t._ccPreviewTimeout=null},a)},r.prototype._bindStylePresetsUI=function(){var e=this;e._ccOptionPresetsTapListener=function(t){var n=t.eventTarget||t.eventSource;if(t.currentTarget!==n&&!s.classList(n).contains("preset-separator")){var r=n.presetIndex;if(l.isNumber(r)){var i=C[r];e._model.userPreferences.closedCaptions.fontColor=i.fontColor,e._model.userPreferences.closedCaptions.hasChanged=!0,e._setBgColor(i.bgColor),e._showCCPreview(),e._eventBus.publish(p.CC.USER_STYLE_PREFERENCES_CHANGE),e._eventBus.publish(p.CC.SAVE_TO_LOCAL_STORAGE,{ccSettings:e._model.userPreferences.closedCaptions})}}},e._ccOptionPresets=e.ccMoreOptionsNode.querySelector(".preset-container"),e._ccOptionPresetsTap=new d(e._ccOptionPresets),e._ccOptionPresets.addEventListener("tap",e._ccOptionPresetsTapListener)},r.prototype._bindTabUI=function(){var e=this,t=function(e){var t=e.eventTarget||e.eventSource;e.currentTarget!==t&&(Array.prototype.forEach.call(i,function(e,r){t===e?(s.classList(e).add("tab-selected"),s.classList(n[r]).add("tab-show")):(s.classList(e).remove("tab-selected"),s.classList(n[r]).remove("tab-show"))}),e.stopPropagation())},n=e.ccMoreOptionsNode.querySelectorAll(".yvp-tabcontent"),r=e.ccMoreOptionsNode.querySelector(".yvp-tabs-nav"),i=r.querySelectorAll(".yvp-tab"),a=new d(r);r.addEventListener("tap",t),e._unbindTabUI=function(){a.destroy(),r.removeEventListener("tap",t)}},r.prototype._bindColorPickerUI=function(){var e=this,t=function(t){var n=t.eventTarget||t.eventSource;n.colorpickerType===I.Font?(e._model.userPreferences.closedCaptions.fontColor=n.val,e._model.userPreferences.closedCaptions.hasChanged=!0):n.colorpickerType===I.Background&&e._setBgColor(n.val),e._showCCPreview(),e._eventBus.publish(p.CC.USER_STYLE_PREFERENCES_CHANGE),e._eventBus.publish(p.CC.SAVE_TO_LOCAL_STORAGE,{ccSettings:e._model.userPreferences.closedCaptions})},n=new d(e._fontColorPicker);e._fontColorPicker.addEventListener("tap",t);var r=new d(e._bgColorPicker);e._bgColorPicker.addEventListener("tap",t),e._unbindColorPickerUI=function(){n.destroy(),e._fontColorPicker.removeEventListener("tap",t),r.destroy(),e._bgColorPicker.removeEventListener("tap",t)}},r.prototype._setBgColor=function(e){var t=this,n=t._model.userPreferences.closedCaptions;n.bgColor=e,"transparent"===e?n.bgOpacity=0:0===n.bgOpacity&&(n.bgOpacity=.75),t._toggleBgOpacityDDM(e)},r.prototype._toggleBgOpacityDDM=function(e){var t=this,n=t.ccMoreOptionsNode.querySelector(".bg-opacity-list"),r=n.querySelector(".yvp-ddm-selected-wrapper");"transparent"===e?s.classList(r).add("hide"):s.classList(r).remove("hide")},r.prototype._bindEffectPickerUI=function(){var e=this,t=function(t){var n=t.eventTarget||t.eventSource,r=n.parentNode.val;r&&(e._model.userPreferences.closedCaptions.fontEffect=r,e._model.userPreferences.closedCaptions.hasChanged=!0,e._showCCPreview(),e._eventBus.publish(p.CC.USER_STYLE_PREFERENCES_CHANGE),e._eventBus.publish(p.CC.SAVE_TO_LOCAL_STORAGE,{ccSettings:e._model.userPreferences.closedCaptions}))},n=new d(e._effectPicker);e._effectPicker.addEventListener("tap",t),e._unbindEffectPickerUI=function(){n.destroy(),e._effectPicker.removeEventListener("tap",t)}},r.prototype._unBindCCPreview=function(){var e=this;e._ccPreviewTimeout&&(clearTimeout(e._ccPreviewTimeout),e._ccPreviewTimeout=null)},r.prototype.showHideCurrentNode=function(e){var t=this;s.showHide(t._nodes[t._currentScreenIndex],e)},r.prototype.destroy=function(){var e=this;e._unBindUI(),e.node=null,e.ccMoreOptionsNode=null};var L=[{color:"#E7E7E7",name:"grey"},{color:"#000000",name:"black"},{color:"#FC2525",name:"red"},{color:"#29FD2F",name:"green"},{color:"#2CFEFE",name:"turquoise"},{color:"#EC369C",name:"pink"},{color:"#FEF149",name:"yellow"},{color:"#2524FB",name:"blue"}],M=[{color:"transparent",name:"none"},{color:"#eaeaea",name:"grey1"},{color:"#c7c7c7",name:"grey2"},{color:"#919191",name:"grey3"},{color:"#5b5b5b",name:"grey4"},{color:"#000000",name:"black"},{color:"#29FD2F",name:"green"},{color:"#2424FB",name:"blue"},{color:"#2CFDFD",name:"turquoise"},{color:"#EC359B",name:"pink"},{color:"#FDF048",name:"yellow"},{color:"#FC2424",name:"red"}],C=[{fontColor:"#cdcdcd",bgColor:"#060606"},{fontColor:"#282828",bgColor:"#c8c8c8"},{fontColor:"#fef149",bgColor:"#0a0908"},{fontColor:"#cdcdcd",bgColor:"transparent"},{fontColor:"#29fd2f",bgColor:"#0a0908"},{fontColor:"#ec369c",bgColor:"#0a0a09"},{fontColor:"#2cfefe",bgColor:"#0a0a09"},{fontColor:"#29fd2f",bgColor:"transparent"}],N=[{name:"none"},{name:"dropshadow"},{name:"raised"},{name:"depressed"},{name:"uniform"}],D={none:"",dropshadow:"2px 1px 1px rgba(0, 0, 0, 1)",raised:"3px 3px 4px rgba(0, 0, 0, 0.75)",depressed:"0px -4px 4px rgba(0, 0, 0, 0.54)",uniform:"-2px -2px 0 #000, -2px 2px 0 #000, -2px 0 0 #000, 2px -2px 0 #000, 2px 2px 0 #000, 2px 0 0 #000, 0 -2px 0 #000, 0 2px 0 #000"},R=[{name:"Georgia",fontFamily:"Georgia, serif"},{name:"Palatino Linotype",fontFamily:'"Palatino Linotype", "Book Antiqua", Palatino, serif'},{name:"Times New Roman",fontFamily:'"Times New Roman", Times, serif'},{name:"Arial",fontFamily:"Arial, Helvetica, sans-serif"},{name:"Arial Black",fontFamily:'"Arial Black", Gadget, sans-serif'},{name:"Comic Sans MS",fontFamily:'"Comic Sans MS", cursive, sans-serif'},{name:"Impact",fontFamily:"Impact, Charcoal, sans-serif"},{name:"Lucida Sans Unicode",fontFamily:'"Lucida Sans Unicode", "Lucida Grande", sans-serif'},{name:"Tahoma",fontFamily:"Tahoma, Geneva, sans-serif"},{name:"Trebuchet MS",fontFamily:'"Trebuchet MS", Helvetica, sans-serif'},{name:"Verdana",fontFamily:"Verdana, Geneva, sans-serif"},{name:"Courier New",fontFamily:'"Courier New", Courier, monospace'},{name:"Lucida Console",fontFamily:'"Lucida Console", Monaco, monospace'}],O=[100,75,50,25],P={wrapper:"yvp-ddm-wrapper",selectedWrapper:"yvp-ddm-selected-wrapper",selected:"yvp-ddm-selected",availability:"yvp-ddm-availability",notAvailable:"not-available",dropDownIcon:"yvp-ddm-chevron",list:"yvp-ddm-list",listItem:"yvp-ddm-item"}},{"../../../lib":"bRhrlU","../cc":"zKzgQw","../event":"YJm+dH","../states":50,"../strings":"XwKsC9","../tap":"dsc79Q","../util":"jJTEqU","../views/uiwidgets/drop-down-menu":93,"../views/uiwidgets/slider":94,"../views/uiwidgets/tooltip":96,"./cc-more-options.html":69,"./cc-options.html":70,fs:155,"insert-css":157}],72:[function(e,t,n){var r=new(e("hogan.js/lib/template").Template)(function(e,t,n){var r=this;return r.b(n=n||""),r.b("<div>"),r.b("\n"+n),r.b("    <div class='yvp-top-bar'>"),r.b("\n"+n),r.b("        <div class='yvp-ad' aria-label='"),r.b(r.v(r.d("strings.ADV_SHORT",e,t,0))),r.b("'>"),r.b(r.v(r.d("strings.ADV_SHORT",e,t,0))),r.b("</div>"),r.b("\n"+n),r.b("        <div class='yvp-content-type hide'></div>"),r.b("\n"+n),r.b("    </div>"),r.b("\n"+n),r.b("    <div class='yvp-playing-item-title'></div>"),r.b("\n"+n),r.b("    <div class='yvp-bottom-bar'>"),r.b("\n"+n),r.b("        <div class='yvp-bottom-container'>"),r.b("\n"+n),r.b("            <div class='yvp-slider' role='slider' tabindex='0'>"),r.b("\n"+n),r.b("                <div class='yvp-slider-extension' aria-hidden='true'></div>"),r.b("\n"+n),r.b("                <div class='yvp-handle'></div>"),r.b("\n"+n),r.b("                <div class='yvp-buffer-bar'></div>"),r.b("\n"+n),r.b("                <div class='yvp-playback-bar'></div>"),r.b("\n"+n),r.b("                <div class='yvp-visual-seek'>"),r.b("\n"+n),r.b("                    <div class='yvp-vs-thumbnail'></div>"),r.b("\n"+n),r.b("                    <div class='yvp-vs-time'></div>"),r.b("\n"+n),r.b("                </div>"),r.b("\n"+n),r.b("            </div>"),r.b("\n"+n),r.b("            <div class='yvp-play-controls'>"),r.b("\n"+n),r.b("                <div class='yvp-play-btn' role='button' tabindex='0'></div>"),r.b("\n"+n),r.b("                <div class='yvp-upnext-container hide'>"),r.b("\n"+n),r.b("                    <div class='yvp-upnext-btn' role='button'>"),r.b("\n"+n),r.b("                    </div>"),r.b("\n"+n),r.b("                    <div class='yvp-upnext-playlist' role='dialog'>"),r.b("\n"+n),r.b("                        <div class='yvp-hover-elem'></div>"),r.b("\n"+n),r.b("                    </div>"),r.b("\n"+n),r.b("                </div>"),r.b("\n"+n),r.b("                <div class='yvp-time-container' tabindex='-1' aria-hidden='true'>"),r.b("\n"+n),r.b("                    <div class='yvp-current-time'></div>"),r.b("\n"+n),r.b("                    <div class='yvp-total-time'></div>"),r.b("\n"+n),r.b("                </div>"),r.b("\n"+n),r.b("            </div>"),r.b("\n"+n),r.b("            <div class='yvp-menu-controls'>"),r.b("\n"+n),r.b("                <div class='yvp-cc-btn button hide' role='button' tabindex='0' aria-label='"),r.b(r.v(r.d("strings.CC",e,t,0))),r.b("'></div>"),r.b("\n"+n),r.b("                <div class='yvp-fullscreen-btn button' role='button' tabindex='0'></div>"),r.b("\n"+n),r.b("            </div>"),r.b("\n"+n),r.b("        </div>"),r.b("\n"+n),r.b("    </div>"),r.b("\n"+n),r.b("    <div class='yvp-object-overlay'></div>"),r.b("\n"+n),r.b("</div>"),r.b("\n"),r.fl()});t.exports={render:function(){return r.render.apply(r,arguments)},r:function(){return r.r.apply(r,arguments)},ri:function(){return r.ri.apply(r,arguments)}}},{"hogan.js/lib/template":156}],73:[function(e,t,n){"use strict";function r(e,t,n){var r=this;r._eventBus=e,r._view=t,r._model=n,r._adBreaks=[],r._playlistRendered=!1,r._playlistFirstPageRendered=!1,r._eventBus.subscribe(a.MEDIA_ITEM_LOADED,r._onMediaItemLoaded,r),r._eventBus.subscribe(a.PLAYBACK_PROGRESS,r._onPlaybackProgress,r),r._eventBus.subscribe(a.AD_PLAYBACK_PROGRESS,r._onPlaybackProgress,r),r._eventBus.subscribe(a.CAST.PLAYBACK_PROGRESS,r._onPlaybackProgress,r),r._eventBus.subscribe(a.Ad.PLAYING,r._onAdPlaying,r),r._eventBus.subscribe(a.Ad.ENDED,r._onAdEnded,r),r._eventBus.subscribe(a.Ad.CANCELED,r._onAdEnded,r),r._eventBus.subscribe(a.Video.ENDED,r._onVideoEnded,r),r._eventBus.subscribe(a.PLAYBACK_STARTED,r._onPlaybackStarted,r),r._eventBus.subscribe(a.AD_PLAYBACK_STARTED,r._onAdPlaybackStarted,r),r._eventBus.subscribe(a.RELATED_ITEMS_LOADED,r._onRelatedItemsLoaded,r),r._eventBus.subscribe(a.RELATED_ITEM_CLICK,r._onRelatedItemClick,r),r._eventBus.subscribe(a.CONTROLS_BAR_CHANGE,r._onControlsBarChange,r),r._eventBus.subscribe(a.FULLSCREEN_CHANGE,function(){r._updateFullscreen(r._view.getFullscreen())}),r._eventBus.subscribe(a.CONTROLS_SET_VOLUME,function(e){r._updateVolumeUI(e)}),r._eventBus.subscribe(a.CAST.VOLUME_CHANGED,function(e){r._updateVolumeUI(e)}),r._eventBus.subscribe(a.CONTROLS_SET_MUTE,function(e){r._updateVolumeUI(r._model.playbackState.volume,e)}),r._eventBus.subscribe(a.CAST.MUTE_CHANGED,function(e){r._updateVolumeUI(r._model.playbackState.volume,e)})}t.exports=r;var i=(e("fs"),e("insert-css")),a=e("../event"),o=(e("../renderers/modes"),e("../tap")),s=e("../util"),l=e("../../../lib"),d=e("../../../lib/user-agent"),c=e("../strings"),p=e("./yahoo-controls"),u=e("./playlist"),_=e("./controls.html"),m="end-screen",v=3e3;i('.yvp-flag-casting .yvp-bottom-bar .yvp-bottom-container .yvp-menu-controls .yvp-chromecast-btn{background-image:url("data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjIiIGhlaWdodD0iMTYiIHZpZXdCb3g9IjAgMCAyMiAxNiIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48dGl0bGU+aWNvbi1jaHJvbWVjYXN0LW9uPC90aXRsZT48ZyBmaWxsPSIjRkZGIiBmaWxsLXJ1bGU9ImV2ZW5vZGQiPjxwYXRoIGQ9Ik0yMC4wMDMgMGgtMTZjLTEuMTA1IDAtMiAuODk1LTIgMnYxLjMwM2MuNjg3LjE0IDEuMzUuMzQyIDIgLjU3MlYyaDE2djEwaC03LjI2Yy4yOC42NDQuNTEgMS4zMTQuNzAyIDJoNi41NThjMS4xMDQgMCAyLS44OTUgMi0yVjJjMC0xLjEwNS0uODk2LTItMi0yIi8+PHBhdGggZD0iTTExLjY5IDEwSDE4VjRINnYuNzNjMi4zMjcgMS4yMyA0LjI5IDMuMDU0IDUuNjkgNS4yN3pNNi40MSAxNmMtLjM5NSAwLS43NjgtLjIzMy0uOTI3LS42Mi0uODUtMi4wNzMtMi42MTYtMy42My00LjcyNi00LjE2Ni0uNTM1LS4xMzctLjg2LS42OC0uNzIzLTEuMjE2LjEzNS0uNTM1LjY4LS44NTUgMS4yMTUtLjcyNCAyLjcyLjY5MiA0Ljk5NSAyLjY5IDYuMDg0IDUuMzQ3LjIxLjUxMi0uMDM2IDEuMDk2LS41NDYgMS4zMDYtLjEyNS4wNS0uMjUzLjA3NC0uMzguMDc0Ii8+PHBhdGggZD0iTTEwLjYxNyAxNmMtLjQ0NSAwLS44NS0uMjk4LS45NjctLjc0OC0xLjEtNC4yMi00LjU1Ny03LjQwMi04LjgxLTguMTA1LS41NDUtLjA5LS45MTQtLjYwNS0uODI0LTEuMTUuMDktLjU0NS42MDQtLjkyNCAxLjE1LS44MjMgNS4wMzIuODMgOS4xMiA0LjU5IDEwLjQyIDkuNTc0LjEzOC41MzQtLjE4MiAxLjA4LS43MTcgMS4yMi0uMDg1LjAyLS4xNy4wMzItLjI1My4wMzJNMi40NDYgMTQuNDljLjAwNC4wMDQuMDA3LjAxLjAxLjAxNS4wOTcuMTcyLjE0LjM2LjEzLjU0NC0uMDEuMTgtLjA2Ny4zNi0uMTc1LjUxNy0uMDgyLjEyLS4xOTIuMjI1LS4zMjguMzAyLS4xNTguMDktLjMyNy4xMTQtLjQ5Ni4xMTRILjAydi0xLjQ2NmMtLjAwMi0uMTcuMDI1LS4zMzguMTE0LS40OTYuMjc0LS40OC44ODQtLjY0NiAxLjM2NC0uMzc0LjI1LjE0My40NC4zMi41OTMuNDZsLjE0LjEyN2MuMDg4LjA3NC4xNi4xNi4yMTYuMjU0eiIvPjwvZz48L3N2Zz4=")}.yvp-drag .yvp-handle,.yvp-drag .yvp-playback-bar{-webkit-transition:none !important;-moz-transition:none !important;-o-transition:none !important;transition:none !important}.yvp-mode-ad .yvp-top-bar .yvp-ad,.yvp-mode-vpaid .yvp-top-bar .yvp-ad{display:block}.yvp-mode-ad .yvp-bottom-bar,.yvp-mode-vpaid .yvp-bottom-bar{height:44px;background-image:-webkit-linear-gradient(-180deg, rgba(255,255,255,0) 0%, rgba(18,23,23,0.1) 25%, rgba(18,23,23,0.5) 100%);background-image:-o-linear-gradient(-180deg, rgba(255,255,255,0) 0%, rgba(18,23,23,0.1) 25%, rgba(18,23,23,0.5) 100%);background-image:linear-gradient(-180deg, rgba(255,255,255,0) 0%, rgba(18,23,23,0.1) 25%, rgba(18,23,23,0.5) 100%);}.yvp-mode-ad .yvp-bottom-bar .yvp-bottom-container,.yvp-mode-vpaid .yvp-bottom-bar .yvp-bottom-container{top:0}.yvp-mode-ad .yvp-playing-item-title.yvp-title-standard,.yvp-mode-vpaid .yvp-playing-item-title.yvp-title-standard{opacity:0;z-index:0}.yvp-playing-item-title{display:block;position:absolute;opacity:0;}.yvp-playing-item-title.yvp-title-standard{left:0;top:0;box-sizing:border-box;width:100%;padding:10px 0 0 16px;color:#fff;background-image:-webkit-linear-gradient(-180deg, rgba(18,23,23,0.8) 0%, rgba(18,23,23,0.2) 50%, rgba(255,255,255,0) 100%);background-image:-o-linear-gradient(-180deg, rgba(18,23,23,0.8) 0%, rgba(18,23,23,0.2) 50%, rgba(255,255,255,0) 100%);background-image:linear-gradient(-180deg, rgba(18,23,23,0.8) 0%, rgba(18,23,23,0.2) 50%, rgba(255,255,255,0) 100%);font-weight:500;font-size:22px;text-shadow:1px 1px 1px rgba(0,0,0,0.5);line-height:24px;z-index:30;opacity:1;-webkit-transition:opacity .6s ease-out .1s;-moz-transition:opacity .6s ease-out .1s;-o-transition:opacity .6s ease-out .1s;transition:opacity .6s ease-out .1s;}.yvp-playing-item-title.yvp-title-standard.yvp-live{padding:48px 0 0 16px}.yvp-playing-item-title.yvp-title-standard.yvp-hide{opacity:0;z-index:0;-webkit-transition:all .3s ease-out .1s;-moz-transition:all .3s ease-out .1s;-o-transition:all .3s ease-out .1s;transition:all .3s ease-out .1s}.yvp-top-bar{position:absolute;z-index:31;width:100%;top:0;height:0;}.yvp-top-bar .yvp-ad{display:none;position:absolute;top:14px;left:24px;color:#fff;font-family:\'Helvetica Neue\',Helvetica,Arial,sans-serif;font-size:14px}.yvp-top-bar .yvp-content-type{display:block;opacity:1;height:auto;left:16px;top:16px;position:absolute;padding:5px 10px 5px 10px;border-radius:2px;background-color:#7300ff;background-image:-webkit-linear-gradient(45deg, #ff3541 0%, #ff6230 100%);background-image:-o-linear-gradient(45deg, #ff3541 0%, #ff6230 100%);background-image:linear-gradient(45deg, #ff3541 0%, #ff6230 100%);font-family:\'HelveticaNeue-Bold\',Helvetica,Arial,sans-serif;color:#fff;text-shadow:none;text-transform:uppercase;letter-spacing:.6px;font-weight:normal;font-size:10px;}.yvp-top-bar .yvp-content-type.hide{display:none}.yvp-bottom-bar{position:absolute;background-color:transparent;background-image:-webkit-linear-gradient(-180deg, rgba(255,255,255,0) 0%, rgba(18,23,23,0.2) 50%, rgba(18,23,23,0.8) 100%);background-image:-o-linear-gradient(-180deg, rgba(255,255,255,0) 0%, rgba(18,23,23,0.2) 50%, rgba(18,23,23,0.8) 100%);background-image:linear-gradient(-180deg, rgba(255,255,255,0) 0%, rgba(18,23,23,0.2) 50%, rgba(18,23,23,0.8) 100%);left:0;right:0;bottom:0;width:100%;height:100px;z-index:30;cursor:auto;}.yvp-bottom-bar .yvp-bottom-container{display:block;position:relative;top:56px;height:44px;margin:0 10px 0 10px;cursor:auto;}.yvp-bottom-bar .yvp-bottom-container .yvp-menu-controls{display:inline-block;margin-top:10px;position:absolute;right:0;top:0;float:right;opacity:1;-webkit-transition:opacity .4s linear;-moz-transition:opacity .4s linear;-o-transition:opacity .4s linear;transition:opacity .4s linear;direction:ltr;}.yvp-bottom-bar .yvp-bottom-container .yvp-menu-controls .button{height:24px;width:24px;bottom:0;background-position:center;background-repeat:no-repeat;float:none;display:inline-block;position:relative;margin-left:4px;cursor:pointer}.yvp-bottom-bar .yvp-bottom-container .yvp-menu-controls .yvp-fullscreen-btn{background-image:url("data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iODgiIGhlaWdodD0iODgiIHZpZXdCb3g9IjAgMCA4OCA4OCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48dGl0bGU+ZnVsbHNjcmVlbjwvdGl0bGU+PGcgZmlsbD0iI0ZGRiIgZmlsbC1ydWxlPSJldmVub2RkIj48cGF0aCBkPSJNNzAuNzg1IDUwLjYyMmMtLjExLTEuOTYtMS43MzYtMy40NjYtMy44NC0zLjQzaC0uMDAzYy0yIC4xMTQtMy41NDIgMS44NC0zLjQzMyAzLjgxNGwuMjEyIDYuNDEtMTEuMTA3LTEwLjcyNy01LjA2IDUuMjQ0IDExLjEwMyAxMC43MjItNi41My4wMTNjLTEuOTU3LjAzMy0zLjUzIDEuNTk4LTMuNTc4IDMuNTcyLS4wMiAxLjAwNC4zOSAxLjk5IDEuMTIyIDIuNjk2LjY2LjYzIDEuNTI0Ljk5NiAyLjQ2IDEuMDE3bDE5LjUxMi4xNzQtLjg2LTE5LjUwOE00Mi4yMjQgMzYuNzQ1bC0xMS4xMS0xMC43MyA2LjUzMi0uMDFjMS45NTgtLjAzMyAzLjUyNy0xLjU5NyAzLjU4LTMuNTY4LjAxOC0xLjAxLS4zOS0xLjk5My0xLjExNS0yLjY5Ni0uNjYzLS42MzctMS41My0xLTIuNDY4LTEuMDJsLTE5LjUxLS4xNzQuODU4IDE5LjUxYy4xMSAxLjk1OCAxLjczNiAzLjQ2MyAzLjgzNiAzLjQyNmguMDAzYy45NzItLjA1NCAxLjg2Ny0uNDg0IDIuNTE1LTEuMjEuNjUtLjczLjk3OC0xLjY2Ny45Mi0yLjZsLS4yMTItNi40MTJMMzcuMTYgNDEuOTg2bDUuMDY0LTUuMjQiLz48L2c+PC9zdmc+");background-size:100%;left:0;opacity:.8;cursor:pointer;}.yvp-bottom-bar .yvp-bottom-container .yvp-menu-controls .yvp-fullscreen-btn.fullscreen{background-image:url("data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iODgiIGhlaWdodD0iODgiIHZpZXdCb3g9IjAgMCA4OCA4OCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48dGl0bGU+ZXhpdC1mdWxsc2NyZWVuPC90aXRsZT48ZyBmaWxsPSIjRkZGIiBmaWxsLXJ1bGU9ImV2ZW5vZGQiPjxwYXRoIGQ9Ik00Ny4xOTMgNjUuNzUyYy4wNzMgMS45MTcgMS42MzYgMy40MTQgMy42OSAzLjQxNGguMDA0YzEuOTU3LS4wNzYgMy40OS0xLjczNCAzLjQxOC0zLjY2NWwtLjEtNi4yNjIgMTAuNjY2IDEwLjY2NCA1LjAzMi01LjAzNS0xMC42Ni0xMC42NiA2LjM3NS4wOThjMS45MTMgMCAzLjQ3Ni0xLjUgMy41NTYtMy40My4wMzctLjk4LS4zNDYtMS45NDgtMS4wNS0yLjY1LS42MzMtLjYyOC0xLjQ3LTEtMi4zODUtMS4wMzZsLTE5LjA1Mi0uNTA0LjUwNyAxOS4wNjZNMTcuNTQgMjIuNTdsMTAuNjY3IDEwLjY3LTYuMzgtLjEwM2MtMS45MTIgMC0zLjQ3MiAxLjUtMy41NTUgMy40MjQtLjAzNy45OS4zNDYgMS45NTQgMS4wNDIgMi42NTQuNjM3LjYzNCAxLjQ4IDEuMDAyIDIuMzkzIDEuMDM4bDE5LjA1Mi41MDMtLjUwOC0xOS4wN2MtLjA3My0xLjkxMi0xLjYzNi0zLjQxLTMuNjg3LTMuNDFoLS4wMDRjLS45NS4wMzctMS44My40NC0yLjQ3NiAxLjE0LS42NS43LS45ODQgMS42MS0uOTQ0IDIuNTIybC4xIDYuMjY2TDIyLjU3MyAxNy41NGwtNS4wMzUgNS4wMyIvPjwvZz48L3N2Zz4=");background-size:100%}.yvp-bottom-bar .yvp-bottom-container .yvp-menu-controls .yvp-fullscreen-btn:hover{opacity:1}.yvp-bottom-bar .yvp-bottom-container .yvp-menu-controls .yvp-chromecast-btn{background-image:url("data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjIiIGhlaWdodD0iMTYiIHZpZXdCb3g9IjAgMCAyMiAxNiIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48dGl0bGU+aWNvbi1jaHJvbWVjYXN0PC90aXRsZT48ZyBmaWxsPSIjRkZGIiBmaWxsLXJ1bGU9ImV2ZW5vZGQiPjxwYXRoIGQ9Ik0yMC4wMDMgMGgtMTZjLTEuMTA1IDAtMiAuODk1LTIgMnYxLjMwM2MuNjg3LjE0IDEuMzUuMzQyIDIgLjU3MlYyaDE2djEwaC03LjI2Yy4yOC42NDQuNTEgMS4zMTQuNzAyIDJoNi41NThjMS4xMDQgMCAyLS44OTUgMi0yVjJjMC0xLjEwNS0uODk2LTItMi0yTTYuNDEgMTZjLS4zOTUgMC0uNzY4LS4yMzMtLjkyNy0uNjItLjg1LTIuMDczLTIuNjE2LTMuNjMtNC43MjYtNC4xNjYtLjUzNS0uMTM3LS44Ni0uNjgtLjcyMy0xLjIxNi4xMzUtLjUzNS42OC0uODU1IDEuMjE1LS43MjQgMi43Mi42OTIgNC45OTUgMi42OSA2LjA4NCA1LjM0Ny4yMS41MTItLjAzNiAxLjA5Ni0uNTQ2IDEuMzA2LS4xMjUuMDUtLjI1My4wNzQtLjM4LjA3NCIvPjxwYXRoIGQ9Ik0xMC42MTcgMTZjLS40NDUgMC0uODUtLjI5OC0uOTY3LS43NDgtMS4xLTQuMjItNC41NTctNy40MDItOC44MS04LjEwNS0uNTQ1LS4wOS0uOTE0LS42MDUtLjgyNC0xLjE1LjA5LS41NDUuNjA0LS45MjQgMS4xNS0uODIzIDUuMDMyLjgzIDkuMTIgNC41OSAxMC40MiA5LjU3NC4xMzguNTM0LS4xODIgMS4wOC0uNzE3IDEuMjItLjA4NS4wMi0uMTcuMDMyLS4yNTMuMDMyTTIuNDQ2IDE0LjQ5Yy4wMDQuMDA0LjAwNy4wMS4wMS4wMTUuMDk3LjE3Mi4xNC4zNi4xMy41NDQtLjAxLjE4LS4wNjcuMzYtLjE3NS41MTctLjA4Mi4xMi0uMTkyLjIyNS0uMzI4LjMwMi0uMTU4LjA5LS4zMjcuMTE0LS40OTYuMTE0SC4wMnYtMS40NjZjLS4wMDItLjE3LjAyNS0uMzM4LjExNC0uNDk2LjI3NC0uNDguODg0LS42NDYgMS4zNjQtLjM3NC4yNS4xNDMuNDQuMzIuNTkzLjQ2bC4xNC4xMjdjLjA4OC4wNzQuMTYuMTYuMjE2LjI1NHoiLz48L2c+PC9zdmc+");background-size:100%;opacity:.8;}.yvp-bottom-bar .yvp-bottom-container .yvp-menu-controls .yvp-chromecast-btn:hover{opacity:1}.yvp-bottom-bar .yvp-play-controls{display:block;top:0;left:0;padding-top:10px;opacity:1;-webkit-transition:opacity .4s linear;-moz-transition:opacity .4s linear;-o-transition:opacity .4s linear;transition:opacity .4s linear;direction:ltr}.yvp-bottom-bar .yvp-play-btn{position:relative;display:inline-block;background-position:50% 50%;background-size:100%;bottom:0;left:0;margin-top:0;margin-left:-4px;width:24px;height:24px;cursor:pointer}.yvp-bottom-bar .yvp-upnext-container{bottom:0;left:0;margin-left:4px;width:24px;height:24px;display:inline-block;}.yvp-bottom-bar .yvp-upnext-container.hide{display:none}.yvp-bottom-bar .yvp-upnext-container.disabled{opacity:.25;pointer-events:none}.yvp-bottom-bar .yvp-upnext-container .yvp-upnext-btn{position:relative;background-position:50% 50%;background-size:100%;top:0;left:0;width:24px;height:24px;z-index:2;}.yvp-bottom-bar .yvp-upnext-container .yvp-upnext-btn:hover{cursor:pointer}.yvp-bottom-bar .yvp-upnext-container .yvp-upnext-playlist{z-index:1;}.yvp-bottom-bar .yvp-upnext-container .yvp-upnext-playlist.hide{display:none}.yvp-bottom-bar .yvp-time-container{display:inline-block;position:relative;left:0;top:-8px;font-size:11px;margin-left:4px;}.yvp-bottom-bar .yvp-time-container.yvp-hide{display:none}.yvp-bottom-bar .yvp-current-time,.yvp-bottom-bar .yvp-vs-time,.yvp-bottom-bar .yvp-total-time{font-size:11px;display:inline-block;}.yvp-bottom-bar .yvp-current-time.yvp-hide,.yvp-bottom-bar .yvp-vs-time.yvp-hide,.yvp-bottom-bar .yvp-total-time.yvp-hide{display:none}.yvp-bottom-bar .yvp-current-time,.yvp-bottom-bar .yvp-total-time{position:relative;top:0;left:0 !important;margin-left:0;padding:0;width:auto;background-color:transparent;text-shadow:0 1px 1px rgba(0,0,0,0.3)}.yvp-bottom-bar .yvp-current-time,.yvp-bottom-bar .yvp-total-time{color:rgba(255,255,255,0.8);}.yvp-bottom-bar .yvp-current-time:hover,.yvp-bottom-bar .yvp-total-time:hover{color:rgba(255,255,255,0.8)}.yvp-bottom-bar .yvp-vs-time{position:absolute;bottom:3px;left:34px;width:44px;background-color:rgba(0,0,0,0.3);color:#fff;text-shadow:1px 1px 2px #000;border-radius:2px;padding:3px 0;font-size:11px;text-align:center}.yvp-bottom-bar .yvp-slider.yvp-disable{display:none;pointer-events:none}.yvp-bottom-bar .yvp-slider,.yvp-bottom-bar .yvp-handle,.yvp-bottom-bar .yvp-buffer-bar,.yvp-bottom-bar .yvp-playback-bar{position:absolute;height:4px;bottom:44px;border:0;border-radius:3px;opacity:1;direction:ltr;max-width:100%}.yvp-bottom-bar .yvp-slider.yvp-thick-slider{height:6px;bottom:43px;}.yvp-bottom-bar .yvp-slider.yvp-thick-slider .yvp-buffer-bar,.yvp-bottom-bar .yvp-slider.yvp-thick-slider .yvp-playback-bar{height:6px;bottom:43px}.yvp-bottom-bar .yvp-slider.yvp-thick-slider .yvp-handle{margin-top:-3px}.yvp-bottom-bar .yvp-playback-bar{top:0;background-color:#7300ff;background-image:-webkit-linear-gradient(to right, #7300ff 0%, #188fff 100%);background-image:-o-linear-gradient(to right, #7300ff 0%, #188fff 100%);background-image:linear-gradient(to right, #7300ff 0%, #188fff 100%);opacity:.8}.yvp-bottom-bar .yvp-slider{width:100%;position:absolute;background:rgba(255,255,255,0.2);border-radius:3px;border-color:transparent;cursor:pointer;}.yvp-bottom-bar .yvp-slider .yvp-slider-extension{position:absolute;width:100%;height:16px;top:-6px}.yvp-bottom-bar .yvp-buffer-bar{top:0;background:rgba(255,255,255,0.2)}.yvp-bottom-bar .yvp-visual-seek{display:none;position:absolute;top:-71px;width:112px;height:63px;margin-left:-57px;background-color:#000;border:0;z-index:2;pointer-events:none;text-align:center}.yvp-bottom-bar .yvp-handle{position:absolute;top:0;width:12px;height:12px;border:0;border-radius:50%;background-color:#fff;margin-top:-4px;margin-left:-6px;background-image:none;display:none;z-index:3;}.yvp-bottom-bar .yvp-handle.active{display:block}.yvp-bottom-bar .yvp-ad-break{background-color:rgba(204,204,204,0.5);position:absolute;top:0;width:3px;height:100%;}.yvp-bottom-bar .yvp-ad-break:hover{background-color:rgba(255,255,255,0.5)}.yvp-bottom-bar .yvp-ad-break.occurred{background-color:rgba(0,0,0,0.25)}.yvp-bottom-bar .yvp-fullscreen-btn-replacement{width:9px;height:30px;position:relative;float:right}.yvp-bottom-bar.yvp-bottom-upnext{height:100%;opacity:.55;-webkit-transition:opacity 200ms linear;-moz-transition:opacity 200ms linear;-o-transition:opacity 200ms linear;transition:opacity 200ms linear;background:rgba(18,23,23,0.55);}.yvp-bottom-bar.yvp-bottom-upnext .yvp-bottom-container .yvp-slider{opacity:0;-webkit-transition:opacity 200ms linear;-moz-transition:opacity 200ms linear;-o-transition:opacity 200ms linear;transition:opacity 200ms linear;display:none;pointer-events:none}.yvp-bottom-bar.yvp-bottom-upnext .yvp-playlist-item{-webkit-transform:translateX(0) scale(1,1);-moz-transform:translateX(0) scale(1,1);-ms-transform:translateX(0) scale(1,1);-o-transform:translateX(0) scale(1,1);transform:translateX(0) scale(1,1);-webkit-transition:transform 420ms cubic-bezier(0,.4,.1,1);-moz-transition:transform 420ms cubic-bezier(0,.4,.1,1);-o-transition:transform 420ms cubic-bezier(0,.4,.1,1);transition:transform 420ms cubic-bezier(0,.4,.1,1)}.yvp-bottom-bar.yvp-drag .yvp-play-controls,.yvp-bottom-bar.yvp-drag .yvp-menu-controls{opacity:0;-webkit-transition:opacity 200ms linear;-moz-transition:opacity 200ms linear;-o-transition:opacity 200ms linear;transition:opacity 200ms linear}.yvp-ie9 .yvp-playback-bar{filter:progid:DXImageTransform.Microsoft.gradient(gradientType:1, startColorStr=#AA7300FF, endColorStr=#FF0087FF)}.yvp-bottom-bar.yvp-bottom-upnext .yvp-bottom-container .yvp-menu-controls .button,.yvp-bottom-bar.yvp-bottom-upnext .yvp-bottom-container .yvp-menu-controls .yvp-cc-btn,.yvp-bottom-bar.yvp-bottom-upnext .yvp-bottom-container .yvp-menu-controls .yvp-chromecast-btn,.yvp-bottom-bar.yvp-bottom-upnext .yvp-bottom-container .yvp-menu-controls .yvp-fullscreen-btn{opacity:.2;-webkit-transition:opacity 200ms linear;-moz-transition:opacity 200ms linear;-o-transition:opacity 200ms linear;transition:opacity 200ms linear;pointer-events:none}.yvp-state-video .yvp-bottom-bar .yvp-play-btn,.yvp-flag-casting .yvp-bottom-bar .yvp-play-btn{background-image:url("data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjQiIGhlaWdodD0iMjQiIHZpZXdCb3g9IjAgMCAyNCAyNCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48cGF0aCBkPSJNNi43ODYgMTguOTkzSDYuNzRjLS40MTQgMC0uNzUtLjM0NC0uNzUtLjc1VjUuNzczYzAtLjQxNS4zMzMtLjc1Ljc1LS43NS4xNjYgMCAuMzIuMDU0LjQ0My4xNDZsMTAuNTEgNi4wNjdjLjM2LjIxLjQ5LjY2Ny4yOCAxLjAyOC0uMDU0LjA5My0uMTI0LjE3LS4yMDYuMjMtLjAzNi4wMzItLjA3Ni4wNjItLjEyLjA4OGwtMTAuNDg1IDYuM2MtLjExOC4wNy0uMjQ3LjEwNy0uMzc2LjExeiIgZmlsbD0iI0ZGRiIgZmlsbC1ydWxlPSJldmVub2RkIi8+PC9zdmc+");opacity:.8;}.yvp-state-video .yvp-bottom-bar .yvp-play-btn:hover,.yvp-flag-casting .yvp-bottom-bar .yvp-play-btn:hover{opacity:1}.yvp-state-video.yvp-flag-playing .yvp-bottom-bar .yvp-play-btn,.yvp-flag-casting.yvp-cast-playing .yvp-bottom-bar .yvp-play-btn{background-image:url("data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiIHN0YW5kYWxvbmU9Im5vIj8+Cjxzdmcgd2lkdGg9IjI0cHgiIGhlaWdodD0iMjRweCIgdmlld0JveD0iMCAwIDI0IDI0IiB2ZXJzaW9uPSIxLjEiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgeG1sbnM6eGxpbms9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmsiPgogICAgPCEtLSBHZW5lcmF0b3I6IFNrZXRjaCAzLjguMyAoMjk4MDIpIC0gaHR0cDovL3d3dy5ib2hlbWlhbmNvZGluZy5jb20vc2tldGNoIC0tPgogICAgPHRpdGxlPnBhdXNlPC90aXRsZT4KICAgIDxkZXNjPkNyZWF0ZWQgd2l0aCBTa2V0Y2guPC9kZXNjPgogICAgPGRlZnM+PC9kZWZzPgogICAgPGcgaWQ9ImRlc2t0b3AiIHN0cm9rZT0ibm9uZSIgc3Ryb2tlLXdpZHRoPSIxIiBmaWxsPSJub25lIiBmaWxsLXJ1bGU9ImV2ZW5vZGQiPgogICAgICAgIDxnIGlkPSJwYXVzZSIgZmlsbD0iI0ZGRkZGRiI+CiAgICAgICAgICAgIDxnIGlkPSJSZWN0YW5nbGUtMTMxLSstUmVjdGFuZ2xlLTEzMS1Db3B5IiB0cmFuc2Zvcm09InRyYW5zbGF0ZSg2LjAwMDAwMCwgNS4wMDAwMDApIj4KICAgICAgICAgICAgICAgIDxyZWN0IGlkPSJSZWN0YW5nbGUtMTMxLUNvcHkiIHg9IjguNSIgeT0iMCIgd2lkdGg9IjMiIGhlaWdodD0iMTQiIHJ4PSIxLjUiPjwvcmVjdD4KICAgICAgICAgICAgICAgIDxwYXRoIGQ9Ik0wLjUsMS40OTgyNDUyNCBDMC41LDAuNjcwNzg3MjQyIDEuMTY1Nzk3MjMsMCAyLDAgTDIsMCBDMi44Mjg0MjcxMiwwIDMuNSwwLjY3NTI0OTEgMy41LDEuNDk4MjQ1MjQgTDMuNSwxMi41MDE3NTQ4IEMzLjUsMTMuMzI5MjEyOCAyLjgzNDIwMjc3LDE0IDIsMTQgTDIsMTQgQzEuMTcxNTcyODgsMTQgMC41LDEzLjMyNDc1MDkgMC41LDEyLjUwMTc1NDggTDAuNSwxLjQ5ODI0NTI0IFoiIGlkPSJSZWN0YW5nbGUtMTMxLUNvcHkiPjwvcGF0aD4KICAgICAgICAgICAgPC9nPgogICAgICAgIDwvZz4KICAgIDwvZz4KPC9zdmc+");opacity:.8;}.yvp-state-video.yvp-flag-playing .yvp-bottom-bar .yvp-play-btn:hover,.yvp-flag-casting.yvp-cast-playing .yvp-bottom-bar .yvp-play-btn:hover{opacity:1}.yvp-state-end-screen .yvp-bottom-bar .yvp-play-btn{background-image:url("data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjQiIGhlaWdodD0iMjQiIHZpZXdCb3g9IjAgMCAyNCAyNCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48ZyBmaWxsPSIjRkZGIiBmaWxsLXJ1bGU9ImV2ZW5vZGQiPjxwYXRoIGQ9Ik0xNi44NyAxNS41NDVjLS4xMS0uMTk3LS4yNzQtLjM0NS0uNDctLjQyNS0uMjA0LS4wOS0uNDUtLjA5LS42MS0uMDQtLjEwNy4wMjUtLjIwNS4wNjgtLjMyNy4xNDctLjA3Mi4wNS0uMTcyLjE1LS4yMTYuMjA0LS43NzYgMS4wMTgtMS45OTcgMS42MjctMy4yNjYgMS42MjctMi4yNDQgMC00LjA3LTEuODItNC4wNy00LjA1MyAwLTIuMTMzIDEuNzg3LTMuOTQ3IDMuOTgtNC4wNDNsLjUyLS4wMTNWN2wtLjU1Mi4wMTNDOC41NzMgNy4xMyA2IDkuNzYgNiAxMy4wMDNjMCAzLjMxMiAyLjY5MyA2LjAwNCA2LjAwNSA2LjAwNCAxLjg2NCAwIDMuNTktLjg0NSA0LjctMi4yOGwuMDctLjA5Yy4wMy0uMDQyLjA1My0uMDgyLjA3LS4xMDguMTA0LS4xNjguMTU1LS4zMzQuMTU1LS41MSAwLS4xNi0uMDQzLS4zMi0uMTMtLjQ3NSIvPjxwYXRoIGQ9Ik0xMi4zMTIgMTEuMDA4Yy0uMTcyIDAtLjMxMi0uMTUtLjMxMi0uMzIzVjUuMzIzYzAtLjE4LjEzOC0uMzIzLjMxMi0uMzIzLjA2OCAwIC4xMzIuMDI0LjE4NC4wNjNsNC4zNjUgMi42MWMuMTUyLjA5LjIwNC4yODYuMTE4LjQ0LS4wMjIuMDQtLjA1Mi4wNzUtLjA4Ni4xLS4wMTUuMDE0LS4wMzIuMDI3LS4wNS4wMzhsLTQuMzU1IDIuNzFjLS4wNS4wMy0uMTAzLjA0Ni0uMTU2LjA0OGgtLjAxOHoiLz48L2c+PC9zdmc+");opacity:.8;background-size:95%;}.yvp-state-end-screen .yvp-bottom-bar .yvp-play-btn:hover{opacity:1}.yvp-state-video .yvp-bottom-bar .yvp-upnext-container .yvp-upnext-btn{background-image:url("data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iODgiIGhlaWdodD0iODgiIHZpZXdCb3g9IjAgMCA4OCA4OCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48dGl0bGU+dXBuZXh0PC90aXRsZT48ZyBmaWxsPSIjRkZGIiBmaWxsLXJ1bGU9ImV2ZW5vZGQiPjxwYXRoIGQ9Ik0yMi4wOTIgNjYuMDIzbC0uMTMuMDAyYy0yLjAyNCAwLTMuNjY1LTEuNjQ1LTMuNjY1LTMuNjc2VjI1LjdjMC0xLjU1NS45NjYtMi44ODQgMi4zMjYtMy40MiAxLjA1OC0uNDY2IDIuMzE0LS40NCAzLjM4Ny4xOGwzMS42MDggMTguMjVjLjQ2LjI2NS44NDIuNjEzIDEuMTM4IDEuMDE1LjEuMTMyLjE5NS4yNzIuMjguNDIgMS4wNjMgMS44NC40MzQgNC4xOTUtMS40MTcgNS4yNjRMMjQuMjYgNjUuNTFjLS42ODMuMzk1LTEuNDM4LjU1Ny0yLjE3LjUxek02Mi4zMzMgMjIuMDA0YzAtMi4wMjcgMS42NDYtMy42NyAzLjY2Ny0zLjY3IDIuMDI1IDAgMy42NjcgMS42NSAzLjY2NyAzLjY3djQzLjk5MmMwIDIuMDI3LTEuNjQ2IDMuNjctMy42NjcgMy42Ny0yLjAyNSAwLTMuNjY3LTEuNjUtMy42NjctMy42N1YyMi4wMDR6Ii8+PC9nPjwvc3ZnPg==");opacity:.8;display:inline-block;}.yvp-state-video .yvp-bottom-bar .yvp-upnext-container .yvp-upnext-btn:hover{opacity:1}.yvp-state-start-screen .yvp-top-bar .yvp-content-type{display:none}.yvp-state-end-screen .yvp-bottom-bar .yvp-visual-seek{display:none !important}.yvp-state-end-screen .yvp-bottom-bar .yvp-slider{pointer-events:none}.yvp-state-end-screen .yvp-playing-item-title.yvp-title-standard{opacity:0;z-index:0}.yvp-browser-mobile .yvp-bottom-bar .yvp-play-controls{padding-top:7px}.yvp-browser-mobile .yvp-bottom-bar .yvp-play-btn{opacity:1;width:30px;height:30px}.yvp-browser-mobile .yvp-bottom-bar .yvp-upnext-container .yvp-upnext-btn{opacity:1}.yvp-browser-mobile .yvp-bottom-bar .yvp-time-container{top:-10px}.yvp-browser-mobile .yvp-bottom-bar .yvp-current-time,.yvp-browser-mobile .yvp-bottom-bar .yvp-vs-time,.yvp-browser-mobile .yvp-bottom-bar .yvp-total-time{font-size:14px}.yvp-browser-mobile .yvp-bottom-bar .yvp-handle{width:14px;height:14px;margin-top:-5px;display:block}.yvp-browser-mobile .yvp-bottom-bar .yvp-bottom-container .yvp-menu-controls{margin-top:7px;}.yvp-browser-mobile .yvp-bottom-bar .yvp-bottom-container .yvp-menu-controls .button{width:30px;height:30px}.yvp-browser-mobile .yvp-bottom-bar .yvp-bottom-container .yvp-menu-controls .yvp-fullscreen-btn{opacity:1;margin-bottom:0;margin-right:0}.yvp-state-video .yvp-bottom-bar{display:block}.yvp-state-start-screen .yvp-bottom-bar,.yvp-state-error .yvp-bottom-bar,.yvp-state-end-screen .yvp-bottom-bar,.yvp-state-loading .yvp-bottom-bar{display:none}.yvp-mode-ad .yvp-bottom-bar .yvp-slider,.yvp-mode-vpaid .yvp-bottom-bar .yvp-slider,.yvp-mode-ad .yvp-bottom-bar .yvp-handle,.yvp-mode-vpaid .yvp-bottom-bar .yvp-handle,.yvp-mode-ad .yvp-bottom-bar .yvp-buffer-bar,.yvp-mode-vpaid .yvp-bottom-bar .yvp-buffer-bar,.yvp-mode-ad .yvp-bottom-bar .yvp-playback-bar,.yvp-mode-vpaid .yvp-bottom-bar .yvp-playback-bar{pointer-events:none;height:4px !important;bottom:0 !important;display:none}.yvp-mode-ad .yvp-bottom-bar .yvp-handle,.yvp-mode-vpaid .yvp-bottom-bar .yvp-handle,.yvp-mode-ad .yvp-bottom-bar .yvp-buffer-bar,.yvp-mode-vpaid .yvp-bottom-bar .yvp-buffer-bar{display:none}.yvp-mode-ad .yvp-bottom-bar .yvp-content-type,.yvp-mode-vpaid .yvp-bottom-bar .yvp-content-type{display:block}.yvp-mode-ad .yvp-bottom-bar .yvp-ad-break,.yvp-mode-vpaid .yvp-bottom-bar .yvp-ad-break{display:none}.yvp-cast-overlay{position:absolute;top:0;right:0;bottom:0;left:0;background-color:#000;z-index:50;display:none;color:#fff;background-repeat:no-repeat;background-size:cover;}.yvp-cast-overlay:after{content:\'\';background-color:rgba(0,0,0,0.85);display:block;width:100%;height:100%;position:absolute;top:0;z-index:-1}.yvp-cast-overlay > div{position:relative;height:calc(100% - 70px);}.yvp-cast-overlay > div .cast-overlay-header{height:25%;display:flex;flex-direction:column;justify-content:center;border-bottom:1px solid #777}.yvp-cast-overlay > div .cast-device-info{margin-left:50px;}.yvp-cast-overlay > div .cast-device-info:before{content:\'\';float:left;background-image:url("data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjIiIGhlaWdodD0iMTYiIHZpZXdCb3g9IjAgMCAyMiAxNiIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48dGl0bGU+aWNvbi1jaHJvbWVjYXN0LW9uPC90aXRsZT48ZyBmaWxsPSIjRkZGIiBmaWxsLXJ1bGU9ImV2ZW5vZGQiPjxwYXRoIGQ9Ik0yMC4wMDMgMGgtMTZjLTEuMTA1IDAtMiAuODk1LTIgMnYxLjMwM2MuNjg3LjE0IDEuMzUuMzQyIDIgLjU3MlYyaDE2djEwaC03LjI2Yy4yOC42NDQuNTEgMS4zMTQuNzAyIDJoNi41NThjMS4xMDQgMCAyLS44OTUgMi0yVjJjMC0xLjEwNS0uODk2LTItMi0yIi8+PHBhdGggZD0iTTExLjY5IDEwSDE4VjRINnYuNzNjMi4zMjcgMS4yMyA0LjI5IDMuMDU0IDUuNjkgNS4yN3pNNi40MSAxNmMtLjM5NSAwLS43NjgtLjIzMy0uOTI3LS42Mi0uODUtMi4wNzMtMi42MTYtMy42My00LjcyNi00LjE2Ni0uNTM1LS4xMzctLjg2LS42OC0uNzIzLTEuMjE2LjEzNS0uNTM1LjY4LS44NTUgMS4yMTUtLjcyNCAyLjcyLjY5MiA0Ljk5NSAyLjY5IDYuMDg0IDUuMzQ3LjIxLjUxMi0uMDM2IDEuMDk2LS41NDYgMS4zMDYtLjEyNS4wNS0uMjUzLjA3NC0uMzguMDc0Ii8+PHBhdGggZD0iTTEwLjYxNyAxNmMtLjQ0NSAwLS44NS0uMjk4LS45NjctLjc0OC0xLjEtNC4yMi00LjU1Ny03LjQwMi04LjgxLTguMTA1LS41NDUtLjA5LS45MTQtLjYwNS0uODI0LTEuMTUuMDktLjU0NS42MDQtLjkyNCAxLjE1LS44MjMgNS4wMzIuODMgOS4xMiA0LjU5IDEwLjQyIDkuNTc0LjEzOC41MzQtLjE4MiAxLjA4LS43MTcgMS4yMi0uMDg1LjAyLS4xNy4wMzItLjI1My4wMzJNMi40NDYgMTQuNDljLjAwNC4wMDQuMDA3LjAxLjAxLjAxNS4wOTcuMTcyLjE0LjM2LjEzLjU0NC0uMDEuMTgtLjA2Ny4zNi0uMTc1LjUxNy0uMDgyLjEyLS4xOTIuMjI1LS4zMjguMzAyLS4xNTguMDktLjMyNy4xMTQtLjQ5Ni4xMTRILjAydi0xLjQ2NmMtLjAwMi0uMTcuMDI1LS4zMzguMTE0LS40OTYuMjc0LS40OC44ODQtLjY0NiAxLjM2NC0uMzc0LjI1LjE0My40NC4zMi41OTMuNDZsLjE0LjEyN2MuMDg4LjA3NC4xNi4xNi4yMTYuMjU0eiIvPjwvZz48L3N2Zz4=");background-repeat:no-repeat;background-size:90%;background-position:50%;margin-right:10px;width:36px;height:36px}.yvp-cast-overlay > div .cast-device-name{font-size:.9em;position:relative;top:3px}.yvp-cast-overlay > div .cast-device-type{font-size:.7em;color:#999}.yvp-cast-overlay > div .cast-overlay-content{position:relative;height:50%;left:0;right:0;cursor:pointer;opacity:.6;display:flex;justify-content:center;align-items:center;}.yvp-cast-overlay > div .cast-overlay-content:hover{opacity:1}.yvp-cast-overlay > div .cast-overlay-content:after{content:\'\';display:block;background-image:url("data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjQiIGhlaWdodD0iMjQiIHZpZXdCb3g9IjAgMCAyNCAyNCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48cGF0aCBkPSJNNi43ODYgMTguOTkzSDYuNzRjLS40MTQgMC0uNzUtLjM0NC0uNzUtLjc1VjUuNzczYzAtLjQxNS4zMzMtLjc1Ljc1LS43NS4xNjYgMCAuMzIuMDU0LjQ0My4xNDZsMTAuNTEgNi4wNjdjLjM2LjIxLjQ5LjY2Ny4yOCAxLjAyOC0uMDU0LjA5My0uMTI0LjE3LS4yMDYuMjMtLjAzNi4wMzItLjA3Ni4wNjItLjEyLjA4OGwtMTAuNDg1IDYuM2MtLjExOC4wNy0uMjQ3LjEwNy0uMzc2LjExeiIgZmlsbD0iI0ZGRiIgZmlsbC1ydWxlPSJldmVub2RkIi8+PC9zdmc+");background-repeat:no-repeat;background-size:80%;background-position:50%;width:10%;height:0;padding-bottom:10%;}.yvp-cast-playing .yvp-cast-overlay > div .cast-overlay-content:after{background-image:url("data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiIHN0YW5kYWxvbmU9Im5vIj8+Cjxzdmcgd2lkdGg9IjI0cHgiIGhlaWdodD0iMjRweCIgdmlld0JveD0iMCAwIDI0IDI0IiB2ZXJzaW9uPSIxLjEiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgeG1sbnM6eGxpbms9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmsiPgogICAgPCEtLSBHZW5lcmF0b3I6IFNrZXRjaCAzLjguMyAoMjk4MDIpIC0gaHR0cDovL3d3dy5ib2hlbWlhbmNvZGluZy5jb20vc2tldGNoIC0tPgogICAgPHRpdGxlPnBhdXNlPC90aXRsZT4KICAgIDxkZXNjPkNyZWF0ZWQgd2l0aCBTa2V0Y2guPC9kZXNjPgogICAgPGRlZnM+PC9kZWZzPgogICAgPGcgaWQ9ImRlc2t0b3AiIHN0cm9rZT0ibm9uZSIgc3Ryb2tlLXdpZHRoPSIxIiBmaWxsPSJub25lIiBmaWxsLXJ1bGU9ImV2ZW5vZGQiPgogICAgICAgIDxnIGlkPSJwYXVzZSIgZmlsbD0iI0ZGRkZGRiI+CiAgICAgICAgICAgIDxnIGlkPSJSZWN0YW5nbGUtMTMxLSstUmVjdGFuZ2xlLTEzMS1Db3B5IiB0cmFuc2Zvcm09InRyYW5zbGF0ZSg2LjAwMDAwMCwgNS4wMDAwMDApIj4KICAgICAgICAgICAgICAgIDxyZWN0IGlkPSJSZWN0YW5nbGUtMTMxLUNvcHkiIHg9IjguNSIgeT0iMCIgd2lkdGg9IjMiIGhlaWdodD0iMTQiIHJ4PSIxLjUiPjwvcmVjdD4KICAgICAgICAgICAgICAgIDxwYXRoIGQ9Ik0wLjUsMS40OTgyNDUyNCBDMC41LDAuNjcwNzg3MjQyIDEuMTY1Nzk3MjMsMCAyLDAgTDIsMCBDMi44Mjg0MjcxMiwwIDMuNSwwLjY3NTI0OTEgMy41LDEuNDk4MjQ1MjQgTDMuNSwxMi41MDE3NTQ4IEMzLjUsMTMuMzI5MjEyOCAyLjgzNDIwMjc3LDE0IDIsMTQgTDIsMTQgQzEuMTcxNTcyODgsMTQgMC41LDEzLjMyNDc1MDkgMC41LDEyLjUwMTc1NDggTDAuNSwxLjQ5ODI0NTI0IFoiIGlkPSJSZWN0YW5nbGUtMTMxLUNvcHkiPjwvcGF0aD4KICAgICAgICAgICAgPC9nPgogICAgICAgIDwvZz4KICAgIDwvZz4KPC9zdmc+")}.yvp-cast-overlay > div .cast-overlay-footer{height:25%;text-align:center;border-top:1px solid #777}.yvp-cast-overlay > div .cast-disconnect-btn{position:relative;top:8px;cursor:pointer;padding:2px 5px;color:#999;}.yvp-cast-overlay > div .cast-disconnect-btn:hover{color:#fff}.yvp-flag-casting .yvp-cast-overlay{display:block}.yvp-flag-casting .yvp-bottom-bar{z-index:75;opacity:1 !important;-webkit-transition:none !important;-moz-transition:none !important;-o-transition:none !important;transition:none !important;display:block !important}body.yvp-lightbox{overflow:hidden !important;}body.yvp-lightbox .yvp-lightbox-ancestor{z-index:2147483647 !important;}body.yvp-lightbox .yvp-lightbox-ancestor .yvp-content.yvp-browser-desktop{position:fixed;top:0;left:0;width:100% !important;height:100% !important;z-index:2147483647}.yvp-stream .yvp-bottom-bar{height:60px;}.yvp-stream .yvp-bottom-bar .yvp-volume-bar-container{z-index:30}.yvp-stream .yvp-bottom-bar .yvp-bottom-container{top:26px;margin:0 8px;}.yvp-stream .yvp-bottom-bar .yvp-bottom-container .yvp-menu-controls{margin-top:0;}.yvp-stream .yvp-bottom-bar .yvp-bottom-container .yvp-menu-controls .yvp-setting-btn,.yvp-stream .yvp-bottom-bar .yvp-bottom-container .yvp-menu-controls .yvp-cc-btn{display:none}.yvp-stream .yvp-bottom-bar .yvp-play-controls{padding-top:0}.yvp-stream .yvp-bottom-bar .yvp-visual-seek{display:none !important}.yvp-stream .yvp-bottom-bar .yvp-slider{display:none;pointer-events:none}.yvp-stream .yvp-bottom-bar .yvp-upnext-container,.yvp-stream .yvp-bottom-bar .yvp-time-container{display:none}.yvp-content.yvp-stream .yvp-playing-item-title.yvp-title-standard{padding:8px 10px 8px 10px;font-weight:500;font-size:16px;line-height:20px;z-index:29}.yvp-ministream .yvp-bottom-bar{height:25px;}.yvp-ministream .yvp-bottom-bar .yvp-volume-bar-container{bottom:85px;padding:6px 0;width:20px;left:2px;}.yvp-ministream .yvp-bottom-bar .yvp-volume-bar-container:after{left:5px}.yvp-ministream .yvp-bottom-bar .yvp-volume-level{margin-left:7px}.yvp-ministream .yvp-bottom-bar .yvp-bottom-container{top:0;margin:0 4px;}.yvp-ministream .yvp-bottom-bar .yvp-bottom-container .yvp-menu-controls{margin-top:0;}.yvp-ministream .yvp-bottom-bar .yvp-bottom-container .yvp-menu-controls .button{margin-left:0}.yvp-ministream .yvp-bottom-bar .yvp-bottom-container .yvp-menu-controls .yvp-setting-btn,.yvp-ministream .yvp-bottom-bar .yvp-bottom-container .yvp-menu-controls .yvp-cc-btn{display:none}.yvp-ministream .yvp-bottom-bar .yvp-play-controls{padding-top:0}.yvp-ministream .yvp-bottom-bar .yvp-visual-seek{display:none !important}.yvp-ministream .yvp-bottom-bar .yvp-slider{display:none;pointer-events:none}.yvp-ministream .yvp-bottom-bar .yvp-upnext-container,.yvp-ministream .yvp-bottom-bar .yvp-time-container{display:none}.yvp-ministream .yvp-start-screen .yvp-start-screen-button{width:50px;height:50px;margin:-25px 0 0 -25px}.yvp-content.yvp-ministream .yvp-main .yvp-mute-indicator{top:66%;right:0}.yvp-content.yvp-ministream .yvp-playing-item-title.yvp-title-standard{opacity:0;z-index:0}.yvp-ministream.yvp-state-end-screen .yvp-bottom-bar{height:30px;}.yvp-ministream.yvp-state-end-screen .yvp-bottom-bar .yvp-bottom-container{top:5px}.yvp-state-end-screen .yvp-bottom-bar{display:block}'),
r.prototype.create=function(){var e,t=this;l.isFunction(p)?(t._desktopControls=new p(t._eventBus,t._view,t._model),e=t._desktopControls.create()):e=[s.render(_).querySelector(".yvp-bottom-bar"),s.render(_,{strings:c.i18n}).querySelector(".yvp-top-bar"),s.render(_).querySelector(".yvp-playing-item-title")],t._bottomBar=e[0],t._bottomBarContainer=t._bottomBar.querySelector(".yvp-bottom-container"),t._slider=t._bottomBar.querySelector(".yvp-slider"),t._bufferBar=t._bottomBar.querySelector(".yvp-buffer-bar"),t._timeDisplay=t._bottomBar.querySelector(".yvp-time-container"),t._currentTimeLabel=t._bottomBar.querySelector(".yvp-current-time"),t._totalTimeLabel=t._bottomBar.querySelector(".yvp-total-time"),t._handle=t._bottomBar.querySelector(".yvp-handle"),t._playbackBar=t._bottomBar.querySelector(".yvp-playback-bar"),t._playBtn=t._bottomBar.querySelector(".yvp-play-btn"),t._upNextBtn=t._bottomBar.querySelector(".yvp-upnext-btn"),t._upNextPlist=t._bottomBar.querySelector(".yvp-upnext-playlist"),t._upNextContainer=t._bottomBar.querySelector(".yvp-upnext-container"),t._seekBar=t._bottomBar.querySelector(".yvp-seek"),t._visualSeekContainer=t._bottomBar.querySelector(".yvp-visual-seek"),t._fullscreenBtn=t._bottomBar.querySelector(".yvp-fullscreen-btn"),t._volumeBtn=t._bottomBar.querySelector(".yvp-volume-btn"),t._volumeBarContainer=t._bottomBar.querySelector(".yvp-volume-bar-container"),t._volumeIndicator=t._bottomBar.querySelector(".yvp-volume-level"),t._volumeBar=t._bottomBar.querySelector(".yvp-volume-bar"),t._volumeValue=t._bottomBar.querySelector(".yvp-volume-value"),t._volumeHandle=t._bottomBar.querySelector(".yvp-volume-handle"),t._titleBar=e[2],t._topBar=e[1],t._contentType=t._topBar&&t._topBar.querySelector(".yvp-content-type"),t._showTitleOnHover=t._model.ui.showTitleOnHover;var n=t._fullscreenBtn&&d.ie&&d.ie<=10&&s.isIFrame();if(n=n||!t._model.ui.showFullscreen){var r=document.createElement("div");s.classList(r).add("yvp-fullscreen-btn-replacement"),t._fullscreenBtn.parentNode.insertBefore(r,t._fullscreenBtn),t._fullscreenBtn.parentNode.removeChild(t._fullscreenBtn),t._fullscreenBtn=null}return t._initAriaProperties(),t._bindEvents(),e},r.prototype._renderPlaylist=function(){var e=this,t=e._view.getPlaylistUIPosition(),n=e._view.getContentNode();e._fujiPlaylist=new u(e._eventBus,e._view,e._model),"hidden"===t&&(e._playlistNode=e._fujiPlaylist.create("hidden"),e._hiddenPlaylistNode=e._playlistNode,e._upNextPlist.appendChild(e._playlistNode),s.classList(e._upNextContainer).remove("hide"),d.mobile||e.attachUpNextMouseEvents()),"bottom"!==t||d.mobile||(e._hiddenPlaylistNode=e._fujiPlaylist.create("hidden"),e._playlistNode=e._fujiPlaylist.create("bottom"),e._upNextPlist.appendChild(e._hiddenPlaylistNode),n.appendChild(e._playlistNode),s.classList(e._upNextContainer).remove("hide"),s.classList(e._upNextPlist).add("hide")),"right"!==t||d.mobile||(e._hiddenPlaylistNode=e._fujiPlaylist.create("hidden"),e._playlistNode=e._fujiPlaylist.create("right"),e._upNextPlist.appendChild(e._hiddenPlaylistNode),n.appendChild(e._playlistNode),s.classList(e._upNextContainer).remove("hide"),s.classList(e._upNextPlist).add("hide")),e._playlistRendered=!0},r.prototype.attachUpNextMouseEvents=function(){var e=this;e._upNextContainer.addEventListener("mouseover",function(t){s.classList(e._bottomBar).contains("yvp-bottom-upnext")||(s.classList(e._bottomBar).add("yvp-bottom-upnext"),e._bottomBarContainer.style.top=e._getUpnextBottomContainerTop()+"px",e._eventBus.publish(a.API.UI_INTERACT,{srcElement:"ctrl-next-hover"}),e._eventBus.publish(a.API.UI_INTERACT,{srcElement:"ui_pl_nxt_hvr"}))}),e._upNextContainer.addEventListener("mouseout",function(){setTimeout(function(){window.getComputedStyle(e._hiddenPlaylistNode).zIndex<0&&(s.classList(e._bottomBar).remove("yvp-bottom-upnext"),e._bottomBarContainer.removeAttribute("style"))},100)})},r.prototype.detachUpNextMouseEvents=function(){var e=this;e._upNextContainer.addEventListener("mouseover",function(t){s.classList(e._bottomBar).remove("yvp-bottom-upnext"),e._bottomBarContainer.removeAttribute("style")})},r.prototype._onAdPlaying=function(){var e=this;e._hideVisualSeek(),e._sliderRemoveEventListener(),e._enableUpNextButton(!1)},r.prototype._onAdPlaybackStarted=function(){var e=this;e._syncVolumeUI(),e._renderPlaylistFirstBatch(),e._enableUpNextButton(!1),s.classList(e._contentType).add("hide")},r.prototype._onAdEnded=function(){var e=this;e._sliderAddEventListener()},r.prototype._onPlaybackStarted=function(){var e=this;e._isLive?e._setLiveMode():e._setVodMode(),e._syncVolumeUI(),e._renderPlaylistFirstBatch(),e._upNEnabled||(e._enableUpNextButton(!0),e._renderTitle())},r.prototype._renderTitle=function(){var e=this;e._updateCurrentTitle(),s.classList(e._titleBar).remove("yvp-title-standard"),s.classList(e._titleBar).remove("yvp-hide");var t=e._model.ui.showTitleOnStart||"";switch(t){case"standard":e._model.playback.autoplay&&(s.classList(e._titleBar).add("yvp-title-standard"),setTimeout(function(){s.classList(e._titleBar).add("yvp-hide")},v))}},r.prototype._updateCurrentTitle=function(){var e=this,t=e._model.playlist.getCurrentItem();e._titleBar.innerHTML=t&&t.title},r.prototype._onControlsBarChange=function(e){var t=this;t._showTitleOnHover&&(e?t._showTitle():t._hideTitle())},r.prototype._showTitle=function(){var e=this;s.classList(e._titleBar).add("yvp-title-standard"),s.classList(e._titleBar).remove("yvp-hide")},r.prototype._hideTitle=function(){var e=this;s.classList(e._titleBar).add("yvp-title-standard"),s.classList(e._titleBar).add("yvp-hide")},r.prototype._renderPlaylistFirstBatch=function(){var e=this;e._playlistFirstPageRendered!==!0&&e._view.showPlaylist()&&!e._model.playback.loop&&(e._eventBus.publish(a.RENDER_PLAYLIST_FIRST_BATCH),e._playlistFirstPageRendered=!0)},r.prototype._setLiveMode=function(){var e=this;s.classList(e._slider).add("yvp-disable"),s.classList(e._timeDisplay).add("yvp-hide");var t=e._model.ui.contentTypeLabel;l.isString(t)&&""!==t?(e._contentType.innerHTML=t,e._contentType.setAttribute("aria-label",t),s.classList(e._contentType).remove("hide"),s.classList(e._titleBar).add("yvp-live")):e._liveState&&"live"===e._liveState&&(e._contentType.innerHTML=c.i18n.LIVE,e._contentType.setAttribute("aria-label",c.i18n.LIVE),s.classList(e._contentType).remove("hide"),s.classList(e._titleBar).add("yvp-live"))},r.prototype._setVodMode=function(){var e=this;s.classList(e._slider).remove("yvp-disable"),s.classList(e._timeDisplay).remove("yvp-hide"),s.classList(e._titleBar).remove("yvp-live")},r.prototype._onVideoEnded=function(){var e=this;e._enableUpNextButton(!1)},r.prototype._bindEvents=function(){var e=this;e._playTap=new o(e._playBtn),e._onPlayTap=function(t){t.stopPropagation();var n=e._view.getCurrentViewState(),r=e._model.playlist.getCurrentItem().id,i=e._model.playbackState.paused?"ctrl-play-btn":"ctrl-pause-btn";n===m?(e._eventBus.publish(a.RELATED_ITEM_CLICK,r,-1,!1,!1),e._resetTimeLabels()):(e._eventBus.publish(a.API.UI_INTERACT,{srcElement:i}),e._eventBus.publish(a.TOGGLE_PLAY_PAUSE))},e._playBtn.addEventListener("tap",e._onPlayTap),e._fullscreenBtn&&(e._fullscreenTap=new o(e._fullscreenBtn),e._onFullscreenTap=function(t){t.stopPropagation(),e._view.toggleFullscreen()},e._fullscreenBtn.addEventListener("tap",e._onFullscreenTap)),e._bottomBarClick=new o(e._bottomBar),e._onBottomBarClick=function(e){e.stopPropagation()},e._bottomBar.addEventListener("tap",e._onBottomBarClick),e._sliderAddEventListener(),e._bindVolume()},r.prototype._onRelatedItemClick=function(e,t,n){var r=this;r._resetTimeLabels(),r._updateCurrentTitle()},r.prototype._onRelatedItemsLoaded=function(e,t){var n=this;n._view.showPlaylist()&&(n._onUpNextBtnTap||(n._onUpNextBtnTap=function(){return d.mobile?(n._upNextPlist.style.display="block",void(s.classList(n._upNextPlist).contains("open")?(s.classList(n._bottomBar).remove("yvp-bottom-upnext"),s.classList(n._upNextPlist).remove("open"),n._bottomBarContainer.removeAttribute("style")):(s.classList(n._upNextPlist).add("open"),n._upNextPlist.style.display="block",n._bottomBarContainer.style.top=n._getUpnextBottomContainerTop()+"px",s.classList(n._bottomBar).add("yvp-bottom-upnext")))):void n._fujiPlaylist.upNextBtnTapHandler()},n._upNextBtnTap=new o(n._upNextBtn),n._upNextBtn.addEventListener("tap",n._onUpNextBtnTap)),t&&t.length>2?n._fujiPlaylist.renderPlaylist(t):e&&n._enableUpNextButton(!1))},r.prototype._enableUpNextButton=function(e){var t=this;t._upNextContainer&&t._view.showPlaylist()&&(e&&!t._model.playlist.getCurrentItem().isLive()?s.classList(t._upNextContainer).remove("disabled"):s.classList(t._upNextContainer).add("disabled"),t._upNEnabled=e)},r.prototype._resetTimeLabels=function(){var e=this;e._currentTimeLabel.innerHTML="0:00",e._totalTimeLabel.innerHTML="/ 0:00"},r.prototype._getUpnextBottomContainerTop=function(){var e=this,t=e._view.getContentNode().clientHeight,n=e._bottomBarContainer.clientHeight,r=e._view.getNFLBrandingNode(),i=0;return null!==r&&(i=r.clientHeight),t-n-i},r.prototype._updateFullscreen=function(e){var t=this;t._fullscreenBtn&&(e?(s.classList(t._fullscreenBtn).add("fullscreen"),t._updateFullscreenTooltip(c.i18n.EXIT_FULLSCREEN)):(s.classList(t._fullscreenBtn).remove("fullscreen"),t._updateFullscreenTooltip(c.i18n.FULLSCREEN_SPACE))),t._fullScreenStreamModeUpdate(e),t.syncAriaState()},r.prototype._updateFullscreenTooltip=function(e){var t=this;if(t._fullscreenBtn){var n=t._fullscreenBtn.querySelector(".yvp-tooltip-content");n&&(n.innerHTML=e)}},r.prototype._sliderAddEventListener=function(){var e=this;e._seekBar&&(e._seekTap=new o(e._seekBar),e._onSeekTap=function(t){t.stopPropagation();var n=(t.clientX||t.pageX)-e._seekBar.getBoundingClientRect().left,r=n/e._seekBar.clientWidth,i=Math.min(r*e._duration,Math.max(e._duration-1,0));e._view.seek(i)},e._seekBar.addEventListener("tap",e._onSeekTap)),e._onSliderMove=function(t){e._eventBus.publish(a.SEEK_BAR_MOUSEOVER,t),s.classList(e._handle).add("active"),s.classList(e._slider).add("yvp-thick-slider"),e._updateVisualSeek(t),e._preventTouchDefault(t)},e._onSliderLeave=function(t){e._eventBus.publish(a.SEEK_BAR_MOUSEOUT,t),s.classList(e._handle).remove("active"),s.classList(e._slider).remove("yvp-thick-slider"),e._hideVisualSeek(t),e._preventTouchDefault(t)},e._bindScrollOverEvents(e._slider,e._onSliderMove,e._onSliderLeave),e._onSeekDown=function(t){s.classList(e._handle).add("active"),e._preventTouchDefault(t),e._seeking=!0,e._eventBus.publish(a.CONTROLS_SEEK_START);var n=e._getSeekFraction(t),r=Math.min(n*e._duration,Math.max(e._duration-1,0));e._eventBus.publish(a.CTRL_SEEK,Math.round(r)),e._onSeekMove(t)},e._onSeekMove=function(t){if(e._seeking){e._preventTouchDefault(t),s.classList(e._bottomBar).add("yvp-drag"),s.classList(e._handle).add("active"),s.classList(e._slider).add("yvp-thick-slider"),e._updateVisualSeek(t);var n=e._getSeekFraction(t),r=Math.min(n*e._duration,Math.max(e._duration-1,0));r=r>1?r:1,e._playbackBar.setAttribute("style","width: "+100*n+"%;"),e._bufferBar.setAttribute("style","width: 0%;"),e._handle.setAttribute("style","left: "+100*n+"%;"),e._eventBus.publish(a.CONTROLS_SEEKING,r)}},e._onSeekUp=function(t){e._seeking&&(s.classList(e._bottomBar).remove("yvp-drag"),s.classList(e._handle).remove("active"),s.classList(e._slider).remove("yvp-thick-slider"),e._hideVisualSeek(t),e._preventTouchDefault(t),e._seeking=!1,e._eventBus.publish(a.CONTROLS_SEEK_END))},e._bindDragEvents(e._slider,e._onSeekDown,e._onSeekMove,e._onSeekUp)},r.prototype._sliderRemoveEventListener=function(){var e=this;e._unbindScrollOverEvents(e._slider,e._onSliderMove,e._onSliderLeave),e._unbindDragEvents(e._slider,e._onSeekDown,e._onSeekMove,e._onSeekUp)},r.prototype._preventTouchDefault=function(e){-1!==e.type.indexOf("touch")&&e.preventDefault()},r.prototype._onMediaItemLoaded=function(e){var t=this;t._isLive=e.isLive(),t._liveState=e.liveState,t._contentType.innerHTML="",t._contentType.setAttribute("aria-label",""),s.classList(t._contentType).add("hide"),t._isLive?t._setLiveMode():t._setVodMode(),!t._playlistRendered&&t._view.showPlaylist()&&t._renderPlaylist(),t._model.playback.autoplay!==!0&&t._renderPlaylistFirstBatch()},r.prototype._onPlaybackProgress=function(e,t,n,r){var i=this;void 0!==n&&i._duration!==n&&(i._duration=n),r&&i._updateBuffer(r),void 0!==t&&(i._updateProgress(t),i._currentTime=t)},r.prototype._updateProgress=function(e){var t=this,n=t._duration,r=e/t._duration*100;t._currentTimeLabel&&l.isNumber(e)&&l.isNumber(t._duration)&&(n-=e,t._currentTimeLabel.innerHTML=s.formatTime(e)),t._totalTimeLabel&&l.isNumber(t._duration)&&(t._totalTimeLabel.innerHTML="/ "+s.formatTime(t._duration)),l.isNumber(e)&&l.isNumber(t._duration)&&(t._playbackBar.setAttribute("style","width: "+r+"%;"),t._seeking||t._handle.setAttribute("style","left: "+r+"%;"),t._slider.setAttribute("aria-valuemax",t._duration),t._slider.setAttribute("aria-valuenow",e),t._slider.setAttribute("aria-valuetext",s.formatTime(e)+" of "+s.formatTime(t._duration)))},r.prototype._updateBuffer=function(e){var t=this,n=0;e.length>0&&(n=e.end(0)/t._duration*100),t._bufferBar.setAttribute("style","width: "+n+"%;")},r.prototype._updateVisualSeek=function(e){var t=this,n=t._model.playlist.getCurrentItem().visualSeek;if(0!==Object.keys(n).length){var r,i=t._getSeekFraction(e);r=.09>i?.09:i>.91?.91:i,t._visualSeekContainer.style.display="block",t._visualSeekContainer.style.left=100*r+"%";var a=i*t._duration;t._visualSeekContainer.querySelector(".yvp-vs-time").innerHTML=s.formatTime(a);var o=10,l=10,d=o*l,c=Math.ceil(Math.floor(a)/n.frequency),p=n.images[Math.floor(c/d)];if(p){var u=c%d,_=u%l,m=Math.floor(u/l),v=_*n.width,y=m*n.height,f=t._visualSeekContainer.querySelector(".yvp-vs-thumbnail");f.style.width=n.width+"px",f.style.height=n.height+"px",f.style.background="url('"+p.url+"')",f.style.backgroundPosition="-"+v+"px -"+y+"px"}}},r.prototype._bindDragEvents=function(e,t,n,r){["mousedown","touchstart"].forEach(function(n){e.addEventListener(n,t)}),["mousemove","touchmove"].forEach(function(e){document.addEventListener(e,n)}),["mouseup","touchend"].forEach(function(e){document.addEventListener(e,r)})},r.prototype._unbindDragEvents=function(e,t,n,r){["mousedown","touchstart"].forEach(function(n){e.removeEventListener(n,t)}),["mousemove","touchmove"].forEach(function(e){document.removeEventListener(e,n)}),["mouseup","touchend"].forEach(function(e){document.removeEventListener(e,r)})},r.prototype._bindScrollOverEvents=function(e,t,n){["mouseenter","touchstart"].forEach(function(n){e.addEventListener(n,t)}),["mousemove","touchmove"].forEach(function(n){e.addEventListener(n,t)}),["mouseleave","touchend"].forEach(function(t){e.addEventListener(t,n)})},r.prototype._unbindScrollOverEvents=function(e,t,n){["mouseenter","touchstart"].forEach(function(n){e.removeEventListener(n,t)}),["mousemove","touchmove"].forEach(function(n){e.removeEventListener(n,t)}),["mouseleave","touchend"].forEach(function(t){e.removeEventListener(t,n)})},r.prototype._syncVolumeUI=function(){var e=this;e._volumeBtn&&e._updateVolumeUI(e._model.playbackState.volume,e._model.playbackState.mute)},r.prototype._bindMute=function(){var e=this,t=0;e._volumeTap=new o(e._volumeBtn),e._onVolumeTap=function(n){e._isVolumeInChange||(n.stopPropagation(),e._showVolumeHandle(),e._view.clearAutoHideTimeout(),e._mouseOutVolumeBtnTimeout&&clearTimeout(e._mouseOutVolumeBtnTimeout),e._eventBus.publish(a.API.UI_INTERACT,{srcElement:"ctrl-mute-btn-"+(e._model.playbackState.mute?"off":"on")}),e._eventBus.publish(a.CONTROLS_SET_MUTE,!e._model.playbackState.mute),1>=t?t++:2===t&&(e._view.getContentNode().querySelector(".yvp-mute-indicator").style.display="none"))},e._volumeBtn.addEventListener("tap",e._onVolumeTap)},r.prototype._bindVolumeBar=function(){var e=this;e._getVolumeFromEvt=function(t){var n,r=e._view.getFullscreen()&&(d.chrome||d.safari);return n=r?t.pageY-s.getOffsetTopFromEl(e._volumeIndicator,"yvp-main"):t.pageY-s.getOffsetTopFromDocument(e._volumeIndicator),e._volumeIndicator.getBoundingClientRect().top?1-Math.max(0,Math.min(1,n/e._volumeIndicator.clientHeight)):1},e._volumeBarTap=new o(e._volumeBarContainer),e._onVolumeBarTap=function(t){t.stopPropagation(),e._showVolumeHandle(),e._initiateVolumeEvents(t)},e._syncMute=function(t){e._model.playbackState.mute!==t&&(e._eventBus.publish(a.API.UI_INTERACT,{srcElement:"ctrl-mute-btn-"+(t?"on":"off")}),e._eventBus.publish(a.CONTROLS_SET_MUTE,t))},e._initiateVolumeEvents=function(t){var n=e._getVolumeFromEvt(t);e._syncMute(0===n),e._eventBus.publish(a.CONTROLS_SET_VOLUME,n)},e._volumeBarContainer.addEventListener("tap",e._onVolumeBarTap),e._onVolumeBarDown=function(t){e._preventTouchDefault(t),e._isVolumeInChange=!0,e._showVolumeHandle(),e._onVolumeBarMove(t)},e._onVolumeBarMove=function(t){e._isVolumeInChange&&(e._preventTouchDefault(t),e._showVolumeHandle(),e._initiateVolumeEvents(t),e._onVolumeBtnHover(t))},e._onVolumeBarUp=function(t){e._isVolumeInChange&&(e._preventTouchDefault(t),e._isVolumeInChange=!1)},e._bindDragEvents(e._volumeBarContainer,e._onVolumeBarDown,e._onVolumeBarMove,e._onVolumeBarUp)},r.prototype._showVolumeHandle=function(){var e=this;e._volumeHandleTimeout&&clearTimeout(e._volumeHandleTimeout),s.classList(e._volumeHandle).add("show")},r.prototype._bindVolumeBtnHover=function(){var e=this;e._mouseOutVolumeBtnTimeout=null,e._hasVolumeBarUpdatedOnInit=!1,e._onVolumeBtnHover=function(t){e._preventTouchDefault(t),s.classList(e._volumeBarContainer).add("open"),e._hasVolumeBarUpdatedOnInit||(e._syncVolumeUI(),e._hasVolumeBarUpdatedOnInit=!0),e._showVolumeHandle(),e._eventBus.publish(a.VOLUME_HOVER)},e._onVolumeBtnLeave=function(t){e._preventTouchDefault(t),e._mouseOutVolumeBtnTimeout&&clearTimeout(e._mouseOutVolumeBtnTimeout),e._mouseOutVolumeBtnTimeout=setTimeout(function(){s.classList(e._volumeBarContainer).remove("open")},500)},e._onVolumeBarContainerHover=function(t){e._preventTouchDefault(t),e._mouseOutVolumeBtnTimeout&&clearTimeout(e._mouseOutVolumeBtnTimeout)},e._bindScrollOverEvents(e._volumeBtn,e._onVolumeBtnHover,e._onVolumeBtnLeave),e._bindScrollOverEvents(e._volumeBarContainer,e._onVolumeBarContainerHover,e._onVolumeBtnLeave)},r.prototype._bindVolume=function(){var e=this;e._volumeBtn&&e._bindMute(),e._volumeBarContainer&&e._volumeBtn&&(e._bindVolumeBar(),e._bindVolumeBtnHover())},r.prototype._unbindVolume=function(){var e=this;e._volumeBtn&&(e._volumeTap.destroy(),e._volumeBtn.removeEventListener("tap",e._onVolumeTap)),e._volumeBarContainer&&(e._volumeBarTap.destroy(),e._volumeBarContainer.removeEventListener("tap",e._onVolumeBarTap),e._unbindDragEvents(e._volumeBarContainer,e._onVolumeBarDown,e._onVolumeBarMove,e._onVolumeBarUp),e._unbindScrollOverEvents(e._volumeBtn,e._onVolumeBtnHover,e._onVolumeBtnLeave),e._unbindScrollOverEvents(e._volumeBarContainer,e._onVolumeBarContainerHover,e._onVolumeBtnLeave))},r.prototype._updateMuteBtn=function(e){var t=this;t._volumeBtn&&(e?s.classList(t._volumeBtn).add("muted"):s.classList(t._volumeBtn).remove("muted")),t.syncAriaState()},r.prototype._updateVolumeBar=function(e){var t=this;if(t._volumeBar){var n=Math.ceil(100*(1-e)),r=100-n;t._volumeBar.setAttribute("style","height:"+n+"%"),t._volumeValue.setAttribute("style","height:"+r+"%")}if(t._volumeHandle){var i=Math.ceil((1-(1===e?.99:e))*(t._volumeIndicator.clientHeight-t._volumeHandle.offsetHeight));i>0&&(i=3>=i?0:i,t._volumeHandle.setAttribute("style","top:"+i+"px"))}},r.prototype._updateVolumeUI=function(e,t){var n=this;l.isNullOrUndefined(t)?n._updateMuteBtn(!e):(n._updateMuteBtn(t),e=t?0:e),n._updateVolumeBar(e)},r.prototype._getSeekFraction=function(e){var t=this,n=(e.clientX||e.pageX)-t._slider.getBoundingClientRect().left,r=n/t._slider.clientWidth;return Math.max(0,Math.min(1,r))},r.prototype._hideVisualSeek=function(){var e=this;e._visualSeekContainer.style.display="none"},r.prototype._fullScreenStreamModeUpdate=function(e){var t=this,n=t._view.getContentNode(),r=t._view.isStreamMode()||t._view.isMiniStreamMode(),i=t._view.isMiniStreamMode()?"yvp-ministream":"yvp-stream";r&&(e?s.classList(n).remove(i):(s.classList(n).add(i),t._desktopControls&&t._desktopControls.resetSettings()))},r.prototype._initAriaProperties=function(){var e=this;e._model.playbackState;e._playBtn.setAttribute("aria-label",c.i18n.PLAY_VIDEO),e._slider.setAttribute("aria-label",c.i18n.SEEK_SLIDER),e._slider.setAttribute("aria-valuemin",0),e._fullscreenBtn&&e._fullscreenBtn.setAttribute("aria-label",c.i18n.GO_TO_FULLSCREEN),e._volumeBtn&&(s.classList(e._volumeBtn).contains("muted")?e._volumeBtn.setAttribute("aria-label",c.i18n.UNMUTE):e._volumeBtn.setAttribute("aria-label",c.i18n.MUTE))},r.prototype.syncAriaState=function(){var e=this,t=e._model.playbackState;t.paused?e._playBtn.setAttribute("aria-label",c.i18n.PLAY_VIDEO):e._playBtn.setAttribute("aria-label",c.i18n.PAUSE_VIDEO),e._fullscreenBtn&&(e._view.getFullscreen()?e._fullscreenBtn.setAttribute("aria-label",c.i18n.GO_TO_NORMAL_SCREEN):e._fullscreenBtn.setAttribute("aria-label",c.i18n.GO_TO_FULLSCREEN)),e._volumeBtn&&(s.classList(e._volumeBtn).contains("muted")?e._volumeBtn.setAttribute("aria-label",c.i18n.UNMUTE):e._volumeBtn.setAttribute("aria-label",c.i18n.MUTE)),e._desktopControls&&e._desktopControls.syncAriaState()},r.prototype.destroy=function(){var e=this;e._desktopControls&&e._desktopControls.destroy(),e._playTap&&e._playBtn&&(e._playTap.destroy(),e._playBtn.removeEventListener("tap",e._onPlayTap),e._fullscreenBtn&&e._fullscreenTap&&(e._fullscreenTap.destroy(),e._fullscreenBtn.removeEventListener("tap",e._onFullscreenTap)),e._seekTap&&e._seekBar&&(e._seekTap.destroy(),e._seekBar.removeEventListener("tap",e._onSeekTap)),e._sliderRemoveEventListener(),e._unbindVolume()),e._upNextBtnTap&&(e._upNextBtn.removeEventListener("tap",e._onUpNextBtnTap),e._upNextBtnTap.destroy())}},{"../../../lib":"bRhrlU","../../../lib/user-agent":"ty5FFo","../event":"YJm+dH","../renderers/modes":46,"../strings":"XwKsC9","../tap":"dsc79Q","../util":"jJTEqU","./controls.html":72,"./playlist":87,"./yahoo-controls":98,fs:155,"insert-css":157}],74:[function(e,t,n){var r=new(e("hogan.js/lib/template").Template)(function(e,t,n){var r=this;return r.b(n=n||""),r.b("<div class='.yvp-end-screen-container'>"),r.b("\n"+n),r.s(r.f("items",e,t,1),e,t,0,50,1479,"{{ }}")&&(r.rs(e,t,function(e,t,r){r.b("<li class='yvp-playlist-item'>"),r.b("\n"+n),r.b("    <ul class='yvp-end-screen-fuji-grid "),r.b(r.v(r.f("gridClassName",e,t,0))),r.b("'>"),r.b("\n"+n),r.s(r.f("videos",e,t,1),e,t,0,165,1451,"{{ }}")&&(r.rs(e,t,function(e,t,r){r.b("            <li class='yvp-end-screen-fuji-tile' data-id='"),r.b(r.v(r.f("id",e,t,0))),r.b("'>"),r.b("\n"+n),r.b("                <img class='yvp-end-screen-fuji-tile-image' src='"),r.b(r.v(r.f("thumbnail",e,t,0))),r.b("'/>"),r.b("\n"+n),r.b("                <div>"),r.b("\n"+n),r.b("                <div class='yvp-overlay-fuji "),r.s(r.f("showUpNext",e,t,1),e,t,0,397,422,"{{ }}")&&(r.rs(e,t,function(e,t,n){n.b(" yvp-overlay-fuji-up-next")}),e.pop()),r.b("'>"),r.b("\n"+n),r.b("                    <div class='yvp-metadata-fuji'>"),r.b("\n"+n),r.b("                        <div class='yvp-pl-meta'>"),r.b("\n"+n),r.b("                            <span class='yvp-pl-title'>"),r.b(r.v(r.f("title",e,t,0))),r.b("</span>"),r.b("\n"+n),r.b("                            <span class='yvp-pl-dur'>"),r.b(r.v(r.f("duration",e,t,0))),r.b("</span>"),r.b("\n"+n),r.b("                        </div>"),r.b("\n"+n),r.b("\n"+n),r.b("                    </div>"),r.b("\n"+n),r.b("                </div>"),r.b("\n"+n),r.s(r.f("showUpNext",e,t,1),e,t,0,800,1405,"{{ }}")&&(r.rs(e,t,function(e,t,r){r.b('                    <div class="yvp-end-screen-up-next-box">'),r.b("\n"+n),r.b('                        <div class="yvp-end-screen-up-next-circle"></div>'),r.b("\n"+n),r.b('                        <div class="yvp-end-screen-arc yvp-end-screen-arc-start"></div>'),r.b("\n"+n),r.b('                        <div class="yvp-end-screen-arc yvp-end-screen-arc-end"></div>'),r.b("\n"+n),r.b("                        <span class='yvp-end-screen-up-next-time'>"),r.b(r.v(r.f("upNextTime",e,t,0))),r.b("</span>"),r.b("\n"+n),r.b("                        <span class='yvp-end-screen-up-next-text'>"),r.b(r.v(r.d("strings.UP_NEXT",e,t,0))),r.b("</span>"),r.b("\n"+n),r.b("                        <span class='yvp-end-screen-up-close'>x</span>"),r.b("\n"+n),r.b("                    </div>"),r.b("\n")}),e.pop()),r.b("            </li>"),r.b("\n")}),e.pop()),r.b("    </ul>"),r.b("\n"+n),r.b("</li>"),r.b("\n")}),e.pop()),r.b("</div>"),r.b("\n"),r.fl()});t.exports={render:function(){return r.render.apply(r,arguments)},r:function(){return r.r.apply(r,arguments)},ri:function(){return r.ri.apply(r,arguments)}}},{"hogan.js/lib/template":156}],75:[function(e,t,n){var r=new(e("hogan.js/lib/template").Template)(function(e,t,n){var r=this;return r.b(n=n||""),r.b("<div class='yvp-error-screen'>"),r.b("\n"+n),r.b("    <img class='yvp-error-screen-image' src='"),r.b(r.v(r.f("imageSrc",e,t,0))),r.b("'>"),r.b("\n"+n),r.b("    <div class='yvp-error-screen-background'></div>"),r.b("\n"+n),r.b("    <div class='yvp-error-title'>"),r.b(r.v(r.d("error.title",e,t,0))),r.b("</div>"),r.b("\n"+n),r.b("    <div class='yvp-error-desc' id='yvp-error-message'>"),r.b(r.v(r.d("error.message",e,t,0))),r.b("</div>"),r.b("\n"+n),r.b("    <div class='yvp-error-code'>"),r.b(r.v(r.d("error.rep",e,t,0))),r.b("</div>"),r.b("\n"+n),r.b("    <div class='yvp-feedback-btn yvp-error-feedback-btn'>"),r.b("\n"+n),r.b("        <p>"),r.b(r.v(r.d("strings.FEEDBACK_BUTTON",e,t,0))),r.b("</p>"),r.b("\n"+n),r.b("    </div>"),r.b("\n"+n),r.b("</div>"),r.b("\n"),r.fl()});t.exports={render:function(){return r.render.apply(r,arguments)},r:function(){return r.r.apply(r,arguments)},ri:function(){return r.ri.apply(r,arguments)}}},{"hogan.js/lib/template":156}],76:[function(e,t,n){"use strict";function r(e){var t=this;t._eventBus=e}t.exports=r;var i=e("../util"),a=e("../tap"),o=e("../strings"),s=e("../event"),l=e("./error-screen.html");r.prototype.create=function(e,t,n,r,d){var c=this;return c.node=i.render(l,{error:e,guid:t,sessionId:n,imageSrc:r,strings:o.i18n}),c.errorMsg=c.node.querySelector("#yvp-error-message"),c.errorMsg.innerHTML=e.message,c.flashIcon=c.node.querySelector(".yvp-error-flash-download-icon"),c.flashIcon&&d&&(c.flashIcon.src=d),c._feedbackLink=c.node.querySelector(".yvp-error-feedback-btn"),i.isInternalUser()?(c._feedbackLinkTap=new a(c._feedbackLink),c._onFeedbackLinkTap=function(e){c._eventBus.publish(s.OPEN_FEEDBACK,{srcView:"error-screen"})},c._feedbackLink.addEventListener("tap",c._onFeedbackLinkTap)):c._feedbackLink&&(c._feedbackLink.parentNode.removeChild(c._feedbackLink),c._feedbackLink=null),c.node},r.prototype.destroy=function(){var e=this;e._feedbackLinkTap&&(e._feedbackLinkTap.destroy(),e._feedbackLink.removeEventListener("tap",e._onFeedbackLinkTap)),e.node=null}},{"../event":"YJm+dH","../strings":"XwKsC9","../tap":"dsc79Q","../util":"jJTEqU","./error-screen.html":75}],77:[function(e,t,n){var r=new(e("hogan.js/lib/template").Template)(function(e,t,n){var r=this;return r.b(n=n||""),r.b("<div class='yvp-feedback-screen'>"),r.b("\n"+n),r.b("    <button class='yvp-feedback-screen-close-btn'></button>"),r.b("\n"+n),r.b("    <div class='yvp-feedback-screen-info'>"),r.b("\n"+n),r.b("        <div class='yvp-feedback-screen-title'>"),r.b(r.v(r.d("strings.FEEDBACK_TITLE",e,t,0))),r.b("</div>"),r.b("\n"+n),r.b("        <div class='yvp-feedback-screen-response'></div>"),r.b("\n"+n),r.b("        <div class='yvp-feedback-screen-refid'></div>"),r.b("\n"+n),r.b('        <textarea class=\'yvp-feedback-screen-text\' maxlength="2000" id="feedback_input" placeholder="Enter your comments here."></textarea>'),r.b("\n"+n),r.b("        <div class='yvp-feedback-screen-button-container'>"),r.b("\n"+n),r.b("             <div class='yvp-feedback-screen-btn'>"),r.b(r.v(r.d("strings.FEEDBACK_SUBMIT_BUTTON",e,t,0))),r.b("</div>"),r.b("\n"+n),r.b("        </div>"),r.b("\n"+n),r.b("        <div class='yvp-feedback-screen-disclaimer'>"),r.b(r.v(r.d("strings.FEEDBACK_DISCLAIMER",e,t,0))),r.b("</div>"),r.b("\n"+n),r.b("    </div>"),r.b("\n"+n),r.b("</div>"),r.b("\n"),r.fl()});t.exports={render:function(){return r.render.apply(r,arguments)},r:function(){return r.r.apply(r,arguments)},ri:function(){return r.ri.apply(r,arguments)}}},{"hogan.js/lib/template":156}],78:[function(e,t,n){"use strict";function r(e,t,n){var r=this;r._model=e,r._view=n,r._viewMainElem=n.getMainElement(),r._eventBus=t,r._isSwfReady=!1,r._playbackInfo={},r._source="unknown",r._playerEvents=[],[i.API.PLAYER_READY,i.API.VIDEO_STARTED,i.API.PLAYBACK_SEEK_COMPLETE,i.API.PLAYER_MUTE_CHANGE,i.API.PLAYER_ERROR,i.API.PLAYBACK_COMPLETE,i.API.PLAYBACK_PAUSE,i.API.PLAYBACK_START,i.API.AD_PLAYBACK_STOP,i.API.AD_PLAYBACK_START,i.API.PLAYER_READY].forEach(function(e){r._eventBus.subscribe(e,function(t){r._playerEvents.push(e),r._playerEvents.length>30&&r._playerEvents.shift()})}),r._eventBus.subscribe(i.OPEN_FEEDBACK,function(e){var t;switch(e.srcView){case"loading-screen":t="loading-screen";break;case"error-screen":t="error-screen";break;case"settings-controller":t="advance-menu";break;case"opensimsim-screen":t="opss"}r._source=t,r.render()})}t.exports=r;var i=e("../event"),a=e("../../../lib/user-agent"),o=e("../util"),s=e("../tap"),l=e("./feedback-screen.html"),d=e("../strings");e("./open-sim-sim");r.prototype.create=function(){var e=this;e._node=o.render(l,{strings:d.i18n});var t=e._node.querySelector(".yvp-feedback-screen-close-btn");e._closeTap=new s(t),e._onCloseTap=function(t){t.stopPropagation(),e.close(),e._view.setKeyboardFocus()},t.addEventListener("tap",e._onCloseTap),e._feedbackTextForm=e._node.querySelector(".yvp-feedback-screen-text"),e._onFeedbackTextKeyDown=function(e){e.stopPropagation()},e._feedbackTextForm.addEventListener("keydown",e._onFeedbackTextKeyDown);var n=e._node.querySelector(".yvp-feedback-screen-btn");return e._feedbackTap=new s(n),e._onFeedbackTap=function(t){var n={},r=JSON.parse(JSON.stringify(e._model)),o=e._view.getOpenSimSim();r.playbackState=r.mediaStore=r.playlist={},n.model=r,n.eventLog=JSON.stringify(e._playerEvents),n.source=e._source,n.feedbackText=e._feedbackTextForm.value,n.opssInfo=o&&o.fetchInfo(),a.desktop&&a.safari&&e._view.getFullscreen()&&(n.feedbackText+="\n--safari fullscreen--\n"+window.prompt("Enter your comments here")),e._eventBus.publish(i.FEEDBACK_INFO,n),e._feedbackRefId=e._node.querySelector(".yvp-feedback-screen-refid"),e._feedbackRefId.textContent=d.i18n.FEEDBACK_SUBTITLE_RESPONSE_ID+e._model.guid,e._feedbackResponse=e._node.querySelector(".yvp-feedback-screen-response"),e._feedbackResponse.textContent=d.i18n.FEEDBACK_SUBTITLE_RESPONSE_MESSAGE,e._node.querySelector(".yvp-feedback-screen-text").remove(),e._node.querySelector(".yvp-feedback-screen-button-container").remove(),e._node.querySelector(".yvp-feedback-screen-disclaimer").remove()},n.addEventListener("tap",e._onFeedbackTap),e._node},r.prototype.render=function(){var e=this;e._viewMainElem.appendChild(e.create()),o.showHide(e._node,!0)},r.prototype.isOpen=function(){var e=this;return e._node&&"none"!==e._node.style.display},r.prototype.close=function(){var e=this;e._node.style.display="none",e._viewMainElem.querySelector(".yvp-feedback-screen").remove()},r.prototype.destroy=function(){var e=this;e._closeTap&&e._closeTap.destroy(),e._feedbackTextForm&&e._feedbackTextForm.removeEventListener("keydown",e._onFeedbackTextKeyDown),e._feedbackTap&&(e._viewMainElem.querySelector(".yvp-feedback-screen").remove(),e._feedbackTap.destroy())}},{"../../../lib/user-agent":"ty5FFo","../event":"YJm+dH","../strings":"XwKsC9","../tap":"dsc79Q","../util":"jJTEqU","./feedback-screen.html":77,"./open-sim-sim":84}],79:[function(e,t,n){var r=new(e("hogan.js/lib/template").Template)(function(e,t,n){var r=this;return r.b(n=n||""),r.b("<div class='yvp-loading-screen'>"),r.b("\n"+n),r.b("    <div class='yvp-loading-spinner yvp-spinner-icon'></div>"),
r.b("\n"+n),r.b("    <div class='yvp-feedback-btn yvp-error-feedback'>"),r.b("\n"+n),r.b("        <p>"),r.b(r.v(r.d("strings.FEEDBACK_BUTTON",e,t,0))),r.b("</p>"),r.b("\n"+n),r.b("    </div>"),r.b("\n"+n),r.b("</div>"),r.b("\n"),r.fl()});t.exports={render:function(){return r.render.apply(r,arguments)},r:function(){return r.r.apply(r,arguments)},ri:function(){return r.ri.apply(r,arguments)}}},{"hogan.js/lib/template":156}],80:[function(e,t,n){"use strict";function r(e){var t=this;t._eb=e,t._resizeScheduled=!1,t._eb.subscribe(o.FULLSCREEN_CHANGE,t._scheduleResize,t),t._scheduleResize()}t.exports=r;var i=(e("fs"),e("insert-css")),a=e("../util"),o=e("../event"),s=e("../tap"),l=e("../strings"),d=e("./loading-screen.html");i('.yvp-spinner-icon{background-image:url("data:image/svg+xml;base64,PHN2ZyB2aWV3Qm94PSItMjUgLTI1IDEwMCAxMDAiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+PGc+PHBhdGggZD0iTTI1IDBhMjUgMjUgMCAwIDAgMCA1MCIgc3Ryb2tlLWRhc2hhcnJheT0iNzkiIHN0cm9rZT0iI2FhYSIgc3Ryb2tlLXdpZHRoPSI0IiBzdHJva2UtbGluZWNhcD0icm91bmQiIGZpbGw9Im5vbmUiPjxhbmltYXRlIGlkPSJhMSIgYXR0cmlidXRlVHlwZT0iWE1MIiBhdHRyaWJ1dGVOYW1lPSJzdHJva2UtZGFzaG9mZnNldCIgZnJvbT0iOSIgdG89Ijc2IiBkdXI9Ijc1MG1zIiBiZWdpbj0iMHM7IGEyLmVuZCIgZmlsbD0iZnJlZXplIiBjYWxjTW9kZT0ic3BsaW5lIiBrZXlUaW1lcz0iMDsxIiBrZXlTcGxpbmVzPSIwLjIxNSwgMC42MSwgMC4zNTUsIDEiLz48YW5pbWF0ZSBpZD0iYTIiIGF0dHJpYnV0ZVR5cGU9IlhNTCIgYXR0cmlidXRlTmFtZT0ic3Ryb2tlLWRhc2hvZmZzZXQiIGZyb209Ijc2IiB0bz0iOSIgZHVyPSI3NTBtcyIgYmVnaW49ImExLmVuZCIgZmlsbD0iZnJlZXplIiBjYWxjTW9kZT0ic3BsaW5lIiBrZXlUaW1lcz0iMDsxIiBrZXlTcGxpbmVzPSIwLjIxNSwgMC42MSwgMC4zNTUsIDEiLz48YW5pbWF0ZSBpZD0iYTMiIGF0dHJpYnV0ZVR5cGU9IlhNTCIgYXR0cmlidXRlTmFtZT0ic3Ryb2tlLXdpZHRoIiBmcm9tPSI0IiB0bz0iOCIgZHVyPSI3NTBtcyIgYmVnaW49IjBzOyBhNC5lbmQiIGZpbGw9ImZyZWV6ZSIgY2FsY01vZGU9InNwbGluZSIga2V5VGltZXM9IjA7MSIga2V5U3BsaW5lcz0iMC4yMTUsIDAuNjEsIDAuMzU1LCAxIi8+PGFuaW1hdGUgaWQ9ImE0IiBhdHRyaWJ1dGVUeXBlPSJYTUwiIGF0dHJpYnV0ZU5hbWU9InN0cm9rZS13aWR0aCIgZnJvbT0iOCIgdG89IjQiIGR1cj0iNzUwbXMiIGJlZ2luPSJhMy5lbmQiIGZpbGw9ImZyZWV6ZSIgY2FsY01vZGU9InNwbGluZSIga2V5VGltZXM9IjA7MSIga2V5U3BsaW5lcz0iMC4yMTUsIDAuNjEsIDAuMzU1LCAxIi8+PGFuaW1hdGVUcmFuc2Zvcm0gaWQ9ImE1IiBhdHRyaWJ1dGVUeXBlPSJYTUwiIGF0dHJpYnV0ZU5hbWU9InRyYW5zZm9ybSIgdHlwZT0icm90YXRlIiBmcm9tPSIwIDI1IDI1IiB0bz0iMCAyNSAyNSIgZHVyPSI3NTBtcyIgYmVnaW49IjA7IGE4LmVuZCIgY2FsY01vZGU9InNwbGluZSIga2V5VGltZXM9IjA7MSIga2V5U3BsaW5lcz0iMC4yMTUsIDAuNjEsIDAuMzU1LCAxIi8+PGFuaW1hdGVUcmFuc2Zvcm0gaWQ9ImE2IiBhdHRyaWJ1dGVUeXBlPSJYTUwiIGF0dHJpYnV0ZU5hbWU9InRyYW5zZm9ybSIgdHlwZT0icm90YXRlIiBmcm9tPSIwIDI1IDI1IiB0bz0iMTgwIDI1IDI1IiBkdXI9Ijc1MG1zIiBiZWdpbj0iYTUuZW5kIiBjYWxjTW9kZT0ic3BsaW5lIiBrZXlUaW1lcz0iMDsxIiBrZXlTcGxpbmVzPSIwLjIxNSwgMC42MSwgMC4zNTUsIDEiLz48YW5pbWF0ZVRyYW5zZm9ybSBpZD0iYTciIGF0dHJpYnV0ZVR5cGU9IlhNTCIgYXR0cmlidXRlTmFtZT0idHJhbnNmb3JtIiB0eXBlPSJyb3RhdGUiIGZyb209IjE4MCAyNSAyNSIgdG89IjE4MCAyNSAyNSIgZHVyPSI3NTBtcyIgYmVnaW49ImE2LmVuZCIgY2FsY01vZGU9InNwbGluZSIga2V5VGltZXM9IjA7MSIga2V5U3BsaW5lcz0iMC4yMTUsIDAuNjEsIDAuMzU1LCAxIi8+PGFuaW1hdGVUcmFuc2Zvcm0gaWQ9ImE4IiBhdHRyaWJ1dGVUeXBlPSJYTUwiIGF0dHJpYnV0ZU5hbWU9InRyYW5zZm9ybSIgdHlwZT0icm90YXRlIiBmcm9tPSIxODAgMjUgMjUiIHRvPSIzNjAgMjUgMjUiIGR1cj0iNzUwbXMiIGJlZ2luPSJhNy5lbmQiIGNhbGNNb2RlPSJzcGxpbmUiIGtleVRpbWVzPSIwOzEiIGtleVNwbGluZXM9IjAuMjE1LCAwLjYxLCAwLjM1NSwgMSIvPjwvcGF0aD48cGF0aCBkPSJNMjUgNTBhMjUgMjUgMCAxIDAgMC01MCIgc3Ryb2tlLWRhc2hhcnJheT0iNzkiIHN0cm9rZT0iI2FhYSIgc3Ryb2tlLXdpZHRoPSI0IiBzdHJva2UtbGluZWNhcD0icm91bmQiIGZpbGw9Im5vbmUiPjxhbmltYXRlIGF0dHJpYnV0ZVR5cGU9IlhNTCIgYXR0cmlidXRlTmFtZT0ic3Ryb2tlLWRhc2hvZmZzZXQiIGZyb209IjkiIHRvPSI3NiIgZHVyPSI3NTBtcyIgYmVnaW49IjBzOyBhMi5lbmQiIGZpbGw9ImZyZWV6ZSIgY2FsY01vZGU9InNwbGluZSIga2V5VGltZXM9IjA7MSIga2V5U3BsaW5lcz0iMC4yMTUsIDAuNjEsIDAuMzU1LCAxIi8+PGFuaW1hdGUgYXR0cmlidXRlVHlwZT0iWE1MIiBhdHRyaWJ1dGVOYW1lPSJzdHJva2UtZGFzaG9mZnNldCIgZnJvbT0iNzYiIHRvPSI5IiBkdXI9Ijc1MG1zIiBiZWdpbj0iYTEuZW5kIiBmaWxsPSJmcmVlemUiIGNhbGNNb2RlPSJzcGxpbmUiIGtleVRpbWVzPSIwOzEiIGtleVNwbGluZXM9IjAuMjE1LCAwLjYxLCAwLjM1NSwgMSIvPjxhbmltYXRlIGF0dHJpYnV0ZVR5cGU9IlhNTCIgYXR0cmlidXRlTmFtZT0ic3Ryb2tlLXdpZHRoIiBmcm9tPSI0IiB0bz0iOCIgZHVyPSI3NTBtcyIgYmVnaW49IjBzOyBhNC5lbmQiIGZpbGw9ImZyZWV6ZSIgY2FsY01vZGU9InNwbGluZSIga2V5VGltZXM9IjA7MSIga2V5U3BsaW5lcz0iMC4yMTUsIDAuNjEsIDAuMzU1LCAxIi8+PGFuaW1hdGUgYXR0cmlidXRlVHlwZT0iWE1MIiBhdHRyaWJ1dGVOYW1lPSJzdHJva2Utd2lkdGgiIGZyb209IjgiIHRvPSI0IiBkdXI9Ijc1MG1zIiBiZWdpbj0iYTMuZW5kIiBmaWxsPSJmcmVlemUiIGNhbGNNb2RlPSJzcGxpbmUiIGtleVRpbWVzPSIwOzEiIGtleVNwbGluZXM9IjAuMjE1LCAwLjYxLCAwLjM1NSwgMSIvPjxhbmltYXRlVHJhbnNmb3JtIGF0dHJpYnV0ZVR5cGU9IlhNTCIgYXR0cmlidXRlTmFtZT0idHJhbnNmb3JtIiB0eXBlPSJyb3RhdGUiIGZyb209IjAgMjUgMjUiIHRvPSIwIDI1IDI1IiBkdXI9Ijc1MG1zIiBiZWdpbj0iMDsgYTguZW5kIiBjYWxjTW9kZT0ic3BsaW5lIiBrZXlUaW1lcz0iMDsxIiBrZXlTcGxpbmVzPSIwLjIxNSwgMC42MSwgMC4zNTUsIDEiLz48YW5pbWF0ZVRyYW5zZm9ybSBhdHRyaWJ1dGVUeXBlPSJYTUwiIGF0dHJpYnV0ZU5hbWU9InRyYW5zZm9ybSIgdHlwZT0icm90YXRlIiBmcm9tPSIwIDI1IDI1IiB0bz0iMTgwIDI1IDI1IiBkdXI9Ijc1MG1zIiBiZWdpbj0iYTUuZW5kIiBjYWxjTW9kZT0ic3BsaW5lIiBrZXlUaW1lcz0iMDsxIiBrZXlTcGxpbmVzPSIwLjIxNSwgMC42MSwgMC4zNTUsIDEiLz48YW5pbWF0ZVRyYW5zZm9ybSBhdHRyaWJ1dGVUeXBlPSJYTUwiIGF0dHJpYnV0ZU5hbWU9InRyYW5zZm9ybSIgdHlwZT0icm90YXRlIiBmcm9tPSIxODAgMjUgMjUiIHRvPSIxODAgMjUgMjUiIGR1cj0iNzUwbXMiIGJlZ2luPSJhNi5lbmQiIGNhbGNNb2RlPSJzcGxpbmUiIGtleVRpbWVzPSIwOzEiIGtleVNwbGluZXM9IjAuMjE1LCAwLjYxLCAwLjM1NSwgMSIvPjxhbmltYXRlVHJhbnNmb3JtIGlkPSJhOCIgYXR0cmlidXRlVHlwZT0iWE1MIiBhdHRyaWJ1dGVOYW1lPSJ0cmFuc2Zvcm0iIHR5cGU9InJvdGF0ZSIgZnJvbT0iMTgwIDI1IDI1IiB0bz0iMzYwIDI1IDI1IiBkdXI9Ijc1MG1zIiBiZWdpbj0iYTcuZW5kIiBjYWxjTW9kZT0ic3BsaW5lIiBrZXlUaW1lcz0iMDsxIiBrZXlTcGxpbmVzPSIwLjIxNSwgMC42MSwgMC4zNTUsIDEiLz48L3BhdGg+PGFuaW1hdGVUcmFuc2Zvcm0gYXR0cmlidXRlVHlwZT0iWE1MIiBhdHRyaWJ1dGVOYW1lPSJ0cmFuc2Zvcm0iIHR5cGU9InJvdGF0ZSIgZnJvbT0iMCAyNSAyNSIgdG89IjM2MCAyNSAyNSIgZHVyPSI2NzUwbXMiIHJlcGVhdENvdW50PSJpbmRlZmluaXRlIi8+PC9nPjwvc3ZnPg==")}.yvp-loading-screen{display:none;}.yvp-loading-screen .yvp-loading-spinner{position:absolute;top:50%;left:50%;background-size:100% 100%;max-width:60px;max-height:60px;width:60px;height:60px;margin-top:-30px;margin-left:-30px;visibility:hidden;transition:visibility 0s linear 500ms;z-index:20}.yvp-loading-screen.yvp-show-spinner .yvp-loading-spinner{visibility:visible}.yvp-flag-loading .yvp-loading-screen,.yvp-flag-switching .yvp-loading-screen{display:block}.yvp-state-blocked .yvp-loading-screen{display:none}');var c=60,p=3e4;r.prototype.create=function(){var e=this;return e.node=a.render(d,{strings:l.i18n}),e._feedbackLink=e.node.querySelector(".yvp-error-feedback"),e._eb.subscribe(o.API.LOADING_BEGIN,e._onLoadingScreenVisible,e),e._eb.subscribe(o.API.LOADING_END,e.hide,e),e._feedbackLinkTap=new s(e._feedbackLink),e._onFeedbackLinkTap=function(t){e._eb.publish(o.OPEN_FEEDBACK,{srcView:"loading-screen"})},e._feedbackLink.addEventListener("tap",e._onFeedbackLinkTap),e.node},r.prototype._resize=function(){var e=this,t=Math.min(2*e.node.clientWidth/640,1),n=e.node.querySelector(".yvp-loading-spinner");n.style.width=t*c+"px",n.style.height=t*c+"px",n.style.marginLeft=-1*(t*c/2)+"px",n.style.marginTop=-1*(t*c/2)+"px"},r.prototype._scheduleResize=function(){var e=this;if(!e._resizeScheduled){var t=e._eb.subscribe(o.API.LOADING_BEGIN,function(){e._resizeScheduled=!1,e._resize(),t()},e);e._resizeScheduled=!0}},r.prototype._onLoadingScreenVisible=function(){var e=this;a.forceDOMRedrawOnElement(e.node),a.classList(e.node).add("yvp-show-spinner"),a.showHide(e._feedbackLink,!1),a.isInternalUser()&&(e.feedbackLinkRenderTimeOut=setTimeout(e._showFeedbackButton.bind(e),p))},r.prototype._showFeedbackButton=function(){var e=this;a.showHide(e._feedbackLink,!0)},r.prototype.hide=function(){var e=this;a.classList(e.node).remove("yvp-show-spinner"),clearTimeout(e.feedbackLinkRenderTimeOut),e.feedbackLinkRenderTimeOut=null},r.prototype.destroy=function(){var e=this;e.node=null,e._feedbackLinkTap&&(e._feedbackLinkTap.destroy(),e._feedbackLink.removeEventListener("tap",e._onFeedbackLinkTap))}},{"../event":"YJm+dH","../strings":"XwKsC9","../tap":"dsc79Q","../util":"jJTEqU","./loading-screen.html":79,fs:155,"insert-css":157}],81:[function(e,t,n){var r=new(e("hogan.js/lib/template").Template)(function(e,t,n){var r=this;return r.b(n=n||""),r.b("<div class='yvp-nfl-branding-container'>"),r.b("\n"+n),r.b("    <div class='yvp-nfl-branding'>"),r.b("\n"+n),r.b("      <a href='http://www.nfl.com/' target='nfl_site'>"),r.b("\n"+n),r.b("          <span class='yvp-nfl-brand-span'></span>"),r.b("\n"+n),r.b("          <span class='yvp-nfl-brand-logo'></span>"),r.b("\n"+n),r.b("      </a>"),r.b("\n"+n),r.b("    </div>"),r.b("\n"+n),r.b("</div>"),r.b("\n"),r.fl()});t.exports={render:function(){return r.render.apply(r,arguments)},r:function(){return r.r.apply(r,arguments)},ri:function(){return r.ri.apply(r,arguments)}}},{"hogan.js/lib/template":156}],82:[function(e,t,n){"use strict";function r(){}t.exports=r;var i=e("../util"),a=e("./nfl-branding.html");r.prototype.create=function(){var e=this;return e.node=i.render(a),e.node},r.prototype.destroy=function(){var e=this;e.node=null}},{"../util":"jJTEqU","./nfl-branding.html":81}],83:[function(e,t,n){var r=new(e("hogan.js/lib/template").Template)(function(e,t,n){var r=this;return r.b(n=n||""),r.b("<div class='yvp-opensimsim' style='display: none'>"),r.b("\n"+n),r.b("    <button class='yvp-opensimsim-close-btn yvp-close-btn'></button>"),r.b("\n"+n),r.b("    <div class='yvp-feedback-btn yvp-opensimsim-feedback-btn'>"),r.b("\n"+n),r.b("        <p>"),r.b(r.v(r.d("strings.FEEDBACK_BUTTON",e,t,0))),r.b("</p>"),r.b("\n"+n),r.b("    </div>"),r.b("\n"+n),r.b("    <div class='yvp-opensimsim-info'>"),r.b("\n"+n),r.b("        <div class='yvp-opensimsim-title'>Yahoo Fireball Video Player</div>"),r.b("\n"+n),r.b("        <div>Version : "),r.b(r.v(r.f("version",e,t,0))),r.b("</div>"),r.b("\n"+n),r.b("        <div>Page SpaceID : "),r.b(r.v(r.f("spaceId",e,t,0))),r.b("</div>"),r.b("\n"+n),r.b("        <div class='yvp-sessionId'></div>"),r.b("\n"+n),r.b("        <div>YVAP Acct. ID : "),r.b(r.v(r.f("yvap_accountId",e,t,0))),r.b("</div>"),r.b("\n"+n),r.b("        <div>YVAP Play Context : "),r.b(r.v(r.f("yvap_playContext",e,t,0))),r.b("</div>"),r.b("\n"+n),r.b("        <div class='yvp-videoSpaceId'></div>"),r.b("\n"+n),r.b("        <div class='yvp-opensimsim-title'>Current Media</div>"),r.b("\n"+n),r.b("        <div class='yvp-opensimsim-uuid'></div>"),r.b("\n"+n),r.b("        <div class='yvp-opensimsim-lmsid'></div>"),r.b("\n"+n),r.b("        <div class='yvp-opensimsim-renderertype'></div>"),r.b("\n"+n),r.b("        <div class='yvp-opensimsim-tv'></div>"),r.b("\n"+n),r.b("        <br>"),r.b("\n"+n),r.b("        <div class='yvp-opensimsim-graphs'></div>"),r.b("\n"+n),r.b("        <div class='yvp-opensimsim-detail'></div>"),r.b("\n"+n),r.b("        <div class='yvp-swf-ready'></div>"),r.b("\n"+n),r.b("        <div class='yvp-opensimsim-title'>Platform</div>"),r.b("\n"+n),r.b("        <div class='yvp-opensimsim-platform'></div>"),r.b("\n"+n),r.b("        <div class='yvp-profile-btn'>Profile</div>"),r.b("\n"+n),r.b("    </div>"),r.b("\n"+n),r.b("</div>"),r.b("\n"),r.fl()});t.exports={render:function(){return r.render.apply(r,arguments)},r:function(){return r.r.apply(r,arguments)},ri:function(){return r.ri.apply(r,arguments)}}},{"hogan.js/lib/template":156}],84:[function(e,t,n){"use strict";function r(e,t,n,r){var a=this;a._model=e,a._eventBus=t,a._profiler=n,a._rendererController=r,a._isSwfReady=!1,a._playbackInfo={},a._timestamps=[],a._history={bitrate:{title:"Bit Rate History",data:[]},speed:{title:"Download Speed History",data:[]},bufferLength:{title:"Buffer Length History",data:[]},frameRate:{title:"Frame Rate History",data:[]}},a._eventBus.subscribe(i.PLAYBACK_INFO,function(e){a._playbackInfo=e,a._timestamps.push(Date.now()/1e3),a._history.bitrate.data.push(parseFloat(e.currentStreamBitrate)),a._history.speed.data.push(parseFloat(e.currentKbps)),a._history.bufferLength.data.push(parseFloat(e.bufferLength)),a._history.frameRate.data.push(parseFloat(e.frameRate?e.frameRate:0)),a._updateInfo()}),a._eventBus.subscribe(i.SWF_READY,function(){a._isSwfReady=!0}),a._eventBus.subscribe(i.YVAP_INFO_UPDATE,function(e){a._yvapDom=e}),a._eventBus.subscribe(i.API.PLAYLIST_POSITION_CHANGE,function(){a._updateBasicMediaItemInfo()}),a._eventBus.subscribe(i.RENDERER_SWITCHED,a._onRendererSwitched,a)}t.exports=r;var i=e("../event"),a=e("../../../lib/user-agent"),o=e("../util"),s=e("../../../lib"),l=e("../tap"),d=e("../vtt-fetcher"),c=e("./open-sim-sim.html"),p=e("../strings"),u=e("../renderers/type"),_=45,m=40;r.prototype.create=function(){var e=this;e._node=o.render(c,{version:e._model.version,spaceId:e._model.baseConfig.pageSpaceId,yvap_accountId:e._model.YVAP.accountId,yvap_playContext:e._model.YVAP.playContext,strings:p.i18n});var t=e._node.querySelector(".yvp-opensimsim-close-btn");e._closeTap=new l(t),e._onCloseTap=function(t){t.stopPropagation(),e.close()},t.addEventListener("tap",e._onCloseTap),e._feedbackLink=e._node.querySelector(".yvp-opensimsim-feedback-btn"),e._feedbackLinkTap=new l(e._feedbackLink),e._onFeedbackLinkTap=function(){e._eventBus.publish(i.OPEN_FEEDBACK,{srcView:"opensimsim-screen"})},e._feedbackLink.addEventListener("tap",e._onFeedbackLinkTap);var n=e._node.querySelector(".yvp-profile-btn");return e._profileTap=new l(n),e._onProfileTap=function(t){t.stopPropagation(),e._profiler.render(e._yvapDom)},n.addEventListener("tap",e._onProfileTap),e._updatePlatformInfo(),e._node},r.prototype.fetchInfo=function(){var e=this;return{history:e._history,playbackInfo:e._playbackInfo,profile:e._profiler}},r.prototype.render=function(){var e=this;e._handleHTML5Info(),e._updateBasicMediaItemInfo(),e._updateInfo(),e._node.style.display="block"},r.prototype._handleHTML5Info=function(e){var t=this;return t._isHTML5()?(e=e||t._rendererController&&t._rendererController.getActiveRenderer(),void(e&&(t._videoNode=e.node,t._toggleHTML5Info(!0)))):void t._toggleHTML5Info(!1)},r.prototype.isOpen=function(){var e=this;return"none"!==e._node.style.display},r.prototype.close=function(){var e=this;e._node.style.display="none",e._toggleHTML5Info(!1)},r.prototype._onRendererSwitched=function(e){var t=this;t._handleHTML5Info(e.active),t._updateBasicMediaItemInfo(),t._updateInfo()},r.prototype._isHTML5=function(){var e=this;return a.tv||a.safari&&o.isHtmlRenderer(e._model.playbackState.rendererType)},r.prototype._renderGraph=function(e,t,n,r,i){for(var a=t.length-1,o=0,s=e[a],l=t[a],d=t[a],c=a-1;c>=0;c--)if(l=Math.min(l,t[c]),d=Math.max(d,t[c]),c>0&&s-e[c-1]>_){o=c;break}var p=e[o];l>0&&(l=0),l===d&&(d=l+1),n.save(),n.translate(m,i),n.scale((r-m)/_,-1*i/(d-l)),n.beginPath(),n.moveTo(0,t[o]-l);for(var u=o+1;u<t.length;u++)n.lineTo(e[u]-p,t[u]-l);n.restore(),n.lineWidth=1,n.lineCap="round",n.lineJoin="round",n.strokeStyle="white",n.stroke(),n.font="8pt Monospace",n.fillStyle="white",n.fillText(d.toFixed(1),0,10),n.fillText(l.toFixed(1),0,60)},r.prototype._generateHtmlFromKeyValues=function(e){var t="",n=Object.keys(e);return n.forEach(function(n){var r=e[n];t+="<div>"+n+" : "+r+"</div>"}),t},r.prototype._generateConfigHTML=function(e,t){var n=this,r="",i=Object.keys(e);return i.forEach(function(i){var a=e[i];a&&"object"==typeof a?isNaN(i)?(r+="<div>"+i+" :</div>",r+='<div style="padding-left: 10px">'+n._generateConfigHTML(a)+"</div>"):r+="<div>"+n._generateConfigHTML(a,i)+"</div>":r+="<div>"+(t?t+" : ":"")+i+" : "+a+"</div>"}),r},r.prototype._generateHtmlTitle=function(e){return'<div class="yvp-opensimsim-title">'+e+"</div>"},r.prototype._updatePlatformInfo=function(){var e=this,t={OS:a.os,Mobile:a.mobile,"User Agent":a.ua},n=e._node.querySelector(".yvp-opensimsim-platform");n.innerHTML=e._generateHtmlFromKeyValues(t)},r.prototype._updateBasicMediaItemInfo=function(){var e=this,t=e._model.playlist.getCurrentItem(),n=e._node.querySelector(".yvp-opensimsim-uuid");n.innerHTML="UUID : "+(t?t.id:""),n=e._node.querySelector(".yvp-opensimsim-lmsid"),n.innerHTML="License Id (LMS ID) : "+(t?t.license.licenseId:""),n=e._node.querySelector(".yvp-videoSpaceId"),n.innerHTML="Video SpaceID : "+(t?t.metrics.pageSpaceId:""),n=e._node.querySelector(".yvp-sessionId"),n.innerHTML="SessionId : "+(t?t.videoSession:"none"),e._isHTML5()&&!a.samsung&&(n=e._node.querySelector(".yvp-opensimsim-url"),t.isLive()?n.innerHTML="Master Playlist URL : "+e._videoNode.currentSrc:a.tv&&(n.innerHTML="Current Source URL : "+e._videoNode.currentSrc),n=e._node.querySelector(".yvp-opensimsim-config"),n&&(n.innerHTML=e._generateHtmlTitle("Config")+e._generateConfigHTML(e._model.getConfig())))},r.prototype._updateInfo=function(){var e=this,t=e._model.playlist.getCurrentItem(),n=e._playbackInfo,r=n.deliveryProtocol;t&&(r+=" / "+t.getType());var i=e._node.querySelector(".yvp-opensimsim-graphs");i.innerHTML="";var a=Object.keys(e._history);a.forEach(function(t){var n=e._history[t].data;if(n.some(function(e){return s.isNumber(e)})){var r=150,a=60,l=document.createElement("div");o.classList(l).add("yvp-opensimsim-graph");var d=document.createElement("div");d.innerHTML=e._history[t].title,l.appendChild(d);var c=document.createElement("canvas");c.width=r,c.height=a,l.appendChild(c),i.appendChild(l);var p=c.getContext("2d");e._renderGraph(e._timestamps,n,p,r,a)}});var l={"Total Quality Levels":n.qualityLevels,"Current Bitrate":n.currentStreamBitrate+" kbps",Protocol:r,cdn:t?t.getCDN():"","Recovery count":t?t.failoverCount:0,"Buffer Length / Time":n.bufferLength+" secs / "+n.bufferTime+" secs","Frame Rate":n.frameRate,"Download Speed":n.currentKbps+" kbps","Dropped Frames":n.droppedFrames,"Hardware Acceleration Used":n.hwAccelUsed?"Yes":"No","Hardware Acceleration Enabled":n.hwAccelEnabled?"Yes":"No","Memory Used":n.totalMemory+" MB","Media Size":n.mediaWidth+" x "+n.mediaHeight,"Stream Playback Rate":n.playbackBytesPerSecond+" kbps"};t&&t.rendererType===u.HTML5_HLS&&(l["Buffering Count"]=n.bufferingCount,l["Total buffering time"]=n.totalBufferingTime+" ms");var d=e._node.querySelector(".yvp-opensimsim-detail");d.innerHTML=e._generateHtmlFromKeyValues(l),d=e._node.querySelector(".yvp-opensimsim-renderertype"),d.innerHTML="Renderer Type : "+(e._model.playbackState.rendererType||"(no renderer yet)"),d=e._node.querySelector(".yvp-swf-ready"),d.innerHTML="Is SWF ready? "+e._isSwfReady},r.prototype._toggleHTML5Info=function(e){var t=this,n=t._node.querySelector(".yvp-opensimsim-tv");if(t._unsubscribeToHTML5Events(),t._clearHTML5Timers(),n.innerHTML="",e){n.innerHTML+='<div class="yvp-opensimsim-url"></div>',n.innerHTML+=t._generateHtmlTitle("HTML5 Video States");var r={"Current Time":'<span class="yvp-opensimsim-time"></span>',"Playback State":'<span class="yvp-opensimsim-playback"></span>',"Player State":'<span class="yvp-opensimsim-state"></span>',"Buffering State":'<span class="yvp-opensimsim-buffering"></span>',"Network State":'<span class="yvp-opensimsim-network"></span>',"Ready State":'<span class="yvp-opensimsim-ready"></span>',"Error State":'<span class="yvp-opensimsim-error">none</span>'};if(n.innerHTML+=t._generateHtmlFromKeyValues(r),a.tv&&s.isFunction(d)){n.innerHTML+=t._generateHtmlTitle("VTT Info");var i={"VTT Index":'<span class="yvp-opensimsim-vttindex"></span>',"VTT URL":'<span class="yvp-opensimsim-vtturl"></span>',"STREAM BITRATES":'<span class="yvp-opensimsim-bitrate-list"></span>'};n.innerHTML+=t._generateHtmlFromKeyValues(i)}n.innerHTML+='<div class="yvp-opensimsim-config"></div>',t._setupHTML5Timers(),t._subscribeToHTML5Events()}},r.prototype._unsubscribeToHTML5Events=function(){var e=this;e._html5eventsDetachArray&&e._html5eventsDetachArray.forEach(function(e){e()}),e._html5eventsDetachArray=[]},r.prototype._subscribeToHTML5Events=function(){var e=this;e._html5eventsDetachArray.push(e._eventBus.subscribe(i.Video.TIMEUPDATE,function(t){e._node.querySelector(".yvp-opensimsim-time").innerHTML=t}));var t=["PLAYING","PAUSE","SEEKING","SEEKED"];t.forEach(function(t){e._html5eventsDetachArray.push(e._eventBus.subscribe(i.Video[t],function(){e._node.querySelector(".yvp-opensimsim-playback").innerHTML=t}))}),e._html5eventsDetachArray.push(e._eventBus.subscribe(i.Video.WAITING,function(t){e._node.querySelector(".yvp-opensimsim-buffering").innerHTML=t.value}));var n=[null,"aborted","network","decode","source not supported"];e._html5eventsDetachArray.push(e._eventBus.subscribe(i.Video.ERROR,function(t){e._node.querySelector(".yvp-opensimsim-error").innerHTML=n[t.code]})),a.tv&&s.isFunction(d)&&(e._html5eventsDetachArray.push(e._eventBus.subscribe(i.VTT_SEGMENT_LOADED,function(t,n,r,i){e._node.querySelector(".yvp-opensimsim-vttindex").innerHTML=r,e._node.querySelector(".yvp-opensimsim-vtturl").innerHTML=i})),e._html5eventsDetachArray.push(e._eventBus.subscribe(i.CTV.GET_BITRATE_FOR_OPSS,function(t){var n=e._node.querySelector(".yvp-opensimsim-bitrate-list");n.innerHTML="Bitrates : "+JSON.stringify(t)})))},r.prototype._setupHTML5Timers=function(){var e=this;e._playerStateTimer=setInterval(function(){e._node.querySelector(".yvp-opensimsim-state").innerHTML=e._model.playbackState.state},1e3);var t=["network empty","network idle","network loading","network no source"];if(!a.samsung){e._networkStateTimer=setInterval(function(){var n=t[e._videoNode.networkState];e._node.querySelector(".yvp-opensimsim-network").innerHTML=n},1e3);var n=["have nothing","have metadata","have current data","have future data","have enough data"];e._readyStateTimer=setInterval(function(){e._node.querySelector(".yvp-opensimsim-ready").innerHTML=n[e._videoNode.readyState]},1e3)}},r.prototype._clearHTML5Timers=function(){var e=this;e._playerStateTimer&&clearInterval(e._playerStateTimer),e._networkStateTimer&&clearInterval(e._networkStateTimer),e._readyStateTimer&&clearInterval(e._readyStateTimer)},r.prototype.destroy=function(){var e=this;e._toggleHTML5Info(!1),e._closeTap&&e._closeTap.destroy(),e._profileTap&&e._profileTap.destroy(),e._feedbackLinkTap&&e._feedbackLinkTap.destroy()}},{"../../../lib":"bRhrlU","../../../lib/user-agent":"ty5FFo","../event":"YJm+dH","../renderers/type":47,"../strings":"XwKsC9","../tap":"dsc79Q","../util":"jJTEqU","../vtt-fetcher":99,"./open-sim-sim.html":83}],85:[function(e,t,n){var r=new(e("hogan.js/lib/template").Template)(function(e,t,n){var r=this;return r.b(n=n||""),r.b('<div class="yvp-playlist-item-container">'),r.b("\n"+n),r.s(r.f("items",e,t,1),e,t,0,56,754,"{{ }}")&&(r.rs(e,t,function(e,t,r){r.b('        <li class="yvp-playlist-item" data-id=\''),r.b(r.v(r.f("id",e,t,0))),r.b("' data-idx="),r.b(r.v(r.f("idx",e,t,0))),r.b(">"),r.b("\n"+n),r.b('            <img class="yvp-playlist-item-image" src=\''),r.b(r.v(r.f("thumbnail",e,t,0))),r.b("'/>"),r.b("\n"+n),r.b('            <div class="yvp-playlist-border"></div>'),r.b("\n"+n),r.b('            <div class="yvp-playlist-item-gradient">'),r.b("\n"+n),r.b('                <div class="yvp-pl-meta">'),r.b("\n"+n),r.b("                    <span class='yvp-pl-title'>"),r.b(r.v(r.f("title",e,t,0))),r.b("</span>"),r.b("\n"+n),r.b("                    <span class='yvp-now-playing'>"),r.b(r.v(r.d("strings.NOW_PLAYING",e,t,0))),r.b("</span>"),r.b("\n"+n),r.s(r.f("isWideMode",e,t,1),e,t,0,528,623,"{{ }}")&&(r.rs(e,t,function(e,t,n){n.b("                        <span class='yvp-pl-provider'>"),n.b(n.v(n.f("provider",e,t,0))),n.b("</span>"),n.b("\n")}),e.pop()),r.b("                </div>"),r.b("\n"+n),r.b("            </div>"),r.b("\n"+n),r.b("            <div class='yvp-pl-dur'>"),r.b(r.v(r.f("duration",e,t,0))),r.b("</div>"),r.b("\n"+n),r.b("        </li>"),r.b("\n")}),e.pop()),r.b("</div>"),r.b("\n"),r.fl()});t.exports={render:function(){return r.render.apply(r,arguments)},r:function(){return r.r.apply(r,arguments)},ri:function(){return r.ri.apply(r,arguments)}}},{"hogan.js/lib/template":156}],86:[function(e,t,n){var r=new(e("hogan.js/lib/template").Template)(function(e,t,n){var r=this;return r.b(n=n||""),r.s(r.f("isEndscreen",e,t,1),e,t,0,16,158,"{{ }}")&&(r.rs(e,t,function(e,t,r){r.b("    <div class='yvp-end-screen yvp-end-replay'>"),r.b("\n"+n),r.s(r.f("showReplayOnly",e,t,1),e,t,0,88,138,"{{ }}")&&(r.rs(e,t,function(e,t,n){n.b('        <div class="yvp-end-rep-icon"></div>'),n.b("\n")}),e.pop())}),e.pop()),r.s(r.f("showReplayOnly",e,t,1),e,t,1,0,0,"")||(r.b("    <div tabindex='0' class='yvp-playlist-container "),r.b(r.v(r.f("modeClass",e,t,0))),r.b(" yvp-pl-loading yvp-playlist-theme-"),r.b(r.v(r.f("theme",e,t,0))),r.b(" "),r.b(r.v(r.f("streamModeClass",e,t,0))),r.b("'>"),r.b("\n"+n),r.s(r.f("isHiddenMode",e,t,1),e,t,0,348,417,"{{ }}")&&(r.rs(e,t,function(e,t,n){n.b('        <div class="yvp-upnext-title">'),n.b(n.v(n.d("strings.UP_NEXT",e,t,0))),n.b("</div>"),n.b("\n")}),e.pop()),r.b('        <div class="yvp-playlist-pg-btn yvp-playlist-pg-btn-prev disabled"></div>'),r.b("\n"+n),r.b('        <div class="yvp-playlist-pg-btn yvp-playlist-pg-btn-next"></div>'),r.b("\n"+n),r.b('        <div class="yvp-playlist-strip">'),r.b("\n"+n),r.b('            <ul class="yvp-playlist-strip-list strip-animate">'),r.b("\n"+n),r.b("\n"+n),r.b("            </ul>"),r.b("\n"+n),r.b('            <div class="yvp-pl-loader-bg"></div>'),r.b("\n"+n),r.b("        </div>"),r.b("\n"+n),r.b('        <div class="yvp-pl-loader yvp-spinner-icon"></div>'),r.b("\n"+n),r.b("    </div>"),r.b("\n")),r.s(r.f("isEndscreen",e,t,1),e,t,0,883,895,"{{ }}")&&(r.rs(e,t,function(e,t,n){n.b("    </div>"),n.b("\n")}),e.pop()),r.fl()});t.exports={render:function(){return r.render.apply(r,arguments)},r:function(){return r.r.apply(r,arguments)},ri:function(){return r.ri.apply(r,arguments)}}},{"hogan.js/lib/template":156}],87:[function(e,t,n){"use strict";function r(e,t,n){var r=this;r._eventBus=e,r._eventBus.subscribe(a.PLAYER_DIMENSION_CHANGE,r._onDimensionChange,r),r._eventBus.subscribe(a.FULLSCREEN_CHANGE,r._onFullscreenChange,r),r._eventBus.subscribe(a.PLAYBACK_STARTED,r._onPlaybackStarted,r),r._eventBus.subscribe(a.RENDER_PLAYLIST_FIRST_BATCH,r._renderFirstBatch,r),r._model=n,r._view=t}t.exports=r;var i=(e("fs"),e("insert-css")),a=e("../event"),o=e("../tap"),s=e("../strings"),l=e("../util"),d=e("../../../lib"),c=e("../../../lib/user-agent"),p=e("./playlist.html"),u=e("./playlist-items.html"),_=e("./end-screen-grid.html"),m=5,v=12,y=6,f=14;i('.strip-animate{-webkit-transition:left 420ms cubic-bezier(0,.2,.1,1);-moz-transition:left 420ms cubic-bezier(0,.2,.1,1);-o-transition:left 420ms cubic-bezier(0,.2,.1,1);transition:left 420ms cubic-bezier(0,.2,.1,1)}.yvp-pl-loader{display:none;position:absolute;top:0;left:0;right:0;bottom:0;margin:auto;width:32px;height:32px;background-size:100%}.yvp-pl-loader-bg{background-color:rgba(0,0,0,0.3);position:absolute;left:0;bottom:0;top:0;width:100%;display:none}.yvp-pl-loading .yvp-pl-loader,.yvp-pl-loading .yvp-pl-loader-bg{display:block}.yvp-playlist-pg-btn{width:24px;height:24px;background-image:url("data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iODgiIGhlaWdodD0iODgiIHZpZXdCb3g9IjAgMCA4OCA4OCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48dGl0bGU+cGFnZS1iYWNrPC90aXRsZT48cGF0aCBkPSJNMzkuNDY1IDQzLjk1NmwxOS4xNS0xOS41MmMxLjQ0LTEuNDcgMS40NC0zLjg2IDAtNS4zMzItLjctLjcxMi0xLjYyOC0xLjEwNC0yLjYxNi0xLjEwNC0uOTkgMC0xLjkyLjM5Mi0yLjYxOCAxLjEwNGwtMjQuMzEgMjQuNzgtLjA3Mi4wNzIgMjQuMzggMjQuODVjLjcuNzEyIDEuNjMgMS4xMDQgMi42MTcgMS4xMDQuOTg1IDAgMS45MTUtLjM5MiAyLjYxNi0xLjEwNCAxLjQ0LTEuNDcgMS40NC0zLjg2MyAwLTUuMzMzTDM5LjQ2NSA0My45NTYiIGZpbGw9IiNGRkYiIGZpbGwtcnVsZT0iZXZlbm9kZCIvPjwvc3ZnPg==");background-position:center;background-repeat:no-repeat;background-size:100%;position:absolute;top:55px;cursor:pointer;z-index:10;opacity:.8;left:21px;}.yvp-playlist-pg-btn:hover{opacity:1}.yvp-playlist-pg-btn.disabled{opacity:.4;cursor:default}.yvp-playlist-pg-btn.yvp-playlist-pg-btn-next{background-image:url("data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iODgiIGhlaWdodD0iODgiIHZpZXdCb3g9IjAgMCA4OCA4OCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48dGl0bGU+cGFnZS1uZXh0PC90aXRsZT48cGF0aCBkPSJNNDkuMDE4IDQ0LjExOGwtMTkuMTUgMTkuNTE4Yy0xLjQ0IDEuNDctMS40NCAzLjg2MyAwIDUuMzMzLjcuNzEgMS42MjggMS4xMDMgMi42MTYgMS4xMDMuOTkgMCAxLjkxOC0uMzkyIDIuNjE3LTEuMTA0bDI0LjMxLTI0Ljc4LjA3My0uMDcyLTI0LjM4LTI0Ljg1Yy0uNy0uNzEzLTEuNjMtMS4xMDUtMi42MTctMS4xMDUtLjk4NSAwLTEuOTE1LjM5Mi0yLjYxNiAxLjEwNS0xLjQ0IDEuNDctMS40NCAzLjg2MyAwIDUuMzMybDE5LjE0OCAxOS41MTgiIGZpbGw9IiNGRkYiIGZpbGwtcnVsZT0iZXZlbm9kZCIvPjwvc3ZnPg==");right:21px;left:auto}.yvp-playlist-strip{position:absolute;left:38px;right:24px;overflow:hidden}.yvp-playlist-strip-list{list-style-type:none;position:relative;left:0;white-space:nowrap}.yvp-pl-meta{opacity:0;position:absolute;left:8px;right:8px;color:#fff;bottom:6px;overflow:hidden}.yvp-pl-title{overflow:hidden;line-height:16px;-webkit-line-clamp:2;text-overflow:ellipsis;max-height:32px;display:-webkit-box;-webkit-box-orient:vertical;font-size:13px;vertical-align:bottom;white-space:normal}.yvp-pl-provider{display:none}.yvp-playlist-mode-hidden{position:absolute;left:-16px;right:-16px;height:auto;bottom:3000px;opacity:0;z-index:-20;-webkit-transition:opacity .3s ease-in-out;-moz-transition:opacity .3s ease-in-out;-o-transition:opacity .3s ease-in-out;transition:opacity .3s ease-in-out;}.yvp-playlist-mode-hidden .yvp-upnext-title{position:absolute;left:34px;font-family:Helvetica,helvetica,arial,sans-serif;font-size:10px;letter-spacing:.3px;line-height:15px;text-transform:uppercase;color:#fff}.yvp-playlist-mode-hidden .yvp-playlist-strip{top:20px;left:34px;right:34px}.yvp-playlist-mode-hidden .yvp-playlist-pg-btn{top:43px;left:10px;}.yvp-playlist-mode-hidden .yvp-playlist-pg-btn.yvp-playlist-pg-btn-next{right:10px;left:auto}.yvp-playlist-mode-hidden .yvp-pl-loader{top:36px;left:50%}.yvp-playlist-mode-hidden .yvp-playlist-item{width:126px;height:70px;display:inline-block;margin-right:14px;position:relative;cursor:pointer;overflow:hidden;-webkit-transform:translateX(24px) scale(.9,.9);-moz-transform:translateX(24px) scale(.9,.9);-ms-transform:translateX(24px) scale(.9,.9);-o-transform:translateX(24px) scale(.9,.9);transform:translateX(24px) scale(.9,.9);-webkit-transition:transform 420ms cubic-bezier(0,.4,.1,1);-moz-transition:transform 420ms cubic-bezier(0,.4,.1,1);-o-transition:transform 420ms cubic-bezier(0,.4,.1,1);transition:transform 420ms cubic-bezier(0,.4,.1,1);}.yvp-playlist-mode-hidden .yvp-playlist-item.yvp-hide{display:none}.yvp-playlist-mode-hidden .yvp-playlist-item .yvp-playlist-item-gradient{height:100%;top:0;background-image:-webkit-linear-gradient(180deg, rgba(18,23,23,0) 0%, rgba(18,23,23,0.2) 80%, rgba(18,23,23,0.8) 100%);background-image:-o-linear-gradient(180deg, rgba(18,23,23,0) 0%, rgba(18,23,23,0.2) 80%, rgba(18,23,23,0.8) 100%);background-image:linear-gradient(180deg, rgba(18,23,23,0) 0%, rgba(18,23,23,0.2) 80%, rgba(18,23,23,0.8) 100%)}.yvp-playlist-mode-hidden .yvp-playlist-item .yvp-pl-meta{top:0}.yvp-playlist-mode-hidden .yvp-playlist-item .yvp-playlist-item-image{width:126px;height:70px;overflow:hidden}.yvp-playlist-mode-hidden .yvp-playlist-item .yvp-pl-title,.yvp-playlist-mode-hidden .yvp-playlist-item .yvp-now-playing{display:none;font-size:12px;color:#fff;letter-spacing:0;max-height:48px;line-height:16px;margin-left:8px;margin-right:8px;margin-top:10px;opacity:0;}.yvp-playlist-mode-hidden .yvp-playlist-item .yvp-pl-title.yvp-show,.yvp-playlist-mode-hidden .yvp-playlist-item .yvp-now-playing.yvp-show{opacity:1;display:block}.yvp-playlist-mode-hidden .yvp-playlist-item .yvp-playlist-border{display:none;height:70px;position:absolute;top:0;left:0;width:5px;background-color:#188fff}.yvp-playlist-mode-hidden .yvp-playlist-item.yvp-currently-playing .yvp-playlist-border{display:block}.yvp-playlist-mode-hidden .yvp-playlist-item-gradient{position:absolute;height:22px;width:100%;bottom:0;opacity:1;background-image:-webkit-linear-gradient(180deg, rgba(18,23,23,0) 0%, rgba(18,23,23,0.2) 35%, rgba(18,23,23,0.8) 100%);background-image:-o-linear-gradient(180deg, rgba(18,23,23,0) 0%, rgba(18,23,23,0.2) 35%, rgba(18,23,23,0.8) 100%);background-image:linear-gradient(180deg, rgba(18,23,23,0) 0%, rgba(18,23,23,0.2) 35%, rgba(18,23,23,0.8) 100%)}.yvp-playlist-mode-hidden .yvp-pl-meta{position:absolute;left:0;right:0;bottom:0;opacity:1;color:#fff;overflow:hidden}.yvp-playlist-mode-hidden .yvp-pl-dur{display:block;position:absolute;right:0;bottom:0;padding:4px 7px;background:rgba(18,23,23,0.5);color:#fff;text-shadow:0 0 2px rgba(0,0,0,0);font-size:12px;font-weight:400;line-height:14px}.yvp-playlist-mode-hidden .yvp-playlist-item-gradient-duration{height:50px}.yvp-playlist-mode-hidden.yvp-hide-playlist{visibility:hidden}.yvp-playlist-mode-bottom{position:relative;height:83px;border:1px solid rgba(255,255,255,0.2);-webkit-transition:opacity .3s ease-in-out;-moz-transition:opacity .3s ease-in-out;-o-transition:opacity .3s ease-in-out;transition:opacity .3s ease-in-out;}.yvp-playlist-mode-bottom .yvp-playlist-strip{position:relative;height:83px;top:0;bottom:0;left:0;right:0;margin:0 24px 5px 24px}.yvp-playlist-mode-bottom .yvp-playlist-pg-btn{top:30px;left:0;}.yvp-playlist-mode-bottom .yvp-playlist-pg-btn.yvp-playlist-pg-btn-next{right:0;left:auto}.yvp-playlist-mode-bottom .yvp-pl-loader{top:30px;left:50%}.yvp-playlist-mode-bottom .yvp-playlist-strip-list{margin-top:5px}.yvp-playlist-mode-bottom .yvp-playlist-item{width:130px;height:73px;display:inline-block;margin-right:14px;position:relative;cursor:pointer;overflow:hidden;border-bottom:5px solid transparent;}.yvp-playlist-mode-bottom .yvp-playlist-item.yvp-currently-playing{border-bottom:5px solid #188fff}.yvp-playlist-mode-bottom .yvp-playlist-item .yvp-playlist-item-image{width:130px;height:73px}.yvp-playlist-mode-bottom .yvp-playlist-item-gradient{position:absolute;height:22px;width:100%;bottom:0;opacity:1;background-image:-webkit-linear-gradient(180deg, rgba(18,23,23,0) 0%, rgba(18,23,23,0.2) 35%, rgba(18,23,23,0.8) 100%);background-image:-o-linear-gradient(180deg, rgba(18,23,23,0) 0%, rgba(18,23,23,0.2) 35%, rgba(18,23,23,0.8) 100%);background-image:linear-gradient(180deg, rgba(18,23,23,0) 0%, rgba(18,23,23,0.2) 35%, rgba(18,23,23,0.8) 100%)}.yvp-playlist-mode-bottom .yvp-pl-meta{position:absolute;left:0;right:0;bottom:0;opacity:1;color:#fff;overflow:hidden}.yvp-playlist-mode-bottom .yvp-pl-title,.yvp-playlist-mode-bottom .yvp-now-playing{display:none;max-height:32px;font-size:13px;margin-left:6px;margin-right:5px;margin-bottom:5px;overflow:hidden;line-height:16px;vertical-align:bottom;white-space:normal;text-overflow:ellipsis;-webkit-line-clamp:2;-webkit-box-orient:vertical;opacity:0;}.yvp-playlist-mode-bottom .yvp-pl-title.yvp-show,.yvp-playlist-mode-bottom .yvp-now-playing.yvp-show{opacity:1;display:block}.yvp-playlist-mode-bottom .yvp-pl-dur{display:block;position:absolute;right:0;bottom:0;padding:4px 7px;background:rgba(18,23,23,0.5);color:#fff;text-shadow:0 0 2px rgba(0,0,0,0);font-size:12px;font-weight:400;line-height:14px}.yvp-playlist-mode-bottom .yvp-playlist-item-gradient-duration{height:50px}.yvp-playlist-mode-bottom.yvp-hide-playlist{visibility:hidden}.yvp-playlist-mode-right{display:block;height:100%;width:318px;position:absolute;top:0;right:0;border:1px solid rgba(255,255,255,0.2);-webkit-transition:opacity .3s ease-in-out;-moz-transition:opacity .3s ease-in-out;-o-transition:opacity .3s ease-in-out;transition:opacity .3s ease-in-out;}.yvp-playlist-mode-right ::-webkit-scrollbar-track{-webkit-box-shadow:inset 0 0 3px rgba(0,0,0,0.3);border-radius:5px;background-color:transparent}.yvp-playlist-mode-right ::-webkit-scrollbar{background-color:transparent;width:5px}.yvp-playlist-mode-right ::-webkit-scrollbar-thumb{border-radius:5px;-webkit-box-shadow:inset 0 0 3px rgba(0,0,0,0.3)}.yvp-playlist-mode-right .yvp-playlist-strip{position:relative;height:100%;top:0;bottom:0;left:0;right:0}.yvp-playlist-mode-right .yvp-playlist-pg-btn{display:none}.yvp-playlist-mode-right .yvp-pl-loader{top:49%;left:49%}.yvp-playlist-mode-right .yvp-playlist-strip-list{height:100%;margin-left:18px;overflow-y:scroll}.yvp-playlist-mode-right .yvp-playlist-item:first-child{border-top:0 solid transparent}.yvp-playlist-mode-right .yvp-playlist-item:last-child{border-bottom:0 solid transparent}.yvp-playlist-mode-right .yvp-playlist-item{height:70px;display:block;margin-bottom:18px;position:relative;cursor:pointer;overflow-x:visible;border-bottom:0 solid transparent;}.yvp-playlist-mode-right .yvp-playlist-item.yvp-currently-playing .yvp-pl-meta{color:#fff;background-color:rgba(255,255,255,0.06)}.yvp-playlist-mode-right .yvp-playlist-item.yvp-currently-playing .yvp-playlist-border{display:block}.yvp-playlist-mode-right .yvp-playlist-item:hover .yvp-pl-meta{color:#fff;background-color:rgba(255,255,255,0.06)}.yvp-playlist-mode-right .yvp-playlist-item-image{display:block;width:126px;height:70px}.yvp-playlist-mode-right .yvp-playlist-border{display:none;height:70px;position:absolute;top:0;left:0;width:5px;background-color:#188fff}.yvp-playlist-mode-right .yvp-pl-meta{color:#fff;position:absolute;top:0;right:0;bottom:0;left:126px;padding:4px 12px 0 12px;font-size:12px;line-height:16px;overflow:hidden;opacity:1}.yvp-playlist-mode-right .yvp-pl-title{display:block;display:-webkit-box;color:#fff;margin-left:6px;margin-right:5px;margin-bottom:5px;margin-top:0;line-height:16px;overflow:hidden;max-height:32px;opacity:1;font-size:13px;font-weight:500;-webkit-line-clamp:3;-webkit-box-orient:vertical;vertical-align:bottom;white-space:normal;text-overflow:ellipsis;}.yvp-playlist-mode-right .yvp-pl-title.yvp-show{opacity:1;display:block}.yvp-playlist-mode-right .yvp-now-playing{display:none}.yvp-playlist-mode-right .yvp-pl-provider{display:block;color:#9ea2af;font-size:11px;margin:0;text-overflow:ellipsis;overflow:hidden}.yvp-playlist-mode-right .yvp-playlist-item-gradient{position:absolute;height:22px;width:100%;bottom:0;opacity:1;background-image:-webkit-linear-gradient(180deg, rgba(18,23,23,0) 0%, rgba(18,23,23,0.2) 35%, rgba(18,23,23,0.8) 100%);background-image:-o-linear-gradient(180deg, rgba(18,23,23,0) 0%, rgba(18,23,23,0.2) 35%, rgba(18,23,23,0.8) 100%);background-image:linear-gradient(180deg, rgba(18,23,23,0) 0%, rgba(18,23,23,0.2) 35%, rgba(18,23,23,0.8) 100%)}.yvp-playlist-mode-right .yvp-pl-dur{display:block;position:absolute;right:169px;bottom:0;padding:4px 7px;background:rgba(18,23,23,0.5);color:#fff;text-shadow:0 0 2px rgba(0,0,0,0);font-size:12px;font-weight:400;line-height:14px}.yvp-playlist-mode-right .yvp-playlist-item-gradient-duration{height:50px}.yvp-playlist-mode-right.yvp-hide-playlist{visibility:hidden}.yvp-playlist-mode-right.yvp-playlist-theme-light .yvp-pl-meta{color:#000}.yvp-playlist-mode-right.yvp-playlist-theme-light ::-webkit-scrollbar-thumb{background-color:#ccc}.yvp-playlist-mode-right.yvp-playlist-theme-dark ::-webkit-scrollbar-thumb{background-color:#464e56}.yvp-playlist-in-stream.yvp-playlist-theme-light ::-webkit-scrollbar-thumb,.yvp-playlist-in-stream.yvp-playlist-theme-dark ::-webkit-scrollbar-thumb{background-color:#ccc}.yvp-playlist-mode-bottom.yvp-playlist-theme-light,.yvp-playlist-mode-right.yvp-playlist-theme-light{background-color:#fff;}.yvp-playlist-mode-bottom.yvp-playlist-theme-light .yvp-playlist-pg-btn,.yvp-playlist-mode-right.yvp-playlist-theme-light .yvp-playlist-pg-btn{background-image:url("data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjQiIGhlaWdodD0iMjQiIHZpZXdCb3g9IjAgMCAyNCAyNCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48dGl0bGU+cGFnZS1iYWNrLWJsYWNrPC90aXRsZT48cGF0aCBkPSJNMTUuNzE3IDYuNzM2Yy4zNzctLjM5Ny4zNzctMS4wNDIgMC0xLjQzOC0uMTgyLS4xOTItLjQyNS0uMjk4LS42ODMtLjI5OC0uMjU4IDAtLjUuMTA2LS42ODMuMjk4TDggMTEuOThsNi4zNSA2LjcyMmMuMTgzLjE5Mi40MjYuMjk4LjY4NC4yOTguMjU3IDAgLjUtLjEwNi42ODMtLjI5OC4zNzctLjM5Ny4zNzctMS4wNDIgMC0xLjQzOEwxMC43MTUgMTJsNS4wMDItNS4yNjR6IiBmaWxsPSIjMDAwIiBmaWxsLXJ1bGU9ImV2ZW5vZGQiLz48L3N2Zz4=");}.yvp-playlist-mode-bottom.yvp-playlist-theme-light .yvp-playlist-pg-btn.yvp-playlist-pg-btn-next,.yvp-playlist-mode-right.yvp-playlist-theme-light .yvp-playlist-pg-btn.yvp-playlist-pg-btn-next{background-image:url("data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjQiIGhlaWdodD0iMjQiIHZpZXdCb3g9IjAgMCAyNCAyNCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48dGl0bGU+cGFnZS1uZXh0PC90aXRsZT48cGF0aCBkPSJNOC4yODMgMTcuMjY0Yy0uMzc3LjM5Ny0uMzc3IDEuMDQyIDAgMS40MzguMTgyLjE5Mi40MjUuMjk4LjY4My4yOTguMjU4IDAgLjUtLjEwNi42ODMtLjI5OEwxNiAxMi4wMiA5LjY1IDUuMjk3QzkuNDY3IDUuMTA2IDkuMjI0IDUgOC45NjYgNWMtLjI1NyAwLS41LjEwNi0uNjgzLjI5OC0uMzc3LjM5Ny0uMzc3IDEuMDQyIDAgMS40MzhMMTMuMjg1IDEybC01LjAwMiA1LjI2NHoiIGZpbGw9IiMwMDAiIGZpbGwtcnVsZT0iZXZlbm9kZCIvPjwvc3ZnPg==")}.yvp-playlist-mode-bottom.yvp-playlist-theme-light .yvp-pl-loader-bg,.yvp-playlist-mode-right.yvp-playlist-theme-light .yvp-pl-loader-bg{background-color:rgba(0,0,0,0.7)}.yvp-playlist-mode-bottom.yvp-playlist-theme-light .yvp-pl-meta,.yvp-playlist-mode-right.yvp-playlist-theme-light .yvp-pl-meta{color:#fff}.yvp-playlist-mode-bottom.yvp-playlist-theme-dark,.yvp-playlist-mode-right.yvp-playlist-theme-dark{background-color:#121717}.yvp-browser-desktop .yvp-hover-elem{display:none;opacity:.1;position:absolute;bottom:28px;width:100%;height:100px;left:0}.yvp-browser-desktop .yvp-upnext-container:hover .yvp-hover-elem{display:block;background-color:rgba(0,0,0,0)}.yvp-browser-desktop .yvp-upnext-container:hover .yvp-playlist-mode-hidden{opacity:1;z-index:10;bottom:140px}.yvp-browser-desktop .yvp-playlist-item .yvp-playlist-item-gradient{opacity:0}.yvp-browser-desktop .yvp-playlist-item:hover .yvp-playlist-item-gradient{opacity:1}.yvp-browser-desktop .yvp-playlist-item:hover .yvp-pl-meta{opacity:1}.yvp-browser-desktop .yvp-overlay-fuji{opacity:0;}.yvp-browser-desktop .yvp-overlay-fuji:hover{opacity:1;}.yvp-browser-desktop .yvp-overlay-fuji:hover .yvp-pl-meta{opacity:1}.yvp-browser-desktop .yvp-playlist-mode-hidden .yvp-playlist-item .yvp-playlist-item-gradient,.yvp-browser-desktop .yvp-playlist-mode-bottom .yvp-playlist-item .yvp-playlist-item-gradient{opacity:1}.yvp-browser-desktop .yvp-playlist-mode-hidden .yvp-playlist-item.yvp-currently-playing .yvp-pl-dur,.yvp-browser-desktop .yvp-playlist-mode-bottom .yvp-playlist-item.yvp-currently-playing .yvp-pl-dur{opacity:0}.yvp-browser-desktop .yvp-playlist-mode-hidden .yvp-playlist-item:hover .yvp-playlist-item-gradient,.yvp-browser-desktop .yvp-playlist-mode-bottom .yvp-playlist-item:hover .yvp-playlist-item-gradient{height:100%;-webkit-transition:opacity 200ms linear;-moz-transition:opacity 200ms linear;-o-transition:opacity 200ms linear;transition:opacity 200ms linear;background-image:-webkit-linear-gradient(180deg, rgba(18,23,23,0.55) 0%, rgba(18,23,23,0.55) 100%);background-image:-o-linear-gradient(180deg, rgba(18,23,23,0.55) 0%, rgba(18,23,23,0.55) 100%);background-image:linear-gradient(180deg, rgba(18,23,23,0.55) 0%, rgba(18,23,23,0.55) 100%)}.yvp-browser-desktop .yvp-playlist-mode-hidden .yvp-playlist-item:hover .yvp-playlist-item-image,.yvp-browser-desktop .yvp-playlist-mode-bottom .yvp-playlist-item:hover .yvp-playlist-item-image{-webkit-transform:scale(1.2,1.2);-moz-transform:scale(1.2,1.2);-ms-transform:scale(1.2,1.2);-o-transform:scale(1.2,1.2);transform:scale(1.2,1.2);-webkit-transition:transform 2.5s cubic-bezier(.1,.2,.6,1);-moz-transition:transform 2.5s cubic-bezier(.1,.2,.6,1);-o-transition:transform 2.5s cubic-bezier(.1,.2,.6,1);transition:transform 2.5s cubic-bezier(.1,.2,.6,1)}.yvp-browser-desktop .yvp-playlist-mode-hidden .yvp-playlist-item:hover .yvp-pl-title,.yvp-browser-desktop .yvp-playlist-mode-bottom .yvp-playlist-item:hover .yvp-pl-title{display:block;display:-webkit-box;-webkit-line-clamp:3;-webkit-box-orient:vertical;opacity:1;-webkit-transition:opacity 200ms linear;-moz-transition:opacity 200ms linear;-o-transition:opacity 200ms linear;transition:opacity 200ms linear}.yvp-browser-desktop .yvp-playlist-mode-hidden .yvp-playlist-item:hover .yvp-pl-dur,.yvp-browser-desktop .yvp-playlist-mode-bottom .yvp-playlist-item:hover .yvp-pl-dur{opacity:0}.yvp-browser-desktop .yvp-playlist-mode-hidden .yvp-playlist-item.yvp-currently-playing .yvp-pl-title,.yvp-browser-desktop .yvp-playlist-mode-bottom .yvp-playlist-item.yvp-currently-playing .yvp-pl-title{display:none}.yvp-browser-desktop .yvp-playlist-mode-hidden .yvp-playlist-item.yvp-currently-playing .yvp-playlist-item-gradient{width:calc(100% - 5px);width:-moz-calc(100% - 5px);width:-webkit-calc(100% - 5px);width:-o-calc(100% - 5px);left:5px;background-image:-webkit-linear-gradient(180deg, rgba(18,23,23,0.55) 0%, rgba(18,23,23,0.55) 100%);background-image:-o-linear-gradient(180deg, rgba(18,23,23,0.55) 0%, rgba(18,23,23,0.55) 100%);background-image:linear-gradient(180deg, rgba(18,23,23,0.55) 0%, rgba(18,23,23,0.55) 100%)}.yvp-browser-desktop .yvp-playlist-mode-right .yvp-playlist-item .yvp-playlist-item-gradient{position:static;opacity:1;width:0}.yvp-browser-desktop.yvp-ie9 .yvp-upnext-container:hover .yvp-playlist-mode-hidden{opacity:1;z-index:10;bottom:140px;background-color:rgba(0,0,0,0)}.yvp-browser-desktop.yvp-ie9 .yvp-upnext-container:hover .yvp-playlist-item-gradient{filter:progid:DXImageTransform.Microsoft.gradient(startColorStr=#00000000, endColorStr=#FF000000)}.yvp-browser-mobile .yvp-hover-elem{display:none}.yvp-browser-mobile .yvp-upnext-playlist.open .yvp-hover-elem{display:none}.yvp-browser-mobile .yvp-upnext-playlist.open .yvp-playlist-mode-hidden{opacity:1;z-index:10;bottom:45px}.yvp-browser-mobile .yvp-playlist-item-gradient{opacity:1}.yvp-browser-mobile .yvp-pl-meta{opacity:1}.yvp-browser-mobile .yvp-playlist-strip{overyflow-y:hidden;overflow-x:scroll;-webkit-overflow-scrolling:touch}.yvp-browser-mobile .yvp-playlist-pg-btn{display:none}.yvp-state-end-screen .yvp-start-screen{display:block}.yvp-state-end-screen .yvp-start-screen-bar-wrapper{display:none}.yvp-state-end-screen .yvp-start-screen-button{display:none}.yvp-state-end-screen .yvp-end-screen{z-index:22;background-color:rgba(0,0,0,0.85);}.yvp-state-end-screen .yvp-end-screen.yvp-end-replay{background-color:rgba(18,23,23,0.6)}.yvp-state-end-screen .yvp-end-rep-icon{background-image:url("data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjQiIGhlaWdodD0iMjQiIHZpZXdCb3g9IjAgMCAyNCAyNCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48ZyBmaWxsPSIjRkZGIiBmaWxsLXJ1bGU9ImV2ZW5vZGQiPjxwYXRoIGQ9Ik0xNi44NyAxNS41NDVjLS4xMS0uMTk3LS4yNzQtLjM0NS0uNDctLjQyNS0uMjA0LS4wOS0uNDUtLjA5LS42MS0uMDQtLjEwNy4wMjUtLjIwNS4wNjgtLjMyNy4xNDctLjA3Mi4wNS0uMTcyLjE1LS4yMTYuMjA0LS43NzYgMS4wMTgtMS45OTcgMS42MjctMy4yNjYgMS42MjctMi4yNDQgMC00LjA3LTEuODItNC4wNy00LjA1MyAwLTIuMTMzIDEuNzg3LTMuOTQ3IDMuOTgtNC4wNDNsLjUyLS4wMTNWN2wtLjU1Mi4wMTNDOC41NzMgNy4xMyA2IDkuNzYgNiAxMy4wMDNjMCAzLjMxMiAyLjY5MyA2LjAwNCA2LjAwNSA2LjAwNCAxLjg2NCAwIDMuNTktLjg0NSA0LjctMi4yOGwuMDctLjA5Yy4wMy0uMDQyLjA1My0uMDgyLjA3LS4xMDguMTA0LS4xNjguMTU1LS4zMzQuMTU1LS41MSAwLS4xNi0uMDQzLS4zMi0uMTMtLjQ3NSIvPjxwYXRoIGQ9Ik0xMi4zMTIgMTEuMDA4Yy0uMTcyIDAtLjMxMi0uMTUtLjMxMi0uMzIzVjUuMzIzYzAtLjE4LjEzOC0uMzIzLjMxMi0uMzIzLjA2OCAwIC4xMzIuMDI0LjE4NC4wNjNsNC4zNjUgMi42MWMuMTUyLjA5LjIwNC4yODYuMTE4LjQ0LS4wMjIuMDQtLjA1Mi4wNzUtLjA4Ni4xLS4wMTUuMDE0LS4wMzIuMDI3LS4wNS4wMzhsLTQuMzU1IDIuNzFjLS4wNS4wMy0uMTAzLjA0Ni0uMTU2LjA0OGgtLjAxOHoiLz48L2c+PC9zdmc+");background-size:100%;opacity:.6;width:80px;height:98px;position:absolute;top:0;left:0;right:0;bottom:0;margin:auto;cursor:pointer}.yvp-state-end-screen.yvp-stream .yvp-end-rep-icon,.yvp-state-end-screen.yvp-ministream .yvp-end-rep-icon{display:none}.yvp-state-end-screen .yvp-playlist-mode-endscreen{position:absolute;margin:auto;left:0;right:0;height:184px;width:512px;top:0;bottom:50px;z-index:10;opacity:1;}.yvp-state-end-screen .yvp-playlist-mode-endscreen .yvp-playlist-pg-btn{top:74px;left:-19px;}.yvp-state-end-screen .yvp-playlist-mode-endscreen .yvp-playlist-pg-btn.yvp-playlist-pg-btn-next{right:0;left:auto;right:-15px}.yvp-state-end-screen .yvp-playlist-mode-endscreen .yvp-playlist-strip{position:absolute;left:18px;right:14px;height:100%;bottom:0}.yvp-state-end-screen .yvp-playlist-mode-endscreen .yvp-playlist-strip-list{height:100%;margin-right:0;width:500px}.yvp-state-end-screen .yvp-playlist-mode-endscreen .yvp-playlist-item{width:100%;display:inline-block;position:relative;height:100%}.yvp-state-end-screen .yvp-playlist-mode-endscreen .yvp-pl-loader{top:35px;left:50%}.yvp-state-end-screen .yvp-playlist-mode-endscreen .yvp-end-screen-fuji-grid{width:100%;height:100%;list-style-type:none;white-space:normal;text-align:left;overflow:hidden}.yvp-state-end-screen .yvp-playlist-mode-endscreen .yvp-end-screen-fuji-tile{position:relative;width:150px;height:84px;cursor:pointer;float:left;margin-right:10px;overflow:hidden;margin-bottom:10px;padding:0}.yvp-state-end-screen .yvp-playlist-mode-endscreen .yvp-end-screen-fuji-tile-image{width:151px}.yvp-state-end-screen .yvp-playlist-mode-endscreen .yvp-overlay-fuji{position:absolute;top:0;left:0;width:100%;height:100%;color:#fff;font-size:13px;line-height:14px;}.yvp-state-end-screen .yvp-playlist-mode-endscreen .yvp-overlay-fuji.yvp-overlay-fuji-up-next{background-color:rgba(0,0,0,0.6);opacity:1}.yvp-state-end-screen .yvp-playlist-mode-endscreen .yvp-metadata-fuji{position:absolute;top:30px;left:0;right:0;bottom:0;background:linear-gradient(rgba(0,0,0,0),rgba(0,0,0,0.8))}.yvp-state-end-screen .yvp-playlist-mode-endscreen .yvp-end-screen-up-next-box{position:absolute;top:8px;left:8px;font-size:13px;line-height:14px;text-align:left;width:80px}.yvp-state-end-screen .yvp-playlist-mode-endscreen .yvp-end-screen-up-next-time{position:relative;margin-top:6px;display:inline-block;left:8px}.yvp-state-end-screen .yvp-playlist-mode-endscreen .yvp-end-screen-up-next-text{position:relative;margin-top:5px;display:inline-block;left:19px}.yvp-state-end-screen .yvp-playlist-mode-endscreen .yvp-end-screen-up-close{position:relative;left:57px;font-weight:500;font-size:19px;opacity:.6;}.yvp-state-end-screen .yvp-playlist-mode-endscreen .yvp-end-screen-up-close:hover{opacity:1}.yvp-state-end-screen .yvp-playlist-mode-endscreen.yvp-pl-two-col{height:84px;width:347px;}.yvp-state-end-screen .yvp-playlist-mode-endscreen.yvp-pl-two-col .yvp-playlist-pg-btn{top:35px}.yvp-state-end-screen .yvp-playlist-mode-endscreen.yvp-pl-two-col .yvp-playlist-strip-list{width:332px}.yvp-state-end-screen .yvp-playlist-mode-endscreen.yvp-pl-one-col{height:84px;width:178px;}.yvp-state-end-screen .yvp-playlist-mode-endscreen.yvp-pl-one-col .yvp-playlist-pg-btn{top:35px}.yvp-state-end-screen .yvp-playlist-mode-endscreen.yvp-pl-one-col .yvp-playlist-strip-list{width:158px}.yvp-state-end-screen .yvp-playlist-mode-endscreen.yvp-pl-three-col{height:284px;width:678px;}.yvp-state-end-screen .yvp-playlist-mode-endscreen.yvp-pl-three-col .yvp-playlist-pg-btn{top:135px}.yvp-state-end-screen .yvp-playlist-mode-endscreen.yvp-pl-three-col .yvp-playlist-strip-list{width:666px}.yvp-content div.yvp-end-screen-up-next-circle{width:20px;height:20px;-moz-border-radius:20px;-webkit-border-radius:20px;border-radius:20px;border:2px solid rgba(255,255,255,0.9);display:block;position:absolute;top:0;left:0}.yvp-content div.yvp-end-screen-arc{position:absolute;top:0;left:0;width:100px;height:100px;border-radius:100%;border:1px solid;display:none}.yvp-playlist-in-stream.yvp-playlist-mode-right.yvp-playlist-theme-dark,.yvp-playlist-in-stream.yvp-playlist-mode-right.yvp-playlist-theme-light{background-color:#fff}.yvp-playlist-in-stream.yvp-playlist-mode-right{width:276px;}.yvp-playlist-in-stream.yvp-playlist-mode-right .yvp-playlist-strip-list{margin-left:16px}.yvp-playlist-in-stream.yvp-playlist-mode-right .yvp-playlist-item{height:72px;margin-bottom:20px;}.yvp-playlist-in-stream.yvp-playlist-mode-right .yvp-playlist-item .yvp-playlist-item-image{width:130px;height:73px}.yvp-playlist-in-stream.yvp-playlist-mode-right .yvp-playlist-item .yvp-pl-meta{left:130px}.yvp-playlist-in-stream.yvp-playlist-mode-right .yvp-playlist-item .yvp-pl-title{color:#000667}.yvp-playlist-in-stream.yvp-playlist-mode-right .yvp-playlist-item .yvp-playlist-border{height:72px}.yvp-playlist-in-stream.yvp-playlist-mode-right .yvp-playlist-item .yvp-pl-dur{right:125px;padding:2px 6px;color:#fff}.yvp-playlist-in-stream.yvp-playlist-mode-right .yvp-playlist-item .yvp-pl-provider{display:none}'),
r.prototype.create=function(e){var t=this;t._seedMediaItem=t._model.playlist.getCurrentItem(),t._start=0,t._count="hidden"===e?y:v,t._playlisItemIdx=0,t._posL=0,t._scrL=0,t._taps=[],t._theme=t._getTheme(e),t._mode=e,t._mdUpN="hidden"===e||"bottom"===e||"right"===e,t._mdEnd="endscreen"===e||"endscreen-rp"===e;var n="yvp-playlist-mode-"+e;t._repOnly="endscreen-rp"===e,t._onPlaylistItemTap=function(){t._mdUpN&&l.classList(t._node).remove("open"),t._eventBus.publish(a.RELATED_ITEM_CLICK,this.getAttribute("data-id"),this.itemIndex,t._mdUpN,!1),t._eventBus.publish(a.API.UI_INTERACT,{srcElement:"ui_pl_thmb_clk"}),t._cancelUpNextTimeout()};var r=t._view.isPlaylistInStream()?"yvp-playlist-in-stream":"",i=l.render(p,{strings:s.i18n,modeClass:n,isHiddenMode:"hidden"===e||!1,isEndscreen:t._mdEnd,showReplayOnly:t._repOnly,theme:t._theme,streamModeClass:r});return t._updatePlaylistNodes(i),t._repOnly?(t._onEndScreenTap=function(){t._eventBus.publish(a.RELATED_ITEM_CLICK,t._seedMediaItem.id,-1,!1,!1)},t._endScreenTap=new o(t._node),t._node.addEventListener("tap",function(){t._onEndScreenTap(!1)}),i):(t._model.playback.loop||t._mdEnd||t.renderPlaylist(t._model.playlist.getItems()),t._bindEvents(!0),i)},r.prototype._bindEvents=function(e){var t=this;if(t._pgPrevTap=new o(t._pgPrev),t._pgPrev.addEventListener("tap",function(){t._onPageBtnTap(!1)}),t._pgNextTap=new o(t._pgNext),t._pgNext.addEventListener("tap",function(){t._onPageBtnTap(!0)}),c.mobile&&t._plStrip.addEventListener("scroll",function(n){e&&t._relItems&&t._relItems.length<100&&t._plStrip.scrollLeft+t._plStrip.offsetWidth>=t._plStrip.scrollWidth&&!t._eoL&&t._fetchMoreRelatedItems()}),"right"===t._mode&&(t._plList.addEventListener("scroll",function(n){e&&t._relItems&&t._relItems.length<100&&t._plList.scrollTop+t._plList.offsetHeight>=t._plList.scrollHeight&&!t._eoL&&(t._fetchMoreRelatedItems(),t._eventBus.publish(a.API.UI_INTERACT,{srcElement:"ui_pl_scrl"}))}),!c.mobile)){var n=function(e){var n=t._plList.scrollTop,r=t._plList.scrollHeight,i=t._plList.offsetHeight,a="DOMMouseScroll"===e.type?-40*e.detail:e.wheelDelta,o=a>0,s=function(){return e.stopPropagation(),e.preventDefault(),e.returnValue=!1,!1};return!o&&-a>r-i-n?(t._plList.scrollTop=r,s()):o&&a>n?(t._plList.scrollTop=0,s()):void 0};t._plStrip.addEventListener("mousewheel",n),t._plStrip.addEventListener("DOMMouseScroll",n)}},r.prototype.upNextBtnTapHandler=function(){var e=this,t=e._model.playlist.position,n=t+1,r=e._model.playlist.getMediaItemAt(n),i=r.id;e._eventBus.publish(a.API.UI_INTERACT,{srcElement:"ctrl-next-click"}),e._eventBus.publish(a.API.UI_INTERACT,{srcElement:"ui_pl_nxt_clk"}),e._eventBus.publish(a.RELATED_ITEM_CLICK,i,n,e._mdUpN,!1)},r.prototype._renderFirstBatch=function(){var e=this;if(!e._model.playback.loop&&!e._mdEnd){var t=e._getAPIParamOptions();e._eventBus.publish(a.FETCH_MORE_RELATED_ITEMS,e._seedMediaItem,t,!1)}},r.prototype.renderPlaylist=function(e){var t=this;t._relItems=[],t._posL=0,t._scrL=0,t._taps=[],t._eoL=!1,t._plList.parentElement.scrollLeft=0,l.classList(t._pgPrev).add("disabled"),l.classList(t._pgNext).remove("disabled"),e&&t._renderPlaylistItems(e)},r.prototype._renderPlaylistItems=function(e){var t=this,n=t._mdUpN?u:_,r=[],i=c.chrome>43,p=!1;if(e){for(var v=0;v<e.length;v++){var y=e[v],f="",g="";y.duration&&d.isNumber(y.duration)&&(f=l.formatTime(y.duration)),"right"===t._mode&&y.provider&&y.provider.name&&(g=y.provider.name);var b=y.title;b&&b.length>40&&!i&&(b=b.substring(0,40)+"...");var h={id:y.id,title:b,showUpNext:0===v||p,upNextTime:m,thumbnail:y.images.small||y.images.thumbnail,duration:f,provider:g,idx:t._playlisItemIdx++},E='.yvp-playlist-item[data-id="'+h.id+'"]',T=t._plList.querySelector(E)||null;h.thumbnail&&!T?(r.push(h),p=!1):h.showUpNext&&(p=!0)}if(t._mdEnd){var A=0,S=6;t._itemW=500,t._model.uiState.width<384?(S=1,t._itemW=158,l.classList(t._plCont).add("yvp-pl-one-col")):t._model.uiState.width<550?(S=2,t._itemW=332,l.classList(t._plCont).add("yvp-pl-two-col")):t._model.uiState.width>800&&(S=12,t._itemW=666,l.classList(t._plCont).add("yvp-pl-three-col"));var I=parseInt(r.length/S),L=[];if(S>1)for(A=0;I>A;A++){var M=A*S,C=r.slice(M,M+S);L.push({videos:C})}else for(A=0;A<r.length;A++)L.push({videos:[r[A]]});r=L}var N=l.render(n,{items:r,strings:s.i18n});N=Array.prototype.slice.call(N.querySelectorAll(".yvp-playlist-item"),0);for(var D=0;D<N.length;D++){var R=N[D];if(t._mdUpN)R.itemIndex=D+t._relItems.length,t._taps.push(new o(R)),R.addEventListener("tap",t._onPlaylistItemTap);else if(t._mdEnd)for(var O=Array.prototype.slice.call(R.querySelectorAll(".yvp-end-screen-fuji-tile"),0),P=0;P<O.length;P++){var w=O[P];w.itemIndex=P+t._relItems.length,t._taps.push(new o(w)),w.addEventListener("tap",t._onPlaylistItemTap)}t._plList.appendChild(R)}if(t._relItems=t._relItems.concat(e),t._mdEnd&&(t._upNClose=t._node.querySelector(".yvp-end-screen-up-close"),t._upNCloseT=new o(t._upNClose),t._upNClose.addEventListener("tap",function(e){t._eventBus.publish(a.API.UI_INTERACT,{srcElement:"es-vid-cancel"}),t._cancelUpNextTimeout(),e.stopPropagation()}),t._upNtime=m,t._upNtimer=setTimeout(function(){t._upNextTimeout()},1e3)),t._setPlaylistViewSize(),l.classList(t._plCont).remove("yvp-pl-loading"),!t._mdEnd){var k=t._view.getFullscreen();k||t._setCurrentVideoItemUI(t._mode,!1)}}},r.prototype._setPlaylistViewSize=function(){var e=this;e._listW=e._plStrip.offsetWidth||e._plStrip._offsetWidth,e._mdEnd?e._numPgItems=1:(e._itemW=134,e._numPgItems=parseInt(e._listW/e._itemW))},r.prototype._cancelUpNextTimeout=function(){var e=this;if(e._upNtimer){clearTimeout(e._upNtimer),e._upNtimer=null,e._upNClose&&(e._upNCloseT.destroy(),e._upNClose.removeEventListener("tap",e._cancelUpNextTimeout));var t=e._node.querySelector(".yvp-end-screen-up-next-box");t&&(l.classList(t.parentElement.querySelector(".yvp-overlay-fuji")).remove("yvp-overlay-fuji-up-next"),t.parentElement.removeChild(t))}},r.prototype._upNextTimeout=function(){var e=this;0===e._upNtime?(e._eventBus.publish(a.RELATED_ITEM_CLICK,e._relItems[0].id,0,!1,!0),e._upNtimer=null):(e._upNtime-=1,e._node.querySelector(".yvp-end-screen-up-next-time").innerHTML=e._upNtime,e._upNtimer=setTimeout(function(){e._upNextTimeout()},1e3))},r.prototype._onPageBtnTap=function(e){var t=this,n=t._view.getFullscreen();if(t._cancelUpNextTimeout(),"right"!==t._mode||n){t._mdUpN&&t._eventBus.publish(a.UP_NEXT_PG_CLICK);var r=t._mdEnd?"es-":"next-";r=e?r+"right":r+"left",t._eventBus.publish(a.API.UI_INTERACT,{srcElement:r}),t._listW=t._plList.offsetWidth||t._plList._offsetWidth;var i=(t._plList.children.length-t._numPgItems)*t._itemW;t._scrL=t._transTimer?t._scrL:t._plList.parentElement.scrollLeft;var o=t._scrL%t._listW,s=l.classList(t._pgPrev).contains("disabled");if(!s||e){!e&&o&&(o=-1*(t._listW-o));var d=parseInt((i-t._scrL)/t._itemW)>=t._numPgItems,c=t._scrL>=i;if((c||!d)&&e)return void(t._eoL||(l.classList(t._pgNext).add("disabled"),t._relItems&&t._relItems.length<100?t._fetchMoreRelatedItems():t._eoL=!0));t._posL=e?t._posL-t._listW:t._posL+t._listW,t._scrL=e?t._scrL+t._listW:t._scrL-t._listW,t._posL+=o,t._scrL-=o,t._scrL<=i&&l.classList(t._pgNext).remove("disabled"),t._scrL>0?l.classList(t._pgPrev).remove("disabled"):l.classList(t._pgPrev).add("disabled"),l.classList(t._plList).add("strip-animate"),t._plList.style.left=t._posL+"px",t._transTimer&&(clearTimeout(t._transTimer),t._transTimer=null),t._transTimer=setTimeout(function(){l.classList(t._plList).remove("strip-animate"),t._plList.style.left="0px",t._posL=0,t._transTimer=null,t._node.querySelector(".yvp-playlist-strip").scrollLeft=t._scrL,t._plStrip.scrollLeft=t._scrL,t._mdEnd&&(t._plLoader.style.left=t._scrL+"px")},1e3)}}},r.prototype._setCurrentVideoItemUI=function(e,t){var n=this,r=n._model.playlist.getCurrentItem(),i=r&&r.id,a=n._plList.querySelector(".yvp-currently-playing"),o='.yvp-playlist-item[data-id="'+i+'"]',s=n._plList.querySelector(o);if(a&&(l.classList(a).remove("yvp-currently-playing"),"right"!==e)){var d=a.querySelector(".yvp-pl-title"),c=a.querySelector(".yvp-pl-dur"),p=a.querySelector(".yvp-playlist-item-gradient"),u=a.querySelector(".yvp-now-playing");l.classList(d).remove("yvp-show"),l.classList(c).remove("yvp-hide"),l.classList(p).remove("yvp-playlist-item-gradient-duration"),l.classList(u).remove("yvp-show")}if(s){var _=s.offsetLeft,m=s.offsetWidth,v=Number(s.getAttribute("data-idx"))||0;if(l.classList(s).add("yvp-currently-playing"),"right"!==e){var y=s.querySelector(".yvp-pl-dur"),g=s.querySelector(".yvp-playlist-item-gradient"),b=s.querySelector(".yvp-now-playing");l.classList(y).add("yvp-hide"),l.classList(g).add("yvp-playlist-item-gradient-duration"),l.classList(b).add("yvp-show");var h=m+f;_="hidden"===e?_+h:_,n._plList.parentElement.scrollLeft=_}else if("right"===e&&t){var E=s.offsetTop;n._plList.scrollTop=E-5}n._plList.children.length-v<n._numPgItems&&n._relItems.length<100&&n._fetchMoreRelatedItems(!0),n._plList.parentElement.scrollLeft>0?l.classList(n._pgPrev).remove("disabled"):l.classList(n._pgPrev).add("disabled")}},r.prototype._fetchMoreRelatedItems=function(e){var t=this;t._start+=t._count,l.classList(t._plCont).add("yvp-pl-loading"),t._eventBus.publish(a.FETCH_MORE_RELATED_ITEMS,t._seedMediaItem,t._getAPIParamOptions(),function(n,r){r&&r.length>0?(t._renderPlaylistItems(r),c.mobile||e||t._onPageBtnTap(!0)):(l.classList(t._plCont).remove("yvp-pl-loading"),t._eoL=!0)})},r.prototype._getTheme=function(e){var t,n=this,r=n._model.ui.playlistUI&&n._model.ui.playlistUI.theme||"light",i="dark";switch(e){case"bottom":t=r;break;case"hidden":case"right":t=i;break;default:t=i}return t},r.prototype._getAPIParamOptions=function(){var e=this;return{start:e._start,count:e._count,videoUuid:e._seedMediaItem.id,playlistId:e._model.ui.playlistUI&&e._model.ui.playlistUI.playlistId||null,playlistAlias:e._model.ui.playlistUI&&e._model.ui.playlistUI.playlistAlias||null}},r.prototype._updatePlaylistNodes=function(e){var t=this;t._node=e,t._plList=e.querySelector(".yvp-playlist-strip-list"),t._plStrip=e.querySelector(".yvp-playlist-strip"),t._plCont=t._mdEnd?e.querySelector(".yvp-playlist-container"):e,t._pgPrev=e.querySelector(".yvp-playlist-pg-btn-prev"),t._pgNext=e.querySelector(".yvp-playlist-pg-btn-next"),t._plLoader=e.querySelector(".yvp-pl-loader-bg")},r.prototype._onFullscreenChange=function(){var e,t,n,r,i,a,s=this,d=s._view.getFullscreen(),c=s._view.getContentNode(),p=[],u=s._view.getControls();if(s._view.showPlaylist()&&s._setPlaylistViewSize(),"bottom"===s._mode||"right"===s._mode){if(i=c.querySelector(".yvp-upnext-playlist"),e=c.querySelector(".yvp-playlist-mode-hidden"),t=c.querySelector(".yvp-playlist-mode-"+s._mode),n=e.querySelector(".yvp-playlist-strip-list"),r=t.querySelector(".yvp-playlist-strip-list"),d)n.innerHTML=r.innerHTML,r.innerHTML="",l.classList(i).remove("hide"),l.classList(e).remove("yvp-pl-loading"),s._updatePlaylistNodes(e),u&&u.attachUpNextMouseEvents(),setTimeout(function(){s._setCurrentVideoItemUI("hidden",!0)},500);else{r.innerHTML=n.innerHTML,n.innerHTML="",a="right"===s._mode?!0:!1,l.classList(i).add("hide"),s._updatePlaylistNodes(t),u&&u.detachUpNextMouseEvents();var _=s._plList.querySelector(".yvp-currently-playing");_&&l.classList(_).remove("yvp-hide"),setTimeout(function(){s._setCurrentVideoItemUI(s._mode,a)},500)}s._destroyPageTaps(),s._taps&&s._taps.forEach(function(e){e.destroy()}),s._taps=[],s._bindEvents(!1),p=Array.prototype.slice.call(s._plList.querySelectorAll(".yvp-playlist-item"),0),p.forEach(function(e){s._taps.push(new o(e)),e.addEventListener("tap",s._onPlaylistItemTap)})}},r.prototype._onDimensionChange=function(){var e=this;e._view.showPlaylist()&&(e._scrL=0,e._posL=0,setTimeout(function(){e._setPlaylistViewSize()},1e3))},r.prototype._onPlaybackStarted=function(){var e,t,n=this;n._mdEnd||(t=n._view.getFullscreen(),e=t?"hidden":n._mode,n._setCurrentVideoItemUI(e,!0))},r.prototype._removeItems=function(){var e=this;e._taps&&e._taps.forEach(function(e){e.destroy()}),e._taps=[];var t=Array.prototype.slice.call(e._plList.querySelectorAll(".yvp-playlist-item"),0);t.forEach(function(t){t.removeEventListener("tap",e._onPlaylistItemTap)}),e._plList.innerHTML=""},r.prototype._destroyPageTaps=function(){var e=this;e._pgNextTap&&e._pgNextTap&&(e._pgNextTap.destroy(),e._pgNextTap.destroy(),e._pgPrev.removeEventListener("tap",e._onPageBtnTap),e._pgNext.removeEventListener("tap",e._onPageBtnTap))},r.prototype.destroy=function(){var e=this;if(e._cancelUpNextTimeout(),e._destroyPageTaps(),e._taps&&e._taps.forEach(function(e){e.destroy()}),e._taps=[],e._repOnly)e._node.removeEventListener("tap",e._onEndScreenTap),e._endScreenTap.destroy();else{var t=Array.prototype.slice.call(e._plList.querySelectorAll(".yvp-playlist-item"),0);t.forEach(function(t){t.removeEventListener("tap",e._onPlaylistItemTap)})}}},{"../../../lib":"bRhrlU","../../../lib/user-agent":"ty5FFo","../event":"YJm+dH","../strings":"XwKsC9","../tap":"dsc79Q","../util":"jJTEqU","./end-screen-grid.html":74,"./playlist-items.html":85,"./playlist.html":86,fs:155,"insert-css":157}],88:[function(e,t,n){var r=new(e("hogan.js/lib/template").Template)(function(e,t,n){var r=this;return r.b(n=n||""),r.b("<div>"),r.b("\n"+n),r.b("    <pre>"),r.b("\n"+n),r.b(r.v(r.f("config",e,t,0))),r.b("\n"+n),r.b("    </pre>"),r.b("\n"+n),r.b("    <table border='1'>"),r.b("\n"+n),r.b("        <style>"),r.b("\n"+n),r.b("            .bars {"),r.b("\n"+n),r.b("                white-space: nowrap;"),r.b("\n"+n),r.b("            }"),r.b("\n"+n),r.b("            .bars div {"),r.b("\n"+n),r.b("                display: inline-block;"),r.b("\n"+n),r.b("                height: 25px;"),r.b("\n"+n),r.b("            }"),r.b("\n"+n),r.b("            .bar {"),r.b("\n"+n),r.b("                background-color: #714fff;"),r.b("\n"+n),r.b("                border: 1px solid #000;"),r.b("\n"+n),r.b("            }"),r.b("\n"+n),r.b("        </style>"),r.b("\n"+n),r.b("        <tr>"),r.b("\n"+n),r.b("            <th>Type</th>"),r.b("\n"+n),r.b("            <th>Description</th>"),r.b("\n"+n),r.b("            <th>Start</th>"),r.b("\n"+n),r.b("            <th>End</th>"),r.b("\n"+n),r.b("            <th>Diff</th>"),r.b("\n"+n),r.b("            <th>Bar</th>"),r.b("\n"+n),r.b("        </tr>"),r.b("\n"+n),r.s(r.f("profileItems",e,t,1),e,t,0,602,1024,"{{ }}")&&(r.rs(e,t,function(e,t,r){r.b("            <tr>"),r.b("\n"+n),r.b("                <td>"),r.b(r.v(r.f("type",e,t,0))),r.b("</td>"),r.b("\n"+n),r.b("                <td>"),r.b(r.v(r.f("desc",e,t,0))),r.b("</td>"),r.b("\n"+n),r.b("                <td>"),r.b(r.v(r.f("startTime",e,t,0))),r.b("</td>"),r.b("\n"+n),r.b("                <td>"),r.b(r.v(r.f("endTime",e,t,0))),r.b("</td>"),r.b("\n"+n),r.b("                <td>"),r.b(r.v(r.f("timeDiff",e,t,0))),r.b("</td>"),r.b("\n"+n),r.b("                <td class='bars'>"),r.b("\n"+n),r.b("                    <div style='width: "),r.b(r.v(r.f("startWidth",e,t,0))),r.b("px;'></div>"),r.b("\n"+n),r.b("                    <div class='bar' style='width: "),r.b(r.v(r.f("barWidth",e,t,0))),r.b("px;'></div>"),r.b("\n"+n),r.b("                </td>"),r.b("\n"+n),r.b("            </tr>"),r.b("\n")}),e.pop()),r.b("    </table>"),r.b("\n"+n),r.b("</div>"),r.b("\n"),r.fl()});t.exports={render:function(){return r.render.apply(r,arguments)},r:function(){return r.r.apply(r,arguments)},ri:function(){return r.ri.apply(r,arguments)}}},{"hogan.js/lib/template":156}],89:[function(e,t,n){var r=new(e("hogan.js/lib/template").Template)(function(e,t,n){var r=this;return r.b(n=n||""),r.b("<div class='yvp-settings-container' tabindex='0'>"),r.b("\n"+n),r.b("    <div class='yvp-main-settings open'>"),r.b("\n"+n),r.b("        <div class='yvp-settings-embed'>"),r.b("\n"+n),r.b("            <div class='yvp-settings-header' tabindex='0' aria-label='"),r.b(r.v(r.d("strings.EMBED",e,t,0))),r.b("'>"),r.b(r.v(r.d("strings.EMBED",e,t,0))),r.b("</div>"),r.b("\n"+n),r.b("            <div class='yvp-input-container yvp-embed-input-container'>"),r.b("\n"+n),r.b("                <input type='text' class='yvp-embed-input' value='' data-link-type='emb' readonly />"),r.b("\n"+n),r.b("            </div>"),r.b("\n"+n),r.b("            <div class='yvp-settings-divider'></div>"),r.b("\n"+n),r.b("        </div>"),r.b("\n"+n),r.b("        <div class='yvp-settings-quality'>"),r.b("\n"+n),r.b("            <div class='yvp-settings-header' tabindex='0' aria-label='"),r.b(r.v(r.d("strings.VIDEO_QUALITY",e,t,0))),r.b("'>"),r.b(r.v(r.d("strings.VIDEO_QUALITY",e,t,0))),r.b("</div>"),r.b("\n"+n),r.b("            <div class='yvp-settings-item "),r.b(r.v(r.d("qualityMap.auto.btnClass",e,t,0))),r.b(" yvp-settings-activated' tabindex='1'>"),r.b(r.v(r.d("strings.AUTO",e,t,0))),r.b("</div>"),r.b("\n"+n),r.b("            <div class='yvp-settings-item "),r.b(r.v(r.d("qualityMap.high.btnClass",e,t,0))),r.b(" yvp-disabled' tabindex='2'>"),r.b(r.v(r.d("strings.HIGH",e,t,0))),r.b("</div>"),r.b("\n"+n),r.b("            <div class='yvp-settings-item "),r.b(r.v(r.d("qualityMap.medium.btnClass",e,t,0))),r.b(" yvp-disabled' tabindex='3'>"),r.b(r.v(r.d("strings.MEDIUM",e,t,0))),r.b("</div>"),r.b("\n"+n),r.b("            <div class='yvp-settings-item last-item "),r.b(r.v(r.d("qualityMap.low.btnClass",e,t,0))),r.b(" yvp-disabled' tabindex='4'>"),r.b(r.v(r.d("strings.LOW",e,t,0))),r.b("</div>"),r.b("\n"+n),r.b("            <div class='yvp-settings-divider'></div>"),r.b("\n"+n),r.b("        </div>"),r.b("\n"+n),r.b("        <div class='yvp-settings-cc'>"),r.b("\n"+n),r.b("            <div class='yvp-settings-header last-item' tabindex='0' aria-label='"),r.b(r.v(r.d("strings.CC_SETTINGS",e,t,0))),r.b("'>"),r.b(r.v(r.d("strings.CC_SETTINGS",e,t,0))),r.b("</div>"),r.b("\n"+n),r.b("            <div class='yvp-settings-caret-icon right'></div>"),r.b("\n"+n),r.b("        </div>"),r.b("\n"+n),r.b("    </div>"),r.b("\n"+n),r.b("</div>"),r.fl()});t.exports={render:function(){return r.render.apply(r,arguments)},r:function(){return r.r.apply(r,arguments)},ri:function(){return r.ri.apply(r,arguments)}}},{"hogan.js/lib/template":156}],90:[function(e,t,n){"use strict";function r(e,t){var n=this;n._eventBus=e,n._model=t,n._ccOptions=new c(n._eventBus,n._model),n._qualityMap={auto:{btnClass:"yvp-quality-auto",bitrate:0},low:{btnClass:"yvp-quality-low",bitrate:0},medium:{btnClass:"yvp-quality-medium",bitrate:0},high:{btnClass:"yvp-quality-high",bitrate:0}},n._streamMap=null,n._availableStreamCount=0,n._eventBus.subscribe(a.PLAYBACK_STARTED,n._onPlaybackStarted,n),n._eventBus.subscribe(a.MEDIA_ITEM_LOADED,n._bindEmbedCode,n)}t.exports=r;var i=(e("fs"),e("insert-css")),a=e("../event"),o=e("../tap"),s=e("../strings"),l=e("../util"),d=(e("../../../lib/logger"),e("../../../lib"),e("../../src/stream")),c=e("./cc-options"),p=e("./settings.html");i('.yvp-bottom-bar .yvp-settings-container{position:absolute;z-index:4;width:auto;background:rgba(18,23,23,0.8);padding:16px;display:none;bottom:40px;border-radius:4px;right:0;font-family:\'Helvetica Neue\',Helvetica,Arial,sans-serif;font-size:11px;-webkit-font-smoothing:subpixel-antialiased;color:#fff;cursor:default;pointer-events:auto;-webkit-animation-name:fadeIn;animation-name:fadeIn;-webkit-animation-duration:.4s;-moz-animation-duration:.4s;animation-duration:.4s;}.yvp-bottom-bar .yvp-settings-container.open{display:block}.yvp-bottom-bar .yvp-settings-container.hide{display:none}.yvp-bottom-bar .yvp-settings-container .yvp-settings-header{color:rgba(255,255,255,0.6);margin-bottom:12px;}.yvp-bottom-bar .yvp-settings-container .yvp-settings-header.last-item{margin-bottom:0;}.yvp-bottom-bar .yvp-settings-container .yvp-settings-header.last-item:hover{color:#fff}.yvp-bottom-bar .yvp-settings-container .yvp-settings-caret-icon{position:relative;display:inline-block;width:6px;height:10px;margin:0;background-size:100%;background-repeat:no-repeat;cursor:pointer;opacity:1;}.yvp-bottom-bar .yvp-settings-container .yvp-settings-caret-icon.right{top:2px;left:2px;background-image:url("data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNiIgaGVpZ2h0PSIxMCIgdmlld0JveD0iMCAwIDYgMTAiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+PHBhdGggZD0iTTMuNzU1IDQuNjk3bC0zLjU2IDMuNTZjLS4yNi4yNi0uMjYuNjgyIDAgLjk0Mi4yNi4yNi42ODMuMjYuOTQzIDBMNS42NCA0LjY5NiAxLjEzOC4xOTVDMS4wMDguMDY1LjgzOCAwIC42NjggMCAuNDk1IDAgLjMyNS4wNjUuMTk1LjE5NWMtLjI2LjI2LS4yNi42ODMgMCAuOTQzbDMuNTYgMy41NiIgZmlsbD0iI0ZGRiIgZmlsbC1ydWxlPSJldmVub2RkIi8+PC9zdmc+Cg==")}.yvp-bottom-bar .yvp-settings-container .yvp-settings-caret-icon.left{top:1px;background-image:url("data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNiIgaGVpZ2h0PSIxMCIgdmlld0JveD0iMCAwIDYgMTAiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+PHRpdGxlPmljb24tY2FyZXQtbGVmdC1mcG88L3RpdGxlPjxwYXRoIGQ9Ik0yLjI0NSA1LjMwM2wzLjU2LTMuNTZjLjI2LS4yNi4yNi0uNjgyIDAtLjk0Mi0uMjYtLjI2LS42ODMtLjI2LS45NDMgMEwuMzYgNS4zMDRsNC41MDIgNC41MDJjLjEzLjEzLjMuMTk1LjQ3LjE5NS4xNzIgMCAuMzQyLS4wNjUuNDcyLS4xOTUuMjYtLjI2LjI2LS42ODMgMC0uOTQzbC0zLjU2LTMuNTYiIGZpbGw9IiNGRkYiIGZpbGwtcnVsZT0iZXZlbm9kZCIvPjwvc3ZnPg==")}.yvp-bottom-bar .yvp-settings-container .yvp-settings-item{display:inline-block;margin-right:6px;cursor:pointer;color:#fff;padding:4px;border:0;}.yvp-bottom-bar .yvp-settings-container .yvp-settings-item:hover{background-color:rgba(255,255,255,0.2);border-radius:3px}.yvp-bottom-bar .yvp-settings-container .yvp-settings-item.last-item{margin-right:0}.yvp-bottom-bar .yvp-settings-container .yvp-settings-item.yvp-disabled{display:none;pointer-events:none}.yvp-bottom-bar .yvp-settings-container .yvp-settings-activated{color:#fff;font-weight:normal;border-radius:3px;background-color:rgba(255,255,255,0.4);}.yvp-bottom-bar .yvp-settings-container .yvp-settings-activated:hover{background-color:rgba(255,255,255,0.4)}.yvp-main-settings.open{display:block}.yvp-main-settings.close{display:none}.yvp-main-settings .yvp-settings-divider{display:block;height:1px;margin:16px 0 16px 0;background:rgba(255,255,255,0.2)}.yvp-main-settings .yvp-settings-embed.close{display:none}.yvp-main-settings .yvp-settings-embed.open{display:block}.yvp-main-settings .yvp-input-container{height:20px;border:1px solid rgba(255,255,255,0.2);border-radius:4px}.yvp-main-settings .yvp-embed-input{display:block;min-width:178px;padding:3px 10px;font-size:11px;color:rgba(255,255,255,0.6);background:transparent;outline:none;box-shadow:none;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;}.yvp-main-settings .yvp-embed-input:hover{color:#fff;cursor:pointer}.yvp-main-settings .yvp-settings-quality{min-width:200px;display:none;}.yvp-main-settings .yvp-settings-quality.yvp-quality-enabled{display:block}.yvp-main-settings .yvp-settings-cc{min-width:115px;max-width:145px;cursor:pointer;}.yvp-main-settings .yvp-settings-cc .yvp-settings-header{display:inline-block;}.yvp-main-settings .yvp-settings-cc .yvp-settings-header:hover{color:rgba(255,255,255,0.6);opacity:1}'),r.prototype.create=function(){var e=this,t=l.render(p,{strings:s.i18n,qualityMap:e._qualityMap}),n=e._ccOptions.render();return e._node=t,e._mainSettings=t.querySelector(".yvp-main-settings"),e._qualityNode=e._mainSettings.querySelector(".yvp-settings-quality"),e._qualityAutoBtn=e._mainSettings.querySelector("."+e._qualityMap.auto.btnClass),e._qualityLowBtn=e._mainSettings.querySelector("."+e._qualityMap.low.btnClass),e._qualityMediumBtn=e._mainSettings.querySelector("."+e._qualityMap.medium.btnClass),e._qualityHighBtn=e._mainSettings.querySelector("."+e._qualityMap.high.btnClass),e._ccOptionsLink=e._mainSettings.querySelector(".yvp-settings-cc"),e._currentActivatedQuality=e._qualityAutoBtn,n.length>0&&(n.forEach(function(t){e._node.appendChild(t)}),e._ccSettingsMainScreen=n[0],e._backToMainSettings=e._ccSettingsMainScreen.querySelector(".yvp-cc-back-to-settings")),e._bindEvents(),t},r.prototype._bindEvents=function(){var e=this;e._ccOptionsTap=new o(e._ccOptionsLink),e._onCcOptionsTap=function(t){t.stopPropagation(),e._showCCMainOptions()},e._ccOptionsLink.addEventListener("tap",e._onCcOptionsTap),e._backToMainSettingsTap=new o(e._backToMainSettings),e._onBackToMainSettingsTap=function(t){t.stopPropagation(),e._backToSettings()},e._backToMainSettings.addEventListener("tap",e._onBackToMainSettingsTap),e._settingContainerTap=new o(e._node),e._onSettingContainerTap=function(e){e.stopPropagation()},e._node.addEventListener("tap",e._onSettingContainerTap)},r.prototype._showCCMainOptions=function(){var e=this;l.classList(e._mainSettings).remove("open"),l.classList(e._mainSettings).add("close"),l.classList(e._ccSettingsMainScreen).remove("close"),l.classList(e._ccSettingsMainScreen).add("open")},r.prototype._backToSettings=function(){var e=this;l.classList(e._mainSettings).remove("close"),l.classList(e._mainSettings).add("open"),l.classList(e._ccSettingsMainScreen).remove("add"),l.classList(e._ccSettingsMainScreen).add("close")},r.prototype._bindQualitySelection=function(e,t,n,r,i){var s=this;null!==e?(l.classList(t).remove("yvp-disabled"),"auto"!==i&&(s._availableStreamCount++,s._onlyAvailableStream=i),s._qualityMap[i].bitrate=e.bitrate,s[n]=function(n){n.stopPropagation(),s._bindQualityActivatedClass(t);var r="sr-"+i;s._eventBus.publish(a.API.UI_INTERACT,{srcElement:r}),s._eventBus.publish(a.QUALITY_SELECTED,{preference:i,stream:e}),s._model.playback.quality=i},s[r]=new o(t),t.addEventListener("tap",s[n])):l.classList(t).add("yvp-disabled")},r.prototype._bindVideoQuality=function(){var e=this;e._populateStreamSelections(),e._bindQualitySelection(e._lowQualityStream,e._qualityLowBtn,"_onQualityLowTap","_qualityLowTap","low"),e._bindQualitySelection(e._mediumQualityStream,e._qualityMediumBtn,"_onQualityMediumTap","_qualityMediumTap","medium"),e._bindQualitySelection(e._highQualityStream,e._qualityHighBtn,"_onQualityHighTap","_qualityHighTap","high"),e._bindQualitySelection(e._autoQualityStream,e._qualityAutoBtn,"_onQualityAutoTap","_qualityAutoTap","auto"),e._checkForOnlyOneStream()},r.prototype._populateStreamSelections=function(){var e=this;e._lowQualityStream=null,e._mediumQualityStream=null,e._highQualityStream=null,e._streams=e._model.playlist.getCurrentItem().streams,e._streamProfiles=e._model.playlist.getCurrentItem().streamProfiles,e._streamCapability=e._model.capabilities[e._model.playbackState.rendererType],e._setAutoQualityStream(),e._streams.length>1?e._streamMap=l.mapStreamsToQualities(e._streams):e._streamProfiles.length>1?e._streamMap=l.mapStreamsToQualities(e._streamProfiles):e._streamMap=l.mapStreamsToQualities({bitrates:e._model.playback.bitrates,heights:e._model.playback.heights}),e._lowQualityStream=e._streamMap.low,e._mediumQualityStream=e._streamMap.medium,e._highQualityStream=e._streamMap.high},r.prototype._checkForOnlyOneStream=function(){var e=this;if(1===e._availableStreamCount){var t=e._qualityMap[e._onlyAvailableStream].btnClass,n=e._qualityNode.querySelector("."+t);l.classList(n).add("yvp-disabled")}},r.prototype._onPlaybackStarted=function(){var e,t=this,n=l.shouldEnableQualitySelector(t._model);n?(t._bindVideoQuality(),e=t._qualityNode.querySelector("."+t._qualityMap.auto.btnClass),t._bindQualityActivatedClass(e),l.classList(t._qualityNode).add("yvp-quality-enabled")):l.classList(t._qualityNode).remove("yvp-quality-enabled")},r.prototype._bindQualityActivatedClass=function(e){var t=this;l.classList(t._currentActivatedQuality).remove("yvp-settings-activated"),t._currentActivatedQuality=e?e:t._qualityAutoBtn,l.classList(t._currentActivatedQuality).add("yvp-settings-activated")},r.prototype._destroyVQEventListener=function(e,t,n,r){t&&n&&(n.destroy(),e.removeEventListener("tap",r))},r.prototype._setAutoQualityStream=function(){var e=this,t=d.findStreamByProperty(e._streams,"bitrate",e._model.playback.desiredBitrate,e._streamCapability);e._autoQualityStream=t},r.prototype._bindEmbedCode=function(){var e=this,t=e._model.playlist.getCurrentItem(),n=e._getShareUrl(),r=t.embedCode||n,i=t.embedRights,d=e._node.querySelector(".yvp-settings-embed");e._emebedInputBox=e._node.querySelector(".yvp-embed-input"),e._embedCodeTap=new o(e._emebedInputBox),e._onEmbedCodeTap=function(t){t.target.focus(),t.target.setSelectionRange(0,t.target.value.length),e._eventBus.publish(a.API.UI_INTERACT,{srcElement:"settings-embed"})},e._emebedInputBox.addEventListener("tap",e._onEmbedCodeTap),n?(e._emebedInputBox.value=i?e.generateEmbedCode(r):s.i18n.EMBED_NOT_ALLOWED,l.classList(d).add("open"),l.classList(d).remove("close")):(l.classList(d).add("close"),l.classList(d).remove("open"))},r.prototype._getShareUrl=function(){var e=this,t=e._model.playlist&&e._model.playlist.getCurrentItem(),n=t&&t.shareUrl;return!e._model.playback.playInlineVideo&&window.location.pathname.indexOf(".html")>-1&&(n=window.location.protocol+"//"+window.location.host+window.location.pathname),n},r.prototype.generateEmbedCode=function(e){return e.match(/<iframe/)?e:"<iframe width='640' height='360' scrolling='no' frameborder='0' src='"+e+"?format=embed' allowfullscreen='true' mozallowfullscreen='true' webkitallowfullscreen='true' allowtransparency='true'></iframe>"},r.prototype.destroy=function(){var e=this;e._ccOptionsTap&&e._ccOptionsLink&&(e._ccOptionsTap.destroy(),e._ccOptionsLink.removeEventListener("tap",e._onCcOptionsTap)),e._embedCodeTap&&e._emebedInputBox&&(e._embedCodeTap.destroy(),e._emebedInputBox.removeEventListener("tap",e._onEmbedCodeTap)),e._backToMainSettingsTap&&e._backToMainSettings&&(e._backToMainSettingsTap.destroy(),e._backToMainSettings.removeEventListener("tap",e._onBackToMainSettingsTap)),e._settingContainerTap&&e._node&&(e._settingContainerTap.destroy(),e._node.removeEventListener("tap",e._onSettingContainerTap)),e._destroyVQEventListener(e._qualityAutoBtn,e._autoQualityStream,e._qualityAutoTap,e._onQualityAutoTap),e._destroyVQEventListener(e._qualityLowBtn,e._lowQualityStream,e._qualityLowTap,e._onQualityLowTap),e._destroyVQEventListener(e._qualityMediumBtn,e._mediumQualityStream,e._qualityMediumTap,e._onQualityMediumTap),e._destroyVQEventListener(e._qualityHighBtn,e._highQualityStream,e._qualityHighTap,e._onQualityHighTap),e._ccOptions=null,e._qualityNode=null,e._node=null}},{"../../../lib":"bRhrlU","../../../lib/logger":"IS9j5T","../../src/stream":"Af6MnA","../event":"YJm+dH","../strings":"XwKsC9","../tap":"dsc79Q","../util":"jJTEqU","./cc-options":71,"./settings.html":89,fs:155,"insert-css":157}],91:[function(e,t,n){var r=new(e("hogan.js/lib/template").Template)(function(e,t,n){var r=this;return r.b(n=n||""),r.b("<div class='yvp-start-screen' tabindex='-1'>"),r.b("\n"+n),r.b("    <img class='yvp-start-screen-image' src='"),r.b(r.v(r.f("imageSrc",e,t,0))),r.b("' width='"),r.b(r.v(r.f("width",e,t,0))),r.b("' height='"),r.b(r.v(r.f("height",e,t,0))),r.b("' aria-hidden='true'>"),r.b("\n"+n),r.s(r.d("config.showButton",e,t,1),e,t,0,188,308,"{{ }}")&&(r.rs(e,t,function(e,t,n){n.b("        <div class='yvp-start-screen-button' tabindex='0' aria-label='"),n.b(n.v(n.d("strings.PLAY_VIDEO",e,t,0))),n.b("' role='button'></div>"),n.b("\n")}),e.pop()),r.b("    <div class='yvp-start-screen-bar-wrapper'>"),r.b("\n"+n),r.b("        <div class='yvp-start-screen-bar' tabindex='-1'>"),r.b("\n"+n),r.s(r.d("config.showProvider",e,t,1),e,t,0,471,579,"{{ }}")&&(r.rs(e,t,function(e,t,n){n.b("                <h4 class='yvp-start-screen-provider' tabindex='1'>"),n.b(n.v(n.d("item.provider.name",e,t,0))),n.b("</h4>"),n.b("\n")}),e.pop()),r.s(r.d("config.showTitle",e,t,1),e,t,0,637,734,"{{ }}")&&(r.rs(e,t,function(e,t,n){n.b("                <h3 class='yvp-start-screen-title' tabindex='2'>"),n.b(n.v(n.d("item.title",e,t,0))),n.b("</h3>"),n.b("\n")}),e.pop()),r.s(r.d("config.showDescription",e,t,1),e,t,0,795,902,"{{ }}")&&(r.rs(e,t,function(e,t,n){n.b("                <p class='yvp-start-screen-description' tabindex='3'>"),n.b(n.v(n.d("item.description",e,t,0))),n.b("</p>"),n.b("\n")}),e.pop()),r.b("        </div>"),r.b("\n"+n),r.b("    </div>"),r.b("\n"+n),r.b("</div>"),r.b("\n"),r.fl()});t.exports={render:function(){return r.render.apply(r,arguments)},r:function(){return r.r.apply(r,arguments)},ri:function(){return r.ri.apply(r,arguments);
}}},{"hogan.js/lib/template":156}],92:[function(e,t,n){"use strict";function r(e){var t=this;t._eventBus=e}t.exports=r;var i=e("../event"),a=e("../tap"),o=e("../util"),s=e("../strings"),l=e("../../../lib/user-agent"),d=e("./start-screen.html");r.prototype.create=function(e,t){var n=this,r=t.ui.startScreenConfig,c={showTitle:r.showTitle&&e.title,showButton:r.showButton,showDescription:r.showDescription&&e.description,showProvider:r.showProvider&&e.provider&&e.provider.name},p=e.images.large||e.images.thumbnail||e.images.medium||e.images.small||e.images.provider;return n.node=o.render(d,{item:e,config:c,width:t.uiState.width,height:t.uiState.height,imageSrc:p,strings:s.i18n}),n._startScreenTap=new a(n.node),n._onStartScreenTap=function(){var e=function(){n._eventBus.publish(i.START_SCREEN_CLICK),n._eventBus.publish(i.API.UI_INTERACT,{srcElement:"startScreen"})};l.htc_one?setTimeout(e,500):e()},n.node.addEventListener("tap",n._onStartScreenTap),n.node},r.prototype.destroy=function(){var e=this;e._startScreenTap.destroy(),e.node.removeEventListener("tap",e._onStartScreenTap),e.node=null}},{"../../../lib/user-agent":"ty5FFo","../event":"YJm+dH","../strings":"XwKsC9","../tap":"dsc79Q","../util":"jJTEqU","./start-screen.html":91}],93:[function(e,t,n){"use strict";function r(e,t,n){var r=this;r._cssSettings=e,r._config=t,r._eventBus=n,r._events=[],r._config.items=r._config.items||[]}t.exports=r;var i=e("../../util"),a=e("../../tap"),o=e("../../../../lib");r.prototype.create=function(){var e=this;return e.node=document.createElement("div"),i.classList(e.node).add(e._cssSettings.wrapper),e._selectedItemWrapper=document.createElement("div"),i.classList(e._selectedItemWrapper).add(e._cssSettings.selectedWrapper),e._selectedItem=document.createElement("div"),i.classList(e._selectedItem).add(e._cssSettings.selected),e._selectedIndicator=document.createElement("span"),i.classList(e._selectedIndicator).add(e._cssSettings.availability),e._dropDownIcon=document.createElement("span"),i.classList(e._dropDownIcon).add(e._cssSettings.dropDownIcon),e._selectedItemWrapper.appendChild(e._selectedItem),e._selectedItemWrapper.appendChild(e._dropDownIcon),e.node.appendChild(e._selectedItemWrapper),e._syncListItems(),e.node.appendChild(e._itemList),e._syncUI(e._config.selected),e._bindUI(),e.node},r.prototype._syncListItems=function(){var e=this;e._itemList?(e._unBindItemList(),e._itemList.innerHTML=""):e._itemList=document.createElement("ul"),i.classList(e._itemList).add(e._cssSettings.list);var t,n=document.createDocumentFragment();e._config.items.length>0?e._config.items.forEach(function(r,a){t=document.createElement("li"),e._config.itemsData&&(t.val=e._config.itemsData[a]),i.classList(t).add(e._cssSettings.listItem),t.appendChild(document.createTextNode(r));var o=document.createElement("span");i.classList(o).add(e._cssSettings.availability),t.appendChild(o),n.appendChild(t)}):(t=document.createElement("li"),i.classList(t).add(e._cssSettings.listItem),t.appendChild(document.createTextNode(e._config.noItemsText)),n.appendChild(t)),e._itemList.innerHTML="",e._itemList.appendChild(n),e._bindItemList()},r.prototype.syncData=function(e){var t=this;e.items&&(t._config.items=e.items.length>0?e.items:t._config.items,t._config.itemsData=e.itemsData.length>0?e.itemsData:t._config.itemsData,t._syncListItems()),t._config.selected=e.selected,t._syncUI(t._config.selected)},r.prototype._syncUI=function(e){var t=this,n=document.createTextNode(e);t._selectedItem.firstChild?t._selectedItem.replaceChild(n,t._selectedItem.firstChild):(t._selectedItem.appendChild(n),t._selectedItem.appendChild(t._selectedIndicator)),t._config.items.length>0?i.classList(t._selectedIndicator).remove(t._cssSettings.notAvailable):i.classList(t._selectedIndicator).add(t._cssSettings.notAvailable)},r.prototype._bindUI=function(){var e=this;e._dropDownTap=new a(e._selectedItemWrapper),e._onDropDownIconTap=function(t){t.stopPropagation(),e._toggleListDisplay()},e._selectedItemWrapper.addEventListener("tap",e._onDropDownIconTap)},r.prototype._bindItemList=function(){var e=this;e._onItemSelected=function(t){t.stopPropagation(),e._syncUI(t.target.textContent),e._toggleListDisplay(),e._publishEvents(t.target)},e._childTaps=[],Array.prototype.forEach.call(e._itemList.childNodes,function(t){var n=new a(t);e._childTaps.push(n),t.childNodes[0].nodeValue!==e._config.noItemsText&&t.addEventListener("tap",e._onItemSelected)})},r.prototype._toggleListDisplay=function(){var e=this;e._isListOpen?i.classList(e._itemList).remove("open"):i.classList(e._itemList).add("open"),e._isListOpen=!e._isListOpen},r.prototype._unBindUI=function(){var e=this;e._dropDownTap&&e._dropDownTap.destroy(),e._dropDownTap&&e._dropDownIcon.removeEventListener("tap",e._onDropDownIconTap),e._unBindItemList()},r.prototype._unBindItemList=function(){var e=this;e._itemList.childNodes&&(Array.prototype.forEach.call(e._itemList.childNodes,function(t){t.removeEventListener("tap",e._onItemSelected)}),e._childTaps.forEach(function(e){e.destroy()}))},r.prototype.registerEvent=function(e){var t=this;-1===t._events.indexOf(e)&&t._events.push(e)},r.prototype.removeEvent=function(e){var t=this,n=t._events.indexOf(e);-1!==n&&t._events.splice(n,1)},r.prototype._publishEvents=function(e){var t=this,n=o.isNullOrUndefined(e.val)?null:e.val;if(null===n&&(n=e.textContent),t._events)for(var r=0;r<t._events.length;r++)t._eventBus.publish(t._events[r],n)},r.prototype.destroy=function(){var e=this;e._unBindUI(),e.events=null,e.node=null,e._itemList=null,e._childTaps=null}},{"../../../../lib":"bRhrlU","../../tap":"dsc79Q","../../util":"jJTEqU"}],94:[function(e,t,n){"use strict";function r(e,t,n){var r=this;r._cssSettings=e,r._config=t,r._eventBus=n,r._events=[],r._validateInput()}t.exports=r;var i=e("../../util"),a=e("../../../../lib"),o=e("../../tap");r.prototype._validateInput=function(){var e=this;if(!e._config)throw new Error("No config object provided for slider");if(e._config.minValue>=e._config.maxValue)throw new Error("Slider's min value is bigger/equal than max value");if(e._config.minValue>e._config.initialValue)throw new Error("Slider's min value is bigger than initial value");if(e._config.maxValue<e._config.initialValue)throw new Error("Slider's max value is smaller than initial value")},r.prototype.create=function(){var e=this;e.node=document.createElement("div"),i.classList(e.node).add(e._cssSettings.wrapper),e._track=document.createElement("div"),i.classList(e._track).add(e._cssSettings.track);var t=100/(e._config.anchors-1),n=0;if(e._trackAnchorsXPos=[],e._config.anchors>0)for(var r=0;r<e._config.anchors;r++){var a=document.createElement("div");i.classList(a).add(e._cssSettings.anchor),a.setAttribute("style","left: "+n+"%"),e._trackAnchorsXPos.push(n),n+=t,e._track.appendChild(a)}return e._sliderHandle=document.createElement("div"),i.classList(e._sliderHandle).add(e._cssSettings.handle),e._config.initialValue&&(e._sliderHandle.setAttribute("style","left: "+e._config.initialValue+"%"),e._fractionValue=e._config.initialValue/e._config.maxValue),e._track.appendChild(e._sliderHandle),e.node.appendChild(e._track),e._bindUI(),e.node},r.prototype._syncUI=function(e,t){var n,r=this;if(r._config.anchors>0){var i=100;r._trackAnchorsXPos.forEach(function(t){Math.abs(t-e)<i&&(i=Math.abs(t-e),n=t)})}e=a.isNullOrUndefined(n)?e:n,r._syncSliderHandlePosition(e),t||r._publishEvents(e)},r.prototype._getEvtPositionAndSyncUI=function(e){var t=this,n=t._getSliderValue(e);this._syncUI(n)},r.prototype._bindUI=function(){var e=this;e.node&&(e._sliderTap=new o(e.node),e._onSliderTap=function(t){t.stopPropagation(),e._getEvtPositionAndSyncUI(t)},e.node.addEventListener("tap",e._onSliderTap),e._onSliderDown=function(t){e._preventTouchDefault(t),e._isSliding=!0,e._onSliderMove(t)},e._onSliderMove=function(t){e._isSliding&&(e._preventTouchDefault(t),e._getEvtPositionAndSyncUI(t))},e._onSliderUp=function(t){e._isSliding&&(e._preventTouchDefault(t),e._isSliding=!1)},["mousedown","touchstart"].forEach(function(t){e.node.addEventListener(t,e._onSliderDown)}),["mousemove","touchmove"].forEach(function(t){document.addEventListener(t,e._onSliderMove)}),["mouseup","touchend"].forEach(function(t){document.addEventListener(t,e._onSliderUp)}))},r.prototype._unBindUI=function(){var e=this;e._sliderTap&&e._sliderTap.destroy(),e.node.removeEventListener("tap",e._onSliderTap),["mousedown","touchstart"].forEach(function(t){e.node.removeEventListener(t,e._onSliderDown)}),["mousemove","touchmove"].forEach(function(t){document.removeEventListener(t,e._onSliderMove)}),["mouseup","touchend"].forEach(function(t){document.removeEventListener(t,e._onSliderUp)})},r.prototype._preventTouchDefault=function(e){-1!==e.type.indexOf("touch")&&e.preventDefault()},r.prototype._syncSliderHandlePosition=function(e){var t=this;t._sliderHandle.setAttribute("style","left: "+e+"%")},r.prototype._getSliderValue=function(e){var t=this,n=e.pageX-t.node.getBoundingClientRect().left;return t._fractionValue=n/t.node.clientWidth,100*Math.max(0,Math.min(1,t._fractionValue))},r.prototype.registerEvent=function(e){var t=this;-1===t._events.indexOf(e)&&t._events.push(e)},r.prototype.removeEvent=function(e){var t=this,n=t._events.indexOf(e);-1!==n&&t._events.splice(n,1)},r.prototype._publishEvents=function(e){var t=this;t._events.forEach(function(n){t._eventBus.publish(n,e)})},r.prototype.getValue=function(){var e=this;return e._fractionValue?e._config.maxValue&&e._fractionValue*e._config.maxValue:void 0},r.prototype.setValue=function(e,t){var n=this;n._fractionValue=n._config.maxValue&&e/n._config.maxValue,n._syncUI(e,t)},r.prototype.destroy=function(){var e=this;e._unBindUI(),e.events=null,e.node=null}},{"../../../../lib":"bRhrlU","../../tap":"dsc79Q","../../util":"jJTEqU"}],95:[function(e,t,n){var r=new(e("hogan.js/lib/template").Template)(function(e,t,n){var r=this;return r.b(n=n||""),r.b("<div class='yvp-tooltip-wrapper'>"),r.b("\n"+n),r.b("    <div class='yvp-tooltip-content'>"),r.b("\n"+n),r.b("        "),r.b(r.v(r.f("tooltip-msg",e,t,0))),r.b("\n"+n),r.b("    </div>"),r.b("\n"+n),r.b("</div>"),r.b("\n"),r.fl()});t.exports={render:function(){return r.render.apply(r,arguments)},r:function(){return r.r.apply(r,arguments)},ri:function(){return r.ri.apply(r,arguments)}}},{"hogan.js/lib/template":156}],96:[function(e,t,n){"use strict";function r(e,t,n){var r=this;r.node=e,r._tooltipText=a.isString(t)?t:"";var o=i.render(s,{"tooltip-msg":r._tooltipText});r._tooltipTextNode=o.querySelector(".yvp-tooltip-content"),r._tooltipWrapperNode=o,r.node.appendChild(o),r.setEnabled(!0),r._onMouseLeave=function(e){e.stopPropagation(),i.classList(r.node).remove("yvp-tooltip-hidden")},n&&(n.hideUponClick&&r.hideOnClick(),n.positionBottom&&r.setPositionBottom())}t.exports=r;var i=e("../../util"),a=e("../../../../lib"),o=e("../../tap"),s=e("./tooltip.html");r.prototype.setText=function(e){var t=this;t._tooltipText=e,t._tooltipTextNode.innerHTML=t._tooltipText},r.prototype.setEnabled=function(e){var t=this;t._isEnabled=e,e?i.classList(t.node).add("yvp-tooltip"):i.classList(t.node).remove("yvp-tooltip")},r.prototype.hideOnClick=function(){var e=this;e._hideOnClick||(e._elemTap=new o(e.node),e._onElemTap=function(t){e.node&&i.classList(e.node).add("yvp-tooltip-hidden")},e.node.addEventListener("tap",e._onElemTap,e),["mouseleave","touchend"].forEach(function(t){e.node.addEventListener(t,e._onMouseLeave)}),e._hideOnClick=!0)},r.prototype.setPositionBottom=function(){var e=this;i.classList(e._tooltipWrapperNode).add("yvp-tooltip-pos-bottom")},r.prototype.destroy=function(){var e=this;e.node&&(e._elemTap&&(e._elemTap.destroy(),e.node.removeEventListener("tap",e._onElemTap)),["mouseleave","touchend"].forEach(function(t){e.node.removeEventListener(t,e._onMouseLeave)})),e._tooltipTextNode=null,e.node=null}},{"../../../../lib":"bRhrlU","../../tap":"dsc79Q","../../util":"jJTEqU","./tooltip.html":95}],97:[function(e,t,n){var r=new(e("hogan.js/lib/template").Template)(function(e,t,n){var r=this;return r.b(n=n||""),r.b("<div>"),r.b("\n"+n),r.b("    <div class='yvp-top-bar'>"),r.b("\n"+n),r.b("        <a class='yvp-provider-logo' target='_blank' aria-hidden='true'></a>"),r.b("\n"+n),r.b("        <div class='yvp-content-type hide' tabindex='0'></div>"),r.b("\n"+n),r.b("    </div>"),r.b("\n"+n),r.b("    <div class='yvp-login-prompt' id='yvp-login-prompt' role='dialog' tabindex='0'>"),r.b("\n"+n),r.b("        <div class='yvp-login-prompt-close' role='button' tabindex='0'></div>"),r.b("\n"+n),r.b("        <p class='yvp-login-prompt-msg' tabindex='0'>"),r.b(r.v(r.d("strings.LOGIN_MESSAGE",e,t,0))),r.b("</p>"),r.b("\n"+n),r.b("        <div class='yvp-login-yahoo-icn' role='button' tabindex='0'></div>"),r.b("\n"+n),r.b("    </div>"),r.b("\n"+n),r.b("    <div class='yvp-playing-item-title'></div>"),r.b("\n"+n),r.b("    <div class='yvp-bottom-bar'>"),r.b("\n"+n),r.b("        <div class='yvp-bottom-container'>"),r.b("\n"+n),r.b("            <div class='yvp-slider' role='slider' tabindex='0'>"),r.b("\n"+n),r.b("                <div class='yvp-slider-extension' aria-hidden='true'></div>"),r.b("\n"+n),r.b("                <div class='yvp-handle'></div>"),r.b("\n"+n),r.b("                <div class='yvp-buffer-bar'></div>"),r.b("\n"+n),r.b("                <div class='yvp-playback-bar'></div>"),r.b("\n"+n),r.b("                <div class='yvp-visual-seek'>"),r.b("\n"+n),r.b("                    <div class='yvp-vs-thumbnail'></div>"),r.b("\n"+n),r.b("                    <div class='yvp-vs-time'></div>"),r.b("\n"+n),r.b("                </div>"),r.b("\n"+n),r.b("            </div>"),r.b("\n"+n),r.b("            <div class='yvp-play-controls'>"),r.b("\n"+n),r.b("                <div class='yvp-play-btn' role='button' tabindex='0'></div>"),r.b("\n"+n),r.b("                <div class='yvp-upnext-container hide'>"),r.b("\n"+n),r.b("                    <div class='yvp-upnext-btn' role='button'>"),r.b("\n"+n),r.b("                    </div>"),r.b("\n"+n),r.b("                    <div class='yvp-upnext-playlist' role='dialog'>"),r.b("\n"+n),r.b("                        <div class='yvp-hover-elem'></div>"),r.b("\n"+n),r.b("                    </div>"),r.b("\n"+n),r.b("                </div>"),r.b("\n"+n),r.b("                <div class='yvp-time-container' tabindex='-1' aria-hidden='true'>"),r.b("\n"+n),r.b("                    <div class='yvp-current-time'></div>"),r.b("\n"+n),r.b("                    <div class='yvp-total-time'></div>"),r.b("\n"+n),r.b("                </div>"),r.b("\n"+n),r.b("            </div>"),r.b("\n"+n),r.b("            <div class='yvp-menu-controls'>"),r.b("\n"+n),r.b("                <div class='yvp-cc-btn button hide' role='button' tabindex='0' aria-label='"),r.b(r.v(r.d("strings.CC",e,t,0))),r.b("'></div>"),r.b("\n"+n),r.b("                <div class='yvp-volume-btn button' role='button' tabindex='0'>"),r.b("\n"+n),r.b("                    <div class='yvp-volume-bar-container'>"),r.b("\n"+n),r.b("                        <div class='yvp-volume-level'>"),r.b("\n"+n),r.b("                            <div class='yvp-volume-bar'>"),r.b("\n"+n),r.b("                                <div class='yvp-volume-handle'></div>"),r.b("\n"+n),r.b("                            </div>"),r.b("\n"+n),r.b("                            <div class='yvp-volume-value'></div>"),r.b("\n"+n),r.b("                        </div>"),r.b("\n"+n),r.b("                    </div>"),r.b("\n"+n),r.b("                </div>"),r.b("\n"+n),r.b("                <div class='yvp-setting-btn button' role='button' tabindex='0' aria-label='"),r.b(r.v(r.d("strings.SETTINGS",e,t,0))),r.b("'>"),r.b("\n"+n),r.b("                    <div class='yvp-setting-pointer' aria-hidden='true'></div>"),r.b("\n"+n),r.b("                </div>"),r.b("\n"+n),r.b("                <div class='yvp-chromecast-btn button' role='button' tabindex='0' style='display:none;' aria-label='"),r.b(r.v(r.d("strings.CHROMECAST",e,t,0))),r.b("'></div>"),r.b("\n"+n),r.b("                <div class='yvp-fullscreen-btn button' role='button' tabindex='0'></div>"),r.b("\n"+n),r.b("            </div>"),r.b("\n"+n),r.b("            <div class='yvp-docked-close-button'></div>"),r.b("\n"+n),r.b("        </div>"),r.b("\n"+n),r.b("    </div>"),r.b("\n"+n),r.b("    <div class='yvp-cast-overlay'>"),r.b("\n"+n),r.b("        <div>"),r.b("\n"+n),r.b("            <div class='cast-overlay-header'>"),r.b("\n"+n),r.b("                <div class='cast-device-info'>"),r.b("\n"+n),r.b("                    <p class='cast-device-name'>"),r.b(r.v(r.d("strings.CAST_PLAYING_RECEIVER",e,t,0))),r.b("</p>"),r.b("\n"+n),r.b("                    <small class='cast-device-type'>"),r.b(r.v(r.d("strings.CHROMECAST",e,t,0))),r.b("</small>"),r.b("\n"+n),r.b("                </div>"),r.b("\n"+n),r.b("            </div>"),r.b("\n"+n),r.b("            <div class='cast-overlay-content'></div>"),r.b("\n"+n),r.b("            <div class='cast-overlay-footer'>"),r.b("\n"+n),r.b("                <small class='cast-disconnect-btn'>"),r.b(r.v(r.d("strings.DISCONNECT",e,t,0))),r.b("</small>"),r.b("\n"+n),r.b("            </div>"),r.b("\n"+n),r.b("        </div>"),r.b("\n"+n),r.b("    </div>"),r.b("\n"+n),r.b("    <div class='yvp-mute-indicator'></div>"),r.b("\n"+n),r.b("    <div class='yvp-custom-controls'></div>"),r.b("\n"+n),r.b("    <div class='yvp-object-overlay'></div>"),r.b("\n"+n),r.b("</div>"),r.b("\n"),r.fl()});t.exports={render:function(){return r.render.apply(r,arguments)},r:function(){return r.r.apply(r,arguments)},ri:function(){return r.ri.apply(r,arguments)}}},{"hogan.js/lib/template":156}],98:[function(e,t,n){"use strict";function r(e,t,n){var r=this;r._eventBus=e,r._view=t,r._model=n,r._isLive=!1,r._liveState=null,r._ccAvailable=!0,r._eventBus.subscribe(o.MEDIA_ITEM_LOADED,r._onMediaItemLoaded,r),r._eventBus.subscribe(o.Video.PLAYING,r._onVideoPlaying,r),r._eventBus.subscribe(o.PLAYBACK_STARTED,r._onPlaybackStarted,r),r._eventBus.subscribe(o.AD_PLAYBACK_STARTED,r._onAdPlaying,r),r._eventBus.subscribe(o.PLAYBACK_PROGRESS,r._onPlaybackProgress,r),r._eventBus.subscribe(o.AD_PLAYBACK_PROGRESS,r._onAdPlaybackProgress,r),r._eventBus.subscribe(o.UPDATE_AD_BREAKS,r._updateAdBreaks,r),r._eventBus.subscribe(o.UPDATE_AD_COUNT,r._updateAdCount,r),r._eventBus.subscribe(o.CC.SHOW_CONTROLS,r._setCCUIAvailability,r),r._eventBus.subscribe(o.CC.REMOVED,r._checkCCAvailability,r),r._eventBus.subscribe(o.CC.UI_TOGGLE,r._toggleCCFromSettings,r),r._eventBus.subscribe(o.API.CAST_AVAILABILITY_CHANGE,r._setChromecastBtnVisibility,r),r._eventBus.subscribe(o.CAST.CONNECTION_STATUS_CHANGED,r._onCastConnectionChange,r),r._eventBus.subscribe(o.CAST.MEDIA_CHANGED,r._onCastMediaLoaded,r),r._eventBus.subscribe(o.CAST.CAPTION_AVAILABILITY_CHANGED,r._onCastCCAvailabilityChanged,r),r._eventBus.subscribe(o.CONTROLS_BAR_CHANGE,r._onControlsBarChange,r),r._eventBus.subscribe(o.KEYDOWN,r._onKeyDown,r),r._eventBus.subscribe(o.Video.CLICK,r._onVideoClick,r)}t.exports=r;var i=(e("fs"),e("insert-css")),a=e("../../../lib/user-agent"),o=(e("../cc"),e("../error"),e("../event")),s=(e("../stream"),e("../strings")),l=e("../tap"),d=e("../util"),c=e("../../../lib"),p=e("./settings"),u=e("../views/uiwidgets/tooltip"),_=e("./yahoo-controls.html"),m="on";i(".yvp-content.yvp-browser-desktop.yvp-docked .yvp-docked-close-button{visibility:visible;opacity:1}.yvp-content.yvp-browser-desktop.yvp-docked .yvp-playing-item-title.yvp-title-standard{padding:5px 24px 5px 8px;font-weight:500;font-size:16px;line-height:20px;z-index:29;}.yvp-content.yvp-browser-desktop.yvp-docked .yvp-playing-item-title.yvp-title-standard.yvp-live{padding:35px 24px 5px 8px}.yvp-content.yvp-browser-desktop.yvp-docked .yvp-content-type{left:8px;top:8px}.yvp-content.yvp-browser-desktop.yvp-state-video.yvp-hide-controls .yvp-bottom-bar{opacity:0;-webkit-transition:opacity .3s ease-in-out .1s;-moz-transition:opacity .3s ease-in-out .1s;-o-transition:opacity .3s ease-in-out .1s;transition:opacity .3s ease-in-out .1s}.yvp-content.yvp-browser-desktop.yvp-state-video.yvp-hide-controls .yvp-bottom-bar:hover{opacity:1}.yvp-content.yvp-browser-desktop.yvp-state-video.yvp-hide-controls.yvp-muted .yvp-mute-indicator{opacity:.8;visibility:visible;-webkit-transition:visibility 0s linear .5s,opacity .5s ease-in .8s;-moz-transition:visibility 0s linear .5s,opacity .5s ease-in .8s;-o-transition:visibility 0s linear .5s,opacity .5s ease-in .8s;transition:visibility 0s linear .5s,opacity .5s ease-in .8s}.yvp-content.yvp-browser-desktop.yvp-state-video.yvp-hide-controls .yvp-top-bar .yvp-content-type{opacity:0;-webkit-transition:opacity .3s ease-in-out .1s;-moz-transition:opacity .3s ease-in-out .1s;-o-transition:opacity .3s ease-in-out .1s;transition:opacity .3s ease-in-out .1s}.yvp-content:hover .yvp-bottom-bar{opacity:1;-webkit-transition:opacity .3s ease-in-out .1s;-moz-transition:opacity .3s ease-in-out .1s;-o-transition:opacity .3s ease-in-out .1s;transition:opacity .3s ease-in-out .1s}.yvp-content:hover .yvp-ads-overlay{-webkit-transition:height 0s;-moz-transition:height 0s;-o-transition:height 0s;transition:height 0s}.yvp-content:hover.yvp-muted .yvp-mute-indicator{opacity:0;visibility:hidden;-webkit-transition:visibility 0s linear .1s,opacity 0s ease-out 0s;-moz-transition:visibility 0s linear .1s,opacity 0s ease-out 0s;-o-transition:visibility 0s linear .1s,opacity 0s ease-out 0s;transition:visibility 0s linear .1s,opacity 0s ease-out 0s}.yvp-content:hover.yvp-muted .yvp-mute-indicator:hover{opacity:0;visibility:visible;-webkit-transition:visibility 0s linear .5s,opacity .2s ease-out 1s;-moz-transition:visibility 0s linear .5s,opacity .2s ease-out 1s;-o-transition:visibility 0s linear .5s,opacity .2s ease-out 1s;transition:visibility 0s linear .5s,opacity .2s ease-out 1s}.yvp-content.yvp-flag-paused.yvp-browser-desktop.yvp-state-video.yvp-hide-controls .yvp-bottom-bar{opacity:0;-webkit-transition:opacity .3s ease-in-out .1s;-moz-transition:opacity .3s ease-in-out .1s;-o-transition:opacity .3s ease-in-out .1s;transition:opacity .3s ease-in-out .1s}.yvp-content.yvp-flag-paused.yvp-browser-desktop.yvp-state-video.yvp-hide-controls .yvp-bottom-bar:hover{opacity:1}.yvp-content.yvp-flag-paused.yvp-browser-desktop.yvp-state-video.yvp-hide-controls .yvp-top-bar .yvp-content-type{opacity:0;-webkit-transition:opacity .3s ease-in-out .1s;-moz-transition:opacity .3s ease-in-out .1s;-o-transition:opacity .3s ease-in-out .1s;transition:opacity .3s ease-in-out .1s}.yvp-content.yvp-flag-paused:hover .yvp-bottom-bar{opacity:1;-webkit-transition:none;-moz-transition:none;-o-transition:none;transition:none}.yvp-content.yvp-flag-paused:hover .yvp-top-bar .yvp-content-type{opacity:1;-webkit-transition:none;-moz-transition:none;-o-transition:none;transition:none}.yvp-content.yvp-user-inactive div.yvp-bottom-bar{cursor:none;}.yvp-content.yvp-user-inactive div.yvp-bottom-bar .yvp-slider,.yvp-content.yvp-user-inactive div.yvp-bottom-bar .yvp-buffer-bar,.yvp-content.yvp-user-inactive div.yvp-bottom-bar .yvp-playback-bar{height:3px;bottom:2px;direction:ltr;-webkit-transition:height .5s linear 0s,bottom .5s linear 0s;-moz-transition:height .5s linear 0s,bottom .5s linear 0s;-o-transition:height .5s linear 0s,bottom .5s linear 0s;transition:height .5s linear 0s,bottom .5s linear 0s;-moz-transition:none}.yvp-content.yvp-user-inactive div.yvp-bottom-bar .yvp-handle{-webkit-transform:scale(0);-moz-transform:scale(0);-ms-transform:scale(0);-o-transform:scale(0);transform:scale(0);margin-top:-4px;-webkit-transition:all .51s linear 0s;-moz-transition:all .51s linear 0s;-o-transition:all .51s linear 0s;transition:all .51s linear 0s}.yvp-content.yvp-browser-desktop.yvp-state-video.yvp-disable-controls .yvp-bottom-bar{opacity:0 !important}.yvp-top-bar{position:absolute;z-index:28;width:100%;top:0;}.yvp-top-bar.hide{display:none}.yvp-top-bar .yvp-provider-logo{position:absolute;right:0;display:block;height:20px;width:55px;margin-top:20px;margin-right:10px;border:0;background-repeat:no-repeat;cursor:pointer;}.yvp-top-bar .yvp-provider-logo.yvp-hide{display:none}.yvp-top-bar .yvp-ad-count-container{display:none;position:absolute;left:16px;top:12px}.yvp-top-bar .yvp-ad-count,.yvp-top-bar .yvp-ad-countdowntimer{display:inline-block;color:#fff;position:relative;text-shadow:0 1px #000;font-size:11px;font-weight:normal}.yvp-top-bar .yvp-ad-countdowntimer{padding-left:5px;text-align:right}.yvp-bottom-bar{position:absolute;background-color:transparent;background-image:-webkit-linear-gradient(-180deg, rgba(255,255,255,0) 0%, rgba(18,23,23,0.2) 50%, rgba(18,23,23,0.8) 100%);background-image:-o-linear-gradient(-180deg, rgba(255,255,255,0) 0%, rgba(18,23,23,0.2) 50%, rgba(18,23,23,0.8) 100%);background-image:linear-gradient(-180deg, rgba(255,255,255,0) 0%, rgba(18,23,23,0.2) 50%, rgba(18,23,23,0.8) 100%);left:0;right:0;bottom:0;width:100%;height:100px;z-index:30;cursor:auto;}.yvp-bottom-bar .yvp-bottom-container{display:block;position:relative;top:56px;height:44px;margin:0 10px 0 10px;cursor:auto;}.yvp-bottom-bar .yvp-bottom-container .yvp-menu-controls .yvp-volume-btn{background-image:url(\"data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iODgiIGhlaWdodD0iODgiIHZpZXdCb3g9IjAgMCA4OCA4OCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48dGl0bGU+dm9sdW1lPC90aXRsZT48ZyBmaWxsPSIjRkZGIiBmaWxsLXJ1bGU9ImV2ZW5vZGQiPjxwYXRoIGQ9Ik0yNS42ODIgNTUuMDE2SDE2LjUzYy0uNDk1IDAtLjk0NC0uMTk0LTEuMjczLS41MTItLjM2My0uMzM0LS41OS0uODE0LS41OS0xLjM0OHYtMTguMjRjMC0uMTcuMDIyLS4zMzIuMDY0LS40ODcuMi0uNzkzLjkyLTEuMzc4IDEuNzc1LTEuMzc4aDkuMTYyVjMzbDE0LjY2Ni0xNC42Njd2NTEuMzM0bC0xNC42NS0xNC42NXpNNTIuNDQgNzAuMjQ1Yy0xLjY0NiAwLTIuOTI2LTEuMzQyLTMuMjkzLTIuNjAzLS41NS0xLjg4LjQ4OC0zLjg4IDIuMzEzLTQuNDYgOC4wMzMtMi41NiAxMy42NDQtMTAuNDEgMTMuNjQ0LTE5LjA5IDAtOC42NjMtNS42MS0xNi41MDYtMTMuNjQ2LTE5LjA3Mi0xLjgyNC0uNTgtMi44Ni0yLjU4My0yLjMxLTQuNDY0QzQ5LjU5IDE5LjA1IDUwLjk2NyAxOCA1Mi41IDE4Yy4zNTIgMCAuNzAyLjA1NSAxLjA0LjE2NCAxMC45MjUgMy40ODggMTguNTU4IDE0LjE1IDE4LjU1OCAyNS45MjggMCAxMS4xMzYtNy4wNjcgMjEuMDYtMTguNDQ0IDI1LjktLjM5My4xNy0uOC4yNTMtMS4yMTUuMjUzem0uMDk3LTE1LjQ4NGMtMS4wMDYgMC0xLjk2OC0uNDI3LTIuNjQtMS4xNzUtMS4yOTUtMS40Ni0xLjE2OC0zLjcuMjgtNC45OTcgMS4zMzgtMS4xOTMgMi4xMDUtMi45MDIgMi4xMDUtNC42OTQgMC0xLjgxOC0uNzYyLTMuNTM2LTIuMDktNC43MTItMS40NTYtMS4yOTctMS41OS0zLjUzNS0uMy00Ljk5Mi42NzUtLjc1OCAxLjY0LTEuMTkgMi42NS0xLjE5Ljg2NCAwIDEuNjk3LjMxNiAyLjM0NS44OSAyLjg0IDIuNTIzIDQuNDY3IDYuMTcgNC40NjcgMTAuMDA0IDAgMy44MDMtMS42MjYgNy40MzctNC40NjIgOS45Ny0uNjUuNTgtMS40ODYuODk3LTIuMzU1Ljg5N3oiLz48L2c+PC9zdmc+\");background-size:100%;left:0;top:0;opacity:.8;}.yvp-bottom-bar .yvp-bottom-container .yvp-menu-controls .yvp-volume-btn:hover,.yvp-bottom-bar .yvp-bottom-container .yvp-menu-controls .yvp-volume-btn:active{opacity:1}.yvp-bottom-bar .yvp-bottom-container .yvp-menu-controls .yvp-volume-btn.muted{background-image:url(\"data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iODgiIGhlaWdodD0iODgiIHZpZXdCb3g9IjAgMCA4OCA4OCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48dGl0bGU+dm9sdW1lLW11dGU8L3RpdGxlPjxnIGZpbGw9IiNGRkYiIGZpbGwtcnVsZT0iZXZlbm9kZCI+PHBhdGggZD0iTTI1LjY4MiA1NS4wMTZIMTYuNTNjLS40OTUgMC0uOTQ0LS4xOTQtMS4yNzMtLjUxMi0uMzYzLS4zMzQtLjU5LS44MTQtLjU5LTEuMzQ4di0xOC4yNGMwLS4xNy4wMjItLjMzMi4wNjQtLjQ4Ny4yLS43OTMuOTItMS4zNzggMS43NzUtMS4zNzhoOS4xNjJWMzNsMTQuNjY2LTE0LjY2N3Y1MS4zMzRsLTE0LjY1LTE0LjY1ek01OC45MDQgMzkuMDUybC00Ljk2OC00Ljk2OGMtMS40MjgtMS40MjgtMy43NTQtMS40MzItNS4xODYgMC0xLjQzIDEuNDMtMS40MzIgMy43NTMgMCA1LjE4NWw0Ljk2OCA0Ljk2Ny00Ljk2OCA0Ljk2OGMtMS40MjggMS40MjgtMS40MyAzLjc1MyAwIDUuMTg1IDEuNDMgMS40MyAzLjc1NCAxLjQzMiA1LjE4NiAwbDQuOTY4LTQuOTY4IDQuOTY4IDQuOTdjMS40MjcgMS40MjYgMy43NTMgMS40MyA1LjE4NS0uMDAyIDEuNDMtMS40MyAxLjQzMi0zLjc1MyAwLTUuMTg1bC00Ljk2OC00Ljk2OCA0Ljk2Ny00Ljk2OGMxLjQyOC0xLjQzIDEuNDMyLTMuNzU0IDAtNS4xODYtMS40My0xLjQzLTMuNzUzLTEuNDMyLTUuMTg1IDBsLTQuOTY4IDQuOTY4eiIvPjwvZz48L3N2Zz4=\")}.yvp-bottom-bar .yvp-bottom-container .yvp-menu-controls .yvp-setting-btn{background-image:url(\"data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iODgiIGhlaWdodD0iODgiIHZpZXdCb3g9IjAgMCA4OCA4OCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48dGl0bGU+c2V0dGluZ3M8L3RpdGxlPjxnIGZpbGw9Im5vbmUiIGZpbGwtcnVsZT0iZXZlbm9kZCI+PHBhdGggZD0iTTU1LjczNyA0NC4zMTRjLS4wMDQtNi4yMTUtNS4xMDQtMTEuMzM4LTExLjMyLTExLjM1Ni02LjI3LS4wMjItMTEuNDIgNS4xMDgtMTEuNDE3IDExLjM3NC4wMDQgNi4yMTUgNS4xMDQgMTEuMzM0IDExLjMxNSAxMS4zNiA2LjI3NC4wMiAxMS40MjYtNS4xMTIgMTEuNDIyLTExLjM3OHptMTAuMjc4IDQuNDAzYy0zLjE0IDEuMTg4LTQuNDc0IDQuMzgyLTMuMDg4IDcuNDMuNDQuOTY3Ljk1NCAxLjkxIDEuMzQyIDIuOTAzLjExMy4zLjAyLjg1LS4yIDEuMDg1LTEuMjU2IDEuMzQtMi41NSAyLjYzNy0zLjg5IDMuODktLjIzNC4yMi0uNzg0LjMxMi0xLjA4NC4xOTUtLjk5NC0uMzgtMS45MzYtLjg5OC0yLjkwNC0xLjMzOC0zLjAzNi0xLjM4Ni02LjI0LS4wNTItNy40MyAzLjA4Ny0uNDU3IDEuMjE2LS45IDEuNzk4LTEuMzUyIDMuMDE2aC02LjgxNmMtLjQ1LTEuMjE4LS45LTEuOC0xLjM1My0zLjAxNy0xLjE4NC0zLjE0LTQuMzg1LTQuNDc0LTcuNDI4LTMuMDg4LS45NjguNDQtMS45MS45NTMtMi45MDQgMS4zMzgtLjMuMTE3LS44NS4wMjYtMS4wODUtLjE5NC0xLjM0LTEuMjU0LTIuNi0yLjU5My0zLjkyNC0zLjg2NS0uNDMtLjQwNi0uNDA4LS43NDMtLjE2Mi0xLjIyLjQ5LS45NDYuOTUtMS45MSAxLjM4LTIuODg2IDEuMzItMi45NTUtLjAxNi02LjE0LTMuMDM3LTcuMy0xLjI0Mi0uNDc3LTIuNDk2LS45MjgtMy43NDctMS4zOXYtNi44MTZjMS4yMi0uNDUgMi40NC0uODk4IDMuNjU2LTEuMzUzIDMuMTM4LTEuMTggNC40NzItNC4zODIgMy4wODYtNy40My0uNDQtLjk2Ny0uOTUzLTEuOTEtMS4zNDItMi45MDMtLjExMy0uMy0uMDIyLS44NS4xOTgtMS4wODUgMS4yNTgtMS4zMzggMi41NTItMi42MzYgMy44OS0zLjg5LjIzNS0uMjIuNzg1LS4zMTIgMS4wODYtLjE5NS45OTQuMzgyIDEuOTM2LjkgMi45MDQgMS4zNCAzLjA0MyAxLjM4IDYuMjQ4LjA0NiA3LjQzLTMuMDkuNDUzLTEuMjE2LjktMS44NDUgMS4zNTItMy4wNmg2LjgxNmMuNDUgMS4yMTUuODk4IDEuODQ4IDEuMzUzIDMuMDYgMS4xODQgMy4xNCA0LjM4NSA0LjQ3NSA3LjQzIDMuMDkuOTY3LS40NCAxLjkxLS45NTggMi45MDMtMS4zNC4zLS4xMTcuODUtLjAyNSAxLjA4NS4xOTUgMS4zNCAxLjI1NCAyLjYgMi41OTIgMy45MjQgMy44NjQuNDMuNDA4LjQwNy43NDYuMTYyIDEuMjIyLS40OTIuOTQ2LS45NSAxLjkxLTEuMzggMi44OS0xLjMyIDIuOTUuMDE2IDYuMTQ1IDMuMDM3IDcuMjk2IDEuMjQ3LjQ3NyAyLjQ5Ny45MjggMy43NDQgMS4zOXY2LjgxNmMtMS4yMTguNDUtMi40MzUuOS0zLjY1MiAxLjM1M3oiIGZpbGw9IiNGRkYiLz48cGF0aCBkPSJNNTUuNzM3IDQ0LjI4Yy0uMDA0LTYuMjE2LTUuMTA0LTExLjMzOC0xMS4zMi0xMS4zNTYtNi4yNy0uMDIyLTExLjQyIDUuMTA3LTExLjQxNyAxMS4zNzQuMDA0IDYuMjE1IDUuMTA0IDExLjMzMyAxMS4zMTUgMTEuMzYgNi4yNzQuMDIgMTEuNDI2LTUuMTEyIDExLjQyMi0xMS4zOHptMTAuMjc4IDQuNDAzYy0zLjE0IDEuMTg4LTQuNDc0IDQuMzgyLTMuMDg4IDcuNDMuNDQuOTY3Ljk1NCAxLjkxIDEuMzQyIDIuOTAzLjExMy4zLjAyLjg1LS4yIDEuMDg1LTEuMjU2IDEuMzQtMi41NSAyLjYzNy0zLjg5IDMuODktLjIzNC4yMi0uNzg0LjMxMy0xLjA4NC4xOTYtLjk5NC0uMzgyLTEuOTM2LS45LTIuOTA0LTEuMzQtMy4wMzYtMS4zODUtNi4yNC0uMDUtNy40MyAzLjA5LS40NTcgMS4yMTYtLjkgMS44Ni0xLjM1MiAzLjA4aC02LjgxNmMtLjQ1LTEuMjItLjktMS44NjQtMS4zNTMtMy4wOC0xLjE4NC0zLjE0LTQuMzg1LTQuNDc1LTcuNDI4LTMuMDktLjk2OC40NC0xLjkxLjk1NS0yLjkwNCAxLjM0LS4zLjExNy0uODUuMDI1LTEuMDg1LS4xOTUtMS4zNC0xLjI1My0yLjYtMi41OS0zLjkyNC0zLjg2My0uNDMtLjQwNy0uNDA4LS43NDUtLjE2Mi0xLjIyLjQ5LS45NDcuOTUtMS45MTIgMS4zOC0yLjg4NyAxLjMyLTIuOTU1LS4wMTYtNi4xNDItMy4wMzctNy4zLTEuMjQyLS40NzctMi40OTYtLjkyOC0zLjc0Ny0xLjM5di02LjgxNmMxLjIyLS40NSAyLjQ0LS45IDMuNjU2LTEuMzUzIDMuMTM4LTEuMTggNC40NzItNC4zOCAzLjA4Ni03LjQyOC0uNDQtLjk2OC0uOTUzLTEuOTEtMS4zNDItMi45MDQtLjExMy0uMy0uMDIyLS44NS4xOTgtMS4wODUgMS4yNTgtMS4zNCAyLjU1Mi0yLjYzNyAzLjg5LTMuODkuMjM1LS4yMi43ODUtLjMxMiAxLjA4Ni0uMTk1Ljk5NC4zOCAxLjkzNi44OTggMi45MDQgMS4zMzggMy4wNDMgMS4zODMgNi4yNDguMDQ4IDcuNDMtMy4wODcuNDUzLTEuMjE4LjktMS44MTMgMS4zNTItMy4wMjdoNi44MTZjLjQ1IDEuMjE0Ljg5OCAxLjgxMiAxLjM1MyAzLjAyNiAxLjE4NCAzLjEzOCA0LjM4NSA0LjQ3MiA3LjQzIDMuMDg2Ljk2Ny0uNDQgMS45MS0uOTU3IDIuOTAzLTEuMzM4LjMtLjExNy44NS0uMDI2IDEuMDg1LjE5NCAxLjM0IDEuMjU0IDIuNiAyLjU5MyAzLjkyNCAzLjg2NS40My40MDcuNDA3Ljc0NC4xNjIgMS4yMi0uNDkyLjk0Ny0uOTUgMS45MS0xLjM4IDIuODktMS4zMiAyLjk1Mi4wMTYgNi4xNDYgMy4wMzcgNy4yOTcgMS4yNDcuNDc3IDIuNDk3LjkyOCAzLjc0NCAxLjM5djYuODE2Yy0xLjIxOC40NS0yLjQzNS44OTgtMy42NTIgMS4zNTN6IiBzdHJva2U9IiNGRkYiIHN0cm9rZS13aWR0aD0iLjIiLz48L2c+PC9zdmc+\");background-size:100%;left:0;opacity:.8;}.yvp-bottom-bar .yvp-bottom-container .yvp-menu-controls .yvp-setting-btn.hide{display:none}.yvp-bottom-bar .yvp-bottom-container .yvp-menu-controls .yvp-setting-btn:hover{opacity:1}.yvp-bottom-bar .yvp-bottom-container .yvp-menu-controls .yvp-setting-pointer{position:relative;display:none;width:1px;border:solid;border-color:rgba(38,40,42,0.95) transparent;border-width:6px 5px 0;top:-6px;bottom:0;left:6px;content:'';}.yvp-bottom-bar .yvp-bottom-container .yvp-menu-controls .yvp-setting-pointer.open{display:block}.yvp-bottom-bar .yvp-bottom-container .yvp-menu-controls .yvp-setting-pointer.hide{display:none}.yvp-bottom-bar .yvp-bottom-container .yvp-menu-controls .yvp-cc-btn{background-image:url(\"data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiIHN0YW5kYWxvbmU9Im5vIj8+Cjxzdmcgd2lkdGg9IjI0cHgiIGhlaWdodD0iMjRweCIgdmlld0JveD0iMCAwIDI0IDI0IiB2ZXJzaW9uPSIxLjEiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgeG1sbnM6eGxpbms9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmsiPgogICAgPCEtLSBHZW5lcmF0b3I6IFNrZXRjaCAzLjguMyAoMjk4MDIpIC0gaHR0cDovL3d3dy5ib2hlbWlhbmNvZGluZy5jb20vc2tldGNoIC0tPgogICAgPHRpdGxlPmNjLW9mZjwvdGl0bGU+CiAgICA8ZGVzYz5DcmVhdGVkIHdpdGggU2tldGNoLjwvZGVzYz4KICAgIDxkZWZzPjwvZGVmcz4KICAgIDxnIGlkPSJkZXNrdG9wIiBzdHJva2U9Im5vbmUiIHN0cm9rZS13aWR0aD0iMSIgZmlsbD0ibm9uZSIgZmlsbC1ydWxlPSJldmVub2RkIj4KICAgICAgICA8ZyBpZD0iY2Mtb2ZmIiBmaWxsPSIjRkZGRkZGIj4KICAgICAgICAgICAgPHBhdGggZD0iTTExLjI0NTI5MjcsMTMuMjY3OTEyMiBDMTEuMDAwNzE0NCwxMy4wMjc0OTE3IDEwLjYxMDU2NTQsMTIuOTUzMjkzOCAxMC4zMjI4NTUsMTMuMTQxNjc5NCBDMTAuMTAyMjkzNCwxMy4yODY3MDI2IDkuODM3MTI5MzUsMTMuMzcxNTAwMiA5LjU1MTg2OTY2LDEzLjM3MTUwMDIgQzguNzgxMzc0NDMsMTMuMzcxNTAwMiA4LjE1Njk0LDEyLjc1NzE5OTMgOC4xNTY5NCwxMS45OTk4MDIzIEM4LjE1Njk0LDExLjI0MjQwNTQgOC43ODEzNzQ0MywxMC42Mjg1ODYyIDkuNTUxODY5NjYsMTAuNjI4NTg2MiBDOS43Nzk3ODMzMywxMC42Mjg1ODYyIDkuOTkzOTczMTYsMTAuNjgyNTQ4NCAxMC4xODMxNjYsMTAuNzc4NDI3NSBDMTAuNTQwOTY2LDEwLjk1OTU4NiAxMC45NzIyODY0LDEwLjkwMzIxNDkgMTEuMjU5NTA2NywxMC42MjYxNzcyIEMxMS42MTI4OTU0LDEwLjI4NDU3NzcgMTEuNTUzMDk4Nyw5LjcwMTU5NDA1IDExLjEzMjU2MTIsOS40NDM4Mjg1NSBDMTAuNTE1NDc4OCw5LjA2NjA5MzY5IDkuNzUxODQ1NTIsOC45MDEzMTY0OSA4LjkzNTI3NzQyLDkuMDYwMzEyMDMgQzcuNzQ2Njk1NCw5LjI5MTU3ODI4IDYuNzgwNjM1NTMsMTAuMjQ1NTUxNSA2LjU1NjE1MjgyLDExLjQxNTM3MzMgQzYuMTg5MDQwMjcsMTMuMzI5MTAxNCA3LjY3MTcwNDQ1LDE1IDkuNTUxODY5NjYsMTUgQzEwLjEyNTMyOTksMTUgMTAuNjU3NjE4NSwxNC44NDE5NjgxIDExLjExMjQ2NTYsMTQuNTY4Nzg0OCBDMTEuNTc0NjY0NywxNC4yOTA3ODM1IDExLjYyOTA2OTksMTMuNjQ0NjgzNSAxMS4yNDUyOTI3LDEzLjI2NzkxMjIiIGlkPSJGaWxsLTEiPjwvcGF0aD4KICAgICAgICAgICAgPHBhdGggZD0iTTE3LjI0NTQ4NCwxMy4yNjc5MTIyIEMxNy4wMDA4OTU5LDEzLjAyNzQ5MTcgMTYuNjEwNzMxMSwxMi45NTMyOTM4IDE2LjMyMzAwOTIsMTMuMTQxNjc5NCBDMTYuMTAyNDM4NywxMy4yODY3MDI2IDE1LjgzNzI2MzksMTMuMzcxNTAwMiAxNS41NTE5OTI3LDEzLjM3MTUwMDIgQzE0Ljc4MTQ2NjQsMTMuMzcxNTAwMiAxNC4xNTcwMDY4LDEyLjc1NzE5OTMgMTQuMTU3MDA2OCwxMS45OTk4MDIzIEMxNC4xNTcwMDY4LDExLjI0MjQwNTQgMTQuNzgxNDY2NCwxMC42Mjg1ODYyIDE1LjU1MTk5MjcsMTAuNjI4NTg2MiBDMTUuNzc5OTE1NiwxMC42Mjg1ODYyIDE1Ljk5NDExNCwxMC42ODI1NDg0IDE2LjE4MzMxNDUsMTAuNzc4NDI3NSBDMTYuNTQxMTI4OSwxMC45NTk1ODYgMTYuOTcyNDY2OCwxMC45MDMyMTQ5IDE3LjI1OTIwODQsMTAuNjI2MTc3MiBDMTcuNjEzMTAxNiwxMC4yODQ1Nzc3IDE3LjU1MzMwMjQsOS43MDE1OTQwNSAxNy4xMzI3NDgsOS40NDM4Mjg1NSBDMTYuNTE1NjQwNyw5LjA2NjA5MzY5IDE1Ljc1MTk3NjYsOC45MDEzMTY0OSAxNC45MzQ4ODU1LDkuMDYwMzEyMDMgQzEzLjc0Njc0NTcsOS4yOTE1NzgyOCAxMi43ODA2NDY4LDEwLjI0NTU1MTUgMTIuNTU2MTU1MSwxMS40MTUzNzMzIEMxMi4xODkwMjc3LDEzLjMyOTEwMTQgMTMuNjcxNzUxNywxNSAxNS41NTE5OTI3LDE1IEMxNi4xMjU0NzYsMTUgMTYuNjU3Nzg2MiwxNC44NDE5NjgxIDE3LjExMjY1MTYsMTQuNTY4Nzg0OCBDMTcuNTc0ODY5MywxNC4yOTA3ODM1IDE3LjYyODc4NjYsMTMuNjQ0NjgzNSAxNy4yNDU0ODQsMTMuMjY3OTEyMiIgaWQ9IkZpbGwtMyI+PC9wYXRoPgogICAgICAgICAgICA8cGF0aCBkPSJNMjEsMTcgTDMsMTcgTDMsNyBMMjEsNyBMMjEsMTcgWiBNMSwxOC4wODE0MjA5IEMxLDE4LjU4ODczODEgMS40MTk4MzQzOCwxOSAxLjkxNzMwMzQxLDE5IEwyMi4wODI2OTY2LDE5IEMyMi41ODkzMDkzLDE5IDIzLDE4LjU5NjEwNTYgMjMsMTguMDgxNDIwOSBMMjMsNS45MTg1NzkxIEMyMyw1LjQxMTI2MTg3IDIyLjU4MDE2NTYsNSAyMi4wODI2OTY2LDUgTDEuOTE3MzAzNDEsNSBDMS40MTA2OTA3Myw1IDEsNS40MDM4OTQ0MiAxLDUuOTE4NTc5MSBMMSwxOC4wODE0MjA5IFoiIGlkPSJGaWxsLTUiPjwvcGF0aD4KICAgICAgICA8L2c+CiAgICA8L2c+Cjwvc3ZnPg==\");background-size:100%;top:0;left:0;opacity:.8;margin-right:4px;}.yvp-bottom-bar .yvp-bottom-container .yvp-menu-controls .yvp-cc-btn.hide{opacity:.35}.yvp-bottom-bar .yvp-bottom-container .yvp-menu-controls .yvp-cc-btn.hide:hover{opacity:.35}.yvp-bottom-bar .yvp-bottom-container .yvp-menu-controls .yvp-cc-btn:hover{opacity:1}.yvp-bottom-bar .yvp-bottom-container .yvp-menu-controls .yvp-cc-btn.on{background-image:url(\"data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiIHN0YW5kYWxvbmU9Im5vIj8+Cjxzdmcgd2lkdGg9IjI0cHgiIGhlaWdodD0iMjRweCIgdmlld0JveD0iMCAwIDI0IDI0IiB2ZXJzaW9uPSIxLjEiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgeG1sbnM6eGxpbms9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmsiPgogICAgPCEtLSBHZW5lcmF0b3I6IFNrZXRjaCAzLjguMyAoMjk4MDIpIC0gaHR0cDovL3d3dy5ib2hlbWlhbmNvZGluZy5jb20vc2tldGNoIC0tPgogICAgPHRpdGxlPmNjLW9uPC90aXRsZT4KICAgIDxkZXNjPkNyZWF0ZWQgd2l0aCBTa2V0Y2guPC9kZXNjPgogICAgPGRlZnM+PC9kZWZzPgogICAgPGcgaWQ9ImRlc2t0b3AiIHN0cm9rZT0ibm9uZSIgc3Ryb2tlLXdpZHRoPSIxIiBmaWxsPSJub25lIiBmaWxsLXJ1bGU9ImV2ZW5vZGQiPgogICAgICAgIDxnIGlkPSJjYy1vbiIgZmlsbD0iI0ZGRkZGRiI+CiAgICAgICAgICAgIDxwYXRoIGQ9Ik0xLDE4LjA4MTQyMDkgQzEsMTguNTg4NzM4MSAxLjQxOTgzNDM4LDE5IDEuOTE3MzAzNDEsMTkgTDIyLjA4MjY5NjYsMTkgQzIyLjU4OTMwOTMsMTkgMjMsMTguNTk2MTA1NiAyMywxOC4wODE0MjA5IEwyMyw1LjkxODU3OTEgQzIzLDUuNDExMjYxODcgMjIuNTgwMTY1Niw1IDIyLjA4MjY5NjYsNSBMMS45MTczMDM0MSw1IEMxLjQxMDY5MDczLDUgMSw1LjQwMzg5NDQyIDEsNS45MTg1NzkxIEwxLDE4LjA4MTQyMDkgWiBNMTEuMjQ1MjkyNywxMy4yNjc5MTIyIEMxMS4wMDA3MTQ0LDEzLjAyNzQ5MTcgMTAuNjEwNTY1NCwxMi45NTMyOTM4IDEwLjMyMjg1NSwxMy4xNDE2Nzk0IEMxMC4xMDIyOTM0LDEzLjI4NjcwMjYgOS44MzcxMjkzNSwxMy4zNzE1MDAyIDkuNTUxODY5NjYsMTMuMzcxNTAwMiBDOC43ODEzNzQ0MywxMy4zNzE1MDAyIDguMTU2OTQsMTIuNzU3MTk5MyA4LjE1Njk0LDExLjk5OTgwMjMgQzguMTU2OTQsMTEuMjQyNDA1NCA4Ljc4MTM3NDQzLDEwLjYyODU4NjIgOS41NTE4Njk2NiwxMC42Mjg1ODYyIEM5Ljc3OTc4MzMzLDEwLjYyODU4NjIgOS45OTM5NzMxNiwxMC42ODI1NDg0IDEwLjE4MzE2NiwxMC43Nzg0Mjc1IEMxMC41NDA5NjYsMTAuOTU5NTg2IDEwLjk3MjI4NjQsMTAuOTAzMjE0OSAxMS4yNTk1MDY3LDEwLjYyNjE3NzIgQzExLjYxMjg5NTQsMTAuMjg0NTc3NyAxMS41NTMwOTg3LDkuNzAxNTk0MDUgMTEuMTMyNTYxMiw5LjQ0MzgyODU1IEMxMC41MTU0Nzg4LDkuMDY2MDkzNjkgOS43NTE4NDU1Miw4LjkwMTMxNjQ5IDguOTM1Mjc3NDIsOS4wNjAzMTIwMyBDNy43NDY2OTU0LDkuMjkxNTc4MjggNi43ODA2MzU1MywxMC4yNDU1NTE1IDYuNTU2MTUyODIsMTEuNDE1MzczMyBDNi4xODkwNDAyNywxMy4zMjkxMDE0IDcuNjcxNzA0NDUsMTUgOS41NTE4Njk2NiwxNSBDMTAuMTI1MzI5OSwxNSAxMC42NTc2MTg1LDE0Ljg0MTk2ODEgMTEuMTEyNDY1NiwxNC41Njg3ODQ4IEMxMS41NzQ2NjQ3LDE0LjI5MDc4MzUgMTEuNjI5MDY5OSwxMy42NDQ2ODM1IDExLjI0NTI5MjcsMTMuMjY3OTEyMiBaIE0xNy4yNDU0ODQsMTMuMjY3OTEyMiBDMTcuMDAwODk1OSwxMy4wMjc0OTE3IDE2LjYxMDczMTEsMTIuOTUzMjkzOCAxNi4zMjMwMDkyLDEzLjE0MTY3OTQgQzE2LjEwMjQzODcsMTMuMjg2NzAyNiAxNS44MzcyNjM5LDEzLjM3MTUwMDIgMTUuNTUxOTkyNywxMy4zNzE1MDAyIEMxNC43ODE0NjY0LDEzLjM3MTUwMDIgMTQuMTU3MDA2OCwxMi43NTcxOTkzIDE0LjE1NzAwNjgsMTEuOTk5ODAyMyBDMTQuMTU3MDA2OCwxMS4yNDI0MDU0IDE0Ljc4MTQ2NjQsMTAuNjI4NTg2MiAxNS41NTE5OTI3LDEwLjYyODU4NjIgQzE1Ljc3OTkxNTYsMTAuNjI4NTg2MiAxNS45OTQxMTQsMTAuNjgyNTQ4NCAxNi4xODMzMTQ1LDEwLjc3ODQyNzUgQzE2LjU0MTEyODksMTAuOTU5NTg2IDE2Ljk3MjQ2NjgsMTAuOTAzMjE0OSAxNy4yNTkyMDg0LDEwLjYyNjE3NzIgQzE3LjYxMzEwMTYsMTAuMjg0NTc3NyAxNy41NTMzMDI0LDkuNzAxNTk0MDUgMTcuMTMyNzQ4LDkuNDQzODI4NTUgQzE2LjUxNTY0MDcsOS4wNjYwOTM2OSAxNS43NTE5NzY2LDguOTAxMzE2NDkgMTQuOTM0ODg1NSw5LjA2MDMxMjAzIEMxMy43NDY3NDU3LDkuMjkxNTc4MjggMTIuNzgwNjQ2OCwxMC4yNDU1NTE1IDEyLjU1NjE1NTEsMTEuNDE1MzczMyBDMTIuMTg5MDI3NywxMy4zMjkxMDE0IDEzLjY3MTc1MTcsMTUgMTUuNTUxOTkyNywxNSBDMTYuMTI1NDc2LDE1IDE2LjY1Nzc4NjIsMTQuODQxOTY4MSAxNy4xMTI2NTE2LDE0LjU2ODc4NDggQzE3LjU3NDg2OTMsMTQuMjkwNzgzNSAxNy42Mjg3ODY2LDEzLjY0NDY4MzUgMTcuMjQ1NDg0LDEzLjI2NzkxMjIgWiIgaWQ9IkNvbWJpbmVkLVNoYXBlIj48L3BhdGg+CiAgICAgICAgPC9nPgogICAgPC9nPgo8L3N2Zz4=\");opacity:1}.yvp-bottom-bar .yvp-bottom-container .yvp-menu-controls .yvp-cc-btn.on.hide{opacity:.35}.yvp-bottom-bar .yvp-bottom-container .yvp-menu-controls .yvp-cc-btn.on.hide:hover{opacity:.35}.yvp-bottom-bar .yvp-volume-bar-container{display:block;position:relative;bottom:95px;left:-1px;width:24px;height:72px;padding:7px 0;background:rgba(18,23,23,0.8);border-radius:4px;z-index:1;visibility:hidden;-webkit-animation-name:none;animation-name:none;-webkit-animation-duration:0s;-moz-animation-duration:0s;animation-duration:0s;}.yvp-bottom-bar .yvp-volume-bar-container:after{display:block;border:solid;border-color:rgba(18,23,23,0.8) transparent;border-width:6px 5px 0;position:absolute;top:100%;bottom:0;left:7px;content:''}.yvp-bottom-bar .yvp-volume-bar-container.open{visibility:visible}.yvp-bottom-bar .yvp-volume-bar-container .yvp-volume-level,.yvp-bottom-bar .yvp-volume-bar-container .yvp-volume-bar{margin-top:0;height:100%}.yvp-bottom-bar .yvp-volume-bar-container .yvp-volume-bar{background:rgba(255,255,255,0.1);border-radius:2px}.yvp-bottom-bar .yvp-volume-bar-container .yvp-volume-level{background:rgba(255,255,255,0.4);width:4px;margin-left:10px;margin-top:0;border-radius:2px}.yvp-bottom-bar .yvp-volume-bar-container .yvp-volume-handle{position:relative;width:12px;height:12px;background:#fff;border:0;border-radius:50%;margin-left:-4px;z-index:2;opacity:0;}.yvp-bottom-bar .yvp-volume-bar-container .yvp-volume-handle.show{opacity:1}.yvp-bottom-bar .yvp-volume-bar-container .yvp-volume-value{background:rgba(255,255,255,0.8);border:0;border-radius:2px}.yvp-main .yvp-tooltip{display:inline-block;position:absolute;}.yvp-main .yvp-tooltip:hover{text-decoration:none;}.yvp-main .yvp-tooltip:hover .yvp-tooltip-wrapper .yvp-tooltip-content{display:table}.yvp-main .yvp-tooltip .yvp-tooltip-wrapper{bottom:34px;margin:auto;position:absolute;display:block;z-index:5;text-align:center;left:-1000px;right:-1000px;}.yvp-main .yvp-tooltip .yvp-tooltip-wrapper .yvp-tooltip-content{display:none;background:rgba(25,26,27,0.8);color:#fff;font-size:11px;margin:auto;padding:5px 11px;white-space:nowrap;text-align:center;pointer-events:none;border-radius:3px;}.yvp-main .yvp-tooltip .yvp-tooltip-wrapper .yvp-tooltip-content:before{border:solid;border-color:rgba(38,40,42,0.95) transparent;border-width:5px 3px 0;bottom:-5px;content:'';display:block;left:50%;margin-left:-3px;position:absolute;z-index:5}.yvp-main .yvp-tooltip .yvp-tooltip-wrapper.yvp-tooltip-pos-bottom{top:30px;bottom:0;}.yvp-main .yvp-tooltip .yvp-tooltip-wrapper.yvp-tooltip-pos-bottom .yvp-tooltip-content:before{border-width:0 3px 5px;top:-5px;bottom:0}.yvp-main .yvp-tooltip.yvp-tooltip-hidden .yvp-tooltip-wrapper{display:none}.yvp-main .yvp-tooltip.yvp-fullscreen-btn .yvp-tooltip-wrapper{margin-right:60px;}.yvp-main .yvp-tooltip.yvp-fullscreen-btn .yvp-tooltip-wrapper .yvp-tooltip-content:before{margin-left:25px}.yvp-mode-ad .yvp-top-bar .yvp-ad-count-container,.yvp-mode-vpaid .yvp-top-bar .yvp-ad-count-container{display:block}.yvp-state-video .yvp-top-bar{display:block}.yvp-state-start-screen .yvp-top-bar,.yvp-state-error .yvp-top-bar,.yvp-state-end-screen .yvp-top-bar,.yvp-state-loading .yvp-top-bar{display:none}.yvp-mode-ad .yvp-top-bar .yvp-provider-logo,.yvp-mode-vpaid .yvp-top-bar .yvp-provider-logo{display:none}.yvp-mode-ad .yvp-playing-item-title.yvp-title-standard,.yvp-mode-vpaid .yvp-playing-item-title.yvp-title-standard{opacity:0;z-index:0}.yvp-settings-on .yvp-bottom-bar .yvp-upnext-playlist{display:none}.yvp-settings-on .yvp-bottom-bar .yvp-volume-bar-container{visibility:hidden}.yvp-content .yvp-main .yvp-mute-indicator{position:relative;opacity:0;visibility:hidden;background-image:url(\"data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iODgiIGhlaWdodD0iODgiIHZpZXdCb3g9IjAgMCA4OCA4OCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48dGl0bGU+dm9sdW1lLW11dGUtc2hhZG93PC90aXRsZT48ZGVmcz48ZmlsdGVyIHg9Ii01MCUiIHk9Ii01MCUiIHdpZHRoPSIyMDAlIiBoZWlnaHQ9IjIwMCUiIGZpbHRlclVuaXRzPSJvYmplY3RCb3VuZGluZ0JveCIgaWQ9ImEiPjxmZU9mZnNldCBkeT0iMiIgaW49IlNvdXJjZUFscGhhIiByZXN1bHQ9InNoYWRvd09mZnNldE91dGVyMSIvPjxmZUdhdXNzaWFuQmx1ciBzdGREZXZpYXRpb249IjEuNSIgaW49InNoYWRvd09mZnNldE91dGVyMSIgcmVzdWx0PSJzaGFkb3dCbHVyT3V0ZXIxIi8+PGZlQ29sb3JNYXRyaXggdmFsdWVzPSIwIDAgMCAwIDAgMCAwIDAgMCAwIDAgMCAwIDAgMCAwIDAgMCAwLjcgMCIgaW49InNoYWRvd0JsdXJPdXRlcjEiIHJlc3VsdD0ic2hhZG93TWF0cml4T3V0ZXIxIi8+PGZlTWVyZ2U+PGZlTWVyZ2VOb2RlIGluPSJzaGFkb3dNYXRyaXhPdXRlcjEiLz48ZmVNZXJnZU5vZGUgaW49IlNvdXJjZUdyYXBoaWMiLz48L2ZlTWVyZ2U+PC9maWx0ZXI+PGZpbHRlciB4PSItNTAlIiB5PSItNTAlIiB3aWR0aD0iMjAwJSIgaGVpZ2h0PSIyMDAlIiBmaWx0ZXJVbml0cz0ib2JqZWN0Qm91bmRpbmdCb3giIGlkPSJiIj48ZmVPZmZzZXQgZHk9IjIiIGluPSJTb3VyY2VBbHBoYSIgcmVzdWx0PSJzaGFkb3dPZmZzZXRPdXRlcjEiLz48ZmVHYXVzc2lhbkJsdXIgc3RkRGV2aWF0aW9uPSIxLjUiIGluPSJzaGFkb3dPZmZzZXRPdXRlcjEiIHJlc3VsdD0ic2hhZG93Qmx1ck91dGVyMSIvPjxmZUNvbG9yTWF0cml4IHZhbHVlcz0iMCAwIDAgMCAwIDAgMCAwIDAgMCAwIDAgMCAwIDAgMCAwIDAgMC43IDAiIGluPSJzaGFkb3dCbHVyT3V0ZXIxIiByZXN1bHQ9InNoYWRvd01hdHJpeE91dGVyMSIvPjxmZU1lcmdlPjxmZU1lcmdlTm9kZSBpbj0ic2hhZG93TWF0cml4T3V0ZXIxIi8+PGZlTWVyZ2VOb2RlIGluPSJTb3VyY2VHcmFwaGljIi8+PC9mZU1lcmdlPjwvZmlsdGVyPjwvZGVmcz48ZyBmaWxsPSIjRkZGIiBmaWxsLXJ1bGU9ImV2ZW5vZGQiPjxwYXRoIGQ9Ik0yNS42ODIgNTUuMDE2SDE2LjUzYy0uNDk1IDAtLjk0NC0uMTk0LTEuMjczLS41MTItLjM2My0uMzM0LS41OS0uODE0LS41OS0xLjM0OHYtMTguMjRjMC0uMTcuMDIyLS4zMzIuMDY0LS40ODcuMi0uNzkzLjkyLTEuMzc4IDEuNzc1LTEuMzc4aDkuMTYyVjMzbDE0LjY2Ni0xNC42Njd2NTEuMzM0bC0xNC42NS0xNC42NXoiIGZpbHRlcj0idXJsKCNhKSIvPjxwYXRoIGQ9Ik01OC45MDQgMzkuMDUybC00Ljk2OC00Ljk2OGMtMS40MjgtMS40MjgtMy43NTQtMS40MzItNS4xODYgMC0xLjQzIDEuNDMtMS40MzIgMy43NTMgMCA1LjE4NWw0Ljk2OCA0Ljk2Ny00Ljk2OCA0Ljk2OGMtMS40MjggMS40MjgtMS40MyAzLjc1MyAwIDUuMTg1IDEuNDMgMS40MyAzLjc1NCAxLjQzMiA1LjE4NiAwbDQuOTY4LTQuOTY4IDQuOTY4IDQuOTdjMS40MjcgMS40MjYgMy43NTMgMS40MyA1LjE4NS0uMDAyIDEuNDMtMS40MyAxLjQzMi0zLjc1MyAwLTUuMTg1bC00Ljk2OC00Ljk2OCA0Ljk2Ny00Ljk2OGMxLjQyOC0xLjQzIDEuNDMyLTMuNzU0IDAtNS4xODYtMS40My0xLjQzLTMuNzUzLTEuNDMyLTUuMTg1IDBsLTQuOTY4IDQuOTY4eiIgZmlsdGVyPSJ1cmwoI2IpIi8+PC9nPjwvc3ZnPg==\");background-size:100%;background-color:transparent;z-index:32;width:44px;height:44px;float:right;background-repeat:no-repeat;background-position:50% 50%;border-radius:0;top:75%;right:8px;}.yvp-content .yvp-main .yvp-mute-indicator:hover{cursor:pointer}.yvp-content .yvp-main .yvp-docked-close-button{position:absolute;opacity:0;visibility:hidden;background-image:url(\"data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjQiIGhlaWdodD0iMjQiIHZpZXdCb3g9IjAgMCAyNCAyNCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48dGl0bGU+YnV0dG9uLWNsb3NlPC90aXRsZT48ZGVmcz48ZmlsdGVyIHg9Ii01MCUiIHk9Ii01MCUiIHdpZHRoPSIyMDAlIiBoZWlnaHQ9IjIwMCUiIGZpbHRlclVuaXRzPSJvYmplY3RCb3VuZGluZ0JveCIgaWQ9ImEiPjxmZU9mZnNldCBkeD0iMSIgZHk9IjEiIGluPSJTb3VyY2VBbHBoYSIgcmVzdWx0PSJzaGFkb3dPZmZzZXRPdXRlcjEiLz48ZmVHYXVzc2lhbkJsdXIgc3RkRGV2aWF0aW9uPSIuNSIgaW49InNoYWRvd09mZnNldE91dGVyMSIgcmVzdWx0PSJzaGFkb3dCbHVyT3V0ZXIxIi8+PGZlQ29sb3JNYXRyaXggdmFsdWVzPSIwIDAgMCAwIDAgMCAwIDAgMCAwIDAgMCAwIDAgMCAwIDAgMCAwLjM1IDAiIGluPSJzaGFkb3dCbHVyT3V0ZXIxIiByZXN1bHQ9InNoYWRvd01hdHJpeE91dGVyMSIvPjxmZU1lcmdlPjxmZU1lcmdlTm9kZSBpbj0ic2hhZG93TWF0cml4T3V0ZXIxIi8+PGZlTWVyZ2VOb2RlIGluPSJTb3VyY2VHcmFwaGljIi8+PC9mZU1lcmdlPjwvZmlsdGVyPjwvZGVmcz48cGF0aCBkPSJNMTIuMDI1IDEwLjYxTDYuNzE4IDUuMzAzYy0uMzg1LS4zODQtMS4wMi0uMzg2LTEuNDEuMDA0LS4zOTQuMzkzLS4zOTMgMS4wMjItLjAwNSAxLjQxbDUuMzA3IDUuMzA4LTUuMzA3IDUuMzA3Yy0uMzg0LjM4NC0uMzg2IDEuMDIuMDA0IDEuNDEuMzkzLjM5MyAxLjAyMi4zOTIgMS40MS4wMDRsNS4zMDgtNS4zMDcgNS4zMDcgNS4zMDZjLjM4NC4zODQgMS4wMi4zODcgMS40MS0uMDA0LjM5My0uMzkzLjM5Mi0xLjAyMi4wMDQtMS40MWwtNS4zMDctNS4zMDcgNS4zMDYtNS4zMDdjLjM4NC0uMzg1LjM4Ny0xLjAyLS4wMDQtMS40MS0uMzkzLS4zOTQtMS4wMjItLjM5My0xLjQxLS4wMDVsLTUuMzA3IDUuMzA3eiIgZmlsdGVyPSJ1cmwoI2EpIiBmaWxsPSIjRkZGIiBmaWxsLXJ1bGU9ImV2ZW5vZGQiLz48L3N2Zz4=\");background-size:100%;background-color:transparent;z-index:32;width:24px;height:24px;background-repeat:no-repeat;background-position:50% 50%;border-radius:0;right:-3px;cursor:pointer}.yvp-content.normal .yvp-main .yvp-mute-indicator{width:44px;height:44px;top:85.5%;right:8px;border-radius:0;display:block}.yvp-content.yvp-state-fullscreen .yvp-main .yvp-mute-indicator{width:44px;height:44px;top:85%;right:8px;border-radius:0;display:none}.yvp-content.yvp-state-fullscreen .yvp-main .yvp-docked-close-button{visibility:hidden}.yvp-overlay-hide-cursor{position:absolute;display:block;z-index:30;cursor:none;top:0;right:0;bottom:0;left:0}.yvp-custom-controls{position:absolute;z-index:29;display:none;height:100%;width:100%}#Stencil .channel-applet-wrap.mode-embedtron .yvp-content{z-index:5}html[dir='rtl'] .yvp-settings-caret-icon.right{-webkit-transform:rotate(180deg);-moz-transform:rotate(180deg);-ms-transform:rotate(180deg);-o-transform:rotate(180deg);transform:rotate(180deg);left:0;right:2px}html[dir='rtl'] .yvp-settings-caret-icon.left{-webkit-transform:rotate(180deg);-moz-transform:rotate(180deg);-ms-transform:rotate(180deg);-o-transform:rotate(180deg);transform:rotate(180deg)}html[dir='rtl'] .yvp-cc-feedback-link{float:left}html[dir='rtl'] .yvp-cc-options-more .effects{margin-left:0;margin-right:90px}html[dir='rtl'] .yvp-cc-options-more .bgcolorpicker{margin-left:0;margin-right:65px}html[dir='rtl'] .yvp-cc-options-more .fontcolorpicker{margin-left:0;margin-right:65px}html[dir='rtl'] .yvp-cc-options-more .yvp-cc-style-preview{margin:40px 85px 20px 0}@-moz-keyframes flash-button{0%,100%{background-color:transparent}50%{background-color:#5f32fb}}@-webkit-keyframes flash-button{0%,100%{background-color:transparent}50%{background-color:#5f32fb}}@-o-keyframes flash-button{0%,100%{background-color:transparent}50%{background-color:#5f32fb}}@-ms-keyframes flash-button{0%,100%{background-color:transparent}50%{background-color:#5f32fb}}@keyframes flash-button{0%,100%{background-color:transparent}50%{background-color:#5f32fb}}@-moz-keyframes fadeIn{0%{opacity:0}100%{opacity:1}}@-webkit-keyframes fadeIn{0%{opacity:0}100%{opacity:1}}@-o-keyframes fadeIn{0%{opacity:0}100%{opacity:1}}@-ms-keyframes fadeIn{0%{opacity:0}100%{opacity:1}}@keyframes fadeIn{0%{opacity:0}100%{opacity:1}}"),
r.prototype.create=function(){var e,t=this,n={hideUponClick:!0},r=d.render(_,{strings:s.i18n});t._topBar=r.querySelector(".yvp-top-bar"),t._bottomBar=r.querySelector(".yvp-bottom-bar"),t._titleBar=r.querySelector(".yvp-playing-item-title"),t._customControls=r.querySelector(".yvp-custom-controls"),t._objectOverlay=r.querySelector(".yvp-object-overlay"),t._muteIndicator=r.querySelector(".yvp-mute-indicator"),t._dockedCloseButton=r.querySelector(".yvp-docked-close-button"),t._castOverlay=r.querySelector(".yvp-cast-overlay"),t._slider=t._bottomBar.querySelector(".yvp-slider"),t._timeDisplay=t._bottomBar.querySelector(".yvp-time-container"),t._settingBtn=t._bottomBar.querySelector(".yvp-setting-btn"),t._fullScreenBtn=t._bottomBar.querySelector(".yvp-fullscreen-btn"),t._ccBtn=t._bottomBar.querySelector(".yvp-cc-btn"),t._castBtn=t._bottomBar.querySelector(".yvp-chromecast-btn"),t._menuControls=t._bottomBar.querySelector(".yvp-menu-controls"),t._contentType=t._topBar.querySelector(".yvp-content-type"),e=new p(t._eventBus,t._model),t._settingsNode=e.create(),t._menuControls.parentNode.insertBefore(t._settingsNode,t._menuControls.nextSibling),t._menuLabelTooltip=new u(t._settingBtn,s.i18n.SETTINGS,n),t._sliderTap=new l(t._slider),t._onSliderTap=function(e){e.stopPropagation()},t._slider.addEventListener("tap",t._onSliderTap,t),t._fullScreenTooltip=new u(t._fullScreenBtn,s.i18n.FULLSCREEN_SPACE,n),t._ccTooltip=new u(t._ccBtn,s.i18n.CAPTIONS_AVAILABLE,n);var i=[t._bottomBar,t._topBar,t._titleBar,t._customControls,t._objectOverlay,t._muteIndicator];return a.chrome>=32&&!t._model.disableCasting?(i.push(t._castOverlay),t._castBtnTooltip=new u(t._castBtn,s.i18n.CHROMECAST,n)):(t._castOverlay.parentNode.removeChild(t._castOverlay),t._castOverlay=null,t._castBtn.parentNode.removeChild(t._castBtn),t._castBtn=null),t._bindEvents(),i},r.prototype._bindEvents=function(){var e=this;e._bindMuteIndicator(),e._bindCC(),e._settingBtn&&(e._settingTap=new l(e._settingBtn),e._onSettingTap=function(t){t.stopPropagation(),e._view.toggleSettings(e._settingBtn)},e._settingBtn.addEventListener("tap",e._onSettingTap),e._bottomBarTap=new l(e._bottomBar),e._onBottomBarTap=function(t){t.stopPropagation(),e._hideSettings()},e._bottomBar.addEventListener("tap",e._onBottomBarTap)),e._castBtn&&(e._castBtnTap=new l(e._castBtn),e._onCastBtnTap=function(t){t.stopPropagation();var n="ctrl-cast-"+(e._castBtn.connected?"stop":"start");e._eventBus.publish(o.API.UI_INTERACT,{srcElement:n})},e._castBtn.addEventListener("tap",e._onCastBtnTap),e._castOverlayContent=e._castOverlay.querySelector(".cast-overlay-content"),e._castOverlayTap=new l(e._castOverlayContent),e._onCastOverlayTap=function(t){t.stopPropagation(),e._eventBus.publish(o.API.UI_INTERACT,{srcElement:"ctrl-cast-overlay"})},e._castOverlayContent.addEventListener("tap",e._onCastOverlayTap),e._castDisconnectBtn=e._castOverlay.querySelector(".cast-disconnect-btn"),e._castDisconnectBtnTap=new l(e._castDisconnectBtn),e._onCastDisconnectBtnTap=function(t){t.stopPropagation(),e._eventBus.publish(o.API.UI_INTERACT,{srcElement:"ctrl-cast-disconnect"})},e._castDisconnectBtn.addEventListener("tap",e._onCastDisconnectBtnTap)),e._dockedCloseButton&&(e._dockedCloseButtonTap=new l(e._dockedCloseButton),e._onDockedCloseButtonTap=function(t){t.stopPropagation(),e._view.undockVideoPlayer(!0),e._eventBus.publish(o.API.UI_INTERACT,{srcElement:"ui_pop_close_clk"})},e._dockedCloseButton.addEventListener("tap",e._onDockedCloseButtonTap)),e._handleKeyDown=function(t){var n=function(){t.preventDefault()};e._eventBus.publish(o.KEYDOWN,{keyCode:t.keyCode,shiftDown:t.shiftKey,ctrlDown:t.ctrlKey,altDown:t.altKey,target:t.target,preventDefault:n})},e._view.getContentNode().addEventListener("keydown",e._handleKeyDown,!1)},r.prototype._bindMuteIndicator=function(){var e,t=this;t._muteOnTimeout=function(n){n.stopPropagation(),e||(e=setTimeout(function(){t._eventBus.publish(o.API.UI_INTERACT,{srcElement:"ctrl-mute-btn-off"}),e=null},600))},["mouseenter","touchstart"].forEach(function(e){t._muteIndicator.addEventListener(e,t._muteOnTimeout)}),["mousemove","touchmove"].forEach(function(e){t._muteIndicator.addEventListener(e,t._muteOnTimeout)})},r.prototype._onKeyDown=function(e){var t=this,n=t._model.playbackState.volume,r=t._view.getCurrentTime(),i=t._view.getDuration(),a=.05;switch(e.keyCode){case 13:t._eventBus.publish(o.TOGGLE_PLAY_PAUSE);break;case 27:t._view.updateViewOnEscPress();break;case 32:t._eventBus.publish(o.TOGGLE_PLAY_PAUSE);break;case 37:var s=r-5;t._isLive||t._eventBus.publish(o.CONTROLS_SEEKING,s>=0?s:0);break;case 38:var l=n+a;t._eventBus.publish(o.CONTROLS_SET_VOLUME,l>1?1:l);break;case 39:s=r+5,t._isLive||t._eventBus.publish(o.CONTROLS_SEEKING,i>=s?s:i);break;case 40:var c=n-a;t._eventBus.publish(o.CONTROLS_SET_VOLUME,0>c?0:c);break;case 67:t._eventBus.publish(o.CC.UI_TOGGLE,!d.classList(t._ccBtn).contains(m));break;case 70:t._view.toggleFullscreen();break;case 77:t._eventBus.publish(o.CONTROLS_SET_MUTE,!t._model.playbackState.mute);break;case 191:e.shiftDown&&t._view.toggleSettings()}if(e.keyCode>=48&&e.keyCode<=57){var p=(e.keyCode-48)/10;i>0&&t._eventBus.publish(o.CONTROLS_SEEKING,i*p)}},r.prototype._syncMatureIndicator=function(){var e=this;e._isMature&&(e._contentType.innerHTML=s.i18n.MATURE,e._contentType.setAttribute("aria-label",s.i18n.MATURE),d.classList(e._contentType).remove("hide"))},r.prototype._onMediaItemLoaded=function(e){var t=this,n=t._getCCButtonState();t._isLive=e.isLive(),t._liveState=e.liveState,t._isMature=e&&e.ageGate&&"none"!==e.ageGate,t._contentType.innerHTML="",t._contentType.setAttribute("aria-label",""),d.classList(t._contentType).add("hide"),t._isLive?t._setLiveMode():t._setVodMode(),t._setCCButtonsState(n)},r.prototype._bindCC=function(){var e=this;e._onCCButtonTap=function(t){if(t.stopPropagation(),e._ccAvailable){var n=d.classList(e._ccBtn).contains(m),r=!n,i=!(!e._model.castState||!e._model.castState.connected),a="cc-"+(r?"on":"off")+(i?"-cast":"");e._eventBus.publish(o.API.UI_INTERACT,{srcElement:a}),e._eventBus.publish(o.CC.UI_TOGGLE,r),e._setCCButtonsState(r)}},e._ccBtnTap=new l(e._ccBtn),e._ccBtn.addEventListener("tap",e._onCCButtonTap,e)},r.prototype._unBindCC=function(){var e=this;e._ccBtnTap&&e._ccBtn&&(e._ccBtnTap.destroy(),e._ccBtn.removeEventListener("tap",e._onCCButtonTap,e))},r.prototype._checkCCAvailability=function(){var e=this;e._ccAvailable=!1},r.prototype._toggleCCFromSettings=function(e){var t=this;t._setCCButtonsState(e)},r.prototype._setCCButtonsState=function(e){var t=this;e?(d.classList(t._ccBtn).add(m),t._updateCCTooltip(s.i18n.CAPTIONS_ON)):(d.classList(t._ccBtn).remove(m),t._updateCCTooltip(s.i18n.CAPTIONS_OFF)),t._ccAvailable||t._updateCCTooltip(s.i18n.CAPTIONS_NOT_AVAILABLE)},r.prototype._setCCUIAvailability=function(e){var t=this;t._ccAvailable=e,e?(d.classList(t._ccBtn).remove("hide"),t._updateCCTooltip(s.i18n.CAPTIONS_AVAILABLE)):(d.classList(t._ccBtn).add("hide"),t._updateCCTooltip(s.i18n.CAPTIONS_NOT_AVAILABLE))},r.prototype._getCCButtonState=function(){var e=this;return e._model.userPreferences&&e._model.userPreferences.closedCaptions&&e._model.userPreferences.closedCaptions.show},r.prototype._updateCCTooltip=function(e){var t=this,n=t._ccBtn.querySelector(".yvp-tooltip-content");n.innerHTML=e},r.prototype._setChromecastBtnVisibility=function(e){var t=this;t._castBtn.style.display=e?"":"none"},r.prototype._onCastConnectionChange=function(e,t){var n=this,r=n._castOverlay&&n._castOverlay.querySelector(".cast-device-name");if(r&&e){var i=t.receiverName;r.innerHTML=d.strSubstitute(s.i18n.CAST_PLAYING_RECEIVER,{"device-name":i})}n._castBtn&&(n._castBtn.connected=e,n._castBtn.setAttribute("data-connected",e),n._castBtnTooltip.setText(e?s.i18n.DISCONNECT:s.i18n.CHROMECAST))},r.prototype._onAdPlaying=function(){var e=this;e._setAdMode()},r.prototype._onVideoPlaying=function(){var e=this;e._isLive?e._setLiveMode():e._setVodMode()},r.prototype._onCastMediaLoaded=function(e,t){var n=this;if(n._castOverlay){var r=t?t.thumbnail:"";n._castOverlay.style.backgroundImage="url("+r+")"}},r.prototype._onCastCCAvailabilityChanged=function(e){var t=this;t._setCCUIAvailability(e)},r.prototype._updateAdBreaks=function(e){var t=this;if(t._adBreaks=e,t._duration){for(var n=t._slider.querySelectorAll(".yvp-ad-break"),r=0;r<n.length;r++)t._slider.removeChild(n[r]);e&&e.forEach(function(e){var n=document.createElement("div");d.classList(n).add("yvp-ad-break"),e.occurred&&d.classList(n).add("occurred"),n.style.left=e.time/t._duration*100+"%",t._slider.appendChild(n)})}},r.prototype._onPlaybackProgress=function(e,t,n,r){var i=this;c.isNumber(n)&&i._duration!==n&&(i._duration=n,i._updateAdBreaks(i._adBreaks))},r.prototype._onAdPlaybackProgress=function(e,t,n,r){var i=this;if(c.isNumber(t)&&c.isNumber(n)&&i._countdownTimeIndicator){var a=Math.round(n-t);if(a>0){var o=a>1?s.i18n.NUM_SECONDS:s.i18n.NUM_SECOND;i._countdownTimeIndicator.innerHTML=d.strSubstitute(o,{"num-seconds":a})}else i._countdownTimeIndicator.innerHTML=""}},r.prototype._updateAdCount=function(e,t){var n=this,r=n._model.YVAP,i=r&&r.standaloneAd&&(r.standaloneAd.xml||r.standaloneAd.gemini);(!i||"undefined"!=typeof r.standaloneAd.showAdSlug&&r.standaloneAd.showAdSlug)&&(n._countIndicatorContainer||(n._countIndicatorContainer=document.createElement("div"),d.classList(n._countIndicatorContainer).add("yvp-ad-count-container"),n._topBar.appendChild(n._countIndicatorContainer)),n._countIndicator||(n._countIndicator=document.createElement("div"),d.classList(n._countIndicator).add("yvp-ad-count"),n._countIndicatorContainer.appendChild(n._countIndicator)),n._countdownTimeIndicator||(n._countdownTimeIndicator=document.createElement("div"),d.classList(n._countdownTimeIndicator).add("yvp-ad-countdowntimer"),n._countIndicatorContainer.appendChild(n._countdownTimeIndicator)),n._countIndicator.innerHTML=s.i18n.ADV_SHORT,!c.isNullOrUndefined(e)&&!c.isNullOrUndefined(t)&&t>1&&(n._countIndicator.innerHTML+=" "+e+" of "+t),d.classList(n._contentType).add("hide"))},r.prototype._onPlaybackStarted=function(){var e=this;e._bindProviderLogo()},r.prototype._setAdMode=function(){var e=this;d.classList(e._slider).add("yvp-disable"),d.classList(e._contentType).add("hide"),d.classList(e._timeDisplay).add("yvp-hide")},r.prototype._setLiveMode=function(){var e=this;d.classList(e._slider).add("yvp-disable"),d.classList(e._timeDisplay).add("yvp-hide");var t=e._model.ui.contentTypeLabel;c.isString(t)&&""!==t?(e._contentType.innerHTML=t,e._contentType.setAttribute("aria-label",t),d.classList(e._contentType).remove("hide")):e._liveState&&"live"===e._liveState&&(e._contentType.innerHTML=s.i18n.LIVE,e._contentType.setAttribute("aria-label",s.i18n.LIVE),d.classList(e._contentType).remove("hide"))},r.prototype._setVodMode=function(){var e=this;d.classList(e._slider).remove("yvp-disable"),d.classList(e._timeDisplay).remove("yvp-hide"),e._syncMatureIndicator()},r.prototype._bindProviderLogo=function(){var e=this,t=e._topBar.querySelector(".yvp-provider-logo"),n=e._model.playlist.getCurrentItem(),r=n.provider.providerLogoUrl,i=n.shareUrl;r?(d.classList(t).remove("yvp-hide"),t.style.backgroundImage="url("+r+")",t.setAttribute("href",i)):d.classList(t).add("yvp-hide")},r.prototype._onControlsBarChange=function(e,t){var n=this,r=n._settingsNode&&d.classList(n._settingsNode).contains("open"),i=r&&n._bottomBar.querySelector(".yvp-settings-container:hover");t&&r&&e===!1&&!i&&n.resetSettings();var a=!(!n._bottomBar.querySelector(":hover")&&n._bottomBar.parentNode.querySelector(":hover")!==n._bottomBar);if(t&&n._ccAvailable&&!a){var s=n._view.getFullscreen();s||n._eventBus.publish(o.CC.POSITION_FLOAT,e)}},r.prototype._onVideoClick=function(){var e=this;e._hideSettings()},r.prototype._hideSettings=function(){var e=this,t=d.classList(e._view.getContentNode()).contains("yvp-settings-on");t&&e.resetSettings()},r.prototype.resetSettings=function(){var e=this,t=e._settingsNode.querySelector(".yvp-main-settings"),n=e._settingsNode.querySelector(".yvp-cc-options-main"),r=e._settingsNode.querySelector(".yvp-cc-options-more");e._view.toggleSettings(e._settingBtn,!1),d.classList(t).add("open"),d.classList(t).remove("close"),d.classList(n).add("close"),d.classList(n).remove("open"),d.classList(r).add("close"),d.classList(r).remove("open")},r.prototype._unBindMuteIndicator=function(){var e=this;["mouseenter","touchstart"].forEach(function(t){e._muteIndicator.removeEventListener(t,e._muteOnTimeout)}),["mousemove","touchmove"].forEach(function(t){e._muteIndicator.removeEventListener(t,e._muteOnTimeout)})},r.prototype.syncAriaState=function(){},r.prototype.destroy=function(){var e=this;e._view.getContentNode().removeEventListener("keydown",e._handleKeyDown,!1),e._sliderTap&&e._slider&&(e._sliderTap.destroy(),e._slider.removeEventListener("tap",e._onSliderTap)),e._settingTap&&e._settingBtn&&(e._settingTap.destroy(),e._settingBtn.removeEventListener("tap",e._onSettingTap),e._menuLabelTooltip.destroy()),e._castBtnTap&&e._castBtn&&(e._castBtnTap.destroy(),e._castBtn.removeEventListener("tap",e._onCastBtnTap),e._castBtnTooltip&&(e._castBtnTooltip.destroy(),e._castBtnTooltip=null)),e._castOverlay&&(e._castOverlayTap&&(e._castOverlayTap.destroy(),e._castOverlayContent.removeEventListener("tap",e._onCastOverlayTap)),e._castDisconnectBtnTap&&(e._castDisconnectBtnTap.destroy(),e._castDisconnectBtn.removeEventListener("tap",e._onCastDisconnectBtnTap))),e._bottomBarTap&&e._bottomBar&&(e._bottomBarTap.destroy(),e._bottomBar.removeEventListener("tap",e._onBottomBarTap)),e._unBindCC(),e._fullScreenTooltip.destroy(),e._ccTooltip.destroy(),e._unBindMuteIndicator(),e.node=null}},{"../../../lib":"bRhrlU","../../../lib/user-agent":"ty5FFo","../cc":"zKzgQw","../error":20,"../event":"YJm+dH","../stream":"Af6MnA","../strings":"XwKsC9","../tap":"dsc79Q","../util":"jJTEqU","../views/uiwidgets/tooltip":96,"./settings":90,"./yahoo-controls.html":97,fs:155,"insert-css":157}],99:[function(e,t,n){"use strict";function r(e,t){var n=this;n._eventBus=e,n._eventBus.subscribe(a.MEDIA_ITEM_LOADED,n._onMediaItemLoaded,n),n._eventBus.subscribe(a.PLAYBACK_PROGRESS,n._onPlaybackProgress,n),n._eventBus.subscribe(a.PLAYBACK_RESUMED,n._onPlaybackResumed,n),n._model=t;var r=t.ui.vttIndex;r>=1&&s>=r&&(l=r),n._vttPlaylistURL="",n._language="",n._vttList=[],n._resumed=!1,n._endReached=!1}t.exports=r;var i=e("xhr"),a=e("./event"),o=(e("../../lib/logger"),2),s=10,l=3;r.prototype._onMediaItemLoaded=function(e){var t=this;if(e.isLive()&&e&&e.streams&&e.streams[0]&&e.streams[0].url){var n=e.streams[0].url;t._urlPrefix=n.substring(0,n.lastIndexOf("/"));var r={url:n};i(r,function(e,n,r){if(!e){var i="#EXTM3U";if(-1!==r.indexOf(i)){for(var o,s=/#*BANDWIDTH=([0-9]+)/g,l=[];null!==(o=s.exec(r));)l.push(o[1]);l&&t._eventBus.publish(a.CTV.GET_BITRATE_FOR_OPSS,l);var d=r.match(/TYPE=SUBTITLES.+URI=['|"](.+?)['|"]/);if(d){var c=d[0].match(/LANGUAGE=['|"](.+?)['|"]/);if(!c)return;t._language=c[1],t._vttPlaylistURL=t._completeURL(d[1]),0===t._vttPlaylistURL.indexOf("http")&&(t._urlPrefix=t._vttPlaylistURL.substring(0,t._vttPlaylistURL.lastIndexOf("/")))}}}})}},r.prototype._onPlaybackProgress=function(e,t){var n=this;if(!n._endReached&&n._vttPlaylistURL)return n._lastTime||0===n._lastTime?n._resumed?(n._resumed=!1,n._lastTime=t,n._vttList=[],void n._updateVttList()):void(t-n._lastTime>=o&&(n._lastTime+=o,n._updateVttList())):(n._lastTime=t,void n._updateVttList())},r.prototype._onPlaybackResumed=function(){var e=this;e._resumed=!0},r.prototype._updateVttList=function(){var e=this;if(e._vttPlaylistURL){var t={url:e._vttPlaylistURL};i(t,function(t,n,r){if(!t){var i=r.match(/#EXT-X-MEDIA-SEQUENCE:(.+)/);if(i)var a=Number(i[1]);if(0===e._vttList.length)e._addVttDataToList(r,a);else{var o=r.lastIndexOf("#EXTINF:"),s=r.match(/#EXTINF:/g).length,l=r.substring(o);e._addVttDataToList(l,a+s-1)}e._endReached=r.indexOf("#EXT-X-ENDLIST")>-1}})}},r.prototype._addVttDataToList=function(e,t){for(var n=this,r=/\r\n|\r|\n/,i=e.split(r),a="",o=0,l=0;l<i.length;l++){var d=i[l].match(/#EXT-X-PROGRAM-DATE-TIME:(.+)/);if(d)a=d[1];else{var c=i[l].match(/#EXTINF:(.+),/);if(c)o=c[1];else if(i[l]&&"#"!==i[l].charAt(0)){var p=n._vttList[n._vttList.length-1];if(p&&i[l]===p.url)return;var u={};u.url=i[l],u.seqNum=t++,a&&(u.dateTime=a),o&&(u.duration=o),n._language&&(u.language=n._language),n._vttList.push(u),n._vttList.length>s&&n._vttList.shift(),n._sendVttEvent()}}}},r.prototype._sendVttEvent=function(){var e=this,t=e._vttList[e._vttList.length-l];if(t){var n={url:e._completeURL(t.url)};i(n,function(n,r,i){if(!n){var o={};o.mpegTSTime=0,o.localCueTime=0,o.clockReference=0,o.data=i,e._eventBus.publish(a.VTT_SEGMENT_LOADED,o,!0,l,e._completeURL(t.url))}})}},r.prototype._completeURL=function(e){var t=this;return 0===e.indexOf("http")?e:"/"===e.charAt(0)?t._urlPrefix+e:t._urlPrefix+"/"+e}},{"../../lib/logger":"IS9j5T","./event":"YJm+dH",xhr:215}],100:[function(e,t,n){"use strict";function r(e,t,n,a,o,s,l){var d=this;d.playbackId=e,d.pos=r.AD_ORDER[t]||"",d.position=t||"",d.adId=s||"",d.streams=n||[],d.clickUrl=a||"http://screen.yahoo.com/",d.type=o||r.ADTYPES.NO_AD,d.duration=l||i.DEFAULT_AD_DURATION}t.exports=r;var i=e("./common/Constants");r.AD_ORDER={bumper:"start1",preroll:"start0",postroll:"end",midroll:"immediate"},r.POSITION={bumper:"start0",preroll:"start1",postroll:"end",midroll:"immediate"},r.ADTYPES={NORMAL:i.AD,NO_AD:i.NOAD,VPAID:i.VPAID}},{"./common/Constants":108}],101:[function(e,t,n){"use strict";function r(){var e=this;e.priorityList=[],e.communicatorAllocation={},e.settingMap=null,e.communicatorIdNameMap={},e.algoId=null,e.propertyId="",e.disableFallback=!1}t.exports=r;var i=e("./CommunicatorSpec");r.prototype._canService=function(e,t){for(var n=t&&t.length,r=0;r<t.length;r++)n=n&&e.indexOf(t[r])>-1;return n},r.prototype.pickCommunicator=function(e){var t,n,r=this,a=0,o=null,s=null;if(e){for(t in r.communicatorAllocation)r.communicatorAllocation.hasOwnProperty(t)&&r.communicatorAllocation[t]>a&&(a=r.communicatorAllocation[t],o=t);o&&(n=r.settingMap["NETWORK."+o+".adTypes"].split(","),r._canService(n,e.actionValues)&&(s=new i,s.communicatorId=o,s.communicatorName=r.communicatorIdNameMap[o],s.isFallback=!1,s.propertyMap=r.settingMap,s.propertyId=r.propertyId))}return s},r.prototype.pickFallbackCommunicator=function(e){var t,n,r=this,a=0,o=null;if(!r.disableFallback&&e){for(n=e.communicatorId,a=0;a<r.priorityList.length&&r.priorityList[a]!==n;a++);t=r.priorityList[a+1],t&&(o=new i,o.communicatorId=t,o.communicatorName=r.communicatorIdNameMap[t],o.isFallback=!0,o.propertyMap=r.settingMap,o.propertyId=r.propertyId)}return o},r.prototype.pickPossibleCommunicators=function(e){var t,n=this,r=[];for(t=n.pickCommunicator(e);t;)r.push(t),t=n.pickFallbackCommunicator(t);return r}},{"./CommunicatorSpec":103}],102:[function(e,t,n){"use strict";var r=(e("../../util"),e("./Allocation")),i=e("../../../../lib");n.understandAllocation=function(e){if(!e)return null;var t=e.Settings||{},n=e.AllocationModule||{},a=e.NetworkModules;i.isArray(a)||(a=[a.NetworkModule]);var o,s,l,d,c,p,u={},_=null;for(d=0;d<t.length;d++)l=t[d],c=l["@name"],p=l["@value"],u[c]=p;var m=u["SELECTOR.ID"],v="true"===u["SELECTOR."+m+".disablePriorityFallback"],y=u["SYSTEM.PID"];for(d=0;d<n.length;d++)o=n[d],o["@id"]===m&&o["@uri"].indexOf("PercentageAllocationManager")&&(_=new r,_.algoId=m,_.disableFallback=v,_.propertyId=y);if(_){var f,g,b={};for(d=0;d<a.length;d++)s=a[d],f=s["@id"],g=s["@name"],b[f]=g;_.communicatorIdNameMap=b;var h,E,T,A;for(h in b)b.hasOwnProperty(h)&&(A="SELECTOR."+m+".NETWORK."+h,E=parseInt(u[A],10),T=parseInt(u[A+".priority"],10),_.priorityList[T]=h,_.communicatorAllocation[h]=E);_.settingMap=u}return _}},{"../../../../lib":"bRhrlU","../../util":"jJTEqU","./Allocation":101}],103:[function(e,t,n){"use strict";function r(){var e=this;e.propertyMap={},e.communicatorId=null,e.communicatorName=null,e.isFallback=!1,e.propertyId=""}t.exports=r,r.prototype.getSetting=function(e){var t=this;return t.propertyMap["NETWORK."+t.communicatorId+"."+e]}},{}],104:[function(e,t,n){"use strict";function r(){var e=this;a.call(e)}t.exports=r;var i=e("../../util"),a=e("./Allocation"),o=e("../common/Constants"),s=e("./CommunicatorSpec");i.inherits(r,a),r.prototype.pickCommunicator=function(e){var t=null;return e&&(t=new s,t.communicatorName=o.REFRESH),t}},{"../../util":"jJTEqU","../common/Constants":108,"./Allocation":101,"./CommunicatorSpec":103}],105:[function(e,t,n){"use strict";function r(e,t,n){var r=this;r.timestamp=(new Date).getTime(),r.payload=t,r.key=e,r.cacheIdentifier=n}t.exports=r},{}],106:[function(e,t,n){"use strict";function r(e){var t=this;t._yvapBus=e,s.call(t,"cachemanager-bus"),t._IDENTIFIER="adCache"+Math.floor(100*Math.random())+(new Date).getTime(),t._ruleCache={},t._allocationCache={},t._playerDataCache={},t._cuePointsCache={},t._adCache={},t._adEngine=new i,t._positionsToPrefetch=[c.BUMPER,c.PREROLL,c.POSTROLL],t._midrollsCuePoints={}}t.exports=r;var i=e("../engine/AdEngine"),a=(e("../allocation/AllocationManager"),e("../communicator/Ad"),e("../communicator/AdResponse"),e("../communicator/CommunicatorFactory")),o=e("../../util"),s=e("../../../../lib/event-bus"),l=e("./CacheEntry"),i=e("../engine/AdEngine"),d=e("../common/Events"),c=e("../common/Constants"),p=e("../../../../lib/user-agent");o.inherits(r,s);var u=12e5,_=10;r.prototype.prefetchCompleteHandler=function(e,t,n){var r=this;r._yvapBus.publish(d.AD_CALL_END,n,e),r.addAdResponseForKey(e,t)},r.prototype.prefetchFailureHandler=function(e,t,n,r){var i,a=this;i=e.adSpec,a._yvapBus.publish(d.AD_CALL_END,n,e),e&&e.setNewRedirectUrl&&(e.adCallSequence=i.adCallSequence,e.errorState=r,a.addAdResponseForKey(e,t))},r.prototype.updateAdCache=function(e,t){var n,r,i,o,s,l,p,u,_,m,v=this,y=v.getRuleForClipId(t),f=v.getAllocationForClipId(t),g=v.getPlayerDataForClipId(t),b={},h="",E="-1";e=e||[];for(var T=0;T<e.length;T++)n=e[T],r=n.adXML,i=n.key,h=i.adSystem||"",E=i.brId||"-1",p=i.pos,o=i.network,p&&r&&(o===c.MME||o===c.BRX)&&("BMPR"===p?p=c.BUMPER:"VID"===p&&(p=c.PREROLL),b[p]=r);if(y&&f&&g)for(T=0;T<v._positionsToPrefetch.length;T++){p=v._positionsToPrefetch[T],u=v._adEngine.preEvaluate(p,y);for(var A=0;A<u.length;A++){_=u[A],m=f.pickPossibleCommunicators(_);for(var S=0;S<m.length;S++)if(l=m[S],s=a.getCommunicatorUsingSpec(l),s&&s.allowPrefetch(b[p]))if(s.subscribe(d.AD_READY,v.prefetchCompleteHandler,v),s.subscribe(d.AD_FAILURE,v.prefetchFailureHandler,v),v._yvapBus.publish(d.AD_CALL_START,s),b[p]){var I=b[p];s.prefetchAd(I,_,g,h,E)}else s.getNewAd(_,g)}}},r.prototype.getAd=function(e,t,n){var r=this,i=null;if(e&&t&&n){var o=r.getPlayerDataForClipId(e),s=a.getCommunicatorUsingSpec(t);if(s){var l=s.getKey(n,o);i=r.getAdResponseForKey(l),i||r.getNewAd(s,n,o)}}return i},r.prototype.getNewAd=function(e,t,n){var r=this;e&&(e.subscribe(d.AD_READY,r.prefetchCompleteHandler,r),e.subscribe(d.AD_FAILURE,r.prefetchFailureHandler,r),r._yvapBus.publish(d.AD_CALL_START,e),e.getNewAd(t,n))},r.prototype.isMyOwn=function(e){var t=this;return e&&e.cacheIdentifier===t._IDENTIFIER},r.prototype.hasEntryExpired=function(e){return e&&(new Date).getTime()-e.timestamp>=u},r.prototype.hasBucketExpired=function(e){return e&&(new Date).getTime()-e.timestamp>=u},r.prototype._sortAscendingByTimeStamp=function(e,t){return e.timestamp>t.timestamp},r.prototype._cleanExpiredEntries=function(e){for(var t,n=this,r=[],i=0;i<e.length;i++)t=e[i],n.hasEntryExpired(t)||r.push(t);return r},r.prototype.sync=function(){var e,t,n,r,i,a,s=this,l=[],d=0;for(e in s._adCache)if(s._adCache.hasOwnProperty(e)){if(t=s._adCache[e]||[],l=s._cleanExpiredEntries(t),l.length>0&&!p.tv){for(i=o.localStorage.get(e),a=[],i&&(s.hasBucketExpired(i)?o.localStorage.remove(e):a=i.bucket||[]),a=s._cleanExpiredEntries(a),d=a.length,n=0;_-d>n;n++)r=l.shift(),r&&a.push(r);if(a.length>0){if(i={},i.bucket=a,i.timestamp=(new Date).getTime(),!o.localStorage.put(e,i)){for(d=l.length,n=0;_-d>n;n++)r=a.shift(),r&&!s.hasEntryExpired(r)&&l.push(r);o.localStorage.remove(e)}}else o.localStorage.remove(e)}s._adCache[e]=l}},r.prototype.addAdResponseForKey=function(e,t){var n=this,r=new l(t,e,n._IDENTIFIER),i=n._adCache[t]||[];i.push(r),n._adCache[t]=i,e.isCached=!0,n._yvapBus.publish(d.CACHE_UPDATE,t,e)},r.prototype.getAdResponseForKey=function(e){var t,n,r,i,a=this,s=null;for(n=a._adCache[e]||[],i=0;i<n.length;i++)if(t=n[i],!a.hasEntryExpired(t)){n.splice(i,1);break}if(t)s=t.payload;else if(r=o.localStorage.get(e)){for(a.hasBucketExpired(r)?(o.localStorage.remove(e),n=[]):n=r.bucket||[],i=0;i<n.length;i++)if(t=n[i],!a.hasEntryExpired(t)){n.splice(i,1);break}n.length>0?(r.bucket=n,r.timestamp=(new Date).getTime(),o.localStorage.put(e,r)):o.localStorage.remove(e)}return t&&(s=t.payload,s.cacheState=a.isMyOwn(t)?"l0":"l1"),s},r.prototype.addRuleForClipId=function(e,t){var n=this;e&&t&&(n._ruleCache[t]=e)},r.prototype.getRuleForClipId=function(e){var t=this;return t._ruleCache[e]},r.prototype.addAllocationForClipId=function(e,t){var n=this;e&&t&&(n._allocationCache[t]=e)},r.prototype.getAllocationForClipId=function(e){var t=this;return t._allocationCache[e]},r.prototype.addPlayerDataForClipId=function(e,t){var n=this;e&&t&&(n._playerDataCache[t]=e)},r.prototype.getPlayerDataForClipId=function(e){var t=this;return t._playerDataCache[e]},r.prototype.addCuePointsForClipId=function(e,t){var n=this;e&&t&&(n._midrollsCuePoints[t]=e)},r.prototype.getCuePointsForClipId=function(e){var t=this;return t._midrollsCuePoints[e]}},{"../../../../lib/event-bus":"3ECu9u","../../../../lib/user-agent":"ty5FFo","../../util":"jJTEqU","../allocation/AllocationManager":102,"../common/Constants":108,"../common/Events":111,"../communicator/Ad":113,"../communicator/AdResponse":114,"../communicator/CommunicatorFactory":118,"../engine/AdEngine":137,"./CacheEntry":105}],107:[function(e,t,n){"use strict";function r(e){var t=this;s.call(t,e),t._vmapObjMap={}}t.exports=r;var i=e("../communicator/CommunicatorFactory"),a=e("../common/Events"),o=e("../../util"),s=(e("../../../../lib/logger"),e("./CacheManager")),l=e("xhr");o.inherits(r,s),r.prototype.updateAdCache=function(e,t){var n=this;e&&t&&(n._vmapObjMap[t]=e)},r.prototype.getAd=function(e,t,n){var r=this,o=null;if(e&&t&&n){var s=r._vmapObjMap[e],l=s.adBreakMap,d=n.type;if(l.hasOwnProperty(d)){var c=l[d],p=i.getCommunicatorUsingSpec(t),u=r.getPlayerDataForClipId(e);if(p&&(p.subscribe(a.AD_READY,r.prefetchCompleteHandler,r),p.subscribe(a.AD_FAILURE,r.prefetchFailureHandler,r),r._yvapBus.publish(a.AD_CALL_START,p),c)){p.prefetchAd(c,n,u);var _=p.getKey(n,u);o=r.getAdResponseForKey(_)}}}return o},r.prototype.getNewAd=function(e,t,n,r){var i=this;e&&(e.subscribe(a.AD_READY,i.prefetchCompleteHandler,i),e.subscribe(a.AD_FAILURE,i.prefetchFailureHandler,i),i._yvapBus.publish(a.AD_CALL_START,e),e.getNewAd(t,n,r))},r.prototype.getMidrollAdTagUri=function(e,t){var n=this,r=n._vmapObjMap[e],i=r.adBreakMap[t],a=i.adSources||[],o=a[0];if(o&&o.vastAdData){var s=o.vastAdData,l=o.adTagURI||s[0].redirectUrl||"";return l}},r.prototype.getNewIceBreakerResponseVMAPXml=function(e,t){try{var n={url:e,method:"GET",sync:!1};l(n,function(e,n,r){n.statusText;e||t(r)})}catch(r){}}},{"../../../../lib/logger":"IS9j5T","../../util":"jJTEqU","../common/Events":111,"../communicator/CommunicatorFactory":118,"./CacheManager":106,xhr:215}],108:[function(e,t,n){"use strict";n.MARKETING_AD_BREAK=3,n.DEFAULT_VPAID_TIMEOUT=5,n.AD_CACHE_EXPTIME=12e5,n.HTTP="http://",n.HTTPS="https://",n.SSL="https:",n.HTML="html",n.PROGRESSIVE="progressive",n.AD="ad",n.NOAD="noad",n.VPAID="vpaid",n.OVERLAY="overlay",n.VPAID_FLASH_FORMAT="application/x-shockwave-flash",n.VPAID_JS_FORMAT="application/javascript",n.STANDALONE_GEMINI_BRX="standalone_gemini_brx",n.STANDALONE_GEMINI_NATIVE="standalone_gemini_native",n.STATIC_RESORUCE="static",n.IFRAME_RESORUCE="iframe",n.HTML_RESORUCE="html",n.OVERLAY_IMAGE="image/jpeg",n.OVERLAY_VPAID="application/x-shockwave-flash",n.BUMPER="bumper",n.PREROLL="preroll",n.POSTROLL="postroll",n.NON_LINEAR="overlay",n.MIDROLL="midroll",n.CLIP_START="clip-start",n.CLIP_END="clip-end",n.COMPANION="companion",n.RULES_MISSING="rules-missing",n.CLIP_DATA_MISSING="clip-data-missing",n.CACHE_L0="l0",n.CACHE_L1="l1",n.CACHE_L2="l2",n.MME="MME",n.FREEWHEEL="FREEWHEEL_VAST",n.CBS="CBS",n.DFP="DFP",n.PREVIEW="PREVIEW",n.YAXv="YAXv",n.BRX="BRX",n.REFRESH="REFRESH",n.NFL_FREE_TIME=240,n.NFL_SESSION_TIME=14400,n.NFL_PREROLL="NFL_Preroll",n.NFL_ONLOAD="NFL_onLoad",n.NFL_NOW_LMSID="a0Vd0000003unOyEAI",n.NFL_SESSION_COOKIE="rvl_NFL",n.YVAP_INFO_AD_BREAKS="adBreaks",n.MAX_VOD_ADS_MIDROLL=4,n.MIDROLL_DEFAULT_ADS_PER_BREAK=4,n.MIDROLL_PREFETCH_MAX_RETRY=2,n.MIDROLL_PREFETCH_TIMER=18e5,n.DEFAULT_AD_DURATION=30,n.VIEWABILITY_ON=!0,n.ADBLOCKER=!1,n.INTERNAL_POLLING_INTERVAL=200,n.TIME_FOR_VIEWABLE_IMPRESSION=2e3,n.VIEWABILITY_THRESHOLD=.5,n.VIEWABILITY_MEASURABLE=1,n.VIEWABILITY_NOT_MEASURABLE_IFRAME=2,n.VIEWABILITY_NOT_MEASURABLE_NO_DARLA=3,n.PLAYER_AUTO_PLAY_ON=1,n.PLAYER_AUTO_PLAY_OFF=2,n.PLAYER_SOUND_ON=1,n.PLAYER_SOUND_OFF=2,n.PLAYER_IN_BANNER=1,n.PLAYER_NOT_IN_BANNER=2,n.PLAYER_LOCATION_ABOVE_THE_FOLD=1,n.PLAYER_LOCATION_BELOW_THE_FOLD=2,n.VIEWABILITY_VISIBLE=1,n.VIEWABILITY_NOT_VISIBLE=2,n.VIEWABILITY_NOT_MEASURABLE=3,n.PLAYER_FULLSCREEN_OFF=0,n.PLAYER_FULLSCREEN_ON=1,n.UNKNOWN=3,n.VIEWABILITY_RULE_TYPE="t",n.VIEWABILITY_RULE_MIN_DURATION="d",n.VIEWABILITY_RULE_CONSECUTIVE_PLAYBACK="c",n.VIEWABILITY_RULE_MIN_PIXELS="p",n.VIEWABILITY_RULE_AUDIO="a",n.STATUS_INITIALIZATION=0,n.STATUS_SWF_LOADED=1,n.STATUS_AD_INITED=2,n.VIDEO_START="VIDEO_START",n.VIDEO_QUARTILE_25="VIDEO_QUARTILE_25",n.VIDEO_QUARTILE_50="VIDEO_QUARTILE_50",n.VIDEO_QUARTILE_75="VIDEO_QUARTILE_75",n.VIDEO_QUARTILE_100="VIDEO_QUARTILE_100",n.VIDEO_VIEW="VIDEO_VIEW",n.VIDEO_VIEW_3P="VIDEO_VIEW_3P"},{}],109:[function(e,t,n){"use strict";function r(){var e=a.getCookie("yvapF");return e?JSON.parse(e):{}}function i(e){var t=JSON.stringify(e);a.setCookie("yvapF",t,{expires:new Date(Date.now()+1e5),path:"/",session:!0})}var a=e("../../util");n.getTotalClipCount=function(){var e=r(),t=e.cc;return t?t:0},n.incrementTotalClipCount=function(){var e=r(),t=e.cc;t=t?t+1:1,e.cc=t,i(e)},n.resetTotalClipCount=function(){var e=r();e.cc=0,i(e)},n.getRecentClipCount=function(){var e=r(),t=e.rcc||0;return t},n.incrementRecentClipCount=function(){var e=r();e.rcc=(e.rcc||0)+1,i(e)},n.resetRecentClipCount=function(){var e=r();e.rcc=0,i(e)},n.getTotalVideoLength=function(){var e=r(),t=e.vl||0;return t},n.incrementTotalVideoLength=function(e){var t=r(),n=e||1;t.vl=(t.vl||0)+n,i(t)},n.resetTotalVideoLength=function(){var e=r();e.vl=0,i(e)},n.getRecentVideoLength=function(){var e=r(),t=e.rvl||0;return t},n.incrementRecentVideoLength=function(e){var t=r(),n=e||1;t.rvl=(t.rvl||0)+n,i(t)},n.incrementNFLVideoLength=function(e){var t=r(),n=e||1;t.rvl_NFL=(t.rvl_NFL||0)+n,i(t)},n.getNFLVideoLength=function(e){var t=r(),n=t.rvl_NFL||0;return n},n.resetRecentVideoLengthNFL=function(){var e=r();e.rvl_NFL=0,i(e)},n.createNFLSession=function(){var e=r();(0===parseInt(e.session_NFL,10)||isNaN(parseInt(e.session_NFL,10)))&&(e.session_NFL=(new Date).getTime()/1e3,i(e))},n.resetNFLSession=function(){var e=r();e.session_NFL=0,i(e)},n.getNFLSession=function(){var e=r(),t=e.session_NFL||0;return t},n.resetRecentVideoLength=function(){var e=r();e.rvl=0,i(e)},n.getAdLength=function(){var e=r(),t=e.al||0;return t},n.incrementAdLength=function(e){var t=r(),n=e||1;t.al=(t.al||0)+n,i(t)},n.resetAdLength=function(){var e=r();e.al=0,i(e)},n.getAdCount=function(){var e=r(),t=e.ac||0;return t},n.incrementAdCount=function(){var e=r();e.ac=(e.ac||0)+1,i(e)},n.resetAdCount=function(){var e=r();e.ac=0,i(e)}},{"../../util":"jJTEqU"}],110:[function(e,t,n){"use strict";n.AD_CALL_TIMEOUT="ERR_AD_CALL_TIMEOUT",n.XML_PARSING="ERR_XML_PARSING",n.RESPONSE_GENERIC="ERR_RESPONSE_GENERIC",n.EMPTY_RESPONSE="ERR_EMPTY_RESPONSE",n.NO_PARSER="ERR_NO_PARSER",n.MISSING_ADTGT="ERR_MISSING_ADTGT",n.REQUEST_GENERIC="ERR_REQUEST_GENERIC",
n.INCOMPATIBLE_MEDIA="ERR_INCOMPATIBLE_MEDIA",n.MEDIA_PLAYBACK="ERR_MEDIA_PLAYBACK",n.PLAYER_TIMEOUT="PLAYER_TIMEOUT",n.GENERIC="ERR_GENERIC",n.VPAID_TIMEOUT="ERR_VPAID_TIMEOUT",n.THIRD_PARTY_NO_AD="THIRD_PARTY_NO_AD",n.SSL_MISMATCH="SSL_MISMATCH",n.MISSING_SPACEID="MISSING_SPACEID",n.ADBLOCKER="ADBLOCKER",n.VPAID_SWF_DOWNLOAD_ERROR="ERR_VPAID_SWF_DOWNLOAD_ERROR",n.BRX_WITHOUT_FLASH="ERR_BRX_WITHOUT_FLASH"},{}],111:[function(e,t,n){"use strict";n.AD_READY="ad-ready",n.AD_FAILURE="ad-failure",n.CACHE_UPDATE="cache-update",n.CACHE_REFRESH_REQUEST="cache-refresh-request",n.AD_METRIC="ad-metric",n.BEGIN_AD_EXP="begin-ad-experience",n.AD_OPPORTUNITY="ad-opportunity",n.NULL_AD_OPPORTUNITY="null-ad-opportunity",n.AD_CALL_START="ad-call-start",n.AD_CALL_END="ad-call-end",n.AD_REQUESTED="ad-requested",n.AD_SUBMITTED="ad-submitted",n.AD_DELIVERED="ad-delivered",n.AD_DELIVERY_ERROR="ad-delivery-error",n.VIDEO_START="video-start",n.VIDEO_END="video-end",n.AD_PAUSED="ad-paused",n.AD_RESUMED="ad-resumed",n.AD_STOPPED="ad-stopped",n.AD_STARTED="ad-started",n.PLAYER_FULLSCREEN="player-fullscreen",n.VPAID_AD_RENDERED="vpaid-ad-rendered",n.VPAID_AD_STARTED="vpaid-ad-started",n.VPAID_AD_QUARTILE="vpaid-ad-quartile",n.ADBREAK_START="adbreak-start",n.MIDROLL_START="midroll_start",n.AD_BREAK_ENDED="ad-break-ended",n.AD_BREAK_SUBMITTED="ad-break-sumbitted",n.MIDROLL_CACHE_UPDATE="midroll-cache-update",n.VPAID_AD_INITED="vpaid-ad-inited",n.VPAID_SWF_LOAD_START="vpaid-swf-load-start",n.VPAID_SWF_LOAD_END="vpaid-swf-load-end",n.OVERLAY_CLICK="overlay-click",n.OVERLAY_RENDERED="overlay-rendered",n.PLAYER_SWF_READY="player-swf-ready",n.VPAID_PREFETCH_REQUEST="vpaid-prefetch-request",n.COMPANION_ADS_DELIVERED="companion-ads-delivered"},{}],112:[function(e,t,n){"use strict";n.AdLoaded="AdLoaded",n.AdStarted="AdStarted",n.AdStopped="AdStopped",n.AdLinearChange="AdLinearChange",n.AdExpandedChange="AdExpandedChange",n.AdRemainingTimeChange="AdRemainingTimeChange",n.AdVolumeChange="AdVolumeChange",n.AdImpression="AdImpression",n.AdVideoStart="AdVideoStart",n.AdVideoFirstQuartile="AdVideoFirstQuartile",n.AdVideoMidpoint="AdVideoMidpoint",n.AdVideoThirdQuartile="AdVideoThirdQuartile",n.AdVideoComplete="AdVideoComplete",n.AdClickThru="AdClickThru",n.AdUserAcceptInvitation="AdUserAcceptInvitation",n.AdUserMinimize="AdUserMinimize",n.AdUserClose="AdUserClose",n.AdPaused="AdPaused",n.AdPlaying="AdPlaying",n.AdLog="AdLog",n.AdError="AdError",n.AdTimeout="AdTimeout",n.AdProgress="AdProgress",n.AdSwfDownloadError="VPAIDSwfDownloadError"},{}],113:[function(e,t,n){"use strict";function r(){var e=this;e.adId=null,e.vastCreativeId=null,e.creativeId=null,e.bookingId=null,e.redirectUrl="",e.adFormat=null,e.adSystem="",e.streams=[],e.beacons={},e.params={},e.url="",e.type="",e.nonLinearAd=null,e.companion=[],e.isSkippable=!1,e.skipCountdown=5,e.isFallback=!1,e.fallbackFor="",e.timestamp=0,e.adXmlParseErr=null}t.exports=r,r.prototype.addBeaconOfType=function(e,t){var n,r=this;t&&e&&(t=t.toLowerCase(),n=r.beacons[t]||[],e=e.trim(),n.push(e),r.beacons[t]=n)},r.prototype.addMedia=function(e,t,n,r,i){if(e&&t&&n){var a=this;a.streams.push({url:n,format:e,bitrate:t,deliveryType:r,apiFramework:i})}},r.prototype.merge=function(e){var t,n,r,i,a=this;if(e&&e.merge){for(r in e.beacons)e.beacons.hasOwnProperty(r)&&(t=e.beacons[r]||[],t.length>0&&(n=(a.beacons[r]||[]).concat(t),a.beacons[r]=n));for(i in e.params)e.params.hasOwnProperty(i)&&(a.params[i]=e.params[i]);a.creativeId=e.creativeId,a.bookingId=e.bookingId,a.timestamp=e.timestamp,a.impressionId=e.impressionId,a.serveTime=e.serveTime,a.serveId=e.serveId,a.spaceId=e.spaceId,a.position=e.position,a.adSystem=e.adSystem}},r.prototype.addParamOfName=function(e,t){var n=this;t&&e&&(n.params[t.toLowerCase()]=e)},r.prototype.getParamOfName=function(e){var t=this;return e?t.params[e.toLowerCase()]:void 0},r.prototype.getBeaconsOfType=function(e){var t=this;return e?t.beacons[e.toLowerCase()]:void 0}},{}],114:[function(e,t,n){"use strict";function r(){var e=this;e.adSpec=null,e.adObj=null,e.fallbackAdObj=null,e.adTagURI="",e.isCached=!1,e.communicatorSpec=null,e.cacheState=null,e.errorState=null,e.redirectList=[],e.firstCall="",e.type="",e.adCallSequence=0,e.midrollbreak=null,e.midrolladsequence=null,e.adDuration=0,e.adIdBeacon=0}t.exports=r,r.prototype.toString=function(){return JSON.stringify(this)},r.prototype.setNewRedirectUrl=function(e){var t=this;t.redirectList&&t.redirectList.push(e)},r.prototype.clone=function(e){var t=this;if(e&&e.setNewRedirectUrl)for(var n in e)e.hasOwnProperty(n)&&("redirectList"===n?t.redirectList=[].concat(e.redirectList):t[n]=e[n])}},{}],115:[function(e,t,n){"use strict";function r(e){var t=this;a.call(t,e)}t.exports=r;var i=e("../../util"),a=e("./Communicator"),o=(e("./AdResponse"),e("../common/Constants"),e("../common/Errors")),s=e("../common/Events"),l=(e("./VMAP"),e("./ParserManager")),d=e("../yvap-util");i.inherits(r,a),r.prototype.getKey=function(e,t){var n=this,r=n.spec,i=r.communicatorName||"BRX",a=t.clipId||"",o=e.type||"";return i+"_"+a+"_"+o},r.prototype.processAdXml=function(e){var t,n,r,i,a,o,s,d=l.parseAdXml(e);for(i=0;i<d.length;i++)for(t=d[i],r="errorimpression",n=t.beacons[r]||[],a=0;a<n.length;a++)o=n[a],s=o.replace(/\[ERRORCODE\]/g,"{err_code}"),n[a]=s;return d},r.prototype.getNewAd=function(e,t){var n,r,a=this,l=a.spec;if(r=l.getSetting("AdServerUrl"),a.key=a.getKey(e,t),!i.isFlashInstalled()&&!l.isFallback)return n=a.getNewAdResponseObject(e,r),void a.publish(s.AD_FAILURE,n,a.key,a,o.BRX_WITHOUT_FLASH);if(r){r=r.replace("http:",location.protocol),r=r.replace(/\[timestamp\]/g,d.getTimeStamp()),r=r.replace(/\[spid\]/g,l.customSPID),r=r.replace(/\[br_pageurl\]/g,l.customDomain),n=a.getNewAdResponseObject(e,r);try{a.fireRequest(r,n)}catch(c){a.publish(s.AD_FAILURE,n,a.key,a,c.message)}}else n=a.getNewAdResponseObject(e),a.publish(s.AD_FAILURE,n,a.key,a,o.REQUEST_GENERIC)},r.prototype.allowPrefetch=function(){return!1}},{"../../util":"jJTEqU","../common/Constants":108,"../common/Errors":110,"../common/Events":111,"../yvap-util":154,"./AdResponse":114,"./Communicator":117,"./ParserManager":124,"./VMAP":132}],116:[function(e,t,n){"use strict";function r(e){var t=this;a.call(t,e)}t.exports=r;var i=e("../../util"),a=e("./Communicator"),o=e("./ParserManager"),s=(e("./AdResponse"),e("../common/Constants"),e("../common/Errors")),l=e("../common/Events");i.inherits(r,a),r.prototype.getKey=function(e,t){var n=this,r=n.spec,i=r.communicatorName||"",a=t.clipId||"",o=e.type||"";return i+"_"+a+"_"+o},r.prototype.getNewAd=function(e,t){var n,r,i,a,d,c=this,p=t.adTargeting||"";if(a=o.parseXml(p),d=a.childNodes[0],c.key=c.getKey(e,t),d&&"adData"===d.nodeName&&(r=d.getAttribute("id"),"ad_url"===r&&(i=d.getAttribute("value"),i+=i.indexOf("xml=vast")>-1?";pos=1":";pos=1;xml=yahoo")),i){i=i.replace("http:",location.protocol),n=c.getNewAdResponseObject(e,i);try{c.fireRequest(i,n)}catch(u){c.publish(l.AD_FAILURE,n,c.key,c,u.message)}}else n=c.getNewAdResponseObject(e),c.publish(l.AD_FAILURE,n,c.key,c,s.MISSING_ADTGT)},r.prototype.allowPrefetch=function(){return!1}},{"../../util":"jJTEqU","../common/Constants":108,"../common/Errors":110,"../common/Events":111,"./AdResponse":114,"./Communicator":117,"./ParserManager":124}],117:[function(e,t,n){"use strict";function r(e){var t=this;a.call(t,"communicator"),t.spec=e||{}}t.exports=r;var i=e("../../util"),a=(e("../../../../lib/logger"),e("../../../../lib/event-bus")),o=e("./ParserManager"),s=e("./VastValidator"),l=e("./AdResponse"),d=e("../common/Events"),c=e("../common/Errors"),p=e("../common/Constants"),u=e("../../../../lib/user-agent"),_=e("xhr");i.inherits(r,a);var m={"amgdgt.com":!0,"adap.tv":!0,"videohub.tv":!0,"doubleclick.net":!0,"undertone.com":!0,"jivox.com":!0,"adform.net":!0,"flashtalking.com":!0,"telemetryverification.net":!0,"fwmrm.net":!0,"eyereturn.com":!0,"zedo.com":!0,"tubemogul.com":!0,"tidaltv.com":!0,"yahoo.com":!0,"cbs.com":!0,"innovid.com":!0,"moatads.com":!0,"stickyadstv.com":!0,"btrll.com":!0,"ads.adaptv":!0};r.prototype.getNewAd=function(e,t,n){var r=this,i=r.getNewAdResponseObject(e,n);r.key=r.getKey(e,t);try{r.fireRequest(n,i)}catch(a){r.publish(d.AD_FAILURE,i,r.key,r,a.message)}},r.prototype.handleAdResponse=function(e){var t,n,r=this;t=e.adObj,t&&("redirect"===t.type?(n=t.redirectUrl,r.setNewRedirect(n,e)):(s.validateAdObj(t),r._processAuctionId(e),r.publish(d.AD_READY,e,r.key,r)))},r.prototype._processAuctionId=function(e){var t=e.adObj,n=/btrll\.com\//,r=e.redirectList.some(function(e){return n.test(e)});if(r||"brightroll_ad"===t.adId){var i,a=t.beacons.impression||[],o=t.adParameters&&t.adParameters.AdParameters||"",s=/(epix\/(?:[^\/]*\/){4}(.*?)\/|dsepix\/(?:[^\/]*\/){3}(.*?)\/)/;if(a.some(function(e){var t=e.match(s);return t&&(i=t[2]),!!t}),!i&&o){for(var l,d,c,p=/<Impression>(.*?)<\/Impression>/g;l=p.exec(o);){d=l[1];try{d=d&&"function"==typeof window.atob?window.atob(d):""}catch(u){}if(c=d.match(s),i=c&&c[2])break}if(!i){var _=o.match(/<QueryParams>(?:.*)cx=([^&]*)&?(?:.*)<\/QueryParams>/);i=_&&_[1]}}i?t.brxAuctionId=i:"brightroll_ad"===t.adId&&(t.brxAuctionId=null)}},r.prototype.processAdObjects=function(e,t){for(var n,r,i,a=this,o=0;o<t.length;o++)n=t[o],i=new l,i.clone(e),r=e.adObj,r&&n.merge(r),i.adObj=n,a.handleAdResponse(i)},r.prototype.getKey=function(){return"null-key"},r.prototype.getFirstCall=function(){return"null-first-call"},r.prototype.getNewAdResponseObject=function(e,t){var n=this,r=new l;return r.adSpec=e,r.type=e.type,r.communicatorSpec=n.spec,r.firstCall=t||n.getFirstCall(),r},r.prototype.processAdXml=function(e){return o.parseAdXml(e)},r.prototype.prefetchAd=function(e,t,n,r,i){var a,o,s=this;if(e){o=s.getNewAdResponseObject(t),o.adSystem=r,o.brId=i,s.key=s.getKey(t,n);try{a=s.processAdXml(e),s.processAdObjects(o,a)}catch(l){s.publish(d.AD_FAILURE,o,s.key,s,l.message)}}},r.prototype._isWhiteListed=function(e){var t=!1;for(var n in m)if(m.hasOwnProperty(n)&&e.indexOf(n)>-1){t=m[n];break}return t},r.prototype.fireRequest=function(e,t){var n=this,r=(new Date).getTime(),a=i.parseDomain(e),o=n._isWhiteListed(a),s=n.httpTimeout||3e3;if(window.location.protocol===p.SSL&&0!==e.indexOf(p.SSL))throw new Error(c.SSL_MISMATCH);try{var l={url:e,method:"GET",cors:o,sync:!1,timeout:s};u.ie&&u.ie<10&&(l.responseType="text"),_(l,function(e,i,a){var o,l=i.statusText;o=(new Date).getTime(),o-r>=s?n.onAdCallFailure(t,"timeout"):e?n.onAdCallFailure(t,l):n.onAdCallSuccess(t,a)})}catch(d){throw new Error(c.REQUEST_GENERIC)}},r.prototype.setNewRedirect=function(e,t){var n=this;t.setNewRedirectUrl(e),n.fireRequest(e,t)},r.prototype.onAdCallSuccess=function(e,t){var n,r=this;if(t)try{n=r.processAdXml(t),r.processAdObjects(e,n)}catch(i){r.publish(d.AD_FAILURE,e,r.key,r,i.message)}else r.publish(d.AD_FAILURE,e,r.key,r,c.EMPTY_RESPONSE)},r.prototype.onAdCallFailure=function(e,t){var n,r=this;n="timeout"===t?c.AD_CALL_TIMEOUT:"SSLMismatch"===t?c.SSL_MISMATCH:p.ADBLOCKER?c.ADBLOCKER:c.RESPONSE_GENERIC,r.publish(d.AD_FAILURE,e,r.key,r,n)},r.prototype.allowPrefetch=function(){return!1}},{"../../../../lib/event-bus":"3ECu9u","../../../../lib/logger":"IS9j5T","../../../../lib/user-agent":"ty5FFo","../../util":"jJTEqU","../common/Constants":108,"../common/Errors":110,"../common/Events":111,"./AdResponse":114,"./ParserManager":124,"./VastValidator":134,xhr:215}],118:[function(e,t,n){"use strict";var r=e("../common/Constants"),i=e("./MMECommunicator"),a=e("./FreeWheelCommunicator"),o=e("./CBSCommunicator"),s=e("./DFPCommunicator"),l=e("./PreviewCommunicator"),d=e("./RefreshCommunicator"),c=e("./YAXvCommunicator"),p=e("./BRXCommunicator");n.getCommunicatorUsingSpec=function(e){var t=null;if(e){var n=e.communicatorName;n.indexOf(r.MME)>-1?t=new i(e):n.indexOf(r.FREEWHEEL)>-1?t=new a(e):n.indexOf(r.CBS)>-1?t=new o(e):n.indexOf(r.DFP)>-1?t=new s(e):n.indexOf(r.REFRESH)>-1?t=new d(e):n.indexOf(r.PREVIEW)>-1?t=new l(e):n.indexOf(r.YAXv)>-1?t=new c(e):n.indexOf(r.BRX)>-1&&(t=new p(e))}return t}},{"../common/Constants":108,"./BRXCommunicator":115,"./CBSCommunicator":116,"./DFPCommunicator":119,"./FreeWheelCommunicator":120,"./MMECommunicator":122,"./PreviewCommunicator":125,"./RefreshCommunicator":126,"./YAXvCommunicator":135}],119:[function(e,t,n){"use strict";function r(e){var t=this;a.call(t,e)}t.exports=r;var i=e("../../util"),a=(e("../../../../lib/logger"),e("./Communicator")),o=(e("./AdResponse"),e("../common/Constants"),e("../common/Errors"),e("../common/Events"),e("./VMAP"),e("./ParserManager"),e("../common/Constants")),s=e("../../../../lib/user-agent.js"),l=e("../yvap-util");i.inherits(r,a),r.prototype._replaceAll=function(e,t,n){return n.replace(new RegExp(e,"g"),t)},r.prototype._parseAdTargeting=function(e){var t=this;e=t._replaceAll("nflnow:","",e),e=t._replaceAll("=",'":"',e),e=t._replaceAll(",",'","',e),e='{"'+e+'"}';try{return JSON.parse(e)}catch(n){return JSON.parse("{}")}},r.prototype.getKey=function(e,t){var n=this,r=n.spec,i=r.communicatorName||"",a=t.clipId||"",o=e.type||"";return i+"_"+a+"_"+o},r.prototype._getPlatform=function(){var e="nflnow/web/yahoo";return s.android?e=s.androidTablet?"nflnow/app/tablet/android/yahoo":"nflnow/app/phone/android/yahoo":s.ios&&(e=s.ipad?"nflnow/app/tablet/ios/yahoo":"nflnow/app/phone/ios/yahoo"),e},r.prototype._getValue=function(e){var t=function(e){return(new window.DOMParser).parseFromString(e,"text/xml")};if(null===e)return"";if("<"!==e.trim().charAt(0)&&">"!==e.trim().charAt(e.length-1))return"";var n=t(e);return n.getElementsByTagName("adData")[0].getAttribute("value")},r.prototype._populateMacro=function(e,t){var n,r,i,a=this,s={},d={},c={freeUserPeriodInSeconds:240,premiumUserPeriodInSeconds:720,publisherId:"1234567abcd",endpoint_preroll:"https://pubads.g.doubleclick.net/gampad/ads?sz=640x360&iu=/4595/nfl.${platform}&ciu_szs=&impl=s&gdfp_req=1&env=vp&output=xml_vast2&unviewed_position_start=1&cust_params=test%3D%26slot%3Dpreroll%26s3%3D${channel_id}&url=${referrer_url}&correlator=${timestamp}",endpoint_loader:"https://pubads.g.doubleclick.net/gampad/ads?sz=640x360&iu=/4595/nfl.${platform}&ciu_szs=&impl=s&gdfp_req=1&env=vp&output=xml_vast2&unviewed_position_start=1&cust_params=test%3D%26slot%3Donloader%26s3%3D${channel_id}&url=${referrer_url}&correlator=${timestamp}",endpoint_clubs:"https://pubads.g.doubleclick.net/gampad/ads?sz=640x360&iu=/4595/team.${club}.${platform}&ciu_szs=&impl=s&gdfp_req=1&env=vp&output=xml_vast2&unviewed_position_start=1&cust_params=test%3D%26slot%3Dpreroll%26s3%3D${channel_id}&url=${referrer_url}&correlator=${timestamp}"};return s.serverUrl="",t.content_provider_data&&t.content_provider_data.rules&&(c=t.content_provider_data.rules),e.subType===o.NFL_ONLOAD?s.serverUrl=c.endpoint_loader:e.subType===o.NFL_PREROLL&&(n=t.adTargeting||"",r=a._parseAdTargeting(a._getValue(n)),i=r.origin||"",d.channel_id=r.channel,"CLUBS"===i.toUpperCase()?(d.club=r.contentProvider,s.serverUrl=c.endpoint_clubs):s.serverUrl=c.endpoint_preroll),d.timestamp=l.getTimeStamp(),d.platform=a._getPlatform(),d.referrer_url=document.referrer,s.serverUrl=s.serverUrl.replace("[PLATFORM]","${platform}"),s.serverUrl=s.serverUrl.replace("[CLUB]","${club}"),s.serverUrl=s.serverUrl.replace("[CHANNEL_ID]","${channel_id}"),s.serverUrl=s.serverUrl.replace("[referrer_url]","${referrer_url}"),s.serverUrl=s.serverUrl.replace("[timestamp]","${timestamp}"),s.macroDict=d,s},r.prototype.updateProtocol=function(e){var t=window.location.protocol;return e=t===o.SSL?e.replace(o.HTTP,o.HTTPS):e.replace(o.HTTPS,o.HTTP)},r.prototype.getNewAd=function(e,t){var n,r,i=this,a={},d=i.spec,c=d.getSetting("AdServerUrl");if(t.licenseId!==o.NFL_NOW_LMSID)c=c.replace("[referrer_url]","${referrer_url}"),c=c.replace("[REQUESTID]","${requestid}"),c=c.replace("[timestamp]","${requestid}"),c=c.replace("[TIMESTAMP]","${requestid}"),c=c.replace("${REQUESTID}","${requestid}"),s.mobile&&(c=c.replace("iu=/4595/nfl.video.yahoo","iu=/4595/nfl.video.yahoo/mobileweb")),a.requestid=l.getTimeStamp(),a.referrer_url=document.referrer||"yahoo.com";else{var p=i._populateMacro(e,t);a=p.macroDict,c=p.serverUrl}n=l.expandMacro(c,a),null!==n&&""!==n&&(n=i.updateProtocol(n),r=i.getNewAdResponseObject(e,n),i.key=i.getKey(e,t),i.fireRequest(n,r))},r.prototype.allowPrefetch=function(){return!1}},{"../../../../lib/logger":"IS9j5T","../../../../lib/user-agent.js":"ty5FFo","../../util":"jJTEqU","../common/Constants":108,"../common/Errors":110,"../common/Events":111,"../yvap-util":154,"./AdResponse":114,"./Communicator":117,"./ParserManager":124,"./VMAP":132}],120:[function(e,t,n){"use strict";function r(e){var t=this;a.call(t,e)}t.exports=r;var i=e("../../util"),a=e("./Communicator"),o=(e("./AdResponse"),e("./Ad")),s=e("../common/Constants"),l=e("../common/Errors"),d=e("../common/Events"),c=(e("./VMAP"),e("./ParserManager"));i.inherits(r,a),r.prototype.getKey=function(e,t){var n=this,r=n.spec,i=r.communicatorName||"",a=t.clipId||"",o=e.type||"";return i+"_"+a+"_"+o},r.prototype.processAdXml=function(e){var t,n,r,i,a,l,d=c.parseAdXml(e);if(d&&d.adBreakMap){t=d.adBreakMap.preroll||{};var p=t.adSources||[];if(n=p[0],!n){var u=new o;return u.adFormat="vmap",u.type=s.NOAD,[u]}r=n.vastAdData||[],i=t.trackingEvents||{},a=i.trackings||[];for(var _=0;_<a.length;_++)"breakStart"===a[_].event&&(l=a[_]);if(l)for(_=0;_<r.length;_++)r[_].addBeaconOfType(l.url,"ad-break-start");return r}return d},r.prototype.getNewAd=function(e,t){var n,r,a=this,o=a.spec,s=";;",c=";",p=t.clipCategory||"",u=t.adTargeting||"",_=new DOMParser,m=_.parseFromString(u,"application/xml");r=m.childNodes[0];var v,y,f,g,b,h,E,T,A,S,I="";if(A=o.getSetting("AdServerUrl"),n=a.getNewAdResponseObject(e,A),a.key=a.getKey(e,t),r&&"adData"===r.nodeName){v=r.getAttribute("id"),("TurnerVideoID"===v||"YahooPartnerVideoID"===v)&&(I=r.getAttribute("value")),y="true"===o.getSetting("OverrideSAPI")?o.getSetting("SiteSectionMapping"):p,f={nw:o.getSetting("YahooNetworkId"),metr:o.getSetting("CapabilitySupportFlags"),resp:o.getSetting("ResponseType"),sfid:o.getSetting("SiteSectionFallbackId"),ssnw:o.getSetting("SiteSectionNetworkId"),pvrn:Math.round(1e8*Math.random()).toString(),caid:I,csid:y,crtp:o.getSetting("CustomResponseType"),vprn:Math.round(1e8*Math.random()).toString(),afid:o.getSetting("VideoAssetFallbackId"),flag:o.getSetting("ImpressionFlags"),asnw:o.getSetting("VideoAssetNetworkId"),prof:o.getSetting("PlayerProfile")},h=i.querystring(f),g={tpcl:o.getSetting("SlotTimePositionClass"),slau:o.getSetting("CustomAdUnitName"),slid:o.getSetting("SlotCustomId"),ptgt:o.getSetting("SlotType"),flag:o.getSetting("SlotFlags"),h:o.getSetting("SlotHeight"),w:o.getSetting("SlotWidth"),tpos:o.getSetting("SlotTimePosition")},E=i.querystring(g),b={flag:o.getSetting("SlotFlags2"),h:o.getSetting("SlotHeight2"),w:o.getSetting("SlotWidth2"),tpcl:o.getSetting("SlotTimePositionClass2"),slau:o.getSetting("CustomAdUnitName2"),slid:o.getSetting("SlotCustomId2"),ptgt:o.getSetting("SlotType2"),tpos:o.getSetting("SlotTimePosition2")},T=i.querystring(b),A=A.replace("http:",location.protocol),S=A+"?"+h+s+E+c+T,n.firstCall=S;try{a.fireRequest(S,n)}catch(L){a.publish(d.AD_FAILURE,n,a.key,a,L.message)}}else a.publish(d.AD_FAILURE,n,a.key,a,l.MISSING_ADTGT)},r.prototype.allowPrefetch=function(){return!1}},{"../../util":"jJTEqU","../common/Constants":108,"../common/Errors":110,"../common/Events":111,"./Ad":113,"./AdResponse":114,"./Communicator":117,"./ParserManager":124,"./VMAP":132}],121:[function(e,t,n){"use strict";function r(e){var t=0,n=e.mediaInfo;return!n||n.length<1?t:t=n[0].length||t}function i(e){var t={};return t.clickurl=e.clickUrl,t}function a(e){var t,n=[],r=e.mediaInfo;return!r||r.length<1?n:(r.forEach(function(e){t={url:e.url,format:e.contentType,bitrate:e.bitrate,deliveryType:"progressive",apiFramework:null},n.push(t)}),n)}var o=e("../common/Constants"),s=e("../engine/AdSpec"),l=e("./Ad"),d=e("./Communicator"),c=e("../allocation/CommunicatorSpec"),p=function(e,t){var n,p,u,_,m;return n=new c,n.communicatorName=o.STANDALONE_GEMINI_NATIVE,u=new s(o.PREROLL,["clickable"]),p=new d(n),m=new l,m.adId=o.STANDALONE_GEMINI_NATIVE,m.adFormat=o.STANDALONE_GEMINI_NATIVE,m.creativeId=null,m.vastCreativeId=null,m.bookingId=null,m.redirectUrl="",m.streams=a(e),m.params=i(e),m.url="",m.type=o.AD,m.nonLinearAd="",m.companion=[],m.isSkippable=!1,m.skipCountdown=5,m.isFallback=!1,m.fallbackFor="",m.timestamp=0,m.adXmlParseErr=null,m.duration=r(e),m.rules=t,_=p.getNewAdResponseObject(u),_.adSystem=o.STANDALONE_GEMINI_NATIVE,_.adObj=m,_};t.exports={constructAdResponse:p}},{"../allocation/CommunicatorSpec":103,"../common/Constants":108,"../engine/AdSpec":139,"./Ad":113,"./Communicator":117}],122:[function(e,t,n){"use strict";function r(e){var t=this;o.call(t,e)}t.exports=r;var i=e("../../util"),a=e("../yvap-util"),o=e("./Communicator"),s=(e("./AdResponse"),e("./ParserManager")),l=e("../common/Constants"),d=e("../common/Events"),c=e("../common/Errors"),p=e("../../../../lib/user-agent"),l=e("../common/Constants");i.inherits(r,o);var u="yvap.query.yahoo.com/v1/public/yql",_="flv_as3;xml_ver_2.0vast",m="vi_ct_1",v="vpaidt_none;fm_mp4;fm_webm;vi_ct_1",y={overlayC2V:"v4",overlayC2S:"v5",clickable:"v1;v7;v8",interactive:"v2",asq:"v6"},f={bumper:"BMPR",overlay:"VIDO",preroll:"VID",postroll:"VID",midroll:"VID"},g=["playback0","playback25","playback50","playback75","playback100"],b="csc.beap.bc.yahoo.com/yi";r.prototype._parseCSCImpressionBeacon=function(e,t){for(var n=/([^,()]+),|([^,():]+)\)/g,r=t.match(n),i={},a=null,o=0,s=null,l=0;l<r.length;l++)a=r[l],o=a.length-1,a=","===a.charAt(o)||")"===a.charAt(o)?a.substr(0,o):a,s=a.split("$"),s=2===s.length?s:a.split("="),2===s.length&&(i[s[0]]=s[1]);e.position=i.ypos,e.bookingId=i.bi,e.creativeId=i.cr,e.impressionId=i.aid,e.serveTime=i.st,e.serveId=i.gid,e.spaceId=i.sp},r.prototype.getNewAd=function(e,t){var n,r,o,s,g,b,h=this,E=h.spec,T=E.getSetting("adBaseUrl")||"us",A="true"===E.getSetting("sendRsParam")?"lmsid:"+t.licenseId:"",S=e.actionValues||[],I=f[e.type]||"",L=m,M="",C="",N="",D=t.spaceId;if(e.type===l.MIDROLL){L="";var R=E.getSetting("spaceIdOverride");R&&(D=R),M=' vid.forcead=1  adbreak="'+e.cdtBreak.toString()+'" ';var O=parseInt(E.getSetting("adsPerBreak"))||l.MAX_ADS_MIDROLL;e.cdtBreak===l.MARKETING_AD_BREAK&&O++,I=O>0&&"VID"===I?"n"+O+I:I}for(var P="",w=0;w<S.length;w++)P=P+y[S[w]]+";";if(p.mobile&&(L=v),t.showName&&(C='show_name="'+t.showName+'" '),t.topics&&(N='cTopId="'+t.topics.join()+'" '),P+=_+";"+L,b='content="'+P+'" '+M+C+N,r={pn:"'"+E.getSetting("partnerId")+"'",f:"'"+D+"'",p:"'"+E.propertyId+"'",c:"'x'",rand:"'"+Math.round(1e13*Math.random())+"'",rs:"'"+A+"'",l:"'"+I+"'",at:"'"+b+"'",rg:"'"+T+"'",pt:"'"+location.protocol+"'"},o={q:a.generateYqlQuery(r,"yahoo.ads.video.vat"),format:"json",env:"prod"},s=i.querystring(o),g=location.protocol+"//"+u+"?"+s,n=h.getNewAdResponseObject(e,g),n.timestamp=(new Date).getTime()/1e3,h.key=h.getKey(e,t),!D)return void h.publish(d.AD_FAILURE,n,h.key,h,c.MISSING_SPACEID);try{h.fireRequest(g,n)}catch(k){h.publish(d.AD_FAILURE,n,h.key,h,k.message)}},r.prototype.getFirstCall=function(){var e=this,t=e.spec,n=t.getSetting("adBaseUrl")||"us";return"http://"+n+u},r.prototype.getKey=function(e,t){var n=this,r=n.spec,i=r.communicatorName||"",a=t.spaceId||"",o=(t.clipId||"",t.licenseId||""),s=e.type||"",l=f[s]||"";return i+"_"+a+"_"+l+"_"+o},r.prototype.processAdXml=function(e){var t=this,n=null;if(e=e.trim(),"<"===e.charAt(0))n=e;else try{var r=JSON.parse(e);if(!(r&&r.query&&r.query.results&&r.query.results.result))throw new Error(c.EMPTY_RESPONSE);n=r.query.results.result.xmlResponse||r.query.results.result}catch(i){throw new Error(c.XML_PARSING)}var a,o,l,d,p,u,_,m,v,y=s.parseAdXml(n);for(_=0;_<y.length;_++){for(a=y[_],m="impression",o=a.beacons[m]||[],u=0;u<o.length;u++)l=o[u],l.indexOf("csc.beap")>-1&&(t._parseCSCImpressionBeacon(a,l),l=l.replace(/eob\$/g,"cuuid${cuuid},eob$adb={ad_break}:sn={ad_sequence}:dur={duration}:pver={player_version}:"),o[u]=l);for(p=0;p<g.length;p++)for(m=g[p],o=a.beacons[m]||[],u=0;u<o.length;u++)l=o[u],l.indexOf("beap-bc")>-1&&(v=l.lastIndexOf("))"),v>-1&&(d=l.substring(0,v)+",{beap_client_event}))",o[u]=d));for(m="noadimpression",o=a.beacons[m]||[],u=0;u<o.length;u++)l=o[u],d=l.replace(/eob\$/g,"cuuid${cuuid},eob$yvap_code={err_code}:adb={ad_break}:sn={ad_sequence}:dur={duration}:dmn_1={initial_domain}:dmn_n={vendor_domain}:pver={player_version}:"),o[u]=d;for(m="errorimpression",o=a.beacons[m]||[],u=0;u<o.length;u++)l=o[u],l.indexOf(b)>-1&&o.splice(u,1);for(u=0;u<o.length;u++)l=o[u],d=l.replace(/\[ERRORCODE\]/g,"{err_code}"),o[u]=d}return y},r.prototype.allowPrefetch=function(e){try{if(e)for(var t=s.parseAdXml(e)||[],n=0;n<t.length;n++){var r=t[n];if("redirect"===r.type&&r.redirectUrl.indexOf("yrtas.btrll.com")>-1)return!1}return!0}catch(i){return!0}}},{"../../../../lib/user-agent":"ty5FFo","../../util":"jJTEqU","../common/Constants":108,"../common/Errors":110,"../common/Events":111,"../yvap-util":154,"./AdResponse":114,"./Communicator":117,"./ParserManager":124}],123:[function(e,t,n){"use strict";function r(e,t){var n=this;n._yvapBus=e,n._cacheManager=t,n._communicator=null,n._midrollsAds=[],n._totalAdEnd=0,n._fetchRetry=0,n._totalNoAds=0,n._totalDuplicatedAds=0,n._totalPrefetchedAdsDuration=0,n._toFillMidrollsAds=!1,n._adsPerBreak=0,n._successAdCount=0,n._failAdCount=0,n._toUnsubscribe=[],n._cdtbreak=1}t.exports=r;var i=(e("../../../../lib/logger"),e("../../../../lib/event-bus"),e("./AdResponse"),e("../common/Events")),a=e("../common/Constants"),o=e("../engine/AdSpec"),s=e("./CommunicatorFactory"),l=e("../allocation/CommunicatorSpec"),d=e("../yvap-util"),c=(e("../ads-json"),function(e){});r.prototype._getNewAds=function(e,t){var n=this;if(e){var r=new o(a.MIDROLL,["clickable"]);r.cdtBreak=n.getCDTBreak(),r.fallbackParam=!1;var l=e.pickCommunicator(r);if(l&&l.communicatorName===a.MME){var d=s.getCommunicatorUsingSpec(l);n._adsPerBreak=parseInt(l.getSetting("adsPerBreak"),10),isNaN(n._adsPerBreak)&&(n._adsPerBreak=a.MIDROLL_DEFAULT_ADS_PER_BREAK),c("Making xhr call to fetch ads with: adsPerBreak="+n._adsPerBreak),n._toFillMidrollsAds=t.hasLiveMidrolls,n._midrollPrefetchDuration=t.hasLiveMidrolls?t.liveMidrollsMaxDur:0,n._totalAdEnd=0,n._failAdCount=0,n._successAdCount=0,n._toUnsubscribe.push(d.subscribe(i.AD_READY,n._adReadyHandler,n)),n._toUnsubscribe.push(d.subscribe(i.AD_FAILURE,n._adFailureHandler,n)),d.getNewAd(r,t)}else c("No suitable communicator found for midroll fetch")}},r.prototype._getCommunicator=function(e){var t=new l;return t.communicatorId=11,t.communicatorName="MME",t.isFallback=!1,t.propertyMap=e.settingMap,t.propertyId=e.propertyId,s.getCommunicatorUsingSpec(t)},r.prototype._checkForVPAIDPreInit=function(e){var t=this;if(e){var n=e.adObj;if(n&&n.type===a.VPAID){var r=n.streams||[],o=r[0];o&&"application/x-shockwave-flash"===o.format&&t._yvapBus.publish(i.VPAID_PREFETCH_REQUEST,n)}}},r.prototype._trimPrefetchedAds=function(e){var t,n,r,i,o=this,s=[],l={},d=0,p=0;for(i=0;i<e.length;i++)n=e[i],r=n&&n.adObj,r&&r.type!==a.NOAD&&r.streams&&r.streams.length&&r.streams.length>0?(t=r.creativeId,l[t]?d++:(l[t]=!0,s.push(n))):p++;return o._totalNoAds+=p,o._totalDuplicatedAds+=d,c("Trim: duplicate="+d+", no-ad="+p),s},r.prototype._startFetchAds=function(e,t){var n=this;n._currentPlayerDataItem=t,n._currentCommunicatorAllocation=e,n._fetchRetry=0,n._totalNoAds=0,n._totalDuplicatedAds=0,n._totalPrefetchedAdsDuration=0,n._getNewAds(e,t)},r.prototype._fillMidrollsAds=function(){var e,t,n=this,r=0;for(n._midrollsAds=n._trimPrefetchedAds(n._midrollsAds),e=0;e<n._midrollsAds.length;e++)t=n._midrollsAds[e],r+=t&&t.adObj&&t.adObj.duration||0;n._totalPrefetchedAdsDuration=r,c("Updated prefetched ads="+r+", total ads="+n._midrollsAds.length+", askDuration="+n._midrollPrefetchDuration),r<n._midrollPrefetchDuration&&n._fetchRetry<a.MIDROLL_PREFETCH_MAX_RETRY?(n._fetchRetry++,c("Fetch retry #"+n._fetchRetry),n._getNewAds(n._currentCommunicatorAllocation,n._currentPlayerDataItem)):n._publishPrefetchedAdsData()},r.prototype._publishPrefetchedAdsData=function(){var e=this,t={retryCount:e._fetchRetry,targetAdsDuration:e._midrollPrefetchDuration,totalUniqueAds:e._midrollsAds.length,totalDuplicatedAds:e._totalDuplicatedAds,totalNoAds:e._totalNoAds,uniqueAdsDuration:e._totalPrefetchedAdsDuration};e._yvapBus.publish(i.MIDROLL_CACHE_UPDATE,t)},r.prototype._adReadyHandler=function(e,t,n,r){var o=this,s=[];e.type=a.MIDROLL,s=o._midrollsAds,o._toFillMidrollsAds||s&&s[0]&&e.timestamp===s[0].timestamp||o.clearMidrollsAdCache(),o._addMidrollsAdCache(e),o._processAdCallEnd(r),o._yvapBus.publish(i.AD_CALL_END,n,e)},r.prototype._processAdCallEnd=function(e){var t=this;t._toFillMidrollsAds&&(t._totalAdEnd++,e?t._failAdCount++:t._successAdCount++,t._toFillMidrollsAds&&t._totalAdEnd>=t._adsPerBreak&&(c("SuccessAdCount="+t._successAdCount+", failAdCount="+t._failAdCount),t._fillMidrollsAds()))},r.prototype._adFailureHandler=function(e,t,n,r){var o=this;e.type=a.MIDROLL,e.errorState=r,o._addMidrollsAdCache(e),o._processAdCallEnd(r),o._yvapBus.publish(i.AD_CALL_END,n,e)},r.prototype.startMidRollsFetchThread=function(e){var t=this,n=t._cacheManager.getPlayerDataForClipId(e),r=t._cacheManager.getAllocationForClipId(e);r&&n?(t.resetCDTBreak(),t._startFetchAds(r,n),t.midRollFetchThread=setInterval(function(){t._startFetchAds(r,n)},a.MIDROLL_PREFETCH_TIMER)):c("Allocation, playerdata missing")},r.prototype.stopMidRollsFetchThread=function(){var e=this;e._currentPlayerDataItem=null,e._currentCommunicatorAllocation=null,e.midRollFetchThread&&clearInterval(e.midRollFetchThread);for(var t=0;t<e._toUnsubscribe.length;t++){var n=e._toUnsubscribe[t];n()}},r.prototype.getMidrollsAds=function(e,t){var n,r=this,s=r._midrollsAds||[],l=[],p=r._cacheManager.getPlayerDataForClipId(e),u=[],_=-1,m=new o(a.MIDROLL,["clickable"]),v=r._cacheManager.getAllocationForClipId(e),y=null,f=r._cacheManager.getCuePointsForClipId(e),g=0,b=0,h=0,E=function(e){var t=3;for(var n in f)if(f[n]){var r=f[n].timeOffset;if(r=d.convertTimeToSeconds(r),e+t>=r&&r>=e-t)return f[n].breakId}return 0};u=s.map(function(e){return e.timestamp||-1}),_=Math.max.apply(null,u);var T=E(t),A=r.getCDTBreak();if(v&&p&&(f||p.hasLiveMidrolls)){y=v.pickCommunicator(m);var S,I=0;p.isLive?S=s.length:(S=a.MAX_VOD_ADS_MIDROLL,y&&(I=y.getSetting("adsPerBreak")),parseInt(I)>0&&(S=I),A===a.MARKETING_AD_BREAK&&S++);for(var L=0;S>L;L++){var M=L+1;if(r._yvapBus.publish(i.AD_OPPORTUNITY,e,a.MIDROLL,m,y,p,M),p.isLive||s.length>L&&s[L].timestamp===_){n=s[L],n.midrollbreak=T,n.midrolladsequence=M,n.midrollnumber=A;var C=n.adObj;C&&(C.type===a.AD?b++:C.type===a.NOAD?g++:C.type===a.VPAID&&h++),l.push(n)}}r._yvapBus.publish(i.AD_BREAK_SUBMITTED,e,a.MIDROLL,S,l.length,g,b,h,T),r.clearMidrollsAdCache()}return r.incrementCDTBreak(),c("AdsToSendToPlayer size="+l.length),v&&p&&(c("Start prefill next midroll ads cache"),r._startFetchAds(v,p)),l},r.prototype.clearMidrollsAdCache=function(){var e=this;e._midrollsAds=[]},r.prototype.updateMidrollsAdCache=function(e){var t=this;t._midrollsAds=e},r.prototype._addMidrollsAdCache=function(e){var t=this;t._midrollsAds.push(e),t._checkForVPAIDPreInit(e)},r.prototype.resetCDTBreak=function(){var e=this;e._cdtbreak=1},r.prototype.getCDTBreak=function(){var e=this;return e._cdtbreak},r.prototype.incrementCDTBreak=function(){var e=this;e._cdtbreak++}},{"../../../../lib/event-bus":"3ECu9u","../../../../lib/logger":"IS9j5T","../ads-json":100,"../allocation/CommunicatorSpec":103,"../common/Constants":108,"../common/Events":111,"../engine/AdSpec":139,"../yvap-util":154,"./AdResponse":114,"./CommunicatorFactory":118}],124:[function(e,t,n){"use strict";var r=e("./VASTParser"),i=e("./VMAPParser"),a=e("../common/Errors");n.parseAdXml=function(e){var t,r,i=null;if(!e)return null;e=n.cleanXml(e);try{t=n.parseXml(e,!0)}catch(o){throw new Error(a.XML_PARSING)}if(t.xml&&(r=t.xml.childNodes[0],i=n.parseDom(r)),"object"==typeof i&&null!==t.xmlParseErr)for(var s=0;s<i.length;s++)i[s].adXmlParseErr=t.xmlParseErr;
return i},n.cleanXml=function(e){return e&&(e=e.replace(/>\s+</g,"><"),e=e.replace(/<!--[\s\S]*?-->/g,"")),e},n.parseXml=function(e,t){var n=null,r=null;if("undefined"!=typeof DOMParser){n=(new DOMParser).parseFromString(e,"text/xml");var i=n.getElementsByTagName("parsererror");i.length&&(r="NonIE")}else"undefined"!=typeof ActiveXObject?(n=document.implementation.createDocument(),n.loadXML(e),0!==n.parseError&&(r="IE")):r="All";return t===!0?{xml:n,xmlParseErr:r}:n},n.parseDom=function(e){var t,r,i;if(!e)throw new Error(a.XML_PARSING);if(t=n.getParser(e),!t)throw i=e.nodeName,"parsererror"===i?new Error(a.XML_PARSING):new Error(a.NO_PARSER);return r=t.parse(e)},n.getParser=function(e){var t=e?e.nodeName:"";return"VAST"===t?r:t.indexOf("VMAP")>-1?i:null}},{"../common/Errors":110,"./VASTParser":131,"./VMAPParser":133}],125:[function(e,t,n){"use strict";function r(e){var t=this;t.key=t.getKey(),o.call(t,e)}t.exports=r;var i=e("../../util"),a=e("../../../../lib"),o=e("./MMECommunicator"),s=e("../common/Events"),l=e("../common/CookieUtil"),d=e("../yvap-util");i.inherits(r,o),r.prototype.getNewAd=function(e,t){var n,r=this;r.spec;if(a.isFunction(window.showAdInfo)&&r.subscribe(s.AD_READY,function(e){window.showAdInfo(e.adObj)}),a.isFunction(window.getAdXmlForPreview)){var i=window.getAdXmlForPreview();"tag"===i.type?(n=r.getNewAdResponseObject(e,i.value),r.fireRequest(i.value,n)):(n=r.getNewAdResponseObject(e),r.onAdCallSuccess(n,i.value))}},r.prototype.getKey=function(){return"preview-key"},r.prototype.setNewRedirect=function(e,t){var n=this;t.setNewRedirectUrl(e),e=n.fillMacros(e),n.fireRequest(e,t)},r.prototype.fillMacros=function(e){var t=this,n=t.spec;return e=e.replace("[CONTENT_WATCHED]",l.getTotalVideoLength()),e=e.replace("[CONTENT_CLIPS_WATCHED]",l.getTotalClipCount()),e=e.replace("[PLAYER_WIDTH]",n.getSetting("SlotWidth")),e=e.replace("[PLAYER_HEIGHT]",n.getSetting("SlotHeight")),e=e.replace("[TIMESTAMP]",d.getTimeStamp())},r.prototype.allowPrefetch=function(){return!0}},{"../../../../lib":"bRhrlU","../../util":"jJTEqU","../common/CookieUtil":109,"../common/Events":111,"../yvap-util":154,"./MMECommunicator":122}],126:[function(e,t,n){"use strict";function r(e){var t=this;a.call(t,e)}t.exports=r;var i=e("../../util"),a=e("./Communicator"),o=e("./Ad"),s=e("../common/Events"),l=e("../common/Constants"),d=e("../common/Errors"),c=e("../yvap-util"),p=(e("../common/CookieUtil"),e("./ParserManager")),u=["playback0","playback25","playback50","playback75","playback100"],_="csc.beap.bc.yahoo.com/yi";i.inherits(r,a),r.prototype.getNewAd=function(e,t,n){var r=this,i=r.getNewAdResponseObject(e,n);i.timestamp=(new Date).getTime()/1e3,r.key=r.getKey(e,t);try{n=r._expandMacros(n),r.fireRequest(n,i)}catch(a){r.publish(s.AD_FAILURE,i,r.key,r,a.message)}},r.prototype.prefetchAd=function(e,t,n){var r,i=this;if(e){i.key=i.getKey(t,n);var a="",o=e.adSources||[],l=o[0];if(l.vastAdData){r=i.getNewAdResponseObject(t);var c=l.vastAdData;l.adTagURI&&(a=l.adTagURI||"",o[1]&&(a=o[1].adTagURI||""),r.adTagURI=a);try{i._parseAdObjects(c),i.processAdObjects(r,c)}catch(p){i.publish(s.AD_FAILURE,r,i.key,i,p.message)}}else l.adTagURI?(r=i.getNewAdResponseObject(t,l.adTagURI),o[1]&&(a=o[1].adTagURI||""),r.adTagURI=a,i.fireRequest(l.adTagURI,r)):(r=i.getNewAdResponseObject(t),i.publish(s.AD_FAILURE,r,i.key,i,d.RESPONSE_GENERIC))}},r.prototype._parseAdObjects=function(e){var t,n,r,i,a,o,s,l,d,c=this;for(s=0;s<e.length;s++){for(t=e[s],l="impression",n=t.beacons[l]||[],o=0;o<n.length;o++)r=n[o],r.indexOf("csc.beap")>-1&&(c._parseCSCImpressionBeacon(t,r),r=r.replace(/eob\$/g,"cuuid${cuuid},eob$adb={ad_break}:sn={ad_sequence}:dur={duration}:pver={player_version}:"),n[o]=r);for(a=0;a<u.length;a++)for(l=u[a],n=t.beacons[l]||[],o=0;o<n.length;o++)r=n[o],r.indexOf("beap-bc")>-1&&(d=r.lastIndexOf("))"),d>-1&&(i=r.substring(0,d)+",{beap_client_event}))",n[o]=i));for(l="noadimpression",n=t.beacons[l]||[],o=0;o<n.length;o++)r=n[o],i=r.replace(/eob\$/g,"cuuid${cuuid},eob$yvap_code={err_code}:adb={ad_break}:sn={ad_sequence}:dur={duration}:dmn_1={initial_domain}:dmn_n={vendor_domain}:pver={player_version}:"),n[o]=i;for(l="errorimpression",n=t.beacons[l]||[],o=0;o<n.length;o++)r=n[o],r.indexOf(_)>-1&&n.splice(o,1);for(o=0;o<n.length;o++)r=n[o],i=r.replace(/\[ERRORCODE\]/g,"{err_code}"),n[o]=i}},r.prototype._parseCSCImpressionBeacon=function(e,t){for(var n=/([^,()]+),|([^,():]+)\)/g,r=t.match(n),i={},a=null,o=0,s=null,l=0;l<r.length;l++)a=r[l],o=a.length-1,a=","===a.charAt(o)||")"===a.charAt(o)?a.substr(0,o):a,s=a.split("$"),s=2===s.length?s:a.split("="),2===s.length&&(i[s[0]]=s[1]);e.position=i.ypos,e.bookingId=i.bi,e.creativeId=i.cr,e.impressionId=i.aid,e.serveTime=i.st,e.serveId=i.gid,e.spaceId=i.sp},r.prototype.setNewRedirect=function(e,t){var n=this;e=n._expandMacros(e),t.setNewRedirectUrl(e),n.fireRequest(e,t)},r.prototype._expandMacros=function(e){if(!e||0===e.length)return null;var t=c.getTimeStamp();return e=e.replace(/\[TIMESTAMP\]/g,t)},r.prototype.allowPrefetch=function(){return!0},r.prototype.getKey=function(e,t){var n=t.spaceId||"",r=t.licenseId||"",i=e.type||"";return"Refresh_"+n+"_"+i+"_"+r},r.prototype.processAdXml=function(e){var t=this,n=p.parseAdXml(e);if(n){if(n.adBreakMap){var r,i,a,s,d,c;r=n.adBreakMap.preroll||{};var u=r.adSources||[];if(i=u[0],!i){var _=new o;return _.adFormat="vmap",_.type=l.NOAD,[_]}a=i.vastAdData||[],s=r.trackingEvents||{},d=s.trackings||[];for(var m=0;m<d.length;m++)"breakStart"===d[m].event&&(c=d[m]);if(c)for(m=0;m<a.length;m++)a[m].addBeaconOfType(c.url,"ad-break-start");return a}return t._parseAdObjects(n),n}return n}},{"../../util":"jJTEqU","../common/Constants":108,"../common/CookieUtil":109,"../common/Errors":110,"../common/Events":111,"../yvap-util":154,"./Ad":113,"./Communicator":117,"./ParserManager":124}],127:[function(e,t,n){"use strict";function r(e,t){p.call(this,e,t)}t.exports=r;var i=e("../../util"),a=(e("../../../../lib/logger"),e("../../../../lib/event-bus"),e("./AdResponse"),e("../common/Events")),o=e("../common/Constants"),s=e("../engine/AdSpec"),l=e("./CommunicatorFactory"),d=e("../allocation/CommunicatorSpec"),c=e("../yvap-util"),p=(e("../ads-json"),e("./MidRollsHelper"));i.inherits(r,p);r.prototype._getNewAds=function(e,t){var n=this;if(e){var r=new s(o.MIDROLL,["clickable"]),i=n._getCommunicator(e);n._toFillMidrollsAds=t.hasLiveMidrolls,n._midrollPrefetchDuration=t.hasLiveMidrolls?t.liveMidrollsMaxDur:0,n._totalAdEnd=0,n._failAdCount=0,n._successAdCount=0,n._adsPerBreak=o.MIDROLL_DEFAULT_ADS_PER_BREAK,n._toUnsubscribe.push(i.subscribe(a.AD_READY,n._adReadyHandler,n)),n._toUnsubscribe.push(i.subscribe(a.AD_FAILURE,n._adFailureHandler,n));var l=n._cacheManager.getMidrollAdTagUri(t.clipId,o.MIDROLL);l=n._expandMacros(l),i.getNewAd(r,t,l)}},r.prototype._getCommunicator=function(e){var t=new d;return t.communicatorId=11,t.communicatorName="REFRESH",t.isFallback=!1,t.propertyMap=e.settingMap,t.propertyId=e.propertyId,l.getCommunicatorUsingSpec(t)},r.prototype._expandMacros=function(e){var t=this;e=e.replace("[CDT_BREAK]",t._cdtbreak);var n=c.getTimeStamp();return e=e.replace(/\[TIMESTAMP\]/g,n)}},{"../../../../lib/event-bus":"3ECu9u","../../../../lib/logger":"IS9j5T","../../util":"jJTEqU","../ads-json":100,"../allocation/CommunicatorSpec":103,"../common/Constants":108,"../common/Events":111,"../engine/AdSpec":139,"../yvap-util":154,"./AdResponse":114,"./CommunicatorFactory":118,"./MidRollsHelper":123}],128:[function(e,t,n){"use strict";function r(e,t){var n=this;n._beaconMap={},n._beaconMap[i.VIDEO_START]="playback0",n._beaconMap[i.VIDEO_QUARTILE_25]="playback25",n._beaconMap[i.VIDEO_QUARTILE_50]="playback50",n._beaconMap[i.VIDEO_QUARTILE_75]="playback75",n._beaconMap[i.VIDEO_QUARTILE_100]="playback100",n._beaconMap[i.VIDEO_VIEW]="impression",n._beaconMap[i.VIDEO_VIEW_3P]="impression3p",n._yvapBus=e,n._standaloneAdConfig=t,n._standaloneAdBeacons=t.beacons,n._standaloneAdResponse=null}t.exports=r;var i=e("../common/Constants");r.prototype.getAd=function(){var e=this;return e._standaloneAdResponse},r.prototype.addBeacons=function(e){var t,n,r,i=this;if(i._standaloneAdBeacons)for(var a in i._beaconMap)if(i._beaconMap.hasOwnProperty(a)&&(t=i._standaloneAdBeacons[a])){n=i._beaconMap[a];for(var o=0;o<t.length;o++)r=t[o],e.addBeaconOfType(r,n)}}},{"../common/Constants":108}],129:[function(e,t,n){"use strict";function r(e,t){var n,i,c,p=this,u=null;r.super_.call(p,e,t),p._standaloneAdXML=t.xml,n=new d,n.communicatorName=o.STANDALONE_GEMINI_BRX,c=new s(o.PREROLL,["clickable"]),i=new l(n),i&&(i.subscribe(a.AD_READY,p.prefetchCompleteHandler,p),i.subscribe(a.AD_FAILURE,p.prefetchFailureHandler,p),p._yvapBus.publish(a.AD_CALL_START,i),i.prefetchAd(p._standaloneAdXML,c,u,o.STANDALONE_GEMINI_BRX,parseInt(1e5*Math.random())))}t.exports=r;var i=e("../../util"),a=e("../common/Events"),o=e("../common/Constants"),s=e("../engine/AdSpec"),l=e("./Communicator"),d=e("../allocation/CommunicatorSpec"),c=e("./StandaloneAdHelper");i.inherits(r,c),r.prototype.prefetchCompleteHandler=function(e,t,n){var r=this;r._yvapBus.publish(a.AD_CALL_END,n,e),e&&e.adObj&&r.addBeacons(e.adObj),r._standaloneAdResponse=e},r.prototype.prefetchFailureHandler=function(e,t,n,r){}},{"../../util":"jJTEqU","../allocation/CommunicatorSpec":103,"../common/Constants":108,"../common/Events":111,"../engine/AdSpec":139,"./Communicator":117,"./StandaloneAdHelper":128}],130:[function(e,t,n){"use strict";function r(e,t){var n,i,a=this;r.super_.call(a,e,t),a._geminiConfig=t.gemini,a._rulesConfig=t.rules,n=o.constructAdResponse(a._geminiConfig,a._rulesConfig),i=n.adObj,i&&a.addBeacons(i),a._standaloneAdResponse=n}t.exports=r;var i=e("../../util"),a=e("./StandaloneAdHelper"),o=e("./GeminiNativeParser");i.inherits(r,a)},{"../../util":"jJTEqU","./GeminiNativeParser":121,"./StandaloneAdHelper":128}],131:[function(e,t,n){"use strict";function r(e,t,n){for(var r,i,a=e.childNodes,o=0;o<a.length;o++)r=a[o],i=t[r.nodeName],i&&i.call(void 0,n,r)}function i(e,t){var n={MediaFile:function(e,t){var n,r,i=t.getAttribute("type"),a=t.getAttribute("apiFramework"),o=t.getAttribute("delivery");n=t.getAttribute("bitrate")||100,n=parseInt(n,10),r=C.getTextFromNode(t),e.addMedia(i,n,r,o,a)}};r(t,n,e)}function a(e,t){var n={yahoo_video_ad_item:function(e,t){var n=t.getAttribute("name");n&&t.textContent&&e.addParamOfName(t.textContent,n)},yahoo_video_ad_beacon:function(e,t){var n=t.getAttribute("id");n&&t.textContent&&e.addBeaconOfType(t.textContent,n)},"#cdata-section":function(e,t){var n=e.adParameters||{};e.adParameters=n;var r=n.AdParameters||"";n.AdParameters=r+t.nodeValue},"#text":function(e,t){e.adParameters={AdParameters:t.nodeValue}}};r(t,n,e)}function o(e,t){var n={Tracking:function(e,t){var n,r=t.getAttribute("event");r&&t.textContent&&(n=O[r],n?e.addBeaconOfType(t.textContent,n):e.addBeaconOfType(t.textContent,r))}};r(t,n,e)}function s(e,t){var n={ClickThrough:function(e,t){t.textContent&&e.addParamOfName(t.textContent,"clickurl")},ClickTracking:function(e,t){var n=t.nodeName;n&&t.textContent&&e.addBeaconOfType(t.textContent,"clicktracking")}};r(t,n,e)}function l(e,t){var n={MediaFiles:i,AdParameters:a,TrackingEvents:o,VideoClicks:s,Duration:function(e,t){if(N.isNullOrUndefined(e.duration)){var n=C.getTextFromNode(t);e.duration=D.convertTimeToSeconds(n)}}};e.streams=[];for(var l in e.beacons)e.beacons.hasOwnProperty(l)&&"impression"!==l&&"errorimpression"!==l&&delete e.beacons[l];r(t,n,e)}function d(e,t){var n,r;e=e||{},t.textContent&&(n=t.getAttribute("creativeType")||"",r=t.textContent||"",e.resourceUrl=r.trim(),e.resourceType=n.trim())}function c(e,t){var n;e.nonLinearAd||{};t.textContent&&(n=t.textContent||"",n=n.trim(),e.addParamOfName(n,"clickurl"))}function p(e,t){var n={StaticResource:d,NonLinearClickThrough:c,AdParameters:a},i=e.nonLinearAd||{},o=t.getAttribute("width"),s=t.getAttribute("height"),l=t.getAttribute("scalable"),p=t.getAttribute("apiFramework");i.width=o,i.height=s,i.scalable=l,i.apiFramework=p,e.nonLinearAd=i,r(t,n,e),n={StaticResource:d},r(t,n,e.nonLinearAd)}function u(e,t){var n={TrackingEvents:o,NonLinear:p};r(t,n,e)}function _(e,t){e=e||{};t.textContent&&(e.companionClickThrough=t.textContent)}function m(e,t){var n,r;e=e||{},t.textContent&&(n=t.getAttribute("creativeType")||"",r=t.textContent||"",e.companionBannerSrc=r.trim(),e.companionMimeType=n)}function v(e,t){var n={},i=t.getAttribute("width"),a=t.getAttribute("height");n.companionWidth=i,n.companionHeight=a;var o=t.getElementsByTagName("StaticResource"),s=t.getElementsByTagName("IFrameResource"),l=t.getElementsByTagName("HTMLResource");o&&o.length>0?n.companionBannerType=R.STATIC_RESORUCE:s&&s.length>0?n.companionBannerType=R.IFRAME_RESORUCE:l&&l.length>0&&(n.companionBannerType=R.HTML_RESORUCE);var d={TrackingEvents:y,CompanionClickThrough:_,StaticResource:m,IFrameResource:m,HTMLResource:m};r(t,d,n),e.companion.push(n)}function y(e,t){var n={Tracking:function(e,t){var n=t.getAttribute("event");n&&t.textContent&&(e.companionImpression=t.textContent)}};r(t,n,e)}function f(e,t){var n={Companion:v};r(t,n,e)}function g(e,t){var n={Linear:l,CompanionAds:f,NonLinearAds:u};r(t,n,e),e.vastCreativeId||(e.vastCreativeId=t.getAttribute("id")||"")}function b(e,t){var n={Creative:g};r(t,n,e)}function h(e,t){var n=C.getTextFromNode(t);e.addBeaconOfType(n,"impression")}function E(e,t){var n,r,i,a,o,s=t.getAttribute("type");"SkipAd"===s?(n=t.childNodes[0],n&&"SkipDirective"===n.nodeName&&"2"===n.textContent&&(e.isSkippable=!0),r=t.childNodes[1],r&&"SkipBeacon"===r.nodeName&&r.textContent&&e.addBeaconOfType(r.textContent,"skip")):"CPCV"===s?(i=t.childNodes[0],i&&"Progress30SecBeacon"===i.nodeName&&i.textContent&&e.addBeaconOfType(i.textContent,"cpcv")):"CustomTracking"===s?(a=t.childNodes[0],a&&"NoAdImpression"===a.nodeName&&a.textContent&&e.addBeaconOfType(a.textContent,"noadimpression")):"YahooViewability"===s&&(o=t.childNodes[0],o&&"CustomTrackingViewableImpression"===o.nodeName&&o.textContent&&e.addBeaconOfType(o.textContent,"viewableimpression"))}function T(e,t){var n=C.getTextFromNode(t);e.addBeaconOfType(n,"errorimpression")}function A(e,t){var n={Extension:E};r(t,n,e)}function S(e,t){var n={VASTAdTagURI:function(e,t){e.redirectUrl=C.getTextFromNode(t),e.type="redirect"},Impression:h,Creatives:b,Extensions:A,Error:T,AdSystem:function(e,t){e.adSystem=C.getTextFromNode(t)}};r(t,n,e)}function I(e,t){var n={Impression:h,Creatives:b,Extensions:A,Error:T,AdSystem:function(e,t){e.adSystem=C.getTextFromNode(t)}};r(t,n,e)}function L(e,t){var n=t.getAttribute("fallbackfor"),i=t.getAttribute("id");i&&(e.adId=i),n&&(e.isFallback=!0,e.fallbackFor=n);var a={Wrapper:S,InLine:I};return r(t,a,e),e}var M=e("./Ad"),C=e("../../util"),N=e("../../../../lib"),D=e("../yvap-util"),R=e("../common/Constants"),O={start:"playback0",firstQuartile:"playback25",midpoint:"playback50",thirdQuartile:"playback75",complete:"playback100"};n.parse=function(e){var t,n=[];if(!e||"VAST"!==e.nodeName)return n;var i={Ad:function(e,t){e=new M,e.adFormat="vast",L(e,t),n.push(e)}};return r(e,i,t),0===n.length&&(t=new M,t.adFormat="vast",t.type=R.NOAD,n.push(t)),n}},{"../../../../lib":"bRhrlU","../../util":"jJTEqU","../common/Constants":108,"../yvap-util":154,"./Ad":113}],132:[function(e,t,n){"use strict";function r(){var e=this;e.adBreakMap={},e.version=""}function i(){var e=this;e.adSources=[],e.trackingEvents=null,e.timeOffset="",e.breakType=[],e.breakId="",e.repeatAfter="",e.extensions=null}function a(){var e=this;e.id="",e.allowMultipleAds=0,e.followRedirects=0,e.adTagURI="",e.customAdData="",e.vastAdData="",e.network="",e.sequence=0}function o(){var e=this;e.trackings=[]}function s(){var e=this;e.event="",e.url=""}function l(){var e=this;e.extensions=[],e.clientRules=null}function d(){var e=this;e.xml="",e.type="",e.data={}}t.exports={VMAPObject:r,AdBreak:i,AdSource:a,TrackingEvents:o,Tracking:s,Extensions:l,Extension:d}},{}],133:[function(e,t,n){"use strict";function r(e,t,n){for(var r,i,a=e.childNodes,o=0;o<a.length;o++)r=a[o],i=t[r.nodeName],i&&i.call(void 0,n,r)}function i(e,t){var n=new d.TrackingEvents,i={"vmap:Tracking":function(e,t){var n=new d.Tracking,r=t.getAttribute("event")||"";n.event=r,n.url=t.textContent,e.trackings.push(n)}};r(t,i,n),e.trackingEvents=n}function a(e,t){var n=new d.Extensions,i={ClientRules:o};r(t,i,n),e.extensions=n}function o(e,t){var n={},i={MinDuration:function(e,t){var n=t.textContent||0;e.MinDuration=n},StartAtClip:function(e,t){var n=t.textContent||0;e.StartAtClip=n},Frequency:function(e,t){var n=t.textContent||0;e.Frequency=n},Length:function(e,t){var n=t.textContent||0;e.Length=n},Offset:function(e,t){var n=t.textContent||0;e.Offset=n},AdDuration:function(e,t){var n=t.textContent||0;e.AdDuration=n},Repeat:function(e,t){var n=t.textContent||0;e.Repeat=n}};r(t,i,n),e.clientRules=n}function s(e,t){var n=new d.AdSource,i={"vmap:VASTAdData":function(e,t){var n=t.childNodes[0],r=c.getParser(n);e.vastAdData=r.parse(n)},"vmap:VASTData":function(e,t){var n=t.childNodes[0],r=c.getParser(n);e.vastAdData=r.parse(n)},"vmap:AdTagURI":function(e,t){e.adTagURI=t.textContent},"vmap:CustomAdData":function(e,t){e.customAdData=t.textContent}};r(t,i,n),n.network=t.getAttribute("network")||"";var a=t.getAttribute("seq")||"";a=parseInt(a),isNaN(a)?(n.sequence=1,e.adSources=[n]):(n.sequence=a,e.adSources[a-1]=n)}function l(e,t){var n=new d.AdBreak,o=t.getAttribute("breakId")||"";o.indexOf("pre")>-1?n.breakId="preroll":n.breakId=o,n.breakType=(t.getAttribute("breakType")||"").split(","),n.timeOffset=t.getAttribute("timeOffset")||"";var l={"vmap:AdSource":s,"vmap:TrackingEvents":i,"vmap:Extensions":a};r(t,l,n),e.adBreakMap[n.breakId]=n}var d=e("./VMAP"),c=e("./ParserManager");e("../yvap-util"),e("../common/Constants");n.parse=function(e){var t=null;if(!e||"vmap:VMAP"!==e.nodeName)return t;t=new d.VMAPObject;var n={"vmap:AdBreak":l};return r(e,n,t),t}},{"../common/Constants":108,"../yvap-util":154,"./ParserManager":124,"./VMAP":132}],134:[function(e,t,n){"use strict";var r=e("../common/Constants");n._isVpaid=function(e){var t=e.apiFramework||"";return t.toLowerCase()===r.VPAID},n._setType=function(e){var t=r.NOAD;if(e.nonLinearAd)t=r.OVERLAY;else if(e.streams&&e.streams.length>0){var i=e.streams,a=[],o=[];i.forEach(function(e){n._isVpaid(e)?o.push(e):a.push(e)}),a.length>0?(t=r.AD,e.streams=a):o.length>0&&(t=r.VPAID,e.streams=o)}e.type=t},n.validateAdObj=function(e){for(var t=[n._setType],r=0;r<t.length;r++)e=t[r](e)}},{"../common/Constants":108}],135:[function(e,t,n){"use strict";function r(e){var t=this;a.call(t,e)}t.exports=r;var i=e("../../util"),a=e("./Communicator"),o=(e("./ParserManager"),e("./AdResponse"),e("../common/Constants"),e("../common/Errors")),s=e("../common/Events");e("../yvap-util");i.inherits(r,a),r.prototype.getKey=function(e,t){var n=this,r=n.spec,i=r.communicatorName||"YAXv",a=t.clipId||"",o=e.type||"";return i+"_"+a+"_"+o},r.prototype.getNewAd=function(e,t){var n,r,i=this;if(r="https://na.ads.yahoo.com/yax/vdo?ve=1&si=370&tc=ac958c0f81cbb7a6&vdn=0&vdm=30&vfo=2&xmlVersion=xml_ver_2.0vast_wrapper,xml_ver_2.0vast&vpaidt=vpaidt_none&u=tumblr.com",i.key=i.getKey(e,t),r){r=r.replace("http:",location.protocol),n=i.getNewAdResponseObject(e,r);try{i.fireRequest(r,n)}catch(a){i.publish(s.AD_FAILURE,n,i.key,i,a.message)}}else n=i.getNewAdResponseObject(e),i.publish(s.AD_FAILURE,n,i.key,i,o.REQUEST_GENERIC)}},{"../../util":"jJTEqU","../common/Constants":108,"../common/Errors":110,"../common/Events":111,"../yvap-util":154,"./AdResponse":114,"./Communicator":117,"./ParserManager":124}],136:[function(e,t,n){"use strict";function r(){var e=this;e.actionValues=null,e.placement=null,e.ruleFunctions=[],e.cookieUtil=a}var i=e("../../../../lib"),a=e("../common/CookieUtil");e("../common/Constants");t.exports=r,r.evaluateDefault=function(){var e=this,t=e.cookieUtil.getTotalClipCount()+1,n=e.start||1;return t>=n},r.evaluateStart=function(){var e=this,t=e.cookieUtil.getTotalClipCount()+1,n=e.start||1;return t===n},r.evaluateOverlay=function(){var e,t,n,r,i=this,a=i.clipDuration,o=i.timeUpdate,s=i.overlayStart||0,l=i.repeat||0,d=i.lastShown||0,c=i.padding||0,p=i.duration||0;return d=d>=o?0:d,e=o-d,t=o-s,n=o+p+c,r=t>=0&&(!d||e>=l)&&a>=n,r&&(i.lastShown=o),r},r.evaluateFrequency=function(){var e=this,t=e.cookieUtil.getRecentClipCount(),n=e.interval||0;return t>=n||1===n},r.evaluateLength=function(){var e=this,t=e.length||0,n=e.cookieUtil.getRecentVideoLength();return n>=t},r.evaluateRatio=function(){var e=this,t=e.ratio||0,n=e.cookieUtil.getAdLength(),r=e.cookieUtil.getTotalVideoLength(),i=r/n;return!isNaN(i)&&i>=t},r.evaluateMinimumDuration=function(){var e=this,t=e.clipDuration||0,n=e.minimumDuration||0;return t>=n},r.evaluatefirstAdProbability=function(){var e=this,t=e.probability||100,n=100*Math.random(),r=e.cookieUtil.getTotalClipCount()+1,i=e.start||1;return r===i&&t>=n},r.prototype.addRuleFunction=function(e){var t=this;i.isFunction(e)&&t.ruleFunctions.push(e)},r.prototype.evaluate=function(e,t){var n=this,r=0,i=n.ruleFunctions,a=!0;for(n.clipDuration=e||0,n.timeUpdate=t||0,r=0;r<i.length;r++)a=a&&i[r].call(this);return a}},{"../../../../lib":"bRhrlU","../common/Constants":108,"../common/CookieUtil":109}],137:[function(e,t,n){"use strict";function r(){}var i=e("./ActionRule"),a=e("./RuleGroup"),o=e("./AdSpec");t.exports=r;var s={bumper:"clipGateway",preroll:"preroll",postroll:"postroll",overlay:"videoTimeline"};r.prototype.understandRules=function(e){if(!e||"{}"===JSON.stringify(e))return null;var t,n,r,o,s,l,d,c,p,u,_,m=this,v=new a,y=e.ruleGroup;for(t=y[0],o=t.actionRule2,!o||o instanceof Array||(s=o,o=[],o.push(s)),r=0;r<o.length;r++){for(s=o[r],l=new i,d=s["@basis"]||"",c=s["@type"]||"",p=s.actionParam||[],n=0;n<p.length;n++)u=p[n],"id"===u["@name"]?l.actionValues=(u["@value"]||"").split(","):"placement"===u["@name"]&&(l.placement=u["@value"]);"videoTimeline"===d?(l.type=d,m._parseNonLinearRules(l,s)):"triggers"===d&&(l.type=c,m._parseLinearRules(l,s)),_=v[l.type]||[],_.push(l)}return v},r.prototype._parseNonLinearRules=function(e,t){e&&t&&(e.start=parseInt(t["@startatclip"],10),e.duration=parseInt(t["@duration"],10),e.interval=parseInt(t["@intervalbetweenclips"],10),e.overlayStart=parseInt(t["@start"],10),e.padding=parseInt(t["@padding"],10),e.repeat=parseInt(t["@interval"],10),e.addRuleFunction(i.evaluateOverlay))},r.prototype._parseLinearRules=function(e,t){var n=this,r=!1,a=!1,o=!1,s=!1;if(e&&t){r="true"===t["@ratioEnabled"],a="true"===t["@minDurEnabled"],o="true"===t["@lengthEnabled"],s="true"===t["@firstAdProbabilityEnabled"],e.interval=parseInt(t["@interval"],10),e.start=parseInt(t["@start"],10),e.addRuleFunction(i.evaluateDefault),a&&(e.minimumDuration=parseInt(t["@minDuration"],10),e.addRuleFunction(i.evaluateMinimumDuration));var l;s?(e.probability=parseInt(t["@firstAdProbability"],10),l=i.evaluatefirstAdProbability):l=i.evaluateStart;var d;r?(e.ratio=parseInt(t["@ratio"],10),d=i.evaluateRatio):o?(e.length=parseInt(t["@length"],10),d=i.evaluateLength):d=i.evaluateFrequency,e.addRuleFunction(n._combineFunctions(l,d,"OR"))}},r.prototype._combineFunctions=function(e,t,n){var r=function(){return!1};return"AND"===n?r=function(){var n=this;return e.call(n)&&t.call(n)}:"OR"===n&&(r=function(){var n=this;return e.call(n)||t.call(n)}),r},r.prototype.onAdEvent=function(e,t,n,r){var i=(this.constructor,s[e]),a=null,l=null;return t&&t.preEvaluate&&(l=t.evaluate(i,n,r),l&&(a=new o(e,l.actionValues,l.placement,l.duration,l.subType))),a},r.prototype.preEvaluate=function(e,t){var n,r,i=(this.constructor,s[e]),a=[],l=null;if(t&&t.preEvaluate)for(l=t.preEvaluate(i),r=0;r<l.length;r++)n=l[r],a.push(new o(e,n.actionValues,n.placement));return a}},{"./ActionRule":136,"./AdSpec":139,"./RuleGroup":141}],138:[function(e,t,n){"use strict";function r(){var e=this;i.call(e)}var i=e("./AdEngine"),a=e("./RuleGroup"),o=e("./ActionRule"),s=e("../../util");t.exports=r,s.inherits(r,i);var l={bumper:"clipGateway",preroll:"preroll",postroll:"postroll",overlay:"videoTimeline",midroll:"immediate"};r.prototype.understandRules=function(e){var t=this,n=new a,r=e.adBreakMap||{};for(var i in r)if(r.hasOwnProperty(i)){var s=r[i],d=l[i],c=n[d],p=s.extensions||{},u=p.clientRules;if(u){var _=new o;_.type=d,"videoTimeline"===d?t._parseNonLinearRules(_,u):t._parseLinearRules(_,u),c.push(_)}}return n},r.prototype._parseNonLinearRules=function(e,t){e&&t&&(e.start=parseInt(t.StartAtClip,10),e.duration=parseInt(t.AdDuration,10),e.interval=parseInt(t.Frequency,10),e.overlayStart=parseInt(t.Offset,10),e.repeat=parseInt(t.Repeat,10),e.placement="bottom",e.addRuleFunction(o.evaluateOverlay))},r.prototype._parseLinearRules=function(e,t){var n=this,r=function(){return!0};e.addRuleFunction(o.evaluateDefault);var i=t.MinDuration>0,a=t.Length>0,s=t.Frequency>0,l=t.StartAtClip>0;i&&(e.minimumDuration=parseInt(t.MinDuration,10),e.addRuleFunction(o.evaluateMinimumDuration));var d=o.evaluateStart;l&&(e.start=parseInt(t.StartAtClip,10));var c;a?(e.length=60*parseInt(t.Length,10),c=o.evaluateLength):s?(e.interval=parseInt(t.Frequency,10),c=o.evaluateFrequency):c=r,e.addRuleFunction(n._combineFunctions(d,c,"OR"))}},{"../../util":"jJTEqU","./ActionRule":136,"./AdEngine":137,"./RuleGroup":141}],139:[function(e,t,n){"use strict";function r(e,t,n,r,i){var a=this;a.type=e||"",a.actionValues=t||[],a.placement=n||"",a.adCallSequence=1,a.duration=r||0,a.adCount=0,a.fallbackParam=!0,a.adIdBeacon=0,a.subType=i}t.exports=r},{}],140:[function(e,t,n){"use strict";function r(e,t){var n=this;n.actionValues=null,n.placement=null,n.ruleFunctions=[],n.cookieUtil=a,n.nfl_free_time=e,n.nfl_session_time=t,n.subType=""}var i=e("../../util"),a=e("../common/CookieUtil"),o=e("../common/Constants"),s=e("./ActionRule");i.inherits(r,s),t.exports=r,r.prototype._evaluateNFLPreroll=function(){var e=this,t=parseInt(e.cookieUtil.getNFLVideoLength(),10);return t>=e.nfl_free_time},r.prototype._isNFLSessionExpired=function(){var e=this,t=parseInt(e.cookieUtil.getNFLSession(),10);return(new Date).getTime()/1e3-t>=e.nfl_session_time},r.prototype.evaluate=function(){var e=this;return e._isNFLSessionExpired()?(e.actionValues=["clickable"],e.subType=o.NFL_ONLOAD,!0):e._evaluateNFLPreroll()?(e.actionValues=["clickable"],e.subType=o.NFL_PREROLL,!0):!1}},{"../../util":"jJTEqU","../common/Constants":108,"../common/CookieUtil":109,"./ActionRule":136}],141:[function(e,t,n){"use strict";function r(){var e=this;e.preroll=[],e.clipGateway=[],e.videoTimeline=[],e.postroll=[],e.immediate=[]}t.exports=r;e("./ActionRule.js");r.prototype.evaluate=function(e,t,n){var r,i,a=this,o=a[e]||[],s=null;for(i=0;i<o.length;i++)r=o[i],r.type===e&&r.evaluate(t,n)&&(s=r);return s},r.prototype.preEvaluate=function(e){var t=this;return t[e]||[]}},{"./ActionRule.js":136}],142:[function(e,t,n){"use strict";var r=function(e,t,n){var r,i,a,o,s,l,d=100,c=0,p=null,u=[],_=e.length;for(o=n+1;_>=o;o++){for(r=0,i=[],a=0,l=-1,s=n;_>s&&(c++,r+=e[s],a=r-t,i.push(s),!(a>=0));s=o+l)l++;if((null===p||a>=0&&p>=a)&&(p=a,u=i),0===p||c>d)break}return{indexCombo:u,exceed:p}},i=function(e,t){var n,i,a=null,o=[],s=[],l=[],d=[];for(e.sort(function(e,t){var n=e&&e.adObj&&parseInt(e.adObj.duration,10)||NaN,r=t&&t.adObj&&parseInt(t.adObj.duration,10)||NaN;return isNaN(n)&&(n=0),isNaN(r)&&(r=0),n-r}),l=e.map(function(e){var t=e&&e.adObj&&parseInt(e.adObj.duration,10)||NaN;return isNaN(t)&&(t=0),t}),n=0;n<l.length&&(s=r(l,t,n),(null===a||s.exceed>=0&&s.exceed<=a)&&(a=s.exceed,o=s.indexCombo),0!==a);n++);for(i=0;i<o.length;i++)d.push(e[o[i]]);return d};t.exports={findBestCombination:i}},{}],143:[function(e,t,n){"use strict";function r(e,t){var n,r=/\{(\w)+\}/g;return n=e.replace(r,function(e){var n,r=/(\w)+/g,i=e.match(r),a=i[0],o="";if("beap_client_event"===a.toLowerCase()){for(var s in t)t.hasOwnProperty(s)&&(o+=s+"$"+t[s]+",");return o=o.substring(0,o.length-1)}return"1x1pixel"===a.toLowerCase()?"http://ads.yimg.com/a/a/vdo/a/1x1.gif":(n=t[a],(null===t[a]||void 0===t[a])&&(n=e),n)})}function i(e,t){for(var n,r=[],i=0;i<e.length;i++)n=c.expandGeminiBeaconMacro(e[i],t),s.sendImageBeacon(n),r.push(n);return r}function a(e,t){for(var n,i=[],a=0;a<e.length;a++)n=e[a],n=r(n,t),s.sendImageBeacon(n),i.push(n);return i}function o(e,t){var n=e.adObj,r=n.beacons.impression||[],i=e.midrollbreak||0,o=e.midrolladsequence||0,s=n.duration||0,l=[];return l=l.concat(a(r,{cuuid:t,player_version:"nextgen",ad_break:i,ad_sequence:o,duration:s})),n.beacons.impression=null,l}var s=e("../../util"),l=e("../common/Errors"),d=e("../common/Constants"),c=e("../yvap-util"),p={};p[d.NOAD]=125,p[l.AD_CALL_TIMEOUT]=102,p[l.EMPTY_RESPONSE]=5122,p[l.XML_PARSING]=108,p[l.NO_PARSER]=5125,p[l.MISSING_ADTGT]=122,p[l.PLAYER_TIMEOUT]=105,p[l.REQUEST_GENERIC]=104,p[l.INCOMPATIBLE_MEDIA]=120,p[l.MEDIA_PLAYBACK]=114,p[l.ADBLOCKER]=124,p[l.SSL_MISMATCH]=121,p[l.VPAID_TIMEOUT]=127,p[l.RESPONSE_GENERIC]=5130,p[l.VPAID_SWF_DOWNLOAD_ERROR]=8121;var u={};u[d.NOAD]=303,u[l.AD_CALL_TIMEOUT]=301,u[l.EMPTY_RESPONSE]=912,u[l.XML_PARSING]=100,u[l.NO_PARSER]=101,u[l.MISSING_ADTGT]=913,u[l.PLAYER_TIMEOUT]=402,u[l.REQUEST_GENERIC]=900,u[l.INCOMPATIBLE_MEDIA]=200,u[l.MEDIA_PLAYBACK]=405,u[l.VPAID_TIMEOUT]=901,n.onAdProgress=function(e,t,n,r,s){var l=e.adObj,c=l.isSkippable?2:1;n=Math.floor(n),t=Math.round(t);var p,u=25*Math.floor(4*t/n),_="playback"+u,m=l.adFormat===d.STANDALONE_GEMINI_NATIVE,v=[];if(m)p=l.beacons[_]||[],v=v.concat(i(p,r)),l.beacons[_]=null;else{var y=l.type===d.VPAID;y||(0===u&&null!==l.beacons.impression&&(v=v.concat(o(e,s))),p=l.beacons[_]||[],r.ad_dur=n,r.s=c,v=v.concat(a(p,r)),l.beacons[_]=null),t>=30&&(p=l.beacons.cpcv||[],v=v.concat(a(p,{ad_dur:n,s:c})),l.beacons.cpcv=null)}return v},n.onVPAIDAdQuartile=function(e,t,n,r){var i=e.adObj,o=i.isSkippable?2:1,s="playback"+t,l=i.beacons[s]||[];n=Math.floor(n),r.ad_dur=n,r.s=o;var d=[];return d=d.concat(a(l,r)),i.beacons[s]=null,d},n.onAdStart=function(e,t,n){var r=e.adObj,i=[],s=r.type===d.VPAID,l=r.type===d.OVERLAY;(s||l)&&(i=i.concat(o(e,n)));var c=r.beacons.bitrate||[];return i=i.concat(a(c,{type:"bitrate",value:t})),r.beacons.bitrate=null,c=r.beacons.creativeview||[],i=i.concat(a(c,{}))},n.onAdBreakStart=function(e){var t=e.adObj,n=[];if(t&&t.beacons){var r=t.beacons["ad-break-start"]||[];n=n.concat(a(r)),t.beacons["ad-break-start"]=null}return n},n.onAdClick=function(e,t,n){var r,i=e.adObj,o=i.beacons.interaction||[],s=i.beacons.clicktracking||[],l=o.concat(s),d=Math.floor(t||10),c=[];return r=(i.params.clickCount||0)+1,i.params.clickCount=r,c=c.concat(a(l,{type:"click",time:d,seq:r}))},n.onNoAd=function(e,t){var n,r,i,o,l=e.redirectList.length,c=l>0,_=e.adObj,m=[],v=s.parseDomain(e.redirectList[0]||"")||"",y=s.parseDomain(e.redirectList[l-1]||"")||"",f=e.midrollbreak||0,g=e.midrolladsequence||0,b=_.duration||0;return _=e.adObj||{},c||_.type!==d.NOAD?(r=e.errorState||_.type,i=p[r]||r,o=u[r],n=_.beacons.noadimpression||[],m=m.concat(a(n,{err_code:i,initial_domain:v,vendor_domain:y,cuuid:t,player_version:"nextgen",ad_break:f,ad_sequence:g,duration:b})),_.beacons.noadimpression=null,n=_.beacons.errorimpression||[],m=m.concat(a(n,{err_code:o})),_.beacons.errorimpression=null):(n=_.beacons.impression||[],m=m.concat(a(n,{cuuid:t,player_version:"nextgen",ad_break:f,ad_sequence:g,duration:b})),_.beacons.impression=null),m},n.onCompanionDisplayed=function(e){a(e,{})}},{"../../util":"jJTEqU","../common/Constants":108,"../common/Errors":110,"../yvap-util":154}],144:[function(e,t,n){"use strict";function r(){var e=this;e.bumper=null,e.preroll=null,e.midroll=null,e.postroll=null}function i(){var e=this;e.adOppEvents=[],e.adCallEvents=[],e.adDeliveryEvents=[]}function a(){var e=this;e.playContext="",e.networkName="",e.adPosition="none",e.subType="",e.taken=!1}function o(){var e=this;e.responseCode="",e.responseType="",e.firstRedirect="",e.redirectCount=0,e.adCallSequence=0,e.networkName="",e.creativeId="",e.bookingId="",e.cacheHit="",e.cacheId="",e.latency=null,e.clipStarted=!1,e.midrollAdBreak="",e.midrollAdPos="",e.adSystem="",e.br_id=""}function s(){
var e=this;e.mediaStartLatency=null,e.serveId=null,e.error=""}function l(){}function d(){var e=this;e._latency=-1}function c(e,t,n,r){var i=this;i._yvapBus=e,i.yvapVersion=t||"default",i.accountId=n||"test",i.playerTimeout=r,i._adProfileMap={},i._allStats={},i._clipStartBoolean={},i._archiveStats={},i._yvapBus.subscribe(u.BEGIN_AD_EXP,i._onBeginAdExperience,i),i._yvapBus.subscribe(u.AD_OPPORTUNITY,i._onAdOpportunity,i),i._yvapBus.subscribe(u.NULL_AD_OPPORTUNITY,i._onNullAdOpportunity,i),i._yvapBus.subscribe(u.AD_CALL_START,i._onAdCallStart,i),i._yvapBus.subscribe(u.AD_CALL_END,i._onAdCallEnd,i),i._yvapBus.subscribe(u.AD_SUBMITTED,i._onAdSubmitted,i),i._yvapBus.subscribe(u.AD_DELIVERED,i._onAdDelivered,i),i._yvapBus.subscribe(u.AD_DELIVERY_ERROR,i._onAdDeliveryError,i),i._yvapBus.subscribe(u.VIDEO_START,i._onContentVideoStart,i),i._yvapBus.subscribe(u.VIDEO_END,i._onContentVideoEnd,i),i._yvapBus.subscribe(u.AD_BREAK_ENDED,i._midRollEnd,i),i._yvapBus.subscribe(u.AD_BREAK_SUBMITTED,i._onAdBreakSubmission,i),i._yvapBus.subscribe(u.VPAID_AD_RENDERED,i._onVpaidAdRendered,i),i._yvapBus.subscribe(u.VPAID_AD_STARTED,i._onVpaidAdStarted,i)}var p=e("../../util"),u=e("../common/Events"),_=e("../common/Errors"),m=e("../common/Constants");t.exports=c;var v={};v[m.NOAD]=2,v[m.AD]=2,v[m.VPAID]=4,v.ERROR=106;var y={};y[m.NOAD]=1,y[m.AD]=2,y[m.VPAID]=2,y[_.AD_CALL_TIMEOUT]=102,y[_.EMPTY_RESPONSE]=5122,y[_.XML_PARSING]=108,y[_.NO_PARSER]=5125,y[_.MISSING_ADTGT]=122,y[_.PLAYER_TIMEOUT]=105,y[_.REQUEST_GENERIC]=104,y[_.THIRD_PARTY_NO_AD]=125,y[_.SSL_MISMATCH]=121,y[_.MISSING_SPACEID]=131,y[_.RESPONSE_GENERIC]=5130,y[_.ADBLOCKER]=124,y[_.BRX_WITHOUT_FLASH]=750;var f={};f[m.CACHE_L0]=1,f[m.CACHE_L1]=2,f[m.CACHE_L2]=3;var g=[m.PREROLL,m.BUMPER,m.CLIP_START,m.MIDROLL,m.POSTROLL,m.CLIP_END],b={};b[_.INCOMPATIBLE_MEDIA]=120,b[_.MEDIA_PLAYBACK]=114,b[_.GENERIC]=112,b[_.VPAID_TIMEOUT]=115,b[_.ADBLOCKER]=124,b[_.VPAID_SWF_DOWNLOAD_ERROR]=8121;var h={};h[m.NOAD]=125,h[_.AD_CALL_TIMEOUT]=102,h[_.EMPTY_RESPONSE]=124,h[_.XML_PARSING]=108,h[_.MISSING_ADTGT]=122,h[_.PLAYER_TIMEOUT]=105,h[_.REQUEST_GENERIC]=104,h[_.INCOMPATIBLE_MEDIA]=120,h[_.MEDIA_PLAYBACK]=114,h[_.VPAID_TIMEOUT]=127;var E=1,T=2;o.prototype.translate=function(e){var t,n,r,i=this;e&&(t=e.adObj||{},e.errorState?i.responseType=v.ERROR:t.type&&(i.responseType=v[t.type]),n=e.errorState||t.type,i.responseCode=y[n]||"",i.firstCall=p.parseDomain(e.firstCall)||"",i.firstRedirect=p.parseDomain(e.redirectList[0])||"",i.redirectCount=e.redirectList.length,n===m.NOAD&&i.redirectCount>0&&(i.responseCode=y[_.THIRD_PARTY_NO_AD]),r=e.cacheState||"",i.cacheHit=f[r]||"",i.vastCreativeId=t.vastCreativeId,i.brxAuctionId=t.brxAuctionId,i.creativeId=t.creativeId||"",i.bookingId=t.bookingId||"",i.adSystem=t.adSystem||"",i.adId=t.adId||"",i.adXmlParseErr=t.adXmlParseErr||"",e.type===m.MIDROLL&&(i.midrollAdBreak=e.midrollbreak,i.midrollAdPos=e.midrolladsequence))},d.prototype.start=function(){var e=this;e._startTime=(new Date).getTime()},d.prototype.end=function(){var e=this;e._startTime&&(e._latency=(new Date).getTime()-e._startTime)},d.prototype.getLatency=function(){var e=this;return e._latency},d.prototype.getStartTime=function(){var e=this;return e._startTime},c.prototype._onBeginAdExperience=function(e){var t=this;e&&(t._clipStartBoolean[e]=!1,t._allStats[e]=null)},c.prototype._onNullAdOpportunity=function(e,t){var n=this,r=new a;r.adPosition=t,r.taken=T,n._fireAdOpportunity(r)},c.prototype._onAdOpportunity=function(e,t,n,r,i,o){var s,l=this,d=null!==n&&null!==r,c=new a;o||(o=0),c.adPosition=t,n&&(c.subType=n.subType||t),i&&(c.playContext=i.licenseId),r&&(c.networkName=r.communicatorName),c.taken=d?E:T,e&&(s=l._getPositionStats(e,t),s.adOppEvents[o]=c)},c.prototype._onAdCallStart=function(e){var t,n,r=this;e&&(t="adCall"+Math.floor(100*Math.random())+(new Date).getTime(),n=new d,n.start(),r._adProfileMap[t]=n,e.adCallIdentifier=t)},c.prototype._onAdCallEnd=function(e,t){var n,r,i=this;e&&t&&(n=e.adCallIdentifier||"",r=i._adProfileMap[n],r&&(r.end(),t.adCallIdentifier=n))},c.prototype._onAdSubmitted=function(e,t){var n,r,i,a,s,l,d,c,p=this,u=0;t&&e&&(n=t.adCallIdentifier,s=t.type,a=p._adProfileMap[n],d=t.communicatorSpec,c=t.adSpec,s===m.MIDROLL&&(u=t.midrolladsequence),r=new o,r.position=s,l=p._getPositionStats(e,s),l.adCallEvents[u]=r,r.latency=a?a.getLatency():0,r.startTime=a?a.getStartTime():0,r.clipStarted=p._clipStartBoolean[e]?E:T,r.adCallSequence=c.adCallSequence,r.networkName=d.communicatorName,r.translate(t),r.br_id=t.br_id||"",p._clipStartBoolean[e]&&s!==m.MIDROLL&&(l=p._getArchivedPositionStats(e,s),l&&(i=l.adOppEvents[u],l.adCallEvents[u]=r,p._fireAdCall(i,r))))},c.prototype._onAdBreakSubmission=function(e,t,n,r,i,a,o,s){var l,d=this;n=n||0,r=r||0,i=i||0,a=a||0,o=o||0,s=s||0,e&&t===m.MIDROLL&&(l={evt:"ad_mbrk",adbrk:s,n_adopp:n,n_adsub:r,n_noad:i,n_ads:a,n_vpads:o,tmout_ms:d.playerTimeout,yvap:!0},d._yvapBus.publish(u.AD_METRIC,{ult:l}))},c.prototype._getArchivedPositionStats=function(e,t){var n,r=this;return n=r._archiveStats[e],n?n[t]:null},c.prototype._getPositionStats=function(e,t){var n,a,o=this;return n=o._allStats[e]||new r,o._allStats[e]=n,a=n[t]||new i,n[t]=a,a},c.prototype._archivePositionStats=function(e,t,n){var a,o,s,l,d,c,p=this;n=n||0,a=p._allStats[e],s=a[t],a[t]&&(l=a[t].adOppEvents[n],c=a[t].adDeliveryEvents[n],d=a[t].adCallEvents[n],a[t].adOppEvents[n]=null,a[t].adCallEvents[n]=null,a[t].adDeliveryEvents[n]=null),o=p._archiveStats[e]||new r,o[t]=o[t]||new i,l&&(o[t].adOppEvents[n]=l),l&&(o[t].adCallEvents[n]=d),l&&(o[t].adDeliveryEvents[n]=c),p._archiveStats[e]=o},c.prototype._fireForPrecedingPositions=function(e,t){for(var n,r,i,a=this,o=0;o<g.length&&g[o]!==t;o++){if(n=a._getPositionStats(e,g[o]))for(var s=0;s<n.adOppEvents.length;s++)r=n.adOppEvents[s],i=n.adCallEvents[s],a._fireAdOpportunity(r,i),a._fireAdCall(r,i);a._archivePositionStats(e,g[o])}},c.prototype._onAdDelivered=function(e,t,n,r,i,a,o,l,d,c){var p,_,v,y,f,g,b=this,h=i||0,E=a||0,T=o||0,A=l||0,S=d||0,I=c||0,L=0,M=0;if(b._fireForPrecedingPositions(e,t),r&&(M=r.adObj.duration||0),r&&r.type===m.MIDROLL&&(L=r.midrolladsequence),e&&t){if(v=new s,v.mediaStartLatency=n,r&&r.adObj&&r.adObj.serveId&&(v.serveId=r.adObj.serveId),p=b._getPositionStats(e,t),_=b._getArchivedPositionStats(e,t),p.adDeliveryEvents[L]=v,y=p.adOppEvents[L],f=p.adCallEvents[L],b._fireAdOpportunity(y,f),b._fireAdCall(y,f),_&&(y=y||_.adOppEvents[L],f=f||_.adCallEvents[L]),y&&f&&(g={evt:"ad_dlv",ntwk:f.networkName,pos:y.adPosition,f_hop:f.firstRedirect,n_hop:f.redirectCount,acct_id:b.accountId,r_code:f.responseCode,r_type:f.responseType,crid:f.creativeId,bkid:f.bookingId,cchit:f.cacheHit,ms_lat:v.mediaStartLatency,adseq:f.adCallSequence,mrtime:f.midrollAdBreak,duration:M,subt:y.subType,mrpos:f.midrollAdPos,tmout_ms:b.playerTimeout,vsl:h,vil:E,vst:T,s_vsl:A,s_vil:S,s_vst:I,serv_id:v.serveId,adid:f.adId,ad_xml_err:f.adXmlParseErr,v_cr_id:f.vastCreativeId,auc_id:f.brxAuctionId||"na",ad_sys:f.adSystem,f_call:f.firstCall,yvap:!0},b._yvapBus.publish(u.AD_METRIC,{ult:g}),window.showLatencies)){var C={vsl:h,vil:E,vst:T,aml:v.mediaStartLatency};window.showLatencies(C,!0)}b._archivePositionStats(e,t,L)}},c.prototype._onAdDeliveryError=function(e,t,n,r,i,a,o){var l,d,c,p,v,y,f=this,g=0;n!==m.NOAD&&(f._fireForPrecedingPositions(e,t),r&&r.type===m.MIDROLL&&(g=r.midrolladsequence),e&&t&&(c=new s,c.error=n||_.GENERIC,v=f._getPositionStats(e,t),y=f._getArchivedPositionStats(e,t),v.adDeliveryEvent=c,l=v.adOppEvents[g],d=v.adCallEvents[g],f._fireAdOpportunity(l,d),f._fireAdCall(l,d),y&&(l=l||y.adOppEvents[g],d=d||y.adCallEvents[g]),l&&d&&(p={evt:"ad_err",ntwk:d.networkName,pos:l.adPosition,f_hop:d.firstRedirect,n_hop:d.redirectCount,acct_id:f.accountId,r_code:d.responseCode,r_type:d.r_type,crid:d.creativeId,bkid:d.bookingId,a_dlv_err:b[c.error],adseq:d.adCallSequence,subt:l.subType,mrtime:d.midrollAdBreak,mrpos:d.midrollAdPos,tmout_ms:f.playerTimeout,vsl:i,vil:a,vpaidS:o,adid:d.adId,serv_id:c.serveId,ad_xml_err:d.adXmlParseErr,v_cr_id:d.vastCreativeId,auc_id:d.brxAuctionId||"na",ad_sys:d.adSystem,f_call:d.firstCall,yvap:!0},f._yvapBus.publish(u.AD_METRIC,{ult:p})),f._archivePositionStats(e,t,g)))},c.prototype._onVpaidAdRendered=function(e,t,n){var r,i,a,o=this,s=0;n&&n.type===m.MIDROLL&&(s=n.midrolladsequence),e&&t&&(r=o._getPositionStats(e,t),i=r.adOppEvents[s],a=r.adCallEvents[s],o._fireAdOpportunity(i,a),o._fireAdCall(i,a),o._archivePositionStats(e,t,s))},c.prototype._onVpaidAdStarted=function(e,t,n){var r,i,a,o,s,d,c=this,p=0,_=0;n&&(_=n.adObj.duration||0),n&&n.type===m.MIDROLL&&(p=n.midrolladsequence),e&&t&&(a=new l,n&&n.adObj&&n.adObj.serveId&&(a.serveId=n.adObj.serveId),r=c._getPositionStats(e,t),i=c._getArchivedPositionStats(e,t),r.adStartEvents=a,o=r.adOppEvents[p],s=r.adCallEvents[p],i&&(o=o||i.adOppEvents[p],s=s||i.adCallEvents[p]),o&&s&&(d={evt:"ad_beg",ntwk:s.networkName,pos:o.adPosition,subt:o.subType,f_hop:s.firstRedirect,n_hop:s.redirectCount,acct_id:c.accountId,r_code:s.responseCode,r_type:s.responseType,crid:s.creativeId,bkid:s.bookingId,cchit:s.cacheHit,adseq:s.adCallSequence,mrtime:s.midrollAdBreak,mrpos:s.midrollAdPos,duration:_,tmout_ms:c.playerTimeout,serv_id:a.serveId,adid:s.adId,ad_xml_err:s.adXmlParseErr,v_cr_id:s.vastCreativeId,auc_id:s.brxAuctionId||"na",ad_sys:s.adSystem,f_call:s.firstCall,yvap:!0},c._yvapBus.publish(u.AD_METRIC,{ult:d})),c._archivePositionStats(e,t,p))},c.prototype._onContentVideoStart=function(e){var t=this;t._clipStartBoolean[e]=!0,t._fireForPrecedingPositions(e,m.CLIP_START)},c.prototype._midRollEnd=function(e){var t=this;t._clipStartBoolean[e]=!0,t._fireForPrecedingPositions(e,m.POSTROLL)},c.prototype._onContentVideoEnd=function(e){var t=this;t._fireForPrecedingPositions(e,m.CLIP_END)},c.prototype._fireAdOpportunity=function(e,t){var n,r=this,i=t&&t.adSystem?t.adSystem:"";e&&(n={evt:"ad_oppty",pos:e.adPosition,ntwk:e.networkName,acct_id:r.accountId,tmout_ms:r.playerTimeout,subt:e.subType,taken:e.taken,ad_sys:i,yvap:!0},r._yvapBus.publish(u.AD_METRIC,{ult:n}))},c.prototype._fireAdCall=function(e,t){var n,r,i=this;if(e&&t&&(r=t.clipStarted?E:T,n={evt:"ad_call",ntwk:t.networkName,pos:e.adPosition,f_hop:t.firstRedirect,n_hop:t.redirectCount,acct_id:i.accountId,r_code:t.responseCode,r_type:t.responseType,tmout:t.clipStarted,adl:t.latency,s_adl:t.startTime,crid:t.creativeId,bkid:t.bookingId,cchit:t.cacheHit,lms_id:e.playContext,adseq:t.adCallSequence,subt:e.subType,tmout_ms:i.playerTimeout,adblock:m.ADBLOCKER,ad_sys:t.adSystem,br_id:t.br_id,adid:t.adId,ad_xml_err:t.adXmlParseErr,v_cr_id:t.vastCreativeId,auc_id:t.brxAuctionId||"na",f_call:t.firstCall,yvap:!0},i._yvapBus.publish(u.AD_METRIC,{ult:n}),window.showLatencies)){var a={adl:t.latency};window.showLatencies(a)}},c.prototype.getArchive=function(){var e=this;return e._archiveStats}},{"../../util":"jJTEqU","../common/Constants":108,"../common/Errors":110,"../common/Events":111}],145:[function(e,t,n){"use strict";function r(){var e=this;e.diagnostic=null,e._submittedAds={}}function i(e,t,n){var r=this,i=n.adObj||{};r._adObj=i,r.clipId=e,r.playbackId=t,r.position=n.type,r.firstCall=n.firstCall,r.redirectList=[].concat(n.redirectList),r.errorState=n.errorState,r.vastCreativeId=i.vastCreativeId,r.creativeId=i.creativeId,r.bookingId=i.bookingId,r.type=i.type,r.adId=i.adId,r.duration=i.duration,r.AdParameters=i.adParameters&&i.adParameters.AdParameters,r.streams=i.streams,r.adstate=l.UNPLAYED,r.adstateData={},r.updateState=function(e,t){(r.adstate===l.UNPLAYED||r.adstate===l.PLAYING)&&(r.adstate=e,r.adstateData[e]=t)}}var a=e("../../views/ads-diagnostics.html"),o=e("../../util"),s=e("../common/Constants"),l={UNPLAYED:"unplayed",PLAYING:"playing",ENDED:"ended",ERROR:"error",CANCELLED:"cancelled"};t.exports=r,t.exports.ADSTATES=l,r.prototype.generateDiagnostics=function(e){var t=this,n=[];for(var r in e)if(e.hasOwnProperty(r)){var i={};i.clipId=r;var l=e[r];i.data=[];var d={};d.position=s.PREROLL,d.data=t._generatePositionStat(l.preroll),i.data.push(d);var c={};c.position=s.BUMPER,c.data=t._generatePositionStat(l.bumper),i.data.push(c);var p={};p.position=s.MIDROLL,p.data=t._generatePositionStat(l.midroll),i.data.push(p);var u={};u.position=s.POSTROLL,u.data=t._generatePositionStat(l.postroll),i.data.push(u),n.push(i)}var _;return n&&(_=o.render(a,{clipStats:n})),_},r.prototype._generatePositionStat=function(e){var t=[];if(e)for(var n=e.adOppEvents,r=e.adCallEvents,i=e.adDeliveryEvents,a=0;a<n.length;a++){var o={},s=n[a];s&&(o.taken=1===s.taken?!0:!1,o.communicator=s.networkName);var l=r[a];l&&(o.responseCode=l.responseCode,o.responseType=l.responseType,o.firstRedirect=l.firstRedirect,o.redirectCount=l.redirectCount);var d=i[a];d&&(o.error=d.error,o.mediaStartLatency=d.mediaStartLatency),t.push(o)}return t},r.prototype.registerAdStateChangeListener=function(e){var t=this;t._adStateChangeCb=e},r.prototype.registerAdDataAvailableListener=function(e){var t=this;t._newAdSDataAvailableCb=e},r.prototype.updateAdState=function(e,t,n){var r=this,i=r.getAdDiagnosticsById(e);i&&(i.updateState(t,n),r._adStateChangeCb&&r._adStateChangeCb(e,i.adstate,i.adstateData))},r.prototype.getAllAdDiagnostics=function(){var e=this;return e._submittedAds},r.prototype.getAdDiagnosticsById=function(e){var t=this;for(var n in t._submittedAds)if(t._submittedAds.hasOwnProperty(n)){var r=t._submittedAds[n][e];if(r)return r}return null},r.prototype.addAdData=function(e,t,n){var r=this;r._submittedAds[e]||(r._submittedAds[e]={});var a=new i(e,t,n);r._submittedAds[e][t]=a,r._newAdSDataAvailableCb&&r._newAdSDataAvailableCb(a)}},{"../../util":"jJTEqU","../../views/ads-diagnostics.html":61,"../common/Constants":108}],146:[function(e,t,n){"use strict";function r(e){var t,n=this,i="",a=-1;if(n&&n instanceof r&&e&&!o.hasOwn(n,"_rendererDiv")){try{a=e.getAttribute&&e.setAttribute&&(e.parentElement||e.parentNode)?1:0}catch(s){a=-2}if(1===a)try{a=e.ownerDocument||e.document?1:-3}catch(s){a=-4}1===a?(t=n.getFrameElement(),t&&(e=t),i=e.getAttribute("id")||"",i=i?i:e.id,n._rendererDiv=e,i||(i="yvapview_"+c,e.id=i,e.setAttribute("id",i),c+=p),n._elementID=i,n._validElement=1):(n._rendererDiv=null,n._elementID="",n._validElement=a)}}function i(e,t,n){var i=this;r.call(i,t),i._reset(),i._eventBus=e,i._isMute=n,i._eventBus.subscribe(d.AD_PLAYBACK_ENDED,i._stop,i),i._eventBus.subscribe(d.Ad.PAUSE,i._pause,i),i._eventBus.subscribe(d.AD_PLAYBACK_RESUMED,i._resume,i),i._eventBus.subscribe(d.FULLSCREEN_CHANGE,i._toggleFullScreenSetting,i),i._eventBus.subscribe(d.API.PLAYER_MUTE_CHANGE,i._muteChange,i)}var a=e("../../util"),o=(e("../../../../lib"),e("../../../../lib/logger"),e("../yvap-util")),s=(e("../common/Events"),e("../common/Errors"),e("../common/Constants")),l=e("./ViewabilityTracker"),d=e("../../event"),c=(new Date).getTime()-Math.round(1e4*Math.random()),p=Math.round(100*Math.random());t.exports=i,r.getViewability=function(e,t){var n=new r(e);return n.getViewability(t)},r.prototype.getWindow=function(){return window},r.prototype.getFrameElement=function(){var e=this,t=e&&e.getWindow(),n=!o.isInTopWindow(t),r=null;if(n)try{r=t.frameElement||null}catch(i){r=null}return r},r.prototype._getViewInfoFromSafeFrame=function(){var e=this,t=e&&e.getWindow()||null,n=null;if(o.isInSafeFrame(t))try{n=t.$sf.ext.geom()||null}catch(r){n=null}return n},r.prototype._getViewInfoFromDARLA=function(){var e,t=this,n=t&&t.getWindow()||null,r=o.getDARLA(n)||null,i=r&&r.darla||null,a=t&&t._elementID||"";if(i&&a)try{e=i.yvap.view(a),e&&"object"==typeof e&&("self"in e&&"rect"in e||"iv"in e||(e=null))}catch(s){e=null}return e},r.prototype.getSize=function(e){var t,n,r=this,i=r&&r._rendererDiv||null,a=r&&r.getWindow()||null,s=(r&&r._elementID||"",""),l=0,d=0;if(a)if(o.isInTopWindow(a))if(t=r._getViewInfoFromDARLA(),t&&(n=t.rect||t.self||t),n)l=n.w,d=n.h;else try{l=i.clientWidth,d=i.clientHeight}catch(c){l=d=0}else if(t=r._getViewInfoFromSafeFrame(),t&&(n=t.rect||t.self||t),n)l=n.w,d=n.h;else try{l=i.clientWidth,d=i.clientHeight}catch(c){l=d=0}return l=parseInt(l,10),d=parseInt(d,10),(isNaN(l)||0>l)&&(l=d=0),(isNaN(d)||0>d)&&(l=d=0),s=l+"x"+d,e=e||{},e.w=l,e.h=d,t&&(e.v=t),s},r.prototype.getViewability=function(e){var t,n,r,i=this,a=i&&i.getWindow(),s=0;return i._isFullScreen?s=1:(t=o.isInTopWindow(a)?i._getViewInfoFromDARLA():i._getViewInfoFromSafeFrame(),t&&(r=t.rect,n=t.self),n&&"iv"in n?s=n.iv:r&&"iv"in r?s=r.iv:t&&"iv"in t&&(s=t.iv),s=parseFloat(s),(isNaN(s)||0>s)&&(s=0)),e&&t&&o.mix(e,t,!0,!0),s},i.prototype=new r,i.prototype._reset=function(){var e=this;clearInterval(e._timer),e._timer=null,e._ad=null,e._communicatorName=null,e._isFullScreen=!1,e._firstCheck=!0,e._viewAtInit=0,e._viewabilityBeaconFired=!1,e._viewableTime=0,e._totalViewableTime=0,e._totalPlaybackDuration=0,e._started=0,e._percentViewArr=[],e._isViewabilityMeasurable=s.UNKNOWN,e._viewabilityTrackers=[],e._totalAudioTimeInView100=0},i.prototype._getViewability=function(){var e,t,n,r=this,i=r&&r.getWindow(),a=(r&&r._elementID,0);r._isFullScreen?a=1:(e=o.isInTopWindow(i)?r._getViewInfoFromDARLA():r._getViewInfoFromSafeFrame(),e&&(n=e.rect,t=e.self),t&&"iv"in t?a=t.iv:n&&"iv"in n?a=n.iv:e&&"iv"in e&&(a=e.iv),a=parseFloat(a),(isNaN(a)||0>a)&&(a=0)),r._viewabilityTrackers.forEach(function(e){e.viewabilityUpdated(a)}),r._handleViewability(a)},i.prototype._handleViewability=function(e){var t,n,r=this;if(r._totalPlaybackDuration=r._firstCheck?0:r._totalPlaybackDuration+s.INTERNAL_POLLING_INTERVAL,e>=s.VIEWABILITY_THRESHOLD&&!r._firstCheck?(r._viewableTime=r._viewableTime+s.INTERNAL_POLLING_INTERVAL,r._totalViewableTime=r._totalViewableTime+s.INTERNAL_POLLING_INTERVAL):r._viewableTime=0,r._firstCheck?(r._firstCheck=!1,r._viewAtInit=e>=s.VIEWABILITY_THRESHOLD?1:0):1!==e||r._isMute||(r._totalAudioTimeInView100+=s.INTERNAL_POLLING_INTERVAL),r._percentViewArr.push(e),r._viewableTime>=s.TIME_FOR_VIEWABLE_IMPRESSION&&!r._viewabilityBeaconFired&&(t=r._getAvBeaconUrl(e),n=r._ad.beacons.viewableimpression||[],t||n.length>0)){if(t&&a.sendImageBeacon(t),n.length>0)for(var i=0;i<n.length;i++)r._processYamPlusBeacon(n[i],e);r._viewabilityBeaconFired=!0}r._viewabilityTrackers.forEach(function(t){t.maybeSendBeacon(e,r._isMute)})},i.prototype._processYamPlusBeacon=function(e,t){var n=this;if(e){var r,i={},o=(new Date).getTime();i.pctview=100*t,i.initview=n._viewAtInit,i.MeasurementType=1,i.Timestamp=o,r=n._populateYamPlusMacros(e,i),a.sendImageBeacon(r)}},i.prototype._populateYamPlusMacros=function(e,t){var n,r=/\{(\w)+\}|\%(\w)+\%/g,i=t,a=function(e){var t,n=/(\w)+/g,r=e.match(n),a=r[0];return t=i[a],"undefined"!=typeof t&&null!==t?t:e};return n=e.replace(r,a)},i.prototype._getAvBeaconUrl=function(e){var t,n,r,i=this,a=i.getWindow(),s=(i._elementID,"");if(r=i._getBeaconData(e),t=o.getDARLA(a)||null,n=t&&t.darla||null,r&&n)try{s=n.yvap.avb(r.spaceId,r.pvId,r.position,r.serveTime)}catch(l){s=""}return s},i.prototype._getBeaconData=function(e){var t=this,n={},r={};return r.size=t.getSize(),r.bookID=t._ad.bookingId,r.ioID=999999,r.lineID=999999,r.adID=999999,r.slotID=999999,r.creativeID=t._ad.creativeId,r.impID=t._ad.impressionId,r.pctIV=100*e,r.initIV=t._viewAtInit,n.spaceId=t._ad.spaceId,n.pvId=t._ad.serveId,n.serveTime=t._ad.serveTime,n.position={},n.position[t._ad.position]=r,n},i.prototype._toggleFullScreenSetting=function(){var e=this,t=e._isFullScreen;e._isFullScreen=t?!1:!0},i.prototype._pause=function(){var e=this;clearInterval(e._timer),e._viewabilityTrackers.forEach(function(e){e.pauseTriggered()})},i.prototype._resume=function(e){var t=this;1===t._started&&(t._timer=setInterval(function(){t._getViewability()},s.INTERNAL_POLLING_INTERVAL))},i.prototype._muteChange=function(e){var t=this;t._isMute=e,t._viewabilityTrackers.forEach(function(t){t.muteTriggered(e)})},i.prototype._stop=function(e){var t=this;clearInterval(t._timer),t._started=0,t._viewabilityTrackers.forEach(function(e){e.stopTriggered()})},i.prototype._isSupportedCommunicator=function(){var e=this,t=[s.PREVIEW,s.STANDALONE_GEMINI_NATIVE];return-1!==t.indexOf(e._communicatorName)?!0:!1},i.prototype.start=function(e,t){var n,r=this;r._reset(),r._rendererDiv&&e&&(r._ad=e.adObj,n=e.communicatorSpec,r._communicatorName=n&&n.communicatorName?n.communicatorName:"",r._isSupportedCommunicator()&&(o.isViewabilityMeasurable()?(r._viewabilityTrackers=r._constructTrackers(r._ad),r._isViewabilityMeasurable=s.VIEWABILITY_MEASURABLE,r._started=1,r._getViewability(),r._timer=setInterval(function(){r._getViewability()},s.INTERNAL_POLLING_INTERVAL)):r._isViewabilityMeasurable=o.getViewabilityNonMeasurableValue()))},i.prototype._constructTrackers=function(e){var t=this,n=[],r=e&&e.rules||{},i=e&&e.beacons||{},a=r.viewabilityDefVideo,o=i.impression;a&&o&&n.push(new l(a,o,t,t._isMute));var s=r.viewabilityDefVideo3P,d=i.impression3p;return s&&d&&s.forEach(function(e){n.push(new l(e,d,t,t._isMute))}),n},i.prototype.getViewabilitySummary=function(){var e=this;if(!e._isSupportedCommunicator())return{};var t={data:e._percentViewArr,max:function(){return this.data.length?Math.max.apply(Math,this.data):0},min:function(){return this.data.length?Math.min.apply(Math,this.data):0},avg:function(){for(var e=this.data,t=e.length,n=0,r=0,i=0;t>i;i++)n+=e[i];return r=n/t||0},latest:function(){var e=this.data.length,t=0;if(e){var n=e-1;t=this.data[n]||0}return t}},n={},r=(e.getSize(n),{vi_tpd:e._totalPlaybackDuration,vi_tvd:e._totalViewableTime,vi_mpv:(100*t.min()).toFixed(0),vi_mxpv:(100*t.max()).toFixed(0),vi_apv:(100*t.avg()).toFixed(0),vi_lpv:t.latest(),vi_tativ:e._totalAudioTimeInView100,vi_pw:n.w,vi_ph:n.h,vi_psnd:e._isMute?s.PLAYER_SOUND_OFF:s.PLAYER_SOUND_ON,vi_pfs:e._isFullScreen?s.PLAYER_FULLSCREEN_ON:s.PLAYER_FULLSCREEN_OFF,vi_ploc:s.UNKNOWN,vi_pib:s.UNKNOWN,vi_pap:s.UNKNOWN,vi_m:e._isViewabilityMeasurable});return r}},{"../../../../lib":"bRhrlU","../../../../lib/logger":"IS9j5T","../../event":"YJm+dH","../../util":"jJTEqU","../common/Constants":108,"../common/Errors":110,"../common/Events":111,"../yvap-util":154,"./ViewabilityTracker":147}],147:[function(e,t,n){"use strict";function r(e,t,n,r){var a=this;a._rule=e||{},a._beaconTemplates=t.slice()||[],a._viewabilityManager=n,a._isBeaconSent=!1,a._viewabilityType=a._rule[i.VIEWABILITY_RULE_TYPE],a._isConsecutivePlaybackRequired=1===a._rule[i.VIEWABILITY_RULE_CONSECUTIVE_PLAYBACK],a._isAudioRequired=1===a._rule[i.VIEWABILITY_RULE_AUDIO],a._minViewability=(a._rule[i.VIEWABILITY_RULE_MIN_PIXELS]||0)/100,a._minDuration=1e3*(a._rule[i.VIEWABILITY_RULE_MIN_DURATION]||0),a._previousViewability=null,a._previousIsMute=r,a._viewableDuration=0}var i=e("../common/Constants"),a=e("../../util"),o=e("../yvap-util");t.exports=r,r.prototype.pauseTriggered=function(){var e=this;e._isConsecutivePlaybackRequired&&(e._viewableDuration=0)},r.prototype.stopTriggered=function(){var e=this;e._isConsecutivePlaybackRequired&&(e._viewableDuration=0)},r.prototype.muteTriggered=function(e){var t=this;t._isAudioRequired&&t._isConsecutivePlaybackRequired&&e&&(t._viewableDuration=0)},r.prototype.viewabilityUpdated=function(e){var t=this;t._isConsecutivePlaybackRequired&&e<t._minViewability&&(t._viewableDuration=0)},r.prototype.maybeSendBeacon=function(e,t){var n=this;return n._isBeaconSent?!0:(null===n._previousViewability?n._previousViewability=e:n._previousViewability>=n._minViewability&&e>=n._minViewability&&(n._isAudioRequired&&(n._previousIsMute||t)||(n._viewableDuration+=i.INTERNAL_POLLING_INTERVAL)),n._previousViewability=e,n._previousIsMute=t,n._viewableDuration>=n._minDuration?(n._sendBeacon(),!0):!1)},r.prototype._sendBeacon=function(){var e=this,t=e._viewabilityManager.getViewabilitySummary(),n=[];if(e._isBeaconSent)return n;for(var r=0;r<e._beaconTemplates.length;r++){var i=o.expandGeminiBeaconMacro(e._beaconTemplates[r],t,{viewabilityType:e._viewabilityType});a.sendImageBeacon(i),n.push(i)}return e._isBeaconSent=!0,n}},{"../../util":"jJTEqU","../common/Constants":108,"../yvap-util":154}],148:[function(e,t,n){"use strict";function r(e,t,n,r,i){var a=this;t&&(a.playbackId=e||"",a.resourceType=t.resourceType||"",a.resourceUrl=t.resourceUrl||"",a.scalable=t.scalable||"",a.duration=r||0,a.position=n||"",i&&(a.adParams=i.AdParameters))}t.exports=r},{}],149:[function(e,t,n){"use strict";function r(e){var t=this;t._customParams={},t.rules=null,t.allocation=null,t.adList=null,t.rendererType=null,t.adTargeting=null,t.clipCategory=null,t.iceBreaker=null,e&&(t.clipId=e.clipId,t.clipDuration=e.clipDuration,t.licenseId=e.licenseId,t.spaceId=e.spaceId,t.playlistId=e.playlistId,t.rendererType=e.rendererType,e.yvap&&t._processAdData(e.yvap),t.isLive=e.isLive||!1,t.hasLiveMidrolls=e.hasLiveMidrolls||!1,t.hasLiveMidrolls&&(t.liveMidrollsMaxDur=e.liveMidrollsMaxDur),t.isLive&&0===t.clipDuration&&(t.clipDuration=450))}t.exports=r;var i=e("./common/Constants"),a=(e("./communicator/VMAPParser"),e("./communicator/ParserManager"));r.prototype.addCustomParams=function(e,t){var n=this;n._customParams[e]=t},r.prototype.getCustomParams=function(e){var t=this;return t._customParams[e]},r.prototype.setAdData=function(e){var t=this;t._processAdData(e)},r.prototype._processAdData=function(e){var t,n=this;if(e){var r=e.adRules;if(r){var o=r.result;if(o){n.rules=o.ruleGroup||{},n.allocation=o.allocation||{},n.rendererType=o.rendererType||"",n.adList=o.adList||[];var s=o.vmap;s&&(t=a.parseAdXml(s),t&&(n.vmapData=t))}else r.adResponse&&(t=a.parseAdXml(r.adResponse),t&&(n.vmapData=t))}n.adTargeting=e.ad_targeting||"",n.clipCategory=e.category||"",n[i.YVAP_INFO_AD_BREAKS]=e[i.YVAP_INFO_AD_BREAKS]||"",n.content_provider_data=e.content_provider_data,n.topics=e.topics,n.showName=e.show_name}},r.prototype.clean=function(){var e=this;e.rules=null,e.allocation=null,e.rendererType=null,e.adList=null,e.iceBreaker=null,e.vmapData=null,e[i.YVAP_INFO_AD_BREAKS]=null}},{"./common/Constants":108,"./communicator/ParserManager":124,"./communicator/VMAPParser":133}],150:[function(e,t,n){"use strict";function r(e,t){var n=this;n._yvapBus=e,t&&t.getElementsByTagName&&(n._container=t),n._overlayDiv=document.createElement("div"),n._overlayDiv.style.display="inline-block",n._overlayDiv.style.textAlign="auto",n._overlayDiv.style.position="absolute",n._currentDom=null,n._displayTimer=null;n.svgElem=document.createElement("div"),n.svgElem.style.display="block",n.svgElem.style.position="absolute",n.svgElem.style.top="0",n.svgElem.style.right="0",n.svgElem.style.backgroundColor="white",n.svgElem.style.pointerEvents="auto",n.svgElem.style.width="10px",n.svgElem.style.height="10px",n.svgElem.innerHTML='<svg width="10" height="10" xmlns="http://www.w3.org/2000/svg" style="position: absolute; top:0px; right:0px;">        <g>        <title>Layer 1</title>        <polygon fill="#000000" points="10,1.502 8.498,0 5,3.499 1.502,0.001 0,1.503 3.498,5 0,8.498 1.502,10 5,6.502 8.498,10 10,8.498    6.502,5 " id="svg_1"/>        </g>        </svg>',n.svgElem.addEventListener("click",function(e){n.removeOverlay()})}var i=e("../common/Events");e("../../../../lib/logger");t.exports=r,r.prototype.renderOverlay=function(e){var t,n,r,a,o,s,l,d=this,c=document.createElement("div");if(!d._currentDom&&e&&(l=e.playbackId||"",n=e.resourceType||"",t=e.resourceUrl||"",a=e.scalable||!1,o=e.duration||0,s=e.position,"image/jpeg"===n&&t&&(r=document.createElement("img"),r.src=t),r&&d._container)){d._overlayDiv.style[s]="0px",c.appendChild(r),c.appendChild(d.svgElem),d._currentDom=c;var p=d._overlayDiv.style;p.position="absolute",p.display="block",d._overlayDiv.style[s]="0px",p.height="50px",p.width="100%",p.zIndex=100,p.pointerEvents="none",p.background="transparent",p.textAlign="center",c.style.position="relative",c.style.display="inline-block",c.style.textAlign="auto",c.style.background="transparent",c.style.textAlign="center",c.style.height="50px",d._container.appendChild(d._overlayDiv),d._overlayDiv.appendChild(c),d._displayTimer=setTimeout(function(){d.removeOverlay()},1e3*o),r.style.pointerEvents="auto",r.style.opacity="0.5",r.addEventListener("click",function(e){d._yvapBus&&d._yvapBus.publish(i.OVERLAY_CLICK,l)}),r.addEventListener("mouseover",function(e){e.target.style.opacity="1.0"}),r.addEventListener("mouseout",function(e){e.target.style.opacity="0.85"}),d._yvapBus&&d._yvapBus.publish(i.OVERLAY_RENDERED,l)}},r.prototype.removeOverlay=function(){var e=this;e._container&&e._currentDom&&e._overlayDiv&&(e._overlayDiv.removeChild(e._currentDom),e._container.removeChild(e._overlayDiv),e._currentDom=null),clearTimeout(e._displayTimer)}},{"../../../../lib/logger":"IS9j5T","../common/Events":111}],151:[function(e,t,n){"use strict";function r(e,t,n,r){var s=this,c=e.yvap.accountId,p=e.yvap.timeout,u=e.yvap.standaloneAd;s._config=e,s._eventBus=t,s._yvapBus=new a("yvap"),s._rendererDiv=n||{},s._player=r||{},s._standaloneMode=e.yvap.standaloneAd&&e.yvap.standaloneAd.xml?!0:!1,s._cacheManagerYQL=new g(s._yvapBus),s._cacheManagerIceBreaker=new b(s._yvapBus),s._cacheManager=s._cacheManagerYQL,s._analytics=new S(s._yvapBus,"fireball",c,p),s._adEngineYQL=new m,s._adEngineIceBreaker=new v,s._adEngine=s._adEngineYQL,s._allocationManager=h,s._adPlaybackManager=T,s._diagnostics=new A;var _=s._rendererDiv.clientWidth,y=s._rendererDiv.clientHeight;s._vpaidjsRenderer=new E(s._eventBus),s._vpaidflashInterface=new M(s._eventBus,s._yvapBus,_,y,r,e.yvap.vpaidTimeout,e.yvap.preInitVpaid),s._overlayRenderer=new C(s._yvapBus,s._rendererDiv),s._midrollsHelper=null,(!o.ie||o.ie>=10)&&O.detectAdBlocker(function(e){d.ADBLOCKER=e}),s._currentClipId="",s.playbackMap={},s.waitlistMap={},s._videoStartTime=0,s._lastVolume=1,"number"==typeof e.yvap.volume&&(s._lastVolume=e.yvap.volume),s._mute=e.yvap.mute||!1,s._onVolumeChange(s._lastVolume),s._onMuteChange(s._mute),s._viewabilityManager=new I(s._eventBus,s._rendererDiv,s._mute),s._clipStarted=!1,s._iceBreakerClips={},s._yvapBus.subscribe(l.CACHE_UPDATE,s._onCacheUpdate,s),s._yvapBus.subscribe(l.CACHE_REFRESH_REQUEST,s._onCacheRefreshRequest,s),s._yvapBus.subscribe(l.MIDROLL_CACHE_UPDATE,s._onMidrollCacheUpdate,s),s._yvapBus.subscribe(l.AD_METRIC,s._onAdMetric,s),t.subscribe(i.PLAYBACK_PROGRESS,s._onContentVideoProgress,s),t.subscribe(i.PLAYBACK_STARTED,s._onContentVideoStart,s),t.subscribe(i.PLAYBACK_ENDED,s._onContentVideoEnd,s),t.subscribe(i.AD_PLAYBACK_STARTED,s._onAdStart,s),t.subscribe(i.AD_PLAYBACK_PROGRESS,s._onAdProgress,s),t.subscribe(i.AD_PLAYBACK_ENDED,s._onAdEnd,s),t.subscribe(i.AD_CLICK,s._onAdClick,s),t.subscribe(i.Ad.BREAK_CANCELLED,s._onAdBreakCancelled,s),t.subscribe(i.Ad.NO_PLAYABLE_STREAM,s._onAdNotPlayable,s),t.subscribe(i.Ad.NO_AD,s._onNoAd,s),t.subscribe(i.AD_PLAYBACK_ERROR,s._onAdPlaybackError,s),t.subscribe(i.API.PLAYBACK_SEEK_COMPLETE,s._onContentVideoSeek,s),t.subscribe(i.PLAYER_RESIZE,s._onPlayerResize,s),t.subscribe(i.CONTROLS_SET_VOLUME,s._onVolumeChange,s),t.subscribe(i.CONTROLS_SET_MUTE,s._onMuteChange,s),t.subscribe(i.AD_PLAYBACK_REQUEST,s._onAdPlaybackRequest,s),t.subscribe(i.SWF_READY,s._onSwfReady,s),t.subscribe(i.PAUSE_VPAID,s._onPauseVpaid,s),t.subscribe(i.RESUME_VPAID,s._onResumeVpaid,s),s._yvapBus.subscribe(l.OVERLAY_CLICK,s._onOverlayAdClick,s),s._yvapBus.subscribe(l.OVERLAY_RENDERED,s._onOverlayAdStart,s),t.subscribe(i.AD_BREAK_STARTED,s._midRollStart,s),t.subscribe(i.AD_BREAK_ENDED,s._midRollEnd,s),s._yvapBus.subscribe(l.AD_STARTED,s._onVpaidAdStart,s),s._yvapBus.subscribe(l.VPAID_AD_QUARTILE,s._onVPAIDAdQuartile,s),s._secretCode="",s._theBestTeam(),u&&(u.xml||u.gemini)&&(s._standaloneMode=!0,u.xml?s._standaloneAdHelper=new k(s._yvapBus,u):u.gemini&&(s._standaloneAdHelper=new x(s._yvapBus,u))),r.createAdsInfoPanel(s._diagnostics)}t.exports=r;var i=(e("../../../lib/logger"),e("../event")),a=e("../../../lib/event-bus"),o=e("../../../lib/user-agent"),s=e("../../../lib"),l=e("./common/Events"),d=e("./common/Constants"),c=e("./common/Errors"),p=e("./ads-json"),u=e("./engine/AdSpec"),_=e("./player-data"),m=e("./engine/AdEngine"),v=e("./engine/AdEngineIceBreaker"),y=e("./engine/NFLRules"),f=(e("./engine/ActionRule"),e("./allocation/RefreshAllocation")),g=e("./cache/CacheManager"),b=e("./cache/CacheManagerIceBreaker"),h=e("./allocation/AllocationManager"),E=e("./vpaid/vpaidjs-renderer"),T=e("./monitoring/AdPlaybackManager"),A=e("./monitoring/Diagnostics"),S=e("./monitoring/Analytics"),I=e("./monitoring/ViewabilityManager"),L=e("./engine/RuleGroup"),M=e("./vpaid/VPAIDFlashInterface"),C=e("./renderer/HTML5OverlayRenderer"),N=e("./communicator/CommunicatorFactory"),D=e("./allocation/CommunicatorSpec"),R=e("./common/CookieUtil"),O=e("./yvap-util"),P=e("./overlay-json"),w=e("./communicator/MidRollsHelper"),k=(e("./communicator/StandaloneAdHelper"),
e("./communicator/StandaloneGeminiBRXHelper")),x=e("./communicator/StandaloneGeminiNativeHelper"),B=e("./midrolls-util"),j=e("./communicator/RefreshMidRollsHelper"),U=e("./communicator/ParserManager"),V={};V[d.BUMPER]=!0,V[d.PREROLL]=!0,V[d.POSTROLL]=!0,V[d.NON_LINEAR]=!1;var U=e("./communicator/ParserManager"),F=e("./yvap-util"),z=(e("./communicator/YAXvCommunicator"),[c.AD_CALL_TIMEOUT,c.PLAYER_TIMEOUT,c.ERR_VPAID_TIMEOUT,c.ADBLOCKER]);r.prototype._parseNewPlayerData=function(e){var t=this,n=e.clipId,r=e.vmapData;if(t._cacheManager.addAllocationForClipId(new f,n),t._cacheManager.addPlayerDataForClipId(e,n),s.isFunction(window.getAdXmlForPreview)){var i=window.getAdXmlForPreview();if("xml"===i.type){var a=U.parseAdXml(i.value);a&&a.adBreakMap&&(r=a)}}var o=t._adEngine.understandRules(r);t._cacheManager.addRuleForClipId(o,n),t._cacheManager.updateAdCache(r,n)},r.prototype._parsePlayerData=function(e){var t=this,n=e.clipId,r=e.rules,i=t._adEngine.understandRules(r);i&&t._cacheManager.addRuleForClipId(i,n);var a=e.allocation,o=t._allocationManager.understandAllocation(a);o&&t._cacheManager.addAllocationForClipId(o,n),t._cacheManager.addPlayerDataForClipId(e,n);var s=e.adList;t._cacheManager.updateAdCache(s,n)},r.prototype._handleNFLRules=function(e,t){var n=this,r=new L,i=r.preroll,a=d.NFL_FREE_TIME,o=d.NFL_SESSION_TIME;t&&t.rules&&(a=parseInt(t.rules.freeUserPeriodInSeconds,10),o=parseInt(t.rules.onloaderPeriodInSeconds,10));var s=new y(a,o);s.type=d.PREROLL,i.push(s),n._cacheManager.addRuleForClipId(r,e)},r.prototype.updatePlayerData=function(e){for(var t,n=this,r=0;r<e.length;r++){t=new _(e[r]);var i=t.clipId;t.vmapData?(n._iceBreakerClips[i]=!0,n._cacheManager=n._cacheManagerIceBreaker,n._adEngine=n._adEngineIceBreaker,n._parseNewPlayerData(t)):(n._iceBreakerClips[i]=!1,n._cacheManager=n._cacheManagerYQL,n._adEngine=n._adEngineYQL,n._parsePlayerData(t)),t.licenseId===d.NFL_NOW_LMSID&&n._handleNFLRules(i,t.content_provider_data);var a=t[d.YVAP_INFO_AD_BREAKS];if(a||t.hasLiveMidrolls){if(a){var o=U.parseAdXml(a)||{};o=o.adBreakMap,n._cacheManager.addCuePointsForClipId(o,i)}n._midrollsHelper||(n._iceBreakerClips[i]?(n._midrollsHelperIceBreaker=new j(n._yvapBus,n._cacheManagerIceBreaker),n._midrollsHelper=n._midrollsHelperIceBreaker):(n._midrollsHelperYQL=new w(n._yvapBus,n._cacheManagerYQL),n._midrollsHelper=n._midrollsHelperYQL))}t.clean()}},r.prototype.getAdsFor=function(e){var t,n,r,i,a,o=this,s=new D;return s.communicatorName=d.YAXv,t=N.getCommunicatorUsingSpec(s),e&&e.clipId?(a=e.clipId,t?(r=new _(e),n=new u(d.PREROLL,["clickable"]),i=t.getKey(n,r),o._cacheManager.addPlayerDataForClipId(r,a),o._yvapBus.publish(l.AD_OPPORTUNITY,a,d.PREROLL,n,s,r),o._cacheManager.getNewAd(t,n,r),o._addKeyToWaitlist(i,n),!0):!1):(o._yvapBus.publish(l.NULL_AD_OPPORTUNITY,a,d.CLIP_DATA_MISSING),!1)},r.prototype.beginAdExperience=function(e,t){var n,r=this;if(r._iceBreakerClips[e]===!0?(r._cacheManager=r._cacheManagerIceBreaker,r._adEngine=r._adEngineIceBreaker):(r._cacheManager=r._cacheManagerYQL,r._adEngine=r._adEngineYQL),r.waitlistMap={},r._currentClipId=e,r._clipStarted=!1,r._overlayRenderer.removeOverlay(),r._vpaidflashInterface.stopAd(),r._yvapBus.publish(l.BEGIN_AD_EXP,e),r._standaloneMode){var a=r._standaloneAdHelper.getAd();return void(a&&(r._checkForVPAIDPreInit(a),r._yvapBus.publish(l.AD_OPPORTUNITY,e,a.type,a.adSpec,a.communicatorSpec,{}),r._updateAds(a)))}if(s.isFunction(window.getAdXmlForPreview)&&s.isFunction(r._cacheManager.getNewIceBreakerResponseVMAPXml)){var o=window.getAdXmlForPreview();if("tag"===o.type)return void r._cacheManager.getNewIceBreakerResponseVMAPXml(o.value,function(t){var n=U.parseAdXml(t);if(n&&n.adBreakMap){var i=r._adEngine.understandRules(n);r._cacheManager.addRuleForClipId(i,e),r._cacheManager.updateAdCache(n,e);var a=r._cacheManager.getRuleForClipId(e);if(a){var o=r._getAd(d.PREROLL,e);r._updateAds(o);var s=r._getAd(d.BUMPER,e);r._updateAds(s)}else r._yvapBus.publish(l.NULL_AD_OPPORTUNITY,e,d.RULES_MISSING);r._fireAdsReady()}})}if(n=r._cacheManager.getCuePointsForClipId(e)){var c=[];Object.keys(n).length||0;for(var p in n)if(n.hasOwnProperty(p)){var u=F.convertTimeToSeconds(n[p].timeOffset);c.push(u)}r._eventBus.publish(i.AD_BREAK_TIMELINE,c)}var _=r._cacheManager.getPlayerDataForClipId(e);(n||_.hasLiveMidrolls)&&(r._midrollsHelper.stopMidRollsFetchThread(),r._midrollsHelper.startMidRollsFetchThread(e));var m=r._cacheManager.getRuleForClipId(e);if(m){var v=r._getAd(d.PREROLL,e);r._updateAds(v);var y=r._getAd(d.BUMPER,e);r._updateAds(y)}else r._yvapBus.publish(l.NULL_AD_OPPORTUNITY,e,d.RULES_MISSING);r._fireAdsReady()},r.prototype._fireAdsReady=function(){var e=this,t=!1;for(var n in e.waitlistMap)e.waitlistMap.hasOwnProperty(n)&&(t=t||e.waitlistMap[n]);t||e._eventBus.publish(i.ADS_READY)},r.prototype._getAd=function(e,t,n){var r=this,i=null,a=r._cacheManager.getRuleForClipId(t),o=r._cacheManager.getPlayerDataForClipId(t),s=r._cacheManager.getAllocationForClipId(t);if(a&&o&&s){var d=r._adEngine.onAdEvent(e,a,o.clipDuration,n),c=s.pickCommunicator(d);if(null!==c&&(c.customSPID=r._config.yvap.customSPID,c.customDomain=r._config.yvap.customDomain),r._yvapBus.publish(l.AD_OPPORTUNITY,t,e,d,c,o),i=r._cacheManager.getAd(t,c,d),!i){var p=N.getCommunicatorUsingSpec(c);if(p){var u=p.getKey(d,o);r._addKeyToWaitlist(u,d)}}}return i},r.prototype._checkForVPAIDPreInit=function(e){var t,n=this;e&&(t=e.adObj,t&&t.type===d.VPAID&&n._yvapBus.publish(l.VPAID_PREFETCH_REQUEST,t))},r.prototype._createAdsJson=function(e){var t=this,n=null;if(e){var r=e.adObj,i=e.type,a="ad"+Math.floor(1e3*Math.random())+(new Date).getTime(),o=0;if(r&&!e.errorState){var s=r.type,l=r.streams,c=r.params?r.params.clickurl:null,u=r.adId;o=r.duration||d.DEFAULT_AD_DURATION,n=new p(a,i,l,c,s,u,o)}else n=new p(a,i,null,"",d.NOAD,"",o);t._diagnostics.addAdData(t._currentClipId,a,e),n&&(n.adObj=r)}return n},r.prototype._handleFallback=function(e){var t,n=this,r=n._cacheManager.getPlayerDataForClipId(n._currentClipId),i=e.adSpec,a=e.communicatorSpec,o=n._cacheManager.getAllocationForClipId(n._currentClipId),s=o&&o.pickFallbackCommunicator&&o.pickFallbackCommunicator(a);if(s){i.adCallSequence++;var l=n._cacheManager.getAd(n._currentClipId,s,i);if(l)l.adSpec=e.adSpec,l.type=e.type,e=l;else{var c=N.getCommunicatorUsingSpec(s);if(c)return t=c.getKey(i,r),n._addKeyToWaitlist(t,i),null}}else if(a.communicatorName===d.REFRESH&&e.adTagURI){i.adCallSequence++;var p=N.getCommunicatorUsingSpec(a);return t=p.getKey(i,r),n._addKeyToWaitlist(t,i),n._cacheManager.getNewAd(p,i,r,e.adTagURI),null}return e},r.prototype._updateAds=function(e){var t=this,n=[];if(e){var r=e.adObj,a=e.errorState&&-1===z.indexOf(e.errorState);(r&&r.type===d.NOAD||a)&&(e=t._handleFallback(e))}if(e){var o=t._createAdsJson(e),s=o.playbackId;if(t.playbackMap[s]=e,n.push(o),t._clipStarted){var p=e.type;(p===d.BUMPER||p===d.PREROLL)&&(e.errorState=c.PLAYER_TIMEOUT,T.onNoAd(e,t._currentClipId))}"l1"===e.cacheState&&t._checkForVPAIDPreInit(e),t._yvapBus.publish(l.AD_SUBMITTED,t._currentClipId,e)}n.length>0&&(t._eventBus.publish(i.ADS_OBJS_UPDATE,n),t._fireAdsReady())},r.prototype._renderOverlay=function(e){var t=this;if(e){var n=e.adSpec,r=e.adObj;if(r){var i="ad"+Math.floor(1e3*Math.random())+(new Date).getTime();t.playbackMap[i]=e;var a=new P(i,r.nonLinearAd,n.placement,n.duration,r.adParameters),o=a.resourceType;o===d.OVERLAY_VPAID?t._vpaidflashInterface.renderOverlayAd(a):o===d.OVERLAY_IMAGE&&t._overlayRenderer.renderOverlay(a)}}},r.prototype._addKeyToWaitlist=function(e,t){var n=this;e&&t&&(n.waitlistMap[e]=t)},r.prototype.renderVPAIDAd=function(e,t,n,r,a,o,s){var d,p,u=this;if(u._vpaidRendererType=null,e){p=u.playbackMap[e]||{},d=p.adObj||{};for(var _=d.streams,m=null,v=null,y=0;y<_.length;y++){var f=_[y],g=f.format||"";g.indexOf("shockwave")>-1?m=f:g.indexOf("javascript")>-1&&(v=f)}u._yvapBus.publish(l.VPAID_AD_RENDERED,u._currentClipId,p.type,p),m&&"flash"===s?(d.streams=[m],u._vpaidRendererType="flash",u._vpaidflashInterface.renderAd(e,p)):v?(d.streams=[v],u._vpaidRendererType="js",u._vpaidjsRenderer.render(e,n,r,t,d,u._rendererDiv)):u._eventBus.publish(i.Ad.ERROR,c.INCOMPATIBLE_MEDIA)}else u._eventBus.publish(i.Ad.ERROR,c.GENERIC)},r.prototype._limitAdsBasedOnDuration=function(e,t){return t?B.findBestCombination(e,t):e},r.prototype.getMidrollAds=function(e,t){var n,r,i,a=this,o=a._midrollsHelper.getMidrollsAds(a._currentClipId,a._cacheManager,e),s=[];t&&(o=a._limitAdsBasedOnDuration(o,t));for(var d=0;d<o.length;d++)n=o[d],r=a._createAdsJson(n),i=r.playbackId,a.playbackMap[i]=n,a._yvapBus.publish(l.AD_SUBMITTED,a._currentClipId,n),s.push(r);return s},r.prototype._onAdPlaybackRequest=function(e){var t,n=this;e&&(t=n.playbackMap[e],t&&T.onAdBreakStart(t))},r.prototype._onMidrollCacheUpdate=function(e){var t=this;t._eventBus.publish(i.YVAP_MIDROLL_CACHE_UPDATE,e)},r.prototype._onCacheUpdate=function(e,t){var n,r,i=this;i._checkForVPAIDPreInit(t),e&&(n=i.waitlistMap[e],n&&(r=i._cacheManager.getAdResponseForKey(e),r&&(r.adSpec=n,r.type=n.type,i.waitlistMap[e]=null,r.type===d.NON_LINEAR?i._renderOverlay(r):i._updateAds(r))))},r.prototype._onCacheRefreshRequest=function(e){var t=this;e&&e.length>0&&t._eventBus.publish(i.SAPI_REFRESH_REQUEST,e)},r.prototype._onAdMetric=function(e){var t=this;t._eventBus.publish(i.AD_METRICS,e)},r.prototype._onContentVideoStart=function(e){var t=this;t._videoStartTime=0,R.incrementTotalClipCount(),R.incrementRecentClipCount(),t._clipStarted=!0,t._yvapBus.publish(l.VIDEO_START,e);var n=t._getAd(d.POSTROLL,e);t._updateAds(n),t._cacheManager.sync();var r=t._analytics.getArchive(),a=t._diagnostics.generateDiagnostics(r);t._eventBus.publish(i.YVAP_INFO_UPDATE,a)},r.prototype._onContentVideoProgress=function(e,t,n){var r,i=this,a=t-i._videoStartTime;i._videoStartTime=t,R.incrementTotalVideoLength(a),R.incrementRecentVideoLength(a);var o=i._getAd(d.NON_LINEAR,e,t);i._renderOverlay(o),r=i._cacheManager.getPlayerDataForClipId(e),r&&r.licenseId===d.NFL_NOW_LMSID&&(R.incrementNFLVideoLength(a),R.createNFLSession())},r.prototype._onContentVideoSeek=function(e){},r.prototype._onContentVideoEnd=function(e){var t=this;t._overlayRenderer.removeOverlay(),t._yvapBus.publish(l.VIDEO_END,t._currentClipId)},r.prototype._midRollStart=function(){},r.prototype._midRollEnd=function(){var e=this;e._yvapBus.publish(l.AD_BREAK_ENDED,e._currentClipId)},r.prototype._onAdEnd=function(e){var t=this;t.playbackMap[e]=null,t._diagnostics.updateAdState(e,A.ADSTATES.ENDED)},r.prototype._onOverlayAdClick=function(e){var t,n,r,i=this;e&&(r=i.playbackMap[e],r&&(n=r.adObj||{},t=n.params?n.params.clickurl:null,T.onAdClick(r,0,0),t&&window.open(t,"_blank")))},r.prototype._onOverlayAdStart=function(e){var t,n=this;e&&(t=n.playbackMap[e],t&&T.onAdStart(t,"",n._currentClipId))},r.prototype._onAdStart=function(e,t,n,r,i,a,o,s,c){var p,u,_=this,m=n||"";_._videoStartTime=0,R.resetRecentVideoLength(),R.resetRecentClipCount(),R.incrementAdCount(),_._overlayRenderer.removeOverlay(),e&&(p=_.playbackMap[e],p&&(u=p.adSpec||{},u.placement===d.NFL_ONLOAD?R.resetNFLSession():u.placement===d.NFL_PREROLL&&R.resetRecentVideoLengthNFL(),T.onAdStart(p,t,_._currentClipId),d.VIEWABILITY_ON&&_._viewabilityManager.start(p,_._currentClipId),_._yvapBus.publish(l.AD_DELIVERED,_._currentClipId,p.type,m,p,r,i,a,o,s,c))),_._diagnostics.updateAdState(e,A.ADSTATES.PLAYING,{chosenBitrate:t,latency:n,swfLoadLat:r,vpaidInitLat:i,vpaidStartLat:a}),_._renderCompanionAd(p)},r.prototype._onVpaidAdStart=function(e){var t,n=this;e&&(t=n.playbackMap[e],t&&n._yvapBus.publish(l.VPAID_AD_STARTED,n._currentClipId,t.type,t))},r.prototype._renderCompanionAd=function(e){var t,n=window.YAHOO_Yvap||{};if(e&&n&&n.load_companions){t=e.adObj,t.companion.list=t.companion;var r=n.load_companions(t.companion);T.onCompanionDisplayed(r)}},r.prototype._onAdProgress=function(e,t,n){var r,i,a=this,o=t-a._videoStartTime;a._videoStartTime=t,R.incrementAdLength(o),e&&(r=a.playbackMap[e],r&&(i=a._viewabilityManager.getViewabilitySummary(),r.adDuration||(r.adDuration=n),T.onAdProgress(r,t,n,i,a._currentClipId)))},r.prototype._onVPAIDAdQuartile=function(e,t,n){var r=this;if(e){var i=r.playbackMap[e];if(i){var a=d.VIEWABILITY_ON&&O.isViewabilityMeasurable()?r._viewabilityManager.getViewabilitySummary():{};T.onVPAIDAdQuartile(i,t,n,a)}}},r.prototype._onAdClick=function(e,t,n){var r=this,i=r.playbackMap[e];i&&T.onAdClick(i,t,n)},r.prototype._onAdBreakCancelled=function(e){function t(e){n._diagnostics.updateAdState(e,A.ADSTATES.CANCELLED)}var n=this;t(e.currentPlaybackId),e.unplayedPlaybackIds.forEach(t)},r.prototype._onAdNotPlayable=function(e){var t=this,n=t.playbackMap[e];n&&(n.errorState=c.INCOMPATIBLE_MEDIA,t._yvapBus.publish(l.AD_DELIVERY_ERROR,t._currentClipId,n.type,c.INCOMPATIBLE_MEDIA,n),T.onNoAd(n,t._currentClipId))},r.prototype._onAdPlaybackError=function(e,t,n){var r=this,i=r.playbackMap[e],a="string"==typeof t?t:c.MEDIA_PLAYBACK;a=d.ADBLOCKER?c.ADBLOCKER:a;var o=-1,s=-1,p=2;n&&(o=n.swfLoadLatency,s=n.initLatency,p=n.timeoutStatus),i&&(i.errorState=a,r._yvapBus.publish(l.AD_DELIVERY_ERROR,r._currentClipId,i.type,a,i,o,s,p),T.onNoAd(i,r._currentClipId)),r._diagnostics.updateAdState(e,A.ADSTATES.ERROR,{error:a,vsl:o,vil:s,timeoutStatus:p})},r.prototype._onNoAd=function(e){var t,n=this,r=n.playbackMap[e];r&&(t=r.adObj,t&&(n._yvapBus.publish(l.AD_DELIVERY_ERROR,n._currentClipId,r.type,d.NOAD,r),T.onNoAd(r,n._currentClipId)))},r.prototype._onSwfReady=function(e){var t=this;e&&(t._swfReady=!0,t._yvapBus.publish(l.PLAYER_SWF_READY,e))},r.prototype._onPauseVpaid=function(){var e=this;e._vpaidflashInterface.pauseAd(),e._vpaidjsRenderer.pauseAd()},r.prototype._onResumeVpaid=function(){var e=this;e._vpaidflashInterface.resumeAd(),e._vpaidjsRenderer.resumeAd()},r.prototype._onPlayerResize=function(e,t){var n=this;n._vpaidflashInterface.updateDimensions(e,t),n._vpaidjsRenderer.updateDimensions(e,t)},r.prototype._onVolumeChange=function(e){var t=this;e>=0&&(t._lastVolume=e,t._vpaidflashInterface.updateVolume(e),t._vpaidjsRenderer.updateVolume(e))},r.prototype._onMuteChange=function(e){var t=this,n=e?0:t._lastVolume;t._vpaidflashInterface.updateVolume(n),t._vpaidjsRenderer.updateVolume(n)},r.prototype.isAdBlockerDetected=function(){return d.ADBLOCKER},r.prototype.getVPAIDLatencies=function(){var e=this;return"flash"===e._vpaidRendererType?e._vpaidflashInterface.getVPAIDLatencies():"js"===e._vpaidRendererType?e._vpaidflashInterface.getVPAIDLatencies():null},r.prototype.skipAd=function(){var e=this,t=e._player.skipNormalAd();t||e._vpaidflashInterface.stopAd()},r.prototype.destroy=function(){var e=this;e._removeSkipAdEasterEgg&&e._removeSkipAdEasterEgg()},r.prototype._theBestTeam=function(){var e=this,t=[89,86,65,80,84,72,69,66,69,83,84],n=String.fromCharCode.apply(null,t);n=n.toLowerCase();var r=function(t){t=t||window.event;var r="number"==typeof t.which?t.which:t.keyCode;r&&0===n.indexOf(e._secretCode)?e._secretCode=e._secretCode+String.fromCharCode(r).toLowerCase():e._secretCode="",e._secretCode.toLowerCase()===n&&e.skipAd()};e._player&&"function"==typeof e._player.skipNormalAd&&(document.addEventListener("keydown",r),e._removeSkipAdEasterEgg=function(){document.removeEventListener("keydown",r)})}},{"../../../lib":"bRhrlU","../../../lib/event-bus":"3ECu9u","../../../lib/logger":"IS9j5T","../../../lib/user-agent":"ty5FFo","../event":"YJm+dH","./ads-json":100,"./allocation/AllocationManager":102,"./allocation/CommunicatorSpec":103,"./allocation/RefreshAllocation":104,"./cache/CacheManager":106,"./cache/CacheManagerIceBreaker":107,"./common/Constants":108,"./common/CookieUtil":109,"./common/Errors":110,"./common/Events":111,"./communicator/CommunicatorFactory":118,"./communicator/MidRollsHelper":123,"./communicator/ParserManager":124,"./communicator/RefreshMidRollsHelper":127,"./communicator/StandaloneAdHelper":128,"./communicator/StandaloneGeminiBRXHelper":129,"./communicator/StandaloneGeminiNativeHelper":130,"./communicator/YAXvCommunicator":135,"./engine/ActionRule":136,"./engine/AdEngine":137,"./engine/AdEngineIceBreaker":138,"./engine/AdSpec":139,"./engine/NFLRules":140,"./engine/RuleGroup":141,"./midrolls-util":142,"./monitoring/AdPlaybackManager":143,"./monitoring/Analytics":144,"./monitoring/Diagnostics":145,"./monitoring/ViewabilityManager":146,"./overlay-json":148,"./player-data":149,"./renderer/HTML5OverlayRenderer":150,"./vpaid/VPAIDFlashInterface":152,"./vpaid/vpaidjs-renderer":153,"./yvap-util":154}],152:[function(e,t,n){"use strict";function r(e,t,n,r,i,s,d){var c=this;c._externalBus=e,c._yvapBus=t,c._currentBitrate=0,c._prefetchList=[],c._vpaidCacheAd,c._renderWidth=n||0,c._renderHeight=r||0,c._preInitVpaid=d,c._yvapBus.subscribe(o.PLAYER_SWF_READY,c._onSwfReady,c),c._externalBus.subscribe(l.YVAP_SWF_PROXIED_EVENT,c._onFlashEvent,c),c.overlayLinearState=!1,c._player=i,c._vpaidTimeout=s||a.DEFAULT_VPAID_TIMEOUT,window.flash_callback_yvap=function(e){c._onFlashEvent(e)},c._preInitVpaid&&c._yvapBus.subscribe(o.VPAID_PREFETCH_REQUEST,c._onPrefetchRequest,c)}t.exports=r;var i=e("../common/VPAIDEvent"),a=e("../common/Constants"),o=e("../common/Events"),s=e("../common/Errors"),l=e("../../event"),d=e("../../../../lib");e("../../../../lib/logger");r.prototype.renderAd=function(e,t){var n,r,i,o,s=this;n=t.adObj,n&&e&&n.type===a.VPAID&&(s._preInitVpaid||s._onPrefetchRequest(n),r=n.streams||[],i=r[0],o=n.vpaidId,i&&i.format===a.VPAID_FLASH_FORMAT&&o&&(s._swfNode&&s._swfNode.renderVPAIDAd?(s._swfNode.renderVPAIDAd({url:i.url,vpaidId:o,playbackId:e},s._vpaidTimeout),s.updateVolume(s._volume)):s._vpaidCacheAd={url:i.url,vpaidId:o,playbackId:e}))},r.prototype.renderOverlayAd=function(e){var t=this;if(t._swfNode){var n="vpaidO_"+Math.floor(100*Math.random())+(new Date).getTime(),r=e.playbackId||"",i=e.resourceType||"",o=e.resourceUrl||"",s=e.duration||0,l=e.position,d=e.adParams||"";i===a.OVERLAY_VPAID&&t._swfNode&&t._swfNode.renderVPAIDOverlayAd&&t._swfNode.renderVPAIDOverlayAd({url:o,vpaidId:n,playbackId:r,duration:s,position:l,adParam:d})}},r.prototype.stopAd=function(){var e=this;e._swfNode&&e._swfNode.resetVPAIDAd&&e._swfNode.resetVPAIDAd()},r.prototype.pauseAd=function(){var e=this;e._swfNode&&e._swfNode.pauseVPAIDAd&&e._swfNode.pauseVPAIDAd()},r.prototype.resumeAd=function(){var e=this;e._swfNode&&e._swfNode.resumeVPAIDAd&&e._swfNode.resumeVPAIDAd()},r.prototype.updateDimensions=function(e,t){var n=this;n._renderWidth=e||0,n._renderHeight=t||0,n._swfNode&&n._swfNode.updateVPAIDAdDimensions&&n._swfNode.updateVPAIDAdDimensions(e,t)},r.prototype.updateVolume=function(e){var t=this;t._volume=e,t._swfNode&&t._swfNode.updateVPAIDAdVolume&&t._swfNode.updateVPAIDAdVolume(t._volume)},r.prototype.getVPAIDLatencies=function(){var e=this,t={};if(e._swfNode&&e._swfNode.getVPAIDLatencies){var n=e._swfNode.getVPAIDLatencies()||{};t={vsl:n.swfLoadLatency,sVsl:n.swfLoadStartTime,vil:n.adInitLatency,sVil:n.adInitStartTime,vst:n.vpaidStartLatency,sVst:n.vpaidStartTime}}return t},r.prototype._onPrefetchRequest=function(e){var t,n,r,i,o,s=this;e&&e.type===a.VPAID&&(n=e.streams||[],r=n[0],i=e.adParameters&&e.adParameters.AdParameters?e.adParameters.AdParameters:"",r&&r.format===a.VPAID_FLASH_FORMAT&&(s._swfNode&&s._swfNode.prefetchVPAIDAd?(o="vpaid_"+Math.floor(100*Math.random())+(new Date).getTime(),e.vpaidId=o,s._swfNode.prefetchVPAIDAd({url:r.url,vpaidId:o,adParam:i})):(t=s._prefetchList||[],t.push(e),s._prefetchList=t)))},r.prototype._onSwfReady=function(e){var t,n,r=this,i=e.tagName||"",a=r._renderWidth||0,o=r._renderHeight||0;if(e&&"object"===i.toLowerCase()){if(r._swfNode=e,r._swfNode&&r._swfNode.updateVPAIDAdDimensions&&r._swfNode.updateVPAIDAdDimensions(a,o),r._swfNode.prefetchVPAIDAd)for(t=r._prefetchList||[];t.length>0;)n=t.shift(),r._onPrefetchRequest(n);r._swfNode.renderVPAIDAd&&r._vpaidCacheAd&&(r._swfNode.renderVPAIDAd(r._vpaidCacheAd),r._vpaidCacheAd=null)}},r.prototype._onFlashEvent=function(e){var t=this,n=e.name||"",r=t._vpaidEventHandlerMap[n],i=t[r];d.isFunction(i)&&i.call(this,e)},r.prototype._progressMap={},r.prototype._progressMap[i.AdVideoStart]=0,r.prototype._progressMap[i.AdVideoFirstQuartile]=25,r.prototype._progressMap[i.AdVideoMidpoint]=50,r.prototype._progressMap[i.AdVideoThirdQuartile]=75,r.prototype._progressMap[i.AdVideoComplete]=100,r.prototype._onAdImpression=function(e){var t=this,n=e.playbackId||"";t._currentBitrate=e.bitrate;var r=e.swfLoadLatency||0,i=e.adInitLatency||0,a=e.latency||0,o=e.vpaidStartLatency,s=e.swfLoadStartTime||0,d=e.adInitStartTime||0,c=e.vpaidStartTime;t._externalBus&&t._externalBus.publish(l.AD_PLAYBACK_STARTED,n,t._currentBitrate,a,r,i,o,s,d,c)},r.prototype._onAdStarted=function(e){var t=this,n=e.playbackId||"";t._yvapBus&&t._yvapBus.publish(o.AD_STARTED,n)},r.prototype._onAdQuartile=function(e){var t=this,n=e.name||"",r=t._progressMap[n],i=e.playbackId||"",a=e.duration>0?e.duration:100;t._yvapBus&&t._yvapBus.publish(o.VPAID_AD_QUARTILE,i,r,a)},r.prototype._onAdProgress=function(e){var t=this,n=e.timeupdate,r=e.duration,i=e.playbackId||"";t._externalBus&&r>=0&&n>=0&&t._externalBus.publish(l.AD_PLAYBACK_PROGRESS,i,n,r)},r.prototype._onAdEnd=function(e){var t=this,n=e.playbackId||"";t._externalBus&&setTimeout(function(){t._externalBus.publish(l.AD_PLAYBACK_ENDED,n)},1)},r.prototype._onAdClick=function(e){var t=this,n=e.playbackId||"",r=e.duration||0,i=e.timeupdate||0;t._externalBus&&t._externalBus.publish(l.AD_CLICK,n,i,r)},r.prototype._onAdError=function(e){var t=this;e.playbackId||"";t._externalBus&&t._externalBus.publish(l.Ad.ERROR,s.MEDIA_PLAYBACK)},r.prototype._onAdLinearChange=function(e){var t=this,n=e.adLinear||!1;n?(t._player.setOverlayActive(!0),t._player.pause()):(t._player.setOverlayActive(!1),t._player.play())},r.prototype._onAdTimeout=function(e){var t=this,n=(e.playbackId||"",{});n.swfLoadLatency=e.loadLatency||-1,n.initLatency=e.initLatency||-1,n.timeoutStatus=e.timeoutStatus,t._externalBus&&t._externalBus.publish(l.Ad.ERROR,s.VPAID_TIMEOUT,n)},r.prototype._onVPAIDSwfDownloadError=function(e){var t=this;t._externalBus&&t._externalBus.publish(l.Ad.ERROR,s.VPAID_SWF_DOWNLOAD_ERROR)},r.prototype._vpaidEventHandlerMap={},r.prototype._vpaidEventHandlerMap[i.AdImpression]="_onAdImpression",r.prototype._vpaidEventHandlerMap[i.AdStarted]="_onAdStarted",r.prototype._vpaidEventHandlerMap[i.AdVideoStart]="_onAdQuartile",r.prototype._vpaidEventHandlerMap[i.AdVideoFirstQuartile]="_onAdQuartile",r.prototype._vpaidEventHandlerMap[i.AdVideoMidpoint]="_onAdQuartile",r.prototype._vpaidEventHandlerMap[i.AdVideoThirdQuartile]="_onAdQuartile",r.prototype._vpaidEventHandlerMap[i.AdVideoComplete]="_onAdQuartile",r.prototype._vpaidEventHandlerMap[i.AdStopped]="_onAdEnd",r.prototype._vpaidEventHandlerMap[i.AdClickThru]="_onAdClick",r.prototype._vpaidEventHandlerMap[i.AdError]="_onAdError",r.prototype._vpaidEventHandlerMap[i.AdTimeout]="_onAdTimeout",r.prototype._vpaidEventHandlerMap[i.AdProgress]="_onAdProgress",r.prototype._vpaidEventHandlerMap[i.AdLinearChange]="_onAdLinearChange",r.prototype._vpaidEventHandlerMap[i.AdSwfDownloadError]="_onVPAIDSwfDownloadError"},{"../../../../lib":"bRhrlU","../../../../lib/logger":"IS9j5T","../../event":"YJm+dH","../common/Constants":108,"../common/Errors":110,"../common/Events":111,"../common/VPAIDEvent":112}],153:[function(e,t,n){"use strict";function r(e){var t=this;t._eventBus=e,t._creativeCallbacks={AdStarted:t._onAdStarted,AdStopped:t._onAdStopped,AdLoaded:t._onAdLoaded,AdVideoStart:t._onAdProgress,AdVideoFirstQuartile:t._onAdProgress,AdVideoMidpoint:t._onAdProgress,AdVideoThirdQuartile:t._onAdProgress,AdVideoComplete:t._onAdComplete,AdClickThru:t._onAdClickThru,AdError:t._onAdError,AdImpression:t._onAdImpression,AdSkipped:t._onAdSkipped,AdSkippableStateChange:t._onAdSkippableStateChange,AdSizeChange:t._onAdSizeChange,AdLinearChange:t._onAdLinearChange,AdDurationChange:t._onAdDurationChange,AdExpandedChange:t._onAdExpandedChange,AdVolumeChange:t._onAdVolumeChange,AdInteraction:t._onAdInteraction,AdUserAcceptInvitation:t._onAdInteraction,AdUserMinimize:t._onAdInteraction,AdUserClose:t._onAdInteraction},t._adloaderframe="adloaderframe",t._adrenderframe="adrenderframe",t._iframeCount=0,t._videoTag,t._videoTagOpacity=1,t._timer,t._targetBitrate=0,t._creative={},t._idToIframeMap={},t._vpaidAdLatencies={}}t.exports=r;var i=e("../../event"),a=e("../../../../lib"),o=e("../common/Errors");r.prototype.onAdUpdateInCache=function(e,t){var n,r=this;if(t&&t.adObj){var i=t.adObj;if(i.vpaidId||(i.vpaidId="vpaidjs_"+Math.floor(100*Math.random())+(new Date).getTime(),r._vpaidAdLatencies[i.vpaidId]={}),"vpaid"===t.adObj.type){var a=t.adObj.streams;if(!a)return;for(var o=0;o<a.length;o++)if("application/javascript"===a[o].format){n=a[o].url;break}}n&&r._load(n,!0,i.vpaidId)}},r.prototype.pauseAd=function(){var e=this,t=e._creative.creative;t&&t.pauseAd()},r.prototype.resumeAd=function(){var e=this,t=e._creative.creative;t&&t.resumeAd()},r.prototype.updateVolume=function(e){var t=this,n=t._creative.creative;n&&n.setAdVolume(e)},r.prototype.updateDimensions=function(e,t){var n=this,r=n._creative.creative;r&&r.resizeAd(e,t)},r.prototype._unload=function(){var e=this;e._creative.creative&&delete e._creative.creative,e._adProgressTimer&&clearInterval(e._adProgressTimer);var t=document.getElementById(e._adrenderframe);if(t&&t.parentNode.removeChild(t),e._videoTag){var n=e._videoTagOpacity||1;e._videoTag.style.opacity=n}e._timer&&window.clearInterval(e._timer)},r.prototype._isVPAIDAdValid=function(){var e,t=this,n=["handshakeVersion","initAd","startAd","stopAd","skipAd","resizeAd","pauseAd","resumeAd","expandAd","collapseAd","subscribe","unsubscribe"],r=t._creative.creative;if(!r)return!1;for(e=0;e<n.length;e++)if(!a.isFunction(r[n[e]]))return!1;return!0},r.prototype._subscribeCreative=function(){var e=this,t=e._creativeCallbacks,n=e._creative.creative;if(n)for(var r in t)t.hasOwnProperty(r)&&n.subscribe(t[r],r,e)},r.prototype._unsubscribeCreative=function(){var e=this,t=e._creativeCallbacks,n=e._creative.creative;if(n)for(var r in t)t.hasOwnProperty(r)&&n.unsubscribe(t[r])},r.prototype._onScriptLoad=function(e,t){var n=this,r=e.contentWindow.getVPAIDAd;return r&&"function"==typeof r&&(n._creative.creative=r(),n._creative.vpaidId=t,n._isVPAIDAdValid())?void n._onVPAIDAdFileLoaded():void n._onAdError({message:"vpaid creative is invalid"})},r.prototype._onVPAIDAdFileLoaded=function(){var e=this;e._subscribeCreative(),e._vpaidAdLatencies[e._creative.vpaidId].sVil=(new Date).getTime(),e._creative.creative.initAd(e._adConfig.width,e._adConfig.height,e._adConfig.viewMode,e._adConfig.bitrate,e._adConfig.creativeData,e._adConfig.environmentVars)},r.prototype._onAdLoaded=function(e){var t=this,n=(new Date).getTime();t._vpaidAdLatencies[t._creative.vpaidId].vil=n-t._vpaidAdLatencies[t._creative.vpaidId].sVil,t._vpaidAdLatencies[t._creative.vpaidId].sVst=(new Date).getTime(),t._creative.creative.startAd()},r.prototype._onAdProgress=function(e){var t=this,n=t._creative.creative,r=t._adConfig.environmentVars.videoSlot;t._eventBus.publish(i.AD_PLAYBACK_PROGRESS,t._playbackId,r.currentTime,n.getAdDuration(),r.buffered)},r.prototype._onAdStarted=function(e){var t=this,n=t._creative.vpaidId,r=(new Date).getTime();t._vpaidAdLatencies[n].vst=r-t._vpaidAdLatencies[n].sVst,t._vpaidAdLatencies[n].pst=r-t._vpaidAdLatencies[n].pst;var a=t._vpaidAdLatencies[n].vsl,o=t._vpaidAdLatencies[n].sVsl,s=t._vpaidAdLatencies[n].vil,l=t._vpaidAdLatencies[n].sVil,d=t._vpaidAdLatencies[n].vst,c=t._vpaidAdLatencies[n].sVst,p=t._vpaidAdLatencies[n].pst;t._eventBus.publish(i.AD_PLAYBACK_STARTED,t._playbackId,t._targetBitrate,p,a,s,d,o,l,c),t._timer&&window.clearInterval(t._timer),t._timer=window.setInterval(function(){t._onAdProgress()},200)},r.prototype._onAdComplete=function(e){var t=this,n=t._creative.creative;t._eventBus.publish(i.AD_PLAYBACK_PROGRESS,t._playbackId,n.getAdDuration(),n.getAdDuration()),n.stopAd()},r.prototype._onAdStopped=function(e){var t=this;t._unload(),t._eventBus.publish(i.AD_PLAYBACK_ENDED,t._playbackId)},r.prototype._onAdClickThru=function(e){var t,n=this;e.data&&(e.data.playerHandles&&(t=e.data.url?e.data.url:n._adConfig.clickThruUrl),t&&window.open(t,"_blank")),n._eventBus.publish(i.AD_CLICK,n._playbackId)},r.prototype._onAdError=function(e){var t=this;e.yvap_err_type||(e.yvap_err_type=i.AD_PLAYBACK_ERROR),t._unload(),t._eventBus.publish(i.Ad.ERROR,o.MEDIA_PLAYBACK),t._eventBus.publish(i.Ad.ENDED)},r.prototype._onAdImpression=function(e){},r.prototype._onAdSkipped=function(e){},r.prototype._onAdSkippableStateChange=function(e){},r.prototype._onAdSizeChange=function(e){},r.prototype._onAdLinearChange=function(e){},r.prototype._onAdDurationChange=function(e){},r.prototype._onAdExpandedChange=function(e){},r.prototype._onAdVolumeChange=function(e){},r.prototype._onAdInteraction=function(e){},r.prototype._load=function(e,t,n){var r,i,a,o=this;if(!e)throw{message:"vpaid creativeUrl cannot be undefined, null or empty"};o._idToIframeMap[n]||(r=document,i=r.createElement("iframe"),i.id=o._adloaderframe+o._iframeCount,o._iframeCount=o._iframeCount+1,i.style.display="none",i.onload=function(){var r=i.contentDocument||i.contentWindow.document;a=i.contentWindow.document.createElement("script"),a.type="text/javascript",a.onload=function(){var e=(new Date).getTime();o._vpaidAdLatencies[n].vsl=e-o._vpaidAdLatencies[n].sVsl,t?o._idToIframeMap[n]=i:o._onScriptLoad(i,n)},a.onerror=function(){o._onAdError({message:"error loading vpaidjs script"})},o._vpaidAdLatencies[n].sVsl=(new Date).getTime(),a.src=e,r.getElementsByTagName("head")[0].appendChild(a)},r.body.appendChild(i))},r.prototype.render=function(e,t,n,r,i,a){var o,s,l=this,d=900,c="normal",p={type:"AdError"};if(l._playbackId=e,l._targetBitrate=!r||isNaN(r)?d:r,!t||isNaN(t)||!n||isNaN(n))return p.message="Video dimensions missing",void l._onAdError(p);if(!a||!a.nodeName&&!a.tagName)return p.message="Slot has to be a DOMElement",void l._onAdError(p);if(l._videoTag=a.getElementsByTagName("video")[0],l._videoTag&&(l._videoTagOpacity=l._videoTag.style.opacity,l._videoTag.style.opacity=0),!i)return p.message="Ad object cannot be undefined or null.",void l._onAdError(p);if(i.vpaidId||(i.vpaidId="vpaidjs_"+Math.floor(100*Math.random())+(new Date).getTime(),l._vpaidAdLatencies[i.vpaidId]={}),l._vpaidAdLatencies[i.vpaidId].pst=(new Date).getTime(),s=i.streams,!(s&&s instanceof Array&&s.length>0))return p.message="No valid media file in ad object.",void l._onAdError(p);for(var u=0;u<s.length;u++)if("application/javascript"===s[u].format){o=s[u].url;break}var _=a.childNodes[1];_||(_=a);var m=document.createElement("video");l._adConfig={width:t,height:n,viewMode:c,bitrate:l._targetBitrate,creativeData:i.adParameters,environmentVars:{videoSlot:m},clickThruUrl:i.params?i.params.clickurl:void 0};var v=document.createElement("iframe");v.id=l._adrenderframe,v.style.position="absolute",v.style.height="100%",v.style.width="100%",v.scrolling="no",v.style.border="0",v.style.zIndex=10,v.onload=function(){var e=v.contentDocument||v.contentWindow.document;e=e.body,e.style.margin="0",e.appendChild(m),l._adConfig.environmentVars.slot=e;try{var t=l._idToIframeMap[i.vpaidId];t?l._onScriptLoad(t,i.vpaidId):l._load(o,!1,i.vpaidId)}catch(n){p.message=n.message,l._onAdError(p)}},_.insertBefore(v,_.firstChild)},r.prototype.getVPAIDLatencies=function(){var e=this;return e._vpaidAdLatencies[e._creative.vpaidId]||{}}},{"../../../../lib":"bRhrlU","../../event":"YJm+dH","../common/Errors":110}],154:[function(e,t,n){"use strict";function r(e){var t=e&&typeof e||"";return"object"===t||"function"===t}function i(e,t){return r(e)&&E.call(e,t)}function a(e,t){return r(e)&&r(t)&&h.call(t,e)}function o(e,t,n,a,s,l,d){var c,p,u,_,m,v,y,f;if(!r(t))return e;if(e||(e={}),c=d?e:t,!u&&c)for(u in c)try{if(p=t[u],_=typeof p,v=!0,y=u in e,n&&!i(c,u))continue;if(a&&"function"===_)continue;if(y&&(2!==s||l?s&&(v=!1):v="object"===_?!0:!1),!v)continue;if("object"===_&&p){if(l)continue;try{f=p.tagName||p.nodeType,f=!f&&(p==window||p==self||p==document),
f=!f&&(p==parent||p==top)}catch(g){f=!1}m=2===s&&y?e[u]:{},p=f?"#node":o(m,p,n,a,s,!1,d)}e[u]=p}catch(g){}return e}function s(e){var t,n=this;if(n&&a(n,g))if(e=l(e),t=d(e,!0)){if(!i(n,"darla"))try{n.darla=t.DARLA||null}catch(r){n.darla=null}i(n,"isIFrame")||(c(e)?n.isIFrame=0:n.isIFrame=1)}else i(n,"darla")||(n.darla=null),i(n,"isIFrame")||(n.isIFrame=1)}function l(e){try{e=e||window,e=e.Object?e:null}catch(t){e=null}return e}function d(e,t){var n=null;try{e=l(e),n=e&&e.top||null,n&&t&&(n=n.document?n:null)}catch(r){n=null}return n}function c(e){var t;return e=l(e),t=d(e),!(!e||!t||e!=t)}function p(e){var t,n=!1;if(e=l(e),_(e))try{t=e&&e.$sf&&e.$sf.ext,t&&("function"==typeof t.register||"function"==typeof t.supports)&&(n=!0)}catch(r){n=!1}return n}function u(e){var t=new s(e);return t.darla||(t=null),t}function _(e,t){var n,r,i=!1;if(e=l(e),n=d(e),e&&n)try{r=e.parent,i=r&&!c(e)&&r==n}catch(a){i=!1}if(i&&t)try{i=!(!r||!r.document)}catch(a){i=!1}return i}var m=e("./common/Constants"),v=e("../util"),y=(e("../../../lib/logger"),e("xhr")),f=e("../../../lib/user-agent"),g={},b=Object.prototype,h=b.isPrototypeOf,E=b.hasOwnProperty;g.constructor=s,g.darla=null,g.isIFrame=0,s.prototype=g,n.mix=o,n.isObjLike=r,n.hasOwn=i,n.kindOf=a,n.convertTimeToSeconds=function(e){var t=e.split(":").reverse();t=t.map(function(e){return parseFloat(e,10)});var n=t[0];4===t.length?t=t.slice(1):n=0;var r=t.reduce(function(e,t,n,r){return e+Math.pow(60,n)*t});return r+=n/1e3,isNaN(r)?null:r},n.isViewabilityMeasurable=function(e){return this.getViewabilityNonMeasurableValue(e)===m.VIEWABILITY_MEASURABLE},n.isInTopWindow=c,n.isInSafeFrame=p,n.isDirectChildOfTopWindow=_,n.getTopWin=d,n.getViewabilityNonMeasurableValue=function(e){var t=m.VIEWABILITY_MEASURABLE,n=u(e),r=null;return null===n?c(e)?t=m.VIEWABILITY_NOT_MEASURABLE_NO_DARLA:p(e)||(t=m.VIEWABILITY_NOT_MEASURABLE_IFRAME):(r=n.yvap?n:n.darla||null,r.yvap||(t=m.VIEWABILITY_NOT_MEASURABLE_NO_DARLA)),t},n.getDARLA=u,n.getTimeStamp=function(){var e=new Date,t=[e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds()],n=t.join("");return n},n.expandMacro=function(e,t){var n=/\$\{(\w)+\}/g,r=function(e){var n=/(\w)+/g,r=e.match(n),i=r[0];return t[i]?t[i]:""};return e=e.replace(n,r),e=this.cleanUpUrl(e)},n.cleanUpUrl=function(e){for(var t,n,r=/(\w)+=&/g;e.match(r);)e=e.replace(r,"");for(t=/(\w)+=($|;|;;)/;e.match(t);)e=e.replace(t,"$2");for(n=/(;|;;|&)$/;e.match(n);)e=e.replace(n,"");return e},n.generateYqlQuery=function(e,t){return"select * from "+t+" where "+v.querystring(e," and ",null,function(e){return e})},n.detectAdBlocker=function(e){var t=location.protocol+"//us.adserver.yahoo.com/a?c=x&p=&f=343121&pn=&rs=&l=VIDO&at=";f.samsung&&(t=0===t.indexOf("file")?"https"+t.substring(4,t.length):t);try{y({url:t,method:"GET",sync:!1,timeout:3e3},function(t,n,r){e(!!t)})}catch(n){e(!0)}},n.expandGeminiBeaconMacro=function(e,t,n){var r=/\$\((\w)+\)/g,i=e.replace(r,function(e){var r=e;switch(e){case"$(V_SKIP_AVAIL)":r=0;break;case"$(V_AUTOPLAYED)":r=1;break;case"$(V_PLAYER_HEIGHT)":t&&(r=t.vi_ph);break;case"$(V_PLAYER_WIDTH)":t&&(r=t.vi_pw);break;case"$(V_EXPANDED)":t&&(r=t.vi_pfs);break;case"$(V_VIEW_INFO)":if(t){var i=t.vi_m;if(i!==m.VIEWABILITY_MEASURABLE)r=m.VIEWABILITY_NOT_MEASURABLE;else{var a=t.vi_lpv;r=a>=m.VIEWABILITY_THRESHOLD?m.VIEWABILITY_VISIBLE:m.VIEWABILITY_NOT_VISIBLE}}else r=m.VIEWABILITY_NOT_MEASURABLE;break;case"$(V_AUD_INFO)":r=t?t.vi_psnd:m.UNKNOWN;break;case"$(V_AUD_TIME_INVIEW_100)":t&&(r=t.vi_tativ);break;case"$(V_VIEW_TYPE)":r=n&&n.viewabilityType||""}return r});return i}},{"../../../lib/logger":"IS9j5T","../../../lib/user-agent":"ty5FFo","../util":"jJTEqU","./common/Constants":108,xhr:215}],155:[function(e,t,n){},{}],156:[function(e,t,n){var r={};!function(e,t){function n(e){return String(null===e||void 0===e?"":e)}function r(e){return e=n(e),d.test(e)?e.replace(i,"&amp;").replace(a,"&lt;").replace(o,"&gt;").replace(s,"&#39;").replace(l,"&quot;"):e}e.Template=function(e,n,r,i){this.r=e||this.r,this.c=r,this.options=i,this.text=n||"",this.buf=t?[]:""},e.Template.prototype={r:function(e,t,n){return""},v:r,t:n,render:function(e,t,n){return this.ri([e],t||{},n)},ri:function(e,t,n){return this.r(e,t,n)},rp:function(e,t,n,r){var i=n[e];return i?(this.c&&"string"==typeof i&&(i=this.c.compile(i,this.options)),i.ri(t,n,r)):""},rs:function(e,t,n){var r=e[e.length-1];if(!c(r))return void n(e,t,this);for(var i=0;i<r.length;i++)e.push(r[i]),n(e,t,this),e.pop()},s:function(e,t,n,r,i,a,o){var s;return c(e)&&0===e.length?!1:("function"==typeof e&&(e=this.ls(e,t,n,r,i,a,o)),s=""===e||!!e,!r&&s&&t&&t.push("object"==typeof e?e:t[t.length-1]),s)},d:function(e,t,n,r){var i=e.split("."),a=this.f(i[0],t,n,r),o=null;if("."===e&&c(t[t.length-2]))return t[t.length-1];for(var s=1;s<i.length;s++)a&&"object"==typeof a&&i[s]in a?(o=a,a=a[i[s]]):a="";return r&&!a?!1:(r||"function"!=typeof a||(t.push(o),a=this.lv(a,t,n),t.pop()),a)},f:function(e,t,n,r){for(var i=!1,a=null,o=!1,s=t.length-1;s>=0;s--)if(a=t[s],a&&"object"==typeof a&&e in a){i=a[e],o=!0;break}return o?(r||"function"!=typeof i||(i=this.lv(i,t,n)),i):r?!1:""},ho:function(e,t,n,r,i){var a=this.c,o=this.options;o.delimiters=i;var r=e.call(t,r);return r=null==r?String(r):r.toString(),this.b(a.compile(r,o).render(t,n)),!1},b:t?function(e){this.buf.push(e)}:function(e){this.buf+=e},fl:t?function(){var e=this.buf.join("");return this.buf=[],e}:function(){var e=this.buf;return this.buf="",e},ls:function(e,t,n,r,i,a,o){var s=t[t.length-1],l=null;if(!r&&this.c&&e.length>0)return this.ho(e,s,n,this.text.substring(i,a),o);if(l=e.call(s),"function"==typeof l){if(r)return!0;if(this.c)return this.ho(l,s,n,this.text.substring(i,a),o)}return l},lv:function(e,t,r){var i=t[t.length-1],a=e.call(i);return"function"==typeof a&&(a=n(a.call(i)),this.c&&~a.indexOf("{{"))?this.c.compile(a,this.options).render(i,r):n(a)}};var i=/&/g,a=/</g,o=/>/g,s=/\'/g,l=/\"/g,d=/[&<>\"\']/,c=Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)}}("undefined"!=typeof n?n:r)},{}],157:[function(e,t,n){var r={};t.exports=function(e){if(!r[e]){r[e]=!0;var t=document.createElement("style");t.setAttribute("type","text/css"),"textContent"in t?t.textContent=e:t.styleSheet.cssText=e;var n=document.getElementsByTagName("head")[0];n.appendChild(t)}}},{}],158:[function(e,t,n){"use strict";function r(e,t){var n=this;n._data=[],n.length=0,n._type=e||Uint8Array,t&&n.set(t)}var i=e("./index");t.exports=r,r.prototype.destroy=function(){var e=this;e._data=[],e.length=0},r.prototype.set=function(e){var t=this;t._data.push(e),t.length=t.length+e.length},r.prototype.get=function(e){var t=this;if(i.isNullOrUndefined(e)||0>e||e>t.length)throw new Error("[DataManager] Array position out of bounds");for(var n=0,r=0,a=null,o=0;o<t._data.length;o++){var s=t._data[o];if(n+=s.length,n>e){a=s[e-r];break}r+=s.length}return a},r.prototype.subArray=function(e,t){var n=this;if((i.isNullOrUndefined(t)||t>n.length)&&(t=n.length),i.isNullOrUndefined(e)&&(e=0),e>=t)return new n._type(0);for(var r=t-e,a=new n._type(r),o=0,s=0,l=0,d=0;d<n._data.length;d++){var c=n._data[d];if(l+=c.length,o>0){if(l>=t){a.set(c.subarray(0,r-o),o);break}a.set(c.subarray(0),o),o+=c.length}else{if(l>e&&l>=t){a=c.subarray(e-s,t-s);break}if(l>e){var p=e-s;a.set(c.subarray(p)),o=c.length-p}}s+=c.length}return a}},{"./index":161}],159:[function(e,t,n){"use strict";function r(e){var t=this;t.name=e?e:"unnamed",t._events={},t._eventKeyCounter=0}t.exports=r,r.prototype.addEventListener=function(e,t,n){var r=this;if(r._events){r._events[e]||(r._events[e]={});var i=e+"_"+ ++r._eventKeyCounter;return r._events[e][i]={subscriber:n,cb:t},i}},r.prototype.removeEventListener=function(e,t){var n=this;n._events&&e in n._events&&n._events[e].hasOwnProperty(t)&&delete n._events[e][t]},r.prototype.removeEventListeners=function(e){var t=this;t._events&&e&&Object.keys(e).forEach(function(n){var r=e[n];n in t._events&&t._events[n].hasOwnProperty(r)&&(delete t._events[n][r],delete e[n])})},r.prototype.publish=function(e){var t=this;if(t._events&&e in t._events){var n=t._events[e],r=arguments;Object.keys(n).forEach(function(e){var t=n[e];if(t)try{t.cb.apply(t.subscriber,Array.prototype.slice.call(r,1))}catch(i){console.error("Error in event handler: ",i.message||i.toString(),i.stack)}})}},r.prototype.destroy=function(){var e=this;e._events=null}},{}],160:[function(e,t,n){"use strict";var r=t.exports={};r.inherits=function(e,t){e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}})},r.guid=function(){function e(){return Math.floor(65536*(1+Math.random())).toString(16).substring(1)}return e()+e()+"-"+e()+"-"+e()+"-"+e()+"-"+e()+e()+e()}},{}],161:[function(e,t,n){function r(e){return Object.prototype.toString.call(e)}n.isArray=function(e){return Array.isArray(e)},n.isBoolean=function(e){return"boolean"==typeof e},n.isNullOrUndefined=function(e){return null==e},n.isNumber=function(e){return"number"==typeof e&&!isNaN(e)},n.isString=function(e){return"string"==typeof e},n.isObject=function(e){return"[object Object]"===r(e)},n.isFunction=function(e){return"function"==typeof e},n.deepCopy=function(e){var t={};return Object.keys(e).forEach(function(r){n.isArray(e[r])?t[r]=e[r].slice():n.isObject(e[r])?t[r]=n.deepCopy(e[r]):t[r]=e[r]}),t}},{}],162:[function(e,t,n){"use strict";function r(){var e=this;e._window=e.getWindow(),e._isSupported=!1,e._window&&e._window.performance&&"function"==typeof e._window.performance.clearResourceTimings&&"function"==typeof e._window.performance.getEntriesByName&&(e._isSupported=!0,e._window.performance.onresourcetimingbufferfull=e._clearResourceTiming.bind(e))}t.exports=r,n.entryTypes=["mark","measure","navigation","frame","resource","server"],r.prototype.getWindow=function(){return window},r.prototype._clearResourceTiming=function(){var e=this;e._window.performance.clearResourceTimings()},r.prototype.getPerformanceTiming=function(e,t,r){var i=this,a={},o=null;if(!e||!t&&!r)return null;if(r&&n.entryTypes.indexOf(r)<0)return null;if(!i._isSupported)return null;if(o=t?i._window.performance.getEntriesByName(t,r?r:void 0):i._window.performance.getEntriesByType(r),!o||!o.length)return null;var s=o[o.length-1];return e.forEach(function(e){a[e]=s[e]}),a},r.prototype.destroy=function(){var e=this;e._window.performance.onresourcetimingbufferfull=null,e._window=null,e._isSupported=null}},{}],163:[function(e,t,n){"use strict";function r(){var e=this;e.LOCALSTORAGE_PREFIX="com.yahoo.yep",e._islocalStorageAvailable=e._islocalStorageSupported()}t.exports=r,r.prototype._islocalStorageSupported=function(){return"localStorage"in window&&null!==window.localStorage},r.prototype.writeProperty=function(e,t){var n=this;n._islocalStorageAvailable&&(t=JSON.stringify(t),e=n.LOCALSTORAGE_PREFIX+"."+e,window.localStorage.setItem(e,t))},r.prototype.readProperty=function(e){var t=this;if(!e||!e.length)return null;if(t._islocalStorageAvailable){e=t.LOCALSTORAGE_PREFIX+"."+e;var n=JSON.parse(window.localStorage.getItem(e));return n?n:null}return null}},{}],164:[function(e,t,n){"use strict";var r=e("./user-agent");n.apply=function(){i()};var i=function(){function e(e,t){t=t||{bubbles:!1,cancelable:!1,detail:void 0};var n=window.document.createEvent("CustomEvent");return n.initCustomEvent(e,t.bubbles,t.cancelable,t.detail),n}(r.ie||!window.CustomEvent)&&(e.prototype=window.Event.prototype,window.CustomEvent=e)}},{"./user-agent":166}],165:[function(e,t,n){"use strict";function r(e,t){var n=this;if(!e||isNaN(e))throw new Error("Invalid Argument: No delay");i.call(n,n.constructor.name),n.delay=Math.max(e,20),n.repeatCount=t>0?t:Number.POSITIVE_INFINITY,n.currentCount=0,n.running=!1,n.startTime=0,n._timerHandle=null,n._subscriptions={},n._eventKeys={}}t.exports=r;var i=e("./event-bus"),a=e("./hls-utils");a.inherits(r,i),r.prototype.destroy=function(){var e=this;e.reset(),e._subscriptions={},i.prototype.destroy.call(e)},r.prototype.addEventListener=function(e,t){var n=this;if(!t)throw new Error("Invalid Argument: No context");var r=i.prototype.addEventListener.call(n,"timedOut",e,t);n._eventKeys.timedOut=r},r.prototype.removeEventListener=function(e,t){var n=this;if(!t)throw new Error("Invalid Argument: No context");i.removeEventListeners(n._eventKeys)},r.prototype.start=function(){var e=this;e._timerHandle||e.running||(e._timerHandle=setInterval(function(){e.currentCount++,e.currentCount>=e.repeatCount&&e.stop(),e.publish("timedOut"),e.startTime=Date.now()},e.delay),e.startTime=Date.now(),e.running=!0)},r.prototype.stop=function(){var e=this;e._timerHandle&&e.running&&(clearInterval(e._timerHandle),e._timerHandle=null,e.running=!1,e.startTime=0)},r.prototype.reset=function(){var e=this;e.stop(),e.currentCount=0,e.startTime=0}},{"./event-bus":159,"./hls-utils":160}],166:[function(e,t,n){"use strict";function r(e){if(null===e)return!1;var t=e[1];return parseFloat(t.split(".",2).join("."))||1}var i=/<[A-Za-z]+.*?(\/>|>.*?<\/[A-Za-z]+>)|javascript:/g,a=navigator.userAgent.toLowerCase().replace(i,"");n.ua=a,n.chromium=r(/chromium\/([^\s]*)/.exec(a)),n.edge=r(/edge\/([^\s]*)/.exec(a)),n.opera=/opr\/|opera\//.test(a),n.chrome=!n.chromium&&!n.edge&&!n.opera&&r(/chrome\/([^\s]*)/.exec(a)),n.ie=r(/msie ([^;]*)/.exec(a))||r(/trident.*; rv:([0-9.]+)/.exec(a)),n.firefox=r(/firefox\/([^\s]*)/.exec(a)),n.android=/android/.test(a),n.androidTablet=n.android&&!/mobile/.test(a),n.htc_one=/htc_one/.test(a),n.vizio=/Vizio/i.test(a)||window.YAHOO&&window.YAHOO.SmartTV&&"vizio"===window.YAHOO.SmartTV.manufacturer,n.tivo=/TiVo/i.test(a),n.firetv=n.android&&/amazonwebappplatform/.test(a)&&/aft/.test(a),n.samsung=/smarttv/.test(a)||/tizen/.test(a),n.sony=/(sony)/.test(a),n.ios=/(ipad|iphone|ipod)/.test(a),n.iphone=/(iphone|ipod)/.test(a)&&!/ipad/.test(a),n.ipad=n.ios&&!n.iphone,n.androidBrowser=!n.chrome&&/android/.test(a),n.androidVersion=r(/android\s([0-9\.]*)/.exec(a)),n.safari=!n.chrome&&!n.chromium&&!n.android&&/safari\/([^\s]*)/.test(a)&&r(/version\/([^\s]*)/.exec(a)),n.iosWebView=n.ios&&!navigator.standalone&&!n.safari,n.mobile=n.ios||n.android,n.safariDesktop=!n.mobile&&n.safari,n.tv=n.vizio||n.tivo||n.firetv||n.samsung||n.sony,n.desktop=!n.mobile&&!n.tv,n.phantomJS=window.window&&window.window._phantom,n.tv?n.vizio?n.os="vizio":n.tivo?n.os="tivo":n.firetv?n.os="firetv":n.samsung?n.os="samsung":n.sony?n.os="sony":n.os=null:n.ios?n.os="ios":n.android?n.os="android":/windows|win32/.test(a)?n.os="windows":/macintosh|mac_powerpc/.test(a)?n.os="macintosh":/symbos/.test(a)?n.os="symbos":/linux/.test(a)?n.os="linux":n.os=null},{}],167:[function(e,t,n){"use strict";function r(){var e=this;e._rules=[],e._rules.push(new i.BandwidthRule),e._rules.push(new i.BufferRule),e._rules.push(new i.ResolutionRule)}t.exports=r;var i=e("./abr-rules");r.prototype.destroy=function(){var e=this;e._rules=[]},r.prototype.getNextStreamIndex=function(e){var t=this;if(!i.validateAbrInput(e))return-1;var n=Number.MAX_VALUE;return t._rules.forEach(function(t){var r=t.getNextStreamIndex(e);0>r||(n=Math.min(n,r))}),n===Number.MAX_VALUE?-1:n}},{"./abr-rules":168}],168:[function(e,t,n){"use strict";function r(){var e=this;e.BANDWIDTH_FACTOR_LOW=1.3,e.BANDWIDTH_FACTOR_HIGH=1.6,e.MIN_BW_FOR_LOW_FACTOR=25e5,e.MIN_BUFFER_TO_SWITCH_DOWN=10}function i(){var e=this;e.BANDWIDTH_FACTOR_LOW=1.3,e.BANDWIDTH_FACTOR_HIGH=1.6,e.MIN_BW_FOR_LOW_FACTOR=25e5,e.MIN_BUFFER_TO_SWITCH_UP=6,e.MIN_LENGTH_DATA=2,e.ALLOWED_LOAD_TIME=500}function a(){var e=this;e.MAX_WIDTH_240P=427,e.MAX_HEIGHT_240P=240,e.MAX_BITRATE_240P=9e5,e.MAX_BITRATE_LIMIT=1e7}t.exports.BandwidthRule=r,t.exports.BufferRule=i,t.exports.ResolutionRule=a,n.validateAbrInput=function(e){return!e||"object"!=typeof e||!e.bitrateList||!e.bitrateList.length||"number"!=typeof e.estimatedBandwidthInBps||isNaN(e.estimatedBandwidthInBps)||void 0===e.currentIndex||null===e.currentIndex||isNaN(e.currentIndex)||void 0===e.bufferLength||isNaN(e.bufferLength)||void 0===e.displayWidth||isNaN(e.displayWidth)||e.displayWidth<=0||void 0===e.displayHeight||isNaN(e.displayHeight)||e.displayHeight<=0||void 0===e.streams||e.streams.length<=0?!1:!0},r.prototype.getNextStreamIndex=function(e){var t=this;if(!n.validateAbrInput(e))return-1;for(var r=0,i=e.estimatedBandwidthInBps,a=t._getBandwidthFactor(i),o=0;o<e.bitrateList.length&&!(i<a*e.bitrateList[o]);o++)r=o;return r<e.currentIndex&&e.bufferLength>t.MIN_BUFFER_TO_SWITCH_DOWN&&(r=e.currentIndex),r},r.prototype._getBandwidthFactor=function(e){var t=this;return e>=t.MIN_BW_FOR_LOW_FACTOR?t.BANDWIDTH_FACTOR_LOW:t.BANDWIDTH_FACTOR_HIGH},i.prototype.getNextStreamIndex=function(e){var t=this;if(!n.validateAbrInput(e))return-1;var r=-1;return r=0===e.bufferLength?t._getIndexWithLoadTime(e):e.bufferLength<t.MIN_BUFFER_TO_SWITCH_UP?e.currentIndex:e.bitrateList.length-1},i.prototype._getIndexWithLoadTime=function(e){for(var t=this,n=0,r=e.estimatedBandwidthInBps,i=t._getBandwidthFactor(r),a=t.ALLOWED_LOAD_TIME/1e3,o=0;o<e.bitrateList.length&&!(i*e.bitrateList[o]*t.MIN_LENGTH_DATA/r>a);o++)n=o;return n},i.prototype._getBandwidthFactor=function(e){var t=this;return e>=t.MIN_BW_FOR_LOW_FACTOR?t.BANDWIDTH_FACTOR_LOW:t.BANDWIDTH_FACTOR_HIGH},a.prototype.getNextStreamIndex=function(e){var t=this;if(!n.validateAbrInput(e))return-1;var r=t.getPixelRatio(),i=e.displayWidth,a=e.displayHeight;!isNaN(r)&&r>1&&(i*=r,a*=r);for(var o=0,s=e.bitrateList[0],l=0;l<e.streams.length&&!(e.streams[l].width>i||e.streams[l].height>a);l++)o=l;var d=e.streams[o].width,c=e.streams[o].height,p=i<=t.MAX_WIDTH_240P||a<=t.MAX_HEIGHT_240P?t.MAX_BITRATE_240P:t.MAX_BITRATE_LIMIT;if(s=e.streams[o].bitrate,e.streams.forEach(function(e,t){e&&e.width===d&&e.height===c&&e.bitrate<=p&&t>o&&e.bitrate>s&&(o=t,s=e.bitrate)}),o<e.streams.length-1&&e.streams[o+1].bitrate<p){var u=Math.abs(e.streams[o+1].height-a)<=Math.abs(e.streams[o].height-a);o=u?o+1:o}return o},a.prototype.getPixelRatio=function(){var e=1;try{window&&(e=window.devicePixelRatio)}catch(t){e=1}return e||(e=1),e}},{}],169:[function(e,t,n){"use strict";function r(){var e=this;e.COLLECTION_INTERVAL=100,e.MIN_SAMPLE_SIZE=5e4,e.SAMPLE_QUEUE_LENGTH=40,e.INSTANCE_SAMPLE_QUEUE_LENGTH=15,e.BW_ADJUSTMENT_FACTOR=.8,e.VALID_TIME_GAP_BW_HISTROY=6e5,e._samplesQueue=[],e._instanceSamplesQueue=[],e._localstorageHandler=new i,e.averageBandwidth=e._getAverageBWFromLS(),e.instantaneousBandwidth=e._getAverageBWFromLS()}t.exports=r;var i=e("../../lib/localstoragehandler");r.prototype.destroy=function(){var e=this;e._samplesQueue=[],e._instanceSamplesQueue=[],e.averageBandwidth=0,e.instantaneousTotalBandwidth=0},r.prototype.addSample=function(e){var t=this;if(e&&!(e.time<=0)){t._addSingleSample(e);var n=0,r=t._samplesQueue.length,i=r*(r+1)/2,a=1/i;t._samplesQueue.forEach(function(e,t){n+=(t+1)*a*e.bandwidth}),t.averageBandwidth=t.BW_ADJUSTMENT_FACTOR*n,n=0,r=t._instanceSamplesQueue.length,i=r*(r+1)/2,a=1/i,t._instanceSamplesQueue.forEach(function(e,t){n+=(t+1)*a*e.bandwidth}),t.instantaneousBandwidth=t.BW_ADJUSTMENT_FACTOR*n}},r.prototype._getAverageBWFromLS=function(){var e=this,t=e._localstorageHandler.readProperty("avgBW"),n=t?t.avgBWtimestamp:null,r=n?Date.now()-parseInt(n):Number.MAX_VALUE;if(r<e.VALID_TIME_GAP_BW_HISTROY){var i=t.avgBW;return i?parseInt(i):0}return 0},r.prototype._addSingleSample=function(e){var t=this;!e||e.time<=0||(e.bandwidth=e.size/e.time*.008,e.bandwidth=Math.min(50,e.bandwidth),t._samplesQueue.push(e),t._instanceSamplesQueue.push(e),t._samplesQueue.length>t.SAMPLE_QUEUE_LENGTH&&t._samplesQueue.shift(),t._instanceSamplesQueue.length>t.INSTANCE_SAMPLE_QUEUE_LENGTH&&t._instanceSamplesQueue.shift())},r.prototype.setAvgBWToLocalStorage=function(){var e=this;e._localstorageHandler.writeProperty("avgBW",{avgBWtimestamp:Date.now(),avgBW:e.averageBandwidth})},r.prototype.replaceSamples=function(e,t){var n=this,r=e&&t?e/t*.008:0;if(r>0){n.averageBandwidth=r,n._samplesQueue=[];for(var i=Math.min(Math.ceil(t/n.COLLECTION_INTERVAL),n.SAMPLE_QUEUE_LENGTH),a=0;i>a;a++){var o={bandwidth:r};n._samplesQueue.push(o)}}}},{"../../lib/localstoragehandler":163}],170:[function(e,t,n){"use strict";t.exports={Command:e("./command"),MediaLoadCommand:e("./media-load-command"),StreamLoadCommand:e("./stream-load-command"),SubtitleStreamLoadCommand:e("./subtitle-stream-load-command"),SegmentLoadCommand:e("./segment-load-command"),SubtitleSegmentLoadCommand:e("./subtitle-segment-load-command"),ErrorHandleCommand:e("./error-handle-command")}},{"./command":173,"./error-handle-command":174,"./media-load-command":175,"./segment-load-command":176,"./stream-load-command":177,"./subtitle-segment-load-command":178,"./subtitle-stream-load-command":179}],171:[function(e,t,n){"use strict";var r=e("./command").CmdNames,i=e("./command-defs");t.exports.create=function(e,t,n){for(var a in r)if(r.hasOwnProperty(a)&&r[a]===e){var o=e+"Command",s=i[o];return new s(t,n)}return null}},{"./command":173,"./command-defs":170}],172:[function(e,t,n){"use strict";function r(){var e=this;e._commandMap={},e._eventKeys={};for(var t in o)o.hasOwnProperty(t)&&(e._commandMap[o[t]]={})}t.exports=r;var i=e("../command/command"),a=i.CmdEvents,o=i.CmdNames,s=e("../command/command-factory"),l=e("../../lib/hls-utils");r.prototype.destroy=function(){var e=this;e.removeAllCommands(),e._commandMap=null},r.prototype.executeCommand=function(e,t,n){var r=this;t&&(t.context=r._context);var i=r.createCommand(e,t,n);i&&i.execute()},r.prototype.createCommand=function(e,t,n){var r,i=this;try{r=s.create(e,t,n)}catch(o){r=null}if(!r)return null;for(var d in a)if(a.hasOwnProperty(d)){var c=a[d],p="on"+e+c;n[p]&&(i._eventKeys[c+e]=r.addEventListener(c,n[p],n))}var u=i._commandMap[e];return r.key=l.guid(),u[r.key]=r,r},r.prototype.removeCommand=function(e){var t=this;if(e){var n=t._commandMap[e.name];if(n[e.key]===e){if(delete n[e.key],e.client)for(var r in a)if(a.hasOwnProperty(r)){var i=a[r],o="on"+e.name+i;e.client[o]&&(e.removeEventListener(i,t._eventKeys[i+e.name]),delete t._eventKeys[i+e.name])}e.destroy()}}},r.prototype.removeRelatedCommands=function(e){var t=this;if(t._commandMap.hasOwnProperty(e)){var n=t._commandMap[e];for(var r in n)if(n.hasOwnProperty(r)){var i=n[r];i&&t.removeCommand(i)}}},r.prototype.removeAllCommands=function(){var e=this;for(var t in e._commandMap)e._commandMap.hasOwnProperty(t)&&e.removeRelatedCommands(t)},r.prototype.getCommand=function(e){var t=this,n=t._commandMap[e];if(!n)return null;var r=Object.keys(n);return r.length<1?null:n[r[r.length-1]]}},{"../../lib/hls-utils":160,"../command/command":173,"../command/command-factory":171}],173:[function(e,t,n){"use strict";function r(e,t){var n=this;n.data=e,n.client=t,i.call(n,n.constructor.name)}t.exports.Command=r;var i=e("../../lib/event-bus"),a=e("../../lib/hls-utils");t.exports.CmdNames={CMD_MEDIA_LOAD:"MediaLoad",CMD_STREAM_LOAD:"StreamLoad",CMD_SUBTITLE_STREAM_LOAD:"SubtitleStreamLoad",CMD_SEGMENT_LOAD:"SegmentLoad",CMD_SUBTITLE_SEGMENT_LOAD:"SubtitleSegmentLoad",CMD_ERROR_HANDLE:"ErrorHandle"},t.exports.CmdEvents={CMD_COMPLETE:"Complete",CMD_PROGRESS:"Progress",CMD_ERROR:"Error"},a.inherits(r,i),r.prototype.destroy=function(){var e=this;e.data=null,i.prototype.destroy.call(e)},r.prototype.execute=function(){},r.prototype.cancel=function(){}},{"../../lib/event-bus":159,"../../lib/hls-utils":160}],174:[function(e,t,n){"use strict";function r(e,t){var n=this;if(!e||!e.context)throw new Error("Invalid argument: data argument of the command is not complete");o.call(n,e,t),n.name=s.CMD_ERROR_HANDLE,n._context=n.data.context,n._model=n._context.model,n.ERR_INTERVAL_AFTER_BUFFER_EMPTY=1e4,n._errorHandlingTimer=new d(n.ERR_INTERVAL_AFTER_BUFFER_EMPTY,1),n._errorHandlingTimer.addEventListener(function(){n._errorHandlingTimer.destroy(),n.publish(l.CMD_ERROR,n)},n),n._init(),n._locked=!1}t.exports=r;var i=e("../../lib/hls-utils"),a=e("./command"),o=a.Command,s=a.CmdNames,l=a.CmdEvents,d=e("../../lib/timer"),c=e("../model/model").AbrModes;i.inherits(r,o),r.prototype.destroy=function(){var e=this;o.prototype.destroy.call(e)},r.prototype.execute=function(e){var t=this;if(!t._locked||e){if(e&&(t._locked=!0),t._model.getABRMode()===c.AUTO){if(t._retryIndexList.length){var n=t._retryIndexList.shift();return void t.publish(l.CMD_PROGRESS,t,{index:n})}0!==t._model.currentLoadingStreamIndex&&t.publish(l.CMD_PROGRESS,t,{index:0})}t._model.getBufferLength()>.1||(t._errorHandlingTimer.start(),t._errorHandlingTimer.running)}},r.prototype.cancel=function(){},r.prototype._init=function(){var e=this;e._retryIndexList=[];var t,n=e._model.currentLoadingStreamIndex;for(t=n-1;t>=0;t--)e._retryIndexList.push(t);for(t=n+1;t<e._model.streams.length;t++)e._retryIndexList.push(t)}},{"../../lib/hls-utils":160,"../../lib/timer":165,"../model/model":198,"./command":173}],175:[function(e,t,n){"use strict";function r(e,t){var n=this;if(!e||!e.url||!e.context)throw new Error("Invalid argument: data argument of the command is not complete");s.call(n,e,t),n.name=l.CMD_MEDIA_LOAD,n._loader=e.context.services.getNewLoader()}t.exports=r;var i=e("../../lib/hls-utils"),a=e("./../services/loader").Events,o=e("./command"),s=o.Command,l=o.CmdNames,d=o.CmdEvents;i.inherits(r,s),r.prototype.destroy=function(){var e=this;e._loader.destroy(),s.prototype.destroy.call(e)},r.prototype.execute=function(){var e=this,t=e.data.url,n=function(t){e.publish(d.CMD_COMPLETE,e,t.data)},r=function(t){e.publish(d.CMD_ERROR,e,t)};e._loader.addEventListener(a.COMPLETE,n,e),e._loader.addEventListener(a.ERROR,r,e),e._loader.load(t)},r.prototype.cancel=function(){}},{"../../lib/hls-utils":160,"./../services/loader":206,"./command":173}],176:[function(e,t,n){"use strict";function r(e,t){var n=this;if(!e||!e.segment||!e.context)throw new Error("Invalid argument: data argument of the command is not complete");p.call(n,e,t),n.name=u.CMD_SEGMENT_LOAD,n._segment=n.data.segment,n._context=n.data.context,n._model=n._context.model,n._loading=!1,n._loadProfiler=new s,n._bytesTotal=0,n._segmentPerfInfo=null,n._streamIndex=n._segment.streamIndex;var r=n._model.streams;n._stream=r&&r.length?r[n._streamIndex]:null;var i=n._segment.bitrate*n._segment.duration/8,a=.025,o={responseType:"arraybuffer",isChunkedLoad:!0,minChunkSize:i*a};0===n._segment.streamIndex&&(o.timeout=1e4),n._loader=e.context.services.getNewLoader(o),n._bandwidthEstimator=n._context.services.bandwidthEstimator,n._metricsTimer=new d(n._bandwidthEstimator.COLLECTION_INTERVAL),n._metricsTimer.addEventListener(n._addSample,n);var c={demux:n._model.config.demux,width:n._stream?n._stream.width:640,height:n._stream?n._stream.height:360,timescale:n._model.timescale,duration:n._model.duration,pcr:n._model.getPCR(),frameRate:n._stream?n._stream.frameRate:30,mp4State:e.state.mp4,startOffsetTimestamp:n._model.startOffsetTimestamp,startTime:n._segment.startTime,lastAudioTimestamp:e.state.lastAudioTimestamp,live:n._model.live,useEditBox:!0};n._hlsTransformer=n._context.create(l,c,n._onTransformProgress.bind(n))}t.exports=r;var i=e("../../lib/hls-utils"),a=e("../services/loader"),o=a.Events,s=e("../../lib/load-profiler"),l=e("../helper/hls-transformer-facade"),d=e("../../lib/timer"),c=e("./command"),p=c.Command,u=c.CmdNames,_=c.CmdEvents;i.inherits(r,p),r.prototype.destroy=function(){var e=this;e.cancel(),e._loader.destroy(),e._metricsTimer.destroy(),e._hlsTransformer.destroy(),e._loadProfiler.destroy(),p.prototype.destroy.call(e)},r.prototype.execute=function(){var e=this,t=e._segment.url;e._bytesTotal=0,e._beginning=!1,e._loading=!0,e._chunkLoadStartTime=Date.now(),e._chunkLength=0,e._chunkDownloadTime=0,e._segment.totalDownloadTime=0,e._segment.timeToFirstByte=0,e._segment.startLoadTime=Date.now(),e._metricsTimer.start();var n=function(t){e._onLoadComplete(t)},r=function(t,n){e._onProgress(t,n)},i=function(t){e.publish(_.CMD_ERROR,e,t)},a=function(t){e._onBytesLoaded(t)};e._loader.addEventListener(o.COMPLETE,n,e),e._loader.addEventListener(o.PROGRESS,r,e),e._loader.addEventListener(o.ERROR,i,e),e._loader.addEventListener(o.BYTES_LOADED,a,e),e._loader.load(t)},r.prototype.cancel=function(){var e=this;e._close(),e._loader.reset()},r.prototype._close=function(){var e=this;e._metricsTimer.reset(),e._hlsTransformer.close(),e._loading=!1},r.prototype._onBytesLoaded=function(e){var t=this;0===t._segment.timeToFirstByte&&(t._segment.timeToFirstByte=Date.now()-t._segment.startLoadTime,t.publish(_.CMD_PROGRESS,t,{position:"firstByte"})),t._chunkLength+=Math.max(e-t._bytesTotal,0),t._bytesTotal=e},r.prototype._onProgress=function(e,t){var n=this;t!==n._bytesTotal&&n._onBytesLoaded(t),n._hlsTransformer.append(e)},r.prototype._onTransformProgress=function(e){var t=this;e&&(t._segmentPerfInfo&&(e.perfInfo=t._segmentPerfInfo),t.publish(_.CMD_PROGRESS,t,e),"end"===e.position&&t.publish(_.CMD_COMPLETE,t))},r.prototype._addSample=function(){var e=this,t=Math.max(e._chunkLength,0),n=Date.now();e._chunkDownloadTime=n-e._chunkLoadStartTime,e._metricsTimer.reset(),e._bandwidthEstimator&&e._chunkDownloadTime>10&&(e._chunkLoadStartTime=n,e._segment.totalDownloadTime+=e._chunkDownloadTime,e._chunkLength=0,e._bandwidthEstimator.addSample({size:t,time:e._chunkDownloadTime})),e._metricsTimer.start()},r.prototype._onLoadComplete=function(){var e=this;e._addSample(),e._metricsTimer.stop();var t=["startTime","requestStart","responseStart","responseEnd","secureConnectionStart","fetchStart","connectStart","domainLookupStart"],n=e._loadProfiler.getPerformanceTiming(t,e._segment.url),r=n&&n.responseEnd&&n.startTime?n.responseEnd-n.startTime:NaN;e._segmentPerfInfo=n,e._hlsTransformer.endOfSegment(),e._bandwidthEstimator.replaceSamples(e._bytesTotal,r)}},{"../../lib/hls-utils":160,"../../lib/load-profiler":162,"../../lib/timer":165,"../helper/hls-transformer-facade":190,"../services/loader":206,"./command":173}],177:[function(e,t,n){"use strict";function r(e,t){var n=this;if(!e||!e.streamUrl||!e.context)throw new Error("Invalid argument: data argument of the command is not complete");s.call(n,e,t),n.name=l.CMD_STREAM_LOAD,n._loader=e.context.services.getNewLoader()}t.exports=r;var i=e("../../lib/hls-utils"),a=e("./../services/loader").Events,o=e("./command"),s=o.Command,l=o.CmdNames,d=o.CmdEvents;i.inherits(r,s),r.prototype.destroy=function(){var e=this;e._loader.destroy(),s.prototype.destroy.call(e)},r.prototype.execute=function(){var e=this,t=e.data.streamUrl,n=function(n){e.publish(d.CMD_COMPLETE,e,{data:n.data,streamUrl:t,streamIndex:e.data.index})},r=function(t){e.publish(d.CMD_ERROR,e,t)};e._loader.addEventListener(a.COMPLETE,n,e),e._loader.addEventListener(a.ERROR,r,e),e._loader.load(t)},r.prototype.cancel=function(){}},{"../../lib/hls-utils":160,"./../services/loader":206,"./command":173}],178:[function(e,t,n){"use strict";function r(e,t){var n=this;if(!(e&&e.context&&e.subtitleStream&&e.programDateTime))throw new Error("Invalid Argument: data arg is incomplete");d.call(n,e,t),n.name=c.CMD_SUBTITLE_SEGMENT_LOAD,n._stream=n.data.subtitleStream,n._context=n.data.context,n._segment=n._stream.getVTTSegment(e.seqNum,e.programDateTime),n._ready=!0,n._eventKeys={},n._setupLoader()}t.exports=r;var i=e("../../lib/hls-utils"),a=e("../services/loader"),o=a.Events,s=e("./../event").HLSEvent,l=e("./command"),d=l.Command,c=l.CmdNames,p=l.CmdEvents;i.inherits(r,d),r.prototype.destroy=function(){var e=this;e._loader.destroy(),e._context.removeEventListeners(e._eventKeys),d.prototype.destroy.call(e)},r.prototype.execute=function(){var e=this;return e._segment?void(e._segment&&e._loader&&e._loader.load(e._segment.url)):(e._eventKeys[s.SUBTITLE_STREAM_UPDATED]=e._context.addEventListener(s.SUBTITLE_STREAM_UPDATED,e._onSubtitleStreamUpdate,e),void(e._ready=!1))},r.prototype.cancel=function(){},r.prototype._setupLoader=function(){var e=this;e._loader=e._context.services.getNewLoader();var t=function(t){e._onLoadComplete(t)},n=function(t){e.publish(p.CMD_ERROR,e,t)};e._loader.addEventListener(o.COMPLETE,t,e),e._loader.addEventListener(o.ERROR,n,e)},r.prototype._onSubtitleStreamUpdate=function(){
var e=this;e._segment=e._stream.getVTTSegment(e.data.seqNum,e.data.programDateTime),e._segment&&!e._ready&&(e._ready=!0,e.execute())},r.prototype._onLoadComplete=function(e){var t=this;if(t._segment)return t._segment.data=e.data,void 0===t._segment.pcr()?void t._context.addEventListener(s.PCR_AVAILABLE,t._parse,t):void t._parse()},r.prototype._parse=function(){var e=this;e._segment.parseSegment(),e.publish(p.CMD_COMPLETE,e,{data:e._segment.toObject(),url:e._segment.url})}},{"../../lib/hls-utils":160,"../services/loader":206,"./../event":188,"./command":173}],179:[function(e,t,n){"use strict";function r(e,t){var n=this;if(!e||!e.streamUrl||!e.context)throw new Error("Invalid argument: data argument of the command is not complete");s.call(n,e,t),n.name=l.CMD_SUBTITLE_STREAM_LOAD,n._loader=e.context.services.getNewLoader()}t.exports=r;var i=e("../../lib/hls-utils"),a=e("./../services/loader").Events,o=e("./command"),s=o.Command,l=o.CmdNames,d=o.CmdEvents;i.inherits(r,s),r.prototype.destroy=function(){var e=this;e._loader.destroy(),s.prototype.destroy.call(e)},r.prototype.execute=function(){var e=this,t=e.data.streamUrl,n=function(n){e.publish(d.CMD_COMPLETE,e,{data:n.data,streamUrl:t})},r=function(t){e.publish(d.CMD_ERROR,e,t)};e._loader.addEventListener(a.COMPLETE,n,e),e._loader.addEventListener(a.ERROR,r,e),e._loader.load(t)},r.prototype.cancel=function(){}},{"../../lib/hls-utils":160,"./../services/loader":206,"./command":173}],180:[function(e,t,n){"use strict";function r(){var e=this;e._node=e._context.node,e._model=e._context.model,e._mediaSource=e._context.mediaSource,e._switchManager=null,e._sourceBuffers=[],e._buffering=!1,e._error=!1,e._timeAtBufferEmpty=NaN,e._waitingEvtObj={},e._lastTime=-1,e.MIN_BUFFER_TO_PLAY=1,e.MIN_TIME_TO_BUFFER_CHECK=150,e.BUFFER_REPORT_THRESHOLD=20,e._bufferInit=!0}t.exports=r;var i=e("./source-buffer-manager"),a=e("./../event").HLSEvent,o=5,s=.5;r.prototype.destroy=function(){var e=this;e._abortBuffer(),e._sourceBuffers=[]},r.prototype.setSwitchManager=function(e){var t=this;t._switchManager=e},r.prototype.process=function(){var e=this;e._checkBuffering(),e._areSourceBuffersClosed()&&"open"===e._mediaSource.readyState&&e._mediaSource.endOfStream()},r.prototype.onError=function(){var e=this;e._error=!0},r.prototype._getSourceBuffer=function(e){for(var t=this,n=0;n<t._sourceBuffers.length;n++)if(e===t._sourceBuffers[n].type)return t._sourceBuffers[n];return null},r.prototype.onPause=function(){var e=this;e._buffering&&(e._waitingEvtObj.bufferInit=!0,e._setBufferFull())},r.prototype._checkBuffering=function(e){var t=this,n=t._node.currentTime;if(!(isFinite(t._node.duration)&&n+.05>t._node.duration)){var r=t._getBufferCheckDelta();if(e||!(r<t.MIN_TIME_TO_BUFFER_CHECK)){var i=t._context.model.getBufferLength();!(.02>=i||t._lastKnownVideoTime===n&&i<t.MIN_BUFFER_TO_PLAY)||t._node.paused||t._buffering?!isNaN(t._timeAtBufferEmpty)&&n>t._timeAtBufferEmpty&&t._setBufferFull():t._setBufferEmpty(),t._lastKnownVideoTime=n,t._lastBufferCheckTime=Date.now()}}},r.prototype.onTimeUpdate=function(){var e=this;e._buffering&&e._checkBuffering(!0)},r.prototype._setBufferEmpty=function(){var e=this;e._buffering||(e._buffering=!0,e._setMinimumBufferTime(!1),e._setBufferingStartTime(),e._timeAtBufferEmpty=e._node.currentTime,e._waitingEvtObj={value:e._buffering,bufferInit:e._bufferInit},e._context.sendEvent(a.WAITING,e._waitingEvtObj))},r.prototype._setBufferFull=function(){var e=this;e._buffering&&(e._buffering=!1,e._timeAtBufferEmpty=NaN,e._resetMinimumBufferTime(),e._waitingEvtObj.value=!1,e._waitingEvtObj.waitTime=e._getRebufferingTime(),e._context.sendEvent(a.WAITING,e._waitingEvtObj),e._waitingEvtObj={},e._bufferInit=!1)},r.prototype._setMinimumBufferTime=function(e){var t=this,n=.1,r=t._context.services.bandwidthEstimator.instantaneousBandwidth,i=t._model.getCurrentLoadingStream(),a=i?i.bitrate/1e6:0,o=t._model.config.minBufferTime;o=t._model.live?o.live:o.vod;var s=t._model.config.variableMinBuffer;n=s&&a&&!isNaN(r)?!r&&e?o:t._calculateMinimumBufferTime(r/a,o):o,t._sourceBuffers.forEach(function(e){e.setMinBufferTime(n)}),t._switchManager&&2===t._sourceBuffers.length&&t._switchManager.addBufferingEntry(n,1e3*r,1e3*a)},r.prototype._resetMinimumBufferTime=function(){var e=this;e._sourceBuffers.forEach(function(e){e.setMinBufferTime(0)})},r.prototype._calculateMinimumBufferTime=function(e,t){var n=o;if(t>=n)return t;var r=Math.max(t,0);if(e>=1)return r;var i=e*n;return 1*Math.max(r,n-i*s).toFixed(1)},r.prototype.createSourceBuffer=function(e,t){var n=this;if(!n._mediaSource||n._error)return null;var r=n._getSourceBuffer(e);if(!r){var a=e+'/mp4; codecs="'+t+'"';r=n._context.create(i,n._mediaSource,e,a),n._sourceBuffers.push(r),n._setMinimumBufferTime(!0)}return r},r.prototype._abortBuffer=function(){var e=this;e._mediaSource&&!e._error&&e._sourceBuffers.forEach(function(e){e.abort()})},r.prototype.clear=function(e,t){var n=this;if(n._mediaSource&&!n._error){if(!e)return void n._sourceBuffers.forEach(function(e){e.clearAll()});if(!(e&&e.end-e.start<10)&&t){var r=function(e){};t.clearBuffer(e.start,e.end,r)}}},r.prototype.appendBuffer=function(e,t){var n=this,r=n.createSourceBuffer(e.type,e.codec),i=function(e,n){t(e,n)};r&&!n._error&&e.data&&e.data.length&&r.appendBuffer(e.data,e.startTime,e.endTime,i)},r.prototype.endOfStream=function(e){var t=this;t._sourceBuffers.forEach(function(t){t.endOfStream(e)})},r.prototype._areSourceBuffersClosed=function(){var e=this;if(!e._sourceBuffers.length)return!1;var t=!0;return e._sourceBuffers.forEach(function(e){t=t&&"closed"===e.state}),t},r.prototype.onPlaying=function(){},r.prototype.onSeeking=function(e){var t=this;e&&t._abortBuffer(),t._bufferInit=!0},r.prototype._getVideoProgressDelta=function(){var e=this,t=0;return e._lastKnownVideoTime&&(t=1e3*(e._node.currentTime-e._lastKnownVideoTime).toFixed(3)),t},r.prototype._getBufferCheckDelta=function(){var e=this,t=Date.now();return e._lastBufferCheckTime=e._lastBufferCheckTime||t,t-e._lastBufferCheckTime},r.prototype._setBufferingStartTime=function(){var e=this,t=e._getBufferCheckDelta(),n=e._getVideoProgressDelta();e._bufferingStartTime=Date.now()-Math.max(t-n,0)},r.prototype._getRebufferingTime=function(){var e=this,t=e._getVideoProgressDelta(),n=Math.max(Date.now()-e._bufferingStartTime-t,0);return e._waitingEvtObj.bufferInit?0:n<e.BUFFER_REPORT_THRESHOLD?0:n},r.prototype.onVideoSync=function(e){var t=this;t._lastKnownVideoTime=e},r.prototype.resetReadyState=function(){var e=this;e._sourceBuffers.forEach(function(e){e.ready=!1})},r.prototype.areSrcBuffersReady=function(){for(var e=this,t=0;t<e._sourceBuffers.length;t++)if(!e._sourceBuffers[t].ready)return!1;return!0}},{"./../event":188,"./source-buffer-manager":184}],181:[function(e,t,n){"use strict";t.exports={ERROR:-1,INITIAL:0,MEDIA_METADATA_LOADING:1,MEDIA_METADATA_LOADED:2,STREAM_METADATA_LOADING:3,STREAM_METADATA_LOADED:4,MEDIA_LOADED:5,PRELOADING:6,PLAY_REQUESTED:7,PLAYING:8,PAUSED:9,PLAY_COMPLETE:10}},{}],182:[function(e,t,n){"use strict";function r(){var e=this;e._model=e._context.model,e._node=e._context.node,e._services=e._context.services,e._parser=e._services.metadataParser,e._commandManager=e._context.create(u),e._streamLoader=e._context.create(l,e._commandManager),e._state=m.INITIAL,e._eventKeys={},e._jobQueue=[],e._bufferController=e._context.create(d),e._addEventListeners(),e._seeking=!1,e._playWhenReady=!1,e._processTimer=new _(250),e._processTimer.addEventListener(e._process,e),e._startPosition=null}t.exports=r;var i=e("./../event").HLSEvent,a=e("./../error"),o=e("./streaming-controller"),s=e("./live-streaming-controller"),l=e("./../helper/stream-loader"),d=e("./buffer-controller"),c=e("./../model/model").MetadataTypes,p=e("../command/command").CmdNames,u=e("../command/command-manager"),_=e("../../lib/timer"),m=e("./controller-states");r.prototype.destroy=function(){var e=this;e._streamingController&&(e._streamingController.destroy(),e._streamingController=null),e._jobQueue=null,e._bufferController.destroy(),e._bufferController=null,e._commandManager.destroy(),e._commandManager=null,e._removeEventListeners(),e._processTimer.destroy(),e._processTimer=null,e._state=m.INITIAL,e._startPosition=null},r.prototype.initialize=function(){var e=this;e._loadMetadata(),e._node.load()},r.prototype.play=function(e){var t=this;return t._context.mediaSource&&("closed"===t._context.mediaSource.readyState||t._state<m.MEDIA_LOADED)?void t._jobQueue.push([t,"play",[e]]):(t._startPosition=e>0&&e<=t._model.duration?e:null,void t._node.play())},r.prototype._addEventListeners=function(){var e=this;e._playHandler=e._onPlay.bind(e),e._playingHandler=e._onPlaying.bind(e),e._pauseHandler=e._onPause.bind(e),e._seekingHandler=e._onSeeking.bind(e),e._seekedHandler=e._onSeeked.bind(e),e._playCompleteHandler=e._onComplete.bind(e),e._errorListener=e._onError.bind(e),e._timeUpdateHandler=e._onTimeUpdate.bind(e),e._mediaSourceOpenHandler=e._onMediaSourceOpen.bind(e),e._node.addEventListener("play",e._playHandler),e._node.addEventListener("playing",e._playingHandler),e._node.addEventListener("seeking",e._seekingHandler),e._node.addEventListener("seeked",e._seekedHandler),e._node.addEventListener("ended",e._playCompleteHandler),e._node.addEventListener("pause",e._pauseHandler),e._node.addEventListener("error",e._errorListener),e._node.addEventListener("timeupdate",e._timeUpdateHandler),e._eventKeys[i.STREAM_UPDATED]=e._context.addEventListener(i.STREAM_UPDATED,e._onStreamUpdated,e),e._eventKeys[i.MEDIA_LOADED]=e._context.addEventListener(i.MEDIA_LOADED,e._onMediaLoaded,e),e._eventKeys[i.PRELOADED]=e._context.addEventListener(i.PRELOADED,e._onPreloaded,e),e._context.mediaSource.addEventListener("sourceopen",e._mediaSourceOpenHandler)},r.prototype._removeEventListeners=function(){var e=this;e._node.removeEventListener("play",e._playHandler),e._node.removeEventListener("playing",e._playingHandler),e._node.removeEventListener("pause",e._pauseHandler),e._node.removeEventListener("seeking",e._seekingHandler),e._node.removeEventListener("seeked",e._seekedHandler),e._node.removeEventListener("ended",e._playCompleteHandler),e._node.removeEventListener("error",e._errorListener),e._node.removeEventListener("timeupdate",e._timeUpdateHandler),e._context.removeEventListeners(e._eventKeys),e._context.mediaSource.removeEventListener("sourceopen",e._mediaSourceOpenHandler)},r.prototype._flushJobQueue=function(){var e=this,t=e._jobQueue;e._jobQueue=[],t.forEach(function(e){var t=e[0],n=e[1],r=e.length>2?e[2]:null;t[n].apply(t,r)})},r.prototype._beforeStateChange=function(e){},r.prototype._setState=function(e,t){var n=this;n._beforeStateChange(e),n._state=e,n._context.sendEvent(i.STATE_CHANGED,e),n._afterStateChange(t)},r.prototype.getState=function(e,t){var n=this;return n._state},r.prototype._afterStateChange=function(e){var t=this;switch(t._state){case m.MEDIA_METADATA_LOADING:t._loadMedia();break;case m.MEDIA_METADATA_LOADED:t._setState(m.STREAM_METADATA_LOADING);break;case m.STREAM_METADATA_LOADING:t._streamLoader.loadCurrentStream();break;case m.STREAM_METADATA_LOADED:t._setState(m.MEDIA_LOADED);break;case m.MEDIA_LOADED:if(!t._streamingController){var n=t._model.live?s:o;t._streamingController=t._context.create(n,t._bufferController,t._commandManager),t._context.sendEvent(i.MEDIA_LOADED,t._model.streams)}!t._model.live&&t._model.getBufferLength()<t._model.config.preloadBufferLimit&&t._setState(m.PRELOADING);break;case m.PRELOADING:t._streamingController&&t._streamingController.onPreloadBegin(),t._processTimer.start();break;case m.PLAY_REQUESTED:t._processTimer.start(),t._streamingController&&t._streamingController.onPlay();break;case m.PLAYING:t._streamingController&&t._streamingController.onPlaying();break;case m.PLAY_COMPLETE:t._processTimer.stop();break;case m.ERROR:t._processTimer.stop(),t._streamingController&&t._streamingController.onError(),t._commandManager.removeAllCommands()}},r.prototype._loadMetadata=function(){var e=this,t=e._model.metadata;return e._state===m.INITIAL?t.type===c.STRUCTURED?(e._model.build(e._parser.parse(t)),void(t.hasStreamMetadata?e._setState(m.MEDIA_LOADED):t.hasMediaMetadata&&e._setState(m.MEDIA_METADATA_LOADED))):void e._setState(m.MEDIA_METADATA_LOADING):void 0},r.prototype._process=function(){var e=this;e._state<m.MEDIA_LOADED||(e._bufferController.process(),e._streamingController&&e._streamingController.process())},r.prototype._onPlay=function(e){var t=this;return t._context.mediaSource&&("closed"===t._context.mediaSource.readyState||t._state<m.MEDIA_LOADED)?void t._jobQueue.push([t,"_onPlay"]):(t._state===m.PRELOADING&&t._streamingController.onPreloadEnd(),void t._setState(m.PLAY_REQUESTED))},r.prototype._onPlaying=function(e){var t=this;t._state<m.MEDIA_LOADED||(t._startPosition&&!t._model.live&&(t._node.currentTime=t._startPosition,t._startPosition=null),t._setState(m.PLAYING),t._bufferController.onPlaying())},r.prototype._onPause=function(e){var t=this;t._state<m.MEDIA_LOADED||(t._streamingController&&t._streamingController.onPause(),t._bufferController.onPause(),t._setState(m.PAUSED))},r.prototype._onSeeking=function(e){var t=this;if(e){var n=e.target.currentTime;t._state<m.MEDIA_LOADED||(t._seeking=!0,t._streamingController.onSeeking(n))}},r.prototype._onSeeked=function(e){var t=this;if(e){var n=e.target.currentTime;t._state<m.MEDIA_LOADED||(t._seeking=!1,t._streamingController.onSeeked(n))}},r.prototype._onComplete=function(e){var t=this;t._state<m.MEDIA_LOADED||t._setState(m.PLAY_COMPLETE)},r.prototype._onError=function(e){var t=this;t._setState(m.ERROR)},r.prototype._onTimeUpdate=function(e){var t=this;t._bufferController.onTimeUpdate(e),t._streamingController&&t._streamingController.onTimeUpdate(e)},r.prototype._getStreamUrl=function(e){if(!e)return null;var t=e.streams;if(!t||!t.length)return e.url;if(e.url&&e.url.length)return e.url;if(t[0].url&&t[0].url.length)return t[0].url;var n=t[0].host;return t[0].path&&(n+=t[0].path),n},r.prototype._loadMedia=function(){var e=this;e._commandManager.executeCommand(p.CMD_MEDIA_LOAD,{url:e._getStreamUrl(e._model.metadata)},e)},r.prototype.onMediaLoadComplete=function(e,t){var n=this;if(e){if(!t)return void n._commandManager.removeCommand(e);var r={rawData:t,type:c.RAW,url:e.data?e.data.url:""};n._model.build(n._parser.parse(r)),n._commandManager.removeCommand(e),n._setState(m.MEDIA_METADATA_LOADED)}},r.prototype.onMediaLoadError=function(e,t){var n=this;e&&n._commandManager.removeCommand(e),t&&1===t.code&&(n._setState(m.ERROR),n._context.notifyError(new a.Error(a.ERR_PLAYLIST_LOAD)))},r.prototype._onStreamUpdated=function(e){var t=this;t._state<m.MEDIA_LOADED&&t._setState(m.STREAM_METADATA_LOADED)},r.prototype._onMediaLoaded=function(e){var t=this;t._context.mediaSource&&"closed"===t._context.mediaSource.readyState||t._jobQueue.length&&t._flushJobQueue()},r.prototype._onPreloaded=function(e){var t=this;t._streamingController.onPreloadEnd(),t._state===m.PRELOADING&&t._setState(m.MEDIA_LOADED),t._processTimer.stop(),t._processTimer.reset()},r.prototype._onMediaSourceOpen=function(e){var t=this;t._state<m.MEDIA_LOADED||t._jobQueue.length&&t._flushJobQueue()},r.prototype._stateToString=function(e){for(var t=Object.keys(m),n=0;n<t.length;n++)if(e===m[t[n]])return t[n]},r.prototype.preload=function(e){var t=this;e&&(t._model.config.preloadBufferLimit=e,t._model.getBufferLength()<e&&t._state===m.MEDIA_LOADED&&t._setState(m.PRELOADING))},r.prototype.setABRMode=function(e){var t=this;t._state<m.MEDIA_LOADED||t._streamingController.setABRMode(e)}},{"../../lib/timer":165,"../command/command":173,"../command/command-manager":172,"./../error":187,"./../event":188,"./../helper/stream-loader":192,"./../model/model":198,"./buffer-controller":180,"./controller-states":181,"./live-streaming-controller":183,"./streaming-controller":185}],183:[function(e,t,n){"use strict";function r(e,t){var n=this;a.call(n,e,t),n._eventKeys={},n._eventKeys[s.MEDIA_LOADED]=n._context.addEventListener(s.MEDIA_LOADED,n._onMediaLoaded,n),n._eventKeys[s.STREAM_UPDATED]=n._context.addEventListener(s.STREAM_UPDATED,n._onStreamUpdated,n),n.DEFAULT_STREAM_UPDATE_INTERVAL=8e3,n.MAX_STREAM_UPDATE_INTERVAL=1e4,n._updateStreamTimer=new o(n.DEFAULT_STREAM_UPDATE_INTERVAL),n._updateStreamTimer.addEventListener(n._loadCurrentStream,n),n._synchPosition=null,n._seeking=!1,n._timestampAtPause=null,n.PAST_BUFFER_LENGTH_LIMIT=n._model.config.pastBufferLengthLimit.live,n.SEGMENT_OFFSET=2,n.LONG_PAUSE_INTERVAL=24e3,n._pauseTimer=new o(n.LONG_PAUSE_INTERVAL,1),n._pauseTimer.addEventListener(n._onLongPauseInterval,n)}t.exports=r;var i=e("../../lib/hls-utils"),a=e("./streaming-controller"),o=e("../../lib/timer"),s=e("./../event").HLSEvent;i.inherits(r,a),r.prototype.destroy=function(){var e=this;e._updateStreamTimer.destroy(),e._pauseTimer.destroy(),e._context.removeEventListeners(e._eventKeys),a.prototype.destroy.call(e)},r.prototype.onPlay=function(){var e=this;e._scheduleStreamUpdate();var t=e._model.getCurrentLoadingStream(),n=t&&t.targetDuration?3*t.targetDuration*1e3:e.LONG_PAUSE_INTERVAL;(!e._timestampAtPause||Date.now()-e._timestampAtPause>n)&&(e._synch(),e.process(e._targetPosition),e._timestampAtPause=null),e._paused=!1,e._pauseTimer.stop(),e._loadMonitorTimer.start()},r.prototype.onPause=function(){var e=this;e._timestampAtPause=Date.now(),e._paused=!0,e._pauseTimer.start(),e._loadMonitorTimer.stop()},r.prototype.onSeeking=function(e){var t=this,n=t._model.getCurrentLoadingStream();t._seeking=!0,t._lastAudioTimestamp=NaN;var r=n.getSeqNumBeforePosition(e);r!==t._seqNum?(t._closeLoadingSegments(),t._bufferController.onSeeking(!0),t.process(e)):t._bufferController.onSeeking(!1)},r.prototype.onSeeked=function(e){var t=this;t._seeking=!1},r.prototype.process=function(e){var t=this;if(e&&(t._targetPosition=e),t._shouldLoadSegment()){var n=t._getNextSeqNum(t._targetPosition),r=t._isSegmentAvailable(n);if("empty"===r||"ahead"===r)return void t._updateStream();if(t._switchManager.switchStream("load"),r=t._isSegmentAvailable(n),"empty"===r||"ahead"===r)return void t._updateStream();if("behind"===r)return void t._synch();t._initMp4State(),t._targetPosition=null,t._loadSegment(n)}},r.prototype._isSegmentAvailable=function(e){var t=this,n=t._model.getCurrentLoadingStream();if(n.isEmpty())return"empty";if(!n.contains(e)){if(e<n.startSeqNum)return"behind";if(e>n.endSeqNum)return"ahead"}return"available"},r.prototype._synch=function(){var e=this,t=e._model.getCurrentLoadingStream(),n=t.segments.length-1;e._targetPosition=t.segments[n-e.SEGMENT_OFFSET].startTime,e._synchPosition=e._targetPosition,e._lastAudioTimestamp=NaN,e._bufferController.resetReadyState(),e._timestampAtPause&&e._context.sendEvent(s.LIVE_LOADING_LATE)},r.prototype._onLongPauseInterval=function(){var e=this;e._bufferController.clear()},r.prototype._shouldLoadSegment=function(){var e=this,t=e._model.config.maxBuffer;return e._state!==e.STATES.LOADING&&!e._paused&&e._model.getBufferLength()<t},r.prototype._updateStream=function(){var e=this;e._switchManager.switching&&(e._updateStreamTimer.reset(),e._loadCurrentStream())},r.prototype._getNextSeqNum=function(e){var t=this,n=t._model.getCurrentLoadingStream();if(isNaN(t._seqNum))return Math.max(n.endSeqNum-t.SEGMENT_OFFSET,n.startSeqNum);if(e){var r=n.getSeqNumBeforePosition(e+t._model.TIMESTAMP_COMPARE_EPSILON),i=t._node.buffered.length,a=t._getBufferedRangeIndex(r);return a>=0&&i&&i>a?(t._targetPosition=t._node.buffered.end(a),n.getSeqNumBeforePosition(t._targetPosition)):r}return t._state===t.STATES.ERROR?t._seqNum:t._seqNum+1},r.prototype._onStreamUpdated=function(e){var t=this;t._scheduleStreamUpdate()},r.prototype._onMediaLoaded=function(e){var t=this;t._scheduleStreamUpdate()},r.prototype._loadCurrentStream=function(){var e=this;e._streamLoader.loadCurrentStream()},r.prototype._scheduleStreamUpdate=function(){var e,t,n=this;e=n._updateStreamTimer.startTime>0?Date.now()-n._updateStreamTimer.startTime:0,n._updateStreamTimer.reset(),t=n._model.getStreamRefreshInterval()||n.DEFAULT_STREAM_UPDATE_INTERVAL,t-=e,t=Math.max(t,100),t=Math.min(t,n.MAX_STREAM_UPDATE_INTERVAL),n._updateStreamTimer.delay=t,n._updateStreamTimer.start()},r.prototype._switchStream=function(e,t){var n=this;n._synchPosition||a.prototype._switchStream.call(n,e,t)},r.prototype._onAppendBufferComplete=function(e,t){var n=this;if(n._bufferController.clear(n._getPastBufferRange(t),t),n._synchPosition&&n._bufferController.areSrcBuffersReady()){var r=n._node.seekable,i=n._node.buffered;if(r.length&&i.length){var a=r.start(r.length-1),o=r.end(r.length-1);if(n._synchPosition>=a&&n._synchPosition<=o){for(var s=n._synchPosition,l=0;l<i.length;l++)if(!(s>i.end(l))&&s<i.start(l)){s=i.start(l);break}n._node.currentTime=s,n._bufferController.onVideoSync(s),n._synchPosition=null}}}},r.prototype._handleSegmentEnd=function(){}},{"../../lib/hls-utils":160,"../../lib/timer":165,"./../event":188,"./streaming-controller":185}],184:[function(e,t,n){"use strict";function r(e,t,n){var r=this;r._node=r._context.node,r._destroyed=!1,r.type=t,r._mediaSource=e,r.buffer=e.addSourceBuffer(n),r._appendQueue=[],r._removeQueue=[],r._waitingList=[],r._endOfStream=!1,r._minBufferTime=i,r.ready=!1,r.buffer.addEventListener("updateend",r._onTransferComplete.bind(r)),r.buffer.addEventListener("error",function(){r.abort()}),r.state="open"}t.exports=r;var i=.1,a={APPEND:"append",REMOVE:"remove"};r.prototype.destroy=function(){var e=this;e.remove(),e._appendQueue=[],e._removeQueue=[],e._waitingList=[],e.state="closed"},r.prototype.remove=function(){var e=this;e._destroyed||(e._destroyed=!0,e.abort(),"closed"!==e._mediaSource.readyState&&e._mediaSource.removeSourceBuffer(e.buffer))},r.prototype.setMinBufferTime=function(e){var t=this;t._minBufferTime=Math.max(i,e)},r.prototype.appendBuffer=function(e,t,n,r){var i=this;if(!i._destroyed){var o={type:a.APPEND,cb:r,buffer:e,startTime:t,endTime:n,time:n-t};i._appendQueue.push(o),i._processSourceBufferTasks()}},r.prototype.clearBuffer=function(e,t,n){var r=this;if(r._destroyed||e>=t)return n("["+r.constructor.name+"] Invalid remove buffer call");var i={type:a.REMOVE,cb:n,startTime:e,endTime:Math.round(1e3*parseFloat(t))/1e3};r._removeQueue.push(i),r._processSourceBufferTasks()},r.prototype.abort=function(){var e=this;if("open"===e._mediaSource.readyState){e._appendQueue=[],e._removeQueue=[],e._waitingList=[];try{e.buffer.abort()}catch(t){}}},r.prototype.clearAll=function(){var e=this;if("closed"!==e._mediaSource.readyState){e.abort();try{var t=e.buffer.buffered,n=t.length?t.start(0):0,r=t.length?t.end(t.length-1):0;r>n&&e.buffer.remove(n,r)}catch(i){}}},r.prototype.endOfStream=function(e){var t=this;t._endOfStream=e,t._endOfStream&&t._processSourceBufferTasks()},r.prototype._onTransferComplete=function(){var e=this;if(e.ready=!0,e._waitingList.length){var t=e._waitingList.shift();t.cb(null,e)}e._appendQueue.length||(e.state="empty"),e._processSourceBufferTasks(),e._endOfStream&&"empty"===e.state&&!e._waitingList.length&&(e.state="closed")},r.prototype._processSourceBufferTasks=function(){for(var e=this;e._removeQueue.length;){if(e.buffer.updating)return;e._performTask(e._removeQueue.shift())}for(;e._appendQueue.length;){if(e.buffer.updating)return;var t=e._getBufferLength()+e._getTotalPendingBufferTime();if(!e._endOfStream&&t<e._minBufferTime)return;e._performTask(e._appendQueue.shift())}},r.prototype._performTask=function(e){var t=this;if(e&&e.type)try{e.type===a.APPEND?t.buffer.appendBuffer(e.buffer):e.type===a.REMOVE&&t.buffer.remove(e.startTime,e.endTime),t._waitingList.push(e),t.state="updating"}catch(n){}},r.prototype._getTotalPendingBufferTime=function(){var e=this,t=0;return e._appendQueue.forEach(function(e){e&&e.time&&(t+=e.time)}),t},r.prototype._getBufferLength=function(){for(var e,t=this,n=t._context.node,r=t._context.model.TIMESTAMP_COMPARE_EPSILON,i=t.buffer.buffered,a=0,o=n.currentTime,s=0;s<i.length;s++)if(o+r>=i.start(s)&&o<i.end(s)){e=s;break}return e>=0&&i.length&&(a=i.end(e)-o),a}},{}],185:[function(e,t,n){"use strict";function r(e,t){var n=this;n._node=n._context.node,n._model=n._context.model,n._metrics=n._context.services.metrics,n._services=n._context.services,n._bufferController=e,n._commandManager=t,n._switchManager=n._context.create(d),n._switchManager.addEventListener(n._switchManager.SWITCH_BEGIN,n._onSwitchBegin,n),n._bufferController.setSwitchManager(n._switchManager),n._errorHandler=n._context.create(l,t),n._errorHandler.addEventListener(n._errorHandler.SWITCH_ON_ERROR,n._onErrorSwitch,n),n._streamLoader=n._context.create(s,t,n._errorHandler),n.AVG_BW_MEASUREMENT_INTERVAL=30,n._playedSinceLastBWMeasurement=0,n._lastPlayedTime=0,n.STATES={ERROR:-1,NONE:0,LOADING:1},n._state=n.STATES.NONE,n._preloading=!1,n._seqNum=NaN,n._endOfVod=!1,n._targetPosition=null,n._paused=!1,n._lastAudioTimestamp=NaN,n.PAST_BUFFER_LENGTH_LIMIT=n._model.config.pastBufferLengthLimit.vod,n._initMp4State(),n._loadMonitorTimer=new c(1e3*n._model.config.segmentLoadMonitorInterval),n._loadMonitorTimer.addEventListener(n._onLoadMonitor,n)}t.exports=r;var i=e("../command/command").CmdNames,a=e("./../event").HLSEvent,o=e("../error"),s=e("../helper/stream-loader"),l=e("../helper/error-handler"),d=e("./switch-manager"),c=e("../../lib/timer"),p=e("../../lib"),u=e("../model/model").AbrModes;r.prototype.destroy=function(){var e=this;e._streamLoader.destroy(),e._errorHandler.destroy(),e._switchManager.destroy(),e._loadMonitorTimer.destroy(),e._initMp4State(),e._state=e.STATES.NONE},r.prototype.process=function(e){var t=this;if(e&&(t._targetPosition=e),t._shouldLoadSegment()){t._targetPosition=t._preProcess(t._targetPosition),t._switchManager.switchStream("load");var n=t._getNextSeqNum(t._targetPosition);if(t._initMp4State(),!t._isReady(n))return void t._updateStream();t._targetPosition=null,t._loadSegment(n)}},r.prototype.onPlay=function(){var e=this;e._paused=!1,e._loadMonitorTimer.start()},r.prototype.onPlaying=function(){},r.prototype.onPause=function(){var e=this;e._paused=!0,e._loadMonitorTimer.stop()},r.prototype.onSeeking=function(e){var t=this;t._lastAudioTimestamp=NaN,t._bufferController.onSeeking(!0),t._closeLoadingSegments(),t._setEndOfVod(!1),t.process(e)},r.prototype.onSeeked=function(e){},r.prototype.onError=function(){var e=this;e._bufferController.onError()},r.prototype.onTimeUpdate=function(e){var t=this;if(t._lastPlayedTime){var n=e.currentTarget.currentTime-t._lastPlayedTime;n>0&&(t._playedSinceLastBWMeasurement+=n)}if(t._playedSinceLastBWMeasurement>t.AVG_BW_MEASUREMENT_INTERVAL){var r=t._services.bandwidthEstimator;r.setAvgBWToLocalStorage(),t._playedSinceLastBWMeasurement=0}t._lastPlayedTime=e.currentTarget.currentTime,t._metrics.onTimeUpdate(e)},r.prototype._preProcess=function(e){var t=this,n=t._getNextSeqNum(e),r=t._node.buffered.length,i=t._getBufferedRangeIndex(n);return i>=0&&r&&r>i?t._node.buffered.end(i):e},r.prototype._shouldLoadSegment=function(){var e,t=this,n=t._model.config.maxBuffer,r=t._model.config.preloadBufferLimit;return t._preloading?(e=t._model.getPreloadBufferLength()>=r,e&&t._context.sendEvent(a.PRELOADED)):e=t._model.getBufferLength()>=n,!t._endOfVod&&t._state!==t.STATES.LOADING&&!e},r.prototype._onLoadMonitor=function(){var e=this;if(e._state===e.STATES.LOADING){var t=e._commandManager.getCommand(i.CMD_SEGMENT_LOAD);t&&e._switchStream(t,t.position)}},r.prototype._onSwitchBegin=function(e){var t=this;t._initMp4State()},r.prototype._onErrorSwitch=function(e){var t=this;t._switchManager.switchStream("error",null,e)},r.prototype._isReady=function(e){var t=this,n=t._model.getCurrentLoadingStream();return!isNaN(e)&&n&&n.segments&&n.segments.length>0&&null!==n.getSegmentfromSeqNum(e)},r.prototype._updateStream=function(){var e=this;e._streamLoader.loadCurrentStream()},r.prototype._getNextSeqNum=function(e){var t=this,n=t._model.getCurrentLoadingStream();if(isNaN(t._seqNum))return Math.min(n.getSeqNumBeforePosition(0),n.endSeqNum);if(e)return Math.min(n.getSeqNumBeforePosition(e),n.endSeqNum);var r=t._state===t.STATES.ERROR?t._seqNum:t._seqNum+1;return Math.min(r,n.endSeqNum)},r.prototype._getBufferedRangeIndex=function(e){var t=this,n=t._model.getCurrentLoadingStream().getSegmentfromSeqNum(e);if(!n)return-1;for(var r=0;r<t._node.buffered.length;r++){var i=t._node.buffered.start(r)-t._model.TIMESTAMP_COMPARE_EPSILON,a=t._node.buffered.end(r)+t._model.TIMESTAMP_COMPARE_EPSILON;if(n.startTime>=i&&n.startTime+n.duration<=a)return r}return-1},r.prototype._loadSegment=function(e){var t=this;t._closeLoadingSegments(),t._state=t.STATES.LOADING,t._seqNum=e,t._segmentInWorker=!1;var n=t._model.getSegment(t._model.currentLoadingStreamIndex,t._seqNum);if(n){var r={segment:n,state:{mp4:t._mp4State,lastAudioTimestamp:t._lastAudioTimestamp}};t._commandManager.executeCommand(i.CMD_SEGMENT_LOAD,r,t);t._model.getCurrentLoadingStream();t._loadSubtitleSegment(n),t._loadMonitorTimer.reset(),t._paused||t._loadMonitorTimer.start()}},r.prototype.onSegmentLoadProgress=function(e,t){var n=this;if(t){switch(p.isNumber(t.pcr)&&n._model.setPCR(t.pcr),p.isNumber(t.startOffsetTimestamp)&&n._model.setStartOffset(t.startOffsetTimestamp),p.isNumber(t.lastAudioTimestamp)&&(n._lastAudioTimestamp=t.lastAudioTimestamp),n._setSegLoadMetrics(t),t.position){case"firstByte":return;case"start":n._switchManager.switchComplete();break;case"end":n._state=n.STATES.NONE}t.mp4Data&&(t.mp4Data.tracks.forEach(function(e){e.codec&&n._bufferController.createSourceBuffer(e.type,e.codec)}),t.mp4Data.tracks.forEach(function(e){n._sendToBuffer(e)})),n._loadMonitorTimer.reset(),n._paused||n._loadMonitorTimer.start()}},r.prototype.onSegmentLoadComplete=function(e){var t=this;t._state=t.STATES.NONE,t._monitorSegmentLoad&&(t._context.sendEvent(a.SEGMENT_LOADED),t._monitorSegmentLoad=!1),t._commandManager.removeCommand(e),t._errorHandler.onLoadComplete(),t._handleSegmentEnd(),t.process()},r.prototype.onSegmentLoadError=function(e,t){var n=this;if(t&&(t.code===o.ERR_PARTIAL_LOAD[0]||t.code===o.ERR_SEGMENT_PARSE[0]))return n._abortCurrentSegment(e,n.STATES.ERROR),void n.process();n._state=n.STATES.ERROR,n._commandManager.removeCommand(e);var r=t.code===o.ERR_XHR_LOAD[0]?new o.Error(o.ERR_SEGMENT_LOAD):t;n._errorHandler.handle(r)},r.prototype._switchStream=function(e,t){var n=this;if("end"!==t){var r=n._switchManager.switchStream("mid-segment","down");r&&(n._state===n.STATES.LOADING&&n._abortCurrentSegment(e),n.process())}},r.prototype._abortCurrentSegment=function(e){var t=this;e&&t._commandManager.removeCommand(e),t._setSegLoadMetrics({position:"end",segmentInWorker:t._segmentInWorker}),t._state=t.STATES.ERROR},r.prototype._loadSubtitleSegment=function(e){var t=this;if(e){var n=t._model.getCurrentLoadingStream();if(n&&n.subtitleStream){var r={subtitleStream:n.subtitleStream,seqNum:e.seqNum,programDateTime:e.programDateTime};t._commandManager.executeCommand(i.CMD_SUBTITLE_SEGMENT_LOAD,r,t)}}},r.prototype.onSubtitleSegmentLoadComplete=function(e,t){var n=this;t&&n._context.sendEvent(a.VTT_SEGMENT_LOADED,t.data),n._commandManager.removeCommand(e)},r.prototype.onSubtitleSegmentLoadError=function(e,t){var n=this;n._commandManager.removeCommand(e)},r.prototype._closeLoadingSegments=function(){var e=this;e._state=e.STATES.NONE,e._commandManager.removeRelatedCommands(i.CMD_SEGMENT_LOAD)},r.prototype._sendToBuffer=function(e){var t=this;e&&(t._bufferController.appendBuffer(e,function(e,n){e&&console.error("[StreamingController] Error in appendBuffer Err = "+e.toString()),t._sendPreloadProgress(),t._onAppendBufferComplete(e,n)}),t._mp4State[e.type].shouldInit=!1)},r.prototype._initMp4State=function(){var e=this;e._mp4State={audio:{shouldInit:!0,seqNum:0},video:{shouldInit:!0,seqNum:0}}},r.prototype._setEndOfVod=function(e){var t=this;t._endOfVod=e,t._bufferController.endOfStream(e)},r.prototype._setSegLoadMetrics=function(e){var t=this,n=e.position,r=e.segmentInWorker,i=e.perfInfo,a=t._model.getCurrentLoadingStream(),o=a?a.getSegmentfromSeqNum(t._seqNum):null,s={bitrateIndex:a?a.index:0,
frameRate:a?a.frameRate:30};"firstByte"===n?(s.beginTime=o?o.startTime:NaN,s.switchReason="none",s.observedBitrate=t._services.bandwidthEstimator.averageBandwidth,s.timeToFirstByte=o?o.timeToFirstByte:NaN,s.endTime=o?o.startTime+o.duration:NaN,t._metrics.segmentLoadBegin(t._seqNum,s)):"end"===n&&(s.perfInfo=i,s.timeToDownload=o?o.totalDownloadTime:NaN,s.segmentInWorker=r?!0:!1,t._metrics.segmentLoadEnd(t._seqNum,s))},r.prototype._onAppendBufferComplete=function(e,t){var n=this;n._bufferController.clear(n._getPastBufferRange(t),t)},r.prototype._getPastBufferRange=function(e){var t=this,n=t._node.currentTime,r=e.buffer.buffered,i=0,a=0;return r&&r.length&&(i=r.start(0),a=Math.max(n-t.PAST_BUFFER_LENGTH_LIMIT,0)),{start:i,end:a}},r.prototype._handleSegmentEnd=function(){var e=this,t=e._model.getCurrentLoadingStream();t&&t.endSeqNum===e._seqNum&&e._setEndOfVod(!0)},r.prototype.onPreloadBegin=function(){var e=this;e._preloading=!0,e._preloadProgressSent=!1},r.prototype.onPreloadEnd=function(){var e=this;e._preloading=!1},r.prototype._sendPreloadProgress=function(){var e=this;e._preloading&&e._model.getBufferLength()>0&&!e._preloadProgressSent&&(e._context.sendEvent(a.PRELOAD_PROGRESS),e._preloadProgressSent=!0)},r.prototype.setABRMode=function(e){var t=this;if(t._model.setABRMode(e)&&t._model.getABRMode()!==u.AUTO){var n=t._node.currentTime;t._bufferController.clear(),t._setEndOfVod(!1),t.process(n),t._node.pause(),t._monitorSegmentLoad=!0;var r=function(){t._node.currentTime=n,t._node.play(),t._context.removeEventListener(a.SEGMENT_LOADED,r)};t._context.addEventListener(a.SEGMENT_LOADED,r)}}},{"../../lib":161,"../../lib/timer":165,"../command/command":173,"../error":187,"../helper/error-handler":189,"../helper/stream-loader":192,"../model/model":198,"./../event":188,"./switch-manager":186}],186:[function(e,t,n){"use strict";function r(){var e=this;e._model=e._context.model,e._abrController=e._context.create(i),e._abrInputData={estimatedBandwidthInBps:0,bitrateList:[],currentIndex:0,bufferLength:0},e._eventKeys={},e._onMediaLoaded(),e.switching=!0,e.SWITCH_BEGIN="switchBegin",e.SWITCH_END="switchEnd",e._useAnalytics=e._model.config.sendAbrAnalytics,e._analytics=new d,o.call(e,e.constructor.name),e._eventKeys[l.MEDIA_LOADED]=e._context.addEventListener(l.MEDIA_LOADED,e._onMediaLoaded,e)}t.exports=r;var i=e("./../abr/abr-controller"),a=e("../model/model").AbrModes,o=e("../../lib/event-bus"),s=e("../../lib/hls-utils"),l=e("./../event").HLSEvent,d=e("../model/abr-analytics"),c=e("../abr/abr-rules").ResolutionRule;s.inherits(r,o),r.prototype.destroy=function(){var e=this;e._abrController.destroy(),e._context.removeEventListeners(e._eventKeys),e._analytics.destroy(),o.prototype.destroy.call(e)},r.prototype.switchStream=function(e,t,n){var r=this;r._model.getABRMode()!==a.AUTO&&r._model.streams.forEach(function(e,t){r._model.getUserReqBitrate()===e.bitrate&&(n=t)});var i,o=r._model.currentLoadingStreamIndex,s=r._prepareAbrInput();return i="number"==typeof n?n:r._abrController.getNextStreamIndex(s),r._useAnalytics&&(r._analytics.nextIndex=i,r._analytics.scenario=e,r._updateAnalytics(s),"load"===e&&r._sendAnalyticsData()),0>i?!1:i===o?!1:t&&("up"===t&&o>i||"down"===t&&i>o)?!1:(r._model.setCurrentLoadingStream(i),r.switching=!0,r.publish(r.SWITCH_BEGIN,i),r._useAnalytics&&r._analytics.switchCount++,!0)},r.prototype.switchComplete=function(){var e=this;e.switching=!1,e.publish(e.SWITCH_END)},r.prototype._prepareAbrInput=function(){var e=this,t=e._context.node,n=e._abrInputData,r=e._context.services.bandwidthEstimator;return n.estimatedBandwidthInBps=1e3*r.averageBandwidth*1e3,n.currentIndex=e._model.currentLoadingStreamIndex,n.bufferLength=e._model.getBufferLength(),n.displayWidth=t.clientWidth,n.displayHeight=t.clientHeight,n.streams=e._model.streams,n},r.prototype._onMediaLoaded=function(){var e=this;e._model.streams&&(e._abrInputData.bitrateList=[],e._model.streams.forEach(function(t){e._abrInputData.bitrateList.push(t.bitrate)}))},r.prototype._updateAnalytics=function(e){var t=this,n=Date.now();t._analytics.pixelRatio=(new c).getPixelRatio(),t._analytics.baseTime||(t._analytics.baseTime=n),e&&(t._analytics.currentIndex=e.currentIndex,t._analytics.displayHeight=e.displayHeight,t._analytics.displayWidth=e.displayWidth,t._analytics.estimatedBandwidth=Math.floor(e.estimatedBandwidthInBps/1e3),t._analytics.bufferLength=e.bufferLength,t._analytics.time=n-t._analytics.baseTime);var r={};r.bl=t._model.getBufferLength().toFixed(2),r.sc=t._analytics.scenario?t._analytics.scenario.charAt(0):"",r.dw=e?e.displayWidth:NaN,r.dh=e?e.displayHeight:NaN,r.eb=e?Math.floor(e.estimatedBandwidthInBps/1e3):NaN,r.ci=t._analytics.currentIndex,r.ni=t._analytics.nextIndex,r.pr=t._analytics.pixelRatio.toFixed(2),r.time=t._analytics.time,t._analytics.push(r)},r.prototype.addBufferingEntry=function(e,t,n){var r=this;if(e>=0){var i={bl:r._model.getBufferLength().toFixed(2),sc:"b",mbt:e.toFixed(1),br:Math.floor(n),eb:Math.floor(t),ci:r._model.currentLoadingStreamIndex,time:r._analytics.baseTime?Date.now()-r._analytics.baseTime:0};r._analytics.push(i)}},r.prototype._sendAnalyticsData=function(){var e=this;e._context.sendEvent(l.ABR_DATA_UPDATED,e._analytics.getDto()),e._analytics.reset()}},{"../../lib/event-bus":159,"../../lib/hls-utils":160,"../abr/abr-rules":168,"../model/abr-analytics":195,"../model/model":198,"./../abr/abr-controller":167,"./../event":188}],187:[function(e,t,n){"use strict";function r(e,t){var n=this;n.code=e[0],n.message=e[1],n.type=e[2],t&&(n.message+=": "+t),n.error=new Error(n.message,n.code)}n.Error=r;var i={API:"api",NETWORK:"network",DECODE:"decode"},a={ERR_XHR_LOAD:[11,"Failed to load xhr request",i.NETWORK],ERR_PLAYLIST_LOAD:[12,"Failed to load Playlist",i.NETWORK],ERR_SUBS_LOAD:[13,"Failed to load Subtitle",i.NETWORK],ERR_SEGMENT_LOAD:[14,"Failed to load Segment",i.NETWORK],ERR_PARTIAL_LOAD:[15,"Loader failed to load complete data",i.NETWORK],ERR_MASTER_PLAYLIST_PARSE:[16,"Failed to parse Master Playlist",i.DECODE],ERR_MEDIA_PLAYLIST_PARSE:[17,"Failed to parse Media Playlist",i.DECODE],ERR_SEGMENT_PARSE:[18,"Failed to parse segment data",i.DECODE],ERR_API_NO_NODE:[19,"No video node is being set",i.API]};Object.keys(a).forEach(function(e){n[e]=a[e]})},{}],188:[function(e,t,n){"use strict";n.HLSEvent={STATE_CHANGED:"stateChanged",PRELOADED:"preloaded",PRELOAD_PROGRESS:"preloadProgress",MEDIA_LOADED:"mediaLoaded",STREAM_UPDATED:"streamUpdated",SUBTITLE_STREAM_UPDATED:"subtitleStreamUpdated",INFO_UPDATE:"infoUpdate",SEGMENT_LOADED:"segmentLoaded",VTT_SEGMENT_LOADED:"vttSegmentLoaded",PCR_AVAILABLE:"pcrAvailable",STREAM_SWITCHED:"streamSwitched",LIVE_LOADING_LATE:"liveLoadingLate",WAITING:"hlsWaiting",CUEPOINT_DETECTED:"cuepointDetected",CUEPOINT_STARTED:"cuepointStarted",ABR_DATA_UPDATED:"abrDataUpdated"},n.ExternalEvents=[n.HLSEvent.MEDIA_LOADED,n.HLSEvent.INFO_UPDATE,n.HLSEvent.VTT_SEGMENT_LOADED,n.HLSEvent.STREAM_SWITCHED,n.HLSEvent.LIVE_LOADING_LATE,n.HLSEvent.STREAM_UPDATED,n.HLSEvent.WAITING,n.HLSEvent.CUEPOINT_DETECTED,n.HLSEvent.CUEPOINT_STARTED,n.HLSEvent.SUBTITLE_STREAM_UPDATED,n.HLSEvent.ABR_DATA_UPDATED,n.HLSEvent.PRELOAD_PROGRESS]},{}],189:[function(e,t,n){"use strict";function r(e){var t=this;t._model=t._context.model,t._commandManager=e,t.SWITCH_ON_ERROR="switchOnError",t._error=null,i.call(t,t.constructor.name)}t.exports=r;var i=e("../../lib/event-bus"),a=e("../../lib/hls-utils"),o=e("../command/command").CmdNames;a.inherits(r,i),r.prototype.destroy=function(){var e=this;e._model=null,e._commandManager=null,e._error=null},r.prototype.handle=function(e,t){var n=this;n._error=e;var r=n._commandManager.getCommand(o.CMD_ERROR_HANDLE);r?r.execute(t):n._commandManager.executeCommand(o.CMD_ERROR_HANDLE,{isMaster:t},n)},r.prototype.onErrorHandleProgress=function(e,t){var n=this;n.publish(n.SWITCH_ON_ERROR,t.index)},r.prototype.onErrorHandleError=function(e){var t=this;t._commandManager.removeCommand(e),t._context.notifyError(t._error)},r.prototype.onLoadComplete=function(){var e=this,t=e._commandManager.getCommand(o.CMD_ERROR_HANDLE);e._commandManager.removeCommand(t)}},{"../../lib/event-bus":159,"../../lib/hls-utils":160,"../command/command":173}],190:[function(e,t,n){"use strict";function r(e,t){var n=this;if(n._model=n._context.model,n._useWorker=n._model.config.useWorker,n._moduleName="HlsTransformer",n._instanceId=o.guid(),n._properties=e,n._callback=t,n.MIN_BUFFER_LENGTH=5,n._shouldUseWorker()){if(n._worker=n._context.services.getWorker(n._moduleName),n._worker)return n._worker.addEventListener("message",n._onMessage.bind(n)),void n._worker.postMessage({moduleName:n._moduleName,instanceId:n._instanceId,messageId:a.CREATE,args:[e]});n._model.config.useWorker=!1}n._transformer=new i(e,t),n._useWorker=!1}t.exports=r;var i=e("./hls-transformer"),a=e("../services/worker-defs").MessageIds,o=e("../../lib/hls-utils"),s=e("../controller/controller-states"),l=e("../../lib/user-agent");r.prototype.destroy=function(){var e=this;e._useWorker&&e._worker?e._worker.postMessage({moduleName:e._moduleName,instanceId:e._instanceId,messageId:a.DESTROY}):e._transformer.destroy()},r.prototype.close=function(){var e=this;e._useWorker&&e._worker?e._worker.postMessage({moduleName:e._moduleName,instanceId:e._instanceId,messageId:a.CALL_METHOD,funcName:"close"}):e._transformer.close()},r.prototype.append=function(e){var t=this;if(t._useWorker&&t._worker){var n={moduleName:t._moduleName,instanceId:t._instanceId,messageId:a.CALL_METHOD,funcName:"append",args:[e]};t._worker.postMessage(n,[n.args[0].buffer])}else t._transformer.append(e)},r.prototype.endOfSegment=function(){var e=this;e._useWorker&&e._worker?e._worker.postMessage({moduleName:e._moduleName,instanceId:e._instanceId,messageId:a.CALL_METHOD,funcName:"endOfSegment"}):e._transformer.endOfSegment()},r.prototype._onMessage=function(e){var t=this;t._callback&&e&&e.data&&e.data.instanceId===t._instanceId&&(e.data.segmentInWorker=!0,t._callback(e.data))},r.prototype._shouldUseWorker=function(){var e=this;return e._useWorker?(l.chrome&&(e._useWorker=e._context.controller&&e._context.controller.getState()>=s.PLAY_REQUESTED?e._model.getBufferLength()>e.MIN_BUFFER_LENGTH:!0),e._useWorker):!1}},{"../../lib/hls-utils":160,"../../lib/user-agent":166,"../controller/controller-states":181,"../services/worker-defs":210,"./hls-transformer":191}],191:[function(e,t,n){"use strict";function r(e,t){var n=this;n._properties=e,n._callback=t,n._tsDemux=new i(e.demux,n._processSegmentData.bind(n)),n._mp4Generator=new a,n.DEFAULT_WIDTH=640,n.DEFAULT_HEIGHT=360,n._startOffsetTimestamp=n._properties.startOffsetTimestamp,n._lastAudioTimestamp=n._properties.lastAudioTimestamp}t.exports=r;var i=e("../ts-demux/ts-parser"),a=e("../mp4/mp4-generator"),o=e("../../lib");r.prototype.destroy=function(){var e=this;e._tsDemux.destroy(),e._mp4Generator.destroy()},r.prototype.close=function(){var e=this;e._tsDemux.destroy()},r.prototype.append=function(e){var t=this;t._tsDemux.append(e)},r.prototype.endOfSegment=function(){var e=this;e._tsDemux.endOfSegment()},r.prototype._processSegmentData=function(e){var t=this;if(e&&!e.error){var n=e.avData,r=e.pos;if(n){var i={};t._properties.pcr||(t._properties.pcr=n.pcr-t._properties.startTime*t._properties.timescale);var a=[],o=n.audio,s=n.video,l="Position = "+r,d=t._properties.pcr,c=null;o&&o.frames&&o.frames.length&&(o.type="audio",o.config.timescale=t._properties.timescale,o.config.duration=t._properties.duration*o.config.timescale,o.config.useEditBox=t._properties.useEditBox,o.frames.forEach(function(e){e.dts-=d,e.pts-=d}),o.startTime=o.frames[0].dts,o.endTime=o.frames[o.frames.length-1].dts,l=l+" audio frames = "+o.frames.length+" audio time = "+(o.endTime-o.startTime),a.push(o)),s&&s.frames&&s.frames.length&&(s.type="video",s.config.timescale=t._properties.timescale,s.config.duration=t._properties.duration*s.config.timescale,s.config.width=t._properties.width||t.DEFAULT_WIDTH,s.config.height=t._properties.height||t.DEFAULT_HEIGHT,s.config.useEditBox=t._properties.useEditBox,s.frames.forEach(function(e){e.dts-=d,e.pts-=d}),s.startTime=s.frames[0].dts,s.endTime=s.frames[s.frames.length-1].dts,c=s.frames[0].pts,l=l+" video frames = "+s.frames.length+" video time = "+(s.endTime-s.startTime),a.push(s)),i.position=t.position=r,i.pcr=d,"number"!=typeof t._startOffsetTimestamp&&"number"==typeof c&&(t._startOffsetTimestamp=c),i.startOffsetTimestamp=t._startOffsetTimestamp,i.mp4Data=t._convertToMp4(a),i.lastAudioTimestamp=t._lastAudioTimestamp;var p=[];i.mp4Data&&i.mp4Data.tracks&&i.mp4Data.tracks.forEach(function(e){p.push(e.data.buffer)}),t._callback&&t._callback(i,p)}}},r.prototype._convertToMp4=function(e){var t=this;if(e&&e.length){var n={tracks:[]};return e.forEach(function(e){e&&(e.config.offset=t._properties.live?0:t._startOffsetTimestamp,e.config.shouldInit=t._properties.mp4State[e.type].shouldInit,e.config.seqNum=t._properties.mp4State[e.type].seqNum++,"video"===e.type?e.config.defaultFrameDuration=t._properties.timescale/t._properties.frameRate:"audio"===e.type&&(e.config.defaultFrameDuration=1024*t._properties.timescale/e.config.samplingFreq,t._closeGapsInBuffer(e.frames,e.config.defaultFrameDuration)),t._properties.mp4State[e.type].shouldInit=!1,n.tracks.push(t._mp4Generator.generate(e)))}),n}},r.prototype._closeGapsInBuffer=function(e,t){var n=this;if(e&&e.length){var r=e[e.length-1].dts,i=e[0].dts;if(o.isNumber(n._lastAudioTimestamp)&&!isNaN(n._lastAudioTimestamp)){var a=i-n._lastAudioTimestamp,s=Math.ceil(2*t),l=Math.ceil(4*t);if(a>s&&l>a)for(var d=Math.floor(a/t)-1,c=0;d>c;c++){var p=e[0].dts;e.unshift(o.deepCopy(e[0])),e[0].dts=p-t,e[0].pts=e[0].dts}}n._lastAudioTimestamp=r}}},{"../../lib":161,"../mp4/mp4-generator":204,"../ts-demux/ts-parser":213}],192:[function(e,t,n){"use strict";function r(e,t){var n=this;n._model=n._context.model,n._commandManager=e,n._parser=n._context.services.metadataParser,n._errorHandler=t}t.exports=r;var i=e("../command/command").CmdNames,a=e("./../model/model").MetadataTypes,o=e("../error"),s=e("./../event").HLSEvent;r.prototype.destroy=function(){},r.prototype.loadCurrentStream=function(){var e=this,t=e._model.getCurrentLoadingStream();e._commandManager.executeCommand(i.CMD_STREAM_LOAD,{streamUrl:t.url,index:t.index},e),t.subtitleStream=e._model.getAssociatedSubtitleStream(t),t.subtitleStream&&e._commandManager.executeCommand(i.CMD_SUBTITLE_STREAM_LOAD,{streamUrl:t.subtitleStream.url},e)},r.prototype.onStreamLoadComplete=function(e,t){var n=this;if(e){if(!t)return void n._commandManager.removeCommand(e);var r={rawData:t.data,type:a.RAW,url:t.streamUrl,index:t.streamIndex};n._model.build(n._parser.parse(r)),n._commandManager.removeCommand(e),n._context.sendEvent(s.STREAM_UPDATED,r.index),n._errorHandler&&n._errorHandler.onLoadComplete()}},r.prototype.onStreamLoadError=function(e,t){var n=this;n._commandManager.removeCommand(e);var r=t.code===o.ERR_XHR_LOAD[0]?new o.Error(o.ERR_PLAYLIST_LOAD):t;n._errorHandler?n._errorHandler.handle(r,!0):n._context.notifyError(r)},r.prototype.onSubtitleStreamLoadComplete=function(e,t){var n=this;if(e){if(!t)return void n._commandManager.removeCommand(e);var r={rawData:t.data,type:a.RAW_SUBTITLE,url:t.streamUrl};n._model.build(n._parser.parse(r)),n._context.sendEvent(s.SUBTITLE_STREAM_UPDATED),n._commandManager.removeCommand(e)}},r.prototype.onSubtitleStreamLoadError=function(e,t){1===t.code}},{"../command/command":173,"../error":187,"./../event":188,"./../model/model":198}],193:[function(e,t,n){"use strict";function r(e,t,n,r){var l=this;s.call(l,l.constructor.name),l.node=t,l.window=e,l.mediaSource=new e.MediaSource,l.node.src=e.URL.createObjectURL(l.mediaSource),l.model=l.create(i,n,r),l.services=l.create(o),l.controller=l.create(a),l.controller.initialize()}t.exports=r;var i=e("./model/model").Model,a=e("./controller/controller"),o=e("./services/services"),s=e("../lib/event-bus"),l=e("./event"),d=e("../lib/hls-utils");d.inherits(r,s),r.prototype.create=function(){var e=this,t=Array.prototype.slice.call(arguments),n=t.shift(),r=Object.create(n.prototype);return r._context=e,n.apply(r,t),r},r.prototype.sendEvent=function(e,t){var n=this;n.publish(e,t),e&&l.ExternalEvents.indexOf(e)>=0&&n.node.dispatchEvent(n._createCustomEvent(e,t))},r.prototype.getSegInfo=function(){var e=this;return e.services.metrics.getMetrics()},r.prototype.notifyError=function(e){var t=this;t.error=e;var n=t.error.type||"decode";"open"===t.mediaSource.readyState&&t.mediaSource.endOfStream(n),t.controller.destroy()},r.prototype._createCustomEvent=function(e,t){var n=this,r=new n.window.CustomEvent(e,{detail:t,bubbles:!1,cancelable:!1});return r},r.prototype.setABRMode=function(e){var t=this;t.controller.setABRMode(e)},r.prototype.play=function(e){var t=this;t.controller.play(e)},r.prototype.preload=function(e){var t=this;t.controller.preload(e)},r.prototype.destroy=function(){var e=this;e.controller.destroy(),e.services.destroy(),e.model.destroy(),e.mediaSource=null,s.prototype.destroy.call(e)}},{"../lib/event-bus":159,"../lib/hls-utils":160,"./controller/controller":182,"./event":188,"./model/model":198,"./services/services":209}],194:[function(e,t,n){"use strict";function r(e,t){var n=this;n._opts=t||{},"string"==typeof e?n._node=document.querySelector(e):n._node=e||null,Object.defineProperty(n,"error",{enumerable:!0,get:function(){return n._context?n._context.error:null}}),o.apply()}t.exports=r;var i=e("./hls-context"),a=e("./error"),o=e("../lib/polyfills");r.prototype.setSrc=function(e){var t=this;if(!t._node)throw new a.Error(a.ERR_API_NO_NODE).error;if(!e)return void(t._node.src="");if(e!==t._metadata){t._metadata=e,t._context&&t.unload();try{t._context=new i(window,t._node,t._metadata,t._opts)}catch(n){console.error("[HlsPlayer][setSrc] Exception = "+n.message+" stack = "+n.stack)}}},r.prototype.getSegInfo=function(){var e=this;try{return e._context?e._context.getSegInfo():null}catch(t){return console.error("[HlsPlayer][getSegInfo] Exception = "+t.message+" stack = "+t.stack),null}},r.prototype.setQuality=function(e){var t=this;try{t._context.setABRMode(e)}catch(n){console.error("[HlsPlayer][setQuality] Exception = "+n.message+" stack = "+n.stack)}},r.prototype.unload=function(){var e=this;e._context&&e._context.destroy(),e._context=null},r.prototype.play=function(e){var t=this;t._context&&t._context.play(e)},r.prototype.preload=function(e){var t=this;t._context&&t._context.preload(e)},r.prototype.destroy=function(){var e=this;e._context&&e._context.destroy(),e._context=null,e._metadata=null,e._opts=null,e._node=null}},{"../lib/polyfills":164,"./error":187,"./hls-context":193}],195:[function(e,t,n){"use strict";function r(){var e=this;e.reset(),e.switchCount=0}t.exports=r,r.prototype.destroy=function(){var e=this;e._list=[]},r.prototype.reset=function(){var e=this;e.scenario="",e.estimatedBandwidth=NaN,e.currentIndex=NaN,e.displayWidth=NaN,e.displayHeight=NaN,e.pixelRatio=1,e.bufferLength=0,e.nextIndex=NaN,e.reason="",e._list=[],e.time=NaN},r.prototype.push=function(e){var t=this;e&&t._list.push(e)},r.prototype.getDto=function(){var e=this,t={};return t.sc=e.scenario.charAt(0),t.ci=e.currentIndex,t.dw=e.displayWidth,t.dh=e.displayHeight,t.pr=e.pixelRatio.toFixed(2),t.eb=e.estimatedBandwidth.toFixed(3),t.bl=e.bufferLength.toFixed(2),t.swc=e.switchCount,t.ted=e._list.slice(),t.ni=e.nextIndex,t.rs=e.reason,t.time=e.time,t}},{}],196:[function(e,t,n){"use strict";function r(e){var t=this;e&&(t.startSeqNum=e.startSeqNum,t.startTime=e.startTime,t.cuepointDuration=e.cuepointDuration,t.isCueOutFired=!1,t.isCueOutDetectedFired=!1)}t.exports=r,r.prototype.setCueOutFiredState=function(e){var t=this;t.isCueOutFired=e},r.prototype.setCueOutDetectedState=function(e){var t=this;t.isCueOutDetectedFired=e},r.prototype.setCueOutStartTime=function(e){var t=this;t.startTime=e}},{}],197:[function(e,t,n){"use strict";t.exports={debug:!1,useWorker:!0,maxRetries:5,maxBuffer:60,requestTimeout:10,chunkedRequestTimeout:5,pastBufferLengthLimit:{vod:180,live:10},segmentLoadMonitorInterval:1,preloadBufferLimit:0,variableMinBuffer:!0,minBufferTime:{vod:.1,live:4},sendAbrAnalytics:!1,demux:{useTimer:!0,startChunkWithKeyFrame:!0}}},{}],198:[function(e,t,n){"use strict";function r(e,t){var n=this;n.configure(t),n._setMetadata(e),n.streams=[],n.subtitleStreams=[],n.live=!1,n.duration=0,n.lastSegmentSeqNum=Number.NaN,n.timescale=9e4,n.TIMESTAMP_COMPARE_EPSILON=.065,n._abrMode=a.AUTO,n._userReqBitrate=0,n._segTimeMap={}}var i=e("../../lib/user-agent");n.Model=r,n.MetadataTypes={RAW:"raw",RAW_SUBTITLE:"rawSubtitle",STRUCTURED:"structured"};var a=n.AbrModes={AUTO:"auto",LOW:"low",MID:"medium",HIGH:"high"},o=e("./stream"),s=e("./subtitle-stream"),l=e("../event").HLSEvent,d=e("./default-config"),c=e("../../lib");r.prototype.destroy=function(){var e=this;e.config=null,e.streams=[],e.subtitleStreams=[],e._segTimeMap={}},r.prototype.configure=function(e){var t=this;t.config=t.config||c.deepCopy(d),t.config.demux.startChunkWithKeyFrame=!(i.chrome&&i.chrome>=50),t.config.demux.useTimer=!(i.chrome||i.ie||i.edge),e&&Object.keys(e).forEach(function(n){t.config.hasOwnProperty(n)&&(t.config[n]=e[n])})},r.prototype.build=function(e){var t=this;if(e){if(e.streamInfoList&&e.streamInfoList.length){var n=e.streamInfoList;i.firefox&&e.streamInfoList[0].channels&&(n=t._filterMonoChannelStreams(e.streamInfoList)),n.forEach(function(e){t.streams.length&&e.index>=0&&e.index<t.streams.length&&e.url===t.streams[e.index].url?t.updateStream(e.index,e):t.addStream(e)}),t._sortStreams(),t.duration=t.live?NaN:n[0].duration}e.subtitleStreamInfoList&&e.subtitleStreamInfoList.length&&e.subtitleStreamInfoList.forEach(function(e){for(var n=!1,r=0;r<t.subtitleStreams.length;r++)if(t.subtitleStreams[r].url===e.url){t.subtitleStreams[r].updateConfig(e),n=!0;break}n||t.subtitleStreams.push(t._context.create(s,e))})}},r.prototype._filterMonoChannelStreams=function(e){for(var t=!1,n=e[0].channels,r=1;r<e.length;r++)if(e[r].channels&&n!==e[r].channels){t=!0;break}return t?e.filter(function(e){return 1!==e.channels}):e},r.prototype.addStream=function(e){var t=this,n=t._context.create(o,e);t.streams.push(n),n.setStreamIndex(t.streams.length-1),1===t.streams.length&&t.setCurrentLoadingStream(n.index),t.streams.length&&(t.lastSegmentSeqNum=t.streams[0].endSeqNum)},r.prototype.updateStream=function(e,t){var n=this;if(!(e>=n.streams.length)){var r=n.streams[e];t.hasEndList===!1&&(n.live=!0),n.live&&n._convertSegmentStartTime(t),r.updateConfig(t),n.live&&n.lastSegmentSeqNum>=r.endSeqNum&&(r.refreshInterval=500*r.targetDuration),n.lastSegmentSeqNum=r.endSeqNum}},r.prototype.getCurrentLoadingStream=function(){var e=this;return e.streams&&e.streams.length&&e.currentLoadingStreamIndex>=0&&e.currentLoadingStreamIndex<e.streams.length?e.streams[e.currentLoadingStreamIndex]:null},r.prototype.setCurrentLoadingStream=function(e){var t=this;t.streams&&t.streams.length&&(0>e||e>=t.streams.length||(t.currentLoadingStreamIndex=e))},r.prototype.getCurrentPlayingStream=function(){var e=this;return e.streams&&e.streams.length&&e.currentPlayingStreamIndex>=0&&e.currentPlayingStreamIndex<e.streams.length?e.streams[e.currentPlayingStreamIndex]:null},r.prototype.setCurrentPlayingStream=function(e){var t=this;t.streams&&t.streams.length&&(0>e||e>=t.streams.length||(t.currentPlayingStreamIndex=e))},r.prototype.getBufferLength=function(){for(var e,t=this,n=t._context.node,r=n.buffered,i=0,a=n.currentTime,o=0;o<r.length;o++)if(a>=r.start(o)&&a<r.end(o)){e=o;break}return e>=0&&r.length&&(i=r.end(e)-a),i},r.prototype.getPreloadBufferLength=function(){for(var e=this,t=e._context.node.buffered,n=0,r=0;r<t.length;r++)n+=t.end(r)-t.start(r);return n},r.prototype.setPCR=function(e){var t=this;(!t._pcr||isNaN(t._pcr))&&(t._pcr=e,t._context.sendEvent(l.PCR_AVAILABLE,e))},r.prototype.getPCR=function(){var e=this;return e._pcr},r.prototype.setStartOffset=function(e){var t=this;(!t.startOffsetTimestamp||isNaN(t.startOffsetTimestamp))&&(t.startOffsetTimestamp=e)},r.prototype.getAssociatedSubtitleStream=function(e){var t=this;if(!(e&&e.subtitlesGroupId&&t.subtitleStreams&&t.subtitleStreams.length))return null;var n=t.subtitleStreams.filter(function(t){return t&&t.groupId===e.subtitlesGroupId});if(!n||!n.length)return null;for(var r=0;r<n.length;r++)if(n[r].defaultValue)return n[r];return null},r.prototype.getStreamRefreshInterval=function(){var e=this,t=e.getCurrentLoadingStream();return t?t.refreshInterval:null},r.prototype._setMetadata=function(e){var t=this;if(e){e.type=n.MetadataTypes.RAW,t.metadata=e;var r=e.streams;r&&r.length>0&&((r[0].hls_info||r[0].hlsInfo||r.length>1)&&(t.metadata.type=n.MetadataTypes.STRUCTURED,t.metadata.hasMediaMetadata=!0),(r[0].hls_info||r[0].hlsInfo)&&(t.metadata.hasStreamMetadata=!0))}},r.prototype._sortStreams=function(){var e=this;e.streams.sort(function(e,t){return e.bitrate-t.bitrate}),e.streams.forEach(function(e,t){e.index=t})},r.prototype.getSegment=function(e,t){var n=this;return 0>e||e>=n.streams.length?null:n.streams[e].getSegmentfromSeqNum(t)},r.prototype._convertSegmentStartTime=function(e){var t=this;if(e){var n=e.segmentInfoList;if(n&&n.length){Object.keys(t._segTimeMap).length||(t._segTimeMap[n[0].sequenceNum]={startTime:n[0].startTime,programDateTime:n[0].programDateTime});var r,i,a,o,s=t._segTimeMap[n[0].sequenceNum];if(s&&"number"==typeof s.startTime)r=t._segTimeMap[n[0].sequenceNum].startTime;else{var l=Object.keys(t._segTimeMap),d=parseInt(l[l.length-1]);n[n.length-1].sequenceNum<d;var c=0;for(i=1;i<n.length;i++)if(-1!==l.indexOf(n[i].sequenceNum.toString())){c=i;break}if(c)for(r=t._segTimeMap[n[c].sequenceNum].startTime,i=c-1;i>=0;i--)r-=n[i].duration;else{if(n[0].sequenceNum>d)a=parseInt(l[l.length-1]),o=t._segTimeMap[a];else for(i=n[n.length-1].sequenceNum;d>=i;){if(-1!==l.indexOf(i.toString())){a=i,o=t._segTimeMap[a];break}i++}r="number"==typeof o.programDateTime?o.startTime+(n[0].programDateTime-o.programDateTime)/1e3:o.startTime+(n[0].sequenceNum-a)*n[0].duration}}var p=0;n.forEach(function(e){e.startTime=r+p,p+=e.duration,t._segTimeMap[e.sequenceNum]||(t._segTimeMap[e.sequenceNum]={startTime:e.startTime,programDateTime:e.programDateTime})})}}},r.prototype._getFallbackStreams=function(e){var t=this,n=[];return t.streams.forEach(function(t){t.index!==e&&n.push({index:t.index,url:t.url})}),n},r.prototype.selectFallbackStream=function(e){var t=this;return e.length>0?(t.setCurrentLoadingStream(e[0].index),0):void 0},r.prototype.setABRMode=function(e){var t=this,n=t._abrMode;return t._abrMode=a.AUTO,Object.keys(a).forEach(function(n){a[n]===e.preference&&(t._abrMode=e.preference)}),t._userReqBitrate=1e3*e.stream.bitrate,n!==t._abrMode},r.prototype.getABRMode=function(){var e=this;return e._abrMode},r.prototype.getUserReqBitrate=function(){var e=this;return e._userReqBitrate}},{"../../lib":161,"../../lib/user-agent":166,"../event":188,"./default-config":197,"./stream":200,"./subtitle-stream":201}],199:[function(e,t,n){"use strict";function r(e){var t=this;e&&(t.duration=e.duration,t.url=e.url,t.seqNum=e.sequenceNum,t.startTime=e.startTime,t.continuity=e.discontinuityCounter,t.programDateTime=e.programDateTime,t.streamIndex=e.levelIndex,t.bitrate=e.bitrate,t._segmentIndex=t.streamIndex+"_"+t.seqNum),t.totalDownloadTime=0,t.timeToFirstByte=0,t._clockReference=0}t.exports=r,r.prototype.setStreamIndex=function(e){var t=this;t.streamIndex=e,t._segmentIndex=t.streamIndex+"_"+t.seqNum}},{}],200:[function(e,t,n){"use strict";function r(e){var t=this;t.segments=[],t.cuepoints=[],e&&t.updateConfig(e)}t.exports=r;var i=e("./segment"),a=e("./cuepoint");r.prototype.updateConfig=function(e){var t=this;if(e&&(t.bitrate=e.bitrate||t.bitrate,t.width=e.width||t.width,t.height=e.height||t.height,t.url=e.url||t.url,t.index=e.index||t.index,t.hlsInfo=e.hlsInfo||t.hlsInfo,t.audioStreamId=e.audioStreamId||t.audioStreamId,t.subtitlesGroupId=e.subtitlesGroupId||t.subtitlesGroupId,t.targetDuration=e.targetDuration||NaN,t.refreshInterval=1e3*t.targetDuration,void 0!==e.hasEndList&&null!==e.hasEndList&&(t.hasEndList=e.hasEndList),void 0!==e.audio&&null!==e.audio&&(t.audio=e.audio)),t.url&&t.url.length&&t.url.indexOf("_60fps")>=0?t.frameRate=60:t.frameRate=30,e&&e.segmentInfoList){var n=[];e.segmentInfoList.forEach(function(e){e.levelIndex=t.index,e.bitrate=t.bitrate,n.push(t._context.create(i,e))}),n.length&&(t.segments=n,t.startSeqNum=n[0].seqNum,t.endSeqNum=n[n.length-1].seqNum,e.cuepointList&&e.cuepointList.length&&(e.cuepointList.forEach(function(e){t.hasCuepoint(e.startSeqNum)||t.cuepoints.push(new a(e))}),t.updateCuepointTime()))}},r.prototype.setStreamIndex=function(e){var t=this;t.index=e,t.segments.forEach(function(t){t.setStreamIndex(e)})},r.prototype.getSeqNumBeforePosition=function(e){var t=this;if(!t.segments.length)return NaN;if(e<t.segments[0].startTime)return t.startSeqNum;for(var n=0;n<t.segments.length;n++){var r=t.segments[n];if(r&&r.startTime<=e&&r.startTime+r.duration>e)return t.startSeqNum+n}return t.endSeqNum},r.prototype.getSegmentfromSeqNum=function(e){var t=this,n=t.getIndexFromSeqNum(e);return n>=0&&n<t.segments.length?t.segments[n]:null},r.prototype.getIndexFromSeqNum=function(e){var t=this;if(e>=t.startSeqNum&&e<=t.endSeqNum)for(var n=0;n<t.segments.length;n++)if(t.segments[n]&&t.segments[n].seqNum===e)return n;return-1},r.prototype.contains=function(e){var t=this;return e>=t.startSeqNum&&e<=t.endSeqNum},r.prototype.isEmpty=function(){var e=this;return 0===e.segments.length},r.prototype.hasCuepoint=function(e){for(var t=this,n=t.cuepoints.length-1;n>=0;n--)if(t.cuepoints[n].startSeqNum===e)return!0;return!1},r.prototype.updateCuepointTime=function(){for(var e,t=this,n=0;n<t.cuepoints.length;n++)e=t.getSegmentfromSeqNum(t.cuepoints[n].startSeqNum),e&&t.cuepoints[n].setCueOutStartTime(e.startTime)}},{"./cuepoint":196,"./segment":199}],201:[function(e,t,n){"use strict";function r(e){var t=this;t.vttSegmentList=[],e&&t.updateConfig(e)}t.exports=r;var i=e("./vtt-segment");r.prototype.destroy=function(){var e=this;e.vttSegmentList=null},r.prototype.updateConfig=function(e){var t=this;e&&(t.url=e.url||t.url,t.groupId=e.groupId||t.groupId,t.language=e.language||t.language,t.name=e.name||t.name,void 0!==e.defaultValue&&null!==e.defaultValue&&(t.defaultValue=e.defaultValue),void 0!==e.autoSelect&&null!==e.autoSelect&&(t.autoSelect=e.autoSelect),void 0!==e.forced&&null!==e.forced&&(t.forced=e.forced)),e.segmentInfoList&&e.segmentInfoList.length&&(t.vttSegmentList=e.segmentInfoList.map(function(e){return t._context.create(i,e)}))},r.prototype.getVTTSegment=function(e,t){for(var n=this,r=0;r<n.vttSegmentList.length;r++){var i=n.vttSegmentList[r];if(t&&i.programDateTime){var a=r<n.vttSegmentList.length-1?n.vttSegmentList[r+1].programDateTime:i.programDateTime+1e3*i.duration;if(t>=i.programDateTime&&a>t)return i}else if(i.sequenceNum===e)return i}return null}},{"./vtt-segment":202}],202:[function(e,t,n){"use strict";function r(e){var t=this;e&&(t.discontinuityCounter=e.discontinuityCounter,t.sequenceNum=e.sequenceNum,t.startTime=e.startTime,t.programDateTime=e.programDateTime,t.url=e.url,t.duration=e.duration),t.clockReference=0,t.localCueTime=0,t.mpegTSTime=0,t.offset=0,t.adjustedTime=0}t.exports=r,r.prototype.toObject=function(){var e=this,t={};return t.discontinuityCounter=e.discontinuityCounter,t.sequenceNum=e.sequenceNum,t.startTime=e.startTime,t.programDateTime=e.programDateTime,t.url=e.url,t.duration=e.duration,t.playlistUrl=e.playlistUrl,t.clockReference=e.clockReference,t.localCueTime=e.localCueTime,t.mpegTSTime=e.mpegTSTime,t.data=e.data,t.offset=e.offset,t.adjustedTime=e.adjustedTime,t},r.prototype.parseSegment=function(){var e=this;if(e.data){var t=e.data.split("\n");if(!(t.length<=0)&&0===t[0].indexOf("WEBVTT")){for(var n=0,r=1;r<t.length;r++){var i=t[r].trim();if(0===i.indexOf("X-TIMESTAMP-MAP")){var a="LOCAL:",o=Math.floor((Math.pow(2,33)-1)/90),s=i.split("=")[1],l=s.split(","),d=0,c=0;if(l.length){var p=l[0].indexOf(a)>=0?0:1,u=0===p?1:0,_=l[p].substr(a.length),m=_.split(":");
if(m.length){var v=m[2].split("."),y=0,f=0;v.length&&(y=parseInt(v[0]),f=parseInt(v[1])),d=1e3*(3600*m[0]+60*m[1]+y)+f,d%=o}c=parseFloat(l[u].split(":")[1]),c=Math.round(c/90)}e.clockReference=e.pcr(),e.localCueTime=d,e.mpegTSTime=c}else if(i.indexOf("-->")>=0){var g=i.split("-->");if(g){var b=g[0].split(":");if(b){var h=parseInt(b[0]),E=parseInt(b[1]),T=parseFloat(b[2]),A=1e3*(3600*h+60*E+T);n=A,e.clockReference||(e.clockReference=A+e.mpegTSTime)}}break}}e.adjustedTime=c-d-e.clockReference+e.offset}}},r.prototype.pcr=function(){var e=this;if(!e._context)return 0;var t=e._context.model,n=t.getPCR();if(n&&(n=n/e._context.model.timescale*1e3),t.live&&0>n){var r=-Math.floor(Math.pow(2,32)/90),i=Math.floor((Math.pow(2,32)-1)/90),a=Math.abs(n-r);n=a+i}return n}},{}],203:[function(e,t,n){"use strict";function r(){}t.exports=r;var i=8,a=12,o=a+4,s=9e4;r.prototype.initSegment=function(e,t){var n=this,r=n.ftyp(t),i=n.moov(e),a=new Uint8Array(r.byteLength+i.byteLength);return a.set(r),a.set(i,r.byteLength),a},r.prototype.ftyp=function(e){var t=this;e=e||"avc1";var n=new Uint8Array([105,115,111,109]),r=new Uint8Array([0,0,0,1]),i=new Uint8Array([e.charCodeAt(0),e.charCodeAt(1),e.charCodeAt(2),e.charCodeAt(3)]);return t._box("ftyp",[n,r,i])},r.prototype.moov=function(e){var t=this,n=[];n.push(t._mvhd(e[0].config.duration,e[0].config.timescale));for(var r=0;r<e.length;r++)n.push(t._trak(e[r]));return n.push(t._mvex(e)),t._box("moov",n)},r.prototype.moof=function(e,t){var n=this,r=[];r.push(n._mfhd(e));for(var i=0;i<t.length;i++){var a=n._traf(t[i]);r.push(a)}return n._box("moof",r)},r.prototype.mdat=function(e){var t=this,n=[];if(e&&e.frames)for(var r=0;r<e.frames.length;r++)n.push(e.frames[r].data);return t._box("mdat",n)},r.prototype._mfhd=function(e){var t=this,n=new Uint8Array(4),r=new DataView(n.buffer);return r.setUint32(0,e),t._fullBox("mfhd",0,new Uint8Array(3),[n])},r.prototype._traf=function(e){if(e){var t=this,n=[],r=i+o+i,a=t._tfhd(e);r+=a.length,n.push(a);var s;e.frames&&e.frames.length&&(s=t._tfdt(e.frames[0].dts),r+=s.length,n.push(s));var l;return"video"===e.type&&(l=t._sdtp(e),r+=l.length),n.push(t._trun(e,r)),l&&n.push(l),t._box("traf",n)}},r.prototype._tfhd=function(e){var t=this,n=new Uint8Array(4),r=new DataView(n.buffer);return r.setUint32(0,e.streamId),t._fullBox("tfhd",0,new Uint8Array([0,0,0]),[n])},r.prototype._tfdt=function(e){var t=this,n=new Uint8Array(4),r=new DataView(n.buffer);return r.setUint32(0,Math.max(0,e)),t._fullBox("tfdt",0,new Uint8Array([0,0,0]),[n])},r.prototype._trun=function(e,t){for(var n=this,r=e.frames||[],o=r.length,s=n._getTrunFlags(r),l=0,d=s[1],c=0;4>c;c++)l+=d&1<<c?1:0;var p=new Uint8Array(4*l*o),u=new DataView(p.buffer);t+=a+8+p.length+i;var _=n._getTrunHeader(o,t),m=0;for(c=0;o>c;c++){var v=r[c];if(1&d&&(u.setUint32(m,v.duration),m+=4),2&d&&(u.setUint32(m,v.size),m+=4),4&d){var y=v.flags.isLeading<<2|v.flags.dependsOn,f=v.flags.isDependedOn<<6|v.flags.hasRedundancy<<4|v.flags.paddingValue<<1|v.flags.isNonSyncSample,g=240&v.flags.degradationPriority,b=15&v.flags.degradationPriority,h=y<<24|f<<16|g<<8|b;u.setUint32(m,h),m+=4}8&d&&(u.setUint32(m,v.pts-v.dts),m+=4)}return n._fullBox("trun",0,s,[_,p])},r.prototype._sdtp=function(e){for(var t=this,n=e.frames||[],r=n.length,i=new Uint8Array(r),a=0;r>a;a++){var o=n[a];o.flags&&(i[a]=o.flags.isLeading<<6|o.flags.dependsOn<<4|o.flags.isDependedOn<<2|o.flags.hasRedundancy)}return t._fullBox("sdtp",0,new Uint8Array(3),[i])},r.prototype._getTrunHeader=function(e,t){var n=new Uint8Array(8),r=new DataView(n.buffer);return r.setUint32(0,e),r.setInt32(4,t),n},r.prototype._getTrunFlags=function(e){var t=e.length,n=new Uint8Array(3);return n[2]=1,t&&(void 0!==e[0].duration&&(n[1]|=1),void 0!==e[0].size&&(n[1]|=2),void 0!==e[0].flags&&(n[1]|=4),void 0!==e[0].pts&&(n[1]|=8)),n},r.prototype._mvhd=function(e,t){var n=this,r=new Uint8Array(96),i=new DataView(r.buffer);i.setUint32(0,1),i.setUint32(4,2);var a=t||s;return i.setUint32(8,a),e&&i.setUint32(12,e),i.setUint32(16,65536),i.setUint16(20,256),i.setUint32(32,65536),i.setUint32(48,65536),i.setUint32(64,1073741824),i.setUint32(92,4294967295),n._fullBox("mvhd",0,new Uint8Array(3),[r])},r.prototype._trak=function(e){var t=this;e.config.duration=e.config.duration||4294967295;var n=[t._tkhd(e)];return e.config.useEditBox&&n.push(t._edts(e)),n.push(t._mdia(e)),t._box("trak",n)},r.prototype._tkhd=function(e){var t=this,n=new Uint8Array(80),r=new DataView(n.buffer);return r.setUint32(8,e.streamId),r.setUint32(16,e.config.duration),r.setUint8(32,"audio"===e.type?1:0),r.setUint32(36,65536),r.setUint32(52,65536),r.setUint32(68,1073741824),r.setUint16(72,e.config.width),r.setUint16(76,e.config.height),t._fullBox("tkhd",0,new Uint8Array([0,0,7]),[n])},r.prototype._edts=function(e){var t=this;return t._box("edts",[t._elst(e)])},r.prototype._elst=function(e){var t=this,n=new Uint8Array(16),r=new DataView(n.buffer);return r.setUint32(0,1),r.setUint32(4,0),r.setUint32(8,e.config.offset),r.setUint16(12,1),r.setUint16(14,0),t._fullBox("elst",0,new Uint8Array(3),[n])},r.prototype._mdia=function(e){var t=this;return t._box("mdia",[t._mdhd(e),t._hdlr(e.type),t._minf(e)])},r.prototype._mdhd=function(e){var t=this,n=new Uint8Array(20),r=new DataView(n.buffer);r.setUint32(0,2),r.setUint32(4,3);var i=e.config.timescale||s;return r.setUint32(8,i),r.setUint32(12,e.config.duration),r.setUint16(16,21956),t._fullBox("mdhd",0,new Uint8Array(3),[n])},r.prototype._hdlr=function(e){var t=this,n={video:1986618469,audio:1936684398,hint:1751740020},r=new Uint8Array(32),i=new DataView(r.buffer);return i.setUint32(4,n[e]),i.setUint32(20,n[e]),i.setUint32(24,1214344804),i.setUint32(28,1818587648),t._fullBox("hdlr",0,new Uint8Array(3),[r])},r.prototype._minf=function(e){var t=this,n="audio"===e.type?t._smhd():t._vmhd();return t._box("minf",[n,t._dinf(),t._stbl(e)])},r.prototype._vmhd=function(){var e=this,t=new Uint8Array(8);return e._fullBox("vmhd",0,new Uint8Array([0,0,1]),[t])},r.prototype._smhd=function(){var e=this,t=new Uint8Array(4);return e._fullBox("smhd",0,new Uint8Array(3),[t])},r.prototype._dinf=function(){var e=this;return e._box("dinf",[e._dref()])},r.prototype._dref=function(){var e=this,t=new Uint8Array([0,0,0,1]),n=[];return n.push(t),n.push(e._url(new Uint8Array([0,0,1]))),e._fullBox("dref",0,new Uint8Array(3),n)},r.prototype._url=function(e){var t=this;return t._fullBox("url ",0,e,[])},r.prototype._urn=function(e){var t=this;return t._fullBox("urn ",0,e,[])},r.prototype._stbl=function(e){var t=this;return t._box("stbl",[t._stsd(e),t._stts(),t._stsc(),t._stsz(),t._stco()])},r.prototype._stsd=function(e){var t=this,n="audio"===e.type?t._audioSample(e):t._videoSample(e),r=new Uint8Array([0,0,0,1]);return t._fullBox("stsd",0,new Uint8Array(3),[r,n])},r.prototype._videoSample=function(e){var t=this,n=[];n.push((65280&e.config.ppsLength)>>>8),n.push(255&e.config.ppsLength),n=n.concat(Array.prototype.slice.call(e.config.pps));var r=[];r.push((65280&e.config.spsLength)>>>8),r.push(255&e.config.spsLength),r=r.concat(Array.prototype.slice.call(e.config.sps));var i=new Uint8Array(78),a=new DataView(i.buffer);return a.setUint16(6,1),a.setUint16(24,e.config.width),a.setUint16(26,e.config.height),a.setUint32(28,4718592),a.setUint32(32,4718592),a.setUint16(40,1),a.setUint32(42,259613032),a.setUint32(46,1869557110),a.setUint32(50,1768187247),a.setUint32(54,761818227),a.setUint16(74,24),a.setUint16(76,65535),t._box("avc1",[i,t._box("avcC",[new Uint8Array([1,e.config.profileIndication,e.config.profileCompatibility,e.config.levelIndication,255].concat([255&e.config.numOfSPS|224]).concat(r).concat([255&e.config.numOfPPS]).concat(n))]),t._btrt()])},r.prototype._btrt=function(){var e=this,t=new Uint8Array(12),n=new DataView(t.buffer);return n.setUint32(0,1875072),e._box("btrt",[t])},r.prototype._audioSample=function(e){var t=this,n=new Uint8Array(8),r=new DataView(n.buffer);r.setUint16(6,1);var i=new Uint8Array(20);return r=new DataView(i.buffer),r.setUint16(8,e.config.channels),r.setUint16(10,e.config.sampleSize),r.setUint16(16,e.config.samplingFreq),t._box("mp4a",[n,i,t._esds(e)])},r.prototype._esds=function(e){var t=this,n=new Uint8Array(27),r=new DataView(n.buffer);return r.setUint8(0,3),r.setUint8(1,25),r.setUint8(5,4),r.setUint8(6,17),r.setUint8(7,64),r.setUint8(8,21),r.setUint16(10,1536),r.setUint8(20,5),r.setUint8(21,2),r.setUint8(22,e.config.audioObjectTypeIndex<<3|e.config.samplingFreqIndex>>>1),r.setUint8(23,e.config.samplingFreqIndex<<7|e.config.channels<<3),r.setUint8(24,6),r.setUint8(25,1),r.setUint8(26,2),t._fullBox("esds",0,new Uint8Array(3),[n])},r.prototype._stts=function(){var e=this,t=new Uint8Array(4);return e._fullBox("stts",0,new Uint8Array(3),[t])},r.prototype._stsc=function(){var e=this,t=new Uint8Array(4);return e._fullBox("stsc",0,new Uint8Array(3),[t])},r.prototype._stsz=function(){var e=this,t=new Uint8Array(8);return e._fullBox("stsz",0,new Uint8Array(3),[t])},r.prototype._stco=function(){var e=this,t=new Uint8Array(4);return e._fullBox("stco",0,new Uint8Array(3),[t])},r.prototype._mvex=function(e){for(var t=this,n=[],r=0;r<e.length;r++)n.push(t._trex(e[r]));return t._box("mvex",n)},r.prototype._trex=function(e){var t=this,n=new Uint8Array(20),r=new DataView(n.buffer);return r.setUint32(0,e.streamId),r.setUint32(4,1),r.setUint32(16,65537),"video"!==e.type&&(n[n.length-1]=0),t._fullBox("trex",0,new Uint8Array(3),[n])},r.prototype._fullBox=function(e,t,n,r){var i=this,a=new Uint8Array(1);a[0]=t;var o=[a,n];return o=o.concat(r),i._box(e,o)},r.prototype._box=function(e,t){for(var n=0,r=new Uint8Array([e.charCodeAt(0),e.charCodeAt(1),e.charCodeAt(2),e.charCodeAt(3)]),i=0,a=0;a<t.length;a++)i+=t[a].length;var o=new Uint8Array(i+8),s=new DataView(o.buffer,o.byteOffset,o.byteLength);for(s.setUint32(0,o.byteLength),o.set(r,4),n=8,a=0;a<t.length;a++)o.set(t[a],n),n+=t[a].length;return o}},{}],204:[function(e,t,n){"use strict";function r(){var e=this;e._mp4Content=null,e._mp4Box=new i}t.exports=r;var i=e("./mp4-box"),a=.0232199546,o=.0333333333;r.prototype.destroy=function(){var e=this;e._mp4Content=null},r.prototype.generate=function(e){if(!e)return null;var t=this,n=[e],r=null,i=null,a=null,o=0;if(e.config.shouldInit){var s="audio"===e.type?"mp41":"avc1";r=t._generateInitSegment(n,s),o+=r?r.length:0}e.frames.length&&(i=t._generateFragmentMetadata(n),o+=i?i.length:0,a=t._generateFragmentData(n),o+=a?a.length:0),t._mp4Content=new Uint8Array(o);var l=0;return r&&(t._mp4Content.set(r,l),l+=r.length),i&&(t._mp4Content.set(i,l),l+=i.length),a&&(t._mp4Content.set(a,l),l+=a.length),{data:t._mp4Content,type:e.type,codec:e.config.codec,startTime:e.startTime/e.config.timescale,endTime:(e.endTime+e.frames[e.frames.length-1].duration)/e.config.timescale}},r.prototype._generateInitSegment=function(e,t){var n=this;if(!e||!e.length)return null;var r=n._mp4Box.initSegment(e,t);return r?r:null},r.prototype._generateFragmentMetadata=function(e){var t=this,n=0;return e&&e.length?(e.forEach(function(e,t,r){n=e.config.seqNum,e.frames&&e.frames.length&&e.frames.forEach(function(t,n,r){if(t.size=t.nalUnitSize?t.nalUnitSize+4*t.nalUnits.length:t.data?t.data.length:0,n<r.length-1)t.duration=e.frames[n+1].dts-t.dts;else if(n>0)t.duration=t.dts-e.frames[n-1].dts;else{var i="audio"===e.type?a:o;i*=e.config.timescale,t.duration=e.config.defaultFrameDuration||i}t.duration<0})}),t._mp4Box.moof(n,e)):null},r.prototype._generateFragmentData=function(e){var t=this;if(!e||!e.length)return null;var n,r=[],i=0;e.forEach(function(e){"video"===e.type&&e.frames.forEach(function(e){e.normalizedData=new Uint8Array(e.nalUnitSize+4*e.nalUnits.length);var t=new DataView(e.normalizedData.buffer),n=0;e.nalUnits.forEach(function(r){t.setUint32(n,r.data.byteLength),n+=4,e.normalizedData.set(r.data,n),n+=r.data.byteLength}),e.data=e.normalizedData}),n=t._mp4Box.mdat(e),n&&n.length&&(r.push(n),i+=n.length)});var a=new Uint8Array(i),o=0;return r.forEach(function(e,t,n){a.set(e,o),o+=e.length}),a}},{"./mp4-box":203}],205:[function(e,t,n){"use strict";function r(e){e._instances={},e.addEventListener("message",function(t){var n=t.data.messageId,r=t.data.moduleName,i=t.data.instanceId,s=t.data.funcName,l=t.data.funcType||"async",d=t.data.args||[],c=function(t,n){t=t||{},t.instanceId=i,e.postMessage(t,n)};switch(d.push(c),t.data.addContext&&d.push(e),n){case o.CREATE:e._instances[i]=Object.create(a[r].prototype),a[r].apply(e._instances[i],d);break;case o.DESTROY:e._instances.hasOwnProperty(i)&&(e._instances[i].destroy(),delete e._instances[i]);break;case o.CALL_METHOD:if(e._instances.hasOwnProperty(i)){var p=e._instances[i];if(p&&p[s]&&"function"==typeof p[s]){var u=p[s].apply(p,d);(null===u||void 0===u)&&(u={}),("sync"===l||Object.keys(u).length)&&c(u)}}}})}t.exports=r;var i=e("./worker-defs"),a=i.WorkerDefs,o=i.MessageIds},{"./worker-defs":210}],206:[function(e,t,n){"use strict";function r(e){var t=this;if(!e||i.isNullOrUndefined(e.maxRetries)||!e.requestTimeout||i.isNullOrUndefined(e.chunkedRequestTimeout))throw new Error("Invalid Arguments: Loader configs are not complete");o.call(t,"Loader"),t.opts=e,t.window=e.window||window,t.opts.method=e.method||"GET",t.opts.isChunkedLoad=e.isChunkedLoad||!1,t.opts.minChunkSize=i.isNullOrUndefined(e.minChunkSize)?1e5:e.minChunkSize,t.opts.responseType=e.responseType||"text",t._xhr=null,t._maxRetries=e.maxRetries,t._backOffInit=[1e3,1e3,2e3,2e3,3e3,3e3,5e3],t._backOffInterval=5e3,t.fallback=!1,t.fallbackIdx=null,t._retryTimer=new l(1e3,1),t._retryTimer.addEventListener(t.load,t),t.REQUEST_TIMEOUT=1e3*e.requestTimeout,t.CHUNKED_REQUEST_TIMEOUT=1e3*e.chunkedRequestTimeout,t.MIN_TIMEOUT=2e3,t.MAX_TIMEOUT=15e3;var n=t._getTimeOut();t._requestTimer=new l(n,1),t._requestTimer.addEventListener(t._onTimeout,t)}n.Loader=r,n.Events={COMPLETE:"complete",ERROR:"error",PROGRESS:"progress",BYTES_LOADED:"bytesLoaded"};var i=e("../../lib"),a=e("../../lib/hls-utils"),o=e("../../lib/event-bus"),s=e("./../error"),l=e("../../lib/timer"),d={UNSENT:0,OPENED:1,HEADERS_RECEIVED:2,LOADING:3,DONE:4};a.inherits(r,o),r.prototype.load=function(e){var t=this;if("string"==typeof e&&(e={url:e}),t.req=e||t.req,t.opts.fallBackHandler=t.req&&t.req.fallBackHandler||null,!t.req||!t.req.url)return t.publish(n.Events.ERROR,new s.Error(s.ERR_XHR_LOAD));if(t.req.fallback&&t.req.fallback.length>0&&!t.req.fallBackHandler)return t.publish(n.Events.ERROR,new s.Error(s.ERR_XHR_LOAD));t._cancelCurrentRequest();var r=t.opts.isChunkedLoad||!1;t._xhr=new t.window.XMLHttpRequest,t._xhr._offset=0,t._xhr._finished=!1,r?t.window.MSStreamReader?t._initChunkedLoadIe():t._initChunkedLoad():t._initLoad(),t._xhr.open(t.opts.method,t.req.url,!0),r?t.window.MSStreamReader&&(t._xhr.responseType="ms-stream"):t._xhr.responseType=t.opts.responseType,t._requestTimer.reset(),t._requestTimer.start(),t._xhr.send()},r.prototype._initLoad=function(){var e=this;e._xhr.onerror=e._handleError.bind(e),e._xhr.onreadystatechange=function(){return e._xhr&&e._xhr.readyState===d.DONE?e._statusGood(e._xhr.status)?void(e._xhr._finished||(e._xhr._finished=!0,e.publish(n.Events.COMPLETE,{data:e._xhr.response,fallback:e.fallback,fallbackIdx:e.fallbackIdx}),e._requestTimer.stop())):(e._requestTimer.stop(),e._handleError()):void 0}},r.prototype._initChunkedLoad=function(){var e=this;e._xhr.overrideMimeType("text/plain; charset=x-user-defined");var t=function(){if(e._xhr&&!e._xhr._finished&&(e._xhr.readyState===d.DONE||e._xhr.readyState===d.LOADING)){if(!e._statusGood(e._xhr.status))return e._requestTimer.stop(),0===e._xhr._offset?e._handleError():void e._handlePartialLoadError();var t=e._xhr.responseText,r=t.length-e._xhr._offset;if(r>0&&(e._requestTimer.stop(),e.publish(n.Events.BYTES_LOADED,t.length)),r>e.opts.minChunkSize||e._xhr.readyState===d.DONE){for(var i=new Uint8Array(r),a=0;r>a;a++)i[a]=255&t.charCodeAt(a+e._xhr._offset);e._xhr._offset=t.length,e.publish(n.Events.PROGRESS,i,t.length)}e._requestTimer.start(),e._xhr.readyState===d.DONE&&(e._xhr._finished=!0,e.publish(n.Events.COMPLETE),e._requestTimer.stop())}};e._xhr.onreadystatechange=t,e._xhr.onprogress=t},r.prototype._initChunkedLoadIe=function(){var e=this;e._xhr.onreadystatechange=function(){if(e._xhr.readyState===d.LOADING){if(!e._statusGood(e._xhr.status))return e._requestTimer.stop(),e._handleError();var t=e._xhr.response;e._MSStreamReader||(e._MSStreamReader=new e.window.MSStreamReader),e._MSStreamReader.readAsArrayBuffer(t),e._MSStreamReader.onprogress=function(){e._requestTimer.stop();var t=e._MSStreamReader.result,r=new Uint8Array(t.slice(e._xhr._offset,t.byteLength));e._xhr._offset=t.byteLength,e.publish(n.Events.PROGRESS,r,t.byteLength),e._requestTimer.start()},e._MSStreamReader.onload=function(){e._requestTimer.stop(),e.publish(n.Events.COMPLETE)},e._MSStreamReader.onerror=function(){e._requestTimer.stop()}}}},r.prototype._statusGood=function(e){return e>=200&&300>e},r.prototype._onTimeout=function(){var e=this;Date.now()-e._requestTimestamp;return e._requestTimer.stop(),e.opts.isChunkedLoad&&e._xhr._offset>0&&e._xhr.readyState===d.LOADING?void e._handlePartialLoadError():void e._handleError()},r.prototype._handlePartialLoadError=function(){var e=this;e.reset(),e._sendError(s.ERR_PARTIAL_LOAD)},r.prototype._handleError=function(){var e=this;if(e.opts.retries=e.opts.retries||0,e.opts.retries<e._maxRetries){var t=e.opts.retries<e._backOffInit.length?e._backOffInit[e.opts.retries]:e._backOffInit[e._backOffInit.length-1]+e._backOffInterval*(e.opts.retries-e._backOffInit.length+1);e.opts.retries++,e._retryTimer.delay=t,e._retryTimer.reset(),e._retryTimer.start()}else e.req.fallback&&e.req.fallback.length>0?e._fallback():e._sendError(s.ERR_XHR_LOAD)},r.prototype._fallback=function(){var e=this,t=e.opts.fallBackHandler(e.req.fallback);if(t>=0){var n=e.req.fallback.splice(t,1)[0];e.req.url=n.url,e.fallback=!0,e.fallbackIdx=n.index,e.load()}else e._sendError(s.ERR_XHR_LOAD)},r.prototype._sendError=function(e){var t=this;t.publish(n.Events.ERROR,new s.Error(e))},r.prototype._cancelCurrentRequest=function(){var e=this;e._xhr&&e._xhr.readyState!==d.DONE&&e._xhr.readyState!==d.UNSENT&&(e._xhr._finished=!0,e._xhr.abort()),e._retryTimer.stop(),e._requestTimer.stop()},r.prototype._getTimeOut=function(){var e,t=this;return e=!isNaN(t.opts.timeout)&&t.opts.timeout>=t.MIN_TIMEOUT&&t.opts.timeout<=t.MAX_TIMEOUT?t.opts.timeout:t.opts.isChunkedLoad?1e3*t.opts.chunkedRequestTimeout:1e3*t.opts.requestTimeout},r.prototype.reset=function(){var e=this;e._cancelCurrentRequest(),e._xhr=null,e.req=null,e.opts=null,e.fallback=null,e.fallbackIdx=null,e._MSStreamReader&&e._MSStreamReader.abort()},r.prototype.destroy=function(){var e=this;e.reset(),e._retryTimer.destroy(),e._requestTimer.destroy(),o.prototype.destroy.call(e)}},{"../../lib":161,"../../lib/event-bus":159,"../../lib/hls-utils":160,"../../lib/timer":165,"./../error":187}],207:[function(e,t,n){"use strict";function r(){var e=this;e._node=e._context.node,e._model=e._context.model,e._mediaInfo={currentStreamBitrate:0,frameDrop:0,frameRateSum:0,frameRateSampleCount:0,prevFrameDropReference:0,currentKbps:0,deliveryProtocol:e._getDeliveryProtocol(),bufferingCount:0,totalBufferingTime:0},e._segInfoList=[],e._playingSegmentSeqNum=NaN,e._ignoreBuffering=!1,e._buffering=!1,e._eventKeys={},e._timer=new o(1e3),e._timer.addEventListener(e._sendInfoUpdate,e),e.FRAMERATE_SAMPLE_SIZE=4,e._frameRateStats={prevTotalFrames:0,prevTotalDroppedFrames:0,prevFrameRateMeasuredTime:0,frameRateSampleCollector:[],currentFrameRate:0},e._prevAvgBandwidth=NaN,e._registerListeners(),e._playbackPosition=0,e._bufferingTime=0,e._timeUpdateTimestamp=0,e._isFirstSegment=!0}function i(){var e=this;e.seqNum=-1,e.loadState=e.LoadingState.LOAD_NOT_STARTED,e.renderState=e.RenderState.RENDER_NOT_STARTED,e.beginTime=NaN,e.endTime=NaN,e.bitrateIndex=-1,e.switchReason="none",e.bufferCount=0,e.bufferTime=0,e.timeToFirstByte=0,e.timeToDownload=0,e.timeToRequest=0,e.observedBitrate=0,e.frameDrop=0,e.frameRateSum=0,e.frameRateSampleCount=0,e.frameRate=30}t.exports=r;var a=e("./../event").HLSEvent,o=e("../../lib/timer");r.prototype.destroy=function(){var e=this;e._mediaInfo=null,e._segInfoList=null,e._removeListeners(),e._timer.destroy()},r.prototype._registerListeners=function(){var e=this;e._playHandler=e._onPlay.bind(e),e._pauseHandler=e._onPause.bind(e),e._playCompleteHandler=e._onPlayComplete.bind(e),e._node.addEventListener("play",e._playHandler),e._node.addEventListener("pause",e._pauseHandler),e._node.addEventListener("ended",e._playCompleteHandler),e._eventKeys[a.WAITING]=e._context.addEventListener(a.WAITING,e._onWaiting,e)},r.prototype._removeListeners=function(){var e=this;e._node.removeEventListener("play",e._playHandler),e._node.removeEventListener("pause",e._pauseHandler),e._node.removeEventListener("ended",e._playCompleteHandler),e._context.removeEventListeners(e._eventKeys)},r.prototype._onPlay=function(e){var t=this;t._timer.start()},r.prototype._onPause=function(e){var t=this;t._timer.stop()},r.prototype._onPlayComplete=function(e){var t=this;t.segmentRendered(t._playingSegmentSeqNum)},r.prototype.onTimeUpdate=function(e){var t=this,n=t._model.getCurrentPlayingStream();t._playbackPosition=e.currentTarget.currentTime,t.updateRenderState(t._playingSegmentSeqNum,t._playbackPosition),t._model.live&&n&&n.cuepoints.length>0&&t.cuepointEventDispatcher(t._playbackPosition,n.cuepoints)},r.prototype._onWaiting=function(e){var t=this;e.bufferInit||(e.value?t._onBufferingBegin():t._onBufferingEnd(e.waitTime))},r.prototype._sendInfoUpdate=function(){var e=this,t=e._model.streams,n=e._mediaInfo,r=e._model.getCurrentPlayingStream();r&&(n.currentStreamIndex=e._model.currentPlayingStreamIndex,n.currentStreamBitrate=r.bitrate/1e3,n.mediaWidth=r.width,n.mediaHeight=r.height),t.length&&(n.qualityLevels=t.length,n.minBitRate=t[0].bitrate,n.maxBitRate=t[n.qualityLevels-1].bitrate),n.bufferLength=e._model.getBufferLength().toFixed(2),n.currentKbps=(1e3*e.getMetricsBandwidthInfo()).toFixed(0),e._context.sendEvent(a.INFO_UPDATE,{mediaInfo:e._mediaInfo})},r.prototype.segmentLoadBegin=function(e,t){if(t){var n=this,r=new i;r.seqNum=e,r.beginTime=t.beginTime,r.timeToFirstByte=t.timeToFirstByte,r.bitrateIndex=Math.max(0,t.bitrateIndex),r.switchReason=t.switchReason,r.frameRate=t.frameRate,r.observedBitrate=1e3*t.observedBitrate,r.endTime=t.endTime,r.perfInfo={},n._segInfoList.push(r),r.loadState=r.LoadingState.LOAD_BEGIN,isNaN(n._playingSegmentSeqNum)?n.segmentRenderBegin(e):e===n._playingSegmentSeqNum&&(r.renderState=r.RenderState.RENDER_BEGIN)}},r.prototype.segmentLoadEnd=function(e,t){var n=this;if(n._segInfoList.length){var r=n._segInfoList[n._segInfoList.length-1];r&&r.seqNum===e&&(t&&(r.timeToDownload=t.timeToDownload,r.perfInfo=t.perfInfo,r.segmentInWorker=t.segmentInWorker),r.loadState=r.LoadingState.LOAD_END)}},r.prototype.segmentRenderBegin=function(e){var t=this,n=t._getSegmentEntry(e);n&&(n.renderState=n.RenderState.RENDER_BEGIN,t._playingSegmentSeqNum=e,t._model.setCurrentPlayingStream(n.bitrateIndex))},r.prototype.segmentRendered=function(e){var t=this,n=t._getSegmentEntry(e);n&&(n.renderState=n.RenderState.RENDER_END)},r.prototype.updateRenderState=function(e,t){var n=this;if(isNaN(e)||isNaN(t)||0>=t)return e;var r=n._getSegmentEntry(e),i=n._getNextSegment(e);if(!r||!r.isRendering())return e;var o=n._getFpsStats();if(r.frameDrop=o.droppedFrames-n._mediaInfo.prevFrameDropReference,r.frameRateSum+=Number(o.frameRate.toFixed(2)),r.frameRateSampleCount++,n._mediaInfo.frameRate=o.frameRate.toFixed(2),n._mediaInfo.droppedFrames=o.droppedFrames,i&&(t>r.endTime||t>=i.beginTime)){if(n._mediaInfo.prevFrameDropReference=o.droppedFrames,n.segmentRendered(r.seqNum),i.bitrateIndex!==r.bitrateIndex){var s=n._model.streams,l={bitrate:s[i.bitrateIndex].bitrate/1e3,reason:i.switchReason,oldFrameRate:r.frameRate,newFrameRate:i.frameRate};n._context.sendEvent(a.STREAM_SWITCHED,l)}return n.segmentRenderBegin(i.seqNum),i.seqNum}return e},r.prototype._getNextSegment=function(e){var t=this,n=t._getIndex(e)+1;return n<t._segInfoList.length?t._segInfoList[n]:null},r.prototype._onBufferingBegin=function(){var e=this;if(!e._buffering&&(e._buffering=!0,e._segInfoList.length)){var t=e._segInfoList[e._segInfoList.length-1].seqNum;e._playingSegmentSeqNum!==t}},r.prototype._onBufferingEnd=function(e){var t=this;if(t._buffering){t._rebufferingStartTime=NaN,t._buffering=!1,t._mediaInfo.bufferingCount++,t._mediaInfo.totalBufferingTime+=e;var n=t._getSegmentEntry(t._playingSegmentSeqNum),r=n&&!isNaN(e)&&e>0;n&&(n.bufferTime+=r?e:0,n.bufferCount+=r?1:0)}},r.prototype.getMetrics=function(){var e=this;if(!e._segInfoList.length)return null;for(var t=[],n=null,r=0;r<e._segInfoList.length;r++)n=e._segInfoList[r],n&&(n.isRendered()?(t.push(e._dto(n)),e._segInfoList.splice(r,1),r--):n.isRendering()&&(t.push(e._dto(n)),n.bufferCount=0,n.bufferTime=0,n.timeToFirstByte=NaN,n.timeToDownload&&(n.timeToDownload=NaN)));var i=0;for(r=e._segInfoList.length-1;r>=0&&e._segInfoList.length>0;r--)n=e._segInfoList[r],n&&n.isRendering()&&i++,i>1&&(e._segInfoList.splice(r,1),r++,i--);return t},r.prototype._getSegmentEntry=function(e){for(var t=this,n=t._segInfoList.length-1;n>=0;n--){var r=t._segInfoList[n];if(r&&r.seqNum===e)return r}return null},r.prototype.getWindow=function(){return window},r.prototype._getDeliveryProtocol=function(){var e=this,t=e.getWindow();return t&&t.location&&t.location.protocol?t.location.protocol.slice(0,-1):"http"},r.prototype._getIndex=function(e){for(var t=this,n=t._segInfoList.length-1;n>=0;n--){var r=t._segInfoList[n];if(r&&r.seqNum===e)return n}return-1},r.prototype._dto=function(e){var t=this;if(!e)return null;var n=t._model.streams;e.bitrateIndex=n.length>0?Math.min(e.bitrateIndex,n.length-1):0;var r=n[e.bitrateIndex].bitrate/1e3;e.bufferTime>0&&!e.bufferCount?e.bufferCount=1:!e.bufferTime&&e.bufferCount>0&&(e.bufferCount=0);var i={seq_num:e.seqNum,ib:r,ob:e.observedBitrate.toFixed(2),num_buf:e.bufferCount,buf_dur:e.bufferTime,req_t:e.timeToRequest,fb_dl_t:e.timeToFirstByte,req_dl_t:e.timeToDownload,drop_f:e.frameDrop,avg_fr:(e.frameRateSum/e.frameRateSampleCount).toFixed(2),seg_in_wkr:e.segmentInWorker};return e.perfInfo&&Object.keys(e.perfInfo).length&&(i.req_st=e.perfInfo.requestStart?e.perfInfo.requestStart.toFixed(2):0,i.resp_st=e.perfInfo.responseStart?e.perfInfo.responseStart.toFixed(2):0,i.resp_end=e.perfInfo.responseEnd?e.perfInfo.responseEnd.toFixed(2):0,i.sec_conn_st=e.perfInfo.secureConnectionStart?e.perfInfo.secureConnectionStart.toFixed(2):0,i.fetch_st=e.perfInfo.fetchStart?e.perfInfo.fetchStart.toFixed(2):0,t._isFirstSegment&&(t._isFirstSegment=!1,i.conn_st=e.perfInfo.connectStart?e.perfInfo.connectStart.toFixed(2):0,i.dmn_look_st=e.perfInfo.domainLookupStart?e.perfInfo.domainLookupStart.toFixed(2):0)),i},r.prototype._getFpsStats=function(){var e,t,n,r=this,i=r._node,a=0,o=i.currentTime-r._frameRateStats.prevFrameRateMeasuredTime,s=r._fpsBrowserSupport();return s.isWebKitFpsAvailable||s.isNonWebKitFpsAvailable?(e=s.isWebKitFpsAvailable?i:i.getVideoPlaybackQuality(),t=s.isWebKitFpsAvailable?e.webkitDecodedFrameCount:e.totalVideoFrames,n=s.isWebKitFpsAvailable?e.webkitDroppedFrameCount:e.droppedVideoFrames,a=r._frameRateStats.prevFrameRateMeasuredTime>0&&0!==o?(t-r._frameRateStats.prevTotalFrames-(n-r._frameRateStats.prevTotalDroppedFrames))/o:r._frameRateStats.currentFrameRate,a&&r._frameRateStats.frameRateSampleCollector.push(a),r._calculateCurrentFrameRate(),r._frameRateStats.prevTotalFrames=t,r._frameRateStats.prevTotalDroppedFrames=n,r._frameRateStats.prevFrameRateMeasuredTime=i.currentTime,{frameRate:r._frameRateStats.currentFrameRate,droppedFrames:n}):{frameRate:0,droppedFrames:0}},r.prototype._fpsBrowserSupport=function(){var e=this,t=e._node;return{isWebKitFpsAvailable:"undefined"!=typeof t.webkitDecodedFrameCount,isNonWebKitFpsAvailable:"function"==typeof t.getVideoPlaybackQuality}},r.prototype._calculateCurrentFrameRate=function(){var e=this;e._frameRateStats.frameRateSampleCollector.length>=e.FRAMERATE_SAMPLE_SIZE&&(e._frameRateStats.currentFrameRate=e._frameRateStats.frameRateSampleCollector.reduce(function(e,t){return e+t})/e._frameRateStats.frameRateSampleCollector.length,e._frameRateStats.frameRateSampleCollector.splice(0,e._frameRateStats.frameRateSampleCollector.length))},r.prototype.getMetricsBandwidthInfo=function(){var e=this,t=e._context.services.bandwidthEstimator,n=t.averageBandwidth===e._prevAvgBandwidth?0:t.averageBandwidth;return e._prevAvgBandwidth!==t.averageBandwidth&&(e._prevAvgBandwidth=t.averageBandwidth),n},r.prototype.cuepointEventDispatcher=function(e,t){var n,r=this,i=t.length,o=i-1;if(i>0){if(r.shouldFireCueDetectedEvent(e,t[o]))return t[o].setCueOutDetectedState(!0),n={cuepointDuration:t[o].cuepointDuration,timeGapBeforeCUEOUT:t[o].startTime-e},void r._context.sendEvent(a.CUEPOINT_DETECTED,n);if(r.shouldFireCueOutEvent(e,t[o]))return t[o].setCueOutFiredState(!0),n={cuepointDuration:t[o].cuepointDuration,cuepointPlayedTime:e-t[o].startTime},void r._context.sendEvent(a.CUEPOINT_STARTED,n)}},r.prototype.shouldFireCueDetectedEvent=function(e,t){return t.startTime&&!t.isCueOutDetectedFired&&t.startTime>e?!0:!1},r.prototype.shouldFireCueOutEvent=function(e,t){var n=this;if(!t.startTime)return!1;var r=n._getCurrentPlayingSeqNum(e);return!t.isCueOutFired&&r===t.startSeqNum&&e>t.startTime?!0:!1},r.prototype._getCurrentPlayingSeqNum=function(e){var t=this,n=t._model.getCurrentPlayingStream(),r=n?n.segments:null;if(r){if(1===r.length)return r[0].seqNum;for(var i=r.length-1;i>=0;i--)if(e>=r[i].startTime)return r[i].seqNum}return null},i.prototype.RenderState={RENDER_NOT_STARTED:"renderNone",RENDER_BEGIN:"renderBegin",RENDER_END:"renderEnd"},i.prototype.LoadingState={LOAD_NOT_STARTED:"loadNone",LOAD_BEGIN:"loadBegin",LOAD_END:"loadEnd"},i.prototype.isRendering=function(){return this.renderState===this.RenderState.RENDER_BEGIN},i.prototype.isRendered=function(){return this.renderState===this.RenderState.RENDER_END}},{"../../lib/timer":165,"./../event":188}],208:[function(e,t,n){"use strict";function r(){var e=this;e._cuepointList=[],e.ERRORS={INVALID_M3U8:1,EMPTY_DATA:2,NO_SEGMENTS:3}}t.exports=r;var i=e("./../model/model").MetadataTypes,a="#EXTM3U",o="#EXT-X-STREAM-INF:",s="#EXT-X-MEDIA:TYPE=SUBTITLES,",l="#EXTINF:",d="#EXT-X-MEDIA-SEQUENCE:",c="#EXT-X-DISCONTINUITY-SEQUENCE:",p="#EXT-X-DISCONTINUITY",u="#EXT-X-TARGETDURATION:",_="#EXT-X-PROGRAM-DATE-TIME:",m="#EXT-X-ENDLIST",v="#EXT-X-CUE-OUT:";r.prototype.parse=function(e){if(!e)return null;var t=this;return e.type===i.STRUCTURED?t._parseStructuredMetadata(e):t._parseRawMetadata(e)},r.prototype._parseRawMetadata=function(e){var t=this,n={},r=e.rawData;if(""===r||!r)return n.error=t.ERRORS.EMPTY_DATA,n;var i=r.split("\n");return 0!==i[0].indexOf(a)?(n.error=t.ERRORS.INVALID_M3U8,n):r.indexOf(l)>0?t._parseMediaPlaylist(i,e):r.indexOf(o)>0?t._parseMasterPlaylist(i,e.url):(n.error=t.ERRORS.INVALID_M3U8,n)},r.prototype._parseStructuredMetadata=function(e){var t=this,n={};if(n.streamInfoList=t.parseStreamInfo(e.streams),e.hasStreamMetadata&&n.streamInfoList.forEach(function(e){e.segmentInfoList=t.parseSegmentInfo(e.hlsInfo,e.index),e.duration=0,e.segmentInfoList.forEach(function(t){e.duration+=t.duration}),e.hasEndList=!0,e.targetDuration=e.hlsInfo.segment_duration}),n.subtitleStreamInfoList=[],e.subtitleStreams&&e.subtitleStreams.length){var r=e.subtitleStreams[0].manifestContent;if(0===r.indexOf(s)){var i=t._extractSubtitles(r,e.subtitleStreams[0].host);i&&n.subtitleStreamInfoList.push(i)}}return n},r.prototype._parseMasterPlaylist=function(e,t){for(var n=this,r={streamInfoList:[],subtitleStreamInfoList:[]},i=0;i<e.length;i++){var a=e[i].trim(),l=[];if(0===a.indexOf(o)){l=a.substr(o.length).split(",");var d=n._parseStreamAttributes(l,a);do i++,a=e[i];while(a.match(/^\s*$/));d.url=n._extractURL(a,t),r.streamInfoList.push(d)}else if(0===a.indexOf(s)){var c=n._extractSubtitles(a,t);c&&r.subtitleStreamInfoList.push(c)}}return r},r.prototype._parseMediaPlaylist=function(e,t){
var n=this,r={},a={},o=[],s=[],y=t.url,f=t.index,g={streamInfoList:[],subtitleStreamInfoList:[]};a.discontinuityCounter=0,a.sequenceNum=0,a.startTime=0,a.programDateTime=0,a.brStartOffset=-1,a.brEndOffset=-1,a.levelIndex=f,r.discontinuitySeqNum=0,r.index=f,r.targetDuration=0,r.hasEndList=!1,r.url=y,r.duration=0;for(var b=0;b<e.length;b++){var h=e[b].trim();if(!h.match(/^\s*$/)){if(0===h.indexOf(d)&&(r.seqNum=parseInt(h.substr(d.length)),a.sequenceNum=r.seqNum),0===h.indexOf(c))r.discontinuitySeqNum=parseInt(h.substr(c.length));else if(0===h.indexOf(p))a.discontinuityCounter++;else if(0===h.indexOf(u))r.targetDuration=parseFloat(h.substr(u.length));else if(0===h.indexOf(_))a.programDateTime=n._parseProgramDateTime(h);else if(0===h.indexOf(l)){var E=h.indexOf(",");a.duration=-1===E?parseFloat(h.substr(l.length)):parseFloat(h.substr(l.length,E-l.length)),r.duration+=a.duration;do b++,h=e[b].trim();while(h.match(/^\s*$/));a.url=n._extractURL(h,y),o.push(n._copySegmentInfo(a)),a.startTime+=a.duration,a.sequenceNum++,a.programDateTime=0,a.brStartOffset=-1}else 0===h.indexOf(m)&&(r.hasEndList=!0);if(h.indexOf(v)>=0){var T=n._createCueOutSegment(a.sequenceNum,h);s.push(T)}}}return o.length&&(r.segmentInfoList=o),s.length&&(r.cuepointList=s),t.type===i.RAW?g.streamInfoList.push(r):t.type===i.RAW_SUBTITLE&&g.subtitleStreamInfoList.push(r),g},r.prototype._parseStreamAttributes=function(e,t){if(!e||!e.length)return null;for(var n={},r=0;r<e.length;r++){var i=e[r];if(i.indexOf("BANDWIDTH")>-1)n.bitrate=1*i.split("=")[1];else if(i.indexOf("RESOLUTION")>-1){var a=i.split("=")[1],o=a.split("x");n.width=parseInt(o[0]),n.height=parseInt(o[1])}else i.indexOf("CODECS")>-1&&-1===t.indexOf("avc1")?n.audio=!0:i.indexOf("AUDIO")>-1?(n.audioStreamId=i.split("=")[1],n.audioStreamId=n.audioStreamId.replace(/"/g,"")):i.indexOf("SUBTITLES")>-1&&(n.subtitlesGroupId=i.split("=")[1],n.subtitlesGroupId=n.subtitlesGroupId.replace(/"/g,""))}return n},r.prototype._extractURL=function(e,t){var n=null,r=null;return"http://"===e.substr(0,7)||"https://"===e.substr(0,8)?e:(t.indexOf("?")>-1&&(t=t.substr(0,t.indexOf("?"))),"/"===e.substr(0,1)?(n=t.substr(0,t.indexOf("//")+2),r=t.substr(t.indexOf("//")+2),n+r.substr(0,r.indexOf("/"))+e):t.substr(0,t.lastIndexOf("/")+1)+e)},r.prototype._extractSubtitles=function(e,t){var n=this;e=e.replace(/"/g,"");var r=e.substr(s.length).split(",");return n._parseSubtitleAttributes(r,e,t)},r.prototype._parseSubtitleAttributes=function(e,t,n){var r=this,i={};return e&&e.length&&e.forEach(function(e){e.indexOf("GROUP-ID")>-1?i.groupId=e.split("=")[1]:e.indexOf("LANGUAGE")>-1?i.language=e.split("=")[1]:e.indexOf("NAME")>-1?i.name=e.split("=")[1]:e.indexOf("AUTOSELECT")>-1?i.autoSelect="YES"===e.split("=")[1]:e.indexOf("DEFAULT")>-1?i.defaultValue="YES"===e.split("=")[1]:e.indexOf("URI")>-1?i.url=r._extractURL(e.substr(4),n):e.indexOf("FORCED")>-1&&(i.forced="YES"===e.split("=")[1])}),i},r.prototype._copyVTTInfo=function(e){var t={};return t.discontinuityCounter=e.discontinuityCounter,t.sequenceNum=e.sequenceNum,t.startTime=e.startTime,t.programDateTime=e.programDateTime,t.url=e.url,t.duration=e.duration,t},r.prototype._parseProgramDateTime=function(e){if(!e)return 0;var t,n,r=e.substr(_.length),i=r.split("T"),a=i[0].split("-"),o=parseInt(a[0]),s=parseInt(a[1]),l=parseInt(a[2]),d=i[1],c=0;if(d.indexOf("Z")>=0)t=d.substr(0,d.indexOf("Z")).split(":");else if(d.indexOf("+")>=0){var p=d.split("+");t=p[0].split(":"),n=p[1].split(":"),c=-1}else if(d.indexOf("-")>=0){var u=d.split("-");t=u[0].split(":"),n=u[1].split(":"),c=1}var m=0,v=0,y=0;if(t&&(m=parseInt(t[0]),v=parseInt(t[1]),y=parseFloat(t[2])),n){var f=parseInt(n[0]),g=parseInt(n[1]);m=(24+m+c*f)%24,v+=c*g,v>=60?(m++,v-=60):0>v&&(m--,v+=60)}return new Date(o,s,l,m,v,y).getTime()},r.prototype._copySegmentInfo=function(e){var t={};return t.discontinuityCounter=e.discontinuityCounter,t.sequenceNum=e.sequenceNum,t.startTime=e.startTime,t.programDateTime=e.programDateTime,t.brStartOffset=e.brStartOffset,t.brEndOffset=e.brEndOffset,t.levelIndex=e.levelIndex,t.url=e.url,t.duration=e.duration,t},r.prototype.parseStreamInfo=function(e){if(!e)return null;var t=[];return e.forEach(function(e,n){var r=e.host;e.path&&""!==e.path?r+=e.path:e.url&&(r=e.url);var i={bitrate:1e3*e.bitrate,channels:e.channels,height:e.height,width:e.width,url:r,index:n,hlsInfo:e.hls_info};if(e.manifestContent&&e.manifestContent.indexOf("SUBTITLES")>-1){var a=e.manifestContent.split('SUBTITLES="')[1];i.subtitlesGroupId=a.substr(0,a.indexOf('"'))}t.push(i)}),t},r.prototype.parseSegmentInfo=function(e,t){var n=this;if(!e)return null;var r=[],i={};i.brStartOffset=-1,i.brEndOffset=-1,i.programDateTime=0,i.discontinuityCounter=0,i.sequenceNum=e.start_index,i.startTime=0;for(var a=0;a<e.segments_count;a++)i.url=e.ts_url+"&num="+i.sequenceNum.toString(),i.levelIndex=t,i.duration=e.segment_duration,a===e.segments_count-1&&(i.duration=e.last_segment_duration),r.push(n._copySegmentInfo(i)),i.sequenceNum++,i.startTime+=i.duration;return r},r.prototype._cueoutTimeParser=function(e){var t=e.split(":"),n=0;return t.length>1&&(n=1e3*parseFloat(t[1])),n},r.prototype._createCueOutSegment=function(e,t){var n=this,r=e;if(!(0>r)){var i=n._cueoutTimeParser(t),a={};return a.startSeqNum=r,a.startTime=NaN,a.cuepointDuration=i,a}}},{"./../model/model":198}],209:[function(e,t,n){"use strict";function r(){var e=this;e._model=e._context.model,e._node=e._context.node,e._workerMap={},Object.keys(c.WorkerDefs).forEach(function(t){e.getWorker(t)}),e.bandwidthEstimator=new a,e.metrics=e._context.create(o),e.metadataParser=e._context.create(i)}t.exports=r;var i=e("./playlist-parser"),a=e("./../abr/bandwidth-estimator"),o=e("./metrics"),s=e("./loader").Loader,l=e("./hls-worker"),d=e("webworkify"),c=e("./worker-defs");r.prototype.destroy=function(){var e=this;e.bandwidthEstimator.destroy(),e.metrics.destroy(),Object.keys(e._workerMap).forEach(function(t){e._workerMap[t].terminate()})},r.prototype.getNewLoader=function(e){var t=this,n=t._model.config,r=e||{};r.maxRetries=n.maxRetries,r.requestTimeout=n.requestTimeout,r.chunkedRequestTimeout=n.chunkedRequestTimeout;var i=null;try{i=new s(r)}catch(a){i=null}return i},r.prototype.getWorker=function(e){var t=this;if(!e)return null;var n=t._model.config;if(n.useWorker&&"undefined"!=typeof Worker)try{return t._workerMap[e]||(t._workerMap[e]=d(l)),t._workerMap[e]}catch(r){}return null}},{"./../abr/bandwidth-estimator":169,"./hls-worker":205,"./loader":206,"./metrics":207,"./playlist-parser":208,"./worker-defs":210,webworkify:214}],210:[function(e,t,n){"use strict";t.exports.WorkerDefs={HlsTransformer:e("../helper/hls-transformer")},t.exports.MessageIds={CREATE:"create",DESTROY:"destroy",CALL_METHOD:"callMethod"}},{"../helper/hls-transformer":191}],211:[function(e,t,n){"use strict";function r(e){var t=this;t._frames=[],t._demuxConfig=e||{},t._config={},t.ready=!1}function i(e){var t=this;t._frames=[],t._demuxConfig=e||{},t._config={},t._keyFrameIndex=0,t.ready=!1,t._keyFrameCount=0}t.exports.AACStream=r,t.exports.AVCStream=i;var a=[96e3,88200,64e3,48e3,44100,32e3,24e3,22050,16e3,12e3,11025,8e3,7350],o=["Null","Main","LC","SSR","LTP"],s="mp4a.40.2",l=66,d=0,c=10,p=9e4,u={NON_IDR:1,IDR:5,SPS:7,PPS:8};r.prototype.destroy=function(){var e=this;e._frames=[]},r.prototype.readFrames=function(e){var t=this;if(e&&e.packetInfo){var n=e.packetInfo.streamData;if(n&&!(n.length<6))for(var r=0,i=0,a=0;r<n.length;){var o=0,l=(n[r++]<<8)+n[r++],d=6&l,c=1&l;if(65520===(65520&l)&&0===d){t._parseConfig(n.subarray(r,r+2)),t._config.codec=s,r++;var u=(n[r++]<<16)+(n[r++]<<8)+n[r++];for(u=(262112&u)>>>5,i=(3&n[r++])+1,c?u-=7:(u-=9,r+=2);i>o&&r<n.length;){var _=e.packetInfo.pts+1024*a*p/t._config.samplingFreq;t._frames.push({data:n.subarray(r,r+u),dts:_,pts:_,keyframe:!1,flags:{isLeading:!1,dependsOn:!0,isDependedOn:!1,hasRedundancy:!1,paddingValue:!1,isNonSyncSample:!1,degradationPriority:1}}),t.ready=!0,r+=u,o++,a++}}else r--}}},r.prototype._parseConfig=function(e){var t=this;if(e&&!(e.length<2)){var n=((192&e[0])>>>6)+1;n=n>4?4:n,t._config.audioObjectTypeIndex=n,t._config.audioObjectType=o[n],n=(60&e[0])>>>2,n=13>n?n:0,t._config.samplingFreqIndex=n,t._config.samplingFreq=a[n],t._config.channels=(1&e[0])<<2|(192&e[1])>>>6,t._config.sampleSize=16}},r.prototype.getFrames=function(){var e=this;return e.ready=!1,e._frames.splice(0,e._frames.length)},r.prototype.getConfig=function(){var e=this;return e._config},i.prototype.destroy=function(){var e=this;e._frames=[]},i.prototype.readFrames=function(e){var t=this;if(e&&e.packetInfo){var n=e.packetInfo.streamData;if(n&&!(n.length<4)){for(var r,i,a,o=0,s=0,l=0,d=o,c={nalUnits:[],nalUnitSize:0,dts:e.packetInfo.dts,pts:e.packetInfo.pts,keyframe:!1,data:n,flags:{isLeading:0,dependsOn:0,isDependedOn:0,hasRedundancy:0,paddingValue:0,isNonSyncSample:!1,degradationPriority:0}},p=4294967295;o<n.length;){var _=n[o++];if(i=NaN,p=p<<8|_,1===p&&(i=4),a=16777215&p,1===a){if(p=4294967295,i=i||3,s=c.nalUnits.length,s>=1)switch(l=o-d-i,r=n.subarray(d,d+l),c.nalUnitSize+=l,c.nalUnits[s-1].data=r,c.nalUnits[s-1].type){case u.SPS:t._config.profileIndication=r[1],t._config.profileCompatibility=r[2],t._config.levelIndication=r[3],t._config.numOfSPS=1,t._config.spsLength=r.length,t._config.sps=r;break;case u.PPS:t._config.numOfPPS=1,t._config.ppsLength=r.length,t._config.pps=r}d=o,l=0;var m=31&n[o++];c.nalUnits.push({data:null,type:m}),m===u.IDR?(t._keyFrameIndex=t._frames.length,c.keyframe=!0,c.flags.dependsOn=2,t._keyFrameCount++):m===u.NON_IDR&&(c.keyframe=!1,c.flags.dependsOn=1,c.flags.isNonSyncSample=!0)}}s=c.nalUnits.length,s>=1&&null===c.nalUnits[s-1].data&&(l=o-d,c.nalUnits[s-1].data=n.subarray(d,d+l),c.nalUnitSize+=l),t._config.codec=t._getVideoCodecType(t._config),c.nalUnitSize>0&&t._frames.push(c),t._demuxConfig.startChunkWithKeyFrame?t.ready=t._keyFrameCount>=2:t.ready=!0}}},i.prototype.getFrames=function(e){var t=this,n=t._demuxConfig.startChunkWithKeyFrame&&e&&e.keyFrameBoundary,r=t._frames.length;n&&(r=t._keyFrameIndex,t._keyFrameCount=1,t.ready=!1);var i=t._frames.splice(0,r);return t._keyFrameIndex=0,i},i.prototype.getConfig=function(){var e=this;return e._config},i.prototype._getVideoCodecType=function(e){var t=e&&e.profileIndication||l;t=Math.max(t,l);var n=e&&e.profileCompatibility||d,r=e&&e.levelIndication||c;return"avc1."+(t<<16|n<<8|r).toString(16)}},{}],212:[function(e,t,n){"use strict";function r(e,t,n){var r=this;r.streamType=e,r.streamId=t,r._packetList=[],r._endOfSegment=!1,r._demuxConfig=n,"audio"===e?r._stream=new s(r._demuxConfig):"video"===e&&(r._stream=new l(r._demuxConfig))}function i(e){var t=this;t._data=new o(Uint8Array,e),t.complete=!1}t.exports=r;var a=e("./av-stream"),o=e("../../lib/data-manager"),s=a.AACStream,l=a.AVCStream;r.prototype.destroy=function(){var e=this;e._packetList=[],e._stream&&(e._stream.destroy(),e._stream=null)},r.prototype.isReady=function(){var e=this,t=e._stream?e._stream.ready:!1;return e._endOfSegment||t},r.prototype.addPacket=function(e){var t=this,n=t._packetList.length;n&&t._parsePacket(),t._packetList.push(new i(e))},r.prototype.append=function(e){var t=this,n=t._packetList.length;e&&n&&t._packetList[n-1].append(e)},r.prototype.endOfSegment=function(){var e=this;e._endOfSegment=!0,e._parsePacket()},r.prototype.getFrames=function(e){var t=this;return t._stream?t._stream.getFrames(e):null},r.prototype.getConfig=function(){var e=this;return e._stream?e._stream.getConfig():null},r.prototype._parsePacket=function(){var e=this,t=e._packetList.length;if(t){var n=e._packetList[t-1];n.complete=!0,0===n.parse()&&e._stream&&(e._stream.readFrames(n),e._packetList.pop())}},i.prototype.append=function(e){var t=this;t._data&&t._data.set(e)},i.prototype.parse=function(){var e=this;if(e.packetInfo={},!e.complete||!e._data||!e._data.length)return e.packetInfo.result=-1,-1;if(e._data.length<6)return e.packetInfo.result=-2,-2;var t=0,n=(e._data.get(t++)<<16)+(e._data.get(t++)<<8)+e._data.get(t++);if(1!==n)return e.packetInfo.result=-3,-3;e.packetInfo.streamId=e._data.get(t++),t+=2,t++;var r=(192&e._data.get(t++))>>6,i=e._data.get(t++);return(2===r||3===r)&&(e.packetInfo.pts=e._parseTimestamp(e._data.subArray(t,t+5)),e.packetInfo.dts=e.packetInfo.pts,t+=5,i-=5,3===r&&(e.packetInfo.dts=e._parseTimestamp(e._data.subArray(t,t+5)),t+=5,i-=5)),t+=i,e.packetInfo.streamData=e._data.subArray(t),e.packetInfo.result=0,0},i.prototype._parseTimestamp=function(e){if(!e||!e.length)return 0;var t=0,n=(14&e[t++])>>>1,r=(e[t++]<<8)+(254&e[t++])>>>1,i=(e[t++]<<8)+e[t++]>>>1,a=(4&n)>>2;n&=3;var o=n<<29;r<<=15;var s=2*o+r+i,l=a?-1*Math.pow(2,32)+s:s;return l}},{"../../lib/data-manager":158,"./av-stream":211}],213:[function(e,t,n){"use strict";function r(e,t){var n=this;n._data=null,n._demuxConfig=e||{},n._dataListener=t,n._pcrPID=0,n._programMapPID=NaN,n._streamIds={},n._pesStreams={},n._packetsBeforePMT=[],n._state="initial",n._position="start",n._enableTimer=s.isNullOrUndefined(n._demuxConfig.useTimer)?!0:n._demuxConfig.useTimer,n._enableTimer&&(n._parseTimer=new i(100),n._parseTimer.addEventListener(n._parse,n),n._parseTimer.start()),n._endOfSegment=!1}t.exports=r;var i=e("../../lib/timer"),a=e("./pes"),o=e("./../error"),s=e("./../../lib"),l=188,d=71,c=500,p=0;r.prototype.destroy=function(){var e=this;e._data=null,e._packetsBeforePMT=[],e._state="initial",e._position="start";var t=e._pesStreams;for(var n in t)t.hasOwnProperty(n)&&t[n].destroy();e._pesStreams={},e._parseTimer&&e._parseTimer.destroy()},r.prototype.append=function(e){var t=this;if(e){var n=e.length;if(n){var r=null,i=0;t._data&&(r=t._data,i=r.length);var a=i+n;return t._data=new Uint8Array(a),r&&t._data.set(r),t._data.set(e,i),-2===t._parse()?{error:o.ERR_SEGMENT_PARSE}:void 0}}},r.prototype.endOfSegment=function(){var e=this;e._endOfSegment=!0,0===e._data.length&&e._handleEndOfSegment()},r.prototype._parse=function(){var e=this;if(!e._data)return-1;for(var t=0;e._data.length;){var n=e._parsePacket(e._data.subarray(0,l));if(0!==n){if(-2===n)return-2;break}if(t++,e._data=e._data.subarray(l),t>=c){if(e._enableTimer)break;e._sendDemuxedData(),t=0}}return e._endOfSegment&&0===e._data.length?e._handleEndOfSegment():e._sendDemuxedData(),0},r.prototype._parsePacket=function(e){var t=this;if(!e||e.length<l)return-1;var n=0,r={};if(e[n++]!==d)return-2;var i=e[n++];if(r.startIndicator=(64&i)>>6,r.pid=((31&i)<<8)+e[n++],i=e[n++],r.adaptationFieldExists=(32&i)>>5,r.payloadExists=(16&i)>>4,r.adaptationFieldLength=0,r.adaptationFieldExists){r.adaptationFieldLength=e[n++];var a=e[n++];16&a&&r.pid===t._pcrPID&&r.adaptationFieldLength>=7&&t._readPCR(e.subarray(n,n+6)),n+=r.adaptationFieldLength-1}return!r.payloadExists||r.adaptationFieldLength>=183?0:("pmtParsed"!==t._state&&r.pid!==p&&r.pid!==t._programMapPID&&t._packetsBeforePMT.push(e),t._parsePayload(e.subarray(n),r),0)},r.prototype._readPCR=function(e){var t=this;if(e&&!(e.length<6)){var n=0,r=e[n++],i=(128&r)>>>7;r&=127,r=(r<<24)+(e[n++]<<16)+(e[n++]<<8)+e[n++];var a=e[n++];n++;var o=(128&a)>>>7,s=2*r+o,l=i?-1*Math.pow(2,32)+s:s;t._firstPcr||(t._firstPcr=l)}},r.prototype._parsePayload=function(e,t){var n=this;if(e&&t&&!isNaN(t.pid)){var r,i;switch(n._streamIds.aac&&(r=n._streamIds.aac),n._streamIds.avc&&(i=n._streamIds.avc),t.pid){case p:n._parsePAT(e,t);break;case n._programMapPID:n._parsePMT(e,t);break;case r:n._parseMediaData("audio",e,t);break;case i:n._parseMediaData("video",e,t)}}},r.prototype._parsePAT=function(e,t){var n=this;if(e){var r=0;if(t.startIndicator){var i=e[r++];r+=i}r+=5,r+=3;var a=(e[r++]<<8)+e[r++];a>0&&(n._programMapPID=((31&e[r++])<<8)+e[r++]),n._state="patParsed"}},r.prototype._parsePMT=function(e,t){var n=this;if(e){var r=0;if(t&&t.startIndicator){var i=e[r++];r+=i}r++;var a=((15&e[r++])<<8)+e[r++],o=r;r+=2,r+=3,n._pcrPID=((31&e[r++])<<8)+e[r++];var s=((15&e[r++])<<8)+e[r++];r+=s;for(var l=null,d=null,c=0;a-4>r-o;)switch(l=e[r++],d=((31&e[r++])<<8)+e[r++],c=((15&e[r++])<<8)+e[r++],r+=c,l){case 3:case 4:n._streamIds.mp3=d;break;case 15:n._streamIds.aac=d;break;case 27:n._streamIds.avc=d}for(n._state="pmtParsed";n._packetsBeforePMT.length;)n._parsePacket(n._packetsBeforePMT.shift())}},r.prototype._parseMediaData=function(e,t,n){var r=this;if(t){var i=r._pesStreams,o="audio"===e?r._streamIds.aac:r._streamIds.avc,s=i[o];n.startIndicator?(s||(i[o]=new a(e,o,r._demuxConfig),s=i[o]),s.addPacket(t)):s&&s.append(t)}},r.prototype._isReady=function(){var e=this,t=!0;for(var n in e._streamIds)if(e._streamIds.hasOwnProperty(n)){var r=e._streamIds[n];t=t&&e._pesStreams[r]&&e._pesStreams[r].isReady()}return t},r.prototype._sendDemuxedData=function(){var e=this;if(e._isReady()){var t={},n=!1,r=!1,i=e._pesStreams,a=Number.POSITIVE_INFINITY;for(var o in i)if(i.hasOwnProperty(o)){var s=i[o];if(s){var l={frames:s.getFrames({keyFrameBoundary:"end"!==e._position}),config:s.getConfig(),streamId:s.streamId};"audio"===s.streamType&&o===e._streamIds.aac.toString()?(t.audio=l,n=t.audio.frames&&t.audio.frames.length):"video"===s.streamType&&o===e._streamIds.avc.toString()&&(t.video=l,r=t.video.frames&&t.video.frames.length)}}n&&(a=Math.min(a,t.audio.frames[0].dts)),r&&(a=Math.min(a,t.video.frames[0].dts)),t.pcr=e._firstPcr,a!==Number.POSITIVE_INFINITY&&(t.pcr=a),("end"===e._position||n||r)&&(e._dataListener&&e._dataListener({pos:e._position,avData:t}),"start"===e._position&&(e._position="middle"))}},r.prototype._handleEndOfSegment=function(){var e=this;e._position="end";var t=e._pesStreams;for(var n in t)t.hasOwnProperty(n)&&t[n].endOfSegment();e._sendDemuxedData()}},{"../../lib/timer":165,"./../../lib":161,"./../error":187,"./pes":212}],214:[function(e,t,n){var r=arguments[3],i=arguments[4],a=arguments[5],o=JSON.stringify;t.exports=function(e){for(var t,n=Object.keys(a),s=0,l=n.length;l>s;s++){var d=n[s];if(a[d].exports===e){t=d;break}}if(!t){t=Math.floor(Math.pow(16,8)*Math.random()).toString(16);for(var c={},s=0,l=n.length;l>s;s++){var d=n[s];c[d]=d}i[t]=[Function(["require","module","exports"],"("+e+")(self)"),c]}var p=Math.floor(Math.pow(16,8)*Math.random()).toString(16),u={};u[t]=t,i[p]=[Function(["require"],"require("+o(t)+")(self)"),u];var _="("+r+")({"+Object.keys(i).map(function(e){return o(e)+":["+i[e][0]+","+o(i[e][1])+"]"}).join(",")+"},{},["+o(p)+"])",m=window.URL||window.webkitURL||window.mozURL||window.msURL;return new Worker(m.createObjectURL(new Blob([_],{type:"text/javascript"})))}},{}],215:[function(e,t,n){function r(e,t){function n(){4===c.readyState&&r()}function r(){var e=null,n=c.statusCode=c.status,r=c.body=c.response||c.responseText||c.responseXML;if(1223===n&&(n=204),0===n||n>=400&&600>n){var i=c.responseText||s[String(c.status).charAt(0)];e=new Error(i),e.statusCode=c.status}if(f)try{r=c.body=JSON.parse(r)}catch(a){}t(e,c,r)}function a(e){t(e,c)}"string"==typeof e&&(e={uri:e}),e=e||{},t=o(t);var c=e.xhr||null;!c&&e.cors?c=new d:c||(c=new l);var p,u=c.url=e.uri||e.url,_=c.method=e.method||"GET",m=e.body||e.data,v=c.headers=e.headers||{},y=!!e.sync,f=!1;if("json"in e&&(f=!0,v.Accept="application/json","GET"!==_&&"HEAD"!==_&&(v["Content-Type"]="application/json",m=JSON.stringify(e.json))),c.onreadystatechange=n,c.onload=r,c.onerror=a,c.onprogress=function(){},c.ontimeout=i,c.open(_,u,!y),e.cors&&(c.withCredentials=!0),y||(c.timeout="timeout"in e?e.timeout:5e3),c.setRequestHeader)for(p in v)v.hasOwnProperty(p)&&c.setRequestHeader(p,v[p]);return"responseType"in e&&(c.responseType=e.responseType),c.send(m),c}function i(){}var a=e("global/window"),o=e("once"),s={0:"Internal XMLHttpRequest Error",4:"4xx Client Error",5:"5xx Server Error"},l=a.XMLHttpRequest||i,d="withCredentials"in new l?a.XMLHttpRequest:a.XDomainRequest;t.exports=r},{"global/window":216,once:217}],216:[function(e,t,n){(function(e){"undefined"!=typeof window?t.exports=window:"undefined"!=typeof e?t.exports=e:t.exports={}}).call(this,"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],217:[function(e,t,n){function r(e){var t=!1;return function(){return t?void 0:(t=!0,e.apply(this,arguments))}}t.exports=r,r.proto=r(function(){Object.defineProperty(Function.prototype,"once",{value:function(){return r(this)},configurable:!0})})},{}]},{},[25]);
