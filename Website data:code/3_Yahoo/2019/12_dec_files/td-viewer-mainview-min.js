YUI.add("td-viewer-mainview",function(e,t){"use strict";var i,a=e.config.win,n=e.config.doc,o=e.one("body"),l=1,s=650,d=350,r="display-discussion-applet-offnet",c=100,u="js-video-placeholder",p="yepConfig",m="yvp-content",g="vp-content",f="contentloaded",h="nocontent",v="viewer:hidden",y="viewer:remote-applet",b="viewer:replace",A="viewer:shown",C="stream:filter",w="modal:close",k="hl-viewer",P="MobileUH",S="reblog-",I="td-applet-viewer-templates-reblog",T="slideshow-modal-",V="video-embed",E="remaining-body",R="vv-topbar",M=e.UA.android||e.UA.ie?"click":"tap",x=["autos","beauty","celebrity","finance","food","gma","health","katiecouric","makers","movies","music","news","parenting","politics","sports","style","taxes","tech","travel","tv"],O=["autos","beauty","celebrity","food","health","katiecouric","makers","movies","music","parenting","politics","style","taxes","tech","travel","tv"],L=[],D=[],_=null,N=e.Af.Config,B=e.Af.Event,H=e.Af.Cookie,Y="td-applet-viewer",U="scroll",j="ct-end",F="modal-end",z=3,q=300,G=169,W=/\S/,K="sidekicktv-title",J="sidekicktv-provider",Q="td-applet-viewer-templates-app_install_sm",$="td-applet-viewer-templates-relatedvideos",X="td-applet-viewer-templates-videocluster",Z="td-applet-viewer-templates-yapnativead",ee="td-applet-viewer-templates-swipe_progress_dots",te="td-applet-viewer-templates-taptooltip",ie={sports:"sports",business:"finance",finance:"finance"},ae="backfill-video-ads",ne="vm-videos",oe=!1,le=/ctopid\=\"([\d\;\s\w]+)\"/,se=a.ViewerUtils,de=se.getObjValue,re=e.UA,ce=e.TD.Applet.VideoManagerUtil,ue="stream-liked",pe=4,me=150,ge="display-discussion-applet",fe=3,he=null,ve=30,ye=110,be=0,Ae="rgba(0,0,0,0)",Ce="all 0s ease 0s",we=".viewer-content-body",ke=".back-handle",Pe=null,Se="mobile-promo-header-article",Ie="mobile-promoad-header-wrapper",Te="tilesad-open",Ve="vertical-video-page",Ee="promo-open-app-btn";e.namespace("TD.Viewer").MainView=e.Base.create("TDViewerMainView",e.Af.AppletView,[],{autoRender:!1,initializer:function(l){var u,p,m,g,f,h,y,A,C,S=this,I=[],T=e.one(a);if(S.currPage={link:null,listId:null,spaceid:null,title:null,type:null,uuid:null},S.playerJsLoaded=!1,S.swipeEndTimer=null,S.appletModel=S.get("model"),S.viewerModel=S.appletModel.getDataModel("viewer"),S.adsModel=S.appletModel.getDataModel("ads"),S.relatedVideoModel=S.appletModel.getDataModel("relatedvideo"),S.allItems=[],S.asideNode=null,S.asideNodeOffsetHeight=0,S.beaconData=[],S.contentAdsRendered=[],S.contentEndBeaconFired=[],S.contentLRECNodes=[],S.contentColNode=null,S.videoClusterNode=null,S.contentColTop=0,S.contentColBottom=0,S.contentModalNodes=[],S.contentSites=[],S.contentUuids=[],S.contentViewBeaconFired=[],S.currAdsIndex=0,S.currIndex=0,S.currSidekickStartIndex=0,S.disableBatchLREC=!1,S.disableSidekick=!1,S.dynamicAnchorNode=[],S.dynamicAnchorNodeTop=[],S.dynamicHeightNode=null,S.dynamicHeightHeight=0,S.sidekickItemCount=0,S.firstContentHosted=!0,S.firstVideoStarted=!1,S.fixedHeaderItems=null,S.headerItems=null,S.headerOffset=[],S.ignoreScroll=!0,S.itemsOffset=[],S.itemsOffsetBottom=[],S.LrecOffset=[],S.LrecOffsetBottom=[],S.ticking=!1,S.latestKnownScrollY=0,S.winInnerHeight=0,S.numOfItems=0,S.scrollTimer=-1,S.scrollingToComments=!1,S.shouldRenderVideoBackfill=!1,S.sidekickStartIndexes=[],S.sidekickRendered=[],S.slideshowAdPos=null,S.stickyRightRailStart=!1,S.videoBackfillNextPos=0,S.videoBackfillUuids=[],S.MONadEnabled=!1,S.appletType=S.appletModel.get("applet_type"),S.context=S.appletModel.get("context"),S.device=S.context.device,S.i18n=S.appletModel.get("i18n"),S.guid=l.guid,S.config=e.Af.Bootstrap.getViewMeta(S.guid,"main").config||{},S.adsConfig=S.config.ads||{},S.ui=S.config.ui||{},S.search=S.config.search||{},S.sessionPromoCount=0,S.adsConfig&&S.adsConfig.promoAds&&S.adsConfig.promoAds.enabled&&(S.promoModel=S.appletModel.getDataModel("promo")),S.ui.enableVerticalVideo&&(S.ui.enableVerticalVideo=S.viewerModel.config.uiConfig.enableVerticalVideo=S.isVvEnabled(),S.ui.enableVerticalVideo||(S.ui.swipe=!1,S.ui.inlineView=!0)),S.ui.videoManagerEnabled&&(S.videoManagerUtil=new ce),S.fixedHeader=S.ui.fixedHeader,S.js=S.config.js||{},S.redirectNoContent=!1!==S.config.redirectNoContent,S.flashEnabled=S.isFlashInstalled(),S.pageHasVideo=!1,S.sidekickInlineVideo=!1,S.ui.slots&&S.ui.slots.sidekickdesktop&&S.ui.slots.sidekickdesktop.config&&(S.sidekickInlineVideo=S.ui.slots.sidekickdesktop.config.inline_video),(S.ui.enableRelatedVideo||S.ui.enableVideoCluster)&&(S.relatedVideoAutoPlay=S.ui.relatedVideoAutoPlay,S.renderedRelatedVideos=[],S.relatedVideoPlayer=[],S.ui.relatedVideoIndices&&(S.relatedVideoIndices=S.ui.relatedVideoIndices.split(",")),S.ui.videoClusterMaxItems&&(S.videoClusterMaxItems=parseInt(S.ui.videoClusterMaxItems,10))),S.container=S.ui.inlineView?o:S.get("container"),S.uh=n.getElementById(P),S.ui.isSupportScrollY=!0,S.templateCards=e.Af.Bootstrap.getTemplateName(S.guid,S.ui.templateCards),S.templateCarousel=e.Af.Bootstrap.getTemplateName(S.guid,S.ui.templateCarousel),S.contentList=S.config.content_id&&S.config.content_id.split(","),S.ui.enableVerticalVideo&&S.contentList&&S.contentList.length>1&&(S.contentList=[S.contentList[0]]),S.viewerModel.set("category",S.config.category||"",{silent:!0}),S.viewerModel.set("curveball",S.adsConfig.curveball||{},{silent:!0}),S.hlView=S.config.hlView,S.clusterEnabled=!!de(S.config,["ui","enable","cluster","items"]),S.clusterEnabled||!0!==S.config.clusterEnabled||(S.clusterEnabled=!0),p=S.adsConfig.displayAds||{},S.magazineposition=p.magazineposition,S.modalposition=p.modalposition,S.offnetposition=p.offnetposition,S.offnetSpaceid=p.offnetSpaceid,S.modalSingletonLRECPosition=p.modalSingletonLRECPosition,S.enableModalSingletonLREC=!1,S.enableModalSingletonJTC=!1,S.secondFetchAd=!1,S.secondMobileAdPosition="",S.secondMobileSpaceid="",S.secondSiteAttrs="",S.secondSite="",S.secondIndex=0,S.visibleMeasuresEnabled=S.ui.visibleMeasures.enabled&&"undefined"!=typeof a.thamba&&1===a.thamba,
S.config.userSegment=a.segBlob&&"undefined"!=typeof a.segBlob.seg?a.segBlob.seg:-1,S.embedConfigObj=de(S.config,["ui","embeddedIframes"]),S.ui.lrecBackfill&&S.ui.lrecBackfill.img&&S.adsConfig.displayAds&&(S.adsConfig.displayAds.lrecBackfill||(S.adsConfig.displayAds.lrecBackfill={}),S.adsConfig.displayAds.lrecBackfill.img=S.ui.lrecBackfill.img,S.ui.lrecBackfill.link&&(S.adsConfig.displayAds.lrecBackfill.link=S.ui.lrecBackfill.link)),S.viewer=null,S.ui.inlineView?S.viewer={node:null,getCurrItem:function(){if(this.node){if("mega-modal"===S.ui.mode){var e=document.getElementById("js-slider-item-"+S.currIndex);if(e)return e}return document.getElementById("js-slider-item-0")}},getAllItems:function(){if(this.node)return this.node.getElementsByClassName("js-slider-item Card-Item")},fillContent:function(t,i,n){var o,l;this.node&&t&&(this.node.innerHTML=t,n&&(o=e.Node(this.node))&&(l=o.one("."+n))&&e.later(250,this,function(){a.scrollTo(0,l.getY()-67)}))},clear:function(){this.node&&(this.node.innerHTML="")}}:S.ui.swipe?S.viewer=new Angus.Slider(k,{isIndependentY:!0,viewportOffsetTop:S.ui.enableVerticalVideo?ve:de(S,["uh","offsetHeight"],0),ignoreY:S.ui.enableVerticalVideo,preventYScroll:S.ui.enableVerticalVideo,singleTouch:S.ui.enableVerticalVideo,ignoreEdge:S.ui.enableVerticalVideo&&function(e,t){return S.vvUtil.checkIgnoreEdge(e,t)}}):S.viewer=new Angus.Slider(k),"mega-modal"!==S.ui.mode&&S.initSlideShow("slideshow",!0),m=S.adsConfig.smad&&S.adsConfig.smad.enabled?"ads_story_atomic_sm":"ads_story",S.ui.monSponsorship&&S.adsConfig&&S.adsConfig.displayAds&&(S.adsConfig.displayAds.monSponsorship=!0,S.adsConfig.displayAds.monSponsorshipAllowGemini=S.ui.monSponsorshipAllowGemini||!1,S.adsConfig.displayAds.monSponsorshipUseDarlaEvent=S.ui.monSponsorshipUseDarlaEvent||!1,S.adsConfig.displayAds.allowLDRBMON=S.ui.allowLDRBMON||!1,S.adsConfig.displayAds.removeLREC3LREC4whenMON=S.ui.removeLREC3LREC4whenMON||!1),S.ads=new e.TD.Viewer.Ads({commentsLREC:S.ui.commentsLREC,config:S.adsConfig,context:S.context,i18n:S.i18n,model:S.adsModel,template:e.Af.Bootstrap.getTemplateName(S.guid,m),view:S,guid:S.guid}),B.on(v,function(){var t=S.viewer.getCurrItem();Pe&&(t=Pe),S.destroyPage(t,!0),e.one("body").removeClass("videoIframeDocked"),S.dockedIframeVideo=null}),B.on(b,function(){S.destroyPage(S.viewer.getCurrItem(),!0)}),B.on(w,function(){var e=document.getElementById("Masterwrap");S.ignoreScroll=!0,S.scrollingToComments=!1,S.latestKnownScrollY=0,i&&e&&(i.focus(),S.viewer.node.setAttribute("aria-hidden",!0),e.setAttribute("aria-hidden",!1)),(S.ui.enableModalBackfillViewportDetection||S.visibleMeasuresEnabled)&&(S.backfillVideoPlayer=null),(S.ui.enableRelatedVideo||S.ui.enableVideoCluster)&&(S.renderedRelatedVideos=[],S.relatedVideoPlayer=[]),S.destroyPage(S.viewer.getCurrItem(),!0)}),B.on("content:fallbackData",function(e){S.viewerModel.initContent(e.guid,e.list,e.fullList,e.category,!0,S.config)}),B.on("content:init",function(e){S.viewerModel.initContent(e.guid,e.list,e.fullList,e.category,!1,S.config)}),B.on("content:batch",function(e){S.viewerModel.batchContent(e.guid,e.list,S.config)}),B.on("content:new",function(e){S.viewerModel.addNewContent(e.guid,e.list,S.config)}),B.on("content:remove",function(e){S.viewerModel.removeContent(e.guid,e.list,S.config)}),B.on("content:show",function(a){var o=a.t0||0,l=a.t1||0,s=Date.now(),d=0,r=a.containerId,c=a.numItems||null,u=a.indexOf||null,p=a.clusterUuid||"",m=a.passThruData||{};m.sidekick||(i=document.activeElement),S.viewer.node=r?n.getElementById(r):n.getElementById("hl-viewer"),m.linkElYlk&&(S.videoClickParams=m.linkElYlk),S.showContent(a.guid,a.uuid,c,u,p,m,function(){o&&l&&(d=Date.now(),e.Af.Beacon.perf(t,{code:"clk2cnt",time:Math.floor(d-o),t3_t2:Math.floor(d-s),t2_t1:Math.floor(s-l),t1_t0:Math.floor(l-o),t0:o,list:a.guid,uuid:a.uuid})),"mega-modal"===S.ui.mode&&B.fire("content:showcontentcb",{})})}),B.on("content:scrollinview",function(e){var t=e.index,i="js-slider-item-"+t,a=n.getElementById(i);a&&(B.fire("content:navigate",{uuid:a.getAttribute("data-id")||"",url:a.getAttribute("data-link")||"",title:a.getAttribute("data-title")||"",dir:"stay",guid:S.currPage.listId}),S.renderYEP(a),S.updateContentOffset())}),B.on("content:insertgemini",function(){var e=n.getElementById(S.ui.mobileAdPosOne);S.ads.insertGeminiAdsOnly(S.viewer.getCurrItem(),e)}),B.on("sidekickrefresh",function(t){var i,a,o,l,s,d,c,u=0,p=["LREC-0","LREC2-0","LREC3-0"],m=S.ui.slots.sidekickdesktop.config&&S.ui.slots.sidekickdesktop.config.estHeight||100,g=S.numOfItems,f=e.one(".viewer-wrapper");setTimeout(function(){var h,v,y,b,A,C,w,k,P,I,T,V;if(S.ui.enableSidekickAdditionalRendering)for(h=S.allItems.length||0,S.ui.enableSidekickRefreshAll||(h=Math.min(1,h)),u=0;u<h&&S.allItems[u]&&(!S.ui.singleRightRail||!S.ui.skipSecondSidekick||1!==u);u++)l=n.getElementById("modal-sidekick-mon-"+u),s=l.getElementsByClassName("js-viewer-slot-sidekickdesktop")[0],d=n.getElementById("modal-sidekick-following-"+u),o=0,e.one(".hl-sda-holder-"+u)&&(v=e.one(".hl-sda-holder-"+u))&&(y=v.get("offsetHeight"))&&y>0&&(o=y),0===o&&"undefined"!=typeof t[p[u]]&&t[p[u]]&&(o+=250),o+=10+n.getElementById("modal-sidekick-"+u).offsetHeight+d.offsetHeight+l.offsetHeight,(b=S.allItems[u].getElementsByClassName("cmt-ad"))&&b.length>0&&(A=b[0].offsetHeight)&&A>0&&(o+=A),S.enableModalSingletonLREC&&((C=n.getElementById("hl-ad-LREC2-1"))&&(w=C.offsetHeight)&&w>0&&(o+=w),(k=d.getElementsByClassName("js-viewer-slot-sidekickdesktop")[0]).className.indexOf("Pt-20")<0&&(k.className=k.className.replace("Mt-neg-40","Pt-20"))),S.enableModalSingletonJTC&&(P=n.getElementsByClassName(r))&&P.length>0&&(I=P[0].offsetHeight,o+=void 0===I?me:Math.max(I,me)),S.ui.sports.fantasypromote.enabled&&(T=n.getElementById("hl-modal-sports-fantasypromote"))&&(V=T.offsetHeight)&&V>0&&(o+=V),c=S.calArticleHeight(S.allItems[u]),i=Math.max(0,Math.round((c-o)/m)),
(a=g>1?Math.min(i,S.ui.sidekickMaxBatchCount):i)>0&&(S.ui.singleRightRail&&l&&l.className.indexOf("D-n")>=0&&(l.className=l.className.replace("D-n","")),f.fire("sidekick:showmore",{container:e.one(s),batchStartIndex:S.currSidekickStartIndex,batchEndIndex:S.currSidekickStartIndex+a}),S.currSidekickStartIndex=S.currSidekickStartIndex+a)},parseInt(S.ui.sidekickFollowingDelay)+S.numOfItems*parseInt(S.ui.sidekickBatchDelay)+100)}),B.on("content:prefetchads",function(e){var t="js-slider-item-"+S.currIndex,i=n.getElementById(t),a=e.index;S.getAdsPositionListAndUpdatePage(a,S.ui.enableModalLargeAds,!0),S.updateContentOffset(),S.renderYEP(i)}),g=function(t){var i,n,o,l,r,u,p,m;"advance-sm"===S.ui.mode&&S.pauseVideos(),"mega-modal"===S.ui.mode&&S.ui.enableSidekickAdditionalRendering&&S.ui.enableSidekickCommentsRefresh&&(i=S.contentUuids.indexOf(t.uuid))>-1&&(S.ui.commentsLREC&&i<=4?(n="LREC2-"+(pe+i),o="LREC2-"+(pe+i)+",LREC3-"+(pe+i),l=e.one("#js-slider-item-"+i+" .js-comments-container"),r=e.one("#comment-ad-wrapper-"+i),l&&r&&(r.removeClass("D-n"),u=0,S.ui.discussion.enabled&&(p="."+ge,S.getRemoteAppletDiscussion(r,p),u=c),l.get("offsetHeight")>s+u?(r.removeClass("D-n"),S.ads.fecthAdsWithOverride("hlAdsAll",{ps:o}),S._updateCommentsLREC(i)):l.get("offsetHeight")>d+u?(r.removeClass("D-n"),S.ads.fecthAdsWithOverride("hlAdsAll",{ps:n}),S._updateCommentsLREC(i)):r.addClass("D-n"))):S.ui.singleRightRail?(S.updateContentOffset(),S.updateLrecsOffset(),a.scrollBy(0,-1)):(m=S.ui.sidekickBatchDelay||500,setTimeout(e.bind(S.handleSlotApplet,S,S.allItems[i],"sidekickdesktop",S.ui.slots.sidekickdesktop,!0,i),m)))},B.on("modal:showcomments",g),B.on("modal:hidecomments",g),"advance-sm"===S.ui.mode&&S.adsConfig.smad&&S.adsConfig.smad.enabled&&(B.on("modal:showcomments",S.ads.pauseSMAd.bind(S.ads)),B.on("modal:hidecomments",S.ads.playSMAd.bind(S.ads))),S.container.delegate(M,function(e){e.preventDefault(),S.slideshow.open()},".open-lightbox"),S.ui.searchBox&&S.container.delegate("click",function(t){var i=e.Af.rapid,a=t.currentTarget,n=a&&a.ancestor("form"),o=n&&n.one(".srch-input"),l=function(){n.submit()};t.preventDefault(),o&&W.test(o.get("value"))&&(i?i.triggerBeaconClickEvent(a,!1,l):l())},".srch-btn"),f={".js-related-content-item":{click:"slideToRelatedContent"},".continue_reading":{click:"showFullContent"},".js-viewer-view-article":{click:"expandFullArticle"},".js-viewer-comments":{click:"scrollToComments"},".modal-actions a":{click:"handleShareClick"}},S.attachEvents(f),S.ui.swipe&&S.viewer.node&&(S.viewer.node.addEventListener("slider:swipe",function(e){var t=e.detail;S.handleSwiping(t.currPage,t.fromPage,t.currNode,t.fromNode)},!1),S.viewer.node.addEventListener("slider:move",function(e){S.isSliderMoving=!0,S.swipeEndTimer&&(clearTimeout(S.swipeEndTimer),S.swipeEndTimer=null)},!1),S.viewer.node.addEventListener("slider:swipeabort",function(e){S.isSliderMoving=!1},!1),S.viewer.node.addEventListener("slider:swipeend",function(e){var t,i,a,n;S.isSliderMoving=!1,(t=e&&e.detail).aborted||(i=de(t,["currNode","firstChild"]),a=t&&t.samePage,n=t&&t.currPage,i&&!a?(S.swipeFromNodes&&i!==S.swipeFromNodes[0]&&(S.handleSwipeEnd(n,i),S.swipeEndTimer=setTimeout(function(){S.initPage(S.viewer.getCurrItem(),S.viewer.getCurrIndex()),S.swipeEndTimer=null},50)),S.swipeFromNodes=[]):S.updateProgressDots(n))},!1)),S.contentList&&S.contentList.length){for(h=[],y=0,A=S.contentList.length;y<A;y++)I.push({id:S.contentList[y],type:"1"}),h.push(S.contentList[y]);B.fire("content:init",{guid:S.guid,list:I,fullList:I}),e.later(100,S,function(){B.fire("content:show",{guid:S.guid,uuid:I[0].id,numItems:h,clusterUuid:I[0].id,indexOf:I[0].id})})}S.config.rendered&&(S.ui.inlineView&&(S.viewer.node=n.getElementById("hl-viewer")),C=S.viewer.getCurrItem(),!S.hlView&&C.hasAttribute("data-link")&&a.location.replace(C.getAttribute("data-link")),setTimeout(function(){S.initPage(C)},50)),S.ui.enableModalBackfillViewportDetection&&e.one("body").scrollInfo?(e.one("body").scrollInfo.on("scroll",S._onScroll,S),e.on("blur",e.bind(S.handleBlur,S),window),e.on("focus",e.bind(S.handleFocus,S),window)):S.adsConfig.tilesAds.enabled&&e.one("body").scrollInfo&&(e.one("body").scrollInfo.on("scroll",S._onScroll,S),e.Af.PageViz.on("visible",S.handleFocus,S),e.Af.PageViz.on("hidden",S.handleBlur,S)),S.adsConfig.tilesAds.enabled&&(S.tilesadModel=S.appletModel.getDataModel("tilesad")),S.ui.commentsLREC&&e.on("scroll",e.bind(S._commentsAdScroll,S),window),S.ui.enableMobileMSPL&&(e.Global.on("stream:splashclose",S._handleMSPLEnd,S),e.Global.on("splash-fetch-next",S._getNextAds,S)),S.ui.singleRightRail&&(S._updateSingleRightRailLREC=S._updateSingleRightRailLREC.bind(this),"undefined"==typeof window.scrollY&&(S.ui.isSupportScrollY=!1)),S.ui.enableYapjs&&(S.yapjsDownloaded=!1,S.yapadModel=S.appletModel.getDataModel("yapad")),S.ui.enableVerticalVideo&&(S.vvUtil=new e.TD.Applet.ViewerVerticalVideoUtil({container:S.container,viewer:S.viewer,model:S.appletModel,config:S.config,view:S}),S.vvUtil.init(),T.on("orientationchange",S.onOrientationChange,S),T.on("resize",S.onResize,S),S.container.delegate("tap",function(){S.toggleArticleReveal(!1)},ke),S.container.delegate(["touchstart","touchmove","touchend","touchcancel"],S.handleRevealDrag,we+",.back-handle",S),S.articleRevealed=!1),S.ui.offnetAMP&&S.container.delegate("click",S.onClickReadMore,".offnetamp-link",S),S.adsConfig&&S.adsConfig.smad&&S.adsConfig.smad.enabled&&S.ads.prefetch(),S._setIframeClick(T,u)},getAdsPositionList:function(e,t,i,a){var n,o,l,s,d,r,c,u=this,p=u.ads.displayAdsConfig&&u.ads.displayAdsConfig.modalSidekickLrecPositions||[],m=de(u,["contentSites",e],"");if((n=t?m&&O.indexOf(m)>-1?u.magazineposition:u.modalposition:u.offnetposition).indexOf("MON")>-1&&(u.MONadEnabled=!0),p&&p.length>0&&(2===a?n=n+","+p[0]:a>=3&&(n=n+","+p[0]+","+p[1])),i&&(n=u.formatAdPosList(n,e)),u.enableModalSingletonLREC&&(n=n+","+u.modalSingletonLRECPosition),u.ui.singleRightRail&&!u.ui.ubaAdPositionEnabled&&(n+=",LDRB2-1"),
u.ui.enableModalExtraLargeAds&&u.ui.modalExtLargeAdPosName&&a>=2)for(o=1;o<a&&!(u.ui.modalExtLargeAdPosMaxNum&&u.ui.modalExtLargeAdPosMaxNum<=o);o++)u.ui.modalExtLargeAdPosNameAddIndex?(l=parseInt(e,10)+o+1,n=n+","+u.ui.modalExtLargeAdPosName+l+"-"+o):n=n+","+u.ui.modalExtLargeAdPosName+"-"+o;if(u.ui.monSponsorship&&u.ui.disableMON2offnet){for(s=0,d=u.allItems.length,o=0;o<d;o++)r=u.allItems[o].getAttribute("data-hosted")||null,c=u.allItems[o].getAttribute("data-type")||null,r&&(!c||"video"!==c&&"slideshow"!==c)||s++;s>=2&&(n=n.replace(/,MON2-0/,"").replace(/MON2-0,/,""))}return n},getAdsPositionListAndUpdatePage:function(e,t,i){var a,o=this,l="js-slider-item-"+e,s=n.getElementById(l),d=de(o,["contentSites",e],"");s&&(a=o.getAdsPositionList(e,t,i),o.updatePage(s,e,a,d))},initSlideShow:function(t,i){var a=this;a.ui.enableModalSponsoredAds&&(a.slideshowAdPos="LREC-0",!a.ui.disableSlideshowMON&&a.MONadEnabled&&(a.slideshowAdPos+=",MON-0")),a.slideshow=new e.TD.Viewer.Slideshow({id:t,model:a.viewerModel,template:a.templateCarousel,onSwipe:a.onLightboxSwipe.bind(a),onSwipeEnd:a.onLightboxSwipeEnd.bind(a),onClose:a.onLightboxClose.bind(a),onOpen:a.onLightboxOpen.bind(a),enableAds:i,slideshowAdPos:a.slideshowAdPos})},fireCustomBeacon:function(t,i,a){var n,o=this,l=o.getRapid();l&&l.beaconEvent&&(n=e.mix({elm:t,elmt:i,t1:"a3",t2:"strm",t3:"ct",sec:"strm"},a),l.beaconEvent(t,n,i))},fireClickBeacon:function(t,i,a,n,o){var l,s=this,d=s.getRapid(),r=n||0;d&&d.beaconClick&&(l=e.mix({elm:a,itc:o&&o.itc||"1"},o),d.beaconClick(t,i,r,l))},firePageviewBeacon:function(e){var t=this,i=t.getRapid();i&&i.beaconPageview&&i.beaconPageview(e)},replaceAdsIndex:function(e,t){return e?t===undefined?e:e.split("-")[0]+"-"+t:null},formatAdPosList:function(e,t){var i,a,n=this;if(e){for(i=e.split(","),a=0;a<i.length;a++)i[a]=n.replaceAdsIndex(i[a],t);return i.join(",")}},removeContent:function(){var t,i=this;i.viewer&&i.viewer.clear(),i.ui.swipe&&i.ui.enableVerticalVideo&&(i.viewer.node.classList.remove("vv"),e.one("BODY").removeClass(Ve),(t=i.container.one("."+R))&&t.remove(),i.container.setStyles({overflow:null,height:null})),i.articleRevealed&&i.resetRevealState()},resetRevealState:function(){var t,i=this,a=i.viewer,n=i.container,o=n.one(ke);i.articleRevealed=!1,n.hasClass("revealed")&&n.removeClass("revealed"),n.hasClass("not-revealed")||n.addClass("not-revealed"),n.hasClass("vv-hidden")&&n.removeClass("vv-hidden"),o&&o.setStyles({display:null,transform:null}),a&&(a.getCurrIndex&&(t=a.getCurrIndex()),a.cards&&a.cards.forEach(function(i){var a,n=i.getAttribute("data-index");n&&parseInt(n)!==t&&(a=i.querySelector(we))&&a.style.transform&&e.one(a).setStyles({transition:Ce,transform:null})}),a.enable&&a.enable())},handleScroll:function(){var e=this;e.ignoreScroll||(e.ui.singleRightRail&&(e.latestKnownScrollY=e.ui.isSupportScrollY?window.scrollY:window.pageYOffset,e.requestTick()),-1!==e.scrollTimer&&clearTimeout(e.scrollTimer),e.scrollingToComments||(e.scrollTimer=setTimeout(function(){e.handleVisibleNode()},100)))},handleVisibleNode:function(){var e,t,i,n,o,l,s,d,r,c,u,p,m,g=this,f=!1,h=a.innerHeight;if(g.winInnerHeight=h,n=(i=a.pageYOffset)+h+300,o=i+h,l=i+h/2,g.ui.enableModalContentPV,g.itemsOffset.length){if(g.ui.singleRightRail&&(g.updateContentOffset(),g.updateLrecsOffset()),g.fixedHeader){for(e=g.itemsOffset.length-1;e>=0;e--)r=g.contentModalNodes[e],c=g.headerItems[e],u=g.fixedHeaderItems[e],p=0===e?0:g.fixedHeaderWrap.offsetHeight,i>(m=r.offsetTop)+c.offsetHeight-p&&i<m+r.offsetHeight-g.fixedHeaderWrap.offsetHeight?(u.classList.add("fadein"),u.classList.remove("fixZindex"),u.style.top="0px"):u.classList.contains("fadein")&&(d=u,u.classList.remove("fadein"),u.classList.add("fixZindex"));i>g.contentModalNodes[0].offsetTop+g.headerItems[0].offsetHeight&&i<g.contentModalNodes[g.contentModalNodes.length-1].offsetTop+g.contentModalNodes[g.contentModalNodes.length-1].offsetHeight-g.fixedHeaderWrap.offsetHeight&&(f=!0),!g.wasInlastTime&&f?(g.fixedHeaderWrap.classList.add("fadein"),g.fixedHeaderWrap.style.top="0px"):g.wasInlastTime&&!f&&d&&(g.fixedHeaderWrap.classList.remove("fadein"),g.fixedHeaderWrap.style.top="-"+c.offsetHeight+"px",d.style.top="-"+c.offsetHeight+"px")}for(g.wasInlastTime=f,e=g.itemsOffset.length-1;e>=0;e--)if(g.ui.enableModalCustomEvent&&!g.contentEndBeaconFired[e]&&g.itemsOffsetBottom[e]<=o&&(g.contentEndBeaconFired[e]=!0,g.fireCustomBeacon(U,j,g.beaconData[e]),e===g.itemsOffset.length-1&&g.fireCustomBeacon(U,F,g.beaconData[e])),(t=g.itemsOffset[e])<=l){g.currIndex!==e&&(g.currIndex=e,B.fire("content:scrollinview",{index:e}),g.ui.enableModalContentPV&&(g.ui.enableModalPVOnEveryScroll||!g.contentViewBeaconFired[e])&&(g.contentViewBeaconFired[e]=!0,s="slideshow"===g.currPage.type?"story":g.currPage.type,g.handleTracking(s,!0,!0)));break}for(e=g.itemsOffset.length-1;e>=0;e--)((t=g.itemsOffset[e])<=n||t<=o)&&g.currAdsIndex!==e&&(g.currAdsIndex=e,g.contentAdsRendered[e]||(g.contentAdsRendered[e]=!0,B.fire("content:prefetchads",{index:e})));if((g.ui.enableRelatedVideo||g.ui.enableVideoCluster)&&g.relatedVideoPlayer.length>0)for(e=0;e<g.relatedVideoPlayer.length;e++)t=g.relatedVideoPlayer[e].offsetTop,!g.relatedVideoPlayer[e].pageview_fired&&t<=l&&(g.relatedVideoPlayer[e].pageview_fired=!0,g.fireRelatedVideoPV(g.relatedVideoPlayer[e].uuid),B.fire("content:updateShareInfo",{title:g.relatedVideoPlayer[e].title,url:g.relatedVideoPlayer[e].link,shareNode:g.relatedVideoPlayer[e].shareBtnNode,uuid:g.relatedVideoPlayer[e].id}))}},showContent:function(i,o,l,s,d,c,u){var p,m,g,v,y,b,A=this,C=o&&0===o.indexOf(S),w=c.label,k=c.posSel;C&&(o=o.slice(S.length)),m=A.viewerModel,g=m.getItemMeta(i,o),v=A.ui.enableVerticalVideo,y=A.ui.swipe,o&&(A.ui.singleRightRail&&(A.ui.label=w),A.commentsUuid=c.commentsClick?o:null,c.aid&&(A.currPage.paid=c.aid),A.currPage.videoPlaylistId=null,A.currPage.watchExperience=!1,c.viewerConf&&((b=c.viewerConf).videoPlaylistId&&(A.currPage.videoPlaylistId=b.videoPlaylistId),
b.watchExperience&&(A.currPage.watchExperience=!0)),v||!A.clusterEnabled?p=1:l&&l.length&&(p=l.length),p&&A.clusterEnabled&&(o=l),m.fetchItems(i,o,p,function(i,b){var P,S,V,E,R,M,x,O,L,D,_,N,B,H,Y,U,j,F,z,q,G,W,K,J,Q,$,X,Z,ee,te,ie,ae,ne,oe,le,se=!1,re=[],ce=/data-yepConfig="\{([^}]*)\}/,ue=b&&1===b.length&&b[0]&&b[0].tiles;if(ue)return e.one("BODY").addClass(Te),void dust.render("td-applet-viewer-templates-tiles_ad_main_sm",{tiles:ue.tiles,callToAction:ue.callToAction,i18n:A.i18n,config:A.config},function(e,t){!e&&t&&(A.viewer.fillContent(t,!1),A.tilesPageVisible=!0,A.initTilePage(A.viewer.getCurrItem(),ue)),"function"==typeof u&&u()});if(A.commentsUuid&&e.Array.each(b,function(e,t){A.commentsUuid===e.id&&(e.collapseBody=!0)}),p&&A.clusterEnabled?(e.Array.each(b,function(e,t){-1!==l.indexOf(e.id)&&re.push(e)}),b=re,e.Array.each(b,function(e,t){e.id===s&&(se=!0,R=t)}),se?(M=b.splice(R,1),b.unshift(M[0])):(b=[],o=s||o),e.Array.each(b,function(e,t){if(A.ui.enableModalSingleAutoplay&&e.magazineVideo&&(0===t&&A.commentsUuid||t>0)){var i=e.magazineVideo;i.src=i.src&&i.src.replace(/[\&]?vp=1/,""),i.lazyload=i.lazyload&&i.lazyload.replace(/[\&]?vp=1/,"")}if(A.ui.enableModalSingleAutoplay&&0===t&&e.magazineVideo&&!A.commentsUuid&&(e.magazineVideo.altSrc=""),0===t&&A.ui.enableModalVideoFirstAutoplay&&e.body&&e.body.incomplete_body){if(O=e.body.incomplete_body[0],!(O&&O.match(ce)))return;A.commentsUuid?e.body.incomplete_body[0]=O.replace("&quot;autoplay&quot;:true","&quot;autoplay&quot;:false"):e.body.incomplete_body[0]=O.replace("&quot;autoplay&quot;:false","&quot;autoplay&quot;:true")}})):(L=b[0])&&A.ui.enableModalVideoFirstAutoplay&&L.body&&L.body.incomplete_body&&(O=L.body.incomplete_body[0],ce=/data-yepConfig="\{([^}]*)\}/,O&&O.match(ce)&&(A.commentsUuid?L.body.incomplete_body[0]=O.replace("&quot;autoplay&quot;:true","&quot;autoplay&quot;:false"):L.body.incomplete_body[0]=O.replace("&quot;autoplay&quot;:false","&quot;autoplay&quot;:true"))),A.clusterEnabled||"desktop"!==A.device||(b=b.splice(R,1)),e.Lang.isArray(b)&&0!==b.length)S={code:f,listId:i,uuid:o,index:m.getItemIndex(i,o),link:de(b,["0","link"],""),lsdu:e.Af.Cache&&e.Af.Cache.du&&e.Af.Cache.du()||"",redirect:A.redirectNoContent?"1":"0"},e.Af.Beacon.info(t,S);else{if(P=A.getFallbackItem(i,o),x=m.getItemMeta(i,o)||{},S={listId:i,uuid:o,index:m.getItemIndex(i,o),link:P.link||"",lsdu:e.Af.Cache&&e.Af.Cache.du&&e.Af.Cache.du()||"",redirect:A.redirectNoContent?"1":"0",isEligible:x.eligible?"1":"0"},A.redirectNoContent)return void e.Af.Beacon.error(t,S,{code:h},{callback:function(){var t,i,n,l=P.link;l===a.location.href?(t=e.one('[data-uuid="'+o+'"]'))&&(t.hasClass("js-stream-content-link")?n=t.getAttribute("href"):(i=t.one(".js-stream-content-link"))&&(n=i.getAttribute("href")),n&&(l=n)):l.indexOf("?")<0?l+="?hl=1&noRedirect=1":l+="&hl=1&noRedirect=1",a.location.replace(l)}});a.setTimeout(function(){e.Af.Beacon.error(t,S,{code:h})},10),A.viewerModel.setItems(i,[P],!1),b=[P]}if((O=b[0])&&O.link&&O.sponsor)return V=(V=O.link)+(V.indexOf("?")<0?"?":"&")+"noRedirect=1",void a.location.replace(V);A.currPage.listId=i,A.updateCurrPage(O),D=O.categoryLabel||O.site,_=de(A,["ui","promo"]),A.firstItemLabel=D;try{"string"==typeof _&&(_=JSON.parse(_))}catch(pe){_=null}(_=de(_,D,null))&&(O.promoConfig=_),N=de(A,["ui","asidePromo"]);try{"string"==typeof N&&(N=JSON.parse(N))}catch(pe){N=null}if(N=de(N,D,null),A.ui.sports.fantasypromote.enabled=!!N,A.ads.abortDARLA(),v&&A.vvUtil&&de(b,["0","verticalVideo"])&&(b=A.vvUtil.processVerticalVideos(b)),"mega-modal"===A.ui.mode)if(C)E={i18n:A.i18n,item:O,ui:A.ui},dust.render(I,E,function(e,t){!e&&t&&A.viewer.fillContent(t,!1)});else{for(B=0;B<b.length;B++)b[B].label=0===B?w:b[B].categoryLabel||b[B].publisher||"",b[B].categoryLabel&&(b[B].categoryLabel=b[B].categoryLabel.toLowerCase());for(A.ads.updatePageIndex(b,0),A.updateLeadPhotoClass(b),A.renderContentList(b,!1,k),window.c2s_event&&O&&O.id&&(Y=(H=e.one("#content-col .body-wrapper div"))&&H.getDOMNode(),window.c2s_event("ready",{articleId:O.id,contentRootNode:Y})),A.resetVariables(),A.allItems=A.viewer.getAllItems(),A.numOfItems=A.allItems&&A.allItems.length,F=A.viewer.node.getElementsByClassName("js-slider-lead-item")[0],z=0;z<A.numOfItems;z++)(U=(q=A.allItems[z]).getElementsByClassName("content-modal")[0])&&(G=U.offsetTop,0===z&&F&&(G-=F.offsetHeight),G&&(A.itemsOffset=A.itemsOffset.concat(G||[]),A.itemsOffsetBottom=A.itemsOffsetBottom.concat(G+U.offsetHeight||[]),0===z&&F&&(A.itemsOffsetBottom[0]+=F.offsetHeight),A.contentModalNodes=A.contentModalNodes.concat(U||[]),A.contentAdsRendered=A.contentAdsRendered.concat([]),A.contentEndBeaconFired=A.contentEndBeaconFired.concat([]),A.contentViewBeaconFired=A.contentViewBeaconFired.concat([]),A.ui.singleRightRail&&(A.asideNode=e.one(".modal-aside"),A.contentColNode=e.one("#content-col"),A.dynamicHeightNode=e.one("#dynamic-height-container"),A.ui.enableAdsDynamicAnchor&&(W=e.one("#js-dynamic-anchor-"+z),A.dynamicAnchorNode=A.dynamicAnchorNode.concat(W||[]),A.dynamicAnchorNodeTop=A.dynamicAnchorNodeTop.concat(W.get("offsetTop")||[])),A.contentColTop=A.contentColNode.getY(),A.contentColBottom=A.contentColTop+A.contentColNode.get("offsetHeight"),(K=n.getElementsByClassName("hl-sda-holder-"+z)[0])&&(J=K.offsetTop,A.contentLRECNodes=A.contentLRECNodes.concat(K||[]),A.LrecOffset=A.LrecOffset.concat(J||[]),A.LrecOffsetBottom=A.LrecOffsetBottom.concat(J+K.offsetHeight||[])),"undefined"==typeof window.scrollY&&(A.ui.isSupportScrollY=!1)))),A.contentSites=A.contentSites.concat(q.getAttribute("data-site")),A.sidekickStartIndexes=A.sidekickStartIndexes.concat(0),A.sidekickRendered=A.sidekickRendered.concat(!1),A.contentUuids=A.contentUuids.concat(b[z].cauuid||b[z].id||[]),j={g:b[z]&&b[z].id||"",ss_cid:d||"",cpos:z+1,refcnt:A.numOfItems},A.beaconData=A.beaconData.concat(j||[]),"slideshow"===b[z].type&&(A.initSlideShow(T+z,0===z),A.slideshow.render(b[z]),A.slideshow.open(!0));Q=A.ui.enableModalSponsoredAds&&O.hosted,
$=de(A,["contentSites",0],""),Q||O.hosted||(A.firstContentHosted=!1,A.ui.enableModalLargeAdsOffnetwork&&O&&O.cover_photo&&O.cover_photo.img&&O.cover_photo.img.src&&(Q=!0)),1===A.numOfItems&&(X=A.get("container"),O.hosted?A.enableModalSingletonLREC=A.ui.enableModalSingletonLREC:(A.enableModalSingletonLREC=A.ui.enableModalSingletonLRECOffnetwork&&O.cover_photo&&O.cover_photo.img&&O.cover_photo.img.src,A.enableModalSingletonJTC=!!A.enableModalSingletonLREC&&A.ui.discussion.offnet.enabled,A.enableModalSingletonJTC&&(Z=X.one(".modal-aside"),ee="."+r,A.getRemoteAppletDiscussion(Z,ee))),A.enableModalSingletonLREC&&(te=X.one(".hl-sda-holder-9"))&&te.removeClass("D-n")),ie=A.getAdsPositionList(0,Q,!0,A.numOfItems),A.ui.disableSlideshowMON&&"slideshow"===O.type&&(ie=ie.replace(/,MON-0/,"").replace(/MON-0,/,"")),A.initPage(A.viewer.getCurrItem(),0,ie,$),A.ui.enableModalBackfillVideoAds&&(ae=m.getVideoItems(i),A.videoBackfillUuids=ae.slice(-5),"story"===O.type&&(A.shouldRenderVideoBackfill=!0))}else"modal"===A.ui.mode||"slideshow"!==O.type||g&&"today"===g.source||A.ui.slideshowInline?(A.ads.updatePageIndex(b,0),v&&y&&O.verticalVideo?(A.vvUtil.initProgressBar(A.ui.verticalVideoCount),A.viewer.node.classList.add("vv"),e.one("BODY").addClass(Ve),A.renderContentList(b,!1),A._onceVerticalVideoPlay=function(){A.vvUtil.initContentList(O,A.renderRelatedVvContent.bind(A))}):(v&&y&&A.viewer.disable(),A.renderContentList(b,!1)),A.initPage(A.viewer.getCurrItem())):(A.slideshow.clear(),A.slideshow.render(O),A.slideshow.open(!0),ne=document.getElementById("lightbox-canvass"),A.ui.comments.enabled&&A.ui.comments.canvassFullScreen&&ne&&(O.id&&ne.setAttribute("data-id",O.id),O.title&&ne.setAttribute("data-title",O.title),O.link&&ne.setAttribute("data-link",O.link),O.images&&O.images[0]&&O.images[0].image&&O.images[0].image.src&&ne.setAttribute("data-share-img",O.images[0].image.src),O.commentsNamespace&&ne.setAttribute("data-commentsnamespace",O.commentsNamespace),A.ui.loadAppletDelay?setTimeout(function(){A.getRemoteAppletComments(ne)},parseInt(A.ui.loadAppletDelay,10)):A.getRemoteAppletComments(ne)));"mega-modal"===A.ui.mode&&((A.numOfItems>1||A.ui.singleRightRail||A.fixedHeader||A.ui.enableModalCustomEvent)&&(A.contentAdsRendered[0]=!0,setTimeout(function(){A.ignoreScroll=!1},0),A.fixedHeader&&(A.headerItems=A.viewer.node.getElementsByClassName("Headline"),A.fixedHeaderItems=A.viewer.node.getElementsByClassName("Fixed-Header"),A.fixedHeaderWrap=A.viewer.node.getElementsByClassName("Fixed-Header-Wrap")[0],A.wasInlastTime=!1),A.ui.enableModalCustomEvent&&A.beaconData[0]&&(A.contentViewBeaconFired[0]=!0,setTimeout(function(){A.updateContentOffset()},5e3)),a.addEventListener("scroll",A.handleScroll.bind(A),!1)),A.viewer.node.focus(),A.viewer.node.setAttribute("aria-hidden",!1),document.documentElement.scrollTop=0,document.body.scrollTop=0,(oe=document.getElementById("Masterwrap"))&&oe.setAttribute("aria-hidden",!0),(le=document.getElementById("viewer-end"))&&(le.onfocus=function(){document.getElementById("closebtn").focus()}),A._iframeDockingDimensions=A.getDockingDimensions()),A.adsConfig.smad&&A.adsConfig.smad.enabled&&(A.smAdsFooterVisibility=A.ads.manageFooterVisibility.bind(A),a.addEventListener("scroll",A.smAdsFooterVisibility,!1),e.Global.on("video-manager:create_player_instance",A.ads.onCreatePlayerInstance,A.ads)),"advance-sm"===A.ui.mode&&c.scrollTop&&(A.viewer.node.focus(),document.body.scrollTop=0),window.c2s_event&&O&&O.id&&window.c2s_event("display",{articleId:O.id}),u()}))},renderRelatedVvContent:function(e){var t,i,a,n=this;e&&0!==e.length?(t=n.viewer&&n.viewer.getCurrItem(),i=t&&t.getAttribute("data-id"),a=0,e.some(function(e,t){if(e.id===i)return a=t,!0}),a>0&&(e=e.splice(a,e.length-a).concat(e)),n.vvUtil&&(e=n.vvUtil.processVerticalVideos(e,!0,n.ui.verticalVideoCount-1,1)),n.renderContentList(e,!0,null,function(){n.initRelatedVv()}),n.viewer.enable(),n.vvUtil&&n.vvUtil.updateProgressBar([n.vvUtil.firstItem].concat(e))):n.vvUtil.updateProgressBar([n.vvUtil.firstItem])},updateCurrentProgressDot:function(e,t){var i=this,a=i.container.one(".progress-bar .current.progress-dot");a&&(e?a.addClass("playing"):a.removeClass("playing"),t?a.addClass("completed"):a.removeClass("completed"))},updateProgressDots:function(e){var t,i,n,o,l,s=this,d=s.container.one("."+R),r=d.all(".progress-dot"),c=d.all(".current");if(c.each(function(e){e.removeClass("current").removeClass("completed").removeClass("playing"),e.one(".bar")&&e.one(".bar").setStyle("left","-"+ye+"px")}),(t=r.item(e)).addClass("current"),t.hasClass("ad")||t.addClass("playing"),(i=t.one(".segment-dots"))&&i.hide(),n=_?_.length:0){for(o=new Array(n-1),l=0;l<n-1;l++)o[l]=(l+1)*(ye/n);dust.render(ee,{dotPos:o},function(e,n){i?i.replace(n):t.prepend(n),a.requestAnimationFrame(function(){t.one(".segment-dots").setStyle("opacity",1)})})}},getVerticalVideoIndex:function(t){var i,a=this;return t=void 0===t?a.viewer.getCurrIndex():t,(i=e.one(a.viewer.node).one('.js-slider-card[data-index="'+t+'"] .vv-box .'+u))?i.getData("index"):null},updateContentOffset:function(){var e,t,i,a=this,n=a.viewer.node.getElementsByClassName("js-slider-lead-item")[0];if(a.numOfItems>1||a.ui.singleRightRail)for(t=0;t<a.numOfItems;t++)(e=a.contentModalNodes[t])&&(i=e.offsetTop,0===t&&n&&(i-=n.offsetHeight),a.itemsOffset[t]=i,a.itemsOffsetBottom[t]=i+e.offsetHeight)},updateLrecsOffset:function(){var e,t,i,a,n=this;if(n.ui.singleRightRail)for(n.contentColNode&&(n.contentColTop=n.contentColNode.getY(),n.contentColBottom=n.contentColTop+n.contentColNode.get("offsetHeight"),n.ui.enableVideoCluster&&n.videoClusterNode&&(n.contentColBottom=n.videoClusterNode.getY()+n.videoClusterNode.get("offsetHeight"))),n.asideNode&&(n.asideNodeOffsetHeight=n.asideNode.get("offsetHeight")),e=0;e<n.numOfItems;e++)(t=n.contentLRECNodes[e])&&(i=t.offsetTop,n.LrecOffset[e]=i,n.LrecOffsetBottom[e]=i+t.offsetHeight),
n.ui.enableAdsDynamicAnchor&&(a=n.dynamicAnchorNode[e])&&(n.dynamicAnchorNodeTop[e]=a.get("offsetTop"))},pauseVideos:function(e){for(var t=0,i=L.length;t<i;t++)e&&e.indexOf(t)>=0||L[t].controls.pause()},renderContentList:function(t,i,a,o){var l=this,s=l.currPage.listId,d=l.ui.enableVerticalVideo,r=l.ui.enableVerticalVideoAds;e.Af.Cache.get(ue,{},function(c,u){var p,m,g,f,h,v=!1;!c&&u&&u[s]&&(p=u[s],e.Array.each(t,function(e){e.liked=p[e.cauuid]||p[e.id]})),e.Array.each(t,function(e,t){var i,a,o,s,d;!l.offnetSpaceid||e.spaceid||e.is_eligible||(e.spaceid=l.offnetSpaceid),(l.ui.offnet_allshare_enabled||e.hosted)&&(e.enableAllShare=!0),l.ui.leadModal&&0===e.pageIndex&&"story"!==e.type&&("video"===e.type?e.isVideoLeadItem=!0:"slideshow"===e.type&&(e.isSlideshowLeadItem=!0)),l.ui.aSideContentPromoEnabled&&l.ui.aSideContentPromoType&&0===t&&"gma"!==e.property&&(i=e.offnetDeeplink||e.link,a=l.ui.aSideContentPromoType,v=!(!i||!a)&&((o=n.createElement("a")).href=i,1===(d=(s=o.pathname&&o.pathname.toLowerCase())&&s.indexOf(a.toLowerCase()))||0===d)),!v||0!==t&&2!==t||(e.showContentAsidePromo=!0)}),m={applet_type:l.appletType,i18n:l.i18n,context:l.context,data:{items:t},ui:l.ui,search:l.search,adChoicesUrl:l.adsConfig.curveball.adChoicesUrl},r&&(m.adsConfig=l.adsConfig),g=l.templateCards,f=e.Object.getValue(m,["data","items"]).length>1,l.ui.isVideoModal=!1,h="video"===e.Object.getValue(m,["data","items","0","type"]),l.ui.videoModalHero&&h&&l.ui.videoModalHeroTemplate&&!f&&(g=l.ui.videoModalHeroTemplate,m.videoModal=l.config.videoModal,l.ui.isVideoModal=!0,l.ui.watchExperience=l.currPage.watchExperience),dust.render(g,m,function(e,t){!e&&t&&(l.viewer.fillContent(t,i,a),"function"==typeof o&&o(),d&&l.onOrientationChange(null,50))})})},updateCurrPage:function(e){var t=this,i="",a="",n="",o="",l="",s="",d="";e&&(e.getAttribute?(i=e.getAttribute("data-spaceid"),a=e.getAttribute("data-id"),n=e.getAttribute("data-link"),o=e.getAttribute("data-title"),s=e.getAttribute("data-type"),l=e.getAttribute("data-cauuid"),d=e.getAttribute("data-hosted")):(i=e.spaceid,a=e.id,n=e.link,o=e.title,s=e.type,l=e.cauuid,d=e.hosted,!t.offnetSpaceid||i||e.is_eligible||(i=t.offnetSpaceid))),t.currPage.spaceid=i,t.currPage.uuid=a,t.currPage.link=n,t.currPage.title=o,t.currPage.type=s,t.currPage.cauuid=null,t.currPage.hosted=d,t.currPage.no_ads=!!e.no_ads&&e.no_ads,l&&(t.currPage.cauuid=l),t.pstaid_p||(t.pstaid_p=a)},updateLeadPhotoClass:function(e){var t,i,a,n,o,l=this;for(n=0,o=e.length;n<o;n++)(i=(t=e[n]).cover_photo&&t.cover_photo.img)&&((a=100*i.height/i.ratio)<200?t.cover_photo.img=null:i.imageClass=a<400?"Fl-end Mb-20 Mstart-20":a<580?"D-b Mb-20":"desktop"===l.device?"D-b Mb-20 Maw-100":"Mb-20 W-100")},initPage:function(t,i,o,l){var s,d,r,c,u,p,m,g,f,h,y,b,w,k,P,S,I,T;if(t){if(d=(s=this).get("container"),p=t.querySelector(".vv-box"),m=s.ui.enableVerticalVideo,g=(new Date).getTime(),s.pstaid_p=null,s.onceVvRevealed=[],i=i||0,s.pageHasVideo=!1,B.fire("content:shown",{}),s.updateCurrPage(t),(s.ui.enableModalBackfillViewportDetection||s.visibleMeasuresEnabled)&&(s.backfillVideoPlayer=null),(s.ui.enableRelatedVideo||s.ui.enableVideoCluster)&&(s.relatedVideoAutoPlay=s.ui.relatedVideoAutoPlay,s.renderedRelatedVideos=[],s.relatedVideoPlayer=[]),p?s.onceVvRevealed.push(s.initPageAds.bind(s,t,i,o,l)):s.initPageAds(t,i,o,l),s.removeAutoplayAndLazyloadEmbeds(t,i),"mega-modal"===s.ui.mode)s.modalSlideshow=new e.TD.Viewer.Slideshow("modal-slideshow",s);else{u=t.getAttribute("data-lb");try{u=JSON.parse(u),s.slideshow.render(u)}catch(V){}}s.renderYEP(t,g),f="slideshow"===s.currPage.type?"story":s.currPage.type,s.handleTracking(f,!0),p?s.onceVvRevealed.push(s.renderEmbedTypes.bind(s)):s.renderEmbedTypes(),s.ui.c2siframe.enabled&&(s.c2sContainerList=[],s.renderC2SIframe(t,i,Date.now()+"_"+Math.random().toString().substr(2,5))),s.ui.inlineView&&e.Stencil.initAll(t),s.ui.stream.enabled&&(e.Global.on(C,function(e){s.streamCategory=e.category},s),(r=s.ui.stream.config).category=s.streamCategory,c=function(){a.innerHeight+n.body.scrollTop>=n.body.scrollHeight-400&&(s.getRemoteApplet("td-applet-stream",r,t.getElementsByClassName("js-stream-container")[0]),a.removeEventListener("scroll",c))},a.addEventListener("scroll",c),s.config.rendered?setTimeout(c,1):e.Global.once(A,c),e.Global.once(v,function(){a.removeEventListener("scroll",c)})),p?s.onceVvRevealed.push(s.initPageSlotApplets.bind(s,t,i)):(s.initPageSlotApplets(t,i),m?s.vvUtil&&s.vvUtil.initSocial():s.initPageComments(t)),(s.ui.enableRelatedVideo||s.ui.enableVideoCluster&&i+1>=s.numOfItems)&&s.getRelatedVideo(t,i),s.ui.desktopMoments&&s.getDesktopMoments(t,i),s.ui.trending.enabled&&(s.ui.loadAppletDelay?setTimeout(function(){s.getRemoteAppletTrending(t)},parseInt(s.ui.loadAppletDelay,10)):s.getRemoteAppletTrending(t)),s.ui.sports.fantasypromote.enabled&&(s.ui.loadAppletDelay?setTimeout(function(){s.getRemoteAppletFantasyPromote(t)},parseInt(s.ui.loadAppletDelay,10)):s.getRemoteAppletFantasyPromote(t)),s.ui.polyvore.trending.enabled&&"undefined"!=typeof a.thamba&&1===a.thamba&&(s.ui.loadAppletDelay?setTimeout(function(){s.getRemoteAppletPolyvoreTrending(t)},parseInt(s.ui.loadAppletDelay,10)):s.getRemoteAppletPolyvoreTrending(t)),s.visibleMeasuresEnabled&&(s.ui.loadAppletDelay?setTimeout(function(){s.getVisibleMeasures(t)},parseInt(s.ui.loadAppletDelay,10)):s.getVisibleMeasures(t),(h=e.one("#vm-title"))&&e.on("click",e.bind(s.handleVMTitleClick,s),h)),s.ui.enableVerticalVideo&&(t.querySelector(".vv-box")?s.initVerticalVideoPage(t):t.querySelector(".vv-ad")&&s.initVerticalVideoAd(t)),s.adsConfig&&s.adsConfig.promoAds&&s.adsConfig.promoAds.enabled&&s.promoModel&&s.sessionPromoCount<(s.adsConfig.promoAds.totalSessionViews||2)&&(b={},(y=s.adsConfig.promoAds).imageTag&&(b.ads_image_tag=y.imageTag),y.se&&(b.se=y.se),s.promoModel.loadPromo(b,function(t,i){var a,n,o
;!t&&i&&i.app_promo&&i.app_promo.result&&0!==i.app_promo.result.length&&(((a=i.app_promo.result[0]).image||a.origImageAssets)&&a.origImageAssets.forEach(function(e){e&&e.height&&e.width&&e.url&&e.tag===y.imageTag&&(a.image=e)}),a.image&&a.image.height&&a.image.width&&a.image.url&&(a.cpi=1,s.config.ads.promoAds.starRating&&(a.ratings=s.getAppInstallAdRatings(s.config.ads.promoAds.starRating)),n=y.minReviewCount||0,y.enableAppReviewsPerApp&&y.appReviewsPerApp?a.appReviews=s.formatAppReviews(y.appReviewsPerApp,n,a.publisher):y.appReviews&&y.appReviews>n&&(o=y.appReviews,a.appReviews=s.getAppReviewString(o)),s.config.ads.promoAds.asyncBeacon&&a.landingPageUrl&&(a.asyncBeacon=a.clickUrl),a.link=a.landingPageUrl,d.delegate(M,s._onClickPromoAd,".js-promo-link-article",s),dust.render("td-applet-viewer-templates-promo_atomic_sm",{promo:a,i18n:s.i18n,config:s.config},function(t,i){var a,n,o;!t&&i&&(a=s.container.one("#"+Se),n=s.container.one("#"+Ie),o=e.Node.create(i),a&&n&&o&&(a.removeClass("D-n"),n.appendChild(o),s.sessionPromoCount+=1,B.fire("curveball:append",{ads:[o.getDOMNode()]}),setTimeout(function(){s.ads.beaconVisibleAds()},y.beaconTimeout||1e3)))})))})),s.adsConfig&&s.adsConfig.installInAppButton&&s.adsConfig.installInAppButton.enabled&&s.adsConfig.installInAppButton.appStoreUrl&&(w=s.container.one("#"+Ee),k="js-slider-item-"+s.currIndex,w&&k&&(P=n.getElementById(k))&&P.getAttribute&&(S=P.getAttribute("data-id"))&&(w.removeClass("D-n"),d.delegate(M,function(e){var t,i;e.halt(),t=(new Date).valueOf(),i=s.adsConfig.installInAppButton.redirectTimeout||5e3,setTimeout(function(){var e=(new Date).valueOf()-t;e>=i&&e<=i+100&&(a.location=s.adsConfig.installInAppButton.appStoreUrl)},i),a.location="yahoo://article/view?uuid="+S+"&src=web"},"#"+Ee,s))),s.ui.slideshowInline&&"slideshow"===s.currPage.type&&setTimeout(function(){s.inlineSlideshow(d)},100),s.ui.appinstallurl&&((I=s.ui.appinstallurl).indexOf("?")<0&&(I+="?"),s.ui.appinstall.iosurl&&(I+="&$ios_url="+escape(s.ui.appinstall.iosurl)),s.ui.appinstall.androidurl&&(I+="&$android_url="+escape(s.ui.appinstall.androidurl)),window.branchData&&(window.branchData.bid&&(I+="&bid="+escape(window.branchData.bid)),window.branchData.sid&&(I+="&sid="+escape(window.branchData.sid))),s.currPage.uuid&&(T="content="+s.currPage.uuid+"&type=uuid",I+="&context="+escape(escape(T))),window.location&&window.location.pathname&&(I+="&$deeplink_path="+escape("www.yahoo.com"+window.location.pathname),I+="&$canonical_url="+escape("https://www.yahoo.com"+window.location.pathname)),dust.render(Q,{appinstallurl:I,ui:s.ui,i18n:s.i18n},function(t,i){if(i&&!e.one("#AppInstallBtn")){e.one("BODY").append(i);var a=e.Af.rapid&&e.Lang.isFunction(e.Af.rapid.getRapidTracker)?e.Af.rapid.getRapidTracker():null;a&&a.addModules("AppInstallBtn"),e.one("#AppInstallBtn .app-install-btn").on("click",s.onClickAppInstall,s)}})),s.ui.isVideoModal&&s.initVideoModalSlots(t)}},onClickAppInstall:function(e){var t=e.currentTarget,i=t&&t.get("href");i&&(e.halt(!0),a.location=i)},inlineSlideshow:function(t){var i=this,a=t.all(".Image-Tracker"),n=i.currPage.uuid,o={sec:"sshow",g:n,pos:0,slk:"next",p:"img"},l="contentmodification",s="sshow",d=i.getRapid();d&&d.beaconEvent&&(d.beaconEvent(l,o,s),e.one("body").setAttribute("data-imageloader-checkposition",!0),a.each(function(e,t){e.on("load",function(){var e=this.getAttribute("data-index");o.pos=e,0!==e&&d.beaconEvent(l,o,s)})}),e.Stencil.initAll(t))},initPageAds:function(t,i,n,o){var l,s,d,r,c,u,p,m,g,f,h,v,y,b=this,A=t.getAttribute("data-sa"),C=null,w=t.querySelector(".Content-Body"),k=!1;if(A)try{C=JSON.parse(A)}catch(P){}n?b.ads.insertDisplayAds(b.currPage.spaceid,i,C,n,o):b.ui.enableMobileLREC?(l=!1,s=b.currPage.spaceid,d=t.getAttribute("data-type")||"story",b.ui.enableMobileMSPL&&"video"!==d&&(void 0===o&&(o=t.getAttribute("data-site")||null),r=a.pageloadValidAds,c=b.ui.mobileAdMSPLPos||"MSPL",(b.ui.enableMobileMSPLAlwaysFetch||r&&r.indexOf(c)<0)&&(b.ui.enableMobileMSPLSpaceidOerride?(u=o,t.getAttribute("data-hosted")||null||(u="non-hosted"),(p=de(b.ui,["mobileAdMSPLSpaceid",u]))&&(l=!0,s=p)):l=!0)),m=b.getMobileAdsPos(t),g=e.one(b.viewer.node).hasClass("vv"),f=t.getAttribute("data-hosted")||!1,v=!(h=b.adsConfig.smad&&b.adsConfig.smad.enabled)||f||!b.ads.isSMAdCached(),h&&b.ui&&b.ui.mobileAdPosOne&&!g?(f&&(m=b.replaceDisplayAd(m,"LREC-9")),b.ads.setContentType(d),b.insertGeminiAd(d)):b.ui.enableYapjs&&m&&b.ui.mobileAdPosReplaceWithYapAd&&(y=b.ui.mobileAdPosReplaceWithYapAd||"LREC-9",m=b.replaceDisplayAd(m,y)),l?(b.secondFetchAd=!0,b.secondMobileAdPosition=m,b.secondMobileSpaceid=b.currPage.spaceid,b.secondSiteAttrs=C,b.secondSite=o,b.secondIndex=i,m=b.ui.mobileAdMSPLPosId||"MSPL-9"):(b.secondFetchAd=!1,b.secondMobileAdPosition="",b.secondMobileSpaceid="",b.secondSiteAttrs="",b.secondSite="",b.secondIndex=0),v&&b.ads.insertDisplayAds(s,i,C,m,o)):b.ads.insertAds(b.currPage.spaceid,i,w,C),k&&b.getYapAds(t,i)},replaceDisplayAd:function(e,t){var i,a=this;if(a.adsConfig&&a.adsConfig.smad&&a.adsConfig.smad.enabled&&a.ads.isSMAdCached()){for(i=e.split(",");i.indexOf(t)>=0;)i.splice(i.indexOf(t),1);return e=i.join(",")}},insertGeminiAd:function(e){var t,i;this.ui&&this.ui.mobileAdPosOne&&(t="slideshow"!==e?this.ui.mobileAdPosOne:"hl-ad-LREC",i=n.getElementById(t),this.ads.insertGeminiAdsOnly(this.viewer.getCurrItem(),i))},initPageSlotApplets:function(e,t){var i,a,n=this,o=Object.keys(n.ui.slots);for(i=0,a=o.length;i<a;i++)n.ui.loadAppletDelay&&"sidekickdesktop"!==o[i]?setTimeout(n.getHandleSlotApplet(e,o[i],n.ui.slots[o[i]],!1,t),parseInt(n.ui.loadAppletDelay,10)):n.handleSlotApplet(e,o[i],n.ui.slots[o[i]],!1,t)},initPageComments:function(e){var t=this;t.ui.comments.enabled&&(t.ui.loadAppletDelay?setTimeout(function(){t.getRemoteAppletComments(e)},parseInt(t.ui.loadAppletDelay,10)):t.getRemoteAppletComments(e))},initVerticalVideoPage:function(t){var i,n,o,l,s;t&&(n=(i=this).container,o=t.querySelector(we),
s=(l=t.querySelector(".vv-box"))&&l.querySelector(".thumbnail-placeholder .yvp-loading-screen"),i.ui.enableTapTooltip&&(i.tapTooltipTimer=a.setTimeout(i.showTapTooltip.bind(i),1e3)),o&&(o.style.transition&&e.one(o).setStyle("transition",null),s&&e.one(s).setStyle("display","block")),n&&!n.hasClass("not-revealed")&&n.addClass("not-revealed"))},initVerticalVideoAd:function(t){var i=this,a=t&&e.one(t);a&&a.one(".vv-ad-vp")&&i.vvUtil.initGeminiVideoAd(a),i.initRelatedVv()},initVideoModalSlots:function(t){var i=this,a=e.Object.getValue(i.config,["videoModal","slots"])||[];e.Array.forEach(a,function(e,t){i.getRemoteApplet(e.name,e.config,i.container.one("#js-viewer-slot-videoModal-"+t))})},renderModalApplets:function(e,t){var i,a,o,l,s,d,r=this;if(t&&!(t<=1)&&(e||(e=0),t>1&&t>=e))for(l=e;l<t;l++)if(a="js-slider-item-"+l,o=n.getElementById(a))for(s=0,d=(i=Object.keys(r.ui.slots)).length;s<d;s++)r.handleSlotApplet(o,i[s],r.ui.slots[i[s]],!1,l)},updatePage:function(t,i,n,o){var l,s,d,r,c,u,p=this,m=null;if(t){if(i=i||0,B.fire("content:shown",{}),p.updateCurrPage(t),s=t.getAttribute("data-sa"))try{m=JSON.parse(s)}catch(g){}if(l=t.querySelector(".Content-Body"),p.ui.enableModalSponsoredAds||(n?p.ads.insertDisplayAds(p.currPage.spaceid,i,m,n,o):p.ads.insertAds(p.currPage.spaceid,i,l,m)),p.removeAutoplayAndLazyloadEmbeds(t,i),"modal"===p.ui.mode||"mega-modal"===p.ui.mode)p.modalSlideshow=new e.TD.Viewer.Slideshow("modal-slideshow",p);else{s=t.getAttribute("data-lb");try{s=JSON.parse(s),p.slideshow.render(s)}catch(f){}}for(p.ui.enableModalContentPV||p.handleTracking(p.currPage.type,!0),p.renderEmbedTypes(),p.ui.c2siframe.enabled&&p.renderC2SIframe(t,i),p.ui.inlineView&&e.Stencil.initAll(t),d=Object.keys(p.ui.slots),p.ui.enableSidekickAdditionalRendering&&(r=d.indexOf("sidekickdesktop"))>-1&&d.splice(r,1),c=0,u=d.length;c<u;c++)p.handleSlotApplet(t,d[c],p.ui.slots[d[c]],!0,i);p.ui.comments.enabled&&p.getRemoteAppletComments(t),p.ui.trending.enabled&&p.getRemoteAppletTrending(t),(p.ui.enableRelatedVideo||p.ui.enableVideoCluster&&i+1>=p.numOfItems)&&p.getRelatedVideo(t,i),p.ui.polyvore.trending.enabled&&"undefined"!=typeof a.thamba&&1===a.thamba&&p.getRemoteAppletPolyvoreTrending(t)}},showFullContent:function(e){var t,i=de(e,["currentTarget","_node"]);i&&(t=i.parentNode.getElementsByClassName(E))&&(i.classList.add("D-n"),i.classList.add("D(n)"),t[0].classList.remove("D-n"),t[0].classList.remove("D(n)"),this.refreshSidekick(i,!0))},expandFullArticle:function(t){var i,a,n,o,l=de(t,["currentTarget","_node"]);l&&(a=(i=l.parentNode).getElementsByClassName("body-wrapper"),n=i.querySelector(".video-box,.vv-box"),o=i.querySelector('[id^="slideshow-"]'),a&&(l.classList.add("D-n"),l.classList.add("D(n)"),a[0].classList.remove("D-n"),a[0].classList.remove("D(n)"),n&&(n.classList.remove("D-n"),this.renderYEP(n)),this.renderYEP(a[0]),this.refreshSidekick(l,!1),o&&this.inlineSlideshow(e.one(o))))},refreshSidekick:function(t,i){var a,n,o,l,s=this;"mega-modal"===s.ui.mode&&(a=t.getAttribute("data-index"),n=s.ui.sidekickBatchDelay||500,a&&(o=parseInt(a,10),i&&(l={ss_cid:s.beaconData[o]&&s.beaconData[o].ss_cid||""},s.fireClickBeacon("hl-viewer","continue","btn",0,l)),setTimeout(e.bind(s.handleSlotApplet,s,s.allItems[o],"sidekickdesktop",s.ui.slots.sidekickdesktop,!0,o),n)))},slideToRelatedContent:function(e){var t,i;e.preventDefault(),e.stopPropagation(),t=this,i=parseInt(e.currentTarget.getAttribute("data-index"),10),t.viewer.next(i+1)},destroyPage:function(t,i){var n,o,l=this;l.ui.enableVerticalVideo&&(B.fire("vertical-video:destroy-page",{node:t,removeContent:i}),l.container.removeClass("revealed").removeClass("not-revealed")),(n=l.container.one(".js-comments-container [data-applet-guid]"))&&e.fire("td-applet-canvass:destroy",{guid:n.getAttribute("data-applet-guid")}),l.smAdsFooterVisibility&&(a.removeEventListener("scroll",l.smAdsFooterVisibility),l.ads.videoAdPlayers={}),l.adsConfig.smad&&l.adsConfig.smad.enabled&&l.ads.destroySMAdEvents(),Pe=null,l.ignoreScroll=!0,l.scrollingToComments=!1,l.pstaid_p=null,l.destroyBackfillVideos(),l.destroyVideos(i),l.destroyIframes(),l.removeTapToolTip(),l.removeSwipeToolTip(),l.videoManagerUtil&&l.videoManagerUtil.cleanup(),t&&(l.ads.destroyAds(t),l.removeRemoteApplets(t)),i&&(l.videoClickParams=null,l.removeContent(),l.vvUtil&&l.vvUtil.togglePageFix(!1)),l.resetVariables(),l.removeVMEventHandlers(),l.tilesPageVisible&&(l.tilesPageVisible=!1,l.destroyTilesPage()),l.ui.appinstallurl&&e.one("#AppInstallBtn")&&((o=e.Af.rapid&&e.Lang.isFunction(e.Af.rapid.getRapidTracker)?e.Af.rapid.getRapidTracker():null)&&o.removeModule("AppInstallBtn"),e.one("#AppInstallBtn").remove()),e.one("BODY").removeClass(Te),l.cinemaGraphPlayer=null,l.ui.c2siframe.enabled&&(l.c2sContainerList=[])},resetVariables:function(){var e=this;e.allItems=[],e.asideNode=null,e.asideNodeOffsetHeight=0,e.beaconData=[],e.contentAdsRendered=[],e.contentColNode=null,e.videoClusterNode=null,e.contentColTop=0,e.contentColBottom=0,e.contentEndBeaconFired=[],e.contentLRECNodes=[],e.contentModalNodes=[],e.contentSites=[],e.contentUuids=[],e.contentViewBeaconFired=[],e.currAdsIndex=0,e.currIndex=0,e.currSidekickStartIndex=0,e.disableBatchLREC=!1,e.disableSidekick=!1,e.dynamicAnchorNode=[],e.dynamicAnchorNodeTop=[],e.dynamicHeightNode=null,e.dynamicHeightHeight=0,e.sidekickItemCount=0,e.firstContentHosted=!0,e.firstVideoStarted=!1,e.fixedHeaderItems=null,e.headerItems=null,e.headerOffset=[],e.itemsOffset=[],e.itemsOffsetBottom=[],e.latestKnownScrollY=0,e.LrecOffset=[],e.LrecOffsetBottom=[],e.numOfItems=0,e.scrollTimer=-1,e.shouldRenderVideoBackfill=!1,e.sidekickStartIndexes=[],e.sidekickRendered=[],e.slideshowAdPos=null,e.stickyRightRailStart=!1,e.ticking=!1,e.videoBackfillNextPos=0,e.enableModalSingletonLREC=!1,e.ui.label=null,he=null},handleTracking:function(e,t,i,a){var o,l,s,d,r,c,u,p,m,g,f,h,v=this,y=v.contentSites[v.currIndex];i&&(c="js-slider-item-"+v.currIndex,
(u=n.getElementById(c))&&(u.getAttribute?(l=u.getAttribute("data-spaceid"),s=u.getAttribute("data-id"),d=u.getAttribute("data-type"),r=u.getAttribute("data-cauuid"),g=u.getAttribute("data-hosted")):(l=u.spaceid,s=u.id,d=u.type,r=u.cauuid))),o={linkTrack:t,spaceid:l||v.currPage.spaceid||"",type:e||d||"",keys:{pstaid:r||v.currPage.cauuid||s||v.currPage.uuid||"-1",paid:v.currPage.paid||s||v.currPage.uuid||"",pt:"content",hosted:g||v.currPage.hosted||""}},"mega-modal"===v.ui.mode&&v.ui.enableModalContentPV&&(o.keys.pp="modal-scroll",o.keys.prefcnt=v.numOfItems),v.viewer&&v.viewer.node&&(o.containerId=v.viewer.node.getAttribute("id")||""),v.ui.enableVerticalVideo&&v.vvUtil&&v.vvUtil.setPageViewParams(o),a&&(o.keys=v.mergeObjects(a,o.keys)),setTimeout(function(){B.fire("content:pageview",o)},50),"mega-modal"===v.ui.mode&&v.ui.enableModalOmnitureBeacon&&"gma"===y&&(p||(c="js-slider-item-"+v.currIndex,(u=n.getElementById(c))&&u.getAttribute&&(p=u.getAttribute("data-title"),(m=(f=u.getElementsByClassName("Author")[0])&&f.innerHTML)&&m.length>0&&(m=m.replace(/,+$/,"")))),h={pageType:o.type,site_section:y,site_section_new:o.spaceid,site_config:y,author_name:m||"",article_id:o.keys.pstaid,article_name:p||""},v.fireOmnitureBeacon(h))},fireRelatedVideoPV:function(e){var t=this,i={linkTrack:!1,spaceid:t.currPage.spaceid||"",type:"video",keys:{pstaid:e||t.currPage.cauuid||t.currPage.uuid||"-1",paid:e||t.currPage.uuid||"",pt:4,hosted:""}};"mega-modal"===t.ui.mode&&t.ui.enableModalContentPV&&(i.keys.pp="modal-scroll",i.keys.prefcnt=t.numOfItems),t.viewer&&t.viewer.node&&(i.containerId=t.viewer.node.getAttribute("id")||""),setTimeout(function(){B.fire("content:pageview",i)},50)},renderC2SIframe:function(t,i,a){var n,o,l,s,d,r,c,u,p,m,g=this;t&&(n=e.one(t)&&e.one(t).one(".js-c2s-container"))&&(o=t.getAttribute("data-site")||"",l=g.ui.c2siframe.sites.split(","),g.c2sContainerList.push(n),g.c2sUniqId=a||g.c2sUniqId,l.indexOf(o)>=0&&n&&g.currPage.uuid&&(n.removeClass("D-n"),s=i,d=g.currPage.uuid,r=g.contentUuids.indexOf(d),c=g.contentUuids.length,u=g.ui.c2siframe.url+"&uuid="+escape(g.currPage.uuid)+"&sid="+g.c2sUniqId+"&iid="+s,p=+new Date,n.on("load",function(t){var i=+new Date-p;e.Af.Beacon.send("/p.gif?type=c2siframe-loaded&uuid="+d+"&latency="+i)}),m=setTimeout(function(){n.setStyle("display","none"),e.Af.Beacon.send("/p.gif?type=c2siframe-timedout&uuid="+d),m=null},g.ui.c2siframe.timeout||5e3),e.on("message",function(t){if(t._event&&t._event.data&&"c2sDisplay"===t._event.data.event&&t._event.data.articleId===d){var i=t._event.data.terms||[];e.Af.Beacon.send("/p.gif?type=c2siframe-renderd-searchitems&uuid="+d+"&widget="+escape(t._event.data.widget)+"&flavor="+escape(t._event.data.flavor)+"&count="+i.length+"&terms="+escape(JSON.stringify(t._event.data.terms))),m&&clearTimeout(m),i.length>4&&n.setStyle("height","190px"),r===c-1&&n.setStyle("marginTop","50px"),t._event.data.height&&n.setStyle("height",t._event.data.height+"px")}}),n.setAttribute("src",u)))},renderEmbedTypes:function(){var e,t,i=this,a=i.embedConfigObj.embedTypesEnabled;for(e=0,t=a.length;e<t;e++)i.renderEmbed(a[e])},renderEmbed:function(t){var i=this,a=i.embedConfigObj.iframeEmbedUrl,n=i.embedConfigObj.iframeEmbedHost,o=i.embedConfigObj.iframeEmbedMaxPolls,l=i.embedConfigObj[t],s=i.container.all("."+l.className);s.size()&&(s.each(function(t,i){var s,d,r;"<blockquote class="===t.get("parentNode").getAttribute("data-embed-code")&&t.get("parentNode").replace(t),s=l.name+"-"+i,d=e.Node.create('<iframe id="'+s+'" src="'+a+'" onload="'+l.name+"Onload"+i+'()"  frameborder=0 scrolling="no" class="modal-embed-iframe">'),t.replace(d),r=l.name+"Onload"+i,window[r]=function(){var e=JSON.stringify({id:s,markup:t.get("outerHTML"),scriptSrc:l.scriptSrc,maxPolls:o}),i=document.getElementById(s);i.contentWindow.postMessage(e,n)}}),oe||window.addEventListener("message",function(e){var t,i,a,n;e.data&&"string"==typeof e.data&&(i=(t=e.data.split(":"))[0],a=t[1]&&parseInt(t[1],10)+20,a+="px",(n=document.getElementById(i))&&a&&(n.style.height=a),oe=!0)}))},renderYEP:function(t,i){var a,n,o,l,s,d,r,c,p;if(t){if(a=this,"js-slider-item-0"===t.id&&(t=a.viewer.node.getElementsByClassName("js-slider-lead-item")[0]||t),l=t.getElementsByClassName(u),s=t.getElementsByClassName(m).length||t.getElementsByClassName(g).length,a.ui.enableMagazineVideoCtopid&&(d=t.getAttribute("data-sa"))){try{r=JSON.parse(d)}catch(f){}r&&(p=r.match(le))&&p.length>=2&&(c=p[1])}!l.length||s&&!a.ui.enableVerticalVideo||(a.playerJsLoaded||(a.playerJsLoaded=!!a.isPlayerJSLoaded()),"js-slider-item-0"===t.id&&a.ui.cinemaGraph&&a.ui.cinemaGraph.enabled?a.playerJsLoaded?a.initCinemaGraph(t,l,{ctopid:c,navStartTime:i}):(o=Date.now(),e.Get.js(a.js.videoplayer,function(){n=Date.now(),a.playerJsLoaded=!0,a.initCinemaGraph(t,l,{ctopid:c,playerDownloadTime:n-o,navStartTime:i})})):(a.pageHasVideo=!0,a.playerJsLoaded?a.initializePlayer(l,{ctopid:c,navStartTime:i}):t.classList.contains("vv-item")?a.vvUtil.loadPlayerJs(function(){a.initializePlayer(l,{ctopid:c,navStartTime:i})}):(o=Date.now(),e.Get.js(a.js.videoplayer,function(){n=Date.now(),a.playerJsLoaded=!0,a.initializePlayer(l,{ctopid:c,playerDownloadTime:n-o,navStartTime:i})}))))}},addVideoClickParams:function(t,i){if(!i)return t;var a=e.Object.getValue(window.rapidPageConfig,["rapidConfig","keys","_rid"])||"";return t.rapidConfig=t.rapidConfig||{},t.rapidConfig.pageParams=t.rapidConfig.pageParams||{},t.sec=t.sec||i.sec||"",t.ccode=t.ccode||i.ccode||"",t.cpos=t.cpos||i.cpos||"",t.rapidConfig.pageParams._rid=t.rapidConfig.pageParams._rid||a,t.rapidConfig.clickParams=t.rapidConfig.clickParams||i,t},changeDockedPlayer:function(e){he||(he=e),he&&e!==he&&he.isDocked()&&(he.undockVideoPlayer(!0),he=e)},attachInteractEvent:function(t,i){var a=this;t&&(i.docking&&a.ui.enableRelatedVideo&&(t.on(YAHOO.VideoPlatform.API_Events.UI_INTERACT,function(e){
e&&e.srcElement&&("ui_pop_close_clk"===e.srcElement||"ctrl-pause-btn"===e.srcElement?(a.relatedVideoAutoPlay=a.ui.relatedVideoAutoPlay,a._onScroll(null)):"ctrl-play-btn"===e.srcElement&&(a.relatedVideoAutoPlay=!1,a._onScroll(null)))}),a.ui.singleRightRail&&t.on(YAHOO.VideoPlatform.API_Events.PLAYER_DOCKED_CHANGE,function(e){!0===e&&(a.stickyRightRailStart=!1)})),a.ui.enableIframeDocking&&t.on(YAHOO.VideoPlatform.API_Events.PLAYER_DOCKED_CHANGE,function(t){t&&e.one("body").hasClass("videoIframeDocked")&&a.dockedIframeVideo&&(a.dockedIframeVideo.removeClass("vid-iframe-docked").removeClass("vid-iframe-fadein"),e.one("body").removeClass("videoIframeDocked"),a.dockedIframeVideo.setStyles({top:null,right:null,left:null,bottom:null}),a.dockedIframeVideo=null)}),a.ui.enableVideoUndock&&(t.on(YAHOO.VideoPlatform.API_Events.AD_PLAYBACK_START,e.bind(a.changeDockedPlayer,a,t)),t.on(YAHOO.VideoPlatform.API_Events.PLAYBACK_START,e.bind(a.changeDockedPlayer,a,t)),t.on(YAHOO.VideoPlatform.API_Events.PLAYBACK_RESUMED,e.bind(a.changeDockedPlayer,a,t)),t.on(YAHOO.VideoPlatform.API_Events.AD_PLAYBACK_RESUME,e.bind(a.changeDockedPlayer,a,t))))},getDockingDimensions:function(){var t,i,a,n=this,o=70,l=20,s=-1,d=-1,r=!0,c=!0,u=!0,p=!1;return n.ui.videoDockingDisableFadeIn&&(r=!1),n.ui.videoDockingDisableInfoCard&&(c=!1),n.ui.videoDockingpositionTop&&(o=n.ui.videoDockingpositionTop),n.ui.videoDockingpositionRight&&(l=n.ui.videoDockingpositionRight),n.ui.videoDockingpositionLeft&&(s=n.ui.videoDockingpositionLeft),n.ui.videoDockingpositionBottom&&(d=n.ui.videoDockingpositionBottom),n.ui.enableModalVideoDockingAlignRightRail&&(t=null,(t=n.asideNode?n.asideNode:e.one(".modal-aside"))&&(s=t.getDOMNode().getBoundingClientRect().left,l=-1,n.ui.videoDockingWidth=n.ui.videoDockingWidth||300,n.ui.videoDockingHeight=n.ui.videoDockingHeight||168)),i={enableOnScrollDown:u,enableOnScrollUp:p,fadeInAnimation:r,showInfoCard:c,positionTop:parseInt(o,10),positionRight:parseInt(l,10),positionLeft:parseInt(s,10),positionBottom:parseInt(d,10)},n.ui.videoDockingWidth&&n.ui.videoDockingHeight&&(i.width=parseInt(n.ui.videoDockingWidth,10),i.height=parseInt(n.ui.videoDockingHeight,10)),n.ui.videoDockingUseDefaultDimensions&&(a=Math.min(screen.width,screen.height),i.width=Math.floor(.4*a),i.height=Math.floor(.225*a)),i},onResize:function(e){var t=this;t.container.one(".vv-box")&&(t.orientationChanged||setTimeout(function(){t.orientationChanged||(t.resizeVerticalPlayer(),t.vvUtil.rotateAds(t.isLandscape))},10))},onOrientationChange:function(e,t){var i,a,n=this;n.container.one(".vv-box")&&(n.orientationChanged=!0,setTimeout(function(){n.orientationChanged=!1,n.resizeVerticalPlayer(),n.vvUtil.rotateAds(a)},1e3),screen.orientation&&"number"==typeof screen.orientation.angle?i=screen.orientation.angle:"number"==typeof window.orientation&&(i=window.orientation),i!==undefined&&(a=90===i||-90===i||270===i||-270===i,n.isLandscape=a,n.orientationChangeTimeout&&(clearTimeout(n.orientationChangeTimeout),n.orientationChangeTimeout=null),e||t?(n.vvUtil.toggleOtherCards(!1),n.orientationChangeTimeout=setTimeout(function(){n.orientationChangeTimeout=null,n.resizeVerticalPlayer(a),n.vvUtil.toggleOtherCards(!0),n.vvUtil.rotateAds(a)},t||300)):(n.resizeVerticalPlayer(a),n.vvUtil.rotateAds(a))))},attachVvPerVideoEvents:function(e,t){var i=this,a=YAHOO.VideoPlatform.API_Events,n=i.viewer&&i.viewer.getCurrItem(),o=[a.PLAYER_READY,a.PLAYBACK_START,a.PLAYBACK_RESUMED],l=[a.PLAYBACK_START,a.PLAYBACK_RESUMED];i.playerOnceEither(e,o,function(){var t,a,o;i.viewer.getCurrItem()===n&&(0!==(t=e.playlist.getCurrentItemMarkers()||[]).length&&0===t[0].start_time||(t=[{start_time:0}].concat(t)),a=e.controls.getDuration(),_=t.filter(function(e){return e.start_time>=0&&e.start_time<a}),o=i.viewer.getCurrIndex(),i.updateProgressDots(o))}),i.playerOnceEither(e,l,function(){i._onceVerticalVideoPlay&&(i._onceVerticalVideoPlay(),i._onceVerticalVideoPlay=null),i.viewer.getCurrItem()===n&&(i.initRelatedVv(),i.vvUtil.initSocial())})},attachVvPerPlayerEvents:function(t){var i=this,a=i.vvUtil,n=YAHOO.VideoPlatform.API_Events;a.handleOpss(t,n),t.on(n.PLAYBACK_TIME_UPDATE,function(n,o,l){var s,d,r,c,u,p,m,g,f=i.viewer&&i.viewer.getCurrItem(),h=i.container.one(".progress-bar .playing.progress-dot .bar"),v=0;if(f&&f.querySelector('.vv-box[data-vvid="'+n+'"]')){if(s=a.isPlaybackTimeContinuous(o),d=l-o,a.setLastPlaybackTime(o),o>0&&a.hideCurrThumbnail(t),!isNaN(l)){if(i.ui.enableSwipeTooltip&&(d<3.5?i.showSwipeTooltip():i.dismissSwipeTooltip()),0===d)return void i.updateCurrentProgressDot(!1,!0);i.updateCurrentProgressDot(!0,!1),_?(r=!1,c=0,0,u=ye/_.length,p=0,m=0,r=e.Array.some(_,function(e,t){if(o<e.start_time)return!0;c=t}),p=_[c].start_time,m=r?_[c+1].start_time:l,v=u*(c+(o-p)/(m-p)),s&&(g=i.viewer.getCurrItem().querySelector(".vv-box .right-tap-btn"),c===_.length-1?g.classList.add("disabled"):g.classList.remove("disabled"))):v=o/l*ye,v<be&&(v=be)}h&&h.setStyle("left",-ye+v)}})},initializePlayer:function(e,t,i){var a=this;a.VideoPlayer?a.createPlayer(e,t,i):YUI().use(["videoplayer"],function(n){a.VideoPlayer=n.VideoPlatform&&n.VideoPlatform.VideoPlayer||YAHOO&&YAHOO.VideoPlatform&&YAHOO.VideoPlatform.VideoPlayer,a.createPlayer(e,t,i)})},createPlayer:function(t,i,a){var n,o,l,s,d,r,c,u,m,g,f,h,v,y,b,A,C,w,k,P,S,I,T,V,E,R,M,x,O;if(t&&t.length)for(i=i||{},o=(n=this).viewer&&n.viewer.getCurrItem(),s=(l=n.vvUtil&&n.vvUtil.player)&&l.getMediaStore(),d=n.isPlayerEventsReady(),r=n.vvUtil&&n.vvUtil.preRenderVp,g=a||0,f=t.length;g<f;g++){h=t[g],v=e.one(h).ancestor().hasClass("vv-box"),y=!1;try{if(v||(h.innerHTML=""),b=JSON.parse(h.getAttribute("data-"+p))||{},A=n.adsConfig.YVAP.spaceId||b.page_space_id,n.adsConfig.enableVideoSpaceid&&b.video_spaceid&&(A=b.video_spaceid),C=b.video_uuid,w={disableCasting:!0,pageSpaceId:A,comscoreC4:n.getComscoreC4Param(b),playlist:{mediaItems:[{id:C,images:{large:b.thumbnail}}]},pageLatency:{pagePlayerJsDownloadTime:i.playerDownloadTime||0},lang:b.lang,
site:b.site,region:b.region.toUpperCase(),autoplay:b.autoplay||!1,expBucket:N.getContext("bucket")||"",expName:n.ui.videoExpName,mute:n.ui.videoPlayerMute,startscreen:{showButton:!!b.startScreen&&b.startScreen.showButton,showTitle:!!b.startScreen&&b.startScreen.showTitle,showDescription:!!b.startScreen&&b.startScreen.showDescription,showProvider:!!b.startScreen&&b.startScreen.showProvider},ywaSamplingRate:0,YVAP:{accountId:n.adsConfig.YVAP.accountId,playContext:n.adsConfig.YVAP.playContext,timeout:n.ui.yvapTimeout||z}},n.ui.yvapVpaidTimeout&&(w.YVAP.vpaidTimeout=n.ui.yvapVpaidTimeout),i.ctopid&&(w.YVAP.cTopic=i.ctopid),i.navStartTime&&(w.expNavStartTime=i.navStartTime),b.playlist&&b.playlist.id&&(w.playlist.id=b.playlist.id),k=e.one(n.viewer.node).hasClass("vv"),P=n.ui.enableModalVideoDocking&&(!e.UA.safari||"smartphone"===n.device)&&!k&&!n.ui.isVideoModal,n.ui.enableDockingForAllVideos||(P=P&&0===n.currIndex),P&&(w.docking=n.getDockingDimensions(),n.ui.enableRelatedVideo&&(n.relatedVideoAutoPlay=!1)),"mega-modal"===n.ui.mode&&((S=de(n.adsConfig,["modalYVAP",b.site]))&&(w.YVAP.accountId=S),(I=de(n.adsConfig,["modalPlayContext",b.site]))&&(w.YVAP.playContext=I),n.ui.enableModalSingleAutoplay&&(n.firstVideoStarted||!w.autoplay||0!==n.currIndex||n.commentsUuid?w.autoplay=!1:(n.firstVideoStarted=!0,window._perfModalVideoInit&&window._perfModalVideoInit())),n.currPage.no_ads&&(w.YVAP.accountId=!1),i.overrideYvapAcctId&&(w.YVAP.accountId="")),n.ui.videoHidePlaylistUI&&(w.playlistUI={show:!0,position:"hidden"}),b.site&&de(n.adsConfig,["modalSuppressAdContext",b.site])&&(w.CMS||(w.CMS={env:"prod"}),w.CMS.suppressAdContext=!0),w.rapidConfig=n.getVideoRapidConfig(),n.videoClickParams&&n.addVideoClickParams(w,n.videoClickParams),n.ui.videoForceAutoplay&&n.isAutoplayEligible(g)&&(w.autoplay=!0),n.ui.isVideoModal&&n.ui.videoModalHeroPlaylistConf&&(w.playlistUI=n.ui.videoModalHeroPlaylistConf),n.currPage.videoPlaylistId&&(w.playlist.id=n.currPage.videoPlaylistId,w.playlist.mediaItems&&delete w.playlist.mediaItems),n.ui.videoResumePlay&&(T=n.currPage.uuid,(E=(V=e.one("#Stream").one('[data-uuid="'+T+'"]'))&&V.one(".js-player-container")&&V.one(".js-player-container").getAttribute("data-vid-currenttime"))&&(w.startTime=parseInt(E))),v&&(w.expName="giraffe",w.replayonlyendscreen=b.replayonlyendscreen||!1,w.stopAtLastFrame=!0,w.loop=b.loop||!1,w.showControls=b.showControls===undefined||b.showControls,w.YVAP=null,w.connectionType={raw:"dsl",mobile:!1},w.mute=!0,w.CMS=w.CMS||{},w.CMS.format="mp4",w.startscreen={showProvider:!1,showDesc:!1,showButton:!1,showTitle:!1}),v){if(u=n.viewer&&n.viewer.getCurrIndex(),m=e.one(h).one(".vv-player"),R=!1,l&&(R=e.Object.some(r,function(e){return e.player===l})),i.preRender)return void n.initPreRenderVv(i.preRenderIndex,m,{videoUuid:C,playerConfig:w,mediaStore:s});r[u]?(c=r[u],L[g]=c.player,y=!0):l&&!R?(L[g]=l,r[u]={player:L[g],node:n.vvUtil.playerNode},c=r[u],y=!0,l.__vvEventsAttached||(n.attachVvPerPlayerEvents(l),l.__vvEventsAttached=!0)):(L[g]=new n.VideoPlayer(w,s),r[u]={player:L[g],node:m},n.vvUtil&&!n.vvUtil.player&&(n.vvUtil.player=L[g],n.vvUtil.playerNode=m),!0!==w.autoplay&&L[g].once(d.PLAYER_READY,L[g].controls.play.bind(L[g].controls))),n.vvPlayer=L[g],A&&n.vvPlayer.updatePageSpaceId(A),n.vvUtil&&(w.rapidConfig=n.vvUtil.updateRapidConfig(w.rapidConfig,o,A),n.vvPlayer.updateRapidConfig(w.rapidConfig))}else L[g]=new n.VideoPlayer(w);v&&(n.playerOnceEither(L[g],[d.LOADING_END,d.VIDEO_STARTED,d.PLAYBACK_RESUMED],n.vvUtil.hideCurrThumbnail.bind(n.vvUtil,L[g])),M=n.handleTapOverlay.bind(n,h,g),x=e.one(h).next(".tap-overlay"),D[g]=n.attachTapHandler(x.getDOMNode(),M),n.detachReadHandleEvents=x.one(".read-handle").on(["touchstart","touchmove","touchend","touchcancel"],n.handleRevealDrag,n)),(O=e.one(h)).setAttribute("data-index",g),v&&(O=O.one(".vv-player")),y||(O=O.getDOMNode(),L[g].render(O)),n.ui.videoManagerEnabled&&d&&!v&&n.broadcastPlayerReady({instance:L[g],playerNode:O,is_playing:w.autoplay},d),d?(n.attachInteractEvent(L[g],w),n.videoManagerUtil&&n.videoManagerUtil.attachBroadcastDockingChange(L[g],w),v&&(n.attachVvPerVideoEvents(L[g],i),y||n.attachVvPerPlayerEvents(L[g]))):setTimeout(e.bind(n.attachInteractEvent,n,L[g],w),n.ui.videoEventsWaitTime||300),y&&(O!==c.node&&O.replace(c.node),L[g].playlist.getIndexForId(C)<0&&L[g].playlist.addItem(C),L[g].playlist.getCurrentItemId()!==C?(L[g].playlist.setPositionById(C),L[g].config.autoplay||L[g].controls.play()):L[g].controls.play())}catch(_){}if(v){t.length>1&&n.onceVvRevealed.push(n.initializePlayer.bind(n,t,i,1));break}}},initPreRenderVv:function(e,t,i){var a,n=this,o=n.isPlayerEventsReady(),l=i.videoUuid,s=i.playerConfig,d=n.vvUtil.preRenderVp,r=d[e];function c(){var e=n.viewer.getCurrItem(),t=a.playlist.getCurrentItemId();e&&e.querySelector('.vv-box[data-vvid="'+t+'"]')||(a.controls.pause(),n.vvPlayer&&n.vvPlayer.controls&&n.vvPlayer.controls.play())}r?(a=r.player,s.pageSpaceId&&a.updatePageSpaceId(s.pageSpaceId),a.playlist.getIndexForId(l)<0&&a.playlist.addItem(l),a.playlist.getCurrentItemId()!==l&&(a.config.autoplay&&a.once(o.VIDEO_STARTED,c),a.playlist.setPositionById(l)),t!==r.node&&t.replace(r.node),n.vvUtil.hideThumbnail(r.node.ancestor(".js-slider-item"))):(s.autoplay=!1,(a=new n.VideoPlayer(s,i.mediaStore)).config.autoplay&&a.once(o.VIDEO_STARTED,c),a.once(o.PLAYER_READY,function(){n.vvUtil.hideThumbnail(t.ancestor(".js-slider-item"))}),a.render(t),d[e]={player:a,node:t},n.attachVvPerPlayerEvents(a))},initRelatedVv:function(){var e=this,t=e.viewer.getCurrIndex(),i=e.container.all(".js-slider-card:not([data-index="+t+"]) .vv-box .js-video-placeholder");i.each(function(t){var i=t.ancestor(".js-slider-card").getAttribute("data-index");e.createPlayer([t.getDOMNode()],{preRender:!0,preRenderIndex:i})})},initCinemaGraph:function(t,i,a){var n,o,l,s,d,r,c,u,p=this;t?(n=t.getElementsByClassName("body-wrapper"),o=t.getElementsByClassName("Content-Body"),l=-1,
n&&n.length>0&&(l=Array.prototype.indexOf.call(n[0].childNodes,i[0].parentNode))<0&&(l=Array.prototype.indexOf.call(n[0].childNodes,i[0].parentNode.parentNode)),l<0&&o&&o.length>0&&(l=Array.prototype.indexOf.call(o[0].childNodes,i[0].parentNode))<0&&(l=Array.prototype.indexOf.call(o[0].childNodes,i[0].parentNode.parentNode)),l<0||l>2?p.initializePlayer(i,a):(t.getAttribute("data-cauuid")||t.getAttribute("data-id"),t.getAttribute("data-hosted")||null,s=t.getAttribute("data-site")||"",d=t.getElementsByClassName("js-cinemagraph-companion"),r=null,c=null,d&&0!==d.length||((d=document.createElement("div")).setAttribute("class","js-cinemagraph-companion"),i[0].parentNode.parentNode.insertBefore(d,i[0].parentNode.nextElementSibling),d=t.getElementsByClassName("js-cinemagraph-companion")),p.ui.cinemaGraph.blacklistSite.indexOf(s)>=0||!d||0===d.length?p.initializePlayer(i,a):(u=p.ui.cinemaGraph.sectionId[s]||p.ui.cinemaGraph.sectionId.news,p.adsModel.fetchAds({adsType:"STRM_VIDEO",count:1,sectionId:u,spaceId:p.currPage.spaceid},function(n,o){o&&o.length>0?(o[0].origImageAssets&&e.Array.each([].concat(o[0].origImageAssets),function(e){"phone:size=orig_medium"===e.tag&&(o[0].squareImage=e)}),dust.render("td-applet-viewer-templates-cinemagraph_companion_sm",{config:p.config,geminiad:o[0],i18n:p.i18n},function(n,l){var u,m,g,f,h,v,y,b,A,C,w,k;l&&(d[0].innerHTML=l,d[0].style&&(d[0].style["margin-top"]="-10px",d[0].style["margin-bottom"]="10px"),r=t.getElementsByClassName("js-cinemagraph-timer"),c=t.getElementsByClassName("js-cinemgraph-progressbar")),u={autoplay:!0,CMS:{env:"prod",suppressAdContext:!0},comscoreC4:N.getContext("region")+" "+s,continuousPlay:!1,conviva:!1,disableCasting:!0,docking:{},expBucket:N.getContext("bucket")||"",expName:"hp-cinemaGraph",expType:"hp-article-preroll",fullscreenBtn:!0,lang:N.getContext("lang"),loop:!1,mute:!0,pageSpaceId:p.currPage.spaceid,pausescreen:0,playlist:{mediaItems:[{id:"6bf451fd-11f9-37f9-a54c-d73d795839f6"}]},preload:!0,region:N.getContext("region"),replayonlyendscreen:!1,stopBufferingOnPause:!0,settingscreen:!1,showControls:!1,site:s,startscreen:{showButton:0,showDesc:!1,showProvider:!1,showTitle:!1}},e.Object.each(o[0].actionUrls,function(e,t){Array.isArray(e)?o[0].actionUrls[t]=e:o[0].actionUrls[t]=[e]}),e.Object.each(o[0].rules,function(t,i){Array.isArray(t)?e.Object.each(t,function(t){e.Object.each(t,function(e,i){t[i]=parseInt(e,10)})}):e.Object.each(t,function(e,i){t[i]=parseInt(e,10)})}),m=[].concat(o[0].assets.mediaInfo),e.Array.each(m,function(e){e.height=parseInt(e.height,10),e.width=parseInt(e.width,10),e.bitrate=parseInt(e.bitrate,10),e.length=parseInt(e.length,10)}),g=parseInt(m[0].length,10),r&&r.length>0&&(r[0].innerHTML=g),f=null,h=function(){clearInterval(f),r[0].parentNode.classList.add("D-n"),c[0].style.left="100%",c[0].style.visibility="hidden",r[0].innerHTML="",d[0].classList.add("adcomplete"),w&&(w.setStyle("top","90%"),w.setStyle("left","9px"),w.setStyle("height","62px"),w.setStyle("width","62px")),p.cinemaGraphPlayer=null},v=function(){if(r&&r.length>0){var e=g;r[0].innerHTML=g,f=setInterval(function(){(g=Math.floor(e+b.controls.getTimeRemaining()))>0?(r[0].innerHTML=g,c[0].style.left=(100*(e-Math.max(0,g))/e).toFixed(2)+"%"):h()},1e3)}},y={standaloneAd:{beacons:o[0].actionUrls,rules:o[0].rules,gemini:{clickUrl:o[0].clickUrl,mediaInfo:m}}},u.YVAP=y,b=new YAHOO.VideoPlatform.VideoPlayer(u),A=o[0].imprTrackingUrls?JSON.stringify([].concat(o[0].imprTrackingUrls)):"",i[0].innerHTML='<div class="js-cinemagraph-video Pos(a) Bgc(#000) W(100%) T(0) H(100%) Trsp(a) Trsdu(.7s) Trstf(eo) Ov(h)" data-ad-story-beacon="'+o[0].beacon+"\" data-vwrules='"+JSON.stringify(o[0].rules)+"' data-thirdparty-beacons='"+A+"'></div>",C=i[0].getElementsByClassName("js-cinemagraph-video"),w=e.one(C[0]),B.fire("curveball:append",{ads:[C[0]]}),b.on(YAHOO.VideoPlatform.API_Events.AD_PLAYBACK_START,function(){v()}),b.on(YAHOO.VideoPlatform.API_Events.AD_PLAYBACK_STOP,function(){d&&!d[0].classList.contains("adcomplete")&&h(),a.overrideYvapAcctId=!0,p.initializePlayer(i,a)}),k=w.generateID(),b.render("#"+k),p.cinemaGraphPlayer=b})):p.initializePlayer(i,a)})))):p.initializePlayer(i,a)},playerOnceEither:function(e,t,i){var a=[];function n(){a.forEach(function(e){e()}),i()}t.forEach(function(t){a.push(e.once(t,n))})},animateTapBtn:function(t){var i=this,a=e.one(i.viewer.getCurrItem()),n=a.one(".vv-box ."+t+"-tap-btn"),o=n.one(".circle"),l=n.one(".double-arrow");i.startAnimation({element:o,animClassPrefix:"bounceAnim-",maxSteps:1}),i.startAnimation({element:l,animClassPrefix:"bounceAnim-",maxSteps:1})},showTapTooltip:function(){var t,i,a;if(H.get(Y,"tapTooltipShown"))return!1;t=this,i=e.one(t.viewer.getCurrItem()),(a=i.one(".vv-box .tap-overlay"))&&dust.render(te,{i18n:t.i18n,type:"tap"},function(i,n){if(!i){var o=e.Node.create(n);o.appendTo(a),t.fireClickBeacon("giraffe_tap_tooltip","","show",0),t.tapTooltip=o,t.endTapTooltipAnim=t.startAnimation([{element:o,animClassPrefix:"fadeInAnim-",maxSteps:1},{delay:4e3},{element:o,animClassPrefix:"fadeOutAnim-",maxSteps:1}],function(){t.removeTapToolTip(),H.set(Y,"tapTooltipShown",!0),t.fireClickBeacon("giraffe_tap_tooltip","","end",0)})}})},dismissSwipeTooltip:function(){var e=this;e.swipeTooltip&&(e.endSwipeTooltipAnim(),e.endSwipeTooltipAnim=e.startAnimation({element:e.swipeTooltip,animClassPrefix:"fadeOutAnim-",maxSteps:1},function(){var t=e.swipeTooltip.hasClass("ftu");e.removeSwipeToolTip(),e.fireClickBeacon("giraffe_swipe_tooltip",t?"ftu":"","dismiss")}))},dismissTapTooltip:function(){var e=this;e.tapTooltip&&(e.endTapTooltipAnim(),e.endTapTooltipAnim=e.startAnimation({element:e.tapTooltip,animClassPrefix:"fadeOutAnim-",maxSteps:1},function(){e.removeTapToolTip(),H.set(Y,"tapTooltipShown",!0)}),e.fireClickBeacon("giraffe_tap_tooltip","","dismiss",0))},startAnimation:function(e,t){var i,n,o,l,s,d,r,c;return e=Array.isArray(e)?e:[e],i=0,n=null,l=null,s=null,d=null,r=function(){s&&(s.addClass(l+"end"),
s.getDOMNode().removeEventListener("animationend",d),s=null,d=null)},(c=function(){if(i>=e.length)t&&t();else{var u=e[i];if(!u.delay||n){if(n=null,!u.element)return i++,void c();l=u.animClassPrefix||"animation-",s=u.element,d=function(){s.removeClass(l+o),++o>u.maxSteps?(r(),u.onEnd&&u.onEnd(),i++,c()):s.addClass(l+o)},o=1,s.getDOMNode().addEventListener("animationend",d),s.addClass(l+o)}else n=a.setTimeout(c,u.delay)}})(),function(){n&&a.clearTimeout(n),r()}},showSwipeTooltip:function(){var t,i,a,n=this,o=n.viewer.getCurrIndex(),l=n.viewer.getTotal();n.swipeTooltip||o===l-1||(n.tapTooltip&&n.dismissTapTooltip(),n.removeSwipeToolTip(),t=e.one(n.viewer.getCurrItem()),(i=t.one(".vv-box .tap-overlay"))&&(a=H.get(Y,"swipeFtuShown"),dust.render(te,{i18n:n.i18n,type:"swipe",isFtu:!a},function(t,o){var l,s;t||((l=e.Node.create(o)).appendTo(i),n.swipeTooltip=l,s=[{element:l,maxSteps:1,animClassPrefix:"fadeIn-anim-"}],a&&s.push({element:l.one(".circle-arrow"),maxSteps:1,animClassPrefix:"shake-anim-"}),n.endSwipeTooltipAnim=n.startAnimation(s),n.fireClickBeacon("giraffe_swipe_tooltip",a?"":"ftu","show"))})))},removeTapToolTip:function(){var e=this;e.tapTooltipTimer&&(a.clearTimeout(e.tapTooltipTimer),e.tapTooltipTimer=null),e.endTapTooltipAnim&&(e.endTapTooltipAnim(),e.endTapTooltipAnim=null),e.tapTooltip&&(e.tapTooltip.remove(),e.tapTooltip=null)},removeSwipeToolTip:function(){var e=this;e.endSwipeTooltipAnim&&(e.endSwipeTooltipAnim(),e.endTapTooltipAnim=null),e.swipeTooltip&&(e.swipeTooltip.remove(),e.swipeTooltip=null)},resizeVerticalPlayer:function(t){var i,a=this,n=a.container,o={},l=window.innerHeight,s="boolean"==typeof t;t=s?t:a.isLandscape,i=t&&!a.articleRevealed,n&&n.one(".vv-box")&&(a.articleRevealed||("hidden"!==n.getStyle("overflow")&&(o.overflow="hidden"),n.getStyle("height")!==l+"px"&&(o.height=l+"px"),e.Object.isEmpty(o)||n.setStyles(o)),n.all(".vv-box").each(function(n){var o,d,r,c,u,p,m,g,f,h,v,y=n&&n.one(".tap-overlay");n&&y&&((s||i)&&(o=t?window.innerHeight-ve+"px":null,n.setStyles({padding:t?0:null,height:o}),n.one(".js-video-placeholder").setStyle("height",o)),r=(d=n.next(we)).one(".cover"),c=n.get("offsetHeight"),u=l-c-ve,p=n.get("offsetWidth"),m=c+u,g="linear-gradient(0deg, black "+u+"px, rgba(0,0,0,0.18) calc("+u+"px + 3.95vh), rgba(0,0,0,0.09) calc("+u+"px + 4.4vh), rgba(0,0,0,0) calc("+u+"px + 5vh))",f={},v=(h=(u>0?u:0)+ve)+"px",a.articleRevealed&&!s||(y.getStyle("width")!==p+"px"&&(f.width=p+"px"),y.getStyle("height")!==m+"px"&&(f.height=m+"px"),y.getStyle("background")!==g&&(f.background=g),e.Object.isEmpty(f)||y.setStyles(f),n.getStyle("marginBottom")!==v&&n.setStyle("marginBottom",v)),r.getStyle("backgroundColor")!==Ae&&r.setStyle("backgroundColor",Ae),a.articleRevealed&&s?d.setStyle("transform","translate3d(0, -"+(c+h)+"px, 0)"):a.articleRevealed||d.setStyle("transform",null))}),(s||i)&&a.vvUtil.togglePageFix(i),i&&(document.body.scrollTop=0))},broadcastPlayerReady:function(t,i){var a=this,n=t.instance,o=[i.PLAYER_READY,i.PLAYBACK_START,i.PLAYBACK_RESUMED],l=a.viewer&&a.viewer.getCurrItem();n&&(a.playerOnceEither(n,o,function(){a.ui.enableVerticalVideo&&a.viewer.getCurrItem()!==l||e.Global.fire("video-manager:add-remote-player",t)}),a.videoManagerUtil&&!a.ui.enableVerticalVideo&&a.videoManagerUtil.attachEvents(n,i))},isAutoplayEligible:function(e){var t=this,i=t.viewer&&t.viewer.getCurrItem(),a=i&&i.querySelector(".vv-box");return e===(a?1:0)},attachTapHandler:function(t,i,a,n){var o,l,s,d;return a=a||250,n=n||20,d=function(t){var d,r,c;e.one(t.target).ancestor(".social-buttons")||("touchstart"===t.type&&(o=t,s=Date.now()),o&&("touchmove"===t.type?l=t:"touchend"===t.type&&(d=o.touches[0],r=0,l&&(c=l.touches[0],r=Math.sqrt(Math.pow(Math.abs(d.clientX-c.clientX),2)+Math.pow(Math.abs(d.clientY-c.clientY),2))),Date.now()-s<a&&r<n&&i(o,t),o=null,l=null,s=null)))},t.addEventListener("touchstart",d,!1),t.addEventListener("touchend",d,!1),t.addEventListener("touchmove",d,!1),d.remove=function(){t.removeEventListener("touchstart",d,!1),t.removeEventListener("touchend",d,!1),t.removeEventListener("touchmove",d,!1)},d},handleRevealDrag:function(t){var i,a,n,o=this,l=o.container,s=t.currentTarget,d=t.type,r=e.one(o.viewer.getCurrItem()),c=r.one(we);if(s.hasClass("read-handle"))i="read";else if(s.hasClass("back-handle"))i="back";else{if(!s.hasClass("viewer-content-body"))return;i="body"}if("body"===i)if(0===document.body.scrollTop)i="back";else if("touchend"===d||"touchcancel"===d)return o.firstRevealTouch=null,o.lastRevealTouch=null,void(o.initialRevealTranslateY=null);"touchstart"===d?(c.setStyle("transition",Ce),o.firstRevealTouch=t.touches[0],"read"===i?(o.viewer.disable(),o.initialRevealTranslateY=0):"back"===i&&(n=c.getDOMNode().style.transform.split(/,\s/),o.initialRevealTranslateY=n&&n[1]&&parseInt(n[1].replace("px","")))):"touchmove"===d?(o.lastRevealTouch=t.touches[0],o.firstRevealTouch&&"number"==typeof o.initialRevealTranslateY&&(a=o.lastRevealTouch.clientY-o.firstRevealTouch.clientY,("read"===i&&a<=0||"back"===i&&a>=0)&&("back"===i&&l.hasClass("vv-hidden")&&l.removeClass("vv-hidden"),c.setStyle("transform","translate3d(0, "+(o.initialRevealTranslateY+a)+"px, 0)"),t.preventDefault()))):"touchend"!==d&&"touchcancel"!==d||(c.setStyle("transition",null),o.firstRevealTouch&&o.lastRevealTouch&&"number"==typeof o.initialRevealTranslateY&&(a=o.lastRevealTouch.clientY-o.firstRevealTouch.clientY,"read"===i&&a<-30||"back"===i&&a>30?o.toggleArticleReveal("read"===i,!1):(c.setStyle("transform",o.initialRevealTranslateY?"translate3d(0,"+o.initialRevealTranslateY+"px, 0)":null),"read"===i?o.viewer.enable():"back"!==i||l.hasClass("vv-hidden")||l.addClass("vv-hidden"))),o.firstRevealTouch=null,o.lastRevealTouch=null,o.initialRevealTranslateY=null)},peekSlider:function(t){var i,n,o,l,s,d,r,c,u,p=this,m=p.viewer.getCurrIndex(),g=p.viewer.getTotal();p.isSliderPeeking||m===g-1||(i=m+1,n=e.one(p.viewer.node),o=n.one(".js-slider-card[data-index="+m+"]"),
l=n.one(".js-slider-card[data-index="+i+"]"),s=o.getStyle("transform"),d=l.getStyle("transform"),p.isSliderPeeking=!0,t=t||350,r=Date.now(),c=!1,u=function(){var e,i=(Date.now()-r)/t;if(i>=1){if(c)return o.setStyle("transform",s),l.setStyle("transform",d),void(p.isSliderPeeking=!1);c=!0,r=Date.now(),i=0}e=-40*(c?1-i:i),o.setStyle("transform",s+" translate("+e+"px)"),l.setStyle("transform",d+" translate("+e+"px)"),a.requestAnimationFrame(u)},a.requestAnimationFrame(u))},handleTapOverlay:function(e,t,i,a){var n=this,o=i.target.classList;o.contains("read-handle")?(i.preventDefault(),i.stopPropagation(),a&&(a.preventDefault(),a.stopPropagation()),n.toggleArticleReveal(!0)):n.seekToNextMarker(e,t,i)},seekToNextMarker:function(e,t,i){var a,n,o,l,s,d,r,c,u,p,m,g,f=this;if(!f.articleRevealed){for(f.dismissTapTooltip(),a=L[t],o=(n=_||[{start_time:0}]).length,l=a.controls.getCurrentTime(),s=-1,r=0,c=o-1;r<c;r++)if(l>=n[r].start_time&&l<n[r+1].start_time){s=r;break}-1===s&&(s=o-1),u=i.touches[0],p=e.getBoundingClientRect(),(m=(u.clientX-p.left)/p.width<.25?s===n.length-1&&a.controls.getTimeRemaining()<2?s:s-1:s+1)>=o?n.length>0&&f.peekSlider():(g=m<=s,f.animateTapBtn(g?"left":"right"),f.fireClickBeacon("giraffe_viewer",g?"prev":"next","seek",s),m<0&&(m=0),d=n[m].start_time,f.vvUtil.setLastPlaybackTime(d),a.controls.seek(d),a.controls.isPlaying()||setTimeout(function(){a.controls.play()},100))}},toggleArticleReveal:function(t,i){var a,n,o,l,s,d,r=this;r.isSliderMoving||r.articleRevealed===t||(a=r.container,o=(n=e.one(r.viewer.getCurrItem()))&&n.one(we),l=n&&n.one(".tap-overlay"),s=r.vvPlayer&&r.vvPlayer.controls,d=r.ui.videoForceAutoplay,i=void 0===i||i,r.articleRevealed=t,r.revealPauseTimeout&&(clearTimeout(r.revealPauseTimeout),r.revealPauseTimeout=null),t?(a.addClass("revealed").removeClass("not-revealed"),o&&l&&o.setStyles({transform:"translate3d(0, -"+(l.get("offsetHeight")+ve)+"px, 0)"}),a.setStyles({overflow:null,height:null}),r.viewer.disable(),r.revealPauseTimeout=setTimeout(function(){r.revealPauseTimeout=null,s&&s.isPlaying()&&s.pause(),a.addClass("vv-hidden")},1e3),r.onceVvRevealed&&r.onceVvRevealed.length>0&&(r.onceVvRevealed.forEach(function(e){e()}),r.onceVvRevealed=[]),setTimeout(function(){a.one(ke).setStyles({display:"block",transform:"translateY(0)"})},500),r.vvUtil.togglePageFix(!1),d&&L[1]&&L[1].controls&&L[1].controls.play&&L[1].controls.play(),r.vvUtil.resizeItemToBody(n)):(r.resizeVerticalPlayer(),a.removeClass("vv-hidden").removeClass("revealed").addClass("not-revealed"),o&&o.setStyle("transform",null),a.setStyles({overflow:"hidden",height:window.innerHeight+"px"}),r.viewer.enable(),s&&!s.isPlaying()&&s.getDuration()-s.getCurrentTime()>2&&s.play(),i?(a.one(ke).setStyle("transform",null),setTimeout(function(){a.one(ke).setStyle("display",null)},500)):a.one(ke).setStyles({display:null,transform:null}),r.isLandscape&&r.vvUtil.togglePageFix(!0),r.pauseVideos([0])),r.fireClickBeacon("giraffe_viewer",t?"read article":"read video","read",null,{itc:"0"}),r.handleTracking(r.currPage.type,!0,!1,{layout:t?"giraffe":"giraffe2"}),B.fire("vertical-video:reveal",{reveal:t}))},getVideoRapidConfig:function(){var t=this,i={},a=e&&e.Af&&e.Af.rapid,n=a&&a.tracking,o=n&&n.pp,l=de(n,["spaceid"])||de(n,["rapidConfig","spaceid"]);return o&&l&&(!o.pstaid_p&&t.pstaid_p&&(o.pstaid_p=t.pstaid_p),!o.pstaid&&t.currPage&&t.currPage.uuid&&(o.pstaid=t.currPage.uuid),i={pageParams:o,rapid:{},Spaceid:l}),i},initializePlayerWithConfig:function(e,t,i){if(e&&e.length){var a=this;YUI().use(["node","videoplayer"],function(i){var n,o,l,s;for(n=0,o=e.length;n<o;n++){l=e[n];try{l.innerHTML="",t.pageSpaceId=a.currPage.spaceid,t.comscoreC4=a.getComscoreC4Param(t),s=L.length,window._backfillVideoStart&&window._backfillVideoStart(),L[s]=new i.VideoPlatform.VideoPlayer(t),L[s].render(i.one(l)),a.ui.enableModalBackfillViewportDetection&&(a.backfillVideoPlayer=L[s]),a.isPlayerEventsReady()?(a.attachVideoEvents(L[s]),a.visibleMeasuresEnabled&&a.attachVMCustomBeacons(L[s])):(setTimeout(i.bind(a.attachVideoEvents,a,L[s]),a.ui.videoEventsWaitTime||300),a.visibleMeasuresEnabled&&setTimeout(i.bind(a.attachVMCustomBeacons,a,L[s]),a.ui.videoEventsWaitTime||300))}catch(d){}}})}},attachVideoInteract:function(e,t){var i=this,a=e.VideoPlatform.API_Events||YAHOO.VideoPlatform.API_Events;t.player.on(a.UI_INTERACT,function(e){t&&(e&&e.srcElement&&("ctrl-pause-btn"===e.srcElement||"ctrl-mute-btn-on"===e.srcElement?i.relatedVideoAutoPlay=i.ui.relatedVideoAutoPlay:"ctrl-play-btn"!==e.srcElement&&"ctrl-mute-btn-off"!==e.srcElement||(i.relatedVideoAutoPlay=!1)),t.has_interacted=!0)}),i.ui.enableRelatedVideoDocking&&i.ui.enableVideoUndock&&(t.player.on(a.AD_PLAYBACK_START,e.bind(i.changeDockedPlayer,i,t.player)),t.player.on(a.PLAYBACK_START,e.bind(i.changeDockedPlayer,i,t.player)),t.player.on(a.PLAYBACK_RESUMED,e.bind(i.changeDockedPlayer,i,t.player)),t.player.on(a.AD_PLAYBACK_RESUME,e.bind(i.changeDockedPlayer,i,t.player)))},initializeRelatedVideo:function(e,t,i){if(e&&e.length){var a=this;YUI().use(["node","videoplayer"],function(i){var n,o,l,s,d,r;for(n=0,o=e.length;n<o;n++){l=e[n];try{l.innerHTML="",t.pageSpaceId=a.currPage.spaceid,t.comscoreC4=a.getComscoreC4Param(t),d=L.length,L[d]=new i.VideoPlatform.VideoPlayer(t),r=i.one(l).ancestor(".js-relatedvideo-container").get("offsetTop"),s={has_interacted:!1,link:t.playlist.mediaItems[0].link,offsetTop:r,pageview_fired:!1,player:L[d],shareBtnNode:i.one(l).ancestor(".js-relatedvideo-container").one(".ShareBtns").getDOMNode(),title:t.playlist.mediaItems[0].title,uuid:t.playlist.mediaItems[0].id},a.attachVideoInteract(i,s),L[d].render(i.one(l)),a.relatedVideoPlayer.push(s)}catch(c){}}})}},updateSidekickTvTitle:function(e,t){var i,a,o=this,l=n.getElementById(K),s=n.getElementById(J),d="",r="";e&&((i=o.viewerModel.getVideoItemMeta(e))&&i.title&&!d&&(d=i.title),(a=o.viewerModel.itemCache.get(e))&&a.publisher&&(r=a.publisher,a.title&&!d&&(d=a.title))),d&&t&&(d=t+d),l&&(l.innerHTML=d),
s&&(s.innerHTML=r)},attachVideoEvents:function(e){var t=this;e&&t.isPlayerEventsReady()&&(e.on(YAHOO.VideoPlatform.API_Events.AD_PLAYBACK_START,function(e){window._backfillVideoPlaybackStart&&window._backfillVideoPlaybackStart(1),t.updateSidekickTvTitle(t.videoBackfillUuids[t.videoBackfillNextPos],t.adsConfig.modalBackfillAdTitlePrefix)}),e.on(YAHOO.VideoPlatform.API_Events.PLAYLIST_POSITION_CHANGE,function(e){t.videoBackfillNextPos=e}),e.on(YAHOO.VideoPlatform.API_Events.PLAYBACK_START,function(e){window._backfillVideoPlaybackStart&&window._backfillVideoPlaybackStart(0),t.updateSidekickTvTitle(e)}))},fireVMBeacon:function(t,i,a){var n;t&&!a[t]&&(n=(n=i[t]).replace("%%CACHEBUSTER%%",(new Date).getTime().toString()))&&(e.Af.Beacon.send(n),a[t]=!0)},attachVMCustomBeacons:function(e){var t=this,i=t.selectedVideo.beacons,a={};e&&t.isPlayerEventsReady()&&(e.on(YAHOO.VideoPlatform.API_Events.PLAYBACK_TIME_UPDATE,function(e,n,o){n!==o||a.VIDEO_QUARTILE_100?n>.75*o&&!a.VIDEO_QUARTILE_75?t.fireVMBeacon("VIDEO_QUARTILE_75",i,a):n>.5*o&&!a.VIDEO_QUARTILE_50?t.fireVMBeacon("VIDEO_QUARTILE_50",i,a):n>.25*o&&!a.VIDEO_QUARTILE_25&&t.fireVMBeacon("VIDEO_QUARTILE_25",i,a):t.fireVMBeacon("VIDEO_QUARTILE_100",i,a),n>3&&!a.VIDEO_VIEW&&t.fireVMBeacon("VIDEO_VIEW",i,a)}),e.on(YAHOO.VideoPlatform.API_Events.PLAYBACK_START,function(){t.fireVMBeacon("VIDEO_START",i,a)}))},handleVMTitleClick:function(e){var t=this,i=t.selectedVideo.beacons;t.fireVMBeacon("TITLE_CLICK",i,{})},destroyVideos:function(t){var i,a,o,l,s=this,d=n.getElementsByClassName(u),r=s.vvUtil&&s.vvUtil.player;for(i=0,a=L.length;i<a;i++)!t&&s.vvPlayer===L[i]||L[i]===r?s.vvUtil&&s.vvUtil.resetPlaylistPosition(L[i],s.isPlayerEventsReady()):L[i].destroy();for(i=0,a=d.length;i<a;i++)o=e.one(d[i]),s.ui.videoManagerEnabled&&d[i]&&(l=o.generateID(),e.Global.fire("video-manager:remove-remote-player",{guid:l})),D[i]&&D[i].remove(),o.one(".vv-player")||(d[i].innerHTML="");s.detachReadHandleEvents&&(s.detachReadHandleEvents.detach(),s.detachReadHandleEvents=null),L=[],_=null,D=[],s.vvPlayer=null,t&&s.vvUtil&&(e.Object.each(s.vvUtil.preRenderVp,function(e){var t=e.player;t&&r!==t&&t.destroy()}),s.vvUtil.preRenderVp={}),s.ui.enableVerticalVideo&&s.vvUtil&&s.vvUtil.setLastPlaybackTime(null)},removeVMEventHandlers:function(){var t,i=this;i.visibleMeasuresEnabled&&(t=e.one("#vm-title"))&&t.detach("click",i.handleVMTitleClick)},destroyBackfillVideos:function(){var e,t,i,a=this;if(e=a.visibleMeasuresEnabled?n.getElementsByClassName(ne):n.getElementsByClassName(ae))for(t=0,i=e.length;t<i;t++)e[t].innerHTML=""},removeAutoplayAndLazyloadEmbeds:function(t,i){var a,n,l,s,d,r,c=this;if(t)for(a=[].concat(Array.prototype.slice.call(t.getElementsByTagName("iframe")),Array.prototype.slice.call(t.getElementsByTagName("embeds"))),n=t.querySelector(".vv-box"),o.fire("imageloader:delayed",e.one(t)),l=0,s=a.length;l<s;l++)d=a[l].getAttribute("data-lazyload-src"),r=a[l].getAttribute("data-alt-src"),n?a[l].parentNode.classList.contains("video-iframe-container")?a[l].parentNode.parentNode.removeChild(a[l].parentNode):a[l].parentNode.removeChild(a[l]):(c.ui.enableIframeAutoPlayException&&i>0&&d&&(d=d.replace(/autoPlay=true/,"autoPlay=false")),d&&d.match(/autoPlay=true/)&&(c.pageHasVideo=!0),r&&c.ui.removeAutoplayIframes&&(i>0||l>0)?a[l].setAttribute("src",r):d&&a[l].setAttribute("src",d))},destroyIframes:function(){var e,t,i,a;if(t&&t.length)for(i=0,a=(t=n.getElementsByClassName(V)).length;i<a;i++)(e=t[i].getAttribute("src"))&&(t[i].setAttribute("data-src",e),t[i].setAttribute("src","about:blank"))},handleSwipeEnd:function(t,i){var a=this,n=a.swipeFromNodes;n&&0!==n.length&&(n.forEach(function(e){a.destroyPage(e)}),a.ui.enableVerticalVideo&&(a.updateProgressDots(t),n.forEach(function(t){e.one(t).all(".vv-box .right-tap-btn, .vv-box").addClass("disabled")}),a.onOrientationChange(),a.articleRevealed&&a.resetRevealState(),a.container.all(".thumbnail-placeholder").each(function(e){e.ancestor('.js-slider-card[data-index="'+t+'"]')||e.setStyle("display","block")}),a.onceVvRevealed=[],H.set(Y,"swipeFtuShown",!0)))},handleSwiping:function(e,t,i,a,n){var o,s,d,r,c;n=void 0===n||n,s=(o=this).container,d=o.ui.enableVerticalVideo,r=o.viewer.getTotal(),s&&i&&a&&(e!==t&&(o.swipeFromNodes=o.swipeFromNodes||[],o.swipeFromNodes.push(a),d&&(o.updateCurrentProgressDot(!1,!1),s.hasClass("revealed")&&s.removeClass("revealed"),s.hasClass("not-revealed")||s.addClass("not-revealed"),s.hasClass("vv-hidden")&&s.removeClass("vv-hidden"),o.vvUtil.shiftPlayers(t,e)),c=i.getAttribute("data-type"),n&&"ad"!==c&&B.fire("content:navigate",{uuid:i.getAttribute("data-id")||"",url:i.getAttribute("data-link")||"",title:i.getAttribute("data-title")||"",dir:e>t?"forward":"backward",guid:o.currPage.listId})),o.ui.relatedContent&&o.ui.relatedContent.enabled||d||e>=r-l-1&&o.viewerModel.fetchItems(o.currPage.listId,null,null,function(e,t){t&&o.renderContentList(t,!0)}))},onLightboxClose:function(e){e?(B.fire("content:hide",{list:this.currPage.listId,uuid:this.currPage.uuid}),B.fire("content:navigate",{dir:"backward",url:"/"})):this.handleTracking(this.currPage.type,!1)},onLightboxOpen:function(e){var t=this,i=t.currPage.uuid,a={g:i,pos:0};t.pauseVideos(),t.updateShare(e.getAttribute("data-share-img")),t.renderYEP(e),"mega-modal"!==t.ui.mode&&t.handleTracking("slideshow",!1),Pe=document.getElementById("LightboxContainer-Viewer"),t.fireClickBeacon("sshow","next","img","",a)},onLightboxSwipe:function(){this.handleTracking("slideshow",!1),this.destroyVideos()},onLightboxSwipeEnd:function(e,t){var i=this,a=i.currPage.uuid,n={g:a,pos:t};i.updateShare(e.getAttribute("data-share-img")),i.renderYEP(e),i.fireClickBeacon("sshow","next","img","",n)},updateShare:function(e){e&&B.fire("content:updateShareInfo",{thumbnailUrl:e,title:this.currPage.title,url:this.currPage.link,uuid:this.currPage.uuid})},getFallbackItem:function(e,t){var i=this,o=i.viewerModel,l=o.getItemMeta(e,t),s=l&&l.link||a.location.href,d={id:t,link:s,
title:l&&l.title||n.title,noContent:!0};return d},getRemoteAppletTrending:function(e){var t,i,a,n,o;e&&(i=(t=this).ui.trending.applet,a=e.getAttribute("data-cauuid")||e.getAttribute("data-id"),n=e.getElementsByClassName("js-trending-container")[0],o={categoriesEnabled:{celebrity:"celebrities",entertainment:"celebrities",news:"news",frontpage:"news",sports:"sports"}[e.getAttribute("data-site")||null]||"slingstone",uuid:a,bucket:N.getContext("bucket")||"",ui:{groupSize:10,mainTabCategory:"trending news",trendingItemsMinCount:10,titleEnabled:!0,titleKey:"TRENDING_NOW",inlineTnEnabled:!0,sportsTitleKey:"INLINE_TN_SPORTS",newsTitleKey:"INLINE_TN_NEWS",celebsTitleKey:"INLINE_TN_STARS"}},t.getRemoteApplet(i,o,n))},getRemoteAppletFantasyPromote:function(t){var i,a=this,n=e.one(t),o=a.ui.sports.fantasypromote&&a.ui.sports.fantasypromote.applet;o&&n&&(i=n.one("#hl-modal-sports-fantasypromote"))&&i.getDOMNode()&&a.getRemoteApplet(o,{},i.getDOMNode())},getRemoteAppletDiscussion:function(e,t){var i,a=this,n=a.ui.discussion&&a.ui.discussion.applet;n&&(i=e.one(t))&&!e.one(".applet-discussion")&&(t==="."+r&&i.removeClass("D-n"),a.getRemoteApplet(n,{},i))},getRemoteAppletPolyvoreTrending:function(e){var t,i,a,o;e&&(i=(t=this).ui.polyvore.trending.applet,a=n.getElementById("hl-modal-pv-trending"),o={categoriesEnabled:"polyvoreStyle,polyvoreLookForLess",polyvoreTrendingEnabled:!0,ui:{titleEnabled:!0,giftsEnabled:!1,categorizationEnabled:!1,groupSize:6,trendingItemsMinCount:6,mainTabCategory:"polyvorestyle",secondTabEnabled:!0,secondTabTitleKey:"LOOKS_FOR_LESS",titleKey:"TRENDING_STYLES",secondTabCategory:"polyvorelookforless",secondTabIcon:"IconTag"},polyvore:{utmOverride:{polyvorestyle:{utm_campaign:"trending_styles_ab"},polyvorelookforless:{utm_campaign:"looks_for_less_ab"}}}},t.getRemoteApplet(i,o,a))},getVisibleMeasures:function(t){var i,a,o,l,s,d,r,c,u,p,m,g,f,h;t&&(i=this,a=t.getElementsByClassName(ne),s=!1,r=i.ui.visibleMeasures.videos,c=Math.floor(Math.random()*r.length),u="visible-measures",p=!0,f=n.getElementById("vm-title"),h=i.getVideoRapidConfig()||{},a&&(i.selectedVideo=r[c],l=i.contentSites[0]||"news",(o=t.getElementsByClassName("vm-container")[0]).className=o.className.replace("D-n",""),o.className=o.className.replace("D(n)",""),i.flashEnabled||(p=!1,s=!0),d={playlist:{mediaItems:[{id:i.selectedVideo.uuid}]},lang:N.getContext("lang")||"en-US",site:l,region:N.getContext("region")||"US",autoplay:!0,disableCasting:!0,expName:u,expType:"visible-measures-autoplay",expBucket:N.getContext("bucket")||"",sec:"vm-vid",html5:s,iframeRender:p,mute:!0,loop:!1,startscreen:{showProvider:!1,showDesc:!1,showButton:!0,showTitle:!0},pausescreen:!1,continuousPlay:!1,rapidConfig:h,replayonlyendscreen:!0,width:q,height:G,ywaSamplingRate:0},f&&(f.innerHTML='<a target="_blank" href="'+i.selectedVideo.url+'">'+i.selectedVideo.title+"</a>"),i.playerJsLoaded||(i.playerJsLoaded=!!i.isPlayerJSLoaded()),i.playerJsLoaded?i.initializePlayerWithConfig(a,d):(m=Date.now(),e.Get.js(i.js.videoplayer,function(){g=Date.now(),i.playerJsLoaded=!0,i.initializePlayerWithConfig(a,d,g-m)}))))},getRemoteAppletComments:function(t,i){var n,o,l,s,d,r,c,u,p,m=this;t&&(n=t.getAttribute("data-hosted")||null,o=m.ui.comments_allow_supression&&"false"===t.getAttribute("data-cmtallowed"),!n&&!m.ui.comments.offnet.enabled||o||(l=t.getAttribute("data-share-img")||"",s=m.ui.comments.applet,d=t.getAttribute("data-cauuid")||t.getAttribute("data-id"),r=t.getElementsByClassName("js-comments-container")[0]||m.container.one(".js-comments-container"),c=t.getAttribute("data-site")||null,u=t.getAttribute("data-type")||null,p={alphatar:m.ui.alphatar,autoShow:this.commentsUuid===t.getAttribute("data-id")?1:0,bcmt:e.QueryString.parse(a.location.search.slice(1)).bcmt,bucket:N.getContext("bucket"),canvassFullScreen:m.ui.comments.canvassFullScreen,commentsConfig:m.ui.comments||{},communityBar:m.ui.comments.communityBar,commentsNamespace:t.getAttribute("data-commentsnamespace"),enableCommentsWrite:m.ui.comments_writes_enabled,enableMyComments:m.ui.comments.enableMyComments,initialNumCommentsToLoad:m.ui.comments.initialNumCommentsToLoad||0,lang:m.context.lang,leadModal:m.ui.leadModal,prid:m.context.rid,property:m.allItems&&m.allItems.length>1?"news":c,proxy:m.ui.comments.proxy,publisher:"en-US"===m.context.lang?"homepage-en-US":"news-"+m.context.lang,region:m.context.region,shareImage:l,spaceid:t.getAttribute("data-spaceid")||m.currPage.spaceid,title:t.getAttribute("data-title"),type:u,url:t.getAttribute("data-link"),uuid:d,yahooApp:m.ui.comments.yahooApp,showDisclaimer:m.ui.comments.showDisclaimer},e.TD.Viewer.Comments&&m.js.comments?(p.device=m.device,p.js=m.js.comments,p.rapid=m.getRapid(),new e.TD.Viewer.Comments(p,r,i)):m.getRemoteApplet(s,p,r,i)))},scrollToComments:function(t){var i=this,n=t.target.ancestor(".js-slider-item",!1,"viewer-wrapper"),o=n.one(".js-comments-container");t.preventDefault(),o&&(e.later(300,this,function(){i.scrollingToComments=!0,a.scrollTo(0,o.getY()-67),setTimeout(function(){i.scrollingToComments=!1},0)}),e.fire("td-applet-canvass:open",{contextUuid:n.getData("cauuid")||n.getData("id")}))},handleShareClick:function(e){var t=e.target.ancestor("a",!0,".ShareBtns"),i=0===e.clientX;t&&!i&&t.blur()},getFederationAttibute:function(e,t){var i,a,n,o,l;if(!t||!t.length)return[];for(a=[],n=0,o=t.length;n<o;n++)l=t[n],(i="data-id"===e&&l.getAttribute("data-cauuid")||l.getAttribute(e))&&(a=a.concat(i));return a},calArticleHeight:function(e){var t,i=e.getElementsByClassName("body-wrapper"),a=0;return i&&i.length>0&&(a=i[0].offsetHeight),(t=e.getElementsByClassName("Headline-Box"))&&t.length>0&&(a+=t[0].offsetHeight),a},calAllArticleHeight:function(e){var t,i,a,n;if(!e||!e.length)return 0;for(t=this,i=0,a=0,n=e.length;a<n;a++)i+=t.calArticleHeight(e[a]);return i},renderRelatedVideoPlayer:function(t,i,a,n){var o,l,s=this,d=s.getVideoRapidConfig()||{},r={playlist:{mediaItems:t},lang:N.getContext("lang")||"en-US",site:a,
region:N.getContext("region")||"US",autoplay:!1,continuousPlay:!1,disableCasting:!0,expName:"highlander",expType:"relatedvideo",expBucket:N.getContext("bucket")||"",sec:"relv",YVAP:{accountId:i,playContext:"default",timeout:z},mute:s.relatedVideoAutoPlay,loop:!1,rapidConfig:d,replayonlyendscreen:!0,startscreen:{showProvider:!1,showDesc:!1,showButton:!0,showTitle:!0},stopBufferingOnPause:!0,pausescreen:!1,ywaSamplingRate:0};s.ui.enableRelatedVideoDocking&&!e.UA.safari&&(r.docking=s.getDockingDimensions()),s.playerJsLoaded||(s.playerJsLoaded=!!s.isPlayerJSLoaded()),s.playerJsLoaded?s.initializeRelatedVideo(n,r):(o=Date.now(),e.Get.js(s.js.videoplayer,function(){l=Date.now(),s.playerJsLoaded=!0,s.initializeRelatedVideo(n,r,l-o)}))},getRelatedVideo:function(t,i){var n,o,l,s,d,r,c,u,p,m,g,f,h,v=this;!t||i>=fe&&!v.ui.enableVideoCluster||v.relatedVideoIndices&&v.relatedVideoIndices.length>0&&v.relatedVideoIndices.indexOf(""+i)<0||(n=t.getAttribute("data-cauuid")||t.getAttribute("data-id"),o=t.getAttribute("data-hosted")||null,c=t.getAttribute("data-site")||"",u=t.getAttribute("data-entities"),p=v.firstItemLabel&&v.firstItemLabel.toLowerCase(),!c&&ie[p]&&(c=ie[p]),m=c||"frontpage",f=!1,h="",(g=de(v.adsConfig,["modalYVAP",c]))||(g=de(v.adsConfig,["modalYVAP","default"])),!v.ui.enableVideoCluster||i+1<v.numOfItems?(l=document.getElementsByClassName("js-relatedvideo-container"),s=l.length>i&&l[i]||null):(l=document.getElementsByClassName("js-video-cluster"),s=l.length>0&&l[0]||null,f=v.ui.enableRelatedVideoInterests),s&&(!v.ui.enableVideoCluster||i+1<v.numOfItems?(d=s.getElementsByClassName("js-relatedvideo-placeholder"),r=e.one(s)):s=e.one(s),!o&&v.ui.disableRelatedVideoOffnet||(!o&&n.indexOf("SS-")<0&&(n="SS-"+n),v.ui.enableRelatedVideoSource&&(h=o?"relatedvideo":"slingstone"),v.relatedVideoModel.loadRelatedVideos({uuid:n,site:c,entities:u,source:h,use_interests:f},function(t,n){var o,l,c;!t&&n&&n.length&&(n=e.Array.filter(n,function(e){return v.contentUuids.indexOf(e.id)<0&&v.renderedRelatedVideos.indexOf(e.id)<0}))&&n.length&&(v.renderedRelatedVideos.push(n[0].id),!v.ui.enableVideoCluster||i+1<v.numOfItems?(r.removeClass("D-n"),o=[{id:n[0].id,title:n[0].title,link:n[0].link}],n.length>1&&!v.ui.singleRightRail&&(l=n.slice(1,4),e.Array.each(l,function(e){l.push(e)}),dust.render($,{items:l},function(e,t){t&&r.one(".aside-videos").setContent(t)})),dust.render("td-applet-viewer-templates-share_btns_mega",{enableAllShare:!0,id:n[0].id,title:n[0].title,link:n[0].link,i18n:v.i18n,ui:v.ui},function(e,t){t&&r.one(".relvideosharebtns").setContent(t)}),v.renderRelatedVideoPlayer(o,g,m,d),r.one(".js-relatedvideo-title").setContent(n[0].title),r.one(".js-relatedvideo-summary").setContent(n[0].summary),r.one(".js-relatedvideo-publisher").setContent(n[0].publisher)):(v.dynamicHeightHeight>=0&&(c=Math.round((v.dynamicHeightHeight+290)/580),n=n.slice(0,c)),n.length>0&&v.videoClusterMaxItems>0&&(n=n.slice(0,v.videoClusterMaxItems)),n.length>0&&dust.render(X,{enableAllShare:!0,items:n,i18n:v.i18n,ui:v.ui},function(e,t){t&&(v.videoClusterNode=s,s.removeClass("D-n"),s.setContent(t),s.all(".js-relatedvideo-container").each(function(e,t){var i=e.getData("uuid");v.renderRelatedVideoPlayer([{id:i,title:n[t].title,link:n[t].link}],g,m,[e.one(".js-relatedvideo-placeholder")])}),v.ui.singleRightRail&&(v.updateContentOffset(),v.updateLrecsOffset(),a.scrollBy(0,-1)))})),v.ui.singleRightRail&&(v.updateContentOffset(),v.updateLrecsOffset(),a.scrollBy(0,-1)))}))))},getDesktopMoments:function(i,n){var o,l,s,d=this,r=a.wafer&&a.wafer.utils||null,c=i.getAttribute("data-site")||"",u=e.Object.getValue(window.rapidPageConfig,["rapidConfig","keys","_rid"])||"";if(r){if(o=d.adsConfig.dmad.xhrpath+"?ctrl=DesktopMomentsAd&m_id=tdv2-applet-sponsored-moments.desktop&m_mode=json&rid="+escape(u),l=d.adsConfig.dmad.sectionid.news,c&&d.adsConfig.dmad.sectionid[c]&&(l=d.adsConfig.dmad.sectionid[c]),c&&d.adsConfig.dmad.siteBlackList&&d.adsConfig.dmad.siteBlackList.indexOf(c)>=0)return;o+="&spaceId="+escape(d.currPage.spaceid)+"&site="+escape(c)+"&sectionId="+escape(l),d.adsConfig.dmad.blacklistSpaceid&&(o+="&blacklistSpaceid="+escape(d.adsConfig.dmad.blacklistSpaceid)),s=d.adsConfig.dmad.floorprice.news,c&&d.adsConfig.dmad.floorprice[c]&&(s=d.adsConfig.dmad.floorprice[c]),s&&(o+="&adFloorPrice="+escape(s)),r.fetchWithCache(o,{cache:0}).then(function(t){var i,n,o=e.one("#dmad-0");t.html&&t.html.match("js-desktop-moments")&&(d.ads.onValidDesktopmoments(),o&&((i=o.ancestor(".lrec-before-loading"))&&i.removeClass("lrec-before-loading"),o.setContent(t.html),a.wafer&&a.wafer.base&&a.wafer.base.sync(o.getDOMNode()),(n=e.one("#dmad-1"))&&(n.setContent(t.html),n.one(".wafer-beacon").removeClass("wafer-beacon"),a.wafer&&a.wafer.base&&a.wafer.base.sync(n.getDOMNode()))))},function(i){e.Af.Beacon.error(t,i,{code:"desktopmoments_failed"})})}},downloadYapjs:function(t){var i,a=this;a.ui.yapjs.baseURL&&(a.yapjsDownloaded?t&&t():(i=a.ui.yapjs.baseURL+a.ui.yapjs.version+"/js/yap-client-min.js",e.Get.js(i,function(){a.yapjsDownloaded=!0,t&&t()})))},initializeYapAds:function(){var t={apikey:this.ui.yapjs.apikey,spaceId:this.currPage.spaceid,positions:{articleLREC:{id:"yapjs-ad-1",unitcode:this.ui.yapjs.unitcode,width:300,height:250}}};window.YAHOO&&window.YAHOO.YAP&&(window.YAHOO.YAP.AdManager.init(t),window.YAHOO.YAP.AdManager.registerAdfetchCb(e.bind(this.fetchYapAds,this)),window.YAHOO.YAP.AdManager.registerNativeRender("articleLREC",e.bind(this.renderYapNativeAd,this)),window.YAHOO.YAP.AdManager.loadAds(["articleLREC"],{spaceId:this.currPage.spaceid}))},fetchYapAds:function(e,t){this.yapadModel.loadAds(e,t)},getYapAds:function(t,i){t&&("undefined"==typeof window.YAHOO.YAP?this.downloadYapjs(e.bind(this.initializeYapAds,this)):window.YAHOO.YAP.AdManager.loadAds(["articleLREC"],{spaceId:this.currPage.spaceid}))},renderYapNativeAd:function(e,t){dust.render(Z,{item:e,i18n:this.i18n,ui:this.ui},t)},getHandleSlotApplet:function(e,t,i,a,n){var o=this
;return function(){o.handleSlotApplet(e,t,i,a,n)}},getSidekickBatchCount:function(e){var t,i,a,n,o=this,l=0;for(a=0,n=e.length;a<n;a++)t=e[a].getAttribute("data-hosted")||null,i=e[a].getAttribute("data-type")||null,t&&(!i||"video"!==i&&"slideshow"!==i)||l++;return l>1&&o.ui.sidekickMinBatchCountOffnet>0?o.ui.sidekickMinBatchCountOffnet:o.ui.sidekickMinBatchCount},handleSlotApplet:function(t,i,a,o,l){var s,d,c,u,p,m,g,f,h,v,y,b,A,C,w,k,P,S,I,T,V,E,R,M,O,L,D,_,N,B,H,Y,U,j,F;if(t&&a&&a.name&&a.condition&&(s=this,c=e.one(".viewer-wrapper"),u=s.allItems,p=s.numOfItems,m=a.condition.split(":"),g=t.getAttribute("data-entities"),f=t.getAttribute("data-site"),y=0,b=0,A=0,C=0,w=s.viewerModel,I=a.config&&a.config.estHeight||100,E=500,L="",D=0,_="",N=s.ui.relatedOlympicsYCTList&&"string"==typeof s.ui.relatedOlympicsYCTList?s.ui.relatedOlympicsYCTList.split(","):[],B=["summer olympics","olympics"],"all"===m[0]||t.getAttribute("data-"+m[0])===m[1])){if("mega-modal"===s.ui.mode&&"readMore"===i?d=n.getElementsByClassName("js-viewer-slot-"+i)[0]:"mega-modal"===s.ui.mode&&"sidekickdesktop"===i&&s.ui.enableSidekickAdditionalRendering?(T=s.ui.singleRightRail?s.sidekickRendered[l]?n.getElementById("modal-sidekick-following-"+l):n.getElementById("modal-sidekick-"+l):s.sidekickRendered[l]?t.getElementsByClassName("modal-sidekick-following")[0]:t.getElementsByClassName("modal-sidekick")[0],d=T&&T.getElementsByClassName("js-viewer-slot-"+i)[0]):d=t.getElementsByClassName("js-viewer-slot-"+i)[0],s.ui.link_out_allowed&&(a.config.link_out_allowed=!0,a.config.bypassmodal_whitelist_enabled=s.ui.bypassmodal_whitelist_enabled),a.config.rdsig_enabled=s.ui.rdsig_enabled,a.config.offnetDeeplink=s.ui.offnetDeeplink,a.config.device=s.device,R=s.getFederationAttibute("data-id",u),"readMore"===i){if(!d||d.childNodes.length||o)return;k=w.getItemMeta(s.currPage.listId,s.currPage.uuid),a.config.contentId=R.join()||s.currPage.uuid,delete a.config.category,delete a.config.categoryName,k&&k.categoryData&&(P=k.categoryData[0])&&parseFloat(P.score)>=parseFloat(s.config.ui.readMoreMinScore)&&(a.config.category=P.term,a.config.categoryName=P.label),"gma"===f&&s.ui.enableReadMoreWithGMA&&s.ui.gmaCategoryTag&&(a.config.category=s.ui.gmaCategoryTag),s.ui.enableRelatedOlympics&&(s.currPage.spaceid===s.ui.relatedOlympicsSpaceid?L=N.length?"YCT:"+N.join():"YCT:001001110,001001111":k&&k.categoryData&&Array.isArray(k.categoryData)&&e.Array.each(k.categoryData,function(e){-1!==B.indexOf(e.label.toLowerCase())&&e.score>D&&(L=e.term,D=e.score)}),L&&(a.config.category=L))}else if(a.config.category=f,a.config.uuid=s.currPage.uuid,g&&(a.config.interestString=g),s.config.ui.useContentSite&&f&&x.indexOf(f)>-1&&(a.config.site=f,a.config.blending_enabled="1"),s.ui.gemini_blockedsites&&s.ui.gemini_blockedsites.length>0&&s.ui.gemini_blockedsites.indexOf(f)>-1&&("sidekickdesktop"===i?a.config.mode="fallback":"sidekick"===i&&(a.config["ads.enabled"]="0")),"sidekick"===i&&a.config.promoAds&&a.config.promoAds.enabled&&(a.config.promoAds.userAgent=e.UA.safari?"ios":e.UA.android?"android":undefined),"sidekickdesktop"===i&&"mega-modal"===s.ui.mode){if(a.config.blending_enabled="1",h=s.calArticleHeight(t),a.config.spaceid=s.currPage.spaceid,s.ui.singleRightRail&&s.ui.skipSecondSidekick&&1===l)return;if(s.disableStickyLREC2&&l>2)return;if(s.sidekickInlineVideo&&(a.config.inline_video=!s.pageHasVideo),s.ui.revShareEnabled&&(a.config.rev_share_enabled=!0,a.config.pageType=s.ui.revSharePageType,a.config.page_content_type=s.currPage.type,a.config.page_design=s.ui.revSharePageDesign,a.config.app_name=s.ui.revShareAppName,-1!==s.config.userSegment&&(a.config.user_segment=s.config.userSegment)),a.config.layout_enabled&&window.segBlob&&window.segBlob.layout&&(a.config.layout_type=window.segBlob.layout,a.config.in_viewport="1"),a.config.adx_passback_segment&&window.adxPassback&&(a.config.user_segment=a.config.adx_passback_segment,a.config.layout_type=a.config.adx_passback_layout,a.config.in_viewport="1"),s.ui.enableSidekickDynamicHeight)if(M=s.MONadEnabled&&0===l&&o?t.getElementsByClassName("hl-sda-holder-"+l)[0]:null,Y=s.ui.estSideAdsHeight,l>0&&l<=2?Y=s.ui.estSideLRECAdsHeight:l>2&&(Y=0),S=M&&M.style&&M.style.height?parseInt(M.style.height)+10:s.disableBatchLREC&&o?s.ui.estSideNoAdsHeight||50:Y,(V=s.ui.singleRightRail?n.getElementById("modal-sidekick-mon-"+l):t.getElementsByClassName("modal-sidekick-mon")&&t.getElementsByClassName("modal-sidekick-mon")[0])&&(S+=V.offsetHeight),s.enableModalSingletonLREC&&(U=n.getElementById("hl-ad-LREC2-1"))&&(S+=U.offsetHeight),s.enableModalSingletonJTC&&(j=n.getElementsByClassName(r))&&j.length>0&&(S+=void 0===(F=j[0].offsetHeight)?me:Math.max(F,me)),b=Math.max(0,Math.round((h-S)/I)),s.ui.singleRightRail&&l<3&&s.ui.sidekickMinBatchCount>0&&(s.sidekickItemCount||(s.sidekickItemCount=s.getSidekickBatchCount(u)),b=s.sidekickItemCount),y=p>1?Math.min(b,s.ui.sidekickMaxBatchCount):b,y-=s.sidekickStartIndexes[l],s.ui.enableSidekickFederationCall){if(s.disableSidekick)return;if(o)return void(y>0&&s.currSidekickStartIndex&&(s.firstContentHosted||(E=l?1e3*l:1e3),s.ui.enableSidekickAdditionalRendering&&(E=0),s.ui.singleRightRail&&T&&T.className.indexOf("D-n")>=0&&(T.className=T.className.replace("D-n","")),setTimeout(function(){c.fire("sidekick:showmore",{container:e.one(d),batchStartIndex:s.currSidekickStartIndex,batchEndIndex:s.currSidekickStartIndex+y}),s.sidekickStartIndexes[l]=s.sidekickStartIndexes[l]+y,s.sidekickRendered[l]=!0,s.currSidekickStartIndex=s.currSidekickStartIndex+y,s.ui.singleRightRail&&s.updateLrecsOffset()},E)));if(a.config["ui.enableBatchRender"]=!0,a.config["ui.batchStartIndex"]=0,O=p>1?Math.max(y,1):y,s.currPage.uuid===s.commentsUuid&&O<1&&(O=1),a.config["ui.batchEndIndex"]=O,s.ui.enableSidekickAdditionalRendering?A=s.ui.sidekickMaxTotalCount:(v=s.calAllArticleHeight(u),A=Math.max(0,Math.ceil(v/I+(p-1)*a.config.countMargin)),A=Math.min(A,s.ui.sidekickMaxTotalCount)),
C=Math.max(0,Math.ceil((A-a.config["ads.display.start"]+1)/a.config["ads.display.frequency"])),s.currSidekickStartIndex=a.config["ui.batchEndIndex"],s.sidekickStartIndexes[l]=s.sidekickStartIndexes[l]+y,s.sidekickRendered[l]=!0,a.config["ads.count"]=C,a.config.count=A,a.config.uuid=R,a.config.property=s.getFederationAttibute("data-site",u),s.ui.enableRelatedOlympics&&(k=w.getItemMeta(s.currPage.listId,s.currPage.uuid),s.currPage.spaceid===s.ui.relatedOlympicsSpaceid?H=!0:k&&k.categoryData&&Array.isArray(k.categoryData)&&(H=e.Array.some(k.categoryData,function(e){return"Summer Olympics"===e.label||"Olympics"===e.label})),H&&(_=N.length?N.map(function(e){return"YCT:"+e}).join("|"):"")),g=s.getFederationAttibute("data-entities",u).join("|"),_&&(a.config.custom_blending_enabled=!0),a.config.interestString=_||g,!s.ui.enableSidekickAdditionalRendering&&a.config["ui.batchEndIndex"]<1)return void(s.disableSidekick=!0)}else if(a.config.count=b,a.config.itemCount=b,a.config["ads.count"]=Math.max(0,Math.ceil((b-a.config["ads.display.start"]+1)/a.config["ads.display.frequency"])),b<1)return void(s.disableSidekick=!0)}d&&s.getRemoteApplet(a.name,a.config,d)}},getRemoteApplet:function(t,i,a,n){var o,l,s;t&&a&&(l={initStencil:1,initApplet:1,disableAppClass:1},s=(o=this).mergeObjects(l,i),o.fireEvent("remoteapplet",{type:t,method:"post",params:s,placement:{node:a},callback:function(i){var l,s,d;if(l=o.ui.aSideContentPromoEnabled&&o.container.one(".aside-content-promo.D-n"),!i&&"td-applet-sidekick"===t&&l&&l.replaceClass("D-n","D-b"),"mega-modal"===o.ui.mode&&o.ui.enableSidekickAdditionalRendering&&"td-applet-sidekick"===t&&(s=Object.keys(o.ui.slots),B.fire("content:endLoad",{}),s.indexOf("sidekickdesktop")>-1))for(d=0;d<o.numOfItems;d++)setTimeout(e.bind(o.handleSlotApplet,o,o.allItems[d],"sidekickdesktop",o.ui.slots.sidekickdesktop,!0,d),parseInt(o.ui.sidekickFollowingDelay)+d*parseInt(o.ui.sidekickBatchDelay));"mega-modal"===o.ui.mode&&o.ui.singleRightRail&&"td-applet-sidekick"===t&&setTimeout(function(){o.stickyRightRailStart=!0,o.updateLrecsOffset()},2e3),B.fire(y,{err:i,name:t,node:a}),n&&n(i)}}))},handleBlur:function(t){var i,a,n=this;if(i=n.visibleMeasuresEnabled?e.one(".vm-videos"):e.one("#hl-ad-LREC-0"),(n.ui.enableModalBackfillViewportDetection||n.visibleMeasuresEnabled)&&n.backfillVideoPlayer&&i&&n.backfillVideoPlayer.controls.pause(),n.ui.enableRelatedVideo&&n.relatedVideoAutoPlay)for(a=0;a<n.relatedVideoPlayer.length;a++)!n.relatedVideoPlayer[a].has_interacted&&n.relatedVideoPlayer[a].player&&n.relatedVideoPlayer[a].player.controls&&n.relatedVideoPlayer[a].player.controls.pause();n.adsConfig.tilesAds.enabled&&n.tilesPageVisible&&n.tilesVideos&&n.tilesVideos.size()>0&&n.tilesVideos.each(function(e){e.getDOMNode().pause()})},handleFocus:function(t){var i,a,n,o,l=this,s=e.one("body").scrollInfo;if(i=l.visibleMeasuresEnabled?e.one(".vm-videos"):e.one("#hl-ad-LREC-0"),(l.ui.enableModalBackfillViewportDetection||l.visibleMeasuresEnabled)&&l.backfillVideoPlayer&&i&&(a=i.get("clientHeight"),s.isNodeOnscreen(i,-.8*a)&&l.backfillVideoPlayer.controls.play()),l.ui.enableRelatedVideo&&l.relatedVideoAutoPlay)for(n=e.all(".js-relatedvideo-placeholder"),o=0;o<l.relatedVideoPlayer.length;o++)a=(i=n.item(o)).get("clientHeight"),s&&s.isNodeOnscreen(i,-.5*a)&&!l.relatedVideoPlayer[o].has_interacted&&l.relatedVideoPlayer[o].player&&l.relatedVideoPlayer[o].player.controls&&l.relatedVideoPlayer[o].player.controls.play();l.adsConfig.tilesAds.enabled&&l.tilesPageVisible&&l.tilesVideos&&l.tilesVideos.size()>0&&l.tilesVideos.each(function(e){var t=e.get("clientHeight");t>0&&s.isNodeOnscreen(e,-.3*t)&&e.getDOMNode().play()}),l.ui.cinemaGraph&&l.ui.cinemaGraph.enabled&&l.cinemaGraphPlayer&&l.cinemaGraphPlayer.controls&&!l.cinemaGraphPlayer.controls.isPlaying()&&l.cinemaGraphPlayer.controls.play()},_commentsAdScroll:function(e){this._updateCommentsLREC()},requestTick:function(){this.ticking||requestAnimationFrame(this._updateSingleRightRailLREC),this.ticking=!0},_handleMSPLEnd:function(e){var t=this,i=t.ui.mobileAdMSPLPosId||"MSPL-9";a.DARLA&&a.DARLA.render&&a.DARLA.render.RenderMgr&&a.DARLA.render.RenderMgr.nuke(i)},_getNextAds:function(e){var t,i,a,n,o=this;o.secondFetchAd&&(t=o.secondMobileAdPosition,e.isValid&&(i=t.split(","),a=o.ui.mobileAdMSPLExcludePos||"LREC-9",(n=i.indexOf(a))>=0&&i.splice(n,1),t=i.join(",")),o.ads.abortDARLA(),o.ads.insertDisplayAds(o.secondMobileSpaceid,o.secondIndex,o.secondSiteAttrs,t,o.secondSite),o.secondFetchAd=!1)},_updateCommentsLREC:function(t){var i,a,n,o,l,s,d,r,c,u,p=this,m=t>=0;if(t=t||p.currIndex,p.ui.commentsLREC)for(i=Math.max(0,t-1);i<Math.min(5,t+1);i++)a=e.one("#js-slider-item-"+i+" .ad-inner-wrapper"),n=e.one("#js-slider-item-"+i+" .ad-wrapper"),l=0,s=88,(o=e.one("#js-slider-item-"+i+" .js-comments-container"))&&n&&(d=a.get("offsetHeight"),(m||d>100)&&(r=o.getDOMNode().getBoundingClientRect(),c=n.getDOMNode().getBoundingClientRect(),u=!1,r.top<s?r.bottom>=d+s?c.top<s&&(u=!0):l=r.height-d-(c.top-r.top):c.top<s?r.top>c.top?l=r.top-c.top:u=!0:r.top>c.top&&(l=r.top-c.top),u?(a.setStyle("position","fixed"),a.setStyle("transform","translate3d(0px, 0px, 0px)"),a.setStyle("top",s+"px")):(a.setStyle("position","relative"),a.setStyle("top","auto"),a.setStyle("transform","translate3d(0px, "+l+"px, 0px)"))))},_updateSingleRightRailLREC:function(){var e,t,i,a,n,o,l,s,d,r,c,u,p,m,g,f,h,v,y,b,A,C,w=this;w.ticking=!1,w.ui.singleRightRail&&(e=0,t=w.winInnerHeight,i=w.latestKnownScrollY,a=w.contentColTop,n=0,o=0,l=0,s=!1,d=0,r=!1,c=i+t,w.asideNode&&(u=w.contentLRECNodes[1],!w.disableStickyLREC2&&u&&w.ui.enableModalStickyRightRail&&w.stickyRightRailStart&&(g=w.LrecOffsetBottom[1],f=w.LrecOffsetBottom[2],w.ui.enableAdsDynamicAnchor?w.dynamicAnchorNodeTop[0]>g?(p=w.dynamicAnchorNodeTop[0],m=w.dynamicAnchorNodeTop[1]>f?w.dynamicAnchorNodeTop[1]:w.dynamicAnchorNodeTop[2]):(p=w.dynamicAnchorNodeTop[1],m=w.dynamicAnchorNodeTop[2]):(p=w.itemsOffsetBottom[1],m=w.itemsOffsetBottom[2]),
c>=g+a?c<p?(d=e-g+t,s=!0):(p>g&&(s=!1,n=p-g),w.numOfItems>2&&(c>=f+n?c<m?(s=!0,d=e-f+t):m>f+n&&(s=!1,o=m-f-n):c<f&&(s=!1,o=0))):c<g&&(s=!1,n=0)),y=(h=w.asideNodeOffsetHeight)+(v=n+o),b=w.contentColBottom,0===v&&(y+=a),w.ui.enableModalStickyRightRail&&w.stickyRightRailStart&&(s||(c>=y&&y>w.winInnerHeight?c<=b?r=!0:b>h+o+n&&(r=!1,l=b-h-o-n):(r=!1,l=0))),s?(w.asideNode.setStyle("position","fixed"),w.asideNode.setStyle("top",d+"px"),w.asideNode.setStyle("bottom",""),w.asideNode.setStyle("transform","translateY(0px)")):r?(w.asideNode.setStyle("position","fixed"),w.asideNode.setStyle("top",""),w.asideNode.setStyle("bottom","0px"),w.asideNode.setStyle("transform","translateY(0px)")):((A=n+o+l)>a&&(A-=a),w.asideNode.setStyle("position","relative"),w.asideNode.setStyle("top",""),w.asideNode.setStyle("bottom",""),w.asideNode.setStyle("transform","translateY("+A+"px)")),b<y?(C=y-b,w.dynamicHeightHeight!==C&&(w.dynamicHeightNode.setStyle("height",C+"px"),w.dynamicHeightHeight=C)):w.ui.enableVideoCluster&&w.dynamicHeightNode.setStyle("height","0px")))},_onClickPromoAd:function(t){if(this){var i=this.adsConfig.promoAds.asyncBeaconWait||300,n=t.currentTarget,o=n.ancestor(".promo-ad-article-li"),l=o&&o.getData("asyncbeacon");n&&l&&(t.preventDefault(),t.halt(!0),e.Af.Beacon.send(l),setTimeout(function(){a.location=n.getAttribute("href")},i))}},formatAppReviews:function(e,t,i){var a,n,o;if(i&&e&&(a=i.match(/\S+/g)||[])&&Array.isArray(a)&&0!==a.length)return"yahoo"===(n=a[a.length-1].toLowerCase())&&(n="newsroom"),(o=e[n])&&o>t?o=this.getAppReviewString(o):void 0},getAppReviewString:function(e){return e>=1e4?e/1e3+"K":e},getAppInstallAdRatings:function(e){var t,i,a,n=e.match(/([^\/]+)\/(.+)/);if(n&&3===n.length&&"0"!==n[2]){try{n=parseInt(n[1],10)/parseInt(n[2],10)*5}catch(o){n=0}for(n>5&&(n=5),t=Math.floor(n),i=[{rating:0},{rating:0},{rating:0},{rating:0},{rating:0}],a=0;a<t;a++)i[a].rating=1;return t<n&&(i[a].rating=.5),i}},_setIframeClick:function(t,i){this.ui.inlineView&&this.ui.enableIframeDocking&&t.on("blur",function(){var t,i=document.activeElement.parentElement.className,a=document.activeElement.className;i.indexOf("video-iframe-container")>-1&&-1===a.indexOf("vid-iframe-docked")&&(t=e.one(".vid-iframe-docked"))&&t.removeClass("vid-iframe-docked")})},_onScroll:function(t){var i,a,n,o,l,s,d,r,c=this,u=e.one("body").scrollInfo;if(c.ui.inlineView&&c.ui.enableIframeDocking&&(!he||he&&!he.isDocked())&&(s=(l=(o=c.viewer.getCurrItem())&&e.one(o).one(".iframe-vid-dockable"))&&e.one(l).one("iframe"))&&(u.isNodeOnscreen(l)?c.dockedIframeVideo&&s===c.dockedIframeVideo&&(s.removeClass("vid-iframe-docked").removeClass("vid-iframe-fadein"),e.one("body").removeClass("videoIframeDocked"),s.setStyles({top:null,right:null,left:null,bottom:null}),c.dockedIframeVideo=null):c.dockedIframeVideo||e.one("body").hasClass("videoIframeDocked")||(c.dockedIframeVideo=s,s.addClass("vid-iframe-docked").addClass("vid-iframe-fadein"),(d=c._iframeDockingDimensions)&&s.setStyles({top:d.positionTop+"px",right:d.positionRight+"px",left:d.positionLeft+"px",bottom:d.positionBottom+"px"}),e.one("body").addClass("videoIframeDocked"))),i=c.visibleMeasuresEnabled?e.one(".vm-videos"):e.one("#hl-ad-LREC-0"),(c.ui.enableModalBackfillViewportDetection||c.visibleMeasuresEnabled)&&c.backfillVideoPlayer&&i&&(a=i.get("clientHeight"),u&&(u.isNodeOnscreen(i,-.8*a)?c.backfillVideoPlayer.controls.play():c.backfillVideoPlayer.controls.pause())),c.ui.enableRelatedVideo&&c.relatedVideoAutoPlay)for(n=e.all(".js-relatedvideo-placeholder"),r=0;r<c.relatedVideoPlayer.length;r++)a=(i=n.item(r)).get("clientHeight"),u&&!c.relatedVideoPlayer[r].has_interacted&&c.relatedVideoPlayer[r].player&&c.relatedVideoPlayer[r].player.controls&&(u.isNodeOnscreen(i,-.5*a)?c.relatedVideoPlayer[r].player.controls.play():c.relatedVideoPlayer[r].player.controls.pause());c.adsConfig.tilesAds.enabled&&c.tilesPageVisible&&(c.tilesVideos&&c.tilesVideos.size()>0&&c.tilesVideos.each(function(e){var t=e.get("clientHeight");t>0&&(u.isNodeOnscreen(e,-.3*t)?e.getDOMNode().play():e.getDOMNode().pause())}),c.tileDeferLoadVideos&&c.tileDeferLoadVideos.size()>0&&c.tileDeferLoadVideos.each(function(e){e.getDOMNode().classList.contains("D(n)")||u.isNodeOnscreen(e,20)&&(e.addClass("D(n)"),e.ancestor("li").one("video").getDOMNode().classList.remove("D(n)"))}),c.tileContainers&&c.tileContainers.size()>0&&c.tileContainers.each(function(e){var t=Math.min(e.get("clientHeight"),e.get("clientWidth")),i=e.getData("beaconFired");!i&&t>0&&u.isNodeOnscreen(e,-1*t+5)&&(c.fireTileViewBeacon(e.getData("vsi")),e.setData("beaconFired","1"))})),c.ui.c2siframe.enabled&&c.c2sContainerList&&c.c2sContainerList.forEach(function(e){if(e){var t=e.getDOMNode();if(t&&t.contentWindow&&t.contentWindow.postMessage)if(u.isNodeOnscreen(e,10))try{t.contentWindow.postMessage("c2s-node-visible","*")}catch(i){}else try{t.contentWindow.postMessage("c2s-node-not-visible","*")}catch(i){}}})},fireTileViewBeacon:function(t){var i,a=this;a.tilesData&&a.tilesData.actionUrls&&a.tilesData.actionUrls.IMPR_INTERNAL&&(i=a.tilesData.actionUrls.IMPR_INTERNAL,e.Array.each(a.tilesData.tiles,function(a){if(a.assetIndexVertical===t){var n="st=t,si=0,sv="+a.assetIndexVertical+",sa="+a.assetId;e.Af.Beacon.send(i.replace("$(AD_POSN)",escape(n)))}}))},isFlashInstalled:function(){var t,i,a=null;if(e.UA.ie)try{a=new window.ActiveXObject("ShockwaveFlash.ShockwaveFlash").GetVariable("$version").replace(/[A-Za-z\s]+/g,"").split(",")}catch(n){}else{if(e.UA.safari)return!1;navigator.mimeTypes&&(t=navigator.mimeTypes["application/x-shockwave-flash"])&&(i=t.enabledPlugin)&&(a=i.description.replace(/\s[rd]/g,".").replace(/[A-Za-z\s]+/g,"").split("."))}return!!a&&"0"!==a[0]},initTilePage:function(t,i){var a,n;t&&(a=this,n=e.one(t),e.one("body").setAttribute("data-imageloader-checkposition",!0),setTimeout(function(){e.Stencil.initAll(t),a._onScroll()},100),a.tilesData=i,a.tilesVideos=n.all("video"),n.delegate("click",e.bind(a.toggleMuteBtn,this),".mute-btn"),
a.tileContainers=n.all("[data-vsi]"),a.tileDeferLoadVideos=n.all(".js-tile-video"),a.viewer.disable&&a.viewer.disable(),a.viewer.node&&a.viewer.node.focus(),document.body.scrollTop=0,a.loadHTMLTiles(n.all(".js-tile-html"),0))},toggleMuteBtn:function(e){var t,i,a=this;e.halt(!0),t=e.target.ancestor("[data-vsi]").one("video"),i=!1,e.target.hasClass("mute-on")&&t?(t.getDOMNode().muted=!1,e.target.replaceClass("mute-on","mute-off"),e.target.set("title",this.i18n.CLICK_MUTE),e.target.set("aria-label",this.i18n.MUTE),i=!0):t&&(t.getDOMNode().muted=!0,e.target.replaceClass("mute-off","mute-on"),e.target.set("title",this.i18n.CLICK_UNMUTE),e.target.set("aria-label",this.i18n.UNMUTE)),i&&a.tilesVideos&&a.tilesVideos.size()>0&&a.tilesVideos.each(function(e){var i,a;e!==t&&((i=e.getDOMNode()).muted||(i.muted=!0,(a=e.ancestor("[data-vsi]").one(".mute-btn"))&&a.replaceClass("mute-off","mute-on")))})},loadHTMLTiles:function(t,i){var a,n,o,l,s,d,r;i>=t.size()||(a=this,(o=(n=t.item(i)).getData("url"))?(l=n.ancestor("[data-vsi]"))&&(s=l.getData("vsi"),d=null,e.Array.each(this.tilesData.tiles,function(e){e.assetIndexVertical===s&&(d=e)}),d&&(r="st=t,si=0,sv="+d.assetIndexVertical+",sa="+d.assetId,a.tilesadModel.loadTextTile({adPosn:r,embeddedLandingUrls:d.embeddedLandingUrls||[],url:o},function(e,o){o&&a.renderHTMLTile(n,o.html),a.loadHTMLTiles(t,i+1),a._onScroll()}))):a.loadHTMLTiles(t,i+1))},renderHTMLTile:function(e,t){e&&t&&e.setContent(t)},destroyTilesPage:function(){this.tilesData=null,this.tilesVideos=null,this.tileContainers=null},removeRemoteApplets:function(e){var t,i,a,n,o,l,s,d,r=this,c=Object.keys(r.ui.slots);if(e){for(o=0,l=c.length;o<l;o++)(t=(i=e&&e.parentNode&&e.parentNode.getElementsByClassName("js-viewer-slot-"+c[o]))&&i[0]&&i[0].getElementsByClassName("js-applet")[0])&&(a=t.getAttribute("data-applet-guid"))&&YMedia.My&&YMedia.My.App.applets[a]&&YMedia.My.App.applets[a].destroy();for(s=0,d=(n=e.getElementsByClassName("js-viewer-slots")).length;s<d;s++)n[s].innerHTML=""}},mergeObjects:function(){var e,t,i,a={};for(e=arguments.length-1;e>=0;e--)for(i in t=arguments[e])i&&(a[i]=t[i]);return a},isPlayerJSLoaded:function(){return YAHOO&&YAHOO.VideoPlatform&&YAHOO.VideoPlatform.VideoPlayer},isPlayerEventsReady:function(){return YAHOO&&YAHOO.VideoPlatform&&YAHOO.VideoPlatform.API_Events},getCookie:function(e){return YMedia&&YMedia.Cookie&&YMedia.Cookie.get(e)},setCookie:function(e,t){return YMedia&&YMedia.Cookie&&YMedia.Cookie.set(e,t)},fireOmnitureBeacon:function(e){var t,i=this;a.Y=a.Y||{},a.Y.OmnitureUtil=a.Y.OmnitureUtil||{},a.Y.OmnitureUtil.getCookie=i.getCookie,a.Y.OmnitureUtil.setCookie=i.setCookie,a.Y&&a.Y.Omniture?a.Y.Omniture.fireBeacon(e):((t=document.createElement("script")).id="omnitureBeaconScript",t.src=i.js.omniture||"https://s.yimg.com/os/mit/media/m/news/omniture-mega-min-78f5e30.js",t.onload=function(){a.Y.Omniture.initialize({params:e,getCookie:i.getCookie,setCookie:i.setCookie})},document.body.appendChild(t))},getMobileAdsPos:function(t){var i,a,n,o,l,s,d,r,c=this,u=t.querySelector(".Content-Body"),p=t.querySelector("#mobile-displayad-wraper"),m=t.querySelector("#mobile-displayad-placeholder"),g=c.ui.mobileAdPos||"LREC-9,LREC2-9",f=c.ui.mobileAdPosNonHosted||"LREC-9",h=c.ui.mobileAdPosWithVideoAd||"LREC2-9";if(c.ui.enableMobileVideoAutoplayAd&&c.isWhitelistedMobileOS()&&(i=c.ui.mobileVideoAdUrl)&&(i+=Math.random(),(a=document.getElementById("mobileVideoAdScript"))&&document.body.removeChild(a),(n=document.createElement("script")).id="mobileVideoAdScript",n.src=i,n.onload=function(){setTimeout(function(){e.Global.fire("content:videoad")},500)},document.body.appendChild(n),p=t.querySelector("#"+c.ui.mobileVideoAdAdPos),m=t.querySelector("#videoad-placeholder"),g=h,f=""),l="",(o=c.adsConfig.displayAds.positions.aboveFold)&&o.length>0&&(l=o.join(",")),l&&(g=l+","+g,f=l+","+f,h=l+","+h),t.getAttribute("data-hosted")||null||(g=f),p){for(s=u.firstChild,d=c.ui.mobileAdPositionThreshold||200,r=!1;s;s=s.nextSibling)if(s.offsetTop>d&&!c.ads.hasEmbed(s)&&!c.ads.hasEmbed(s.nextSibling)){r=!0;break}r?u.insertBefore(p,s):(g=f,m.parentNode.insertBefore(p,m))}return g},isWhitelistedMobileOS:function(){var t,i=!1,a=e.UA.ios;return a&&a>=8&&(i=!0),(t=e.UA.android)&&t>=4.4&&(i=!0),i},getComscoreC4Param:function(e){var t="US",i="fp";return e.region&&(t=e.region.toUpperCase()),e.site&&(i=e.site),t+" "+i},isVvEnabled:function(){var e=this,t=e.ui.enableVerticalVideo,i=re.ios>=10&&(re.safari||window.navigator.standalone)&&re.userAgent.indexOf("FxiOS")<0&&!window.opera,a=re.android&&re.chrome>=53;return t&&(i||a)},onClickReadMore:function(e){var t,i,a=this.container.one(".offnetamp-hidden"),n=this.container.one(".offnetamp-iframe"),o=e.target;n&&(t=n.getAttribute("data-amplink")||"")&&(e.preventDefault(),n.setAttribute("src",t),a.removeClass("offnetamp-hidden"),a.addClass("offnetamp-displayed"),window.scrollTo(0,0),i=this.rapidParseYLK(o),this.fireClickBeacon(i.sec,i.slk,i.elm,0,i))}})},"@VERSION@",{requires:["af-applet-view","af-beacon","af-cache","af-config","af-event","af-cookie","af-pageviz","stencil","angus-slider","event-tap","td-video-manager-util","td-viewer-ads","td-viewer-slideshow","json-parse","td-applet-viewer-vertical-video-util","stencil-imageloader"]});