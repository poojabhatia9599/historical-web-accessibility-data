var _____WB$wombat$assign$function_____ = function(name) {return (self._wb_wombat && self._wb_wombat.local_init && self._wb_wombat.local_init(name)) || self[name]; };
if (!self.__WB_pmw) { self.__WB_pmw = function(obj) { this.__WB_source = obj; return this; } }
{
  let window = _____WB$wombat$assign$function_____("window");
  let self = _____WB$wombat$assign$function_____("self");
  let document = _____WB$wombat$assign$function_____("document");
  let location = _____WB$wombat$assign$function_____("location");
  let top = _____WB$wombat$assign$function_____("top");
  let parent = _____WB$wombat$assign$function_____("parent");
  let frames = _____WB$wombat$assign$function_____("frames");
  let opener = _____WB$wombat$assign$function_____("opener");

(window.webpackJsonp=window.webpackJsonp||[]).push([["NotificationsPrePromptLoader"],{"./src/reddit/components/NotificationsPrePrompt/index.m.less":function(e,t,s){e.exports={modalContainer:"_3uA-tRfnkYO-78DbpSdKMh",modalBody:"_3ZQQPHRTItIinpXhny3ZDt",title:"_3t6MWcHrGFpGj4vlgq-xEr",titleLarge:"_1FvWIle80DgjBL62Tdt2eq",body:"_3Z9uK9KORZK0ehS0hs_45y",bodyLarge:"_12G9Se1M4wodVC-R3ANHbS",allow:"_1Lq_w8Q5F_T8F4AYDucl8g",arrow:"_2xbwjCYA8CljeuOnJamg91",snoo:"UzNVGSNFIiN2Q6xXrrIxy",overlay:"_3Ig_EsWWVLquWs2yBBQjec"}},"./src/reddit/components/NotificationsPrePrompt/index.tsx":function(e,t,s){"use strict";s.r(t);var n=s("./node_modules/react/index.js"),o=s.n(n),r=s("./node_modules/react-redux/es/index.js"),a=s("./node_modules/reselect/es/index.js"),i=s("./src/app/strings/index.ts"),c=s("./src/reddit/i18n/components.tsx"),d=s("./src/higherOrderComponents/asModal/index.tsx"),l=s("./src/lib/classNames/index.ts"),u=s("./src/lib/localStorageAvailable/index.ts"),m=s("./src/reddit/actions/notifications/constants.ts"),p=s("./src/reddit/actions/notifications/loader.ts"),f=s("./src/reddit/components/ModalStyledComponents/index.tsx"),b=s("./src/reddit/icons/svgs/Snoo/index.tsx"),g=s("./src/reddit/components/Snoo/index.m.less"),h=s.n(g),O=s("./src/lib/lessComponent.tsx").a.wrapped(b.a,"Component",h.a),j=s("./src/reddit/controls/Button/index.tsx"),x=s("./src/reddit/helpers/trackers/notifications.ts");var v=e=>o.a.createElement("svg",{className:e.className,viewBox:"0 0 20 6",version:"1.1"},o.a.createElement("path",{d:"M0,5.5 C1.10679602,5.5 -0.215330116,5.5 1.99826192,5.5 L7.98259552,1.17191675 C9.24211692,0.260985956 10.9698221,0.277805319 12.210413,1.21307493 L18,5.5 C19.5801495,5.5 19.2099252,5.5 20,5.5",stroke:"inherit",strokeWidth:"1",fill:"inherit"})),y=s("./src/reddit/layout/twoCol/ExpandRight/index.tsx"),P=s("./src/reddit/models/User/index.ts"),C=s("./src/reddit/selectors/experiments/dnPrePrompt.ts"),_=s("./src/reddit/selectors/user.ts"),w=s("./src/reddit/components/NotificationsPrePrompt/index.m.less"),N=s.n(w);function E(){return(E=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var n in s)Object.prototype.hasOwnProperty.call(s,n)&&(e[n]=s[n])}return e}).apply(this,arguments)}const k=Object(a.c)({currentUser:_.i,language:_.S,variant:C.a}),L=Object(r.b)(k,e=>({closePrePrompt:()=>{Object(u.a)()&&localStorage.setItem(m.i,m.j),e(Object(m.o)()),e((e,t)=>x.h(t()))},requestPermissions:()=>{e((e,t)=>x.g(t())),Object(p.a)().then(t=>e(t.requestNotificationsPermissions(!0,!0)))}}));class S extends o.a.Component{constructor(){super(...arguments),this.state={hideContent:!1},this.handleAllowNotificationsClick=()=>{this.setState({hideContent:!0},this.props.requestPermissions)}}render(){const{currentUser:e,language:t}=this.props;return this.state.hideContent||!Object(C.c)(this.props.variant)?null:o.a.createElement(f.c,{className:N.a.modalBody},o.a.createElement(v,{className:N.a.arrow}),o.a.createElement(f.j,null,o.a.createElement(y.a,{widthLeft:80},o.a.createElement(O,{className:N.a.snoo}),o.a.createElement("div",null,o.a.createElement("div",{className:Object(l.a)(N.a.title,!e&&N.a.titleLarge)},o.a.createElement(c.c,null,"Enable notifications")),o.a.createElement("div",{className:Object(l.a)(N.a.body,!e&&N.a.bodyLarge)},e?Object(i.a)(t,"desktopNotifications.prePrompt.body.loggedIn",{userName:Object(P.f)(e)}):Object(i.a)(t,"desktopNotifications.prePrompt.body.loggedOut"))))),o.a.createElement(f.e,null,o.a.createElement(f.a,{onClick:this.props.closePrePrompt},o.a.createElement(c.c,null,"Not now")),o.a.createElement(j.f,{className:N.a.allow,onClick:this.handleAllowNotificationsClick},o.a.createElement(c.c,null,"Allow Notifications"))))}}const R=Object(d.a)(S);t.default=L(e=>e.variant?o.a.createElement(R,E({},e,{className:N.a.modalContainer,overlayClassName:N.a.overlay,withOverlay:Object(C.b)(e.variant)})):null)},"./src/reddit/components/Snoo/index.m.less":function(e,t,s){e.exports={Component:"LTGGGuKkF69FYEjoO3dP-",component:"LTGGGuKkF69FYEjoO3dP-"}},"./src/reddit/helpers/trackers/notifications.ts":function(e,t,s){"use strict";s.d(t,"j",(function(){return d})),s.d(t,"c",(function(){return l})),s.d(t,"d",(function(){return u})),s.d(t,"e",(function(){return m})),s.d(t,"i",(function(){return p})),s.d(t,"g",(function(){return f})),s.d(t,"h",(function(){return b})),s.d(t,"l",(function(){return h})),s.d(t,"m",(function(){return O})),s.d(t,"k",(function(){return j})),s.d(t,"b",(function(){return x})),s.d(t,"a",(function(){return w})),s.d(t,"f",(function(){return I}));var n=s("./src/reddit/models/PushNotification/index.ts"),o=s("./src/reddit/selectors/telemetry.ts"),r=s("./src/telemetry/index.ts");const a=e=>Object.assign({},o.defaults(e),{noun:"desktop_notification_permissions"}),i=e=>Object.assign({},o.defaults(e),{noun:"desktop_notif_preprompt_permissions"}),c=e=>e?"enable":"disable",d=e=>{Object(r.a)(Object.assign({},a(e),{action:"view",source:"popup"}))},l=e=>{Object(r.a)(Object.assign({},a(e),{action:"allow",source:"popup"}))},u=e=>{Object(r.a)(Object.assign({},a(e),{action:"block",source:"popup"}))},m=e=>{Object(r.a)(Object.assign({},a(e),{action:"close",source:"popup"}))},p=e=>{Object(r.a)(Object.assign({},i(e),{action:"view",source:"popup"}))},f=e=>{Object(r.a)(Object.assign({},i(e),{action:"allow",source:"popup"}))},b=e=>{Object(r.a)(Object.assign({},i(e),{action:"close",source:"popup"}))},g=(e,t,s)=>Object.assign({},o.defaults(e),{actionInfo:o.actionInfo(e,{success:t,reason:s}),noun:"push_token"}),h=e=>{Object(r.a)(Object.assign({},g(e,!0),{action:"request",source:"notification"}))},O=e=>{Object(r.a)(Object.assign({},g(e,!0),{action:"register",source:"notification"}))},j=(e,t)=>{Object(r.a)(Object.assign({},g(e,!1,t),{action:"bail",source:"notification"}))},x=e=>Object.assign({},(e=>Object.assign({},o.defaults(e),{noun:"push_notification"}))(e),{notification:o.notification(e,void 0,void 0),action:void 0,source:"notification",correlationId:void 0}),v=e=>(t,s)=>{Object(r.a)(Object.assign({},o.defaults(t),{action:c(s),noun:e,source:"notification"}))},y=v("chat_messages"),P=v("chat_requests"),C=v("comment_replies"),_=v("community_recs"),w=v("desktop_notification_permissions"),N=v("post_replies"),E=v("private_messages"),k=v("trending_posts"),L=v("username_mention"),S=v("upvotes_comment"),R=v("upvotes_post"),I=(e,t,s)=>{switch(t){case n.a.ChatMessages:y(e,s),P(e,s);break;case n.a.CommunityRecommendations:_(e,s);break;case n.a.TrendingPosts:k(e,s);break;case n.a.UpvotedComments:S(e,s);break;case n.a.UpvotedPosts:R(e,s);break;case n.a.UnreadMessages:C(e,s),N(e,s),E(e,s),L(e,s)}}},"./src/reddit/layout/twoCol/ExpandRight/index.m.less":function(e,t,s){e.exports={left:"_3YRHtGWABKh4OVO3s5gJwt",right:"_1IPWlMFPB_zPPajVPKk5Dy",expandRightContainer:"_2CUZHyZpRYmdvLE9tOI-2L"}},"./src/reddit/layout/twoCol/ExpandRight/index.tsx":function(e,t,s){"use strict";s("./node_modules/core-js/modules/es6.symbol.js");var n=s("./node_modules/react/index.js"),o=s.n(n),r=s("./src/higherOrderComponents/warnOnChildrenCount/index.tsx"),a=s("./src/lib/classNames/index.ts"),i=s("./src/reddit/layout/twoCol/ExpandRight/index.m.less"),c=s.n(i);function d(){return(d=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var n in s)Object.prototype.hasOwnProperty.call(s,n)&&(e[n]=s[n])}return e}).apply(this,arguments)}var l=function(e,t){var s={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(s[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(n=Object.getOwnPropertySymbols(e);o<n.length;o++)t.indexOf(n[o])<0&&Object.prototype.propertyIsEnumerable.call(e,n[o])&&(s[n[o]]=e[n[o]])}return s};t.a=Object(r.a)(e=>{const{className:t,children:s,heightLeft:n,widthLeft:r,gutter:i}=e,u=l(e,["className","children","heightLeft","widthLeft","gutter"]);return o.a.createElement("div",d({className:Object(a.a)(c.a.expandRightContainer,t)},u),o.a.createElement("div",{className:c.a.left,style:{flexBasis:r,height:n,marginRight:i}},Array.isArray(s)&&s[0]),o.a.createElement("div",{className:c.a.right},Array.isArray(s)&&s[1]))},2)},"./src/reddit/models/PushNotification/index.ts":function(e,t,s){"use strict";var n;s.d(t,"a",(function(){return n})),function(e){e.ChatMessages="chatMessages",e.CommunityRecommendations="communityRecommendations",e.TrendingPosts="trendingPosts",e.UnreadMessages="unreadMessages",e.UpvotedComments="upvotedComments",e.UpvotedPosts="upvotedPosts"}(n||(n={}))},"./src/reddit/selectors/experiments/dnPrePrompt.ts":function(e,t,s){"use strict";s.d(t,"a",(function(){return r})),s.d(t,"b",(function(){return a})),s.d(t,"c",(function(){return i}));var n=s("./src/reddit/constants/experiments.ts"),o=s("./src/reddit/helpers/chooseVariant/index.ts");const r=e=>{const t=Object(o.b)(e,{experimentEligibilitySelector:o.a,experimentName:n.D});return Object(n.Ub)(t)?void 0:t},a=e=>e===n.C.DarkPrePrompt||e===n.C.DarkSystemDialogue,i=e=>e===n.C.DarkPrePrompt||e===n.C.PrePrompt}}]);
//# sourceMappingURL=NotificationsPrePromptLoader.2ef25316e8e93a0da3a7.js.map

}
/*
     FILE ARCHIVED ON 00:44:16 Oct 01, 2019 AND RETRIEVED FROM THE
     INTERNET ARCHIVE ON 23:51:59 Feb 19, 2024.
     JAVASCRIPT APPENDED BY WAYBACK MACHINE, COPYRIGHT INTERNET ARCHIVE.

     ALL OTHER CONTENT MAY ALSO BE PROTECTED BY COPYRIGHT (17 U.S.C.
     SECTION 108(a)(3)).
*/
/*
playback timings (ms):
  exclusion.robots: 0.309
  exclusion.robots.policy: 0.294
  cdx.remote: 0.158
  esindex: 0.016
  LoadShardBlock: 316.967 (6)
  PetaboxLoader3.datanode: 306.442 (7)
  load_resource: 282.557
  PetaboxLoader3.resolve: 237.493
*/