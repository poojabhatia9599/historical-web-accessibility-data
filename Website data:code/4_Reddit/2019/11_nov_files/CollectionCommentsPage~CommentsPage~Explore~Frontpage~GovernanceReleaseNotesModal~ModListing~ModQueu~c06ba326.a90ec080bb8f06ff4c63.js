var _____WB$wombat$assign$function_____ = function(name) {return (self._wb_wombat && self._wb_wombat.local_init && self._wb_wombat.local_init(name)) || self[name]; };
if (!self.__WB_pmw) { self.__WB_pmw = function(obj) { this.__WB_source = obj; return this; } }
{
  let window = _____WB$wombat$assign$function_____("window");
  let self = _____WB$wombat$assign$function_____("self");
  let document = _____WB$wombat$assign$function_____("document");
  let location = _____WB$wombat$assign$function_____("location");
  let top = _____WB$wombat$assign$function_____("top");
  let parent = _____WB$wombat$assign$function_____("parent");
  let frames = _____WB$wombat$assign$function_____("frames");
  let opener = _____WB$wombat$assign$function_____("opener");

(window.webpackJsonp=window.webpackJsonp||[]).push([["CollectionCommentsPage~CommentsPage~Explore~Frontpage~GovernanceReleaseNotesModal~ModListing~ModQueu~c06ba326"],{"./src/lib/intersectionObserver/index.ts":function(e,t,i){"use strict";i.d(t,"a",(function(){return n})),i.d(t,"b",(function(){return r}));i("./node_modules/core-js/modules/web.dom.iterable.js");let s;const o=new Map,a=new Map;"undefined"!=typeof window&&(i("./node_modules/intersection-observer/intersection-observer.js"),s=new IntersectionObserver(e=>{e.forEach(e=>{const t=e.target,i=e.intersectionRatio>0;if(i!==!!a.get(t)){a.set(t,i);const s=o.get(t);if(s){s(e,i&&!!a.get(t))}}})},{threshold:[.001]}));const n=(e,t)=>{try{o.set(e,t),s&&s.observe(e)}catch(i){0}},r=e=>{try{o.delete(e),s&&s.unobserve(e)}catch(t){0}}},"./src/lib/onFocusAndVisibilityChange/index.ts":function(e,t,i){"use strict";var s,o=i("./node_modules/brcast/dist/brcast.es.js"),a=i("./node_modules/lodash/findKey.js"),n=i.n(a);!function(e){e.Hidden="hidden",e.Visible="visible"}(s||(s={}));const r={hidden:"visibilitychange",webkitHidden:"webkitvisibilitychange",mozHidden:"mozvisibilitychange",msHidden:"msvisibilitychange"};let d=!1;const l=Object(o.a)({documentInFocus:!0});!function(){if(!d){const e=n()(r,(e,t)=>void 0!==document[t]);e&&document.addEventListener(r[e],()=>{l.setState({documentInFocus:document.visibilityState!==s.Hidden})}),d=!0}}(),t.a={subscribe:e=>{return l.subscribe(e)},unsubscribe:e=>{l.unsubscribe(e)}}},"./src/reddit/components/Media/RichTextContainer/index.m.less":function(e,t,i){e.exports={richTextContainer:"Chtkt3BCZQruf0LtmFg2c",richTextContainerTitleOnly:"_2XNPI46MXRfDdsSoDqaksI",richTextContainerFull:"_3xX726aBn29LDbsDtzr_6E",placeholder:"_1aLU7RPNLdvfcbaNdcN11x",placeholderParagraph:"Owi9iYzjyVpDq_0YbCdJY",cleanupVariant:"_3lWzS77ngxpYib6BG4v9TE"}},"./src/reddit/components/Media/index.m.less":function(e,t,i){e.exports={hiddenLink:"_3dhFVFchWAAFXfLFTa94n9",displayNone:"_1Q2mF3u7v9hBVu_4bkC7R4",tweetPlaceholder:"_2IH8Z3uOFGn-TNLufw92zH",tweetEmbedBox:"_3G3xLNIwS59eiRVMICfR7x",isInvisible:"_1kw4-YNb840sdETnjL3_D3",tweetDeleted:"_2PLbyT4mrdGJGH5LY9Eotl"}},"./src/reddit/components/Media/index.tsx":function(e,t,i){"use strict";i("./node_modules/core-js/modules/web.dom.iterable.js");var s=i("./node_modules/lodash/debounce.js"),o=i.n(s),a=i("./node_modules/react/index.js"),n=i.n(a),r=i("./src/lib/classNames/index.ts"),d=i("./src/lib/CSSVariableProvider/withTheme.tsx"),l=i("./src/lib/env/index.ts"),c=i("./src/lib/intersectionObserver/index.ts"),p=i("./src/lib/isUrl/index.ts"),h=i("./src/lib/objectSelector/index.ts"),m=i("./src/lib/onFocusAndVisibilityChange/index.ts"),u=i("./src/lib/permalinkToOverlayLocation/index.ts"),b=i("./src/lib/sentry/index.ts"),g=i("./src/reddit/components/HTML5StreamPlayer/index.tsx"),f=i("./src/reddit/components/Media/EmbedBox/index.tsx"),x=i("./src/reddit/components/Media/ImageBox/index.tsx"),w=i("./src/reddit/components/Media/MediaContainer/index.tsx"),v=(i("./node_modules/core-js/modules/es6.symbol.js"),i("./src/reddit/constants/componentSizes.ts")),C=i("./src/reddit/models/Media/index.ts"),E=i("./node_modules/react-redux/es/index.js"),y=i("./src/reddit/actions/post.ts"),O=i("./src/reddit/helpers/styles/mixins/loading.ts"),S=i("./src/reddit/components/Media/RichTextContainer/index.m.less"),N=i.n(S);class j extends n.a.Component{componentDidMount(){this.loadRichTextContentIfNeeded()}loadRichTextContentIfNeeded(){this.props.canLoadContent&&this.props.isExpando&&this.props.onLoadRichTextContentIfNeeded(this.props.postId)}render(){const e=Object(O.a)({isLoading:!0});return n.a.createElement("div",{className:N.a.placeholder},[1,2,3].map(t=>n.a.createElement("div",{key:t,className:N.a.placeholderParagraph},n.a.createElement("div",{className:e}),n.a.createElement("div",{className:e}),n.a.createElement("div",{className:e}))))}}var I=Object(E.b)(null,e=>({onLoadRichTextContentIfNeeded:t=>e(Object(y.r)(t))}))(j);function M(){return(M=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var s in i)Object.prototype.hasOwnProperty.call(i,s)&&(e[s]=i[s])}return e}).apply(this,arguments)}var L=function(e,t){var i={};for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&t.indexOf(s)<0&&(i[s]=e[s]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(s=Object.getOwnPropertySymbols(e);o<s.length;o++)t.indexOf(s[o])<0&&Object.prototype.propertyIsEnumerable.call(e,s[o])&&(i[s[o]]=e[s[o]])}return i};var T=e=>{var{canLoadContent:t,children:i,className:s,isCleanupVariant:o,isCommentsPage:a,isMediumHeight:d,isRichTextTruncated:l,isExpando:c,isTitleOnly:p,postId:h,showFull:m}=e,u=L(e,["canLoadContent","children","className","isCleanupVariant","isCommentsPage","isMediumHeight","isRichTextTruncated","isExpando","isTitleOnly","postId","showFull"]);const b={[N.a.richTextContainerFull]:m,[N.a.richTextContainerTitleOnly]:p&&!m,[N.a.richTextContainer]:!m&&!p,[N.a.cleanupVariant]:o},g={};m||(g.maxHeight="".concat(p?C.l:d?C.k:C.j,"px")),a&&(g.maxWidth="".concat(v.e,"px"));const f=l&&m;return n.a.createElement("div",M({className:Object(r.a)(b,s),style:g},u),i,f&&n.a.createElement(I,{canLoadContent:!!t,isExpando:c,postId:h}))},P=i("./src/reddit/components/Media/VideoBox/index.tsx"),W=i("./src/reddit/components/PlayButton/index.tsx"),F=i("./src/reddit/helpers/styles/postBackgroundColor.ts"),V=i("./src/reddit/helpers/styles/smartTextColor.ts"),R=i("./src/reddit/components/RawHTMLDisplay/index.tsx");function B(){return(B=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var s in i)Object.prototype.hasOwnProperty.call(i,s)&&(e[s]=i[s])}return e}).apply(this,arguments)}var D=function(e,t){var i={};for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&t.indexOf(s)<0&&(i[s]=e[s]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(s=Object.getOwnPropertySymbols(e);o<s.length;o++)t.indexOf(s[o])<0&&Object.prototype.propertyIsEnumerable.call(e,s[o])&&(i[s[o]]=e[s[o]])}return i};var H=Object(d.a)(e=>{var{flairStyleTemplate:t}=e,i=D(e,["flairStyleTemplate"]);return n.a.createElement(R.a,B({style:{color:Object(V.a)(Object(F.a)(Object.assign({flairStyleTemplate:t},i)))}},i))}),k=i("./src/reddit/components/RichTextJson/index.tsx"),_=i("./src/reddit/constants/screenWidths.ts"),A=i("./src/reddit/contexts/PageLayer/index.tsx"),G=i("./src/reddit/helpers/canPreviewSelfText/index.ts"),U=i("./src/reddit/helpers/getRichTextContent.ts"),J=i("./src/reddit/helpers/postHasSelfText/index.ts"),z=(i("./node_modules/core-js/modules/es6.regexp.replace.js"),i("./src/lib/redditId/index.ts"));function Y(e,t,i){return e.replace('href="https://web.archive.org/web/20191101235406/https://www.reddit.com/poll/'.concat(Object(z.c)(t)),'class="'.concat(i,'" href="https://web.archive.org/web/20191101235406/https://www.reddit.com/poll/').concat(Object(z.c)(t)))}function q(e,t){const i=function e(t,i){let s=!1;let o=[];try{for(const a of t)if("link"===a.e&&a.u&&a.u.includes("https://web.archive.org/web/20191101235406/https://www.reddit.com/poll/".concat(i)))s=!0;else if(a.c&&"string"!=typeof a.c){const t=e(a.c,i);t.found?(s=!0,("par"!==a.e||t.updated.length)&&o.push(Object.assign({},a,{c:t.updated}))):o.push(a)}else o.push(a)}catch(a){s=!1,o=[]}return{found:s,updated:s?o:t}}(e.document,Object(z.c)(t));return i.found?{document:i.updated}:e}var X=i("./src/reddit/i18n/utils.ts"),Q=i("./src/reddit/selectors/experiments/postCleanup.ts");const Z=(e,t,i,s)=>{const o=e/t,a=i/s;return Math.abs(o-a)<.03},K=(e,t)=>{for(let i=0;i<t.length;i++){const s=t[i];if(s.width>=e)return s}},$=(e,t,i)=>{for(let s=0;s<i.length;s++){const o=i[s];if(o.width>=C.e/2&&Z(e,t,o.height,o.width))return o}},ee=e=>{for(let t=0;t<e.length;t++){const i=e[t];if(i.height>=C.e||i.width>=C.f)return i}};var te=i("./src/reddit/components/Media/index.m.less"),ie=i.n(te);function se(){return(se=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var s in i)Object.prototype.hasOwnProperty.call(i,s)&&(e[s]=i[s])}return e}).apply(this,arguments)}const oe=1200,ae=350,ne=100,re=300,de="https://web.archive.org/web/20191101235406/https://www.redditmedia.com",le=75,ce="player.js",pe=v.s+v.r,he=e=>e.isVisible?e.children:n.a.createElement("div",{className:ie.a.displayNone},e.children),me=new Set([C.n.EMBED,C.n.GIFVIDEO,C.n.VIDEO]),ue=e=>!!e.media&&me.has(e.media.type),be=new Set([C.n.EMBED,C.n.GIFVIDEO,C.n.IMAGE,C.n.VIDEO]),ge=e=>{let{post:t,postCleanupVariant:i,goldPostRefactorVariant:s}=e;return!!t.media&&be.has(t.media.type)||!!i&&Object(Q.a)(t)||!!s&&Object(Q.a)(t)},fe=Object(A.t)(),xe=Object(h.b)(e=>({renderingObjectInfo:e.post,pageLayer:e.pageLayer}));class we extends n.a.Component{constructor(e){super(e),this.pauseContent=()=>{this.shouldFocusContentDebouncer(!1)},this.stopContent=()=>{const{media:e}=this.props.post;if(e&&C.d.has(e.type)){if(this.iframe){const t=e.type===C.n.EMBED?e.provider:null;this.pauseEmbed(this.iframe,t)}this.setState(e=>e.shouldStop?null:{shouldStop:!0})}},this.handleVisibilityChange=e=>{const{shouldPause:t}=this.state,{autoplayPref:i}=this.props;this.iframe&&(t||!i&&e.documentInFocus||this.toggleEmbedAutoplay(this.iframe,!e.documentInFocus)),this.setState({forcePause:!e.documentInFocus})},this.focusContent=()=>{this.shouldFocusContentDebouncer(!0)},this.loadContent=()=>{this.setState(e=>e.canLoadContent?null:{canLoadContent:!0})},this.unmountContent=()=>{},this.contentIsHeavyToMount=()=>{const{media:e}=this.props.post;return!!e&&C.d.has(e.type)},this.shouldFocusContentDebouncer=o()(e=>{const{media:t}=this.props.post,{autoplayPref:i}=this.props;if(t&&C.d.has(t.type)){if(this.iframe){const s=t.type===C.n.EMBED?t.provider:null;s&&!C.q.has(s)?!i&&e||this.toggleEmbedAutoplay(this.iframe,!e):e||this.pauseEmbed(this.iframe,s)}e?this.setState(e=>e.shouldPause||!e.canLoadContent?{canLoadContent:!0,shouldPause:!1,shouldStop:!1}:null):this.setState(e=>e.shouldPause?null:{shouldPause:!0})}},250,{leading:!0}),this.toggleEmbedAutoplay=(e,t)=>{if(e.contentWindow){const i=t?C.g.Pause:C.g.Play;e.contentWindow.postMessage({context:ce,method:i},de),e.contentWindow.postMessage({context:ce,method:C.g.Mute},de)}},this.pauseEmbed=(e,t)=>{e.contentWindow&&(t===C.t.YouTube?e.contentWindow.postMessage(JSON.stringify({event:"command",func:C.x.Pause}),de):e.contentWindow.postMessage({context:ce,method:C.g.Pause},de))},this.onIframeLoaded=()=>{const{media:e}=this.props.post,{autoplayPref:t}=this.props,i=e&&e.type===C.n.EMBED?e.provider:null;if(this.iframe&&i&&!C.q.has(i)){const{shouldPause:e}=this.state;(t||e)&&this.toggleEmbedAutoplay(this.iframe,e)}},this.onImageBoxClick=e=>{this.props.isListing||!this.shouldBlur()||this.state.isRevealed||(this.setState({isRevealed:!0}),e.preventDefault(),e.stopPropagation())},this.storeChildRef=e=>{this.iframe=e,this.iframe&&this.props.post.media&&"embed"===this.props.post.media.type&&this.props.post.media.provider===C.t.Twitter&&c.a(this.iframe,(e,t)=>{this.iframe&&this.iframe.contentWindow&&this.props.post.media&&"embed"===this.props.post.media.type&&!this.props.post.media.height&&t&&this.iframe.contentWindow.postMessage("twitter-measure-requested",de)})},this.updateDimensions=()=>{this.setState({viewportHeight:window.innerHeight,viewportWidth:window.innerWidth})},this.isSpoiler=()=>this.props.post.isSpoiler||!(!this.props.crosspost||!this.props.crosspost.isSpoiler),this.isNSFW=()=>this.props.post.isNSFW||!(!this.props.crosspost||!this.props.crosspost.isNSFW),this.state={canLoadContent:e.shouldLoad||!1,forcePause:!1,isRevealed:!1,shouldPause:void 0===e.shouldPause||e.shouldPause,shouldStop:void 0===e.shouldStop||e.shouldStop,viewportHeight:C.e,viewportWidth:C.f}}componentWillMount(){"undefined"!=typeof window&&(this.updateDimensions(),window.addEventListener("resize",this.updateDimensions))}componentDidMount(){ue(this.props.post)&&(this.visibilityChangeSubscriptionId=m.a.subscribe(e=>{this.handleVisibilityChange(e)})),this.props.scrollerItemRef&&ge(this.props)&&this.props.scrollerItemRef(this,this.state.canLoadContent)}componentWillUnmount(){this.visibilityChangeSubscriptionId&&m.a.unsubscribe(this.visibilityChangeSubscriptionId),this.props.scrollerItemRef&&ge(this.props)&&this.props.scrollerItemRef(void 0),window.removeEventListener("resize",this.updateDimensions),this.iframe&&this.props.post.media&&"embed"===this.props.post.media.type&&this.props.post.media.provider===C.t.Twitter&&c.b(this.iframe)}componentWillReceiveProps(e){!this.state.canLoadContent&&e.shouldLoad&&this.setState({canLoadContent:!0}),void 0!==e.shouldPause&&e.shouldPause!==this.props.shouldPause&&this.shouldFocusContentDebouncer(!e.shouldPause)}getVideoExpandoMaxDimensions(){let e,t=Math.max(C.i,this.state.viewportHeight),i=Math.min(oe,16*t/9);i===oe&&(t=9*oe/16),e=this.state.viewportWidth>=_.c?this.state.viewportWidth<v.m?this.state.viewportWidth-pe-2*le:this.state.viewportWidth-pe-v.f-2*le:this.state.viewportWidth-2*le;const s=this.state.viewportHeight-2*le;if(i>e){t*=e/i,i=e}else if(t>s){const e=s/t;t=s,i*=e}return{maxVideoHeight:t,maxVideoWidth:i}}getVideoMaxDimensions(e,t){let i=C.i,s=C.m;return e.isExpando?this.getVideoExpandoMaxDimensions():(e.isPromotedTrend&&(i=C.r,s=C.s),{maxVideoHeight:i,maxVideoWidth:s})}getMediaInfo(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.state;const{availableWidth:i,goldPostRefactorVariant:s,post:o}=e,a=o.media&&o.media.obfuscated||"";let n=o.media&&!Object(C.E)(o.media)?o.media.content:"",[r,d]=!o.media||Object(C.C)(o.media)||Object(C.D)(o.media)?[0,0]:[o.media.height,o.media.width];if(i&&o.media&&(o.media.type===C.n.IMAGE||o.media.type===C.n.GIFVIDEO)){const e=K(i,o.media.resolutions);e&&(n=e.url,d=e.width,r=e.height)}else if(i&&o.preview&&(e.postCleanupVariant||s)&&Object(Q.a)(o))n=o.preview.url,d=o.preview.width,r=o.preview.height;else if(o&&o.media&&(!e.isListing||e.isExpando)&&(o.media.type===C.n.IMAGE||o.media.type===C.n.GIFVIDEO)){let e;(e=Object(x.b)(o.media.height,o.media.width)&&Object(x.c)(o.media.height)?$(o.media.height,o.media.width,o.media.resolutions):ee(o.media.resolutions))&&(n=e.url,d=e.width,r=e.height)}if(e.isExpando)if(d>t.viewportWidth){r*=t.viewportWidth/d,d=t.viewportWidth}else if(r>t.viewportHeight){const e=t.viewportHeight/r;r=t.viewportHeight,d*=e}const{maxVideoHeight:l,maxVideoWidth:c}=this.getVideoMaxDimensions(e,t);if(o.media&&o.media.type===C.n.VIDEO){const t=r/d;e.isExpando?(r=l,d=c):t>C.c?(r=l,d=Math.min(Math.max(l/t,C.p),c)):(r=Math.min(Math.max(c*t,C.o),l),d=c)}o.media&&o.media.type===C.n.EMBED&&e.isExpando&&o.media.provider!==C.t.Twitter&&(r=l,d=c);let p=!1;if(e.isMiniCard){const e=r/d;p=Math.abs(e-C.c)>.01}return{source:n,obfuscated:a,width:d,height:r,needsBackgroundBlur:p}}shouldBlur(){const{isExpando:e,isOverlay:t,theme:i}=this.props,s=this.isNSFW(),o=this.isSpoiler();return!(e||this.state.isRevealed||t)&&(s&&!i.subredditContext.shouldShowNSFWContent||o)}render(){const{className:e,crosspost:t,flairStyleTemplate:i,forceAspectRatio:s,goldPostRefactorVariant:o,isCommentsPage:a,isExpando:d,isListing:c,isNotCardView:h,isMediumHeight:m,isTitleOnly:v,post:E,postCleanupVariant:y,showCentered:S,showFull:N=!1}=this.props,{canLoadContent:j,forcePause:I,shouldPause:M,shouldStop:L,viewportWidth:F}=this.state,V=(!!y||!!o)&&Object(Q.a)(E);if(!E.media&&!V)return null;const R=I||M,B=L,{source:D,obfuscated:_,height:A,width:z,needsBackgroundBlur:Z}=this.getMediaInfo(this.props,this.state),K={showCentered:S,isListing:c,showFull:N,height:A,width:z},$=Object.assign({},K,{className:e,forceAspectRatio:s,viewportWidth:F}),ee=this.shouldBlur(),te=!(!E.isSponsored||!E.source);if(_&&ee)return n.a.createElement(w.a,se({},$,{blurSrc:_}),n.a.createElement(he,{isVisible:j},n.a.createElement(x.a,se({},K,{className:this.props.imageBoxClassName,contentImageClassName:this.props.imageBoxContentImageClassName,imageClassName:this.props.imageBoxClassName,isListing:c,isNSFW:this.isNSFW(),isSpoiler:this.isSpoiler(),isVideoThumbnail:!!E.media&&E.media.type===C.n.VIDEO,onClick:this.onImageBoxClick,postId:E.id,shouldBlur:ee,source:_,outboundUrl:te&&E.source.outboundUrl||void 0,originalSource:D}))));if(V){const e=this.state.viewportHeight-2*le,i=this.state.viewportWidth-2*le,s=E.preview&&Object(p.a)(E.preview.url)?E.preview.url:D;return n.a.createElement(w.a,se({},$,{blurSrc:Z?s:void 0,isExpando:!!d}),n.a.createElement(he,{isVisible:j},n.a.createElement(x.a,se({},K,{isCrosspost:!!t,isExpando:d,isListing:c,isNSFW:this.isNSFW(),isSpoiler:this.isSpoiler(),maxHeight:d?e:void 0,maxWidth:d?i:void 0,postId:E.id,shouldBlur:ee,source:s,outboundUrl:te&&E.source.outboundUrl||void 0,originalSource:s}))))}if(!E.media)return null;switch(E.media.type){case C.n.RTJSON:const s=Object(U.a)(E,null);if(null===s)return;return N||Object(G.a)(E)?n.a.createElement(T,{canLoadContent:j,className:e,"data-click-id":"text",isCleanupVariant:!!o,isCommentsPage:a,isExpando:d,isMediumHeight:m,isRichTextTruncated:E.media.isRichtextPreview,isTitleOnly:v,postId:E.id,showFull:N},n.a.createElement(k.a,{flairStyleTemplate:i,content:E.isMeta?q(s,E.id):s,mediaMetadata:E.media.mediaMetadata,rtJsonElementProps:xe(this.props),renderMediaAsLinks:c})):null;case C.n.TEXT:if(Object(J.a)(E)){const t="Text post should not include body content";return b.c.withScope(e=>{e.setExtra("info",{post:E,isListing:c,isCommentsPage:a}),b.c.captureMessage(t)}),Object(l.a)()&&console.log("".concat(E.id,": ").concat(t)),n.a.createElement(T,{postId:E.id,className:e,"data-click-id":"text",isCleanupVariant:!!o,isCommentsPage:a,showFull:N},n.a.createElement(H,{flairStyleTemplate:i,html:E.isMeta?Y(E.media.content,E.id,ie.a.hiddenLink):E.media.content}))}return null;case C.n.EMBED:if(this.props.isMiniCard&&E.preview&&E.preview.url)return n.a.createElement(w.a,se({},$,{alwaysWrapMedia:!0}),n.a.createElement(he,{isVisible:j},n.a.createElement(n.a.Fragment,null,n.a.createElement(x.a,se({},K,{className:this.props.imageBoxClassName,contentImageClassName:this.props.imageBoxContentImageClassName,imageClassName:this.props.imageBoxClassName,isExpando:d,isListing:c,isNSFW:this.isNSFW(),isCrosspost:!!t,isSpoiler:this.isSpoiler(),postId:E.id,shouldBlur:ee,source:E.preview.url,originalSource:E.preview.url})),n.a.createElement(W.a,null))));if(C.h.has(E.media.provider)){if(E.media.provider===C.t.Twitter){const e=A||(E.media.isDeleted?ne:re);return n.a.createElement(w.a,se({},$,{alwaysWrapMedia:!0,height:e,showFull:!0,width:ae}),j&&n.a.createElement(n.a.Fragment,null,!A&&(E.media.isDeleted?n.a.createElement("p",{className:ie.a.tweetDeleted},Object(X.c)("This Tweet has been deleted.")):n.a.createElement("div",{className:Object(r.a)(Object(O.a)({isLoading:!0}),ie.a.tweetPlaceholder)})),n.a.createElement(f.a,{childRef:this.storeChildRef,className:Object(r.a)(ie.a.tweetEmbedBox,{[ie.a.isInvisible]:!A}),height:e,isListing:c,isResponsive:!0,onLoad:this.onIframeLoaded,showCentered:S,showFull:!0,source:D,title:E.title,width:ae})))}return n.a.createElement(w.a,se({},$,{alwaysWrapMedia:!0,height:d?A:C.i,width:d?z:C.i*(16/9)}),j&&n.a.createElement(f.a,{childRef:this.storeChildRef,height:d?A:C.i,width:d?z:void 0,isListing:c,isResponsive:!0,onLoad:this.onIframeLoaded,showCentered:S,showFull:N,source:D,title:E.title}))}return n.a.createElement(w.a,se({},$,{alwaysWrapMedia:!0}),j&&n.a.createElement(f.a,se({},K,{isResponsive:d||E.media.provider===C.t.IFrameEmbed,title:E.title,childRef:this.storeChildRef,onLoad:this.onIframeLoaded,source:D,fullWidth:E.media.provider===C.t.IFrameEmbed})));case C.n.GIFVIDEO:{let e=A,t=z;return e>C.i&&(t=z/A*(e=C.i)),n.a.createElement(w.a,se({},$,{blurSrc:Z?E.media.gifBackgroundImage:void 0}),n.a.createElement(he,{isVisible:j},n.a.createElement(P.a,se({},K,{isNotCardView:h,height:d?void 0:e,width:d?void 0:t,postId:E.id,shouldLoad:!0,shouldPause:R,source:D,originalSource:E.media.content}))))}case C.n.VIDEO:{const e=E.media.posterUrl||E.preview&&E.preview.url;return this.props.isMiniCard&&e?n.a.createElement(w.a,se({},$,{alwaysWrapMedia:!0}),n.a.createElement(he,{isVisible:j},n.a.createElement(n.a.Fragment,null,n.a.createElement(x.a,se({},K,{className:this.props.imageBoxClassName,contentImageClassName:this.props.imageBoxContentImageClassName,imageClassName:this.props.imageBoxClassName,isExpando:d,isListing:c,isNSFW:this.isNSFW(),isCrosspost:!!t,isSpoiler:this.isSpoiler(),postId:E.id,shouldBlur:ee,source:e,originalSource:e})),n.a.createElement(W.a,null)))):n.a.createElement(w.a,se({},$,{alwaysWrapMedia:!0,isVideo:!0}),j&&n.a.createElement(g.b,{autoPlay:"boolean"==typeof M?!M:void 0,isExpando:d,postUrl:Object(u.a)(E.permalink),shouldLoad:!0,shouldPause:R,shouldStop:B,hlsSource:E.media.hlsUrl,mpegDashSource:E.media.dashUrl,isGif:E.media.isGif,scrubberThumbSource:E.media.scrubberThumbSource,postId:E.id,callToActionSource:E.source||void 0,callToActionText:E.callToAction,isListing:c,posterUrl:E.media.posterUrl}))}case C.n.IMAGE:const y=this.state.viewportHeight-2*le,I=this.state.viewportWidth-2*le;let L=D;return this.props.isMiniCard&&!this.props.isMiniCardHQPreviews&&(E.thumbnail&&Object(p.a)(E.thumbnail.url)?L=E.thumbnail.url:E.preview&&Object(p.a)(E.preview.url)&&(L=E.preview.url)),n.a.createElement(w.a,se({},$,{blurSrc:Z?L:void 0,isExpando:!!d}),n.a.createElement(he,{isVisible:j},n.a.createElement(x.a,se({},K,{className:this.props.imageBoxClassName,contentImageClassName:this.props.imageBoxContentImageClassName,imageClassName:this.props.imageBoxClassName,isExpando:d,isListing:c,isNSFW:this.isNSFW(),isCrosspost:!!t,isSpoiler:this.isSpoiler(),maxHeight:d?y:void 0,maxWidth:d?I:void 0,postId:E.id,shouldBlur:ee,source:L,outboundUrl:te&&E.source.outboundUrl||void 0,originalSource:E.media.content}))));default:return null}}}t.a=fe(Object(d.a)(we))},"./src/reddit/helpers/canPreviewSelfText/index.ts":function(e,t,i){"use strict";var s=i("./src/reddit/helpers/postHasSelfText/index.ts");t.a=e=>Object(s.a)(e)&&!e.isSpoiler&&!e.isNSFW},"./src/reddit/helpers/postHasSelfText/index.ts":function(e,t,i){"use strict";var s=i("./src/reddit/models/Media/index.ts"),o=i("./src/reddit/models/RichTextJson/index.ts");t.a=e=>{const t=e&&e.media;return!!t&&(t.type===s.n.TEXT&&!!t.content||t.type===s.n.RTJSON&&!Object(o.E)(t.richtextContent))}},"./src/reddit/selectors/experiments/postCleanup.ts":function(e,t,i){"use strict";i.d(t,"e",(function(){return h})),i.d(t,"d",(function(){return m})),i.d(t,"c",(function(){return u})),i.d(t,"b",(function(){return b})),i.d(t,"a",(function(){return g}));var s=i("./node_modules/reselect/es/index.js"),o=i("./src/lib/isUrl/index.ts"),a=i("./src/reddit/constants/experiments.ts"),n=i("./src/reddit/contexts/PageLayer/index.tsx"),r=i("./src/reddit/helpers/chooseVariant/index.ts"),d=i("./src/reddit/selectors/experiments/utils.ts"),l=i("./src/reddit/selectors/platform.ts"),c=i("./src/reddit/selectors/user.ts");const p=Object(s.a)(c.J,(e,t)=>{let{pageLayer:i}=t;return Object(n.z)(i)},n.q,l.i,(e,t)=>{let{pageLayer:i}=t;return Object(n.w)(i)},(e,t,i,s,o)=>!e&&(t||!!i||s&&o)),h=Object(s.a)((e,t)=>Object(r.b)(e,{experimentEligibilitySelector:e=>p(e,t),experimentName:a.C}),d.a),m=e=>e===a.mb.NewOutlineCommentLink2||e===a.mb.NewOutlineCommentLink3,u=e=>e===a.mb.NewOutlineCommentLink3||e===a.mb.NewOutlineCommentLink4||e===a.mb.NewOutlineCommentLink5,b=e=>e===a.mb.NewOutlineCommentLink4||e===a.mb.NewOutlineCommentLink5,g=e=>!(e.media||!e.source||!e.preview||!Object(o.a)(e.preview.url))}}]);
//# sourceMappingURL=CollectionCommentsPage~CommentsPage~Explore~Frontpage~GovernanceReleaseNotesModal~ModListing~ModQueu~c06ba326.a90ec080bb8f06ff4c63.js.map

}
/*
     FILE ARCHIVED ON 23:54:06 Nov 01, 2019 AND RETRIEVED FROM THE
     INTERNET ARCHIVE ON 23:50:11 Feb 19, 2024.
     JAVASCRIPT APPENDED BY WAYBACK MACHINE, COPYRIGHT INTERNET ARCHIVE.

     ALL OTHER CONTENT MAY ALSO BE PROTECTED BY COPYRIGHT (17 U.S.C.
     SECTION 108(a)(3)).
*/
/*
playback timings (ms):
  exclusion.robots: 0.072
  exclusion.robots.policy: 0.062
  cdx.remote: 0.098
  esindex: 0.012
  LoadShardBlock: 252.465 (6)
  PetaboxLoader3.datanode: 202.381 (7)
  load_resource: 134.982
  PetaboxLoader3.resolve: 90.624
*/