var _____WB$wombat$assign$function_____ = function(name) {return (self._wb_wombat && self._wb_wombat.local_init && self._wb_wombat.local_init(name)) || self[name]; };
if (!self.__WB_pmw) { self.__WB_pmw = function(obj) { this.__WB_source = obj; return this; } }
{
  let window = _____WB$wombat$assign$function_____("window");
  let self = _____WB$wombat$assign$function_____("self");
  let document = _____WB$wombat$assign$function_____("document");
  let location = _____WB$wombat$assign$function_____("location");
  let top = _____WB$wombat$assign$function_____("top");
  let parent = _____WB$wombat$assign$function_____("parent");
  let frames = _____WB$wombat$assign$function_____("frames");
  let opener = _____WB$wombat$assign$function_____("opener");

(window.__LOADABLE_LOADED_CHUNKS__=window.__LOADABLE_LOADED_CHUNKS__||[]).push([["Governance~Reddit~removalReasonActions"],{"./src/graphql/operations/CommentToxicity.json":function(t){t.exports=JSON.parse('{"id":"445164f0825f"}')},"./src/reddit/actions/comment/index.ts":function(t,e,n){"use strict";n.d(e,"C",(function(){return ut})),n.d(e,"ib",(function(){return bt})),n.d(e,"n",(function(){return lt})),n.d(e,"R",(function(){return pt})),n.d(e,"gb",(function(){return jt})),n.d(e,"L",(function(){return Et})),n.d(e,"Q",(function(){return yt})),n.d(e,"X",(function(){return St})),n.d(e,"v",(function(){return Ct})),n.d(e,"u",(function(){return Mt})),n.d(e,"t",(function(){return Tt})),n.d(e,"Z",(function(){return At})),n.d(e,"rb",(function(){return It})),n.d(e,"T",(function(){return ht})),n.d(e,"i",(function(){return xt})),n.d(e,"h",(function(){return Dt})),n.d(e,"d",(function(){return kt})),n.d(e,"e",(function(){return Pt})),n.d(e,"c",(function(){return Lt})),n.d(e,"b",(function(){return Kt})),n.d(e,"j",(function(){return vt})),n.d(e,"m",(function(){return Ut})),n.d(e,"N",(function(){return wt})),n.d(e,"M",(function(){return Ft})),n.d(e,"W",(function(){return Ht})),n.d(e,"nb",(function(){return Wt})),n.d(e,"K",(function(){return Qt})),n.d(e,"H",(function(){return Yt})),n.d(e,"cb",(function(){return Xt})),n.d(e,"pb",(function(){return zt})),n.d(e,"S",(function(){return Zt})),n.d(e,"E",(function(){return $t})),n.d(e,"G",(function(){return te})),n.d(e,"F",(function(){return ee})),n.d(e,"D",(function(){return ne})),n.d(e,"mb",(function(){return re})),n.d(e,"kb",(function(){return ce})),n.d(e,"qb",(function(){return ae})),n.d(e,"tb",(function(){return ie})),n.d(e,"lb",(function(){return ue})),n.d(e,"sb",(function(){return Oe})),n.d(e,"jb",(function(){return be})),n.d(e,"Y",(function(){return le})),n.d(e,"p",(function(){return pe})),n.d(e,"o",(function(){return je})),n.d(e,"k",(function(){return fe})),n.d(e,"f",(function(){return _e})),n.d(e,"l",(function(){return Ee})),n.d(e,"O",(function(){return Se})),n.d(e,"s",(function(){return Te})),n.d(e,"P",(function(){return ge})),n.d(e,"ob",(function(){return Re})),n.d(e,"ab",(function(){return Ne})),n.d(e,"bb",(function(){return Ae})),n.d(e,"fb",(function(){return Ie})),n.d(e,"q",(function(){return he})),n.d(e,"I",(function(){return De})),n.d(e,"r",(function(){return ke})),n.d(e,"A",(function(){return Pe})),n.d(e,"z",(function(){return Le})),n.d(e,"B",(function(){return Ke})),n.d(e,"g",(function(){return ve})),n.d(e,"V",(function(){return we})),n.d(e,"U",(function(){return Ve})),n.d(e,"eb",(function(){return Je})),n.d(e,"x",(function(){return He})),n.d(e,"w",(function(){return We})),n.d(e,"y",(function(){return qe})),n.d(e,"db",(function(){return ze})),n.d(e,"hb",(function(){return Ze})),n.d(e,"a",(function(){return $e})),n.d(e,"J",(function(){return tn}));n("./node_modules/core-js/modules/web.dom.iterable.js"),n("./node_modules/core-js/modules/es6.regexp.match.js");var o=n("./src/config.ts"),r=n("./node_modules/fbt/lib/FbtPublic.js"),c=n("./src/telemetry/index.ts"),s=n("./src/lib/constants/index.ts"),d=n("./src/lib/makeActionCreator/index.ts"),a=n("./src/lib/makeCommentsPageKey/index.ts"),i=n("./src/lib/makeDraftKey/index.ts"),m=n("./src/reddit/actions/changeUsername.ts"),u=n("./src/reddit/actions/economics/helpers/async.ts"),O=n("./src/reddit/actions/login.ts"),b=n("./src/reddit/actions/modal.ts"),l=n("./src/reddit/actions/post.ts"),p=n("./src/reddit/actions/postCreation/editorContent.ts"),j=n("./src/reddit/actions/publicAccessNetwork/automute.ts"),f=n("./src/reddit/actions/shortcuts/utils.ts"),_=n("./src/reddit/actions/toaster.ts"),E=n("./src/reddit/actions/vote.ts"),y=n("./src/reddit/components/RichTextEditor/RTEState/index.tsx"),S=n("./src/reddit/constants/adEvents.ts"),C=n("./src/reddit/constants/modals.ts"),M=n("./src/lib/makeApiRequest/index.ts"),T=n("./src/lib/omitHeaders/index.ts"),g=n("./src/reddit/constants/headers.ts"),R=n("./src/reddit/helpers/addRedesignIdentifier/index.ts"),N=n("./src/reddit/models/Comment/addProfileImgParam.ts"),A=n("./src/reddit/models/RichTextJson/addEmotesAsImagesParam.ts"),I=n("./src/reddit/models/RichTextJson/addRTJParam.ts");const h=(t,e)=>Object(M.a)(Object(T.a)(t,[g.a]),{endpoint:Object(R.a)("".concat(t.apiUrl,"/api/save")),method:s.eb.POST,data:{id:e}}),x=(t,e)=>Object(M.a)(Object(T.a)(t,[g.a]),{endpoint:Object(R.a)("".concat(t.apiUrl,"/api/unsave")),method:s.eb.POST,data:{id:e}}),D=(t,e)=>Object(M.a)(Object(T.a)(t,[g.a]),{endpoint:Object(R.a)("".concat(t.apiUrl,"/api/lock")),method:s.eb.POST,data:{id:e}}),k=(t,e)=>Object(M.a)(Object(T.a)(t,[g.a]),{endpoint:Object(R.a)("".concat(t.apiUrl,"/api/unlock")),method:s.eb.POST,data:{id:e}}),P=(t,e)=>Object(M.a)(Object(T.a)(t,[g.a]),{endpoint:"".concat(t.apiUrl,"/api/ignore_reports"),method:s.eb.POST,data:{id:e}}),L=(t,e)=>Object(M.a)(Object(T.a)(t,[g.a]),{endpoint:"".concat(t.apiUrl,"/api/unignore_reports"),method:s.eb.POST,data:{id:e}});var K=n("./src/graphql/operations/CommentToxicity.json"),v=n("./src/lib/makeGqlRequest/index.ts"),U=n("./src/reddit/helpers/genericServerError/index.ts"),w=n("./src/reddit/helpers/r2/normalizeCommentFromR2/index.ts"),F=n("./src/reddit/helpers/r2/normalizeR2APIErrors/index.ts"),G=n("./src/reddit/models/PostCreationForm/index.ts");const B=(t,e,n,o)=>{let r,c;if(o===G.h.MARKDOWN)r=n.text,c=null;else{r=null;let t=null;n.rteState&&(t=y.a.toRichTextJSON(n.rteState).document),c=JSON.stringify({document:t})}return Object(v.a)(t,Object.assign(Object.assign({},K),{variables:{subredditName:e,markdown:r,richText:c}})).then(t=>!t.ok||t.body.data.isValidComment)},V=async(t,e,n,o,r)=>{const c={api_type:"json",return_rtjson:!0,thing_id:e};if(r===G.h.MARKDOWN)c.text=n.text;else{c.text=null;let t=null;n.rteState&&(t=y.a.toRichTextJSON(n.rteState).document),c.richtext_json=JSON.stringify({document:t})}return Object(M.a)(Object(T.a)(t,[g.a]),{method:s.eb.POST,endpoint:Object(R.a)(Object(A.a)(Object(I.a)("".concat(t.apiUrl,"/api/comment.json")))),data:c}).then(t=>t.ok?t.body.json?t.body.json.errors.length?Object.assign(Object.assign({},t),{ok:!1,error:Object(F.a)(t)}):Object.assign(Object.assign({},t),{body:{comment:Object(w.a)(t.body.json.data.things[0].data,o)}}):Object.assign(Object.assign({},t),{body:{comment:Object(w.a)(t.body,o)}}):Object.assign(Object.assign({},t),{error:t.error||Object(U.a)()}))};var J=n("./src/reddit/endpoints/post/index.tsx"),H=n("./src/reddit/endpoints/post/convert.ts"),W=n("./src/reddit/endpoints/publicAccessNetwork/index.ts"),q=n("./src/reddit/featureFlags/index.ts"),Q=n("./src/reddit/helpers/commentList/index.ts"),Y=n("./src/reddit/helpers/dom/index.ts"),X=n("./src/reddit/selectors/telemetry.ts");var z=n("./src/reddit/helpers/trackers/commentsPage.ts"),Z=n("./src/reddit/models/Comment/index.ts"),$=n("./src/reddit/models/Post/index.ts"),tt=n("./src/reddit/models/PostDraft/index.ts"),et=n("./src/reddit/models/RichTextJson/index.ts"),nt=n("./src/reddit/models/RichTextJson/nodeMakers.ts"),ot=n("./src/reddit/models/Toast/index.ts"),rt=n("./src/reddit/models/Vote/index.ts"),ct=n("./src/reddit/selectors/comments.ts"),st=n("./src/reddit/selectors/experiments/avatarsInComments.ts"),dt=n("./src/reddit/selectors/moderatingComments.ts"),at=n("./src/reddit/selectors/platform.ts"),it=n("./src/reddit/selectors/posts.ts"),mt=n("./src/reddit/selectors/user.ts");const ut="COMMENT__STICKIED_COMMENT_SUCCESS",Ot={},bt=Object(d.a)(ut),lt="COMMENT__MUTATED",pt=Object(d.a)(lt),jt=t=>async(e,n,o)=>{let{apiContext:c}=o;if(!Object(mt.J)(n()))return e(Object(O.i)()),void e(Object(b.k)({actionSource:b.a.Save,redirectUrl:Object(ct.n)(n(),{commentId:t})}));const s=n().comments.models[t];if(!s)return;const d=s.isSaved?x:h;if(e(pt({[t]:{isSaved:!s.isSaved}})),(await d(c(),t)).ok){const n=s.isSaved?r.fbt._("Comment unsaved successfully",null,{hk:"UGKHZ"}):r.fbt._("Comment saved successfully",null,{hk:"1BZqMx"}),o=r.fbt._("Undo",null,{hk:"46OwLP"});e(Object(_.e)({text:n,kind:ot.b.Undo,buttonText:o,buttonAction:jt(t)}))}else e(pt({[t]:{isSaved:s.isSaved}}))},ft=t=>"viewing-comment-".concat(t),_t=o.a.telemetry.commentConsumedThreshold,Et=t=>async(e,n)=>{const r=n();if(!Object(ct.o)(r,{commentId:t})||Math.random()>o.a.telemetry.commentSampleRate)return;(t=>{let{state:e,commentId:n}=t;Object(c.a)(Object.assign(Object.assign({source:"comment",action:"view",noun:"comment"},X.defaults(e)),{profile:X.profile(e),post:X.post(e,n),media:X.media(e,n),subreddit:X.subreddit(e),comment:X.comment(e,n)}))})({state:r,commentId:t}),c.c.start(ft(t));const s=setTimeout(()=>(t=>{let{state:e,commentId:n}=t;return Object(c.a)(Object.assign(Object.assign({source:"comment",action:"consume",noun:"comment"},X.defaults(e)),{profile:X.profile(e),post:X.post(e,n),media:X.media(e,n),subreddit:X.subreddit(e),comment:X.comment(e,n)}))})({state:r,commentId:t}),_t);Ot[t]=s},yt=(t,e)=>async(n,o)=>{const r=o(),s=ft(t);if(Object(ct.o)(r,{commentId:t})&&c.c.has(s)){const n=c.c.end(s);!e&&n<_t&&(clearTimeout(Ot[t]),delete Ot[t])}},St=t=>async(e,n,o)=>{let{apiContext:r}=o;if(!Object(mt.J)(n()))return void e(Object(b.i)(C.a.LOGIN_MODAL_ID));const c=n().comments.models[t];if(!c)return;const s=c.isLocked?k:D;e(pt({[t]:{isLocked:!c.isLocked}})),(await s(r(),t)).ok||e(pt({[t]:{isLocked:c.isLocked}}))},Ct="COMMENT__MORECOMMENTS_PENDING",Mt="COMMENT__MORECOMMENTS_LOADED",Tt="COMMENT__MORECOMMENTS_FAILED",gt=Object(d.a)(Ct),Rt=Object(d.a)(Mt),Nt=Object(d.a)(Tt),At=(t,e)=>async(n,r,c)=>{let{apiContext:d}=c;const a=r(),i=a.moreComments.models[e],m=a.platform.currentPage,O=m&&m.routeMatch,b=O&&O.match,{partialPostId:l}=b?b.params:null;if(!l)return;const p=Object($.r)(l);n(gt({moreCommentsId:i.id}));const j=await((t,e,n,r)=>{let c=Object(I.a)(Object(A.a)("".concat(o.a.gatewayUrl,"/desktopapi/v1/morecomments/").concat(e)));return r&&(c=Object(N.a)(c)),Object(M.a)(t,{data:n,endpoint:c,method:s.eb.POST,type:"json",traceRequestName:"more_comments"})})(d(),p,{token:i.token},Object(st.a)(a));if(j.ok){const e=j.body,o=Object(Q.a)(e,p,a);n(Rt(Object.assign({key:t,moreCommentsItem:i,shouldCollapse:o},e)));const r=a.posts.models[p];r&&"subreddit"===r.belongsTo.type&&e.comments&&await n(Object(u.a)({commentIds:Object.keys(j.body.comments),postIds:[r.id],skip:["communityDetails","subscription"],subredditId:r.belongsTo.id}))}else n(Nt(Object.assign({moreCommentsItem:i},j.error)))},It=Object(E.b)(Q.b,rt.a.upvoted),ht=Object(E.b)(Q.b,rt.a.downvoted),xt="COMMENT__FOCUSED_TOGGLED",Dt="COMMENT__FOCUSED_SET",kt="COMMENT__COLLAPSED_TOGGLED",Pt="COMMENT__COLLAPSED_UNSET",Lt="COMMENTS__HIDDEN_TOGGLED",Kt="COMMENTS__HIDDEN_SET",vt="COMMENT_FORM_FOCUS_CHANGED",Ut="COMMENT_MARKED_UNCOLLAPSED",wt=Object(d.a)(xt),Ft=Object(d.a)(Dt),Gt=Object(d.a)(kt),Bt=Object(d.a)(Pt),Vt=(Object(d.a)(Kt),Object(d.a)(Lt),Object(d.a)(vt)),Jt=Object(d.a)(Ut),Ht=t=>{let{hasFocus:e,draftKey:n}=t;return async(t,o)=>{const r=o();if(!!r.comments.drafts[n])if(Object(mt.L)(r)&&e){const o=Vt({hasFocus:e,draftKey:n});t(Object(m.f)(o))}else t(Vt({hasFocus:e,draftKey:n}))}},Wt=t=>{let{commentId:e,commentsPageKey:n,scrollToAndRemeasure:o}=t;return async(t,r)=>{const c=r(),s=Object(Z.g)(e),d=Object(ct.p)(c,{commentLink:s,commentsPageKey:n}),a=Object(dt.b)(c,{commentId:e,commentsPageKey:n}),i=d.depth;t(Gt({commentId:e,commentsPageKey:n,isCollapsed:a})),a||0!==i||o(e,!0),Object(f.d)()}},qt=t=>{let{commentId:e,commentsPageKey:n}=t;return async(t,o)=>{t(Bt({commentId:e,commentsPageKey:n}))}},Qt=t=>{let{commentLink:e,commentsPageKey:n,lineDepth:o,scrollToAndRemeasure:r}=t;return async(t,c)=>{const s=c(),d=Object(Q.e)(n,e,o,s),a=Object(dt.b)(s,{commentId:e.id,commentsPageKey:n});t(Gt({commentId:d,commentsPageKey:n,isCollapsed:a})),0===o&&r(d,!0),Object(f.d)()}},Yt=t=>async(e,n,o)=>{let{apiContext:r}=o;const c=n(),d=c.comments.models[t],a=c.user.account?c.user.account.displayText:null;d&&a&&(e(pt({[t]:{isApproved:!0,approvedBy:a,bannedBy:null,isRemoved:!1,isSpam:!1,modNote:null,modReasonBy:null,modRemovalReason:null,numReports:0}})),(await((t,e)=>Object(M.a)(Object(T.a)(t,[g.a]),{endpoint:Object(R.a)("".concat(t.apiUrl,"/api/approve")),method:s.eb.POST,data:{id:e}}))(r(),t)).ok||e(pt({[t]:{isApproved:d.isApproved,approvedBy:null,bannedBy:d.bannedBy,isRemoved:d.isRemoved,isSpam:d.isSpam,modNote:d.modNote,modReasonBy:d.modReasonBy,modRemovalReason:d.modRemovalReason,numReports:d.numReports||null}})),Object(f.d)())},Xt=(t,e)=>async(n,o,r)=>{let{apiContext:c}=r;const d=o(),a=d.comments.models[t],i=d.user.account?d.user.account.displayText:null;a&&i&&(n(pt({[t]:{approvedBy:null,bannedBy:i,isApproved:!1,isRemoved:!e,isSpam:e}})),(await((t,e,n)=>Object(M.a)(Object(T.a)(t,[g.a]),{endpoint:Object(R.a)("".concat(t.apiUrl,"/api/remove")),method:s.eb.POST,data:{id:e,spam:n}}))(c(),t,e)).ok||n(pt({[t]:{approvedBy:a.approvedBy,bannedBy:a.bannedBy,isApproved:a.isApproved,isRemoved:a.isRemoved,isSpam:a.isSpam}})),Object(f.d)())},zt=t=>async(e,n,o)=>{let{apiContext:r}=o;const c=n().comments.models[t];if(!c)return;const s=c.ignoreReports?L:P;e(pt({[t]:{ignoreReports:!c.ignoreReports}})),(await s(r(),t)).ok||e(pt({[t]:{ignoreReports:c.ignoreReports}}))},Zt=(t,e,n)=>async(o,r,c)=>{let{apiContext:d}=c;const i=r(),m=i.comments.models[t];if(!m)return;const u=m.postId,O=i.postStickiedComments.data[u],b=s.g[e];o(pt({[t]:{distinguishType:e,isAdmin:e===s.C.ADMIN,isMod:e===s.C.MODERATOR,isStickied:!!n}})),n&&O&&O!==t&&o(pt({[O]:{isStickied:!1}})),(await((t,e,n,o)=>Object(M.a)(Object(T.a)(t,[g.a]),{endpoint:Object(R.a)("".concat(t.apiUrl,"/api/distinguish/").concat(n)),method:s.eb.POST,data:{id:e,sticky:o}}))(d(),t,b,n||null)).ok?n&&o(bt({id:t,postId:u,commentsPageKey:Object(a.a)(u,null,Object.assign({sort:s.r.CONFIDENCE},i.platform.currentPage.queryParams))})):(o(pt({[t]:{distinguishType:m.distinguishType,isAdmin:m.isAdmin,isMod:m.isMod,isStickied:m.isStickied}})),o(pt({[O]:{isStickied:i.comments.models[O].isStickied}})))},$t="COMMENT__SUBMIT_COMMENT_PENDING",te="COMMENT__SUBMIT_REPLY_TO_POST_SUCCESS",ee="COMMENT__SUBMIT_REPLY_TO_COMMENT_SUCCESS",ne="COMMENT__SUBMIT_COMMENT_FAILURE",oe=Object(d.a)($t),re=Object(d.a)(te),ce=Object(d.a)(ee),se=Object(d.a)(ne),de=(t,e,n,o)=>{const r=o.ok&&o.body,c=r&&r.comment&&r.comment.id;z.f(t,n,e,c)},ae="Toxicity_Warning__Modal",ie=(t,e,n,o,r,c)=>async(s,d,a)=>{let{gqlContext:i}=a;const m=d(),u=Object(at.f)(m);let O="";if(u&&(O=u.name),q.d.enableToxicityWarning(m)){if(!(await B(i(),O,o,r)))return void s(Object(b.i)(ae))}s(ue(t,e,n,o,r,c))},me=t=>t.rteState?y.a.toRichTextJSON(t.rteState):t.rtJson||t.text,ue=(t,e,n,o,c,d,a)=>async(i,m,u)=>{let{apiContext:O}=u;i(Object(b.g)(ae));const p=m(),E=p.comments.submit.pending[n];if(!p.user.account||E)return;i(oe({draftKey:n,draft:o}));const y=p.user.account.displayText,C=o.commentMode;let M;if(a?(M=await Object(W.j)(O(),t,o,y),i(Object(j.a)({streamId:t,level:M.body.automuteLevel}))):M=await V(O(),t,o,y,C),M.ok){let o;o=M.body,i(re(Object.assign(Object.assign({},o),{headCommentId:Object(ct.y)(p,{commentsPageKey:e}),commentsPageKey:e,draftKey:n})));const r=Object(it.O)(m(),{postId:t});i(Object(l.t)(r,S.a.CommentSubmitted))}else{M.error&&M.error.type===s.Db&&z.g(p,me(o),t);const e=M.error&&M.error.fields&&M.error.fields[0]?M.error.fields[0].msg:r.fbt._("Something went wrong",null,{hk:"LWFS0"});i(se({draftKey:n,error:M.error})),i(Object(_.e)({duration:_.a,kind:ot.b.Error,text:e}))}de(m(),e,c,M),d||Object(f.d)()},Oe=t=>async(e,n,o)=>{let{gqlContext:r}=o;const{parentCommentId:c,commentsPageKey:s,parentCommentDepth:d,draftKey:a,formData:i,editorMode:m}=t,u=n(),O=Object(at.f)(u);let l="";if(O&&(l=O.name),q.d.enableToxicityWarning(u)){if(!(await B(r(),l,i,m)))return void e(Object(b.i)(ae))}e(be({commentsPageKey:s,draftKey:a,parentCommentDepth:d,parentCommentId:c,formData:i,editorMode:m}))},be=t=>async(e,n,o)=>{let{apiContext:r}=o;const{parentCommentId:c,commentsPageKey:d,parentCommentDepth:a,draftKey:i,formData:m,editorMode:u}=t;e(Object(b.g)(ae));const O=n(),l=O.comments.submit.pending[i];if(!O.user.account||l)return;e(oe({draftKey:i,draft:m}));const p=O.user.account.displayText,j=m.commentMode,_=await V(r(),c,m,p,j);if(_.ok)e(ce(Object.assign(Object.assign({},_.body),{parentCommentId:c,commentsPageKey:d,draftKey:i,depth:a+1})));else{if(_.error&&_.error.type===s.Db){const t=Object(ct.o)(O,{commentId:c});if(!t)return;z.g(O,me(m),t.postId,c)}e(se({draftKey:i,error:_.error}))}de(n(),d,u,_),Object(f.d)()},le=t=>async(e,n,o)=>{let{apiContext:r}=o;n().comments.models[t]&&(await((t,e)=>Object(M.a)(Object(T.a)(t,[g.a]),{endpoint:"".concat(t.apiUrl,"/api/show_comment"),method:s.eb.POST,data:{id:e}}))(r(),t)).ok&&e((t=>async(e,n,o)=>{let{apiContext:r}=o;e(Jt({commentId:t}))})(t))},pe="COMMENT__COMMENT_REPLY_FORM_OPENED",je="COMMENT__COMMENT_REPLY_FORM_CANCELLED",fe="COMMENT__COMMENT_FORM_MUTATED",_e="COMMENT__COMMENT_DRAFT_CLEARED",Ee="COMMENT__COMMENT_FORM_SWITCHED_MODE",ye=Object(d.a)(pe),Se=Object(d.a)(je),Ce=Object(d.a)(fe),Me=(Object(d.a)(_e),Object(d.a)(Ee)),Te="INITIALIZE_COMMENT_EDITOR_MODE",ge=(Object(d.a)(Te),(t,e,n)=>async(o,c,s)=>{let{apiContext:d}=s;const a=t===G.h.RICH_TEXT;if(!e||"object"==typeof e&&Object(et.G)(e))o(Me({editorMode:t,draftKey:n,content:a?et.i:""})),o(Object(p.c)(t));else{o(Object(p.b)(n));const c=await Object(H.a)(d(),t,a?e:JSON.stringify(e));if(c.ok){const e=c.body.output;o(Object(p.a)(n)),o(Me({editorMode:t,draftKey:n,content:e})),o(Object(p.c)(t))}else o(Object(p.a)(n)),o(Object(_.e)({duration:_.a,kind:ot.b.Error,text:r.fbt._("Something went wrong",null,{hk:"LWFS0"})}))}}),Re=t=>{let{commentsPageKey:e,parentCommentId:n,singleOpen:o}=t;return async(t,r)=>{const c=r(),s=Object(i.a)(tt.c.replyToComment,n);if(!Object(mt.J)(r()))return t(Object(O.i)()),void t(Object(b.k)({actionSource:b.a.Reply,redirectUrl:Object(ct.n)(r(),{commentId:n})}));const d=c.comments.replyFormOpen[e],a=d&&d[n];if((a||d&&o)&&(Object.keys(d).forEach(n=>d[n]&&t(Se({parentCommentId:n,commentsPageKey:e}))),a))return;let u="",l=null;const p=c.user.prefs.commentMode,j=Object(Y.d)();if(j){const t=j.filter(t=>!!t&&10!==t.charCodeAt(0));if(p===G.h.MARKDOWN)u=t.map(t=>"> ".concat(t,"\n")).join("");else{const e=t.map(t=>nt.s(t,null)).map(t=>nt.l([t])),n=nt.s("",null),o=nt.l([n]);l={document:[nt.c(e),o]}}}const f=c.comments.drafts[s];let _;if(_=j?{commentMode:p,draftType:tt.c.replyToComment,rtJson:l,text:"".concat(u,"\n")}:f||{commentMode:p,draftType:tt.c.replyToComment,rtJson:l,text:""},Object(mt.L)(c)){const o=ye({parentCommentId:n,commentsPageKey:e,draftKey:s,formData:_});t(Object(m.f)(o))}else t(ye({parentCommentId:n,commentsPageKey:e,draftKey:s,formData:_}))}},Ne=t=>async(e,n)=>{e(qt(t)),e(we(t))},Ae=t=>{let{parentCommentId:e,commentsPageKey:n}=t;return async(t,o)=>{t(Se({parentCommentId:e,commentsPageKey:n})),t(Re({parentCommentId:e,commentsPageKey:n})),t(qt({commentId:e,commentsPageKey:n}))}},Ie=(t,e)=>n=>n(Ce({draftKey:t,formData:e})),he="COMMENT__DISABLE_AUTOFOCUS",xe=Object(d.a)(he),De=t=>e=>e(xe({draftKey:t})),ke="COMMENT__EDIT_COMMENT_ENABLED",Pe="COMMENT__REQUEST_EDIT_PENDING",Le="COMMENT__REQUEST_EDIT_FAILURE",Ke="COMMENT__REQUEST_EDIT_SUCCESS",ve="COMMENT__COMMENT_EDIT_FORM_CANCELLED",Ue=Object(d.a)(ke),we=t=>{let{commentId:e,commentMode:n,commentsPageKey:o,draftKey:r,text:c}=t;return async(t,s)=>{const d=s();d.user.account&&(z.c(d),t(Ue({commentId:e,commentsPageKey:o,draftKey:r,formData:{text:c,commentMode:n,rteState:null,draftType:tt.c.edit,hasFocus:!0}})))}},Fe=Object(d.a)(Pe),Ge=Object(d.a)(Le),Be=Object(d.a)(Ke),Ve=Object(d.a)(ve),Je=t=>{let{id:e,commentsPageKey:n,depth:o,draftKey:r,formData:c}=t;return async(t,o,d)=>{let{apiContext:a}=d;const i=o();if(!i.user.account)return;t(Fe({draftKey:r})),z.d(i);const m=i.user.account.displayText||"",u=c.commentMode,O=await(async(t,e,n,o,r,c)=>{const d={api_type:"json",return_rtjson:!0,thing_id:e};if(c===G.h.MARKDOWN)d.text=o.text;else{d.text=null;let t=null;o.rteState&&(t=y.a.toRichTextJSON(o.rteState).document),d.richtext_json=JSON.stringify({document:t})}return Object(M.a)(Object(T.a)(t,[g.a]),{endpoint:Object(R.a)(Object(I.a)(Object(A.a)("".concat(t.apiUrl,"/api/editusertext")))),method:s.eb.POST,data:d}).then(t=>t.ok?t.body.json?t.body.json.errors.length?Object.assign(Object.assign({},t),{ok:!1,error:Object(F.a)(t)}):Object.assign(Object.assign({},t),{body:{comment:Object(w.a)(t.body.json.data.things[0].data,r)}}):Object.assign(Object.assign({},t),{body:{comment:Object(w.a)(t.body,r)}}):Object.assign(Object.assign({},t),{error:t.error||Object(U.a)()}))})(a(),e,0,c,m,u);if(O.ok){const o=O.body;t(Be({commentId:e,commentsPageKey:n,draftKey:r})),t(pt({[e]:Object.assign({},o.comment)}))}else t(Ge({draftKey:r,error:O.error}))}},He="COMMENT__REQUEST_DELETE_PENDING",We="COMMENT__REQUEST_DELETE_FAILURE",qe="COMMENT__REQUEST_DELETE_SUCCESS",Qe=Object(d.a)(He),Ye=Object(d.a)(We),Xe=Object(d.a)(qe),ze=(t,e)=>async(n,o,r)=>{let{apiContext:c}=r;const d=o();n(Qe({id:t})),z.a(t,d);const a=await((t,e)=>Object(M.a)(Object(T.a)(t,[g.a]),{endpoint:Object(R.a)("".concat(t.apiUrl,"/api/del")),method:s.eb.POST,data:{id:e}}).then(t=>t.ok?t.body.json&&t.body.json.errors.length?Object.assign(Object.assign({},t),{ok:!1,error:Object(F.a)(t)}):Object.assign(Object.assign({},t),{body:{}}):Object.assign(Object.assign({},t),{error:t.error||Object(U.a)()})))(c(),t);a.ok?n(Xe({id:t,postId:e})):n(Ye({id:t,error:a.error}))},Ze=t=>async(e,n,o)=>{let{apiContext:r}=o;const c=!n().comments.models[t].sendReplies;e(pt({[t]:{sendReplies:c}})),(await Object(J.q)(r(),t,c)).ok||e(pt({[t]:{sendReplies:!c}}))},$e="COMMENT__CHANGE_HIGHLIGHT_FILTER",tn=Object(d.a)($e)},"./src/reddit/actions/postCreation/editorContent.ts":function(t,e,n){"use strict";n.d(e,"b",(function(){return b})),n.d(e,"a",(function(){return l})),n.d(e,"d",(function(){return j})),n.d(e,"c",(function(){return f}));var o=n("./node_modules/fbt/lib/FbtPublic.js"),r=n("./src/lib/makeActionCreator/index.ts"),c=n("./src/reddit/actions/toaster.ts"),s=n("./src/reddit/endpoints/post/convert.ts"),d=n("./src/reddit/helpers/localStorage/index.ts"),a=n("./src/reddit/helpers/trackers/postComposer.ts"),i=n("./src/reddit/models/PostCreationForm/index.ts"),m=n("./src/reddit/models/RichTextJson/index.ts"),u=n("./src/reddit/models/Toast/index.ts"),O=n("./src/reddit/actions/postCreation/constants.ts");const b=Object(r.a)(O.D),l=Object(r.a)(O.p),p=Object(r.a)(O.N),j=(t,e,n)=>async(r,d,j)=>{let{apiContext:_}=j;a.i(d(),e);const E=e===i.h.MARKDOWN,y=e===i.h.RICH_TEXT,S=O.k;if(E&&Object(m.G)(n))return r(p({editorKey:t,editorMode:i.h.MARKDOWN,content:""})),void r(f(e));if(y&&!n)return r(p({editorKey:t,editorMode:i.h.RICH_TEXT,content:m.i})),void r(f(e));r(b(S));const C=await Object(s.a)(_(),e,E?JSON.stringify(n):n);C.ok?(r(l(S)),r(p({editorKey:t,editorMode:e,content:C.body.output})),r(f(e))):(r(l(S)),r(Object(c.e)({duration:c.a,kind:u.b.Error,text:o.fbt._("Something went wrong",null,{hk:"3UtpxU"})})))},f=t=>async(e,n)=>{const r=Object(d.j)();if(r>=3)return;const s=n().user.prefs.useMarkdown?i.h.MARKDOWN:i.h.RICH_TEXT;if(t===s)return;const a=t===i.h.MARKDOWN?o.fbt._("You can set Markdown as the default editor mode in the settings",null,{hk:"yvN18"}):o.fbt._("You can set Fancy Pants as the default editor mode in the settings",null,{hk:"4kQi5k"});e(Object(c.e)({buttonAction:async()=>{window.open("/settings/feed")},buttonText:o.fbt._("Open Settings",null,{hk:"1CKz9o"}),kind:u.b.SuccessCommunity,text:a})),Object(d.X)(r+1)}},"./src/reddit/actions/publicAccessNetwork/automute.ts":function(t,e,n){"use strict";n.d(e,"a",(function(){return s})),n.d(e,"b",(function(){return a}));var o=n("./src/lib/makeActionCreator/index.ts"),r=n("./src/reddit/endpoints/publicAccessNetwork/index.ts"),c=n("./src/reddit/actions/publicAccessNetwork/constants.ts");const s=Object(o.a)(c.r),d=Object(o.a)(c.F),a=t=>async(e,n,o)=>{let{apiContext:c}=o;const a=await Object(r.a)(c(),t);a&&a.ok?e(s({streamId:t,level:a.body.data.auto_mute_status.level})):e(d(t))}},"./src/reddit/actions/removalReasons/constants.ts":function(t,e,n){"use strict";n.d(e,"k",(function(){return o})),n.d(e,"l",(function(){return r})),n.d(e,"j",(function(){return c})),n.d(e,"b",(function(){return s})),n.d(e,"c",(function(){return d})),n.d(e,"a",(function(){return a})),n.d(e,"h",(function(){return i})),n.d(e,"i",(function(){return m})),n.d(e,"g",(function(){return u})),n.d(e,"e",(function(){return O})),n.d(e,"f",(function(){return b})),n.d(e,"d",(function(){return l})),n.d(e,"r",(function(){return p})),n.d(e,"s",(function(){return j})),n.d(e,"q",(function(){return f})),n.d(e,"n",(function(){return _})),n.d(e,"o",(function(){return E})),n.d(e,"p",(function(){return y})),n.d(e,"m",(function(){return S})),n.d(e,"t",(function(){return C}));const o="REMOVALREASONS__LOAD_PENDING",r="REMOVALREASONS__LOAD_SUCCESS",c="REMOVALREASONS__LOAD_FAILED",s="REMOVALREASONS__ADD_PENDING",d="REMOVALREASONS__ADD_SUCCESS",a="REMOVALREASONS__ADD_FAILED",i="REMOVALREASONS__EDIT_PENDING",m="REMOVALREASONS__EDIT_SUCCESS",u="REMOVALREASONS__EDIT_FAILED",O="REMOVALREASONS__DELETE_PENDING",b="REMOVALREASONS__DELETE_SUCCESS",l="REMOVALREASONS__DELETE_FAILED",p="REMOVALREASONS__SUBMIT_PENDING",j="REMOVALREASONS__SUBMIT_SUCCESS",f="REMOVALREASONS__SUBMIT_FAILED",_="REMOVALREASONS__MESSAGE_PENDING",E="REMOVALREASONS__MESSAGE_PRIVATE_SUCCESS",y="REMOVALREASONS__MESSAGE_PUBLIC_SUCCESS",S="REMOVALREASONS__MESSAGE_FAILED",C="REMOVALREASONS__REMOVEDITEMS_SELECTED"},"./src/reddit/endpoints/post/convert.ts":function(t,e,n){"use strict";var o=n("./src/lib/constants/index.ts"),r=n("./src/lib/makeApiRequest/index.ts"),c=n("./src/lib/omitHeaders/index.ts"),s=n("./src/reddit/constants/headers.ts"),d=n("./src/reddit/helpers/addRedesignIdentifier/index.ts"),a=n("./src/reddit/models/PostCreationForm/index.ts");e.a=(t,e,n)=>{const i={output_mode:"markdown"===e?e:"rtjson"};return e===a.h.MARKDOWN?i.richtext_json=n:i.markdown_text=n,Object(r.a)(Object(c.a)(t,[s.a]),{endpoint:Object(d.a)("".concat(t.apiUrl,"/api/convert_rte_body_format")),method:o.eb.POST,data:i})}},"./src/reddit/helpers/trackers/commentsPage.ts":function(t,e,n){"use strict";n.d(e,"f",(function(){return m})),n.d(e,"g",(function(){return u})),n.d(e,"b",(function(){return O})),n.d(e,"e",(function(){return b})),n.d(e,"a",(function(){return l})),n.d(e,"c",(function(){return p})),n.d(e,"d",(function(){return j}));var o=n("./src/telemetry/index.ts"),r=n("./src/reddit/constants/tracking.ts"),c=n("./src/reddit/models/PostDraft/index.ts"),s=n("./src/reddit/selectors/comments.ts"),d=n("./src/reddit/selectors/platform.ts"),a=n("./src/reddit/selectors/telemetry.ts");const i=t=>{const e=Object(d.o)(t);return Object.assign(Object.assign({source:"comment_composer",action:r.c.CLICK},Object(a.defaults)(t)),{screen:Object(a.screen)(t),subreddit:Object(a.subreddit)(t),post:e?Object(a.post)(t,e):null,profile:Object(a.profile)(t)})},m=(t,e,n,r)=>{const c={commentId:r,commentsPageKey:n},d=r&&Object(s.k)(t,c)||0;return Object(o.a)(Object.assign(Object.assign({noun:"comment"},i(t)),{comment:r?Object(a.comment)(t,r):null,listing:Object(a.listing)(t,void 0,{depth:d}),commentComposer:{editorMode:e}}))},u=(t,e,n,r)=>{const c=i(t);return Object(o.a)(Object.assign(Object.assign({},c),{actionInfo:Object.assign(Object.assign({},c.actionInfo),{reason:"karma_rate_limit"}),source:"backend",action:"error",noun:"comment",comment:{bodyText:e,parentId:r,postId:n}}))},O=t=>Object(o.a)(Object.assign({noun:"cancel"},i(t))),b=(t,e)=>{e===c.c.replyToPost&&Object(o.a)(Object.assign({noun:"input"},i(t)))},l=(t,e)=>Object(o.a)(Object.assign(Object.assign({source:"comment",noun:"delete",action:"click"},Object(a.defaults)(e)),{screen:Object(a.screen)(e),subreddit:Object(a.subreddit)(e),post:Object(a.post)(e,t)})),p=t=>Object(o.a)(Object.assign({noun:"edit"},i(t))),j=t=>Object(o.a)(Object.assign({noun:"save_edit"},i(t)))},"./src/reddit/selectors/moderatingComments.ts":function(t,e,n){"use strict";n.d(e,"b",(function(){return o})),n.d(e,"a",(function(){return r}));const o=(t,e)=>{let{commentId:n,commentsPageKey:o}=e;if(!n)return!1;if(t.comments.collapsed[o]&&n in t.comments.collapsed[o])return!!t.comments.collapsed[o][n];const r=t.comments.models[n];return!!r&&("computedCollapsed"in r?!!r.computedCollapsed:r.collapsedBecauseCrowdControl?!t.modModeEnabled:r.collapsed)},r=(t,e)=>{let{commentId:n}=e;if(!n)return!1;const o=t.comments.models[n];return!(!o||!o.collapsedBecauseCrowdControl)&&t.modModeEnabled}}}]);
//# sourceMappingURL=https://www.redditstatic.com/desktop2x/Governance~Reddit~removalReasonActions.014bfedeb0ff6411ff5e.js.map

}
/*
     FILE ARCHIVED ON 01:43:10 Dec 01, 2020 AND RETRIEVED FROM THE
     INTERNET ARCHIVE ON 00:50:47 Feb 20, 2024.
     JAVASCRIPT APPENDED BY WAYBACK MACHINE, COPYRIGHT INTERNET ARCHIVE.

     ALL OTHER CONTENT MAY ALSO BE PROTECTED BY COPYRIGHT (17 U.S.C.
     SECTION 108(a)(3)).
*/
/*
playback timings (ms):
  exclusion.robots: 0.065
  exclusion.robots.policy: 0.055
  cdx.remote: 0.102
  esindex: 0.013
  LoadShardBlock: 290.041 (6)
  PetaboxLoader3.datanode: 247.54 (8)
  load_resource: 173.815 (2)
  PetaboxLoader3.resolve: 106.169 (2)
*/