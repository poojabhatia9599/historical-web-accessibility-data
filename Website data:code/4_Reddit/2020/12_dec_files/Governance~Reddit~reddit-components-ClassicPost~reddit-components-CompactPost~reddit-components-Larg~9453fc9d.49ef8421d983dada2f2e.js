var _____WB$wombat$assign$function_____ = function(name) {return (self._wb_wombat && self._wb_wombat.local_init && self._wb_wombat.local_init(name)) || self[name]; };
if (!self.__WB_pmw) { self.__WB_pmw = function(obj) { this.__WB_source = obj; return this; } }
{
  let window = _____WB$wombat$assign$function_____("window");
  let self = _____WB$wombat$assign$function_____("self");
  let document = _____WB$wombat$assign$function_____("document");
  let location = _____WB$wombat$assign$function_____("location");
  let top = _____WB$wombat$assign$function_____("top");
  let parent = _____WB$wombat$assign$function_____("parent");
  let frames = _____WB$wombat$assign$function_____("frames");
  let opener = _____WB$wombat$assign$function_____("opener");

(window.__LOADABLE_LOADED_CHUNKS__=window.__LOADABLE_LOADED_CHUNKS__||[]).push([["Governance~Reddit~reddit-components-ClassicPost~reddit-components-CompactPost~reddit-components-Larg~9453fc9d"],{"./src/graphql/operations/AwardSheetInfo.json":function(t){t.exports=JSON.parse('{"id":"e1be3a261389"}')},"./src/graphql/operations/AwardSheetInfoForProfile.json":function(t){t.exports=JSON.parse('{"id":"3a33281f30db"}')},"./src/graphql/operations/CreateCommunityAward.json":function(t){t.exports=JSON.parse('{"id":"38852e4f82b0"}')},"./src/graphql/operations/CreateGlobalAward.json":function(t){t.exports=JSON.parse('{"id":"c11324579f8c"}')},"./src/graphql/operations/CreateModAward.json":function(t){t.exports=JSON.parse('{"id":"a04c85b4e964"}')},"./src/graphql/operations/CreateSubredditTags.json":function(t){t.exports=JSON.parse('{"id":"80c9a3cd96b8"}')},"./src/graphql/operations/DisableAwardInCommunity.json":function(t){t.exports=JSON.parse('{"id":"689f37138ede"}')},"./src/graphql/operations/EnableAwardInCommunity.json":function(t){t.exports=JSON.parse('{"id":"3c2210d8ba4b"}')},"./src/graphql/operations/FetchGlobalTags.json":function(t){t.exports=JSON.parse('{"id":"f4a581740c21"}')},"./src/graphql/operations/FetchSubredditTags.json":function(t){t.exports=JSON.parse('{"id":"bac623887684"}')},"./src/graphql/operations/FetchSubredditsNotificationSettings.json":function(t){t.exports=JSON.parse('{"id":"5d042135b4c5"}')},"./src/graphql/operations/GetSubredditQuestions.json":function(t){t.exports=JSON.parse('{"id":"65f76f8ef4c5"}')},"./src/graphql/operations/GlobalAwards.json":function(t){t.exports=JSON.parse('{"id":"16101a740cd7"}')},"./src/graphql/operations/ManageableAwards.json":function(t){t.exports=JSON.parse('{"id":"bce139cc4904"}')},"./src/graphql/operations/ManageableAwardsForProfile.json":function(t){t.exports=JSON.parse('{"id":"f2dc00a6f019"}')},"./src/graphql/operations/MaybeDeleteTagsAndUpdateItemTags.json":function(t){t.exports=JSON.parse('{"id":"023547ccdaf6"}')},"./src/graphql/operations/OtherDiscussions.json":function(t){t.exports=JSON.parse('{"id":"5577168b5842"}')},"./src/graphql/operations/PostFeedAndOtherDiscussions.json":function(t){t.exports=JSON.parse('{"id":"18bd2b41af35"}')},"./src/graphql/operations/ProfileModHubPage.json":function(t){t.exports=JSON.parse('{"id":"1b1c4964ee65"}')},"./src/graphql/operations/ReallocatePowerups.json":function(t){t.exports=JSON.parse('{"id":"d02bf38ca840"}')},"./src/graphql/operations/RedditorKarma.json":function(t){t.exports=JSON.parse('{"id":"db6eb1356b13"}')},"./src/graphql/operations/RedditorPowerups.json":function(t){t.exports=JSON.parse('{"id":"e2bcd0fbaace"}')},"./src/graphql/operations/RemoveCommunityAward.json":function(t){t.exports=JSON.parse('{"id":"973872832463"}')},"./src/graphql/operations/SubredditAbout.json":function(t){t.exports=JSON.parse('{"id":"b85af9fd9703"}')},"./src/graphql/operations/SubredditLinks.json":function(t){t.exports=JSON.parse('{"id":"e74dba05ccd0"}')},"./src/graphql/operations/SubredditPage.json":function(t){t.exports=JSON.parse('{"id":"2ec3426a0a3c"}')},"./src/graphql/operations/SubredditPosts.json":function(t){t.exports=JSON.parse('{"id":"d2da99b5de33"}')},"./src/graphql/operations/SubredditPowerups.json":function(t){t.exports=JSON.parse('{"id":"673c430fbc2a"}')},"./src/graphql/operations/SubredditPowerupsFull.json":function(t){t.exports=JSON.parse('{"id":"51691b540666"}')},"./src/graphql/operations/SubredditRules.json":function(t){t.exports=JSON.parse('{"id":"0df127946e72"}')},"./src/graphql/operations/SubredditsPosts.json":function(t){t.exports=JSON.parse('{"id":"a291db240be3"}')},"./src/graphql/operations/SubscribedSubreddits.json":function(t){t.exports=JSON.parse('{"id":"84f02d14f38a"}')},"./src/graphql/operations/TopAwardedPosts.json":function(t){t.exports=JSON.parse('{"id":"66a7f735dbfd"}')},"./src/graphql/operations/TopAwardersLeaderboard.json":function(t){t.exports=JSON.parse('{"id":"2a194e7926dd"}')},"./src/graphql/operations/UpdateSubredditNotificationSettings.json":function(t){t.exports=JSON.parse('{"id":"0af4f630a2e1"}')},"./src/graphql/operations/UpdateSubredditPrimaryTag.json":function(t){t.exports=JSON.parse('{"id":"a2d0aa1efdbc"}')},"./src/graphql/operations/UpdateSubredditTagStatesRelevance.json":function(t){t.exports=JSON.parse('{"id":"ee43ccb6e5eb"}')},"./src/graphql/operations/UserPowerups.json":function(t){t.exports=JSON.parse('{"id":"5460e33eb672"}')},"./src/lib/constants/specialMembership.ts":function(t,e,s){"use strict";s.d(e,"a",(function(){return r}));const r="custom"},"./src/lib/makeLinkedPostsListingKey/index.ts":function(t,e,s){"use strict";e.a=t=>{return"linkedPosts--[post:'".concat(t,"']")}},"./src/lib/stringInterpolate/index.ts":function(t,e,s){"use strict";s.d(e,"a",(function(){return r}));s("./node_modules/core-js/modules/es6.regexp.replace.js");function r(t,e){return t&&e?t.replace(/%\{(\w+)\}/g,(t,s)=>{const r=e[s];return null==r?s:String(r)}):t}},"./src/reddit/actions/actionBarAnimation/constants.ts":function(t,e,s){"use strict";s.d(e,"a",(function(){return r}));const r="UPDATE_DISCOUNT_ANIMATION"},"./src/reddit/actions/actionBarAnimation/index.ts":function(t,e,s){"use strict";s.d(e,"a",(function(){return i}));var r=s("./src/lib/makeActionCreator/index.ts"),n=s("./src/reddit/actions/actionBarAnimation/constants.ts");const i=Object(r.a)(n.a)},"./src/reddit/actions/category/constants.ts":function(t,e,s){"use strict";s.d(e,"c",(function(){return r})),s.d(e,"b",(function(){return n})),s.d(e,"a",(function(){return i})),s.d(e,"g",(function(){return o})),s.d(e,"f",(function(){return d})),s.d(e,"e",(function(){return c})),s.d(e,"d",(function(){return a}));const r="CATEGORY__LIST_PENDING",n="CATEGORY__LIST_LOADED",i="CATEGORY__LIST_FAILED",o="CATEGORY__SUBREDDITS_PENDING",d="CATEGORY__SUBREDDITS_LOADED",c="CATEGORY__SUBREDDITS_FAILED",a="CATEGORY__RANK_SET"},"./src/reddit/actions/category/index.ts":function(t,e,s){"use strict";s.d(e,"a",(function(){return g})),s.d(e,"b",(function(){return h})),s.d(e,"c",(function(){return T}));var r=s("./src/lib/initializeClient/installReducer.ts"),n=s("./src/reddit/reducers/features/categories/index.ts"),i=(s("./node_modules/lodash/isEmpty.js"),s("./node_modules/react-router-redux/es/index.js"),s("./src/lib/makeActionCreator/index.ts")),o=s("./src/reddit/constants/categories.tsx"),d=s("./src/lib/constants/index.ts"),c=s("./src/lib/makeApiRequest/index.ts"),a=s("./src/lib/omitHeaders/index.ts"),u=s("./src/reddit/constants/headers.ts");var l=s("./src/reddit/endpoints/category/subreddits.ts"),b=s("./src/reddit/helpers/localStorage/index.ts"),p=s("./src/reddit/selectors/category.ts"),O=s("./src/reddit/actions/category/constants.ts");Object(r.a)({features:{categories:n.a}});const f=Object(i.a)(O.c),_=Object(i.a)(O.b),m=Object(i.a)(O.a),g=()=>async(t,e,s)=>{let{apiContext:r}=s;const n=e(),i=Object(p.i)(n),l=Object(p.h)(n);if(i||l)return;t(f());const b=await(t=>Object(c.a)(Object(a.a)(t,[u.a]),{endpoint:"".concat(t.apiUrl,"/api/available_subreddit_categories.json?use_extended_categories=true"),method:d.eb.GET}))(r());if(b.ok){const{categories:e,categoryIds:s}=(t=>{const e={},s=[];return t.forEach((t,r)=>{const n={attr:t.category_attr,color:t.category_color||o.a[r%o.a.length],icon:t.category_icon,id:t.category_id,name:t.category_name};s.push(n.id),e[n.id]=n}),{categories:e,categoryIds:s}})(b.body);t(_({categories:e,categoryIds:s}))}else t(m(b.error))},j=Object(i.a)(O.g),E=Object(i.a)(O.f),S=Object(i.a)(O.e),h=(t,e)=>async(s,r,n)=>{let{apiContext:i}=n;const o=r(),d=Object(p.n)(o,{id:t}),c=Object(p.m)(o,{id:t});if(d||c)return;s(j({categoryId:t}));const a=await Object(l.a)(i(),t,e);if(a.ok){const e=Object(l.b)(a.body);s(E(Object.assign({categoryId:t},e)))}else s(S({categoryId:t,error:a.error}))},I=Object(i.a)(O.d),T=t=>async(e,s)=>{const r=Object(p.k)(s(),{id:t});e(I({categoryId:t,rank:r+1})),Object(b.S)(Object(p.e)(s()))}},"./src/reddit/actions/communityFlairs/constants.ts":function(t,e,s){"use strict";s.d(e,"b",(function(){return r})),s.d(e,"c",(function(){return n})),s.d(e,"d",(function(){return i})),s.d(e,"a",(function(){return o}));const r="TOP_COMMUNITY_FLAIR__FETCH_FAILURE",n="TOP_COMMUNITY_FLAIR__FETCH_PENDING",i="TOP_COMMUNITY_FLAIR__FETCH_SUCCESS",o="COMMUNITY_FLAIR__ADD_FLAIRS"},"./src/reddit/actions/communityFlairs/index.ts":function(t,e,s){"use strict";s.d(e,"a",(function(){return S})),s.d(e,"e",(function(){return h})),s.d(e,"c",(function(){return I})),s.d(e,"b",(function(){return T})),s.d(e,"d",(function(){return y}));s("./node_modules/core-js/modules/web.dom.iterable.js");var r=s("./node_modules/lodash/camelCase.js"),n=s.n(r),i=s("./node_modules/lodash/isEmpty.js"),o=s.n(i),d=s("./node_modules/lodash/omit.js"),c=s.n(d),a=s("./src/lib/makeActionCreator/index.ts"),u=s("./src/reddit/endpoints/flair/index.ts"),l=s("./src/reddit/helpers/flair.ts"),b=s("./src/reddit/models/Flair/index.ts"),p=s("./src/reddit/selectors/communityFlairs.ts"),O=s("./src/reddit/selectors/subreddit.ts"),f=s("./src/reddit/actions/communityFlairs/constants.ts");const _=Object(a.a)(f.c),m=Object(a.a)(f.d),g=Object(a.a)(f.b),j=Object(a.a)(f.a),E=t=>{const e={};for(const s in t){e[n()(s)]=t[s]}return e},S=(t,e)=>async(s,r)=>{const i=r(),d=Object(p.b)(i,e),a=Object(p.c)(i,e)||[],u=(t=>{const e={};return t.map(t=>{const s=Object(l.g)(t),r=n()(s),i=r&&e.hasOwnProperty(r);t.type!==b.f.Spoiler&&t.type!==b.f.Nsfw&&(i||(e[r]=Object.assign(Object.assign({},t),{id:r})))}),e})(t),O=c()(u,a);if(o()(O))return;const f=Object.keys(O),_=a?a.concat(f):f,m=d?Object.assign(Object.assign({},d),O):O;s(j({models:m,sortedKeys:_,subredditId:e}))},h=t=>async(e,s,r)=>{let{apiContext:n}=r;const i=Object(O.G)(s(),t);e(_());const o=await Object(u.c)(n(),t);if(o.ok){const t=o.body.map(E).map(t=>Object(l.c)(t));e(S(t,i)),e(m())}else e(g())},I=(t,e)=>{const s=[];for(const r in t){const n=t[r],i=n.belongsTo&&n.belongsTo.id===e;n.flair&&n.flair.length&&i&&s.push(...n.flair)}return s},T=t=>{const e=t&&t.data&&t.data.content&&t.data.content.widgets;if(e){const t=e.items;for(const e in t){const s=t[e];if("post-flair"===s.kind)return s}}},y=t=>{const e=[],{templates:s}=t;for(const r in s){const t=s[r];t&&e.push(t)}return e}},"./src/reddit/actions/contentGate.ts":function(t,e,s){"use strict";s.d(e,"a",(function(){return a})),s.d(e,"b",(function(){return u})),s.d(e,"f",(function(){return l})),s.d(e,"g",(function(){return b})),s.d(e,"h",(function(){return p})),s.d(e,"i",(function(){return O})),s.d(e,"j",(function(){return f})),s.d(e,"d",(function(){return _})),s.d(e,"e",(function(){return m})),s.d(e,"c",(function(){return g})),s.d(e,"m",(function(){return E})),s.d(e,"n",(function(){return S})),s.d(e,"o",(function(){return h})),s.d(e,"q",(function(){return I})),s.d(e,"r",(function(){return T})),s.d(e,"t",(function(){return y})),s.d(e,"p",(function(){return A})),s.d(e,"u",(function(){return C})),s.d(e,"s",(function(){return D})),s.d(e,"k",(function(){return w})),s.d(e,"l",(function(){return x}));var r=s("./node_modules/@reddit/onetrust-integration/dist/esm/index.js"),n=s("./src/config.ts"),i=s("./src/lib/makeActionCreator/index.ts"),o=s("./src/reddit/constants/cookie.ts"),d=s("./src/reddit/endpoints/user/preferences.ts"),c=s("./src/reddit/selectors/user.ts");const a="CONTENTGATE__VISITED_GOLD_SUBREDDIT",u="CONTENTGATE__VISITED_PRIVATE_SUBREDDIT",l="CONTENTGATE__VISITED_QUARANTINED_SUBREDDIT",b="CONTENTGATE__SET_OVER_18_PREF",p="CONTENTGATE__VISITED_BANNED_SUBREDDIT",O="CONTENTGATE__VISITED_SUBREDDIT_BLOCKED_FOR_LEGAL_REASON",f="CONTENTGATE__VISITED_NONEXISTENT_SUBREDDIT",_="CONTENTGATE__VISITED_DELETED_PROFILE",m="CONTENTGATE__VISITED_SUSPENDED_PROFILE",g="CONTENTGATE__VISITED_PROFILE_BLOCKED_FOR_LEGAL_REASON",j=Object(i.a)(b),E=Object(i.a)(p),S=Object(i.a)(O),h=Object(i.a)(f),I=Object(i.a)(a),T=Object(i.a)(u),y=Object(i.a)(l),A=Object(i.a)(_),C=Object(i.a)(m),D=Object(i.a)(g),w=()=>{const t=new Date;t.setFullYear(t.getFullYear()+2),Object(r.b)(o.f,"1",{expires:t,domain:n.a.cookieDomain})},x=()=>async(t,e,s)=>{let{apiContext:r}=s;const n=e();Object(c.J)(n)&&n.platform.currentPage&&await Object(d.f)(r()),t(j({over18:!0}))}},"./src/reddit/actions/discoveryUnit.ts":function(t,e,s){"use strict";s.d(e,"c",(function(){return p})),s.d(e,"b",(function(){return O})),s.d(e,"a",(function(){return f})),s.d(e,"g",(function(){return j})),s.d(e,"f",(function(){return E})),s.d(e,"e",(function(){return S})),s.d(e,"d",(function(){return h})),s.d(e,"h",(function(){return A}));var r=s("./src/lib/constants/index.ts"),n=s("./src/lib/makeActionCreator/index.ts"),i=s("./src/lib/makeListingKey/index.ts"),o=(s("./src/lib/addQueryParams/index.ts"),s("./src/lib/makeApiRequest/index.ts")),d=s("./src/lib/omitHeaders/index.ts"),c=(s("./src/lib/stringInterpolate/index.ts"),s("./src/reddit/constants/headers.ts")),a=s("./src/reddit/helpers/r2/normalizePostFromR2/index.ts"),u=s("./src/reddit/models/RichTextJson/addRTJParam.ts");var l=s("./src/reddit/selectors/discoveryUnit.ts"),b=s("./src/reddit/selectors/listings.ts");const p="DISCOVERY_UNIT__LIST_PENDING",O="DISCOVERY_UNIT__LIST_LOADED",f="DISCOVERY_UNIT__LIST_FAILED",_=Object(n.a)(p),m=Object(n.a)(O),g=Object(n.a)(f),j=()=>async(t,e,s)=>{let{apiContext:r}=s;const n=e(),i=Object(l.e)(n),o=Object(l.d)(n);if(i||o)return;t(_());const d=await(t=>Promise.resolve({ok:!0,error:null,status:200,headers:{},details:"",body:{global:{discovery_config_v1:{discovery_units:[{id:"xd_66",enabled:!0,layout:"large",parameters:{sort:"hot"},surface:"explore",unit_name:"posts_in_category_rails_hero",unit_type:"listing",url:"/api/posts_in_category.json"},{id:"xd_67",enabled:!0,layout:"large",surface:"explore",unit_name:"posts_in_subreddit_hero",unit_type:"listing",url:"/r/%{subredditName}/hot.json"},{id:"xd_68",enabled:!0,layout:"large",parameters:{sort:"hot"},surface:"explore",unit_name:"posts_in_category_rails_small",unit_type:"listing",url:"/api/posts_in_category.json"},{id:"xd_69",enabled:!0,layout:"large",surface:"explore",unit_name:"posts_in_subreddit_small",unit_type:"listing",url:"/r/%{subredditName}/hot.json"},{id:"xd_70",enabled:!0,layout:"large",surface:"search",unit_name:"search_posts",unit_type:"community_category",url:"/api/posts_in_category.json"},{id:"xd_71",enabled:!0,layout:"large",surface:"search",unit_name:"search_subreddits",unit_type:"community_category",url:"/api/subreddits_in_category.json"},{id:"xd_72",enabled:!0,layout:"large",surface:"subreddit_listing",unit_name:"community_banner_posts",unit_type:"subreddit_listing",url:"/r/%{subredditName}/top.json"},{id:"xd_83",enabled:!0,layout:"large",surface:"subreddit_listing",unit_name:"best_of_community",unit_type:"subreddit_listing",url:"/r/%{subredditName}/top.json"},{id:"xd_88",enabled:!0,layout:"large",surface:"front_page",title:"Similar communities to %{subredditName}",unit_name:"chaining_similar_subreddits_posts",unit_type:"listing"},{id:"xd_89",enabled:!0,layout:"large",surface:"front_page",title:"Mildy similar posts",unit_name:"chaining_similar_posts",unit_type:"listing"},{id:"xd_91",enabled:!0,layout:"large",surface:"comments",title:"Posts in subreddit %{subredditName}",unit_name:"posts_in_subreddit_vertical",unit_type:"listing"},{id:"xd_92",enabled:!0,layout:"large",surface:"comments",title:"Posts in recommended home",unit_name:"posts_in_rec_home",unit_type:"listing"},{id:"xd_96",enabled:!0,layout:"small",surface:"subreddit_listing",unit_name:"top_week_posts",unit_type:"subreddit_listing",url:"/r/%{subredditName}/top.json"},{id:"xd_97",enabled:!0,layout:"large",surface:"subreddit_listing",unit_name:"top_week_posts_large",unit_type:"subreddit_listing",url:"/r/%{subredditName}/top.json"}]}}}}))(r());if(d.ok){const{discoveryUnits:e}=(t=>{return{discoveryUnits:t.global.discovery_config_v1.discovery_units.reduce((t,e)=>{const s={enabled:e.enabled,experiment:e.experiment,id:e.id,index:e.index,layout:e.layout,options:e.options,parameters:e.parameters,subtitle:e.subtitle,subtitleIcon:e.subtitle_icon,surface:e.surface,title:e.title,unitName:e.unit_name,unitType:e.unit_type,url:e.url};return t[s.id]=s,t},{})}})(d.body);t(m({discoveryUnits:e}))}else t(g({error:d.error}))},E="DISCOVERY_UNIT__UNIT_DATA_PENDING",S="DISCOVERY_UNIT__UNIT_DATA_LOADED",h="DISCOVERY_UNIT__UNIT_DATA_FAILED",I=Object(n.a)(E),T=Object(n.a)(S),y=Object(n.a)(h),A=(t,e)=>async(s,n,l)=>{let{apiContext:p}=l;const O=n(),f=Object(i.a)(t,r.P.HOT,{category:e}),_=Object(b.h)(O,{listingKey:f}),m=!!O.listings.listingOrder.fetchedTokens[f];if(_||m)return;s(I({key:f}));const g=await((t,e)=>Object(o.a)(Object(d.a)(t,[c.a]),{endpoint:Object(u.a)("".concat(t.apiUrl,"/api/posts_in_category.json?category=").concat(e)),method:r.eb.GET}))(p(),e);if(g.ok){const{postIds:t,posts:e}=(t=>{const e=[],s={};return t.data.children.forEach(t=>{const r=Object(a.a)(t.data);e.push(r.id),s[r.id]=r}),{postIds:e,posts:s}})(g.body),r=t.length>0?t.length-1:0;s(T({key:f,meta:O.meta,postIds:t,posts:e,token:t[r]}))}else s(y({key:f,error:g.error}))}},"./src/reddit/actions/economics/helpers/async.ts":function(t,e,s){"use strict";s.d(e,"a",(function(){return r}));const r=t=>async e=>{const r=await(()=>Promise.all([s.e("vendors~EconHelperActions~SubredditPremiumBadgeManagement~reddit-components-Econ-Prediction"),s.e("EconHelperActions~reddit-components-Econ-Prediction"),s.e("EconHelperActions")]).then(s.bind(null,"./src/reddit/actions/economics/helpers/index.ts")).then(t=>t.fetchAll))();await e(r(t))}},"./src/reddit/actions/economics/paymentSystems/constants.ts":function(t,e,s){"use strict";s.d(e,"a",(function(){return r})),s.d(e,"e",(function(){return n})),s.d(e,"b",(function(){return i})),s.d(e,"c",(function(){return o})),s.d(e,"d",(function(){return d}));const r="ECONOMICS__PAYMENT_SYSTEM__CARD_DELETE_SUCCESS",n="ECONOMICS__PAYMENT_SYSTEM__PAYPAL_DELETE_SUCCESS",i="ECONOMICS__PAYMENT_SYSTEM__INFO_FAILURE",o="ECONOMICS__PAYMENT_SYSTEM__INFO_FETCHED",d="ECONOMICS__PAYMENT_SYSTEM__INFO_PENDING"},"./src/reddit/actions/economics/subredditPremium/constants.ts":function(t,e,s){"use strict";s.d(e,"a",(function(){return r})),s.d(e,"b",(function(){return n})),s.d(e,"c",(function(){return i})),s.d(e,"d",(function(){return o})),s.d(e,"e",(function(){return d})),s.d(e,"f",(function(){return c})),s.d(e,"g",(function(){return a})),s.d(e,"h",(function(){return u})),s.d(e,"i",(function(){return l})),s.d(e,"j",(function(){return b}));const r="ECONOMICS__SUBREDDIT_PREMIUM__BADGE_APPLIED",n="ECONOMICS__SUBREDDIT_PREMIUM__BADGE_MANAGEMENT_BADGE_TYPE_CHANGED",i="ECONOMICS__SUBREDDIT_PREMIUM__BADGE_MANAGEMENT_MODAL_OPENED",o="ECONOMICS__SUBREDDIT_PREMIUM__BADGE_MANAGEMENT_VIEW_CHANGED",d="ECONOMICS__SUBREDDIT_PREMIUM__EDITOR_PRODUCTS_FETCH_SUCCESS",c="ECONOMICS__SUBREDDIT_PREMIUM__ORDER_SUCCESS",a="ECONOMICS__SUBREDDIT_PREMIUM__SUBREDDIT_INFO_SUCCESS",u="ECONOMICS__SUBREDDIT_PREMIUM__SUBSCRIPTION_CANCEL_SUCCESS",l="ECONOMICS__SUBREDDIT_PREMIUM__SUBSCRIPTION_DATA_SUCCESS",b="ECONOMICS__SUBREDDIT_PREMIUM__UPLOAD_MODAL_OPENED"},"./src/reddit/actions/eventPosts/constants.ts":function(t,e,s){"use strict";s.d(e,"c",(function(){return r})),s.d(e,"b",(function(){return n})),s.d(e,"e",(function(){return i})),s.d(e,"d",(function(){return o})),s.d(e,"f",(function(){return d})),s.d(e,"a",(function(){return c}));const r="MOD_PAGE_EVENT_POSTS_LOADED",n="MOD_PAGE_EVENT_POSTS_FAILED",i="MOD_PAGE_EVENT_POSTS_PENDING",o="MOD_PAGE_EVENT_POSTS_MORE_LOADED",d="START_EVENT_NOW_SUCCESS",c="EDIT_EVENT_TIME_SUCCESS"},"./src/reddit/actions/externalAccount.ts":function(t,e,s){"use strict";s.d(e,"l",(function(){return E})),s.d(e,"k",(function(){return S})),s.d(e,"j",(function(){return h})),s.d(e,"i",(function(){return I})),s.d(e,"h",(function(){return T})),s.d(e,"g",(function(){return y})),s.d(e,"o",(function(){return N})),s.d(e,"p",(function(){return P})),s.d(e,"b",(function(){return k})),s.d(e,"c",(function(){return v})),s.d(e,"a",(function(){return U})),s.d(e,"n",(function(){return q})),s.d(e,"e",(function(){return M})),s.d(e,"f",(function(){return B})),s.d(e,"d",(function(){return H})),s.d(e,"m",(function(){return W}));var r=s("./node_modules/fbt/lib/FbtPublic.js"),n=s("./src/lib/makeActionCreator/index.ts"),i=s("./src/lib/addQueryParams/index.ts"),o=s("./src/reddit/actions/toaster.ts"),d=s("./src/reddit/constants/parameters.ts"),c=s("./src/lib/constants/index.ts"),a=s("./src/lib/makeApiRequest/index.ts"),u=s("./src/lib/omitHeaders/index.ts"),l=s("./src/reddit/constants/headers.ts"),b=s("./src/reddit/helpers/addRedesignIdentifier/index.ts");const p=t=>{return t.reduce((t,e)=>(t[e.provider]=e,t),{})};var O=s("./src/reddit/models/Toast/index.ts"),f=s("./src/reddit/models/User/index.ts"),_=s("./src/reddit/selectors/externalAccount.ts"),m=s("./src/reddit/selectors/platform.ts"),g=s("./src/reddit/selectors/subreddit.ts"),j=s("./src/reddit/selectors/user.ts");const E="USER_EXTERNAL_ACCOUNT_ACCOUNTS_PENDING",S="USER_EXTERNAL_ACCOUNT_ACCOUNTS_LOADED",h="USER_EXTERNAL_ACCOUNT_ACCOUNTS_FAILED",I="SUBREDDIT_EXTERNAL_ACCOUNT_ACCOUNTS_PENDING",T="SUBREDDIT_EXTERNAL_ACCOUNT_ACCOUNTS_LOADED",y="SUBREDDIT_EXTERNAL_ACCOUNT_ACCOUNTS_FAILED",A=Object(n.a)(E),C=Object(n.a)(S),D=Object(n.a)(h),w=Object(n.a)(I),x=Object(n.a)(T),R=Object(n.a)(y),N=t=>async(e,s,r)=>{let{apiContext:n}=r;const i=s(),o=Object(j.i)(i),d=t||o&&Object(f.e)(o);if(!d)return;if(Object(_.d)(i,{username:d}))return;e(A(d));const O=await((t,e)=>Object(a.a)(Object(u.a)(t,[l.a]),{endpoint:Object(b.a)("".concat(t.apiUrl,"/api/v1/external_account/user/").concat(e,".json")),traceRequestName:"get_external_accounts",method:c.eb.GET}))(n(),d);if(O.ok){const t=p(O.body);e(C({username:d,accountsData:t}))}else e(D(O.error))},P=()=>async(t,e,s)=>{let{apiContext:r}=s;const n=e(),i=Object(m.e)(n);if(!i)return;const o=n.externalAccount.api.subreddit.fetched[i],d=n.externalAccount.api.subreddit.pending[i];if(o||d)return;const O=Object(g.y)(n,{subredditName:i});if(!(O&&O.hasExternalAccount))return;t(w(i));const f=await((t,e)=>Object(a.a)(Object(u.a)(t,[l.a]),{endpoint:Object(b.a)("".concat(t.apiUrl,"/api/v1/external_account/subreddit/").concat(e,".json")),method:c.eb.GET}))(r(),i);if(f.ok){const e=p(f.body);t(x({subredditName:i,accountsData:e}))}else t(R(f.error))},k="EXTERNAL_ACCOUNT_DISCONNECT_PENDING",v="EXTERNAL_ACCOUNT_DISCONNECT_SUCCESS",U="EXTERNAL_ACCOUNT_DISCONNECT_FAILED",L=Object(n.a)(k),G=Object(n.a)(v),F=Object(n.a)(U),q=t=>async(e,s,r)=>{let{apiContext:n}=r;e(L({provider:t}));const i=Object(j.i)(s()),o=Object(f.e)(i),d=await((t,e)=>Object(a.a)(Object(u.a)(t,[l.a]),{endpoint:Object(b.a)("".concat(t.apiUrl,"/api/v1/external_account/").concat(e,"/disconnect.json")),method:c.eb.POST}))(n(),t);d.ok?e(G({provider:t,username:o})):e(F({provider:t,error:d.error}))},M="OAUTH_FLOW_URL_PENDING",B="OAUTH_FLOW_URL_SUCCESS",H="OAUTH_FLOW_URL_FAILED",Y=Object(n.a)(M),V=Object(n.a)(B),K=Object(n.a)(H),W=t=>async(e,s,n)=>{let{apiContext:p}=n;e(Y({provider:t}));const f=Object(i.a)(window.location.href,{[d.d]:t}),_=await((t,e,s)=>Object(a.a)(Object(u.a)(t,[l.a]),{endpoint:Object(b.a)("".concat(t.apiUrl,"/api/v1/external_account/").concat(e,"/connect.json")),method:c.eb.POST,data:{redirect_url:s}}))(p(),t,f);if(_.ok){const{redirect_url:s}=_.body;e(V({provider:t})),window.location.href=s}else e(K({provider:t,error:_.error})),e(Object(o.e)({kind:O.b.Error,text:r.fbt._("Something went wrong. Just don't panic.",null,{hk:"196FiB"})}))}},"./src/reddit/actions/global/constants.ts":function(t,e,s){"use strict";s.d(e,"a",(function(){return r}));const r="LOCAL_STORAGE_LOADED"},"./src/reddit/actions/gold/communityAwards.ts":function(t,e,s){"use strict";s.d(e,"d",(function(){return h})),s.d(e,"f",(function(){return I})),s.d(e,"e",(function(){return T})),s.d(e,"b",(function(){return C})),s.d(e,"c",(function(){return w})),s.d(e,"i",(function(){return x})),s.d(e,"a",(function(){return G})),s.d(e,"j",(function(){return B})),s.d(e,"g",(function(){return W})),s.d(e,"h",(function(){return X}));var r=s("./node_modules/fbt/lib/FbtPublic.js"),n=s("./src/lib/makeActionCreator/index.ts"),i=s("./src/lib/sentry/index.ts"),o=s("./src/reddit/helpers/awards/isEligibleForGlobalAwards.ts"),d=s("./src/reddit/actions/modal.ts"),c=s("./src/reddit/actions/toaster.ts"),a=s("./src/reddit/models/Toast/index.ts"),u=s("./src/reddit/selectors/activeModalId.ts"),l=s("./src/reddit/selectors/communityAwards.ts"),b=s("./src/reddit/selectors/experiments/econ/groupAwarding.ts"),p=s("./src/reddit/selectors/posts.ts"),O=s("./src/reddit/selectors/profile.ts"),f=s("./src/reddit/selectors/subreddit.ts"),_=s("./src/reddit/endpoints/gold/communityAwards.ts"),m=s("./src/reddit/constants/gold.ts"),g=s("./src/reddit/actions/gold/constants.ts");const j=()=>r.fbt._("There was an error creating the award. Please try again.",null,{hk:"3UtrTD"}),E=()=>r.fbt._("There was an error loading awards list. Please try again.",null,{hk:"3fs6Y8"}),S=()=>r.fbt._("There was an error removing the award. Please try again.",null,{hk:"1exAPF"}),h=(t,e,s,r,n,i,o,d)=>async(c,a,u)=>{let{gqlContext:l}=u;c(y());try{if((await Object(_.a)(l(),t,e,s,r,n,i,o,d)).error){const t=j();await c(C(t))}}catch(b){const t=j();await c(C(t))}},I=(t,e,s,r,n,i,o,d)=>async(c,a,u)=>{let{gqlContext:l}=u;c(y());try{if((await Object(_.c)(l(),t,e,s,r,n,i,o,d)).error){const t=j();await c(C(t))}}catch(b){const t=j();await c(C(t))}},T=t=>{let{awardSubType:e,coinPrice:s,coinReward:r,daysOfDripExtension:n,daysOfPremium:i,description:o,endsAt:d,giverCoinReward:c,iconFormat:a,iconHeight:u,iconUrl:l,iconWidth:b,isNew:p,name:O,pennyPrice:f,pennyDonate:m,startsAt:g,subredditCoinReward:E}=t;return async(t,S,h)=>{let{gqlContext:I}=h;t(y());try{if((await Object(_.b)({awardSubType:e,coinPrice:s,coinReward:r,context:I(),daysOfDripExtension:n,daysOfPremium:i,description:o,endsAt:d,giverCoinReward:c,iconFormat:a,iconHeight:u,iconUrl:l,iconWidth:b,isNew:p,name:O,pennyPrice:f,pennyDonate:m,startsAt:g,subredditCoinReward:E})).error){const e=j();await t(C(e))}}catch(T){const e=j();await t(C(e))}}},y=Object(n.a)(g.i),A=Object(n.a)(g.h),C=t=>async(e,s)=>{await e(A(t)),e(Object(c.e)({kind:a.b.Error,duration:c.a,text:t}))},D=Object(n.a)(g.j),w=t=>{let{award:e,subredditId:s}=t;return async(t,n)=>{const i=n();t(D({award:e,subredditId:s})),Object(u.a)(i)===m.a&&t(Object(d.i)(m.a));const o=r.fbt._("Community award successfully created!",null,{hk:"3UvmDa"});t(Object(c.e)({kind:a.b.SuccessCommunity,text:o}))}},x=t=>async(e,s,r)=>{let{gqlContext:n}=r;const i=s(),d=!!i.awards.manageable.order[t];if(Object(l.b)(i,{subredditOrProfileId:t})||d)return;e(R({subredditOrProfileId:t}));const c=Object(o.a)(t),a=!!Object(f.bb)(i,{subredditIds:[t]})[0];let u;if(c)u=Object(_.j)(n());else if(a)u=Object(_.k)(n(),t);else{const e=Object(O.p)(i,{profileId:t}).name;u=Object(_.l)(n(),e)}try{const s=await u;if(!s.ok){const t=E();return void(await e(v(t)))}let r=[];if(c)r=s.body.data.globalAwards;else{const n=a?s.body.data.subreddit:s.body.data.profileByName;r=n.manageableAwards||[],e(P({awards:n.optionalAwards||[],subredditOrProfileId:t})),e(U({subredditOrProfileId:t,disabled:!n.isAwardCreationAllowed}))}await e(N({awards:r,subredditOrProfileId:t}))}catch(b){const t=E();e(v(t))}},R=Object(n.a)(g.K),N=Object(n.a)(g.J),P=Object(n.a)(g.O),k=Object(n.a)(g.I),v=t=>async(e,s)=>{await e(k(t)),e(Object(c.e)({kind:a.b.Error,duration:c.a,text:t}))},U=Object(n.a)(g.e),L=t=>t.map(t=>{let{tag:e,content:s}=t;return{tag:e,content:{richtext:JSON.parse(s.richtext),markdown:s.markdown}}}),G=(t,e,s)=>async(r,n,o)=>{let{gqlContext:d}=o;const c=n(),a=c.awards.sortedUsable.order[t];if(!!a&&!!a[e])return;const u=Object(b.a)(c);r(F({subredditOrProfileId:t,thingId:e}));try{const n=s||((t,e)=>{let{thingId:s,subredditId:r}=e;var n;const i=Object(O.p)(t,{profileId:r});if(i)return i.name;const o=Object(p.O)(t,{postId:s});return"profile"===(null===(n=null==o?void 0:o.belongsTo)||void 0===n?void 0:n.type)?o.author:null})(c,{thingId:e,subredditId:t});if(n){const s=await Object(_.g)(d(),n,e,u);if(s.ok){const n=s.body,i=L(n.data.profileByName.awardingTray.sortedUsableTags);await r(M({awards:n.data.profileByName.sortedUsableAwards,tags:i,subredditOrProfileId:t,thingId:e}))}else await r(q({subredditOrProfileId:t,thingId:e}))}else{const s=await Object(_.f)(d(),t,e,u);if(s.ok){const n=s.body,i=L(n.data.subredditInfoById.awardingTray.sortedUsableTags);await r(M({awards:n.data.subredditInfoById.sortedUsableAwards,tags:i,subredditOrProfileId:t,thingId:e}))}else await r(q({subredditOrProfileId:t,thingId:e}))}}catch(l){i.c.captureException(l),await r(q({subredditOrProfileId:t,thingId:e}))}},F=Object(n.a)(g.d),q=Object(n.a)(g.b),M=Object(n.a)(g.c),B=(t,e)=>async(s,n,o)=>{let{gqlContext:d}=o;s(H());try{if((await Object(_.m)(d(),e)).error){const t=S();await s(K(t))}else{await s(Y({awardId:e,subredditId:t}));const i=Object(l.a)(n(),e);if(!i)return;const o=r.fbt._("{award name} Award successfully deleted!",[r.fbt._param("award name",i.name)],{hk:"3ZQs5u"});s(Object(c.e)({kind:a.b.SuccessCommunity,duration:c.a,text:o}))}}catch(u){i.c.captureException(u);const t=S();await s(K(t))}},H=Object(n.a)(g.eb),Y=Object(n.a)(g.fb),V=Object(n.a)(g.db),K=t=>async(e,s)=>{await e(V(t)),e(Object(c.e)({kind:a.b.Error,duration:c.a,text:t}))},W=(t,e)=>async(s,n,o)=>{let{gqlContext:d}=o;s(z());let u=r.fbt._("There was a problem disabling the {award name} Award. Please try again.",[r.fbt._param("award name",e.name)],{hk:"3KNLaD"}),l=Q(u),b=a.b.Error;try{(await Object(_.h)(d(),e.id,t.id)).ok&&(l=J({awardId:e.id,subredditId:t.id}),u=r.fbt._("{award name} Award successfully disabled in {subreddit or profile prefixed name}!",[r.fbt._param("award name",e.name),r.fbt._param("subreddit or profile prefixed name",t.displayText)],{hk:"26i191"}),b=a.b.SuccessCommunity)}catch(p){i.c.captureException(p)}finally{await s(l),await s(Object(c.e)({text:u,duration:c.a,kind:b}))}},z=Object(n.a)(g.l),J=Object(n.a)(g.m),Q=Object(n.a)(g.k),X=(t,e)=>async(s,n,o)=>{let{gqlContext:d}=o;s(Z());let u=r.fbt._("There was a problem enabling the {award name} Award. Please try again.",[r.fbt._param("award name",e.name)],{hk:"2jdxBY"}),l=tt(u),b=a.b.Error;try{(await Object(_.i)(d(),e.id,t.id)).ok&&(l=$({awardId:e.id,subredditId:t.id}),u=r.fbt._("{award name} Award successfully enabled in {subreddit name}!",[r.fbt._param("award name",e.name),r.fbt._param("subreddit name","r/"+t.name)],{hk:"zGXlU"}),b=a.b.SuccessCommunity)}catch(p){i.c.captureException(p)}finally{await s(l),await s(Object(c.e)({text:u,duration:c.a,kind:b}))}},Z=Object(n.a)(g.o),$=Object(n.a)(g.p),tt=Object(n.a)(g.n)},"./src/reddit/actions/gold/modals.ts":function(t,e,s){"use strict";s.d(e,"e",(function(){return _})),s.d(e,"b",(function(){return g})),s.d(e,"d",(function(){return E})),s.d(e,"c",(function(){return h})),s.d(e,"a",(function(){return I})),s.d(e,"f",(function(){return T}));var r=s("./src/lib/makeActionCreator/index.ts"),n=s("./src/lib/postParentMessage/index.ts"),i=s("./src/reddit/helpers/isPost.ts"),o=s("./src/reddit/constants/modals.ts"),d=s("./src/reddit/selectors/gild.ts"),c=s("./src/reddit/helpers/correlationIdTracker.ts"),a=s("./src/reddit/actions/gold/communityAwards.ts"),u=s("./src/reddit/actions/modal.ts"),l=s("./src/reddit/selectors/communityAwards.ts"),b=s("./src/reddit/selectors/posts.ts"),p=s("./src/reddit/selectors/subreddit.ts"),O=s("./src/telemetry/index.ts"),f=s("./src/reddit/actions/gold/constants.ts");const _=Object(r.a)(f.N),m=Object(r.a)(f.g),g=()=>async(t,e)=>{const r=e();t(m()),Object(c.b)(c.a.GiftPremiumFlow);const{clickCloseModalEvent:n}=await s.e("givePremiumTrackers").then(s.bind(null,"./src/reddit/helpers/trackers/givePremium.ts"));Object(O.a)(n()(r))},j=Object(r.a)(f.M),E=t=>{let{awardId:e,correlationId:s,thingId:r}=t;return async(t,n)=>{const d=n(),c=e?Object(l.a)(d,e):void 0;t(j({award:c&&c.isEnabled?c:void 0,thingId:r,correlationId:s})),t(Object(u.h)(o.a.GOLD_GILD_MODAL));const O=Object(p.K)(d,{thingId:r});let f=null;if(O)f=O.id;else if(Object(i.a)(r)){const t=Object(b.O)(d,{postId:r});t&&(f=t.belongsTo.id)}f&&Object(a.a)(f,r)}},S=Object(r.a)(f.f),h=Object(r.a)(f.L),I=()=>async(t,e)=>{const r=e(),i=Object(d.d)(r);if(Object(d.h)(r)){const t="close.gild";Object(n.a)({type:t})}t(S()),t(Object(u.g)(o.a.GOLD_GILD_MODAL));const{clickCloseGildModalEvent:a}=await Promise.resolve().then(s.bind(null,"./src/reddit/helpers/trackers/gild.ts"));Object(O.a)(a(i)(r)),Object(c.b)(c.a.GildingFlow)},T=()=>async()=>{Object(n.a)({type:"login.gild"})}},"./src/reddit/actions/gold/powerups.ts":function(t,e,s){"use strict";s.d(e,"g",(function(){return I})),s.d(e,"e",(function(){return D})),s.d(e,"f",(function(){return P})),s.d(e,"d",(function(){return H})),s.d(e,"a",(function(){return Y})),s.d(e,"c",(function(){return V})),s.d(e,"b",(function(){return K}));var r=s("./node_modules/fbt/lib/FbtPublic.js"),n=s("./src/lib/makeActionCreator/index.ts"),i=s("./src/lib/sentry/index.ts"),o=s("./src/reddit/constants/modals.ts"),d=s("./src/reddit/helpers/localStorage/index.ts"),c=s("./src/reddit/actions/login.ts"),a=s("./src/reddit/actions/modal.ts"),u=s("./src/reddit/actions/toaster.ts"),l=s("./src/reddit/models/Toast/index.ts"),b=s("./src/graphql/operations/ReallocatePowerups.json"),p=s("./src/graphql/operations/RedditorPowerups.json"),O=s("./src/graphql/operations/SubredditPowerups.json"),f=s("./src/graphql/operations/SubredditPowerupsFull.json"),_=s("./src/graphql/operations/UserPowerups.json"),m=s("./src/lib/makeGqlRequest/index.ts");const g=(t,e,s)=>Object(m.a)(t,Object.assign(Object.assign({},O),{variables:{subredditId:e,includeIdentity:s}}),{traceRequestName:"subreddit_powerups"}),j=(t,e,s)=>Object(m.a)(t,Object.assign(Object.assign({},f),{variables:{subredditId:e,includeIdentity:s}}),{traceRequestName:"subreddit_powerups_full"});var E=s("./src/reddit/selectors/gold/powerups.ts"),S=s("./src/reddit/selectors/user.ts"),h=s("./src/reddit/actions/gold/constants.ts");const I=t=>async(e,s,n)=>{let{gqlContext:o}=n;if(!!s().user.powerups.fetched&&!t)return;e(T());const d=r.fbt._("Something went wrong",null,{hk:"1IJNeH"});try{const t=await(t=>Object(m.a)(t,_,{traceRequestName:"user_powerups"}))(o());if(t.ok){const s=t.body;if(s.errors&&s.errors.length)return void(await e(C(d)));if(!s.data.identity)return void(await e(A(d)));await e(y({powerups:s.data.identity.powerups}))}}catch(c){i.c.captureException(c),await e(C(d))}},T=Object(n.a)(h.wb),y=Object(n.a)(h.vb),A=Object(n.a)(h.ub),C=t=>async(e,s)=>{await e(A(t)),e(Object(u.e)({kind:l.b.Error,duration:u.a,text:t}))},D=(t,e)=>async(t,s,n)=>{let{gqlContext:o}=n;var d;if(!!s().users.powerups.fetched)return;t(w());const c=r.fbt._("Something went wrong",null,{hk:"1IJNeH"});try{const s=await((t,e)=>Object(m.a)(t,Object.assign({variables:{id:e}},p),{traceRequestName:"redditor_powerups"}))(o(),e);if(s.ok){const r=s.body;if(r.errors&&r.errors.length)return void(await t(N(c)));if(!r.data.redditorInfoById)return void(await t(R(c)));const n=(null===(d=r.data.redditorInfoById.powerups)||void 0===d?void 0:d.supportedSubreddits)||[];await t(x({supportedSubreddits:n,userId:e}))}}catch(a){i.c.captureException(a),await t(N(c))}},w=Object(n.a)(h.cb),x=Object(n.a)(h.bb),R=Object(n.a)(h.ab),N=t=>async(e,s)=>{await e(R(t)),e(Object(u.e)({kind:l.b.Error,duration:u.a,text:t}))},P=(t,e)=>async(s,n,o)=>{let{gqlContext:d}=o;var c,a;const u=n();if(Object(E.f)(u,{subredditId:t})&&(!e.fullData||Object(E.g)(u,{subredditId:t}))&&!e.forceLoad)return;s(k());const l=e.fullData?j:g;try{const r=await l(d(),t,!!e.includeIdentity);if(r.ok){const n=r.body;if(null===(c=n.errors)||void 0===c?void 0:c.length)return void(await s(G(n.errors[0].message)));if(e.fullData){const{powerups:e=null,supporters:r=null,productOffers:i=null}=n.data.subredditInfoById||{},o=null===(a=n.data.identity)||void 0===a?void 0:a.powerups;await s(U({powerups:e,productOffers:i?i.offers:[],recentSupporters:r?r.recentSupporters:[],subredditId:t,topSupporters:r?r.topSupporters:[],userPowerups:o}))}else{const{powerups:e=null}=n.data.subredditInfoById||{};await s(v({powerups:e,subredditId:t}))}}}catch(b){i.c.captureException(b),await s(G(r.fbt._("Something went wrong",null,{hk:"1IJNeH"})))}},k=Object(n.a)(h.mb),v=Object(n.a)(h.lb),U=Object(n.a)(h.kb),L=Object(n.a)(h.jb),G=t=>async(e,s)=>{await e(L(t)),e(Object(u.e)({kind:l.b.Error,duration:u.a,text:t}))},F=Object(n.a)(h.U),q=Object(n.a)(h.V),M=Object(n.a)(h.W),B=t=>async(e,s)=>{await e(F(t)),e(Object(u.e)({kind:l.b.Error,duration:u.a,text:t}))},H=(t,e,s,n)=>async(d,c,p)=>{let{gqlContext:O}=p;d(q({subredditId:t,powerupsCount:e,isAnonymous:s,allocatedAt:n}));try{const i={subredditId:t,powerupsCount:e,isAnonymous:s},p=await((t,e)=>Object(m.a)(t,Object.assign(Object.assign({},b),{variables:e})))(O(),{input:i});let f=!1,_=null;if(p.ok){const t=p.body;f=t.data.reallocatePowerups.ok,_=t.data.reallocatePowerups.errors}const g=Object(S.i)(c());if(f&&g)await d((t=>async(e,s)=>{e(M(t)),e(P(t.subredditId,{forceLoad:!0,fullData:!1})),t.powerupsCount&&(e(Object(a.g)(o.a.ECON_POWERUPS_PURCHASE)),e(Object(u.e)({kind:l.b.SuccessCommunityGreen,duration:u.a,text:t.powerupsCount>0?r.fbt._("Your free Powerup has been applied.",null,{hk:"1qt70H"}):r.fbt._("Your free Powerup subscription has been canceled.",null,{hk:"15U3sb"})})))})({subredditId:t,powerupsCount:e,isAnonymous:s,user:g,allocatedAt:n}));else{const t=_&&_[0]&&_[0].message||r.fbt._("An unknown error occurred",null,{hk:"2oAbwZ"});await d(B(t))}}catch(f){i.c.captureException(f);const t=f,e=t&&t.message||r.fbt._("An unknown error occurred",null,{hk:"2oAbwZ"});await d(B(e))}},Y=Object(n.a)(h.H),V=Object(n.a)(h.S),K=()=>async(t,e)=>Object(S.i)(e())?Object(d.t)(o.a.ECON_POWERUPS_MARKETING)?t(Object(a.h)(o.a.ECON_POWERUPS_PURCHASE)):t(Object(a.h)(o.a.ECON_POWERUPS_MARKETING)):t(Object(c.h)())},"./src/reddit/actions/googleQASchema/constants.ts":function(t,e,s){"use strict";s.d(e,"b",(function(){return r})),s.d(e,"a",(function(){return n}));const r="GOOGLE_QA_SCHEMA_ELIGIBILITY_FLAG__LOADED",n="GOOGLE_QA_SCHEMA_ELIGIBILITY_FLAG__FAILED"},"./src/reddit/actions/imageOCRAltText/constants.ts":function(t,e,s){"use strict";s.d(e,"b",(function(){return r})),s.d(e,"a",(function(){return n}));const r="IMAGE_OCR_ALT_TEXT__LOADED",n="IMAGE_OCR_ALT_TEXT__FAILED"},"./src/reddit/actions/jsApi.ts":function(t,e,s){"use strict";s.d(e,"a",(function(){return n})),s.d(e,"b",(function(){return i}));var r=s("./src/lib/makeActionCreator/index.ts");const n="JSAPI__CONSUMER_SUBSCRIBED",i=Object(r.a)(n)},"./src/reddit/actions/linkedPosts/constants.ts":function(t,e,s){"use strict";s.d(e,"b",(function(){return r})),s.d(e,"a",(function(){return n}));const r="LINKED_POSTS__POSTS_LOADED",n="LINKED_POSTS__POSTS_FAILED"},"./src/reddit/actions/oldSiteRules.ts":function(t,e,s){"use strict";s.d(e,"a",(function(){return c})),s.d(e,"b",(function(){return u}));var r=s("./src/lib/makeActionCreator/index.ts"),n=s("./src/lib/constants/index.ts"),i=s("./src/lib/makeApiRequest/index.ts"),o=s("./src/lib/omitHeaders/index.ts"),d=s("./src/reddit/constants/headers.ts");const c="OLD_SITE_RULES_LOADED",a=Object(r.a)(c),u=()=>async(t,e,s)=>{let{apiContext:r}=s;const c=await(t=>Object(i.a)(Object(o.a)(t,[d.a]),{endpoint:"".concat(t.apiUrl,"/api/site_rules.json"),method:n.eb.GET}))(r());if(c.ok){const{site_rules:e}=c.body;t(a({oldSiteRules:e}))}}},"./src/reddit/actions/pages/search.ts":function(t,e,s){"use strict";s.d(e,"b",(function(){return T})),s.d(e,"c",(function(){return y})),s.d(e,"a",(function(){return A})),s.d(e,"d",(function(){return R})),s.d(e,"e",(function(){return N}));s("./node_modules/core-js/modules/web.dom.iterable.js");var r=s("./node_modules/fbt/lib/FbtPublic.js"),n=s("./node_modules/lodash/pick.js"),i=s.n(n),o=s("./src/lib/constants/index.ts"),d=s("./src/lib/makeActionCreator/index.ts"),c=s("./src/lib/makeSearchKey/index.ts"),a=s("./src/lib/pageTitle.ts"),u=s("./src/reddit/actions/ads/index.ts"),l=s("./src/reddit/actions/category/index.ts"),b=s("./src/reddit/actions/communityFlairs/index.ts"),p=s("./src/reddit/actions/discoveryUnit.ts"),O=s("./src/reddit/actions/platform.ts"),f=s("./src/reddit/actions/search.ts"),_=s("./src/reddit/actions/toaster.ts"),m=s("./src/reddit/constants/parameters.ts"),g=s("./src/reddit/endpoints/page/search.ts"),j=s("./src/reddit/helpers/timeApiRoute/index.ts"),E=s("./src/reddit/models/DiscoveryUnit/index.ts"),S=s("./src/reddit/models/Toast/index.ts"),h=s("./src/reddit/reducers/sidebarPromotedPosts/models/index.ts"),I=s("./src/reddit/selectors/subreddit.ts");const T="SEARCH__SEARCH_PENDING",y="SEARCH__SEARCH_RESULTS_RECEIVED",A="SEARCH__SEARCH_FAILED",C=Object(d.a)(T),D=Object(d.a)(y),w=Object(d.a)(A),x=t=>r.fbt._("reddit.com: search results - {query}",[r.fbt._param("query",t||"None")],{hk:"1XOKAg"}),R=(t,e,s,n)=>async(i,d,c)=>{let{apiContext:a}=c;const O=d(),T=e[m.c],y=e.category;(T||y)&&(await Promise.all([i(p.g()),i(l.a())]),y&&await Promise.all([i(l.b(y,10)),i(p.h(E.g,y))]));const{q:A}=e,x=!!A&&o.Gb.some(t=>A.includes("".concat(t,":")));let N=e.type.indexOf(o.Rb.Posts)>-1||!(!s||!e.restrict_sr)||x;if(N){const e=O.listings.postOrder.ids[t],s=O.listings.postOrder.api.error[t];N=!(O.listings.postOrder.api.pending[t]||e&&!s)}let P=e.type.indexOf(o.Rb.Subreddits)>-1||e.type.indexOf(o.Rb.Users)>-1;if(P){const e=O.listings.listingOrder.identifiers[t],s=O.listings.listingOrder.api.error[t];P=!(O.listings.listingOrder.api.pending[t]||e&&!s)}if(!N&&!P)return void(O.sidebarPromotedPosts.firstFetch||window.addEventListener("load",()=>{i(Object(u.b)(h.a.SEARCH_RESULTS))}));e.q&&i(Object(f.h)(e.q));const k="error-".concat(t),{type:v}=e;i(C({key:t,type:v}));const U=await Object(j.a)("searchResults",()=>Object(g.a)(a(),s,n,Object.assign(Object.assign({},e),{type:(e.type||[]).join(","),b:!x})));if(U.ok){const r={key:t,type:v,meta:O.meta,searchQuery:e.q,subredditName:s,username:n},o=U.body;if(i(D(Object.assign(Object.assign({categoryName:T},r),o))),i(_.f(k)),i(Object(u.b)(h.a.SEARCH_RESULTS)),s){const t=Object(I.G)(d(),s),e=Object(b.c)(o.posts,t),r=Object(b.b)(o.structuredStyles||{}),n=(r?Object(b.d)(r):[]).concat(e);i(Object(b.a)(n,t))}}else i(w(Object.assign({key:t,error:U.error,type:v},U.body))),i(_.e({id:k,kind:S.b.Error,text:r.fbt._("Sorry, we couldn't load search results.",null,{hk:"QgweL"}),buttonText:r.fbt._("Retry",null,{hk:"jld4g"}),buttonAction:R(t,e,s,n)}))},N=t=>async(e,s,r)=>{const n=Object(c.c)(i()(t.queryParams,m.t)),d=t.params.subredditName||t.params.multiredditName,{username:u}=t.params,l=Object(c.b)(d,u,n);await e(R(l,n,d,u));const b=s();let p=!1;const{type:f=[]}=n,_=f.indexOf(o.Rb.Posts)>-1,g=f.indexOf(o.Rb.Subreddits)>-1||f.indexOf(o.Rb.Users)>-1;_&&b.listings.postOrder.api.error[l]&&(p=!0),g&&b.listings.listingOrder.api.error[l]&&(p=!0),e(p?O.l({title:Object(a.c)()}):O.l({title:x(n.q)}))}},"./src/reddit/actions/pages/subreddit.ts":function(t,e,s){"use strict";s.d(e,"f",(function(){return Et})),s.d(e,"d",(function(){return St})),s.d(e,"c",(function(){return ht})),s.d(e,"a",(function(){return It})),s.d(e,"k",(function(){return Tt})),s.d(e,"i",(function(){return Ct})),s.d(e,"e",(function(){return wt})),s.d(e,"g",(function(){return xt})),s.d(e,"h",(function(){return Rt})),s.d(e,"l",(function(){return Nt})),s.d(e,"b",(function(){return Pt})),s.d(e,"j",(function(){return kt}));s("./node_modules/core-js/modules/web.dom.iterable.js"),s("./node_modules/core-js/modules/es6.array.sort.js");var r=s("./node_modules/fbt/lib/FbtPublic.js"),n=s("./node_modules/lodash/pick.js"),i=s.n(n),o=s("./node_modules/lodash/some.js"),d=s.n(o),c=s("./src/lib/constants/index.ts"),a=s("./src/lib/isAdHocMultireddit/index.ts"),u=s("./src/lib/isFakeSubreddit/index.ts"),l=s("./src/lib/makeActionCreator/index.ts"),b=s("./src/lib/makeListingKey/index.ts"),p=s("./src/lib/makeSearchKey/index.ts"),O=s("./src/reddit/actions/actionBarAnimation/index.ts"),f=s("./src/reddit/actions/ads/index.ts"),_=s("./src/reddit/actions/communityFlairs/index.ts"),m=s("./src/reddit/actions/contentGate.ts"),g=s("./src/reddit/actions/discoveryUnit.ts"),j=s("./src/reddit/actions/economics/helpers/async.ts"),E=s("./src/reddit/actions/externalAccount.ts"),S=s("./src/reddit/actions/gold/powerups.ts"),h=s("./src/reddit/actions/pages/search.ts"),I=s("./src/reddit/actions/platform.ts"),T=s("./src/reddit/actions/seo/linksModule.ts"),y=s("./src/reddit/actions/structuredStyles/index.ts"),A=s("./src/reddit/actions/subreddit.ts"),C=(s("./node_modules/core-js/modules/es6.regexp.to-string.js"),s("./node_modules/react-router-redux/es/index.js")),D=s("./src/reddit/actions/toaster.ts"),w=s("./src/reddit/helpers/localStorage/index.ts"),x=s("./src/reddit/models/Subreddit/index.ts"),R=s("./src/reddit/models/Toast/index.ts"),N=s("./src/reddit/routes/postCreation/constants.ts"),P=s("./src/reddit/selectors/moderatorPermissions.ts"),k=s("./src/reddit/selectors/platform.ts"),v=s("./src/reddit/selectors/subreddit.ts"),U=s("./src/reddit/selectors/user.ts"),L=s("./src/reddit/selectors/widgets.ts");const G=()=>async(t,e,s)=>{const r=e(),n=Object(k.f)(r);if(!n||n.type!==x.e.Public)return;const i=n.name,o=Object(k.m)(r),d=Object(v.y)(r,{subredditName:i});if(!d)return;const{activity7Day:c}=d,a=!!c&&c>=51&&c<=100,l=!i||Object(u.a)(i),b=o&&o.urlParams.subredditName===i,p=Object(U.J)(r),O=Object(P.g)(r,{subredditId:Object(v.G)(r,i)});if(l||b||Object(w.r)()||!a||!p||O)return;const f=Object(L.d)(e(),{subredditName:i});if(!f||!f.currentlyViewingCount)return;const _=(24*f.currentlyViewingCount*7).toString(),m=_[0].padEnd(_.length,"0");t(Object(D.e)({buttonAction:async()=>t(Object(C.b)("/r/".concat(i).concat(N.b))),buttonText:"Create Post",duration:-1,id:"createPostCta",kind:R.b.Modal,name:"createPostCta",secondButtonAction:async()=>Object(w.eb)(),secondButtonText:"Dismiss",text:"There have been over ".concat(m," visits to r/").concat(i," in the past week. Create a new post and start the next conversation.")}))};var F=s("./src/reddit/actions/subreddit/questions.ts"),q=s("./src/reddit/actions/subredditSettings.ts"),M=s("./src/reddit/actions/tags/index.ts"),B=s("./src/reddit/components/CountAnimation/helpers.ts"),H=s("./src/reddit/constants/page.ts"),Y=s("./src/reddit/constants/parameters.ts"),V=s("./src/reddit/constants/postLayout.ts"),K=s("./src/reddit/contexts/PageLayer/index.tsx"),W=s("./src/reddit/endpoints/gold/topAwarded.ts"),z=s("./src/reddit/endpoints/governance/posts.ts"),J=s("./src/reddit/endpoints/page/subredditPage.ts"),Q=s("./src/reddit/endpoints/profile/info.ts"),X=s("./src/reddit/helpers/canonicalUrls.ts"),Z=s("./src/reddit/helpers/getSubredditSortForListingKeyCreation/index.ts"),$=s("./src/reddit/helpers/getTimeSortForListing/index.ts"),tt=s("./src/reddit/helpers/graphql/normalizeSubredditPageFromGql/index.ts");function et(t){let{econLeaderboards:e,identity:s,trendingSubreddits:r}=t;const n=e.topAwardedPosts.map(t=>t.post).filter(t=>!t.removedBy&&!t.isNsfw);return Object(tt.b)(n,r,s)}var st=s("./src/reddit/helpers/timeApiRoute/index.ts"),rt=s("./src/reddit/helpers/trackers/communityTopics.ts"),nt=s("./src/reddit/models/ModeratingSubreddits/index.ts"),it=s("./src/reddit/models/RichTextJson/index.ts"),ot=s("./src/reddit/models/User/index.ts"),dt=s("./src/reddit/reducers/sidebarPromotedPosts/models/index.ts"),ct=s("./src/reddit/selectors/communityFlairs.ts"),at=s("./src/reddit/selectors/experiments/goldSubredditPowerups.ts"),ut=s("./src/reddit/selectors/experiments/gqlSubredditPage.ts"),lt=s("./src/reddit/selectors/experiments/postActionBarAnimation.ts"),bt=s("./node_modules/reselect/es/index.js"),pt=s("./src/reddit/constants/experiments.ts"),Ot=s("./src/reddit/helpers/chooseVariant/index.ts");const ft=Object(bt.a)(t=>{return!!Object(Ot.c)(t,{experimentEligibilitySelector:Ot.a,experimentName:pt.Cb,expEventOverride:!1})},U.J,v.T,L.j,(t,e,s,r)=>t&&!e&&!s.isNSFW&&!r.some(t=>"community-list"===t));var _t=s("./src/reddit/selectors/experiments/topPosts.ts"),mt=s("./src/reddit/selectors/inlineSubredditEditing.ts"),gt=s("./src/reddit/selectors/multireddit.ts"),jt=(s("./src/reddit/selectors/posts.ts"),s("./src/reddit/selectors/experiments/econ/predictions.ts"),s("./src/reddit/actions/publicAccessNetwork/api.ts"));const Et=(t,e)=>async s=>{if(!t.ok&&t.body&&(t=>!!t.reason)(t.body)){const{body:{data:r,reason:n}}=t,i=r?r.account:void 0,o=r&&r.features||void 0,d=e?e.toLowerCase():"";if(404===t.status)if(n===x.d.NotFoundSubreddit)s(m.o({account:i,features:o,subredditName:d}));else if(n===x.d.BannedSubreddit){const t=r?r.banMessage||r.ban_message:void 0;s(m.m({banMessage:t,account:i,features:o,subredditName:d}))}if(451===t.status&&s(m.n({account:i,features:o,subredditName:d})),403===t.status)if(n===x.d.GoldSubreddit)s(m.q({account:i,features:o,subredditName:d}));else if(n===x.d.PrivateSubreddit)s(m.r({account:i,features:o,subredditDescription:r.description||"",subredditName:d}));else if(n===x.d.QuarantinedSubreddit){const t=!r||void 0===r.quarantineRequiresEmailOptin||r.quarantineRequiresEmailOptin;s(m.t({account:i,features:o,subredditName:d,quarantineRequiresEmail:t,quarantineMessage:r.quarantineMessage,quarantineMessageHtml:r.quarantineMessageHtml||"",quarantineMessageRTJson:r.quarantineMessageRTJson||it.i}))}}},St="PAGE__SUBREDDIT_PENDING",ht="PAGE__SUBREDDIT_LOADED",It="PAGE__SUBREDDIT_FAILED",Tt=Object(l.a)(St),yt=Object(l.a)(ht),At=Object(l.a)(It),Ct=(t,e,s,n)=>async(i,o,a)=>{var l;const b=o(),p=Object(U.J)(b),m=b.listings.postOrder.api.pending[t],g=Object(U.i)(b);if(m)return;const h=e!==H.c.All&&e!==H.c.Popular||!b.posts.recent.length?s:Object.assign(Object.assign({},s),{recentPostIds:b.posts.recent});h.layout=V.e[Object(K.N)(b,{})],i(Tt({key:t}));const y=Object(ut.b)(b);let C;if(s.sort===c.P.AWARDED&&e===H.c.Popular)C=Object(W.a)(a.gqlContext(),{top:0,includeListingMetadata:!0}).then(t=>{const e=t.body;return Object.assign(Object.assign({},t),{body:et(e.data)})});else{const t=y?()=>Object(J.b)(a.gqlContext(),Object(J.c)(b,e,h),p):()=>Object(J.a)(a.apiContext(),e,h);C=Object(st.a)("subreddit",t)}const w=p&&g&&!y?Object(Q.d)(a.gqlContext(),Object(ot.e)(g)):null,[x,N]=await Promise.all([C,w]),P=x.body;i(I.m(x.status));const k="error-".concat(t),L=Object(u.a)(e)||d()(P.subreddits,t=>t.name.toLowerCase()===e.toLowerCase());if(x.ok&&L){if(!Object(u.a)(e)&&Object(at.a)(b)){const t=Object.keys(P.subredditAboutInfo)[0],e=Object(U.J)(b);await i(Object(S.f)(t,{fullData:!0,includeIdentity:e}))}let s;const r=P.postIds.filter(t=>!!P.posts[t].isMeta);if(r.length){const t=Object.keys(P.subreddits).reduce((t,s)=>{const r=P.subreddits[s];return r.name.toLowerCase()===e.toLowerCase()?r.id:t},null);if(t){const e=await Object(z.a)(a.apiContext(),t,r);e.ok&&(s=e.body)}}if(N&&N.ok){const t=null===(l=N.body.data.redditorInfoByName)||void 0===l?void 0:l.karma,e=t?{awardeeKarma:t.fromAwardsReceived,awarderKarma:t.fromAwardsGiven,commentKarma:t.fromComments,postKarma:t.fromPosts,totalKarma:t.total}:Q.a;P.account&&Object.assign(P.account,e)}if(i(yt(Object.assign(Object.assign({key:t,meta:b.meta,governance:s},P),{postIds:P.postIds}))),Object(lt.b)(b)){const{postIds:t,posts:e}=P;i(Object(O.a)(Object(B.b)(t,e)))}if(!Object(u.a)(e)){const t=Object(v.G)(o(),e);!!Object(v.S)(b,{subredditId:t})||await A.o(e)(i,o,a);const s=Object(_.c)(P.posts,t),r=Object(_.b)(P.structuredStyles),n=(r?Object(_.d)(r):[]).concat(s);i(Object(_.a)(n,t))}n&&i(D.f(k)),i(Object(f.b)(dt.a.SUBREDDIT)),i(Object(E.p)());const d=Object(v.G)(o(),e);if(d){const t=[i(Object(j.a)({subredditId:d,postIds:P.postIds,skip:["subscription"]}))];y||t.push(i(Object(F.d)(d))),ft(o(),{subredditId:d})&&t.push(i(Object(T.d)(d))),Object(mt.a)(o(),{subredditId:d})&&t.push(i(Object(q.h)(e,d)),i(Object(M.k)(d,rt.a.idCard))),await Promise.all(t)}}else{if(403===x.status||404===x.status||451===x.status)return void i(Et(x,e));i(At(Object.assign({error:!x.ok&&x.error||{type:c.E.NOT_FOUND_ERROR},key:t},P))),n&&i(D.e({id:k,kind:R.b.Error,text:r.fbt._("Sorry, we couldn't load posts for this page.",null,{hk:"CvZvm"}),buttonText:r.fbt._("Retry",null,{hk:"3gV6S0"}),buttonAction:Ct(t,e,s,n)}))}},Dt=(t,e)=>{if(Object(u.a)(e)){if(Object(a.a)(e)){return Object(gt.a)(t,{listingName:e}).displayText}switch(e.toLowerCase()){case H.c.Popular:return"r/popular";case H.c.All:return"r/all"}}return Object(v.W)(t,{subredditName:e})},wt=(t,e)=>{const s=t.f;if(s)return{[Y.p]:s,[Y.s]:"1",[Y.i]:e?"1":"",sort:c.Pb.New}},xt=(t,e)=>{const s=wt(t,e);return s&&Object(p.c)(s)},Rt=(t,e,s,r)=>r?Object(p.b)(t,void 0,r):Object(b.a)(t,e,s),Nt=(t,e)=>async(s,r,n)=>{const{subredditName:o}=t.params,{styling:d}=t.queryParams,a=r(),l=Object(Z.a)(t.params,a),p=xt(t.queryParams,Object(U.bb)(a)),O=Rt(o,l,t.queryParams,p),m=l,j=a.listings.postOrder.api.error[O],S=a.listings.postOrder.api.pending[O];let T=!!a.listings.postOrder.ids[O];const A=a.listings.postOrder.listingSort[O];A&&A.hasChanged&&(T=!1);let C=Object(v.G)(a,o);const D=(t,e)=>"true"===d&&((t,e)=>Object(P.a)(nt.c.config)(t,{subredditId:e})||Object(P.a)(nt.c.flair)(t,{subredditId:e}))(t,e),w=Y.x in t.queryParams&&t.queryParams[Y.x].toUpperCase()||"",x=w in c.Wb&&c.Wb[w];if(S||T&&!j&&!e){if(D(a,C)&&s(y.i(C)),T){const e=Dt(r(),o);s(I.l({title:e})),Object(X.e)(r(),s,t),window.addEventListener("load",()=>{s(Object(E.p)())}),a.sidebarPromotedPosts.firstFetch||window.addEventListener("load",()=>{s(Object(f.b)(dt.a.SUBREDDIT))}),s(G())}return}s(g.g());const R=s(Object(jt.c)("r/".concat(o)));if(p)await s(Object(h.d)(O,p,o));else{const e=Object.assign(Object.assign({},i()(t.queryParams,[...Y.l,...Y.k,Y.h])),{sort:m,t:Object($.a)(m,x)}),r=Object(U.I)(a)||Object(U.J)(a)?a.user.prefs.geopopular:a.meta.country;!e[Y.h]&&r&&(e[Y.h]=r),await s(Ct(O,o,e,!0))}const N=a.platform.currentPage,k=Object(_t.d)(a,{pageLayer:N});if(Object(_t.a)(k)||Object(_t.b)(k)||Object(_t.c)(k)){const t=Object(b.a)(o,c.P.TOP,{t:c.Wb.WEEK}),e={sort:c.P.TOP,t:c.Wb.WEEK};await s(Ct(t,o,e,!1))}C=C||Object(v.G)(r(),o),Object(ct.a)(a,C)||Object(u.a)(o)||await s(Object(_.e)(o)),D(r(),C)&&s(y.i(C)),Object(X.e)(r(),s,t);const L=Dt(r(),o);s(I.l({title:L})),s(G()),await R},Pt="PAGE__SUBREDDIT_INVALIDATE_LISTING",kt=Object(l.a)(Pt)},"./src/reddit/actions/pinnedPost.ts":function(t,e,s){"use strict";s.d(e,"a",(function(){return p})),s.d(e,"h",(function(){return O})),s.d(e,"d",(function(){return f})),s.d(e,"g",(function(){return _})),s.d(e,"c",(function(){return j})),s.d(e,"f",(function(){return E})),s.d(e,"b",(function(){return I})),s.d(e,"e",(function(){return T})),s.d(e,"i",(function(){return N}));var r=s("./node_modules/fbt/lib/FbtPublic.js"),n=s("./src/lib/constants/index.ts"),i=s("./src/lib/makeActionCreator/index.ts"),o=s("./src/reddit/actions/modal.ts"),d=s("./src/reddit/actions/toaster.ts"),c=s("./src/reddit/constants/modals.ts"),a=s("./src/reddit/endpoints/post/index.tsx"),u=s("./src/reddit/models/Toast/index.ts"),l=s("./src/reddit/selectors/posts.ts"),b=s("./src/reddit/selectors/profile.ts");const p="PINNEDPOST__PINNED_POSTS_LOADED",O=Object(i.a)(p),f="PINNEDPOST__PIN_POST_SUCCESS",_="PINNEDPOST__UNPIN_POST_SUCCESS",m=Object(i.a)(f),g=Object(i.a)(_),j="PINNEDPOST__PIN_POST_PENDING",E="PINNEDPOST__UNPIN_POST_PENDING",S=Object(i.a)(j),h=Object(i.a)(E),I="PINNEDPOST__PIN_POST_FAILURE",T="PINNEDPOST__UNPIN_POST_FAILURE",y=Object(i.a)(I),A=Object(i.a)(T),C=t=>Object(d.e)({buttonAction:N(t,!0),buttonText:r.fbt._("UNDO",null,{hk:"1O9LWh"}),kind:u.b.SuccessMod,text:r.fbt._("Post pinned to profile!",null,{hk:"1hbHLt"})}),D=(t,e)=>Object(d.e)({buttonAction:N(t,!0),buttonText:r.fbt._("UNDO",null,{hk:"3YtcK2"}),kind:u.b.SuccessMod,text:e?r.fbt._("Post unpinned, reload to see changes",null,{hk:"5FF1g"}):r.fbt._("Post unpinned.",null,{hk:"2BgT0h"})}),w=()=>Object(d.e)({kind:u.b.Error,text:r.fbt._("Could not pin post",null,{hk:"3uNHEh"})}),x=()=>Object(d.e)({kind:u.b.Error,text:r.fbt._("You can't pin a removed post",null,{hk:"3bdn2y"})}),R=()=>Object(d.e)({kind:u.b.Error,text:r.fbt._("Could not unpin post",null,{hk:"o8HG0"})}),N=function(t){let e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return async(s,r,i)=>{let{apiContext:d}=i;const u=r(),p=u.posts.models[t];if(!p)return;const O=!Object(l.w)(u,{postId:t});if(O&&p.isRemoved)return s(x());const f=p.author,_=Object(b.m)(u,f),[j,E,I,T,N]=O?[S,m,y,C,w]:[h,g,A,D,R];if(O){if(Object(l.W)(u,{profileName:f}).length>=n.W)return void s(Object(o.i)(c.a.PINNED_POSTS_LIMIT_REACHED))}const P=Object(l.q)(u,t,f),k=!O&&P;s(j({postId:t,profileId:_})),(await Object(a.t)(d(),t,O,!0)).ok?(s(E({postId:t,profileId:_})),e||s(T(t,k))):(s(I({postId:t,profileId:_})),s(N()))}}},"./src/reddit/actions/postCollection/constants.ts":function(t,e,s){"use strict";s.d(e,"c",(function(){return r})),s.d(e,"d",(function(){return n})),s.d(e,"b",(function(){return i})),s.d(e,"f",(function(){return o})),s.d(e,"g",(function(){return d})),s.d(e,"a",(function(){return c})),s.d(e,"t",(function(){return a})),s.d(e,"e",(function(){return u})),s.d(e,"r",(function(){return l})),s.d(e,"s",(function(){return b})),s.d(e,"n",(function(){return p})),s.d(e,"l",(function(){return O})),s.d(e,"m",(function(){return f})),s.d(e,"k",(function(){return _})),s.d(e,"i",(function(){return m})),s.d(e,"j",(function(){return g})),s.d(e,"h",(function(){return j})),s.d(e,"p",(function(){return E})),s.d(e,"q",(function(){return S})),s.d(e,"o",(function(){return h}));const r="CREATE_COLLECTION_PENDING",n="CREATE_COLLECTION_SUCCESS",i="CREATE_COLLECTION_FAILED",o="GET_SUBREDDIT_COLLECTION_SUCCESS",d="REMOVE_POST_FROM_COLLECTION_SUCCESS",c="ADD_POST_TO_COLLECTION_SUCCESS",a="UPDATE_POST_WITH_COLLECTION_ID",u="DELETE_COLLECTION_SUCCESS",l="UPDATE_COLLECTION_PENDING",b="UPDATE_COLLECTION_SUCCESS",p="UPDATE_COLLECTION_FAILED",O="UPDATE_COLLECTION_DESCRIPTION_PENDING",f="UPDATE_COLLECTION_DESCRIPTION_SUCCESS",_="UPDATE_COLLECTION_DESCRIPTION_FAILED",m="REORDER_COLLECTION_PENDING",g="REORDER_COLLECTION_SUCCESS",j="REORDER_COLLECTION_FAILED",E="UPDATE_COLLECTION_LAYOUT_PENDING",S="UPDATE_COLLECTION_LAYOUT_SUCCESS",h="UPDATE_COLLECTION_LAYOUT_FAILED"},"./src/reddit/actions/postCreation/constants.ts":function(t,e,s){"use strict";s.d(e,"H",(function(){return r})),s.d(e,"I",(function(){return n})),s.d(e,"l",(function(){return i})),s.d(e,"m",(function(){return o})),s.d(e,"y",(function(){return d})),s.d(e,"E",(function(){return c})),s.d(e,"F",(function(){return a})),s.d(e,"k",(function(){return u})),s.d(e,"D",(function(){return l})),s.d(e,"p",(function(){return b})),s.d(e,"N",(function(){return p})),s.d(e,"n",(function(){return O})),s.d(e,"A",(function(){return f})),s.d(e,"s",(function(){return _})),s.d(e,"c",(function(){return m})),s.d(e,"b",(function(){return g})),s.d(e,"d",(function(){return j})),s.d(e,"e",(function(){return E})),s.d(e,"f",(function(){return S})),s.d(e,"g",(function(){return h})),s.d(e,"h",(function(){return I})),s.d(e,"i",(function(){return T})),s.d(e,"j",(function(){return y})),s.d(e,"q",(function(){return A})),s.d(e,"P",(function(){return C})),s.d(e,"O",(function(){return D})),s.d(e,"Q",(function(){return w})),s.d(e,"R",(function(){return x})),s.d(e,"S",(function(){return R})),s.d(e,"T",(function(){return N})),s.d(e,"U",(function(){return P})),s.d(e,"V",(function(){return k})),s.d(e,"W",(function(){return v})),s.d(e,"r",(function(){return U})),s.d(e,"B",(function(){return L})),s.d(e,"w",(function(){return G})),s.d(e,"u",(function(){return F})),s.d(e,"v",(function(){return q})),s.d(e,"t",(function(){return M})),s.d(e,"x",(function(){return B})),s.d(e,"M",(function(){return H})),s.d(e,"o",(function(){return Y})),s.d(e,"z",(function(){return V})),s.d(e,"Y",(function(){return K})),s.d(e,"G",(function(){return W})),s.d(e,"a",(function(){return z})),s.d(e,"C",(function(){return J})),s.d(e,"K",(function(){return Q})),s.d(e,"L",(function(){return X})),s.d(e,"J",(function(){return Z})),s.d(e,"X",(function(){return $}));const r="SUBMIT_VALIDATION_FIELD_HAS_ERROR",n="SUBMIT_VALIDATION_FIELD_IS_VALID",i="POST_CREATION_EDIT_COMPLETE",o="POST_CREATION_EDIT_FAILED",d="POST_CREATION_PENDING_EDIT",c="POST_CREATION_START_EDITING_POST",a="POST_CREATION_STOP_EDITING_POST",u="EDITOR_CONTENT_KEY__NEW_DRAFT",l="STARTED_CONVERTING_EDITOR_CONTENT",b="FINISHED_CONVERTING_EDITOR_CONTENT",p="POST_CREATION__TOGGLE_EDITOR_MODE",O="POST_CREATION__ERRORS_NO_LONGER_VALID",f="POST_TITLE_FETCHED",_="INITIALIZE_EDITOR_MODE",m="POST_CREATION__CHANGE_FLAIR",g="POST_CREATION__CHANGE_EVENT_SCHEDULE",j="POST_CREATION__CHANGE_LINK_BODY",E="POST_CREATION__CHANGE_MARKDOWN_BODY",S="POST_CREATION__CHANGE_MEDIA_BODY",h="POST_CREATION__CHANGE_RECAPTCHA",I="POST_CREATION__CHANGE_RTE_STATE",T="POST_CREATION__CHANGE_SUBMISSION_TYPE",y="POST_CREATION__CHANGE_TITLE",A="POST_CREATION__GOV_TYPE_CHANGED",C="POST_CREATION__TOGGLE_IS_CHAT_POST",D="POST_CREATION__TOGGLE_IS_CHANGED",w="POST_CREATION__TOGGLE_IS_GOV",x="POST_CREATION__TOGGLE_IS_NSFW",R="POST_CREATION__TOGGLE_IS_OC",N="POST_CREATION__TOGGLE_IS_POLL",P="POST_CREATION__TOGGLE_IS_SPOILER",k="POST_CREATION__TOGGLE_POST_TO_TWITTER",v="POST_CREATION__TOGGLE_SEND_REPLIES",U="POST_CREATION__INITIALIZE_CROSSPOST_MODE",L="POST_CREATION__RESET_FORM",G="POST_CREATION__MODAL_TOGGLED",F="POST_CREATION__MEDIA_UPLOAD_PENDING",q="POST_CREATION__MEDIA_UPLOAD_SUCCEEDED",M="POST_CREATION__MEDIA_UPLOAD_FAILED",B="POST_CREATION__PENDING",H="POST_CREATION__SUCCEEDED",Y="POST_CREATION__FAILED",V="POST_CREATION__POLL_FAILED",K="POST_CREATION__VALIDATION_FAILED",W="POST_CREATION__SUBMIT_VALIDATION_FAILED",z="POST_CREATION__CAPTCHA_REQUIRED",J="POST_CREATION__SET_SUBMIT_MODE",Q="POST_CREATION__SUBREDDIT_CHANGE_PENDING",X="POST_CREATION__SUBREDDIT_WILL_CHANGE",Z="POST_CREATION__SUBREDDIT_CHANGE_CANCELED",$="POST_CREATION__UPDATE_SCHEDULED_POST_ADVANCED_SETTINGS"},"./src/reddit/actions/postCreation/general.ts":function(t,e,s){"use strict";s.d(e,"i",(function(){return O})),s.d(e,"n",(function(){return _})),s.d(e,"a",(function(){return m})),s.d(e,"b",(function(){return g})),s.d(e,"c",(function(){return E})),s.d(e,"d",(function(){return S})),s.d(e,"f",(function(){return h})),s.d(e,"e",(function(){return I})),s.d(e,"g",(function(){return T})),s.d(e,"h",(function(){return y})),s.d(e,"j",(function(){return A})),s.d(e,"s",(function(){return C})),s.d(e,"r",(function(){return D})),s.d(e,"t",(function(){return w})),s.d(e,"u",(function(){return x})),s.d(e,"v",(function(){return R})),s.d(e,"w",(function(){return N})),s.d(e,"y",(function(){return P})),s.d(e,"z",(function(){return k})),s.d(e,"A",(function(){return v})),s.d(e,"k",(function(){return U})),s.d(e,"q",(function(){return L})),s.d(e,"p",(function(){return F})),s.d(e,"l",(function(){return q})),s.d(e,"x",(function(){return M})),s.d(e,"o",(function(){return B})),s.d(e,"m",(function(){return H}));var r=s("./node_modules/react-router-redux/es/index.js"),n=s("./src/lib/isUrl/index.ts"),i=s("./src/lib/makeActionCreator/index.ts"),o=s("./src/reddit/actions/modal.ts"),d=s("./src/reddit/contexts/PageLayer/index.tsx"),c=s("./src/reddit/endpoints/post/index.tsx"),a=s("./src/reddit/models/PostCreationForm/index.ts"),u=s("./src/reddit/routes/postCreation/constants.ts"),l=s("./src/reddit/selectors/postCollection.ts"),b=s("./src/reddit/selectors/postCreations.ts"),p=s("./src/reddit/actions/postCreation/constants.ts");const O=Object(i.a)(p.n),f=Object(i.a)(p.A),_=(Object(i.a)(p.s),t=>{switch(t){case"markdown":return"self";case"richtext":case"richText":return"self";case"media":return"media";default:return"link"}}),m=Object(i.a)(p.b),g=Object(i.a)(p.c),j=Object(i.a)(p.d),E=Object(i.a)(p.e),S=Object(i.a)(p.f),h=Object(i.a)(p.g),I=Object(i.a)(p.h),T=Object(i.a)(p.i),y=Object(i.a)(p.j),A=Object(i.a)(p.q),C=Object(i.a)(p.P),D=Object(i.a)(p.O),w=(Object(i.a)(p.Q),Object(i.a)(p.R)),x=Object(i.a)(p.S),R=Object(i.a)(p.T),N=Object(i.a)(p.U),P=Object(i.a)(p.V),k=Object(i.a)(p.W),v=Object(i.a)(p.X),U=Object(i.a)(p.r),L=t=>async(e,s,r)=>{let{apiContext:i}=r;e(j(t)),Object(n.a)(t)&&e((t=>async(e,s,r)=>{let{apiContext:n}=r;const i=await Object(c.f)(n(),t);i.ok&&i.body&&i.body.json&&i.body.json.data&&e(f(i.body.json.data))})(t))},G=Object(i.a)(p.B),F=(t,e)=>async(s,n)=>{s(G()),s(t?Object(r.b)(u.b):Object(r.b)(Object(b.X)(n(),{pageLayer:e})))},q=Object(i.a)(o.c),M=t=>async e=>{t?t===a.d?e(q(t)):e(o.i(t)):(e(q(t)),e(o.i(t)))},B=t=>async(e,s)=>{const r=s(),n=Object(d.D)(t),i=Object(b.C)(r);if(n&&i){Object(b.S)(r)!==a.c&&e(M(a.c))}else e(F(!1,t))},H=t=>async(e,s)=>{const r=s();Object(l.n)(r,{subredditId:t})?e(o.i(a.a)):e(o.i(a.b))}},"./src/reddit/actions/postFlair.ts":function(t,e,s){"use strict";s.d(e,"c",(function(){return O})),s.d(e,"a",(function(){return g})),s.d(e,"f",(function(){return h})),s.d(e,"b",(function(){return A})),s.d(e,"e",(function(){return x})),s.d(e,"d",(function(){return R})),s.d(e,"l",(function(){return v})),s.d(e,"k",(function(){return U})),s.d(e,"j",(function(){return L})),s.d(e,"g",(function(){return G})),s.d(e,"i",(function(){return F})),s.d(e,"h",(function(){return q}));var r=s("./node_modules/fbt/lib/FbtPublic.js"),n=s("./src/lib/makeActionCreator/index.ts"),i=s("./src/reddit/actions/post.ts"),o=s("./src/reddit/actions/postFlairStyleTemplate.ts"),d=s("./src/reddit/actions/toaster.ts"),c=s("./src/reddit/endpoints/flair/index.ts"),a=s("./src/reddit/helpers/flair.ts"),u=s("./src/reddit/models/Flair/index.ts"),l=s("./src/reddit/models/Toast/index.ts"),b=s("./src/reddit/selectors/postFlair.ts"),p=s("./src/reddit/selectors/subreddit.ts");const O="STRUCTURED_STYLES__POSTFLAIR_ENABLED_SETTING_SUCCESS",f=Object(n.a)("STRUCTURED_STYLES__POSTFLAIR_ENABLED_SETTING_PENDING"),_=Object(n.a)(O),m=Object(n.a)("STRUCTURED_STYLES__POSTFLAIR_ENABLED_SETTING_FAILED"),g="STRUCTURED_STYLES__POSTFLAIR_ALLOW_ASSIGN_OWN_SETTING_SUCCESS",j=Object(n.a)("STRUCTURED_STYLES__POSTFLAIR_ALLOW_ASSIGN_OWN_SETTING_PENDING"),E=Object(n.a)(g),S=Object(n.a)("STRUCTURED_STYLES__POSTFLAIR_ALLOW_ASSIGN_OWN_SETTING_FAILED"),h="STRUCTURED_STYLES__POSTFLAIR_SAVETEMPLATE_SUCCESS",I=Object(n.a)("STRUCTURED_STYLES__POSTFLAIR_SAVETEMPLATE_PENDING"),T=Object(n.a)(h),y=Object(n.a)("STRUCTURED_STYLES__POSTFLAIR_SAVETEMPLATE_FAILED"),A="STRUCTURED_STYLES__POSTFLAIR_DELETETEMPLATE_SUCCESS",C=Object(n.a)("STRUCTURED_STYLES__POSTFLAIR_DELETETEMPLATE_PENDING"),D=Object(n.a)(A),w=Object(n.a)("STRUCTURED_STYLES__POSTFLAIR_DELETETEMPLATE_FAILED"),x="STRUCTURED_STYLES__POSTFLAIR_REORDERTEMPLATES_PENDING",R="STRUCTURED_STYLES__POSTFLAIR_REORDERTEMPLATES_FAILED",N=Object(n.a)(x),P=Object(n.a)("STRUCTURED_STYLES__POSTFLAIR_REORDERTEMPLATES_SUCCESS"),k=Object(n.a)(R),v=(t,e)=>async(s,r,n)=>{let{apiContext:i}=n;const o=r(),d=Object(p.T)(o,{subredditId:t}).name;s(f());const a=await Object(c.k)(i(),d,e);if(a.ok){s(_({subredditId:t,isEnabled:e}))}else s(m());return a.ok},U=(t,e)=>async(s,r,n)=>{let{apiContext:i}=n;const o=r(),d=Object(p.T)(o,{subredditId:t}).name;s(j());const a=await Object(c.j)(i(),e,u.d.LinkFlair,d);if(a.ok){s(E({subredditId:t,canAssignOwn:e}))}else s(S());return a.ok},L=(t,e)=>async(s,n,i)=>{let{apiContext:a}=i;const b=n(),O=Object(p.T)(b,{subredditId:e}).name;s(I());const f=await Object(c.f)(a(),t,O,u.d.LinkFlair);let _=f.ok&&!(f.body&&!1===f.body.success);if(_){const r=f.body;if(s(T({subredditId:e,template:r})),r.id){const n=t.styleTemplate,i=b.structuredStyles.flairTemplate.models[r.id];n?_=await s(Object(o.d)(e,r.id,n)):i&&(_=await s(Object(o.c)(e,r.id)))}}if(_){const t=Object(d.d)(r.fbt._("Flair saved!",null,{hk:"3MQuUt"}),l.b.SuccessMod);s(Object(d.e)(t))}else{s(y());const n=Object(d.d)(r.fbt._("Sorry, flair wasn't saved.",null,{hk:"1yf1Ne"}),l.b.Error,r.fbt._("Retry",null,{hk:"1XMjgA"}),L(t,e));s(Object(d.e)(n))}return _},G=(t,e)=>async(s,n,i)=>{let{apiContext:o}=i;const a=n(),u=Object(p.T)(a,{subredditId:e}).name;if(s(C()),(await Object(c.b)(o(),t,u)).ok){s(D({subredditId:e,templateId:t}));const n=Object(d.d)(r.fbt._("Flair deleted!",null,{hk:"44T1il"}),l.b.SuccessMod);s(Object(d.e)(n))}else{s(w());const n=Object(d.d)(r.fbt._("Sorry, flair wasn't deleted.",null,{hk:"1nwT0G"}),l.b.Error,r.fbt._("Retry",null,{hk:"1XMjgA"}),G(t,e));s(Object(d.e)(n))}},F=(t,e)=>async(s,n,i)=>{let{apiContext:o}=i;const a=n(),O=Object(b.d)(a,{subredditId:e}).templateIds,f=Object(p.T)(a,{subredditId:e}).name;if(s(N({subredditId:e,templateIds:t})),(await Object(c.e)(o(),f,u.d.LinkFlair,t)).ok){s(P());const t=Object(d.d)(r.fbt._("Flair reorder saved.",null,{hk:"1Xbuan"}),l.b.SuccessMod);s(Object(d.e)(t))}else{s(k({subredditId:e,templateIds:O}));const n=Object(d.d)(r.fbt._("Sorry. Flair reorder wasn't saved.",null,{hk:"4ohwNd"}),l.b.Error,r.fbt._("Retry",null,{hk:"1XMjgA"}),F(t,e));s(Object(d.e)(n))}},q=t=>{let{post:e,previewFlair:s,selectedTemplateId:r}=t;return async(t,n,o)=>{let{apiContext:d}=o;const u=e.flair.filter(t=>!Object(a.p)(t.type));if(s&&u.unshift(s),t(Object(i.J)({[e.id]:{flair:u}})),s){const t=Object(a.g)(s);Object(c.h)(d(),e.id,r,t)}else Object(c.h)(d(),e.id,"","")}}},"./src/reddit/actions/postFlairStyleTemplate.ts":function(t,e,s){"use strict";s.d(e,"b",(function(){return h})),s.d(e,"d",(function(){return T})),s.d(e,"a",(function(){return y})),s.d(e,"c",(function(){return C}));s("./node_modules/core-js/modules/web.dom.iterable.js"),s("./node_modules/core-js/modules/es6.symbol.js");var r=s("./node_modules/lodash/forEach.js"),n=s.n(r),i=s("./node_modules/lodash/isEqual.js"),o=s.n(i),d=s("./node_modules/lodash/values.js"),c=s.n(d),a=s("./src/lib/makeActionCreator/index.ts"),u=s("./src/reddit/actions/imageUploads.ts"),l=s("./src/reddit/helpers/media/index.ts"),b=s("./src/lib/constants/index.ts"),p=s("./src/lib/makeApiRequest/index.ts"),O=s("./src/lib/omitHeaders/index.ts"),f=s("./src/reddit/constants/headers.ts");var _=s("./src/reddit/helpers/trackers/blade.ts"),m=s("./src/reddit/models/Image/index.tsx"),g=s("./src/reddit/selectors/subreddit.ts"),j=s("./src/telemetry/index.ts"),E=function(t,e){var s={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(s[r]=t[r]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var n=0;for(r=Object.getOwnPropertySymbols(t);n<r.length;n++)e.indexOf(r[n])<0&&Object.prototype.propertyIsEnumerable.call(t,r[n])&&(s[r[n]]=t[r[n]])}return s};const S=t=>{let{subredditId:e,flairId:s,imageKey:r,imageData:n}=t;return async(t,i,o)=>{const d=i(),c=Object(g.T)(d,{subredditId:e});if(!c)return!1;t(Object(u.k)(n));const a=await(async(t,e,s,r,n,i)=>Object(p.a)(Object(O.a)(t,[f.a]),{endpoint:"".concat(t.apiUrl,"/api/v1/").concat(e,"/flair_style_asset_upload_s3/").concat(s),method:b.eb.POST,data:{filepath:r,imagetype:n,mimetype:i}}))(o.apiContext(),c.name,s,n.file.name,r,await Object(l.g)(n.file));let _=!1;try{const e=await Object(u.g)(i(),a,n,m.a.FlairTemplates);e&&t(Object(u.j)(e)),_=!0}catch(j){if(j instanceof Error)throw j;t(Object(u.i)(j))}return _}},h="POSTFLAIR_STYLETEMPLATE_SAVED_SUCCESS",I=Object(a.a)(h),T=(t,e,s)=>async(r,i,d)=>{const{apiContext:a}=d;let l=i();const{pendingImages:h}=s;let T=E(s,["pendingImages"]);const y=Object(g.T)(l,{subredditId:t});if(!y)return!1;const A=l.structuredStyles.flairTemplate.models[e];if(A&&o()(A,T))return!0;if(h){const s=[];if(n()(h,(n,i)=>{n&&s.push(r(S({flairId:e,imageData:Object(m.m)(n),imageKey:i,subredditId:t})))}),!(await Promise.all(s)).every(t=>t))return!1;T=((t,e,s)=>{const r=Object.assign({},t);return n()(e,(t,e)=>{const n=t&&s.imageUploads[t.id];n&&n.kind===m.b.TempUploaded&&(r[e]=n.url)}),r})(T,h,i())}l=i();let C=null,D=null;const w=[];try{(C=await Object(u.f)(l,m.a.FlairTemplates))&&(D=Object(u.m)(C)(r,i,d),w.push(...c()(C.imagesByKey)))}catch(P){return!1}const x=await(async(t,e,s,r)=>Object(p.a)(Object(O.a)(t,[f.a]),{endpoint:"".concat(t.apiUrl,"/api/v1/").concat(e,"/flair_styles/").concat(s),method:b.eb.PUT,data:r}))(a(),y.name,e,T),R=A?"edit_post_flair_template":"save_post_flair_template",N=Object(_.e)(l,R);if(x.ok){let t;if(D)try{await D,t=((t,e,s)=>{const r=Object.assign({},t);return e.forEach(t=>{const e=s.imageUploads[t.id];e&&e.kind===m.b.Uploaded&&(t.url===r.postBackgroundImage?r.postBackgroundImage=e.url:t.url===r.postPlaceholderImage&&(r.postPlaceholderImage=e.url))}),r})(T,w,i())}catch(P){t=null}else t=T;r(I({flairId:e,template:t||T}))}else C&&C.websocket.close();return Object(j.a)(Object.assign(Object.assign({},N),{actionInfo:Object.assign(Object.assign({},N.actionInfo),{success:x.ok})})),x.ok},y="POSTFLAIR_STYLETEMPLATE_DELETED_SUCCESS",A=Object(a.a)(y),C=(t,e)=>async(s,r,n)=>{let{apiContext:i}=n;const o=r(),d=Object(g.T)(o,{subredditId:t});if(!d)return!1;const c=await(async(t,e,s)=>Object(p.a)(Object(O.a)(t,[f.a]),{endpoint:"".concat(t.apiUrl,"/api/v1/").concat(e,"/flair_styles/").concat(s),method:b.eb.DELETE}))(i(),d.name,e),a=Object(_.e)(o,"delete_flair_template");return c.ok&&s(A({flairId:e})),Object(j.a)(Object.assign(Object.assign({},a),{actionInfo:Object.assign(Object.assign({},a.actionInfo),{success:c.ok})})),c.ok}},"./src/reddit/actions/publicAccessNetwork/api.ts":function(t,e,s){"use strict";s.d(e,"c",(function(){return O})),s.d(e,"d",(function(){return _})),s.d(e,"a",(function(){return m})),s.d(e,"b",(function(){return S}));var r=s("./src/lib/makeActionCreator/index.ts"),n=s("./src/reddit/actions/post.ts"),i=s("./src/reddit/actions/publicAccessNetwork/constants.ts"),o=s("./src/reddit/endpoints/publicAccessNetwork/index.ts"),d=s("./src/reddit/selectors/experiments/publicAccessNetwork.ts"),c=s("./src/reddit/selectors/PublicAccessNetwork/api.ts");const a=Object(r.a)(i.w),u=Object(r.a)(i.x),l=Object(r.a)(i.G),b=(Object(r.a)(i.H),Object(r.a)(i.I)),p=Object(r.a)(i.T),O=t=>async(e,s)=>{if(Object(d.a)(s()))return Object(d.g)(s())?e(f(t)):e((()=>async(t,e,s)=>{let{gqlContext:r}=s;const n=Object(c.k)(e()),i=n.global.lastUpdated||0,d=1e3*n.global.rpan_config_refresh_rate;if(n.isPending||Date.now()<i+d)return;t(l());const u=await Object(o.b)(r());u.ok&&u.body?t(a(Object.assign(Object.assign({},u.body),{lastUpdated:Date.now()}))):t(b())})())},f=t=>async(e,s,r)=>{let{gqlContext:n}=r;const i=Object(c.k)(s()),d=Object(c.m)(s(),{subreddit:t}),p=d&&d.lastUpdated||0,O=1e3*i.global.rpan_config_refresh_rate;if(i.isPending||i.isPermanentlyCanceled||Date.now()<p+O)return;e(l());const f=await Object(o.c)(n(),t);if(!f.ok)return void e(b());const _=f.body;e(a(Object.assign(Object.assign({},_.global),{lastUpdated:Date.now()}))),e(u({name:t,config:Object.assign(Object.assign({},_.listing_info),{lastUpdated:Date.now()})}))},_=t=>async(e,s,r)=>{let{gqlContext:n}=r;e(p()),await Object(o.i)(n(),t)},m=t=>async(e,s,r)=>{let{apiContext:i}=r;s().posts.models[t]||await e(Object(n.D)(t))},g=Object(r.a)(i.v),j=Object(r.a)(i.J),E=Object(r.a)(i.K),S=()=>async(t,e,s)=>{let{gqlContext:r}=s;const n=e();if(!Object(d.g)(n)||Object(c.h)(n))return;t(j());const i=await Object(o.d)(r());i.ok&&i.body&&i.body.data?t(g({subreddits:i.body.data})):t(E({error:i.error}))}},"./src/reddit/actions/publicAccessNetwork/streams.ts":function(t,e,s){"use strict";s.d(e,"c",(function(){return b})),s.d(e,"a",(function(){return j})),s.d(e,"b",(function(){return E})),s.d(e,"d",(function(){return S})),s.d(e,"e",(function(){return h}));s("./node_modules/core-js/modules/es6.regexp.search.js"),s("./node_modules/core-js/modules/web.dom.iterable.js");var r=s("./node_modules/query-string/index.js"),n=s.n(r),i=s("./src/lib/makeActionCreator/index.ts"),o=s("./src/reddit/actions/publicAccessNetwork/constants.ts"),d=s("./src/reddit/endpoints/publicAccessNetwork/index.ts"),c=s("./src/reddit/helpers/publicAccessNetwork/index.ts"),a=s("./src/reddit/selectors/experiments/publicAccessNetwork.ts"),u=s("./src/reddit/selectors/PublicAccessNetwork/api.ts");const l=new Set(["home","r/popular"]),b=t=>{const e=location&&location.search||"",s=n.a.parse(e);l.has(t)&&(s.related=t);const r=n.a.stringify(s);return r?"?".concat(r):""},p=Object(i.a)(o.N),O=Object(i.a)(o.y),f=Object(i.a)(o.O),_=Object(i.a)(o.z),m=Object(i.a)(o.M),g=Object(i.a)(o.L),j=Object(i.a)(o.t),E=Object(i.a)(o.u),S=t=>async(e,s,r)=>{let{gqlContext:n}=r;const i=Object(c.h)(t),o=s();if(Object(u.d)(o,i))return;e(p(i));const a=await Object(d.e)(n(),i),l=Date.now();if(a.ok&&a.body&&a.body.data){const t=a.body.data;e(O({model:t,utcTimeStamp:l}))}else e(y({streamId:i,error:a.error,utcTimeStamp:l}))},h=(t,e)=>async(s,r)=>Object(a.g)(r())?s(T(t,e)):s(I()),I=()=>async(t,e,s)=>{let{gqlContext:r}=s;const n=e();if(Object(u.f)(n))return;t(f());const i=await Object(d.g)(r()),o=Date.now();if(i.ok&&i.body&&i.body.data){const e=i.body.data;t(_({models:e,utcTimeStamp:o}))}else t(A({error:i.error,utcTimeStamp:o}))},T=(t,e)=>async(s,r,n)=>{let{gqlContext:i}=n;const o=r();if(Object(u.f)(o))return;s(f());const c=await Object(d.f)(i(),t,e),a=Date.now();if(c.ok&&c.body&&c.body.data){const e=c.body.data;s(_({listingName:t,models:e,utcTimeStamp:a}))}else s(A({error:c.error,utcTimeStamp:a}))},y=t=>async e=>{e(m(t))},A=t=>async e=>{e(g(t))}},"./src/reddit/actions/reportFlow.ts":function(t,e,s){"use strict";s.d(e,"e",(function(){return j})),s.d(e,"d",(function(){return E})),s.d(e,"c",(function(){return S})),s.d(e,"h",(function(){return y})),s.d(e,"f",(function(){return A})),s.d(e,"a",(function(){return C})),s.d(e,"b",(function(){return D})),s.d(e,"j",(function(){return N})),s.d(e,"g",(function(){return P})),s.d(e,"i",(function(){return U}));var r=s("./node_modules/fbt/lib/FbtPublic.js"),n=s("./src/lib/makeActionCreator/index.ts"),i=s("./src/reddit/actions/login.ts"),o=s("./src/reddit/actions/modal.ts"),d=s("./src/reddit/actions/reportRules.ts"),c=s("./src/reddit/actions/subreddit.ts"),a=s("./src/reddit/actions/toaster.ts"),u=s("./src/reddit/actions/users.ts"),l=s("./src/reddit/endpoints/moderator/moderatingSubreddits.ts"),b=s("./src/reddit/endpoints/post/index.tsx"),p=s("./src/reddit/helpers/isComment.ts"),O=s("./src/reddit/helpers/isPost.ts"),f=s("./src/reddit/models/Post/index.ts"),_=s("./src/reddit/models/Toast/index.ts"),m=s("./src/reddit/selectors/posts.ts"),g=s("./src/reddit/selectors/user.ts");const j="REPORT__PENDING",E="REPORT__LOADED",S="REPORT__FAILED",h=Object(n.a)(j),I=Object(n.a)(E),T=Object(n.a)(S),y=(t,e)=>async(s,n,i)=>{let{apiContext:o}=i;const d=t.id,c=n(),u=c.reportFlow.api.pending[d],l=c.reportFlow.userIsMod;if(u)return;s(h({id:d}));const p=await Object(b.n)(o(),t),O="error-report-".concat(d);if(p.ok)s(I({id:d})),s(a.f(O)),!e.isAbuseOfReportButton&&l&&s(U());else{s(T({id:d}));const n=p.error&&p.error.fields&&p.error.fields.length?p.error.fields[0].msg:"";s(a.e({id:O,kind:_.b.Error,text:n||r.fbt._("Give us a few minutes to fix the problem. Sorry!",null,{hk:"3wBPeO"}),buttonText:r.fbt._("Retry",null,{hk:"1QXiG6"}),buttonAction:y(t,e)}))}},A="REPORT_FLOW__TARGET_SET",C="REPORT_FLOW__OPENED_FROM_MODAL_PAGE",D="REPORT_FLOW__OPEN_CATEGORY",w=Object(n.a)(A),x=Object(n.a)(C),R=Object(n.a)(D),N=(t,e,s)=>async(r,n,a)=>{let{apiContext:l}=a;const b=n(),_=Object(p.a)(t),j=Object(O.a)(t);if(!j&&!_)return;const E=_?b.comments.models[t]:b.posts.models[t];if(!E)return;if(!Object(g.J)(n()))return r(Object(i.i)()),void r(Object(o.k)({actionSource:o.a.Report,redirectUrl:E.permalink}));r(Object(u.y)(E.author));const S=Object(m.bb)(b,{postId:_?b.comments.models[t].postId:b.posts.models[t].id}),h=j&&Object(f.n)(E)||_&&L(E,b);h||b.reportRules.sitewideRules&&b.reportRules.sitewideRules.length||r(Object(d.d)()),!h||b.reportRules.liveStreamingRules&&b.reportRules.liveStreamingRules.length||r(Object(d.c)()),S&&r(Object(c.o)(S.name,S.type)),r(w(t)),r(x(!!e)),s&&r(R(s)),S&&r(v(S.name))},P="REPORT_FLOW__USER_IS_MOD_SET",k=Object(n.a)(P),v=t=>async(e,s,r)=>{let{apiContext:n}=r;const i=await Object(l.a)(n());e(k(i.ok&&!!i.body[t]))},U=()=>async(t,e,s)=>{let{apiContext:r}=s;t(w(null))},L=(t,e)=>{const s=t.postId,r=s&&e.posts.models[s];return!!r&&Object(f.n)(r)}},"./src/reddit/actions/reportRules.ts":function(t,e,s){"use strict";s.d(e,"b",(function(){return a})),s.d(e,"a",(function(){return u})),s.d(e,"d",(function(){return p})),s.d(e,"c",(function(){return O}));var r=s("./node_modules/fbt/lib/FbtPublic.js"),n=s("./src/lib/makeActionCreator/index.ts"),i=s("./src/lib/constants/index.ts"),o=s("./src/lib/makeApiRequest/index.ts"),d=s("./src/lib/omitHeaders/index.ts"),c=s("./src/reddit/constants/headers.ts");const a="SITEWIDE_RULES_LOADED",u="LIVESTREAMING_RULES_LOADED",l=Object(n.a)(a),b=Object(n.a)(u),p=()=>async(t,e,s)=>{let{apiContext:r}=s;if(!e().user)return;const n=await(t=>Object(o.a)(Object(d.a)(t,[c.a]),{endpoint:"".concat(t.apiUrl,"/api/sitewide_rules.json"),method:i.eb.GET}))(r());if(n.ok){const e=n.body,s=f(e.sitewide_rules);t(l(s))}},O=()=>async(t,e,s)=>{let{apiContext:r}=s;if(!e().user)return;const n=await(t=>Object(o.a)(Object(d.a)(t,[c.a]),{endpoint:"".concat(t.apiUrl,"/api/livestream_rules.json"),method:i.eb.GET}))(r());if(n.ok){const e=n.body,s=f(e.livestream_rules);t(b(s))}},f=t=>{let e=[];if(t&&t.length>2){const s={reasonTextToShow:r.fbt._("It's spam or abuse",null,{hk:"21rHqk"}),nextStepReasons:[t[0],t[1],t[2]]};4===t.length&&s.nextStepReasons&&s.nextStepReasons.push(t[3]),e.push(s),e=e.concat(t.slice(t.length-1))}return e}},"./src/reddit/actions/search.ts":function(t,e,s){"use strict";s.d(e,"b",(function(){return E})),s.d(e,"c",(function(){return S})),s.d(e,"a",(function(){return h})),s.d(e,"d",(function(){return I})),s.d(e,"f",(function(){return T})),s.d(e,"j",(function(){return y})),s.d(e,"h",(function(){return x})),s.d(e,"g",(function(){return R})),s.d(e,"e",(function(){return N})),s.d(e,"i",(function(){return P}));s("./node_modules/core-js/modules/es6.array.sort.js");var r=s("./node_modules/fbt/lib/FbtPublic.js"),n=s("./node_modules/lodash/pick.js"),i=s.n(n),o=s("./src/lib/constants/index.ts"),d=s("./src/lib/makeActionCreator/index.ts"),c=s("./src/lib/makeSearchKey/index.ts"),a=s("./src/reddit/actions/toaster.ts"),u=s("./src/reddit/constants/parameters.ts"),l=s("./src/reddit/actions/pages/subreddit.ts"),b=s("./src/reddit/endpoints/page/search.ts"),p=s("./src/lib/makeApiRequest/index.ts"),O=s("./src/lib/omitHeaders/index.ts"),f=s("./src/reddit/constants/headers.ts");var _=async(t,e)=>Object(p.a)(Object(O.a)(t,[f.a]),{endpoint:"".concat(t.apiUrl,"/api/related_queries_v1.json?query=").concat(e),method:o.eb.GET}),m=s("./src/reddit/models/Toast/index.ts"),g=s("./src/reddit/selectors/searchResults.ts"),j=s("./src/reddit/selectors/user.ts");const E="SEARCH__MORE_RESULTS_PENDING",S="SEARCH__MORE_RESULTS_RECEIVED",h="SEARCH__MORE_RESULTS_FAILED",I="SEARCH__RELATED_QUERIES_RECEIVED",T="SEARCH__UPDATE_SEARCH_QUERY",y=Object(d.a)(T),A=Object(d.a)(E),C=Object(d.a)(S),D=Object(d.a)(h),w=Object(d.a)(I),x=t=>async(e,s,r)=>{let{apiContext:n}=r;const i=s(),o=Object(g.g)(i,t);if(o&&o.length>0)return;const d=await _(n(),t);if(d.ok){const s=(t=>({relatedQueries:t.body.related_queries}))(d);e(w({query:t,relatedQueries:s.relatedQueries}))}},R=t=>async(e,s,n)=>{let{apiContext:d}=n;const p=s(),{queryParams:O}=p.platform.currentPage,f=Object(l.e)(O,Object(j.bb)(p)),_=p.platform.currentPage.urlParams.subredditName||p.platform.currentPage.urlParams.multiredditName,{username:g}=p.platform.currentPage.urlParams,E=f||i()(O,u.t),S=Object(c.c)(E),h=Object.assign(Object.assign({},S),{sort:S.category?o.Pb.Relevance:S.sort,t:S.category?o.Wb.DAY:S.t}),I=Object(c.b)(_,g,h);let T;if(t.indexOf(o.Rb.Posts)>-1){const t=p.listings.postOrder.loadMore[I];if(!t)return;const e=p.listings.postOrder.api.pending[I],s=p.listings.postOrder.fetchedTokens,r=s[I]&&s[I][t.token];if(e||r)return;T=t.token}else{if(!(t.indexOf(o.Rb.Subreddits)>-1||t.indexOf(o.Rb.Users)>-1))throw new Error("Should not attempt to fetch more results without a search type");{const t=p.listings.listingOrder.loadMore[I];if(!t)return;const e=p.listings.listingOrder.api.pending[I],s=p.listings.listingOrder.fetchedTokens,r=s[I]&&s[I][t.token];if(e||r)return;T=t.token}}const y="error-".concat(I);e(A({fetchedToken:T,key:I,type:t}));const w=await Object(b.a)(d(),_,g,Object.assign(Object.assign({},h),{after:T,type:(S.type||[]).join(","),b:!0}));w.ok?(e(C(Object.assign({key:I,fetchedToken:T,meta:p.meta,subredditOrMultiName:_,type:t},w.body))),e(a.f(y))):(e(D(Object.assign({key:I,error:w.error,fetchedToken:T,meta:p.meta,type:t},w.body))),e(a.e({id:y,kind:m.b.Error,text:r.fbt._("Sorry, we couldn't load more search results.",null,{hk:"3IDePs"}),buttonText:r.fbt._("Retry",null,{hk:"1XMjgA"}),buttonAction:R(t)})))},N="SEARCH__TYPEAHEAD_SUCCESS",P=Object(d.a)(N)},"./src/reddit/actions/seo/linksModule.ts":function(t,e,s){"use strict";s.d(e,"a",(function(){return u})),s.d(e,"b",(function(){return l})),s.d(e,"c",(function(){return _})),s.d(e,"d",(function(){return m}));var r=s("./src/lib/makeActionCreator/index.ts"),n=s("./src/lib/loadWithRetries/index.ts");var i=s("./src/lib/makeGqlRequest/index.ts"),o=s("./src/graphql/operations/SubredditLinks.json");const d=t=>({communityIcon:t.styles&&t.styles.icon||void 0,iconUrl:t.styles&&t.styles.legacyIcon&&t.styles.legacyIcon.url||void 0,id:t.id,isNSFW:t.isNSFW||!1,isSubscribed:t.isSubscribed,name:t.name,primaryColor:t.styles&&t.styles.primaryColor||void 0,subscribers:t.subscribers,type:"subreddit"});var c=t=>({subreddits:t.data.subredditInfoById.linkedSubreddits?t.data.subredditInfoById.linkedSubreddits.map(d):[]}),a=s("./src/reddit/selectors/seo/linksModule.ts");const u="FRONTPAGE_LINKS__REQUEST_LOADED",l="SUBREDDIT_LINKS_LOADED",b=Object(r.a)("FRONTPAGE_LINKS__REQUEST_PENDING"),p=Object(r.a)("FRONTPAGE_LINKS__REQUEST_FAILED"),O=Object(r.a)(u),f=Object(r.a)(l),_=()=>async t=>{t(b());const e=await(async()=>(await Object(n.a)(()=>s.e("FrontpageLinks").then(s.t.bind(null,"./src/reddit/endpoints/goodContent/frontpageLinks.json",3)))).default)();t(e?O(e):p())},m=(t,e)=>async(s,r,n)=>{let{gqlContext:d}=n;if(t){if(Object(a.c)(r(),{subredditId:t}))return;const n=await((t,e)=>Object(i.a)(t,Object.assign(Object.assign({},o),{variables:e})))(d(),{subredditId:t,includeSubreddits:!0,subredditsLimit:e||10});if(n.ok){const e=c(n.body);e&&s(f({id:t,data:e}))}}}},"./src/reddit/actions/subreddit.ts":function(t,e,s){"use strict";s.d(e,"m",(function(){return z})),s.d(e,"l",(function(){return J})),s.d(e,"k",(function(){return Q})),s.d(e,"j",(function(){return X})),s.d(e,"i",(function(){return Z})),s.d(e,"h",(function(){return $})),s.d(e,"d",(function(){return tt})),s.d(e,"p",(function(){return nt})),s.d(e,"o",(function(){return ct})),s.d(e,"r",(function(){return lt})),s.d(e,"g",(function(){return bt})),s.d(e,"f",(function(){return pt})),s.d(e,"e",(function(){return Ot})),s.d(e,"q",(function(){return gt})),s.d(e,"b",(function(){return jt})),s.d(e,"c",(function(){return Et})),s.d(e,"a",(function(){return St})),s.d(e,"t",(function(){return yt})),s.d(e,"n",(function(){return At})),s.d(e,"s",(function(){return Ct}));s("./node_modules/core-js/modules/es6.array.sort.js");var r=s("./node_modules/fbt/lib/FbtPublic.js"),n=s("./node_modules/lodash/pick.js"),i=s.n(n),o=s("./src/lib/constants/index.ts"),d=s("./src/lib/listingSort/index.ts"),c=s("./src/lib/makeActionCreator/index.ts"),a=s("./src/lib/makeListingKey/index.ts"),u=s("./src/reddit/actions/actionBarAnimation/index.ts"),l=s("./src/reddit/actions/economics/helpers/async.ts"),b=s("./src/reddit/actions/modal.ts"),p=s("./src/reddit/actions/oldSiteRules.ts"),O=s("./src/reddit/actions/pages/subreddit.ts"),f=s("./src/reddit/actions/preferences.ts"),_=s("./src/reddit/actions/subredditRules/constants.ts"),m=s("./src/reddit/actions/toaster.ts"),g=s("./src/reddit/components/CountAnimation/helpers.ts"),j=s("./src/reddit/constants/modals.ts"),E=s("./src/reddit/constants/page.ts"),S=s("./src/reddit/constants/parameters.ts"),h=s("./src/reddit/constants/postLayout.ts"),I=s("./src/reddit/contexts/PageLayer/index.tsx"),T=s("./src/reddit/endpoints/governance/posts.ts"),y=s("./src/lib/makeApiRequest/index.ts"),A=s("./src/lib/omitHeaders/index.ts"),C=s("./src/reddit/constants/headers.ts"),D=s("./src/reddit/helpers/addRedesignIdentifier/index.ts");var w=s("./src/reddit/endpoints/modQueue/index.ts"),x=s("./src/reddit/endpoints/page/subredditPage.ts"),R=s("./src/reddit/endpoints/subreddit/about.ts"),N=s("./src/reddit/endpoints/subreddit/rules.ts"),P=s("./src/reddit/endpoints/user/preferences.ts"),k=s("./src/reddit/helpers/filterListingResponse/index.ts"),v=s("./src/reddit/helpers/getSubredditSortForListingKeyCreation/index.ts"),U=s("./src/reddit/helpers/graphql/normalizeSubredditAboutFromGql/index.ts"),L=s("./src/reddit/helpers/graphql/normalizeSubredditFromGql/index.ts"),G=s("./src/reddit/models/Subreddit/index.ts"),F=s("./src/reddit/models/Toast/index.ts"),q=s("./src/reddit/models/User/index.ts"),M=s("./src/reddit/selectors/experiments/gqlSubredditPage.ts"),B=s("./src/reddit/selectors/experiments/postActionBarAnimation.ts"),H=s("./src/reddit/selectors/oldSiteRules.ts"),Y=s("./src/reddit/selectors/profile.ts"),V=s("./src/reddit/selectors/subreddit.ts"),K=s("./src/reddit/selectors/user.ts");const W={},z="SUBREDDIT__MODEL_SUCCEEDED",J="SUBREDDIT__MODEL_PENDING",Q="SUBREDDIT__MODEL_FAILED",X="SUBREDDIT__MORE_POSTS_PENDING",Z="SUBREDDIT__MORE_POSTS_LOADED",$="SUBREDDIT__MORE_POSTS_FAILED",tt="SUBREDDIT__META_FILTER_TOGGLED",et=Object(c.a)(X),st=Object(c.a)(Z),rt=Object(c.a)($),nt=Object(c.a)(tt),it=Object(c.a)(_.b),ot=Object(c.a)(_.c),dt=Object(c.a)(_.a),ct=(t,e)=>async(s,r)=>{await(e===G.e.User?s(at(t)):s(ut(t))),0===Object(H.a)(r()).length&&s(Object(p.b)())},at=t=>async(e,s,r)=>{let{apiContext:n}=r;const i=Object(Y.m)(s(),t),o=await Object(N.c)(n(),t);if(o.ok){const t=o.body;e(it({rules:t,subredditId:i}))}},ut=t=>async(e,s,n)=>{let{gqlContext:i}=n;const o=Object(V.G)(s(),t);e(ot());const d=await Object(N.b)(i(),t);if(d.ok){const t=d.body;e(it({rules:t,subredditId:o}))}else{e(dt());const s="error-block-".concat(t);e(m.e({id:s,kind:F.b.Error,text:r.fbt._("An error has occurred. Please try again later",null,{hk:"Elbdz"})}))}},lt=t=>async(e,s,r)=>{let{apiContext:n,gqlContext:c}=r;const{subredditName:b}=t;let p=t.t;const O=s(),f=Object(v.a)(t,O),_=O.platform.currentPage?O.platform.currentPage.queryParams:{},m=Object(a.a)(b,f,Object.assign({t:p},_)),j=O.listings.postOrder.loadMore[m],y=O.listings.postOrder.listingSort[m];let A=f;if(y&&!A){const t=Object(d.d)(y.sort);A=t.sort,p=t.timeSort}const C=O.listings.postOrder.api.pending[m],{fetchedTokens:D}=O.listings.postOrder,w=!(!D[m]||!D[m][j.token]);if(C||w)return;if(A===o.P.AWARDED&&b===E.f)return;e(et({key:m,fetchedToken:j.token}));const R=Object.assign({after:j.token,dist:j.dist,layout:h.e[Object(I.N)(O,{})],sort:A,t:p},i()(_,[...S.l,S.h]));if(!R[S.h]){const t=Object(K.I)(O)||Object(K.J)(O)?O.user.prefs.geopopular:O.meta.country;R[S.h]=t}const N=Object(M.a)(O)?()=>Object(x.b)(c(),Object(x.c)(O,b,Object.assign(Object.assign({},R),{limit:h.a})),Object(K.Q)(O)):()=>Object(x.a)(n(),b,R),P=await N(),U=Object.assign(Object.assign({},P.body),Object(k.a)(O,m,P.body));if(P.ok){let t;const r=U.postIds.filter(t=>!!U.posts[t].isMeta),i=Object(V.G)(s(),b);if(r.length){const e=await Object(T.a)(n(),i,r);e.ok&&(t=e.body)}if(e(st(Object.assign({fetchedToken:j.token,key:m,meta:O.meta,governance:t},U))),Object(B.b)(O)){const{postIds:t,posts:s}=U;e(Object(u.a)(Object(g.b)(t,s)))}await e(Object(l.a)({subredditId:i,postIds:U.postIds,skip:["communityDetails","subscription"]}))}else e(rt(Object.assign({error:P.error,fetchedToken:j.token,key:m},U)))},bt="SUBSCRIPTION__MODERATED_SUBREDDITS_PENDING",pt="SUBSCRIPTION__MODERATED_SUBREDDITS_LOADED",Ot="SUBSCRIPTION__MODERATED_SUBREDDITS_FAILED",ft=Object(c.a)(bt),_t=Object(c.a)(pt),mt=Object(c.a)(Ot),gt=()=>async(t,e,s)=>{let{apiContext:r}=s;const n=e();if(!n.user.account||n.subreddits.moderated.api.fetched)return;t(ft());const i=await Object(w.b)(r(),o.lb.Modqueue,{moderated:!0,moderated_limit:50});i.ok?t(_t(i.body)):t(mt({error:i.error}))},jt="SUBREDDIT__ABOUT_PENDING",Et="SUBREDDIT__ABOUT_SUCCEEDED",St="SUBREDDIT__ABOUT_FAILED",ht=Object(c.a)(jt),It=Object(c.a)(Et),Tt=Object(c.a)(St),yt=t=>async(e,s,r)=>{let{gqlContext:n}=r;const i=s();if(Object(V.y)(i,{subredditName:t})||i.subreddits.api.about.error[t.toLowerCase()]||i.subreddits.api.about.pending[t.toLowerCase()])return;e(ht({subredditName:t}));const o=!Object(V.G)(i,t),d=await Object(R.a)(n(),t,o);if(d.ok){const s=d.body.data.subreddit,r=Object(U.a)(s),n=o?Object(L.a)(s):void 0;e(It({subredditName:t,subreddits:n?{[n.id]:n}:void 0,data:r}))}else e(Tt({subredditName:t,error:d.error}))},At=(t,e,s)=>async(r,n,i)=>{let{apiContext:d}=i;const c=Object(V.G)(n(),t.substring(2)),a=Object(K.i)(n());if(a){const n=Object(q.e)(a),i=e+"\n\n   *To approve this user*, visit [the approved users page for "+t+"](https://www.reddit.com/"+t+"/about/contributors?user="+n+') and click "ADD USER".\n    Approving this user gives them permission to '+s+". You can change these community restrictions from the [community settings](/"+t+"/about/edit) page.\n\n   To get more information about this user, visit the profile page of [u/"+n+"](/u/"+n+") or reply to this message to start a conversation.",u={to:"/".concat(t),subject:"I would like to join ".concat(t),text:i};if((await((t,e)=>Object(y.a)(Object(A.a)(t,[C.a]),{endpoint:Object(D.a)("".concat(t.apiUrl,"/api/compose")),method:o.eb.POST,data:e}))(d(),u)).ok){const t=new Date,e={isContributorRequestTimestamp:t.setDate(t.getDate())};r(Object(f.E)({subredditId:c,prefs:e})),Object(P.h)(c,e,d()),r(Object(b.i)(j.a.CONTRIBUTOR_REQUEST_PENDING))}}},Ct=t=>async(e,s)=>{const r=s(),{subredditName:n}=t,i=t.t,o=Object(v.a)(t,r),d=r.platform.currentPage?r.platform.currentPage.queryParams:W,c=Object(a.a)(n,o,Object.assign({t:i},d)),u=Object.assign({t:i,sort:o},d);await e(Object(O.i)(c,n,u,!0))}},"./src/reddit/actions/subreddit/constants.ts":function(t,e,s){"use strict";s.d(e,"a",(function(){return r})),s.d(e,"b",(function(){return n})),s.d(e,"c",(function(){return i})),s.d(e,"h",(function(){return o})),s.d(e,"g",(function(){return d})),s.d(e,"p",(function(){return c})),s.d(e,"o",(function(){return a})),s.d(e,"k",(function(){return u})),s.d(e,"j",(function(){return l})),s.d(e,"i",(function(){return b})),s.d(e,"n",(function(){return p})),s.d(e,"m",(function(){return O})),s.d(e,"l",(function(){return f})),s.d(e,"f",(function(){return _})),s.d(e,"e",(function(){return m})),s.d(e,"d",(function(){return g})),s.d(e,"r",(function(){return j})),s.d(e,"q",(function(){return E})),s.d(e,"s",(function(){return S}));const r="SUBREDDIT__ADD_TOP_SUBREDDIT_MODELS",n="SUBREDDIT__ADD_TOP_SUBREDDIT_RANKINGS",i="SUBREDDIT__ADD_TOP_SUBREDDIT_RANKINGS_PAGE_INFO",o="SUBREDDIT__POSTS_LOADED",d="SUBREDDIT__POSTS_SET_FAILED",c="SUBREDDIT__SUBREDDITS_POSTS_LOADED",a="SUBREDDIT__SUBREDDITS_POSTS_SET_FAILED",u="SUBREDDIT__RANKINGS_PENDING",l="SUBREDDIT__RANKINGS_LOADED",b="SUBREDDIT__RANKINGS_FAILED",p="SUBREDDIT__SIMILAR_SUBREDDITS_PENDING",O="SUBREDDIT__SIMILAR_SUBREDDITS_LOADED",f="SUBREDDIT__SIMILAR_SUBREDDITS_FAILED",_="SUBREDDIT__ONBOARDING_SUBREDDITS_PENDING",m="SUBREDDIT__ONBOARDING_SUBREDDITS_LOADED",g="SUBREDDIT__ONBOARDING_SUBREDDITS_FAILED",j="SUBREDDIT__EDIT_REQUESTED",E="SUBREDDIT__EDIT_FAILED",S="SUBREDDIT__EDIT_SUCCESS"},"./src/reddit/actions/subreddit/questions.ts":function(t,e,s){"use strict";s.d(e,"b",(function(){return d})),s.d(e,"c",(function(){return c})),s.d(e,"a",(function(){return a})),s.d(e,"d",(function(){return u}));var r=s("./src/reddit/constants/experiments.ts"),n=s("./src/graphql/operations/GetSubredditQuestions.json"),i=s("./src/lib/makeGqlRequest/index.ts"),o=s("./src/reddit/helpers/chooseVariant/index.ts");const d="SUBREDDIT_QUESTIONS_LOADED",c="SUBREDDIT_SURVEY_ANSWERED",a="DISMISS_NCP_CARD",u=t=>async(e,s,c)=>{let{gqlContext:a}=c;var u,l,b,p,O,f;const _=Object(o.c)(s(),{experimentName:r.Vb,experimentEligibilitySelector:o.a})===r.Ub.Enabled,m=(await((t,e)=>Object(i.a)(t,Object.assign(Object.assign({},n),{variables:e})))(a(),{id:t,includeProgressModule:_})).body,g=null===(l=null===(u=m.data)||void 0===u?void 0:u.subredditInfoById)||void 0===l?void 0:l.answerableQuestions,j=null===(p=null===(b=m.data)||void 0===b?void 0:b.subredditInfoById)||void 0===p?void 0:p.contentRatingSurvey,E=null===(f=null===(O=m.data)||void 0===O?void 0:O.subredditInfoById)||void 0===f?void 0:f.communityProgressModule;(g||j||E)&&e({type:d,payload:{id:t,questions:g,survey:j,progressModule:E}})}},"./src/reddit/actions/subreddit/subredditPosts.ts":function(t,e,s){"use strict";s.d(e,"b",(function(){return H})),s.d(e,"a",(function(){return Y}));s("./node_modules/core-js/modules/es6.symbol.js");var r=s("./src/lib/constants/index.ts"),n=s("./src/lib/makeActionCreator/index.ts"),i=s("./src/lib/makeLinkedPostsListingKey/index.ts"),o=s("./src/lib/makeListingKey/index.ts"),d=s("./src/reddit/actions/googleQASchema/constants.ts");const c=Object(n.a)(d.b),a=Object(n.a)(d.a);var u=s("./src/reddit/actions/linkedPosts/constants.ts");const l=Object(n.a)(u.b),b=Object(n.a)(u.a);var p=s("./src/reddit/actions/otherDiscussions/constants.ts"),O=s("./src/lib/makeGqlRequest/index.ts"),f=(s("./src/graphql/operations/OtherDiscussions.json"),s("./src/reddit/helpers/graphql/normalizePostFlairFromGql/index.ts")),_=s("./src/reddit/helpers/graphql/normalizePostFromGql/index.ts"),m=s("./src/reddit/helpers/graphql/normalizeProfileFromGql/index.ts"),g=s("./src/reddit/helpers/graphql/normalizeSubredditFromGql/index.ts"),j=s("./src/reddit/models/Post/index.ts");var E=t=>{let{getState:e,onFailure:s,onSuccess:r,postId:n,response:i}=t;if(!i.ok)return void s(i.error);const d=i.body,{post:c}=d&&d.data,a=e(),u=Object(o.a)(n,null,{isOtherDiscussions:!0});if(c){if(c.otherDiscussions&&c.otherDiscussionsCount){const{otherDiscussions:t,otherDiscussionsCount:e}=c,{postFlair:s,postIds:i,posts:o,profiles:d,subreddits:l}=(t=>{const e={postFlair:{},postIds:[],posts:{},profiles:{},subreddits:{}},s=t=>{const s=Object(_.e)(t);e.posts[s.id]=s;const{crosspostRoot:r}=t;if(r&&r.type===j.a.Post&&r.postInfo){const t=Object(_.e)(r.postInfo);e.posts[t.id]=t}return Object(j.k)(t)?e.profiles[t.profile.id]||(e.profiles[t.profile.id]=Object(m.a)(t.profile)):Object(j.l)(t)&&(e.subreddits[t.subreddit.id]||(e.subreddits[t.subreddit.id]=Object(g.a)(t.subreddit)),e.postFlair[t.subreddit.id]||(e.postFlair[t.subreddit.id]=Object(f.a)(t.subreddit))),s.id};if(t&&t.edges)for(const{node:r}of t.edges){const t=s(r);t&&e.postIds.push(t)}return e})(t);r({count:e,key:u,meta:a.meta,postFlair:s,postId:n,postIds:i,posts:o,profiles:d,subreddits:l})}}else r({count:0,key:u,meta:a.meta,postFlair:{},postId:n,postIds:[],posts:{},profiles:{},subreddits:{}})};const S=Object(n.a)(p.a),h=Object(n.a)(p.b),I=Object(n.a)(p.c);var T=s("./src/reddit/actions/subreddit/constants.ts"),y=s("./src/graphql/operations/PostFeedAndOtherDiscussions.json"),A=(s("./src/graphql/operations/SubredditPosts.json"),s("./src/graphql/operations/SubredditsPosts.json"));var C=t=>{let{getState:e,onSuccess:s,onFailure:r,postId:n,post:i}=t;try{s({altText:i&&i.media&&(i.media.still&&i.media.still.altText||i.media.obfuscated&&i.media.obfuscated.altText)||null,postId:n})}catch(o){r(o)}};var D=t=>{let{getState:e,onSuccess:s,onFailure:r,postId:n,post:o}=t;try{const t=[],r={},d={};if(!o||!o.linked)return;const c=e(),a=c.posts&&c.posts.models,u=Object(i.a)(n),l=o.linked.posts&&o.linked.posts.edges||[];for(const{node:e}of l){if(!e)break;if(e.id&&!a.hasOwnProperty(e.id)&&(t.push(e.id),r[e.id]=Object(_.e)(e)),Object(j.l)(e)){const{subreddit:t}=e;d[t.id]=Object(g.a)(t)}}s({dist:o.linked.posts&&o.linked.posts.dist||null,key:u,meta:c.meta,posts:r,postIds:t,subreddits:d})}catch(d){r(d)}},w=s("./src/reddit/helpers/graphql/normalizePostsFromGql/index.ts");var x=t=>t.reduce((t,e)=>(t[e.id]=e,t),{});var R=t=>{let{getState:e,onSuccess:s,onFailure:n,options:i,subreddit:d}=t;try{if(!d)return;const{posts:t}=d,n=e(),c=((t,e)=>{const{edges:s}=t,r=s.filter(t=>(t=>!t.node.crosspostRoot)(t)&&((t,e)=>!e.hasOwnProperty(t.node.id))(t,e));return Object.assign(Object.assign({},t),{edges:r})})(t,n.posts&&n.posts.models);if(!c.edges.length)return;const a=Object(w.a)(c),{range:u,sort:l,subredditName:b}=i,p=Object(o.a)(b,r.P[l],{t:u}),O=x(a),f=a.map(t=>t.id);s({dist:t.dist,key:p,meta:n.meta,postIds:f,posts:O})}catch(c){n(c)}},N=s("./src/reddit/models/Media/index.ts"),P=s("./src/reddit/selectors/posts.ts"),k=s("./src/reddit/selectors/experiments/econ/predictions.ts"),v=s("./src/reddit/actions/imageOCRAltText/constants.ts");const U=Object(n.a)(v.b),L=Object(n.a)(v.a);var G=function(t,e){var s={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(s[r]=t[r]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var n=0;for(r=Object.getOwnPropertySymbols(t);n<r.length;n++)e.indexOf(r[n])<0&&Object.prototype.propertyIsEnumerable.call(t,r[n])&&(s[r[n]]=t[r[n]])}return s};const F=Object(n.a)(T.h),q=Object(n.a)(T.g),M=Object(n.a)(T.p),B=Object(n.a)(T.o),H=t=>async(e,s,r)=>{let{gqlContext:n}=r;const i=(await((t,e)=>Object(O.a)(t,Object.assign(Object.assign({},A),{variables:e})))(n(),t)).body,{subredditNames:o}=t,d=G(t,["subredditNames"]),c=[];try{for(const t of i.data.subredditsInfoByNames){const e=t.posts.edges[0];e&&Object(j.l)(e.node)&&R({getState:s,onFailure:t=>{throw t},onSuccess:t=>c.push(t),options:Object.assign(Object.assign({},d),{subredditName:e.node.subreddit.name}),subreddit:t})}e(M(c))}catch(a){e(B(a))}},Y=t=>async(e,s,n)=>{let{gqlContext:d}=n;var u;const{includePostImageOCRAltText:p,includeListingBelowExperiment:f,includeOtherDiscussions:_,includePostFeed:m,includePostQASchemaEligibilityFlag:g,postId:j,range:T,sort:A,subredditName:w}=t,x=Object(o.a)(j,null,{isOtherDiscussions:!0}),v=s(),G=Object(P.H)(v,{listingKey:x,predictionsEnabled:Object(k.b)(v)}),M=_&&(!G||0===G.length),B=Object(o.a)(w,r.P[A],{t:T}),H=Object(P.H)(v,{listingKey:B,predictionsEnabled:Object(k.b)(v)}),Y=m&&(!H||0===H.length),V=Object(i.a)(j),K=Object(P.H)(v,{listingKey:V,predictionsEnabled:Object(k.b)(v)}),W=f&&(!K||0===K.length),z=Object(P.O)(v,{postId:j}),J=p&&!!z&&!!z.media&&(Object(N.I)(z.media)||Object(N.G)(z.media))&&!z.media.altText;if(!(M||Y||W||J||g))return;M&&e(I({key:x}));const Q=await((t,e)=>Object(O.a)(t,Object.assign(Object.assign({},y),{variables:e})))(d(),t),X=Q.body;g&&(Q.ok?X.data&&X.data.post&&e(c({postId:j,isEligibleForQASchema:null!==(u=X.data.post.isEligibleForQASchema)&&void 0!==u&&u})):e(a())),M&&E({getState:s,onFailure:t=>e(S(t)),onSuccess:t=>e(h(t)),postId:j,response:Q}),Y&&(Q.ok?X.data&&R({getState:s,onFailure:t=>e(q(t)),onSuccess:t=>e(F(t)),options:t,subreddit:X.data.subreddit}):e(q(Q.error))),W&&Q.ok&&D({getState:s,onFailure:t=>e(b(t)),onSuccess:t=>e(l(t)),postId:j,post:X.data.post}),J&&Q.ok&&C({getState:s,onFailure:t=>e(L(t)),onSuccess:t=>e(U(t)),postId:j,post:X.data.post})}},"./src/reddit/actions/subredditRules/constants.ts":function(t,e,s){"use strict";s.d(e,"b",(function(){return r})),s.d(e,"c",(function(){return n})),s.d(e,"a",(function(){return i})),s.d(e,"e",(function(){return o})),s.d(e,"f",(function(){return d})),s.d(e,"g",(function(){return c})),s.d(e,"d",(function(){return a}));const r="SUBREDDIT__RULES_LOADED",n="SUBREDDIT__RULES_PENDING",i="SUBREDDIT__RULES_FAILED",o="SUBREDDIT__RULE_ADDED",d="SUBREDDIT__RULE_EDITED",c="SUBREDDIT__RULE_REMOVED",a="SUBREDDIT__RULES_REORDERED"},"./src/reddit/actions/subredditSettings.ts":function(t,e,s){"use strict";s.d(e,"c",(function(){return C})),s.d(e,"a",(function(){return w})),s.d(e,"b",(function(){return R})),s.d(e,"h",(function(){return P})),s.d(e,"g",(function(){return k})),s.d(e,"e",(function(){return v})),s.d(e,"f",(function(){return U})),s.d(e,"d",(function(){return L})),s.d(e,"j",(function(){return M})),s.d(e,"i",(function(){return B}));s("./node_modules/core-js/modules/web.dom.iterable.js");var r=s("./node_modules/fbt/lib/FbtPublic.js"),n=s("./node_modules/lodash/invert.js"),i=s.n(n),o=s("./node_modules/lodash/pick.js"),d=s.n(o),c=s("./node_modules/lodash/xor.js"),a=s.n(c),u=s("./src/lib/constants/index.ts"),l=s("./src/lib/makeActionCreator/index.ts"),b=s("./src/reddit/endpoints/subreddit/settings.ts"),p=s("./src/telemetry/index.ts"),O=s("./src/reddit/actions/toaster.ts"),f=s("./src/graphql/operations/FetchSubredditsNotificationSettings.json"),_=s("./src/graphql/operations/UpdateSubredditNotificationSettings.json"),m=s("./src/lib/makeGqlRequest/index.ts");const g=(t,e,s)=>Object(m.a)(t,Object.assign(Object.assign({},_),{variables:{input:Object.assign(Object.assign({},s),{subredditId:e})}}));var j=s("./src/reddit/helpers/graphql/normalizeSubredditFromGql/index.ts"),E=s("./src/reddit/helpers/trackers/inlineSubredditEditing.ts"),S=s("./src/reddit/models/Toast/index.ts"),h=s("./src/reddit/models/User/index.ts"),I=s("./src/reddit/selectors/subreddit.ts"),T=s("./src/reddit/selectors/subredditSettings.ts"),y=s("./src/reddit/selectors/user.ts"),A=s("./src/reddit/selectors/widgets.ts");const C="SUBREDDIT_SETTINGS_LOADED",D=Object(l.a)(C),w="SUBREDDIT_NOTIFICATION_SETTINGS_LOADED",x=Object(l.a)(w),R="SUBREDDIT_NOTIFICATION_SETTINGS_UPDATED",N=Object(l.a)(R),P=(t,e)=>async(s,r,n)=>{let{apiContext:i,gqlContext:o}=n;if(!e||!Object(I.V)(r(),e)){const e=await Object(b.c)(i(),t);e&&e.ok&&s(D(e.body))}if(e&&!Object(T.b)(r(),{subredditId:e})){const t=await((t,e)=>Object(m.a)(t,Object.assign(Object.assign({},f),{variables:{subredditIds:[e]}})))(o(),e);if(t&&t.ok){const e=t.body,r=Object(j.e)(e.data);s(x(r))}}},k=()=>async(t,e,s)=>{let{apiContext:r}=s;const n=Object(y.i)(e());n&&await t(P(u.Yb+Object(h.e)(n)))},v="SUBREDDIT_SETTINGS_UPDATE_REQUESTED",U="SUBREDDIT_SETTINGS_UPDATE_SUCCESS",L="SUBREDDIT_SETTINGS_UPDATE_FAILURE",G=Object(l.a)(v),F=Object(l.a)(U),q=Object(l.a)(L),M=function t(e,s){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},o=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return async(c,u,l)=>{let{apiContext:f,gqlContext:_}=l;c(G());const m=u(),j=d()(Object(I.V)(m,e),...Object.keys(s)),h=d()(Object(T.b)(m,{subredditId:e}),...Object.keys(n)),y=await Object(b.g)(f(),e,s),C=Object.keys(n).length>0;let D=!0;if(C){D=(await g(_(),e,n)).ok}if(!y.ok||C&&!D)c(q()),c(Object(O.e)({kind:S.b.Error,text:r.fbt._("Give us a few minutes to fix the problem. Sorry!",null,{hk:"3wBPeO"}),buttonText:r.fbt._("Retry",null,{hk:"1QXiG6"}),buttonAction:t(e,s,h)})),o&&Object(p.a)(Object(E.c)(m,"BE returned an error:"));else{const d=Object(b.d)(y.body,i()(b.a));c(F({settings:Object.assign(Object.assign({},d),{subredditId:e}),idCardWidgetId:Object(A.c)(m,{subredditId:e})})),C&&c(N({notificationSettings:n,subredditId:e}));const u={};o&&0===a()(Object.keys(s),Object.keys(j)).length&&(u.buttonText=r.fbt._("Undo",null,{hk:"1Gskii"}),u.buttonAction=t(e,j,h,o)),c(Object(O.e)(Object.assign({kind:S.b.SuccessCommunity,text:r.fbt._("Subreddit settings updated successfully",null,{hk:"2fmdlZ"})},u)))}}},B=(t,e)=>async(s,n,i)=>{let{apiContext:o}=i;(await Object(b.e)(o(),t,e)).ok?s(Object(O.e)({kind:S.b.SuccessCommunity,text:r.fbt._("Test message was sent to your inbox",null,{hk:"1ZtKzO"})})):s(Object(O.e)({kind:S.b.Error,text:r.fbt._("Give us a few minutes to fix the problem. Sorry!",null,{hk:"3wBPeO"})}))}},"./src/reddit/actions/subscription/constants.ts":function(t,e,s){"use strict";s.d(e,"b",(function(){return r})),s.d(e,"c",(function(){return n})),s.d(e,"a",(function(){return i})),s.d(e,"h",(function(){return o})),s.d(e,"i",(function(){return d})),s.d(e,"g",(function(){return c})),s.d(e,"f",(function(){return a})),s.d(e,"d",(function(){return u})),s.d(e,"e",(function(){return l}));const r="SUBSCRIPTION__FETCH_DATA_PENDING",n="SUBSCRIPTION__FETCH_DATA_SUCCESS",i="SUBSCRIPTION__FETCH_DATA_FAILURE",o="SUBSCRIPTION__SUBSCRIPTION_TOGGLED",d="SUBSCRIPTION__SUBSCIPTION_TOGGLE_FAILED",c="SUBSCRIPTION__ORDER_LOADED",a="SUBSCRIPTION__SUBREDDIT_FAVORITE_TOGGLED",u="SUBSCRIPTION__MULTI_FAVORITE_TOGGLED",l="SUBSCRIPTION__MULTI_FOLLOW_TOGGLED"},"./src/reddit/actions/subscription/index.ts":function(t,e,s){"use strict";s.d(e,"e",(function(){return P})),s.d(e,"d",(function(){return v})),s.d(e,"c",(function(){return L})),s.d(e,"a",(function(){return F})),s.d(e,"b",(function(){return M}));s("./node_modules/core-js/modules/es6.regexp.replace.js");var r=s("./node_modules/fbt/lib/FbtPublic.js"),n=s("./src/lib/constants/index.ts"),i=s("./src/lib/makeActionCreator/index.ts"),o=s("./src/lib/linkMatchers/customLinks.ts"),d=s("./src/reddit/actions/login.ts"),c=s("./src/reddit/actions/modal.ts"),a=s("./src/reddit/actions/subscription/constants.ts"),u=s("./src/reddit/actions/toaster.ts"),l=s("./src/reddit/constants/posts.ts"),b=s("./src/lib/makeApiRequest/index.ts"),p=s("./src/lib/omitHeaders/index.ts"),O=s("./src/reddit/constants/headers.ts");var f=s("./src/graphql/operations/SubscribedSubreddits.json"),_=s("./src/lib/makeGqlRequest/index.ts"),m=s("./src/reddit/helpers/addRedesignIdentifier/index.ts");var g=s("./src/reddit/helpers/graphql/normalizeProfileFromGql/index.ts"),j=s("./src/reddit/helpers/graphql/normalizeSubredditFromGql/index.ts"),E=s("./src/reddit/models/GqlTopLevelField.ts"),S=s("./src/reddit/models/User/index.ts");function h(t){const e=[],s=[],r={},n={},{followedRedditorsInfo:i}=t.identity;for(const d of i.edges){if(d.node.__typename!==S.c.AvailableRedditor)continue;const t=Object(g.a)(d.node.profile);r[t.id]=t;const{isFavorite:s}=d.node.profile;s&&e.push(t.id)}const{subscribedSubreddits:o}=t.identity;for(const d of o.edges){if(d.node.__typename!==E.a.Subreddit)continue;const t=Object(j.a)(d.node);n[t.id]=t;const{isFavorite:e}=d.node;e&&s.push(t.id)}return{favoriteProfileIds:e,favoriteSubredditIds:s,profiles:r,subreddits:n}}var I=s("./src/reddit/models/Toast/index.ts"),T=s("./src/reddit/selectors/profile.ts"),y=s("./src/reddit/selectors/subreddit.ts"),A=s("./src/reddit/selectors/subscriptions.ts"),C=s("./src/reddit/selectors/user.ts");const D=()=>r.fbt._("Sorry, failed to update favorites.",null,{hk:"40XHkp"}),w=Object(i.a)(a.c),x=Object(i.a)(a.b),R=Object(i.a)(a.a),N=Object(i.a)(a.h),P=(Object(i.a)(a.i),Object(i.a)(a.g),()=>async(t,e,s)=>{let{gqlContext:r}=s;const n=e();if(!n.user.account||n.subscriptions.api.fetched)return;t(x());const i=await(t=>Object(_.a)(t,f))(r());if(i.ok){const e=h(i.body.data);t(w(e))}else t(R({error:i.error}))}),k=(t,e)=>e.type===l.a.PROFILE&&t.displayText===e.name.replace("u_",""),v=(t,e,s)=>async(i,a,f)=>{let{apiContext:_}=f,g=t.map(t=>t.type===l.a.SUBREDDIT?{id:Object(y.G)(a(),t.name),name:t.name,type:t.type}:{id:Object(T.m)(a(),t.name),name:"".concat(n.Yb).concat(t.name),type:t.type});if(!Object(C.J)(a()))return i(Object(c.k)({actionSource:c.a.Subscribe})),void i(Object(d.i)());const j=Object(C.i)(a());if(j){const e=g.length,s=t.length;if(g=g.filter(t=>!k(j,t)),(t=t.filter(t=>!k(j,t))).length!==s||g.length!==e){const t=r.fbt._("You cannot follow yourself!",null,{hk:"3tfSaq"});i(Object(u.e)(Object(u.d)(t,I.b.Error)))}if(!t.length&&!g.length)return}if(i(N({identifiers:g,nameIdentifiers:t,profileModels:a().profiles.models,subredditModels:a().subreddits.models,subscriptionsCount:Object(A.b)(a()),userIsSubscriber:e,widgetId:s})),(await((t,e)=>{let{subredditIds:s,subredditNames:r,subscribe:i}=e;return Object(b.a)(Object(p.a)(t,[O.a]),{method:n.eb.POST,endpoint:Object(m.a)("".concat(t.apiUrl,"/api/subscribe")),data:{action:i?"sub":"unsub",sr:s&&s.join(",")||void 0,sr_name:r&&r.join(",")||void 0,api_type:"json"}})})(_(),{subredditNames:g.map(t=>{let{name:e}=t;return e}),subscribe:e})).ok){const s=1===t.length?"".concat("subreddit"===t[0].type?o.d.subreddit:o.d.profile).concat(t[0].name):"".concat(r.fbt.plural("community",t.length,{many:"communities",name:"communities",showCount:"yes"}));i(Object(u.e)({text:1===t.length&&"profile"===t[0].type?r.fbt._("Sucсessfully {verb} {communityname}",[r.fbt._param("verb",e?"followed":"unfollowed"),r.fbt._param("communityname",s)],{hk:"1hY5KX"}):r.fbt._("Sucсessfully {verb} {communityname}",[r.fbt._param("verb",e?"joined":"left"),r.fbt._param("communityname",s)],{hk:"1hY5KX"})}))}else{i(N({identifiers:g,nameIdentifiers:t,profileModels:a().profiles.models,subredditModels:a().subreddits.models,subscriptionsCount:Object(A.b)(a()),userIsSubscriber:!e,widgetId:s}));const n=r.fbt._("Something went wrong. Please try again!",null,{hk:"1zlDeq"});i(Object(u.e)(Object(u.d)(n,I.b.Error)))}},U=Object(i.a)(a.f),L=t=>async(e,s,r)=>{let{apiContext:i}=r;const o=s(),d=Object(y.M)(o,{identifier:t});if(!d)throw new Error("actions.subscription -- No subreddit or profile found with id ".concat(t.id));const c=t.type===l.a.SUBREDDIT?d.name:"u_".concat(d.name),a=o.subscriptions.favoriteSubredditOrder||[],f=o.subscriptions.favoriteProfileOrder||[],_=a.indexOf(t.id),m=f.indexOf(t.id),g=-1===_&&-1===m,j=o.subreddits.models,E=o.profiles.models;e(U({makeFavorite:g,identifier:t,subredditModels:j,profileModels:E}));const S={type:t.type,name:d.name},h=()=>Object(y.gb)(s(),{identifier:S});(h()||(await e(v([S],!0)),h()))&&((await((t,e,s)=>Object(b.a)(Object(p.a)(t,[O.a]),{method:n.eb.POST,endpoint:"".concat(t.apiUrl,"/api/favorite"),data:{make_favorite:s?"true":"false",sr_name:e,api_type:"json"}}))(i(),c,g)).ok||(e(U({makeFavorite:!g,identifier:t,subredditModels:j,profileModels:E})),e(Object(u.e)({text:D(),kind:I.b.Error}))))},G=Object(i.a)(a.d),F=t=>async(e,s,r)=>{let{apiContext:i}=r;const o=s().multireddits.models,d=()=>{e(Object(u.e)({text:D(),kind:I.b.Error}))},c=o[t];if(!c)return void d();const a=!c.isFavorited;e(G({makeFavorite:a,multiredditPath:t,multiredditsModelsState:o})),(await((t,e,s)=>Object(b.a)(Object(p.a)(t,[O.a]),{method:n.eb.POST,endpoint:"".concat(t.apiUrl,"/api/multi/favorite"),data:{make_favorite:s?"true":"false",multipath:e,api_type:"json"}}))(i(),t,a)).ok||(e(G({makeFavorite:!a,multiredditPath:t,multiredditsModelsState:o})),d())},q=Object(i.a)(a.e),M=t=>async(e,s,i)=>{let{apiContext:o}=i;const d=s(),c=d.multireddits.models;if(!Object(C.J)(d))return;const a=function(){let t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];e(Object(u.e)({text:r.fbt._("Sorry, failed to {followAction}",[r.fbt._param("followAction",t?r.fbt._("follow",null,{hk:"2I4uia"}):r.fbt._("unfollow",null,{hk:"1ZDqgR"}))],{hk:"1ufRSl"}),kind:I.b.Error}))},l=c[t];if(!l)return void a();const f=!l.isFollowed;e(q({follow:f,multiredditPath:t,multiredditsModelsState:c})),(await((t,e,s)=>Object(b.a)(Object(p.a)(t,[O.a]),{method:n.eb.POST,endpoint:"".concat(t.apiUrl,"/api/multi/subscribe"),data:{action:s?"sub":"unsub",path:e,api_type:"json"},type:"json"}))(o(),t,f)).ok||(e(q({follow:!f,multiredditPath:t,multiredditsModelsState:c})),a(f))}},"./src/reddit/actions/tags/constants.ts":function(t,e,s){"use strict";s.d(e,"t",(function(){return r})),s.d(e,"j",(function(){return n})),s.d(e,"r",(function(){return i})),s.d(e,"q",(function(){return o})),s.d(e,"s",(function(){return d})),s.d(e,"l",(function(){return c})),s.d(e,"m",(function(){return a})),s.d(e,"k",(function(){return u})),s.d(e,"o",(function(){return l})),s.d(e,"p",(function(){return b})),s.d(e,"n",(function(){return p})),s.d(e,"v",(function(){return O})),s.d(e,"w",(function(){return f})),s.d(e,"u",(function(){return _})),s.d(e,"g",(function(){return m})),s.d(e,"h",(function(){return g})),s.d(e,"f",(function(){return j})),s.d(e,"A",(function(){return E})),s.d(e,"z",(function(){return S})),s.d(e,"D",(function(){return h})),s.d(e,"y",(function(){return I})),s.d(e,"C",(function(){return T})),s.d(e,"x",(function(){return y})),s.d(e,"B",(function(){return A})),s.d(e,"e",(function(){return C})),s.d(e,"b",(function(){return D})),s.d(e,"d",(function(){return w})),s.d(e,"c",(function(){return x})),s.d(e,"a",(function(){return R})),s.d(e,"i",(function(){return N}));const r="TAGS__REQUESTED",n="TAGS__AVAILABLE_LOADED",i="TAGS__LOADED",o="TAGS__FAILURE",d="TAGS__RELEVANCE_LOADED",c="TAGS__CREATE_REQUESTED",a="TAGS__CREATE_SUCCESS",u="TAGS__CREATE_FAILURE",l="TAGS__DELETE_REQUESTED",b="TAGS__DELETE_SUCCESS",p="TAGS__DELETE_FAILURE",O="TAGS__UPDATE_STATE_REQUESTED",f="TAGS__UPDATE_STATE_SUCCESS",_="TAGS__UPDATE_STATE_FAILURE",m="PRIMARY_TAG__UPDATE_STATE_REQUESTED",g="PRIMARY_TAG__UPDATE_STATE_SUCCESS",j="PRIMARY_TAG__UPDATE_STATE_FAILURE",E="TAGS__OPTIONS_CANCELLED",S="TAGS__OPTION_SELECTED",h="TAGS__SUGGESTED_OPTION_SELECTED",I="TAGS__OPTION_DESELECTED",T="TAGS__SUGGESTED_OPTION_DESELECTED",y="TAGS__INPUT_CHANGED",A="TAGS__SUGGESTED_INPUT_CHANGED",C="GLOBAL__TAGS__LOADED",D="CREATION__TAGS_INPUT_CHANGED",w="CREATION__TAGS_OPTION_SELECTED",x="CREATION__TAGS_OPTION_DESELECTED",R="CREATION__PRIMARY_TAG_SELECTED",N="SETTINGS_PAGE_PRIMARY_TAG_UPDATE"},"./src/reddit/actions/tags/index.ts":function(t,e,s){"use strict";s.d(e,"n",(function(){return G})),s.d(e,"q",(function(){return F})),s.d(e,"m",(function(){return q})),s.d(e,"p",(function(){return M})),s.d(e,"l",(function(){return B})),s.d(e,"o",(function(){return H})),s.d(e,"c",(function(){return Y})),s.d(e,"b",(function(){return V})),s.d(e,"a",(function(){return K})),s.d(e,"d",(function(){return Q})),s.d(e,"j",(function(){return X})),s.d(e,"k",(function(){return $})),s.d(e,"f",(function(){return et})),s.d(e,"i",(function(){return nt})),s.d(e,"h",(function(){return it})),s.d(e,"e",(function(){return ot})),s.d(e,"r",(function(){return dt})),s.d(e,"g",(function(){return ct})),s.d(e,"s",(function(){return at}));s("./node_modules/core-js/modules/web.dom.iterable.js");var r=s("./node_modules/fbt/lib/FbtPublic.js"),n=s("./src/lib/makeActionCreator/index.ts"),i=s("./src/reddit/actions/tags/constants.ts"),o=s("./src/reddit/actions/toaster.ts");const d=t=>{const{subredditInfoById:e}=t,s={global:{},[e.id]:{}};e.availableTags&&e.availableTags.edges.reduce((t,e)=>{let{node:s}=e;return t[s.subreddit&&s.subreddit.id||"global"][s.id]=s,t},s);const r={[e.id]:{}};e.secondaryTags&&e.secondaryTags.edges.reduce((t,s)=>{let{node:r}=s;return t[e.id][r.tag.id]=r,t},r);const n={[e.id]:{}};return e.suggestedTags&&e.suggestedTags.edges.reduce((t,s)=>{let{node:r}=s;return t[e.id][r.tag.id]=r,t},n),{primaryTag:e.primaryTag,globalSubredditTags:s.global,subredditScopedTags:{[e.id]:s[e.id]},subredditId:e.id,itemTags:r,suggestedItemTags:n,geoPlace:e.geoPlace}};var c=s("./src/graphql/operations/CreateSubredditTags.json"),a=s("./src/lib/makeGqlRequest/index.ts");var u=s("./src/graphql/operations/FetchGlobalTags.json"),l=s("./src/graphql/operations/FetchSubredditTags.json");const b=1050,p=(t,e)=>{let{subredditId:s,pageSize:r=b,after:n,includeAvailableTags:i}=e;return Object(a.a)(t,Object.assign(Object.assign({},l),{variables:{subredditId:s,pageSize:r,after:n,includeAvailableTags:i}}))};var O=s("./src/graphql/operations/MaybeDeleteTagsAndUpdateItemTags.json");const f=(t,e)=>Object(a.a)(t,Object.assign(Object.assign({},O),{variables:Object.assign(Object.assign({},e),{deleteTags:0!==e.deleteTagsInput.length,pageSize:b})}));var _=s("./src/graphql/operations/UpdateSubredditTagStatesRelevance.json");const m=(t,e)=>Object(a.a)(t,Object.assign(Object.assign({},_),{variables:e}));var g=s("./src/graphql/operations/UpdateSubredditPrimaryTag.json");const j=t=>{const{secondaryTags:e,id:s,primaryTag:r}=t.updateSubredditTagStates.subreddit,n=e&&e.edges||[];return{subredditId:s,primaryTagId:r&&r.tag.id||null,secondaryTags:n.reduce((t,e)=>{let{node:s}=e;return t[s.tag.id]=s,t},{})}},E=(t,e)=>Object(a.a)(t,Object.assign(Object.assign({},g),{variables:e}));var S=s("./src/reddit/helpers/tags/index.ts"),h=s("./src/reddit/helpers/trackers/communityTopics.ts"),I=s("./src/reddit/models/Tags/index.ts"),T=s("./src/reddit/models/Toast/index.ts"),y=s("./src/reddit/reducers/tags/selected/index.ts"),A=s("./src/reddit/selectors/tags.ts");const C=Object(n.a)(i.e),D=Object(n.a)(i.t),w=Object(n.a)(i.r),x=Object(n.a)(i.s),R=Object(n.a)(i.q),N=Object(n.a)(i.l),P=Object(n.a)(i.m),k=Object(n.a)(i.k),v=Object(n.a)(i.v),U=Object(n.a)(i.w),L=Object(n.a)(i.u),G=Object(n.a)(i.z),F=Object(n.a)(i.D),q=Object(n.a)(i.y),M=Object(n.a)(i.C),B=Object(n.a)(i.x),H=Object(n.a)(i.B),Y=Object(n.a)(i.d),V=Object(n.a)(i.c),K=Object(n.a)(i.b),W=Object(n.a)(i.g),z=Object(n.a)(i.h),J=Object(n.a)(i.f),Q=Object(n.a)(i.a),X=Object(n.a)(i.i),Z=Object(n.a)(i.A),$=function t(e,s){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return async(i,c,a)=>{let{gqlContext:u}=a;const l=c();i(D());const b=await p(u(),{subredditId:e}),O=b.body;if(b.ok&&O.data.subredditInfoById.secondaryTags&&O.data.subredditInfoById.availableTags&&O.data.subredditInfoById.suggestedTags)i(w(d(O.data))),n&&h.h(c(),e,{context:s});else{i(R());const d=n?"topics_save":"topics_load";h.g(l,e,d,{context:s}),i(Object(o.e)(Object(o.d)(r.fbt._("Oh no! We didn't load your topics. Please try again.",null,{hk:"2DUkWX"}),T.b.Error,r.fbt._("Retry",null,{hk:"1c2xrJ"}),t(e,s,n))))}}},tt=t=>async(e,s,n)=>{let{gqlContext:i}=n;e(D());const c=await p(i(),{subredditId:t});if(c.ok){const t=c.body;e(x(d(t.data)))}else e(R()),e(Object(o.e)(Object(o.d)(r.fbt._("Oh no! We didn't load your topics. Please try again.",null,{hk:"2DUkWX"}),T.b.Error,r.fbt._("Retry",null,{hk:"1c2xrJ"}),x(t))))},et=()=>async(t,e,s)=>{let{gqlContext:r}=s;const n=e();if(Object(A.r)(n))return;t(D());const i=await((t,e)=>{let{pageSize:s=b,after:r}=e;return Object(a.a)(t,Object.assign(Object.assign({},u),{variables:{pageSize:s,after:r}}))})(r(),{});if(i.ok){const e=i.body;t(C((t=>{return{globalSubredditTags:t.globalTags.edges.reduce((t,e)=>(t[e.node.id]=e.node,t),{})}})(e.data)))}},st=(t,e)=>async(s,r,n)=>{let{gqlContext:i}=n;if(!e.length)return null;s(N());const o=e.map(e=>Object.assign({subredditId:t},e)),d=await((t,e)=>Object(a.a)(t,Object.assign(Object.assign({},c),{variables:e})))(i(),{input:o}),u=d.body&&d.body.data||null;return d.ok&&u&&u.createSubredditTags&&u.createSubredditTags.ok?(s(P()),u.createSubredditTags.createdTags||[]):(s(k()),null)},rt=function(t,e){let s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];return async(r,n,i)=>{let{gqlContext:o}=i;if(!e.length&&!s.length)return;r(v());const c=n(),a=Object(A.d)(c,{subredditId:t}),u=Object(A.s)(c,{itemId:t}),l=Object(A.C)(c,{itemId:t}),b=new Set;for(const t of e)if(t.state===I.d.NONE&&a[t.tagId]&&!l[t.tagId]){!!s.find(e=>e.state===I.d.TAGGED&&e.tagId===t.tagId)||b.add(t.tagId)}for(const t of s)if(t.state===I.d.NONE&&a[t.tagId]&&!u[t.tagId]){!!e.find(e=>e.state===I.d.TAGGED&&e.tagId===t.tagId)||b.add(t.tagId)}const p=await f(o(),{deleteTagsInput:[...b].map(t=>({tagId:t})),updateTagStatesInput:{subredditId:t,suggestedTagStates:s,tagStates:e}}),O=p.body&&p.body.data||null;p.ok&&O&&O.updateSubredditTagStates&&O.updateSubredditTagStates.ok&&O.updateSubredditTagStates.subreddit?r(U(d({subredditInfoById:O.updateSubredditTagStates.subreddit}))):r(L())}},nt=function t(e,s){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return async(i,d,c)=>{const a=d(),u=Object(A.u)(a,{subredditId:e}),l=Object(A.F)(a,{subredditId:e});let b=u.filter(t=>!!t.id&&!!t.action).map(t=>({tagId:t.id,state:t.action===y.a.ADD?I.d.TAGGED:I.d.NONE}));if(l.length>0){const t=await st(e,l)(i,d,c);b=b.concat((t||[]).map(t=>({tagId:t.id,state:I.d.TAGGED})))}await rt(e,b)(i,d,c),Object(A.D)(d())?i(Object(o.e)(Object(o.d)(r.fbt._("Yikes! It looks like we didn't save all of your topics. Please try again",null,{hk:"2Jbh5V"}),T.b.Error,r.fbt._("Retry",null,{hk:"1c2xrJ"}),t(e,s,n)))):n&&i(Object(o.e)(Object(o.d)(r.fbt._("Community topics saved!",null,{hk:"3wtajT"}),T.b.SuccessCommunity)))}},it=(t,e,s)=>async(s,n,i)=>{const d={state:I.d.TAGGED};if(Object(S.b)(e)){const r=await st(t,[{text:e.displayText,type:I.c.CLASSIFICATION}])(s,n,i);r&&1===r.length&&(d.tagId=r[0].id)}else{if(!e.id)return void s(Object(o.e)(Object(o.d)(r.fbt._("Whoops, we couldn't save that topic. Please try again later.",null,{hk:"CxjiK"}),T.b.Error)));d.tagId=e.id}(t=>!!t.tagId&&!!t.state)(d)?await rt(t,[],[d])(s,n,i):s(Object(o.e)(Object(o.d)(r.fbt._("Whoops, we couldn't save that topic. Please try again later.",null,{hk:"CxjiK"}),T.b.Error)))},ot=(t,e,s)=>async(r,n,i)=>{e.id?await rt(t,[],[{state:I.d.NONE,tagId:e.id}])(r,n,i):r($(t,s,!1))},dt=function t(e,s,n,i){let d=arguments.length>4&&void 0!==arguments[4]&&arguments[4];return async(c,a,u)=>{let{gqlContext:l}=u;if(!(await m(l(),{input:{tagStatesRelevance:s,suggestedTagStatesRelevance:n}})).ok)return c(Object(o.e)(Object(o.d)(r.fbt._("Whoops! Unable to update topics relevance status",null,{hk:"17akdT"}),T.b.Error,r.fbt._("Retry",null,{hk:"1wqK2v"}),t(e,s,n,i,d)))),void c(tt(e));if(d)for(const t of n)h.f(a(),t,{context:i});c(Object(o.e)(Object(o.d)(r.fbt._("Successfully updated topics relevance!",null,{hk:"3KIYlz"}),T.b.SuccessCommunity,r.fbt._("Undo",null,{hk:"34apPL"}),t(e,s.map(t=>Object.assign(Object.assign({},t),{isRelevant:!t.isRelevant})),n.map(t=>Object.assign(Object.assign({},t),{isRelevant:!t.isRelevant})),i,d)))),c(tt(e))}},ct=t=>async(e,s)=>{e(Z({itemTagsState:{[t]:Object(A.s)(s(),{itemId:t})}}))},at=function t(e,s){let n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];return async(i,d,c)=>{let{gqlContext:a}=c;i(W());const u=await E(a(),{input:{subredditId:e,primaryTagState:s}}),l=u.body&&u.body.data||null;u.ok&&l&&l.updateSubredditTagStates&&l.updateSubredditTagStates.ok?(i(z(j(l))),n&&i(Object(o.e)(Object(o.d)(r.fbt._("Successfully updated primary topic!",null,{hk:"1NL90v"}),T.b.SuccessCommunity)))):(i(J()),i(Object(o.e)(Object(o.d)(r.fbt._("Whoops! Unable to update primary topic",null,{hk:"3ilZqp"}),T.b.Error,r.fbt._("Retry",null,{hk:"1dRYXW"}),t(e,s)))))}}},"./src/reddit/constants/gold.ts":function(t,e,s){"use strict";s.d(e,"a",(function(){return r})),s.d(e,"b",(function(){return n})),s.d(e,"d",(function(){return i})),s.d(e,"e",(function(){return o})),s.d(e,"f",(function(){return d})),s.d(e,"c",(function(){return c})),s.d(e,"i",(function(){return a})),s.d(e,"h",(function(){return u})),s.d(e,"g",(function(){return l}));const r="ModerationPage--Modal--AddAward",n="ModerationPage--Modal--DeleteAwardConfirmation",i=20,o=4,d=1e4,c=.2,a=.1,u=.1,l=500},"./src/reddit/constants/graphql.ts":function(t,e,s){"use strict";var r;s.d(e,"a",(function(){return r})),function(t){t.Card="CARD",t.Classic="CLASSIC",t.Compact="COMPACT"}(r||(r={}))},"./src/reddit/endpoints/category/subreddits.ts":function(t,e,s){"use strict";s.d(e,"b",(function(){return a}));var r=s("./src/lib/constants/index.ts"),n=s("./src/lib/makeApiRequest/index.ts"),i=s("./src/lib/omitHeaders/index.ts"),o=s("./src/reddit/constants/headers.ts"),d=s("./src/reddit/helpers/r2/normalizeSubredditFromR2/index.ts"),c=s("./src/reddit/models/RichTextJson/addRTJParam.ts");const a=t=>{const e=[],s=[],r={},n={};return t.data.children.forEach(t=>{let{data:i}=t;const o=Object(d.a)(i);e.push(o.id),s.push(o.name),r[o.id]=o,n[o.id]={accountsActive:i.accounts_active,allOriginalContent:i.all_original_content,bannerBackgroundColor:i.banner_background_color,bannerBackgroundImage:i.banner_background_image,contentCategory:i.content_category,allowChatPostCreation:i.allow_chat_post_creation,keyColor:i.key_color,originalContentTagEnabled:i.original_content_tag_enabled,publicDescription:i.public_description,subscribers:i.subscribers,userIsSubscriber:i.user_is_subscriber}}),{subredditIds:e,subredditNames:s,subreddits:r,subredditsAboutInfo:n}};e.a=function(t,e){let s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:100;return Object(n.a)(Object(i.a)(t,[o.a]),{endpoint:Object(c.a)("".concat(t.apiUrl,"/api/subreddits_in_category.json?category_id=").concat(e,"&limit=").concat(s)),method:r.eb.GET})}},"./src/reddit/endpoints/flair/index.ts":function(t,e,s){"use strict";s.d(e,"g",(function(){return a})),s.d(e,"h",(function(){return u})),s.d(e,"i",(function(){return l})),s.d(e,"l",(function(){return b})),s.d(e,"k",(function(){return p})),s.d(e,"j",(function(){return O})),s.d(e,"f",(function(){return f})),s.d(e,"b",(function(){return _})),s.d(e,"e",(function(){return m})),s.d(e,"d",(function(){return g})),s.d(e,"a",(function(){return j})),s.d(e,"c",(function(){return E}));var r=s("./src/config.ts"),n=s("./src/lib/constants/index.ts"),i=s("./src/lib/makeApiRequest/index.ts"),o=s("./src/lib/omitHeaders/index.ts"),d=s("./src/reddit/constants/headers.ts"),c=s("./src/reddit/models/RichTextJson/addRTJParam.ts");const a=(t,e,s,r,c,a)=>Object(i.a)(Object(o.a)(t,[d.a]),{endpoint:"".concat(t.apiUrl,"/r/").concat(s,"/api/selectflair"),method:n.eb.POST,data:{api_type:"json",flair_template_id:r,name:e,text:c,css_class:a}}),u=(t,e,s,r)=>Object(i.a)(Object(o.a)(t,[d.a]),{endpoint:"".concat(t.apiUrl,"/api/selectflair"),method:n.eb.POST,data:{api_type:"json",flair_template_id:s,link:e,text:r}}),l=(t,e,s)=>Object(i.a)(Object(o.a)(t,[d.a]),{endpoint:"".concat(t.apiUrl,"/r/").concat(s,"/api/setflairenabled"),method:n.eb.POST,data:{api_type:"json",flair_enabled:e}}),b=async(t,e,s)=>Object(i.a)(Object(o.a)(t,[d.a]),{endpoint:"".concat(t.apiUrl,"/api/enable_sr_user_flair.json"),method:n.eb.POST,data:{subreddit:e,enabled:s}}),p=async(t,e,s)=>Object(i.a)(Object(o.a)(t,[d.a]),{endpoint:"".concat(t.apiUrl,"/api/enable_sr_link_flair.json"),method:n.eb.POST,data:{subreddit:e,enabled:s}}),O=async(t,e,s,r)=>Object(i.a)(Object(o.a)(t,[d.a]),{endpoint:"".concat(t.apiUrl,"/api/enable_sr_user_flair_self_assign.json"),method:n.eb.POST,data:{subreddit:r,flair_type:s,enabled:e}}),f=async(t,e,s,r)=>Object(i.a)(Object(o.a)(t,[d.a]),{endpoint:"".concat(t.apiUrl,"/api/flairtemplate_v2"),method:n.eb.POST,data:{allowable_content:e.allowableContent,css_class:e.cssClass,flair_template_id:e.id,text:e.text,text_editable:e.textEditable,flair_type:r,text_color:e.textColor,background_color:e.backgroundColor,max_emojis:e.maxEmojis,mod_only:e.modOnly,r:s}}),_=async(t,e,s)=>Object(i.a)(Object(o.a)(t,[d.a]),{endpoint:"".concat(t.apiUrl,"/api/deleteflairtemplate"),method:n.eb.POST,data:{flair_template_id:e,r:s}}),m=async(t,e,s,r)=>Object(i.a)(Object(o.a)(t,[d.a]),{endpoint:"".concat(t.apiUrl,"/api/v1/").concat(e,"/flair_template_order/").concat(s),method:n.eb.PATCH,type:"json",data:r}),g=async(t,e)=>Object(i.a)(t,{endpoint:"".concat(r.a.gatewayUrl,"/desktopapi/v1/subreddits/").concat(e,"/userFlair"),method:n.eb.GET,headers:{[d.a]:d.a}}),j=async(t,e,s)=>Object(i.a)(Object(o.a)(t,[d.a]),{endpoint:"".concat(t.apiUrl,"/r/").concat(s,"/api/deleteflair"),method:n.eb.POST,data:{api_type:"json",name:e}}),E=async(t,e)=>Object(i.a)(Object(o.a)(t,[d.a]),{endpoint:Object(c.a)("".concat(t.apiUrl,"/api/top_flair_in_subreddit.json?subreddit=").concat(e)),method:n.eb.GET})},"./src/reddit/endpoints/gold/communityAwards.ts":function(t,e,s){"use strict";s.d(e,"d",(function(){return S})),s.d(e,"n",(function(){return h})),s.d(e,"a",(function(){return I})),s.d(e,"c",(function(){return T})),s.d(e,"b",(function(){return y})),s.d(e,"k",(function(){return A})),s.d(e,"l",(function(){return C})),s.d(e,"j",(function(){return D})),s.d(e,"f",(function(){return w})),s.d(e,"g",(function(){return x})),s.d(e,"m",(function(){return R})),s.d(e,"h",(function(){return N})),s.d(e,"i",(function(){return P})),s.d(e,"e",(function(){return k}));var r=s("./src/lib/constants/index.ts"),n=s("./src/lib/makeApiRequest/index.ts"),i=s("./src/lib/makeGqlRequest/index.ts"),o=s("./src/lib/omitHeaders/index.ts"),d=s("./src/lib/uploadToS3/index.ts"),c=s("./src/graphql/operations/AwardSheetInfo.json"),a=s("./src/graphql/operations/AwardSheetInfoForProfile.json"),u=s("./src/graphql/operations/CreateCommunityAward.json"),l=s("./src/graphql/operations/CreateGlobalAward.json"),b=s("./src/graphql/operations/CreateModAward.json"),p=s("./src/graphql/operations/DisableAwardInCommunity.json"),O=s("./src/graphql/operations/EnableAwardInCommunity.json"),f=s("./src/graphql/operations/GlobalAwards.json"),_=s("./src/graphql/operations/ManageableAwards.json"),m=s("./src/graphql/operations/ManageableAwardsForProfile.json"),g=s("./src/graphql/operations/RemoveCommunityAward.json"),j=s("./src/reddit/constants/headers.ts"),E=s("./src/reddit/helpers/r2/normalizeR2APIErrors/index.ts");const S=(t,e,s,i)=>{const d={subreddit:e,filepath:s,mimetype:i};return Object(n.a)(Object(o.a)(t,[j.a]),{method:r.eb.POST,endpoint:"".concat(t.apiUrl,"/api/v1/community_awards/award_asset_upload_s3"),data:d})},h=async(t,e)=>Object(d.a)(e,t),I=(t,e,s,r,n,o,d,c,a)=>Object(i.a)(t,Object.assign(Object.assign({},u),{variables:{coinPrice:d,iconHeight:o,iconWidth:n,iconUrl:r,name:s,subredditId:e,startsAt:c,endsAt:a}})),T=(t,e,s,r,n,o,d,c,a)=>Object(i.a)(t,Object.assign(Object.assign({},b),{variables:{iconHeight:o,iconWidth:n,iconUrl:r,monthsOfPremium:d,name:s,subredditId:e,startsAt:c,endsAt:a}})),y=t=>{let{awardSubType:e,coinPrice:s,coinReward:r,context:n,daysOfDripExtension:o,daysOfPremium:d,description:c,endsAt:a,giverCoinReward:u,iconFormat:b,iconHeight:p,iconUrl:O,iconWidth:f,isNew:_,name:m,pennyPrice:g,pennyDonate:j,startsAt:E,subredditCoinReward:S}=t;return Object(i.a)(n,Object.assign(Object.assign({},l),{variables:{awardSubType:e,iconFormat:b,iconHeight:p,iconWidth:f,iconUrl:O,isNew:_,daysOfPremium:d,daysOfDripExtension:o,description:c,coinPrice:s,coinReward:r,name:m,pennyPrice:g,pennyDonate:j,giverCoinReward:u,startsAt:E,endsAt:a,subredditCoinReward:S}}))},A=(t,e)=>Object(i.a)(t,Object.assign(Object.assign({},_),{variables:{subredditId:e}})),C=(t,e)=>Object(i.a)(t,Object.assign(Object.assign({},m),{variables:{profileName:e}})),D=t=>Object(i.a)(t,Object.assign({},f)),w=(t,e,s,r)=>Object(i.a)(t,Object.assign(Object.assign({},c),{variables:{subredditId:e,thingId:s,includeGroup:r}})),x=(t,e,s,r)=>Object(i.a)(t,Object.assign(Object.assign({},a),{variables:{profileName:e,thingId:s,includeGroup:r}})),R=(t,e)=>Object(i.a)(t,Object.assign(Object.assign({},g),{variables:{awardId:e}})),N=(t,e,s)=>Object(i.a)(t,Object.assign(Object.assign({},p),{variables:{awardId:e,subredditId:s}})),P=(t,e,s)=>Object(i.a)(t,Object.assign(Object.assign({},O),{variables:{awardId:e,subredditId:s}})),k=async(t,e,s)=>{const i={api_type:"json",award_id:e,raw_json:1};return Object(n.a)(Object(o.a)(t,[j.a]),{method:r.eb.POST,endpoint:"".concat(t.apiUrl,"/api/report_award"),data:i}).then(t=>t.ok?Object.assign({},t):Object.assign(Object.assign({},t),{error:Object(E.a)(t)}))}},"./src/reddit/endpoints/gold/topAwarded.ts":function(t,e,s){"use strict";s.d(e,"a",(function(){return o})),s.d(e,"b",(function(){return d}));var r=s("./src/graphql/operations/TopAwardedPosts.json"),n=s("./src/graphql/operations/TopAwardersLeaderboard.json"),i=s("./src/lib/makeGqlRequest/index.ts");const o=(t,e)=>Object(i.a)(t,Object.assign(Object.assign({},r),{variables:Object.assign(Object.assign({},e),{includeListingMetadata:!!e.includeListingMetadata})})),d=(t,e)=>Object(i.a)(t,Object.assign(Object.assign({},n),{variables:e}))},"./src/reddit/endpoints/governance/posts.ts":function(t,e,s){"use strict";s.d(e,"a",(function(){return i}));var r=s("./src/config.ts"),n=(s("./src/reddit/models/Poll/index.ts"),s("./src/reddit/endpoints/governance/requester.ts"));function i(t,e,s){return Object(n.a)(t,{method:"get",endpoint:"".concat(r.a.metaUrl,"/polls/").concat(e,"?postIds=").concat(s.join(","))})}},"./src/reddit/endpoints/governance/requester.ts":function(t,e,s){"use strict";s.d(e,"a",(function(){return n}));var r=s("./src/lib/makeApiRequest/index.ts");function n(t,e){return Object(r.a)(t,Object.assign({type:"json"},e)).then(t=>{if(t.ok)return{body:t.body,ok:!0,status:t.status};return{error:t.error&&t.error.fields&&t.error.fields[0]?t.error.fields[0].msg:Object.assign(Object.assign({},t.body),{code:t.status}),ok:!1,status:t.status}})}},"./src/reddit/endpoints/modQueue/index.ts":function(t,e,s){"use strict";s.d(e,"b",(function(){return a})),s.d(e,"a",(function(){return u}));var r=s("./src/config.ts"),n=s("./src/lib/constants/index.ts"),i=s("./src/lib/makeApiRequest/index.ts"),o=s("./src/lib/omitHeaders/index.ts"),d=s("./src/reddit/constants/headers.ts"),c=s("./src/reddit/models/RichTextJson/addRTJParam.ts");const a=(t,e,s)=>Object(i.a)(t,{endpoint:Object(c.a)("".concat(r.a.gatewayUrl,"/desktopapi/v1/").concat(e)),method:n.eb.GET,data:Object.assign({moderated_limit:25},s)}),u=(t,e,s)=>Object(i.a)(Object(o.a)(t,[d.a]),{endpoint:"".concat(t.apiUrl,"/api/v1/modactions/").concat(e),method:n.eb.POST,type:"json",data:s})},"./src/reddit/endpoints/moderator/moderatingSubreddits.ts":function(t,e,s){"use strict";var r=s("./src/lib/constants/index.ts"),n=s("./src/lib/makeApiRequest/index.ts"),i=s("./src/lib/omitHeaders/index.ts"),o=s("./src/reddit/constants/headers.ts");e.a=async t=>Object(n.a)(Object(i.a)(t,[o.a]),{endpoint:"".concat(t.apiUrl,"/subreddit_permissions"),method:r.eb.GET,traceRequestName:"get_subreddit_permissions"})},"./src/reddit/endpoints/page/search.ts":function(t,e,s){"use strict";var r=s("./src/config.ts"),n=s("./src/lib/constants/index.ts"),i=s("./src/lib/makeApiRequest/index.ts"),o=s("./src/lib/search/index.ts"),d=s("./src/reddit/helpers/correlationIdTracker.ts"),c=s("./src/reddit/models/RichTextJson/addRTJParam.ts");const a=(t,e)=>{let s=e?Object.assign(Object.assign({},t),{type:t.restrict_sr?"link":t.type}):t;(s=s.type?s:Object.assign(Object.assign({},s),{type:"link,sr,user"})).q=Object(o.a)(t.q);const r=Object(d.c)(d.a.SearchResults);return r&&(s.search_correlation_id=r),s};e.a=(t,e,s,o)=>Object(i.a)(t,{data:a(o||{},e),endpoint:Object(c.a)(s?"".concat(r.a.gatewayUrl,"/desktopapi/v1/multireddits/").concat(s,"/").concat(e,"/search"):e?"".concat(r.a.gatewayUrl,"/desktopapi/v1/subreddits/").concat(e,"/search"):"".concat(r.a.gatewayUrl,"/desktopapi/v1/search")),method:n.eb.GET})},"./src/reddit/endpoints/page/subredditPage.ts":function(t,e,s){"use strict";s.d(e,"c",(function(){return S})),s.d(e,"b",(function(){return h}));s("./node_modules/core-js/modules/es6.array.sort.js"),s("./node_modules/core-js/modules/es6.regexp.split.js"),s("./node_modules/core-js/modules/es6.symbol.js");var r=s("./src/config.ts"),n=s("./src/graphql/operations/SubredditPage.json"),i=s("./src/lib/constants/index.ts"),o=s("./src/lib/isAdHocMultireddit/index.ts"),d=s("./src/lib/isFakeSubreddit/index.ts"),c=s("./src/lib/makeApiRequest/index.ts"),a=s("./src/lib/makeGqlRequest/index.ts"),u=s("./src/lib/performanceTimings/index.tsx"),l=s("./src/reddit/constants/graphql.ts"),b=s("./src/reddit/constants/page.ts"),p=s("./src/reddit/helpers/addRedesignIdentifier/index.ts"),O=s("./src/reddit/helpers/getPostLimitForMobile/index.ts"),f=s("./src/reddit/helpers/graphql/normalizeSubredditPageFromGql/index.ts"),_=s("./src/reddit/models/RichTextJson/addRTJParam.ts"),m=s("./src/reddit/models/Subreddit/index.ts"),g=s("./src/reddit/selectors/platform.ts"),j=s("./src/reddit/selectors/user.ts"),E=function(t,e){var s={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(s[r]=t[r]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var n=0;for(r=Object.getOwnPropertySymbols(t);n<r.length;n++)e.indexOf(r[n])<0&&Object.prototype.propertyIsEnumerable.call(t,r[n])&&(s[r[n]]=t[r[n]])}return s};const S=(t,e,s)=>{const{after:r,geo_filter:n,isMobile:i,layout:c,limit:a,recentPostIds:u,sort:p,t:f}=s,_=Object(j.Q)(t),m=Object(g.q)(t),E=Object(o.a)(e),S=Object(d.a)(e),h={name:e,includeIdentity:_&&!t.user.account,adContext:{layout:c?c.toUpperCase():l.a.Card,reddaid:t.user.reddaid},isFake:S,includeRecents:S&&u&&u.length>0||!1,includeTrending:S,isAdHocMulti:E,isAll:e===b.c.All,isPopular:e===b.c.Popular,recentPostIds:u||[],subredditNames:E?e.split("+"):[]};return p&&(h.sort=p.toUpperCase()),f&&(h.range=f.toUpperCase()),i?h.pageSize=Object(O.a)(c):a&&(h.pageSize=a),m&&m.ad&&(h.forceAds={ad:m.ad}),(m&&m.geo_filter||n)&&(h.region=m&&m.geo_filter||n),r&&(h.after=btoa(r)),h},h=async(t,e,s)=>{const r=Date.now(),o=await((t,e)=>Object(a.a)(t,Object.assign(Object.assign({},n),{variables:e})))(t,e),d=Date.now();if(!o.ok||!o.body)return o;const c=o.body,l=Date.now(),b=Object(f.a)(c.data),p=Date.now(),O=[{duration:d-r,logKeyType:u.a.gqlFetchTiming},{duration:p-l,logKeyType:u.a.gqlNormalizationTiming}];return Object(u.h)({name:i.p.SUBREDDIT,isLoggedIn:s,metrics:O}),Object.assign(Object.assign({},o),{ok:!!c.data.subredditInfoByName&&!Object(m.h)(c.data.subredditInfoByName),status:I(c.data),body:b})},I=t=>{if(!t.subredditInfoByName)return 404;if(Object(m.h)(t.subredditInfoByName)){if(t.subredditInfoByName.forbiddenReason===m.b.Banned)return 404;if(t.subredditInfoByName.forbiddenReason===m.b.GoldOnly||t.subredditInfoByName.forbiddenReason===m.b.Private||t.subredditInfoByName.forbiddenReason===m.b.Quarantined)return 403}return 200},T=t=>{var{recentPostIds:e}=t,s=E(t,["recentPostIds"]);return e&&e.length?Object.assign(Object.assign({},s),{recentPostIds:e.join(",")}):s};e.a=(t,e,s)=>Object(c.a)(t,{endpoint:Object(p.a)(Object(_.a)("".concat(r.a.gatewayUrl,"/desktopapi/v1/subreddits/").concat(e))),method:i.eb.GET,data:s&&T(s)||{},traceRequestName:"get_subreddit_page"})},"./src/reddit/endpoints/profile/info.ts":function(t,e,s){"use strict";s.d(e,"c",(function(){return u})),s.d(e,"a",(function(){return l})),s.d(e,"d",(function(){return b})),s.d(e,"b",(function(){return p}));var r=s("./src/graphql/operations/ProfileModHubPage.json"),n=s("./src/graphql/operations/RedditorKarma.json"),i=s("./src/lib/constants/index.ts"),o=s("./src/lib/makeApiRequest/index.ts"),d=s("./src/lib/makeGqlRequest/index.ts"),c=s("./src/lib/omitHeaders/index.ts"),a=s("./src/reddit/constants/headers.ts");const u=(t,e)=>Object(o.a)(Object(c.a)(t,[a.a]),{endpoint:"".concat(t.apiUrl,"/user/").concat(e,"/about.json"),method:i.eb.GET,data:{gilding_detail:1,awarded_detail:1,raw_json:1}}),l={awardeeKarma:0,awarderKarma:0,commentKarma:0,postKarma:0,totalKarma:0},b=(t,e)=>Object(d.a)(t,Object.assign(Object.assign({},n),{variables:{name:e}})),p=(t,e)=>Object(d.a)(t,Object.assign(Object.assign({},r),{variables:{name:e}}))},"./src/reddit/endpoints/publicAccessNetwork/index.ts":function(t,e,s){"use strict";s.d(e,"b",(function(){return _})),s.d(e,"c",(function(){return m})),s.d(e,"e",(function(){return g})),s.d(e,"g",(function(){return j})),s.d(e,"f",(function(){return E})),s.d(e,"d",(function(){return S})),s.d(e,"h",(function(){return h})),s.d(e,"i",(function(){return I})),s.d(e,"j",(function(){return T})),s.d(e,"k",(function(){return w})),s.d(e,"a",(function(){return x}));var r=s("./node_modules/fbt/lib/FbtPublic.js"),n=s("./node_modules/lodash/omit.js"),i=s.n(n),o=s("./src/config.ts"),d=s("./src/lib/addQueryParams/index.ts"),c=s("./src/lib/constants/index.ts"),a=s("./src/lib/constants/headers.ts"),u=s("./src/lib/makeRequest/index.ts"),l=s("./src/reddit/actions/publicAccessNetwork/constants.ts"),b=s("./src/reddit/components/RichTextEditor/RTEState/index.tsx"),p=s("./src/reddit/helpers/r2/normalizeCommentFromR2/index.ts"),O=s("./src/reddit/models/PostCreationForm/index.ts"),f=s("./src/reddit/models/Vote/index.ts");const _=async t=>Object(u.b)({endpoint:"".concat(o.a.streamingApiUrl,"/rpan_config_v1"),method:c.eb.GET,headers:i()(t.headers(),[a.c,a.b]),timeoutMs:void 0}).then(C),m=async(t,e)=>{let s;return s=e===l.R?"/config":"/".concat(e,"/config"),Object(u.b)({endpoint:"".concat(o.a.streamingApiUrl).concat(s),method:c.eb.GET,headers:i()(t.headers(),[a.c,a.b]),timeoutMs:void 0}).then(C)},g=async(t,e)=>Object(u.b)({endpoint:"".concat(o.a.streamingApiUrl,"/videos/").concat(e),method:c.eb.GET,headers:i()(t.headers(),[a.c,a.b])}).then(C),j=async t=>Object(u.b)({endpoint:"".concat(o.a.streamingApiUrl,"/videos"),method:c.eb.GET,headers:i()(t.headers(),[a.c,a.b])}).then(C),E=async(t,e,s)=>{let r;r=e===l.R?"/broadcasts":"/".concat(e,"/broadcasts");const n=Object(d.a)(r,{cursor:null==s?void 0:s.cursor,page_size:null==s?void 0:s.pageSize});return Object(u.b)({endpoint:"".concat(o.a.streamingApiUrl).concat(n),method:c.eb.GET,headers:i()(t.headers(),[a.c,a.b])}).then(C)},S=async t=>Object(u.b)({endpoint:"".concat(o.a.streamingApiUrl,"/recommended_viewer_subreddits"),method:c.eb.GET,headers:i()(t.headers(),[a.c,a.b])}).then(C),h=async(t,e,s)=>Object(u.b)({endpoint:"".concat(o.a.streamingApiUrl,"/videos/").concat(e,"/vote/").concat(D(s)),method:c.eb.POST,headers:i()(t.headers,[a.c,a.b])}).then(C),I=async(t,e)=>Object(u.b)({endpoint:"".concat(o.a.streamingApiUrl,"/videos/").concat(e,"/heartbeat"),method:c.eb.POST,headers:i()(t.headers(),[a.c,a.b])}).then(C),T=async(t,e,s,r)=>{const n=s.rteState;if(!n)return Promise.reject(new Error("Editor state is undefined"));const i=b.a.getRawText(n);return i?y(t,e,i).then(t=>t.ok&&t.body&&t.body.data?Object.assign(Object.assign({},t),{body:{parentId:e,comment:Object.assign(Object.assign({},Object(p.a)(t.body.data.r2_comment,r)),{media:A(n)}),automuteLevel:t.body.data.auto_mute_status.level},error:void 0}):t):Promise.reject(new Error("Cannot send empty message"))},y=async(t,e,s)=>Object(u.b)({endpoint:"".concat(o.a.streamingApiUrl,"/broadcasts/").concat(e,"/comment_v2"),method:c.eb.POST,headers:i()(t.headers,[a.c,a.b]),data:{text:s},type:"json"}).then(C),A=t=>({type:"rtjson",richtextContent:{document:b.a.toRichTextJSON(t).document},rteMode:O.h.RICH_TEXT}),C=t=>{if(t.ok)return Object.assign(Object.assign({},t),{error:void 0});{const e={type:404===t.status?c.E.NOT_FOUND_ERROR:c.E.SERVER_ERROR};return 429===t.status&&(e.fields=[{field:"",msg:r.fbt._("Try again later",null,{hk:"3BBLIU"})}]),Object.assign(Object.assign({},t),{error:e})}},D=t=>t===f.a.upvoted?"up":t===f.a.downvoted?"down":"unset",w=async(t,e,s)=>Object(u.b)({endpoint:"".concat(o.a.streamingApiUrl,"/broadcasts/").concat(e),method:c.eb.PUT,headers:i()(t.headers,[a.c,a.b]),data:{data:{chat_disabled:s}},type:"json"}).then(C),x=async(t,e)=>Object(u.b)({endpoint:"".concat(o.a.streamingApiUrl,"/broadcasts/").concat(e,"/auto_mute_status"),method:c.eb.GET,headers:i()(t.headers,[a.c,a.b])}).then(C)},"./src/reddit/endpoints/subreddit/about.ts":function(t,e,s){"use strict";var r=s("./src/graphql/operations/SubredditAbout.json"),n=s("./src/lib/makeGqlRequest/index.ts");e.a=(t,e,s)=>Object(n.a)(t,Object.assign(Object.assign({},r),{variables:{subredditName:e,includeSubreddit:s}}))},"./src/reddit/endpoints/subreddit/rules.ts":function(t,e,s){"use strict";s.d(e,"b",(function(){return _})),s.d(e,"c",(function(){return m})),s.d(e,"a",(function(){return j})),s.d(e,"f",(function(){return E})),s.d(e,"d",(function(){return S})),s.d(e,"e",(function(){return I}));var r=s("./node_modules/lodash/camelCase.js"),n=s.n(r),i=s("./node_modules/lodash/mapKeys.js"),o=s.n(i),d=s("./src/graphql/operations/SubredditRules.json"),c=s("./src/lib/constants/index.ts"),a=s("./src/lib/makeApiRequest/index.ts"),u=s("./src/lib/makeGqlRequest/index.ts"),l=s("./src/lib/omitHeaders/index.ts"),b=s("./src/reddit/constants/headers.ts"),p=s("./src/reddit/helpers/graphql/helpers.ts"),O=s("./src/reddit/models/Rule/index.ts");const f=t=>{let{rules:e}=t;return{rules:e.map(t=>Object.assign(Object.assign({},o()(t,(t,e)=>n()(e))),{kind:"link"===t.kind?"post":t.kind}))}},_=(t,e)=>Object(u.a)(t,Object.assign(Object.assign({},d),{variables:{subredditName:e}})).then(t=>(t.ok&&t.body&&(t.body=(t=>{return{rules:(t.data.subreddit&&t.data.subreddit.rules||[]).map(t=>({kind:O.c[t.kind],description:t.content.markdown,descriptionRichText:t.content.richtext,shortName:t.name,violationReason:t.violationReason||"",createdUtc:Object(p.d)(t.createdAt,p.a.Millis),priority:t.priority}))}})(t.body)),t)),m=(t,e)=>Object(a.a)(Object(l.a)(t,[b.a]),{endpoint:"".concat(t.apiUrl,"/user/").concat(e,"/about/rules.json"),method:c.eb.GET}).then(t=>(t.ok&&t.body.rules&&(t.body=f(t.body)),t)),g=t=>t.ok?(t.body=Object(O.h)(JSON.parse(t.body.json.data.rules)),t):t.body,j=async(t,e,s)=>Object(a.a)(Object(l.a)(t,[b.a]),{endpoint:"".concat(t.apiUrl,"/api/add_subreddit_rule"),method:c.eb.POST,data:{r:e,short_name:s.rule,kind:s.kind===O.b.post?"link":s.kind,violation_reason:s.reason,description:s.description,api_type:"json",raw_json:1}}).then(t=>g(t)),E=async(t,e,s,r)=>Object(a.a)(Object(l.a)(t,[b.a]),{endpoint:"".concat(t.apiUrl,"/api/update_subreddit_rule"),method:c.eb.POST,data:{r:e,short_name:s.rule,kind:s.kind===O.b.post?"link":s.kind,violation_reason:s.reason,description:s.description,old_short_name:r,api_type:"json",raw_json:1}}).then(t=>g(t)),S=async(t,e,s)=>Object(a.a)(Object(l.a)(t,[b.a]),{endpoint:"".concat(t.apiUrl,"/api/remove_subreddit_rule"),method:c.eb.POST,data:{r:e,short_name:s,api_type:"json",raw_json:1}}).then(t=>g(t)),h=t=>t.map(t=>encodeURIComponent(t)).join(),I=async(t,e,s)=>Object(a.a)(Object(l.a)(t,[b.a]),{endpoint:"".concat(t.apiUrl,"/api/reorder_subreddit_rules"),method:c.eb.POST,data:{r:e,new_rule_order:h(s),api_type:"json",raw_json:1}}).then(t=>g(t))},"./src/reddit/helpers/awards/getAwardItemId.ts":function(t,e,s){"use strict";s.d(e,"a",(function(){return r}));const r=(t,e)=>"awardItem__".concat(e,"-").concat(t)},"./src/reddit/helpers/awards/isEligibleForGlobalAwards.ts":function(t,e,s){"use strict";s.d(e,"b",(function(){return n}));s("./node_modules/core-js/modules/web.dom.iterable.js");const r=new Set(["t5_22cerq"]),n=t=>r.has(t);e.a=n},"./src/reddit/helpers/economics/sortBadges.ts":function(t,e,s){"use strict";s.d(e,"b",(function(){return r})),s.d(e,"a",(function(){return n}));s("./node_modules/core-js/modules/es6.array.sort.js");function r(t,e){if(t.placement&&!e.placement)return-1;if(e.placement&&!t.placement)return 1;if(t.position&&!e.position)return-1;if(e.position&&!t.position)return 1;let s=0;return t.placement&&e.placement&&(s=t.placement.localeCompare(e.placement)),0===s&&t.position&&e.position&&(s=t.position-e.position),0===s&&(s=t.title.localeCompare(e.title)),s}function n(t){return[...t].sort(r)}},"./src/reddit/helpers/filterListingResponse/index.ts":function(t,e,s){"use strict";s("./node_modules/core-js/modules/es6.symbol.js");var r=s("./node_modules/lodash/findLastIndex.js"),n=s.n(r),i=s("./src/reddit/models/WhitelistStatus/index.ts"),o=s("./src/reddit/selectors/telemetry.ts"),d=s("./src/telemetry/index.ts"),c=function(t,e){var s={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(s[r]=t[r]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var n=0;for(r=Object.getOwnPropertySymbols(t);n<r.length;n++)e.indexOf(r[n])<0&&Object.prototype.propertyIsEnumerable.call(t,r[n])&&(s[r[n]]=t[r[n]])}return s};const a=(t,e)=>{let{subreddits:s,profiles:r}=e;const n=s[t.belongsTo.id]||r[t.belongsTo.id];return!t.isNSFW&&n&&i.a.has(n.wls||i.b.NO_ADS)};e.a=(t,e,s)=>{var{postIds:r,posts:i,subreddits:u,profiles:l}=s,b=c(s,["postIds","posts","subreddits","profiles"]);const p=t.listings.postOrder.ids[e],O=(r||[]).filter(t=>!p||!p.includes(t)),f=p.map(e=>t.posts.models[e]),_=f.length-(n()(f,t=>t.isSponsored)+1),m=O.map(t=>i[t]);let g;const j=[],E={subreddits:u,profiles:l};for(let n=0;n<m.length;n++){const s=m[n];let r=!1;if(s.isSponsored){const t=n>0&&m[n-1],e=n<m.length-1&&m[n+1];t&&a(t,E)&&e&&a(e,E)&&(r=!0)}s.isSponsored&&r&&(null==g&&_+n>=3||n-g>=3)?(g=n,j.push(s.id)):s.isSponsored?s.isSponsored&&Object(d.a)(Object.assign(Object.assign({source:"feed",action:"remove",noun:"ad"},o.defaults(t)),{listing:o.listing(t,e)})):j.push(s.id)}return Object.assign(Object.assign({},b),{subreddits:u,profiles:l,posts:i,postIds:j})}},"./src/reddit/helpers/getPostLimitForMobile/index.ts":function(t,e,s){"use strict";s.d(e,"a",(function(){return n}));var r=s("./src/reddit/constants/postLayout.ts");function n(t){return t?r.c[t]:r.f}},"./src/reddit/helpers/graphql/normalizePostFlairFromGql/index.ts":function(t,e,s){"use strict";var r=s("./src/reddit/models/Flair/index.ts");function n(t){switch(t){case r.g.LEFT:return r.b.Left;case r.g.RIGHT:return r.b.Right;default:return null}}function i(t){let{isEnabled:e=!1,position:s}=t;return{isEnabled:e,position:n(s)}}e.a=t=>{let{postFlairSettings:e}=t;return Object.assign({},e&&{displaySettings:e&&i(e)})}},"./src/reddit/helpers/graphql/normalizePostsFromGql/index.ts":function(t,e,s){"use strict";s.d(e,"a",(function(){return n}));var r=s("./src/reddit/helpers/graphql/normalizePostFromGql/index.ts");const n=t=>{let{edges:e}=t;const s=[];for(const{node:n}of e)s.push(Object(r.e)(n));return s}},"./src/reddit/helpers/graphql/normalizeProfileFromGql/index.ts":function(t,e,s){"use strict";s.d(e,"b",(function(){return d}));var r=s("./src/reddit/helpers/graphql/normalizeSubredditFromGql/index.ts"),n=s("./src/reddit/models/Subreddit/index.ts"),i=s("./src/reddit/models/User/index.ts"),o=s("./src/reddit/models/WhitelistStatus/index.ts");const d=t=>{let{pageInfo:e,edges:s}=t;const n={moderatedSubredditIds:[],pageInfo:e,subreddits:{}};for(const{node:i}of s){const t=Object(r.a)(i);n.subreddits[t.id]=t,n.moderatedSubredditIds.push(t.id)}return n};e.a=t=>{let{name:e,path:s,redditorInfo:r,styles:d,wls:c,id:a,title:u,isQuarantined:l,isNSFW:b,subscribers:p}=t;const{height:O,icon:f,width:_}=d&&d.legacyIcon&&{height:d.legacyIcon.dimensions.height,icon:d.legacyIcon.url,width:d.legacyIcon.dimensions.width}||{height:null,icon:d&&d.icon||"",width:null},m=d&&d.legacyPrimaryColor,g=r&&r.__typename===i.c.AvailableRedditor&&r.prefixedName||"";return Object.assign(Object.assign(Object.assign({url:s,displayText:g,icon:{url:f,width:_,height:O},communityIcon:f,type:n.e.User,name:e.substr(2)},m&&{primaryColor:m}),c&&{whitelistStatus:c.toLowerCase(),wls:o.b[c]}),{id:a,title:u,isQuarantined:l,isNSFW:b,subscribers:p})}},"./src/reddit/helpers/graphql/normalizeSubredditModPermissions/index.ts":function(t,e,s){"use strict";e.a=t=>{let{isAccessEnabled:e,isAllAllowed:s,isChatConfigEditingAllowed:r,isChatOperator:n,isConfigEditingAllowed:i,isFlairEditingAllowed:o,isMailEditingAllowed:d,isPostEditingAllowed:c,isWikiEditingAllowed:a}=t;return{access:!!e,all:!!s,chatConfig:!!r,chatOperator:!!n,config:!!i,flair:!!o,mail:!!d,posts:!!c,wiki:!!a}}},"./src/reddit/helpers/graphql/normalizeSubredditPageFromGql/index.ts":function(t,e,s){"use strict";s.d(e,"b",(function(){return E}));var r=s("./src/lib/assertNever.ts"),n=s("./src/lib/env/index.ts"),i=s("./src/lib/sentry/index.ts"),o=s("./src/reddit/models/Post/index.ts"),d=s("./src/reddit/models/RichTextJson/index.ts"),c=s("./src/reddit/models/Subreddit/index.ts"),a=s("./src/reddit/helpers/graphql/normalizeFlairFromGql/index.ts"),u=s("./src/reddit/helpers/graphql/normalizePostFlairFromGql/index.ts"),l=s("./src/reddit/helpers/graphql/normalizePostFromGql/index.ts"),b=s("./src/reddit/helpers/graphql/normalizePreferencesFromGql/index.ts"),p=s("./src/reddit/helpers/graphql/normalizeProfileFromGql/index.ts"),O=s("./src/reddit/helpers/graphql/normalizeSubredditAboutFromGql/index.ts"),f=s("./src/reddit/helpers/graphql/normalizeSubredditFromGql/index.ts"),_=s("./src/reddit/helpers/graphql/normalizeSubredditModPermissions/index.ts"),m=s("./src/reddit/helpers/graphql/normalizeSubredditStylesFromGql/index.ts"),g=s("./src/reddit/helpers/graphql/normalizeUserFromGql/index.ts"),j=s("./src/reddit/helpers/graphql/helpers.ts");const E=(t,e,s)=>{const d={account:null,authorFlair:{},postIds:[],postInstances:{},posts:{},postFlair:{},preferences:null,profiles:{},recentPostIds:[],structuredStyles:{},subredditAboutInfo:{},subredditPermissions:{},subreddits:{},token:"",trendingSubredditIds:[]},c=t=>{if(Object(o.i)(t)||Object(o.h)(t))return null;if(d.posts[t.id])return t.id;const e=Object(l.e)(t);d.posts[e.id]=e;const{crosspostRoot:s}=t;s&&s.type===o.a.Post&&s.postInfo&&c(s.postInfo);let b=e.id;if(t.authorFlair&&(d.authorFlair[e.belongsTo.id]||(d.authorFlair[e.belongsTo.id]={}),d.authorFlair[e.belongsTo.id][e.author]=Object(a.a)(t.authorFlair)[0]),Object(o.k)(t))d.profiles[t.profile.id]||(d.profiles[t.profile.id]=Object(p.a)(t.profile));else if(Object(o.l)(t))d.subreddits[t.subreddit.id]||(d.subreddits[t.subreddit.id]=Object(f.a)(t.subreddit)),d.postFlair[t.subreddit.id]||(d.postFlair[t.subreddit.id]=Object(u.a)(t.subreddit));else if(Object(o.g)(t)){const s=Object(l.b)(t);if(!s)return null;b=s,d.posts[s]=Object.assign(Object.assign({},e),{id:s,permalink:"".concat(e.permalink,"?instanceId=").concat(encodeURIComponent(s))}),d.posts[e.id]||(d.posts[e.id]=Object.assign(Object.assign({},e),{events:[]})),d.postInstances[t.id]||(d.postInstances[t.id]=[]),d.postInstances[t.id].push(s)}else try{Object(r.a)(t)}catch(O){const e='Received unhandled element type when processing subreddit posts: "'.concat(t.__typename,'"');Object(n.b)()||console.warn(e),i.c.captureMessage(e)}return b&&d.postIds.push(b),b};if(t.forEach(t=>c(t)),e){d.trendingSubredditIds=e.map(t=>t.id);for(const t of e)d.subreddits[t.id]=Object(f.a)(t)}const O=d.postIds.length-1;return d.token=O>=0?d.postIds[O]:"",s&&(d.account=Object(g.a)(s),d.preferences=s.preferences&&Object(b.a)(s.preferences,s.interactions)||null),d};e.a=t=>{let{adhocMultiredditByNames:e,all:s,identity:r,popular:a,recentPosts:u,subredditInfoByName:l,trendingSubreddits:b}=t;if(!l)return{reason:c.d.NotFoundSubreddit,data:{account:r&&Object(g.a)(r)||null}};if(Object(c.h)(l)){const{banMessage:t,publicDescriptionText:e,quarantineMessage:s,isEmailRequiredForQuarantineOptin:n}=l;return{reason:S(l.forbiddenReason),data:Object.assign({account:r&&Object(g.a)(r)||null,banMessage:t||void 0,description:e,quarantineRequiresEmailOptin:n},s?{quarantineMessage:s.markdown,quarantineMessageRTJson:Object(j.e)(s.richtext,d.i)}:{})}}const p=l||a||s||e,[f,h]=p.elements.edges.reduce((t,e)=>{const[s,r]=t,n=e.node;return Object(o.j)(n)?s.push(n):r.push(n),[s,r]},[[],[]]);if(h.length){const t="Received unhandled ".concat(h.length,' elements when processing subreddit data: "').concat(h[0].__typename,'"');Object(n.b)()||console.warn(t),i.c.captureMessage(t)}u&&f.push(...u);const I=p.elements.dist,T=E(f,b,r);return l&&l.styles&&(T.structuredStyles={data:{style:Object(m.a)(l.styles)}}),l&&(T.subredditAboutInfo=Object(O.a)(l),l.modPermissions&&(T.subredditPermissions=Object(_.a)(l.modPermissions))),Object.assign(Object.assign({},T),null!==I&&{dist:I})};const S=t=>{switch(t){case c.b.Banned:return c.d.BannedSubreddit;case c.b.GoldOnly:return c.d.GoldSubreddit;case c.b.Private:return c.d.PrivateSubreddit;case c.b.Quarantined:return c.d.QuarantinedSubreddit;case c.b.Unknown:return c.d.ForbiddenSubreddit}}},"./src/reddit/helpers/r2/normalizeAwardingsFromR2.ts":function(t,e,s){"use strict";s.d(e,"b",(function(){return n})),s.d(e,"c",(function(){return i}));var r=s("./src/reddit/models/Gold/Award.ts");e.a=t=>t.map(t=>({awardType:t.award_type,awardSubType:t.award_sub_type?t.award_sub_type:r.b.Global,coinPrice:t.coin_price,coinReward:t.coin_reward,count:t.count,daysOfDripExtension:t.days_of_drip_extension,daysOfPremium:t.days_of_premium,description:t.description,iconUrl:t.icon_url,resizedIcons:t.resized_icons,resizedStaticIcons:t.resized_static_icons,id:t.id,isEnabled:t.is_enabled,isNew:!!t.is_new,name:t.name,staticIconUrl:t.static_icon_url,subredditCoinReward:t.subreddit_coin_reward,tags:t.tags,tiers:Object(r.n)(t.tiersByRequiredAwardings)}));const n=t=>{const{icon_url:e,resized_icons:s,resized_static_icons:n,static_icon_url:i}=t;let o,d,c,a,u,l;for(const{url:r,width:b}of s||[])32===b&&(o={url:r}),64===b&&(d={url:r}),128===b&&(c={url:r});for(const{url:r,width:b}of n||[])32===b&&(a={url:r}),64===b&&(u={url:r}),128===b&&(l={url:r});return{awardType:t.award_type.toUpperCase(),awardSubType:t.award_sub_type?t.award_sub_type.toUpperCase():r.d.Global,coinPrice:t.coin_price,coinReward:t.coin_reward,daysOfDripExtension:t.days_of_drip_extension,daysOfPremium:t.days_of_premium,description:t.description,id:t.id,isEnabled:t.is_enabled,isNew:!!t.is_new,name:t.name,icon:{url:e},icon32:o,icon64:d,icon128:c,staticIcon:{url:i},staticIcon32:a,staticIcon64:u,staticIcon128:l,subredditCoinReward:t.subreddit_coin_reward,tags:t.tags,tiers:Object(r.n)(t.tiersByRequiredAwardings)}},i=t=>{const{top_award:e,total_count:s}=t;return{topAward:e&&n(e),totalCount:s}}},"./src/reddit/helpers/r2/normalizeCommentFromR2/index.ts":function(t,e,s){"use strict";s.d(e,"b",(function(){return a}));var r=s("./src/lib/constants/index.ts"),n=s("./src/reddit/helpers/isComment.ts"),i=s("./src/reddit/helpers/r2/normalizeAwardingsFromR2.ts"),o=s("./src/reddit/models/Vote/index.ts"),d=t=>!0===t?o.a.upvoted:!1===t?o.a.downvoted:o.a.notVoted,c=s("./src/reddit/models/Comment/index.ts");e.a=(t,e)=>{const s={approvedAtUTC:t.approved_at_utc,approvedBy:t.approved_by,author:t.author,authorId:t.author_fullname,bannedAtUTC:t.banned_at_utc,bannedBy:t.banned_by,body:t.body_html,bodyMD:t.body,collapsed:t.collapsed,collapsedReason:t.collapsed_reason,collapsedBecauseCrowdControl:t.collapsed_because_crowd_control,commentType:t.comment_type,created:t.created_utc,deletedBy:u(t),distinguishType:t.distinguished||"",editedAt:null,id:t.name,ignoreReports:t.ignore_reports,isAdmin:"admin"===t.distinguished,isAuthorPremium:!!t.author_premium,isApproved:t.approved,isDeleted:t.author===r.A,isGildable:t.can_gild,isLocked:t.locked,isMod:"moderator"===t.distinguished,isOp:t.is_submitter,isRemoved:t.removed,isScoreHidden:t.score_hidden,isSpam:t.spam,isStickied:t.stickied,isSaved:t.isSaved,isSystem:!1,subredditId:t.subreddit_id,markdown:t.body,media:{mediaMetadata:t.media_metadata,type:"rtjson",richtextContent:a(t.rtjson),rteMode:t.rte_mode},modReports:t.mod_reports,modReportsDismissed:t.mod_reports_dismissed,numReports:t.num_reports,parentId:Object(n.a)(t.parent_id)?t.parent_id:null,permalink:t.permalink,postAuthor:t.link_author||null,postId:t.link_id,postTitle:t.link_title||null,sendReplies:t.send_replies,score:t.score,treatmentTags:t.treatment_tags,userReports:t.user_reports,userReportsDismissed:t.user_reports_dismissed,voteState:d(t.likes)};return t.all_awardings&&(s.allAwardings=Object(i.a)(t.all_awardings)),t.awarders&&(s.awarders=t.awarders),t.associated_award&&(s.associatedAwardId=t.associated_award.id,s.associatedAward=Object(i.b)(t.associated_award)),s};const a=t=>"string"==typeof t?JSON.parse(t):t,u=t=>t.author!==r.A?null:t.body===r.B?c.b.User:t.body===r.Eb?c.b.Moderator:null},"./src/reddit/helpers/r2/normalizePostFromR2/index.ts":function(t,e,s){"use strict";var r=s("./src/reddit/helpers/r2/normalizeAwardingsFromR2.ts"),n=s("./src/reddit/models/Flair/index.ts"),i=s("./src/reddit/models/Media/index.ts"),o=s("./src/reddit/models/PostCreationForm/index.ts"),d=s("./src/reddit/models/Vote/index.ts");const c=t=>{const e=[];return t.link_flair_richtext&&t.link_flair_richtext.length&&e.push({richtext:t.link_flair_richtext,type:n.f.Richtext,textColor:t.link_flair_text_color||"dark",backgroundColor:t.link_flair_background_color||"",templateId:t.link_flair_template_id}),t.link_flair_text&&e.push({text:t.link_flair_text,type:n.f.Text,textColor:t.link_flair_text_color||"dark",backgroundColor:t.link_flair_background_color||"",templateId:t.link_flair_template_id}),t.spoiler&&e.push({text:"spoiler",type:n.f.Spoiler}),t.over_18&&e.push({text:"nsfw",type:n.f.Nsfw}),e},a=t=>t?t.map(t=>({categoryId:t.category_id,categoryName:t.category_name})):[],u=t=>{const e=t.preview&&t.preview.enabled;let s=!1,r=null,n={},d={};const c=t.over_18||t.spoiler;if(t.preview&&(s=!!(d=t.preview.images[0].variants).mp4,n=t.preview.images[0].source,c&&(r=d.obfuscated.source.url)),t.is_self)return Object.assign({content:t.selftext_html,type:i.o.TEXT,markdownContent:t.selftext,obfuscated:r,rteMode:t.rte_mode||o.h.RICH_TEXT},t.rtjson&&{richtextContent:t.rtjson,type:i.o.RTJSON,mediaMetadata:t.media_metadata});if(t.media&&t.media.reddit_video){const e=t.media.reddit_video;return{hlsUrl:e.hls_url,dashUrl:e.dash_url,isGif:e.is_gif,scrubberThumbSource:e.scrubber_media_url,obfuscated:r,posterUrl:e.url,width:e.width,height:e.height,type:i.o.VIDEO}}if(t.media&&t.media.rpan_video){const e=t.media.rpan_video;return{hlsUrl:e.hls_url,scrubberThumbSource:e.scrubber_media_url,type:i.o.LIVEVIDEO}}if(t.secure_media&&t.secure_media.oembed){return{content:t.secure_media_embed.media_domain_url,type:i.o.EMBED,width:t.secure_media.oembed.width,height:t.secure_media.oembed.height,obfuscated:r,provider:t.secure_media.oembed.provider_name}}if(e&&s)return{content:d.mp4.source.url,type:i.o.GIFVIDEO,width:d.mp4.source.width,height:d.mp4.source.height,gifBackgroundImage:n.url,gifBackgroundResolutions:t.preview.images[0].resolutions,obfuscated:r,resolutions:d.mp4.resolutions};if(e){const e=d.gif?d.gif.resolutions:t.preview.images[0].resolutions;return{content:n.url,type:i.o.IMAGE,width:n.width,height:n.height,obfuscated:r,resolutions:e}}return null},l=t=>{const e={};if(t.promoted&&t.outbound_link||!t.is_self&&!t.is_reddit_media_domain){if(e.displayText=t.domain,e.url=t.url,t.outbound_link){const s=t.outbound_link;e.outboundUrl=s.url,e.outboundUrlExpiration=s.expiration,e.outboundUrlCreated=s.created}return e}return null};e.a=t=>{return{allAwardings:t.all_awardings?Object(r.a)(t.all_awardings):[],awarders:t.awarders,author:t.author,authorId:t.author_fullname,approvedAtUTC:t.approved_at_utc,approvedBy:t.approved_by,bannedAtUTC:t.banned_at_utc,bannedBy:t.banned_by,belongsTo:{type:"user"===t.subreddit_type?"profile":"subreddit",id:t.subreddit_id||""},callToAction:t.call_to_action||null,contestMode:t.contest_mode,created:1e3*t.created,crosspostParentId:t.cross_post_parent_id||null,crosspostRootId:t.cross_post_root_id||null,discussionType:t.discussion_type||null,distinguishType:t.distinguish_type||null,domain:t.domain,domainOverride:t.domain_override||null,events:t.events||[],flair:c(t),hidden:t.hidden,id:t.name,ignoreReports:t.ignore_reports,isApproved:t.approved,isArchived:t.archived,isAuthorPremium:t.author_premium,isBlank:t.is_blank,isCrosspostable:t.is_crosspostable,isEligibleForQASchema:!1,isFollowed:t.is_followed||!1,isGildable:t.can_gild,isLocked:t.locked,isMediaOnly:t.media_only,isMeta:t.is_meta,isNSFW:t.over_18,isOriginalContent:t.is_original_content,isPinned:t.pinned,isRemoved:t.removed,isSpam:t.spam,isSpoiler:t.spoiler,isSponsored:t.promoted,isStickied:t.stickied,liveCommentsWebsocket:t.liveCommentsWebsocket||t.websocket_url,media:u(t),modNote:t.mod_note||null,modReports:t.mod_reports,numComments:t.num_comments,numCrossposts:t.num_crossposts||0,numDuplicates:t.num_duplicates,numReports:t.num_reports||0,permalink:"https://web.archive.org/web/20201201014339/https://www.reddit.com".concat(t.permalink),postCategories:a(t.post_categories),preview:t.preview&&t.preview.images&&t.preview.images[0]&&t.preview.images[0].source?{url:t.preview.images[0].source.url,width:t.preview.images[0].source.width,height:t.preview.images[0].source.height}:void 0,previewComments:[],previousVisits:t.previous_visits,postId:t.name,modRemovalReason:t.mod_reason_title,modReasonBy:t.mod_reason_by,removedBy:t.removed_by,removedByCategory:t.removed_by_category,saved:t.saved,score:t.score,topAwardedType:t.top_awarded_type&&t.top_awarded_type.toUpperCase(),treatmentTags:t.treatment_tags,isScoreHidden:!!t.hide_score,sendReplies:t.send_replies,source:l(t),suggestedSort:t.suggested_sort,thumbnail:{url:t.thumbnail,width:t.thumbnail_width,height:t.thumbnail_height},title:t.title,userReports:t.user_reports,upvoteRatio:t.upvote_ratio,viewCount:t.view_count||0,voteState:Object(d.d)(t.likes)}}},"./src/reddit/helpers/r2/normalizeR2APIErrors/index.ts":function(t,e,s){"use strict";s.d(e,"b",(function(){return o}));var r=s("./src/lib/constants/index.ts");const n=t=>{for(const e of t){const t=e[0]||"";switch(t){case r.E.NO_STRIPE_SUBSCRIPTION:case r.E.USER_DOESNT_EXIST:case r.E.USER_REQUIRED_ERROR:case r.E.VALIDATION_ERROR:return t;case r.E.NO_USER:case r.E.NO_TEXT:case r.E.NO_URL:return r.E.VALIDATION_ERROR;case r.E.CREDIT_CARD_FAILURE:case r.E.CREDIT_CARD_FAILURE_GENERIC:return r.E.CREDIT_CARD_FAILURE;default:if(t.startsWith("SUBMIT_VALIDATION"))return r.E.SUBMIT_VALIDATION_ERROR}}return r.E.VALIDATION_ERROR},i=t=>{const e=t.body;return{type:n(e.json.errors),fields:e.json.errors.map(t=>({field:t[2]||"",msg:t[1]}))}},o=t=>{const e=t.body;return!t.ok&&e&&e.json&&e.json.errors?Object.assign(Object.assign({},t),{error:i(t)}):t};e.a=i},"./src/reddit/helpers/r2/normalizeSubredditFromR2/index.ts":function(t,e,s){"use strict";e.a=t=>({allowContractors:t.allow_contractors,communityIcon:t.community_icon,displayText:t.display_name_prefixed,icon:{height:t.icon_size?t.icon_size[1]:0,url:t.community_icon||t.icon_img||"",width:t.icon_size?t.icon_size[0]:0},id:t.name,isNSFW:t.over_18||t.over18,isQuarantined:!!t.quarantine,name:t.display_name,primaryColor:t.primary_color,subscribers:t.subscribers,title:t.title,type:t.subreddit_type,url:t.url,wls:t.wls})},"./src/reddit/helpers/tags/index.ts":function(t,e,s){"use strict";s.d(e,"a",(function(){return i})),s.d(e,"b",(function(){return o}));s("./node_modules/core-js/modules/es6.array.sort.js");var r=s("./node_modules/lodash/values.js"),n=s.n(r);const i=t=>n()(t).sort((e,s)=>{const r=t[e.tag.id].tag.text.toLowerCase(),n=t[s.tag.id].tag.text.toLowerCase();return r<n?-1:r>n?1:0}),o=t=>!t.id&&!!t.action},"./src/reddit/helpers/trackers/communityTopics.ts":function(t,e,s){"use strict";s.d(e,"a",(function(){return r})),s.d(e,"f",(function(){return b})),s.d(e,"c",(function(){return p})),s.d(e,"e",(function(){return O})),s.d(e,"d",(function(){return f})),s.d(e,"b",(function(){return _})),s.d(e,"h",(function(){return m})),s.d(e,"g",(function(){return g}));var r,n=s("./src/reddit/selectors/tags.ts"),i=s("./src/reddit/selectors/telemetry.ts"),o=s("./src/telemetry/index.ts");!function(t){t.communitySettings="community_settings",t.idCard="id_card"}(r||(r={}));const d=(t,e,s)=>{const r=Object(n.A)(t,{subredditId:e});return!!r&&r.id===s},c=(t,e)=>Object(n.x)(t,{itemId:e}).reduce((t,e)=>{let{topicTagIds:s,topicTagContents:r,topicTagTypes:n}=t;return s.push(e.tag.id),r.push(e.tag.text),n.push(e.tag.type),{topicTagIds:s,topicTagContents:r,topicTagTypes:n}},{topicTagIds:[],topicTagContents:[],topicTagTypes:[]}),a=(t,e,s)=>{if(!s.id)return{content:s.displayText};const r=Object(n.b)(t)[s.id]||Object(n.d)(t,{subredditId:e})[s.id];return r?{id:r.id,content:r.text,type:r.type,isPrimary:d(t,e,r.id)}:null},u=(t,e,s)=>{if(!s)return null;const r=Object(n.b)(t)[s]||Object(n.d)(t,{subredditId:e})[s];return r?{id:r.id,content:r.text,type:r.type,isPrimary:d(t,e,r.id)}:null},l=(t,e,s)=>Object.assign(Object.assign({},i.defaults(t)),{subreddit:Object.assign(Object.assign(Object.assign({},i.subreddit(t)||{}),{id:e}),c(t,e)),source:s.context,action:"click"}),b=(t,e,s)=>{Object(o.a)(((t,e,s)=>Object.assign(Object.assign({},l(t,e.subredditId,s)),{noun:e.isRelevant?"restore_related_topic":"remove_related_topic",topicTag:u(t,e.subredditId,e.tagId)}))(t,e,s))},p=(t,e,s,r)=>{Object(o.a)(Object.assign(Object.assign({},l(t,e,r)),{topicTag:a(t,e,s),noun:"add_related_topic"}))},O=(t,e,s,r)=>{return!Object(n.l)(t,{subredditId:e})&&s.id?Object(o.a)(((t,e,s,r)=>Object.assign(Object.assign({},l(t,e,r)),{topicTag:a(t,e,s),noun:"topic_auto_suggest"}))(t,e,s,r)):s.id?Object(o.a)(((t,e,s,r)=>Object.assign(Object.assign({},l(t,e,r)),{topicTag:a(t,e,s),noun:"topic_auto_complete"}))(t,e,s,r)):Object(o.a)(((t,e,s,r)=>Object.assign(Object.assign({},l(t,e,r)),{topicTag:a(t,e,s),noun:"topic_add_new"}))(t,e,s,r))},f=(t,e,s,r)=>Object(o.a)(Object.assign(Object.assign({},l(t,e,r)),{topicTag:a(t,e,s),noun:"topic_remove"})),_=(t,e,s)=>Object(o.a)(Object.assign(Object.assign({},l(t,e,s)),{noun:"topic_tag_field"})),m=(t,e,s)=>Object(o.a)(Object.assign(Object.assign({},l(t,e,s)),{noun:s.context===r.communitySettings?"save":"save_community_topics"})),g=(t,e,s,r)=>{const n=l(t,e,r);Object(o.a)(Object.assign(Object.assign({},n),{action:"view",noun:"error",actionInfo:Object.assign(Object.assign({},n.actionInfo),{reason:s})}))}},"./src/reddit/helpers/trackers/inlineSubredditEditing.ts":function(t,e,s){"use strict";s.d(e,"e",(function(){return d})),s.d(e,"b",(function(){return c})),s.d(e,"a",(function(){return a})),s.d(e,"d",(function(){return u})),s.d(e,"c",(function(){return l}));var r,n=s("./src/reddit/constants/tracking.ts"),i=s("./src/reddit/selectors/telemetry.ts");!function(t){t.SubredditInlineTooltip="subreddit_inline_tooltip",t.EditSubredditIcon="edit_subreddit_icon",t.EditSubredditDescription="edit_subreddit_description",t.SaveDescription="save_description",t.Error="error"}(r||(r={}));const o=t=>({subreddit:i.subreddit(t),userSubreddit:i.userSubreddit(t)}),d=t=>Object.assign({source:"subreddit_tooltip",noun:r.SubredditInlineTooltip,action:n.c.VIEW},o(t)),c=t=>Object.assign({source:"id_card",noun:r.EditSubredditIcon,action:n.c.CLICK},o(t)),a=t=>Object.assign({source:"id_card",noun:r.EditSubredditDescription,action:n.c.CLICK},o(t)),u=(t,e)=>s=>Object.assign({source:"id_card",noun:r.SaveDescription,action:n.c.CLICK,setting:{value:String(t),oldValue:String(e)}},o(s)),l=(t,e)=>Object.assign(Object.assign(Object.assign({source:"id_card",noun:r.Error,action:n.c.VIEW},o(t)),i.defaults(t)),{actionInfo:i.actionInfo(t,{reason:e})})},"./src/reddit/models/Badge/index.ts":function(t,e,s){"use strict";s.d(e,"a",(function(){return r})),s.d(e,"e",(function(){return d})),s.d(e,"f",(function(){return c})),s.d(e,"d",(function(){return l})),s.d(e,"c",(function(){return n})),s.d(e,"b",(function(){return i}));s("./node_modules/core-js/modules/es6.regexp.split.js"),s("./node_modules/core-js/modules/web.dom.iterable.js");var r,n,i,o=s("./src/config.ts");function d(t){return"userId"in t}function c(t){return!(!t.extra||!t.extra.membership)&&!!t.extra.membership.included}function a(t,e,s){const r=s.media[0],n=Object.keys(r);if(r["0x0"])return r["0x0"];let i={width:1/0,height:1/0,url:""};if(n.forEach(s=>{const n=r[s],[o,d]=s.split("x").map(t=>parseInt(t));(o<i.width&&o>=t||d<i.height&&d>=e)&&(i={height:d,width:o,url:n})}),!i.url&&n.length){const t=Object.keys(r)[0],e=r[t],[s,n]=t.split("x").map(t=>parseInt(t));i={height:n,width:s,url:e}}return i.url}function u(t){return t.startsWith("https")?t:"".concat(o.a.assetPath,"/").concat(t)}function l(t,e,s){const r=a(t,e,s),n=a(2*t,2*e,s);return{url:u(r),url2x:u(n)}}!function(t){t.First="p1",t.Second="p2"}(r||(r={})),function(t){t.ChatTab="chatTab",t.DirectMessages="directMessages",t.MessageTab="messageTab",t.ChatRooms="chatRooms",t.ChatRoomMentions="chatRoomMentions"}(n||(n={})),function(t){t.Numbered="NUMBERED",t.Filled="FILLED"}(i||(i={}))},"./src/reddit/models/Badge/managementPage.ts":function(t,e,s){"use strict";s.d(e,"a",(function(){return r})),s.d(e,"c",(function(){return n})),s.d(e,"b",(function(){return o})),s.d(e,"d",(function(){return d}));var r,n,i=s("./src/reddit/models/Badge/index.ts");!function(t){t.Loyalty="loyalty",t.Achievement="achievement",t.Cosmetic="cosmetic"}(r||(r={})),function(t){t.Gallery="gallery",t.MyBadges="my-badges"}(n||(n={}));const o={[r.Loyalty]:i.a.First,[r.Achievement]:i.a.Second,[r.Cosmetic]:void 0},d=t=>t===i.a.First?r.Loyalty:t===i.a.Second?r.Achievement:r.Cosmetic},"./src/reddit/models/DiscoveryUnit/index.ts":function(t,e,s){"use strict";var r,n,i,o;s.d(e,"f",(function(){return r})),s.d(e,"e",(function(){return n})),s.d(e,"d",(function(){return i})),s.d(e,"c",(function(){return d})),s.d(e,"g",(function(){return c})),s.d(e,"h",(function(){return a})),s.d(e,"l",(function(){return u})),s.d(e,"a",(function(){return l})),s.d(e,"b",(function(){return b})),s.d(e,"j",(function(){return p})),s.d(e,"k",(function(){return O})),s.d(e,"i",(function(){return f})),function(t){t.Community="community",t.CommunityCategory="community_category",t.FavoriteSubreddits="favorite_subreddits",t.Listing="listing",t.RecentlyVisitedSubreddits="recently_visited_subreddits",t.SubredditListing="subreddit_listing"}(r||(r={})),function(t){t.Comments="comments",t.Communities="communities",t.Explore="explore",t.Frontpage="front_page",t.Popular="popular",t.SubredditListing="subreddit_listing",t.Topic="topic"}(n||(n={})),function(t){t.Large="large",t.Small="small"}(i||(i={})),function(t){t.Wide="wide",t.Description="description",t.ActionButton="action_button",t.SeeMore="see_more",t.HideItems="hide_items",t.HideUnit="hide_unit",t.ShowLess="show_less",t.PostShowSubredditHeader="post_show_subreddit_header",t.UnitShowSubredditHeader="unit_show_subreddit_header",t.PreviewMode="preview_mode"}(o||(o={}));const d="community_banner_posts",c="search_posts",a="search_subreddits",u="trending_on_popular",l="best_of_community",b="chaining_similar_subreddits_posts",p="top_week_posts",O="top_week_posts_large",f="top_topic_communities_rails"},"./src/reddit/models/ExternalAccount/index.ts":function(t,e,s){"use strict";var r;s.d(e,"a",(function(){return r})),function(t){t.Twitter="twitter"}(r||(r={}))},"./src/reddit/models/Gold/ProductOffer.ts":function(t,e,s){"use strict";var r;s.d(e,"a",(function(){return r})),s.d(e,"b",(function(){return n})),function(t){t.CoinConversion="user-coins-in-subreddit",t.Powerups="powerups"}(r||(r={}));const n=(t,e)=>{const s=t&&t.dealInfo&&t.dealInfo.type;return e?"gild_flow":"low_coin_upsell"===s?"low_coin_balance":"new_purchaser"===s?"new_user_targeted_offer":"repeat_purchaser"===s?"repeat_user_targeted_offer":void 0}},"./src/reddit/models/Option/index.ts":function(t,e,s){"use strict";s.d(e,"a",(function(){return i}));const r=t=>!t.id,n=t=>!!t.id,i=(t,e)=>r(t)&&r(e)?t.displayText.toLowerCase().trim()===e.displayText.toLowerCase().trim():!(!n(t)||!n(e))&&t.id===e.id},"./src/reddit/models/Poll/index.ts":function(t,e,s){"use strict";s.d(e,"a",(function(){return r})),s.d(e,"b",(function(){return n})),s.d(e,"g",(function(){return o})),s.d(e,"h",(function(){return d})),s.d(e,"f",(function(){return c})),s.d(e,"c",(function(){return a})),s.d(e,"d",(function(){return u})),s.d(e,"e",(function(){return l}));var r,n,i=s("./node_modules/bignumber.js/bignumber.js");!function(t){t.GovGeneric="governance:generic",t.ReplaceTopMod="governance:replace-top-mod",t.Spinoff="governance:spin-off",t.GA="ga",t.Prediction="prediction"}(r||(r={})),function(t){t.ByVoters="byVoters",t.ByVotingPower="byVotingPower"}(n||(n={}));const o={[r.ReplaceTopMod]:()=>[{text:"Yes"},{text:"No"}],[r.Spinoff]:t=>[{text:t?"Yes, I'd like to join r/".concat(t):"Yes, I'd like to join the new community"},{text:"No"}]};function d(t,e){return!!t.options.filter(t=>e.options[t.id].userSelected).length}function c(t,e){return new Date(t.endsAt).getTime()<Date.now()||d(t,e)}function a(t,e){let s=t.options[0],r=new i.BigNumber(e.options[s.id].votes);for(const n of t.options){const t=new i.BigNumber(e.options[n.id].votes);t.isGreaterThan(r)&&(s=n,r=t)}return s}function u(t){switch(t.type){case r.GovGeneric:case r.ReplaceTopMod:case r.Spinoff:return!0;default:return!1}}function l(t){return!0===t.isPrediction}},"./src/reddit/models/Rule/index.ts":function(t,e,s){"use strict";s.d(e,"b",(function(){return r})),s.d(e,"c",(function(){return i})),s.d(e,"e",(function(){return o})),s.d(e,"g",(function(){return d})),s.d(e,"f",(function(){return c})),s.d(e,"a",(function(){return a})),s.d(e,"d",(function(){return u})),s.d(e,"h",(function(){return l}));const r={all:"all",post:"post",comment:"comment"},n={all:"all",link:"post",comment:"comment"},i={LINK_AND_COMMENT:"all",LINK:"post",COMMENT:"comment"},o=15,d=100,c=100,a=500,u=2e3,l=t=>({rules:t.map(t=>({kind:n[t.kind],description:t.description,descriptionHtml:t.description_html,shortName:t.short_name,violationReason:t.violation_reason,createdUtc:t.created_utc,priority:t.priority}))})},"./src/reddit/models/ScheduledPost/index.ts":function(t,e,s){"use strict";s.d(e,"r",(function(){return o})),s.d(e,"a",(function(){return c})),s.d(e,"e",(function(){return a})),s.d(e,"g",(function(){return u})),s.d(e,"n",(function(){return l})),s.d(e,"o",(function(){return b})),s.d(e,"f",(function(){return p})),s.d(e,"c",(function(){return f})),s.d(e,"q",(function(){return m})),s.d(e,"k",(function(){return g})),s.d(e,"j",(function(){return j})),s.d(e,"h",(function(){return E})),s.d(e,"i",(function(){return S})),s.d(e,"d",(function(){return h})),s.d(e,"m",(function(){return I})),s.d(e,"b",(function(){return T})),s.d(e,"l",(function(){return y})),s.d(e,"p",(function(){return A}));s("./node_modules/core-js/modules/web.dom.iterable.js");var r=s("./src/lib/assertNever.ts"),n=s("./src/reddit/models/GqlTopLevelField.ts"),i=s("./src/reddit/models/User/index.ts");const o="scheduledposts";var d,c,a;!function(t){t.LINK="LINK",t.POLL="POLL",t.SELF="SELF"}(d||(d={})),function(t){t.RTJSON="RTJSON",t.TEXT="TEXT"}(c||(c={})),function(t){t.CREATED="CREATED",t.PROCESSING="PROCESSING",t.FAILED="FAILED",t.SUCCESS="SUCCESS"}(a||(a={}));const u=(t,e)=>{return(e?new Set(["links","text"]):new Set(["links","text","polls"])).has(t)},l=t=>t.__typename===i.c.AvailableRedditor,b=t=>t.__typename===n.a.Subreddit;var p,O,f,_;!function(t){t.standalonePosts="standalonePosts",t.recurringPosts="recurringPosts"}(p||(p={})),function(t){t.MONDAY="MONDAY",t.TUESDAY="TUESDAY",t.WEDNESDAY="WEDNESDAY",t.THURSDAY="THURSDAY",t.FRIDAY="FRIDAY",t.SATURDAY="SATURDAY",t.SUNDAY="SUNDAY"}(O||(O={})),function(t){t[t.MONDAY=0]="MONDAY",t[t.TUESDAY=1]="TUESDAY",t[t.WEDNESDAY=2]="WEDNESDAY",t[t.THURSDAY=3]="THURSDAY",t[t.FRIDAY=4]="FRIDAY",t[t.SATURDAY=5]="SATURDAY",t[t.SUNDAY=6]="SUNDAY"}(f||(f={})),function(t){t[t.SUNDAY=0]="SUNDAY",t[t.MONDAY=1]="MONDAY",t[t.TUESDAY=2]="TUESDAY",t[t.WEDNESDAY=3]="WEDNESDAY",t[t.THURSDAY=4]="THURSDAY",t[t.FRIDAY=5]="FRIDAY",t[t.SATURDAY=6]="SATURDAY"}(_||(_={}));const m=t=>O[_[t]],g=t=>_[O[t]],j=t=>f[O[t]],E=t=>O[f[t]],S=t=>_[f[t]];var h;!function(t){t.Hourly="HOURLY",t.Daily="DAILY",t.Weekly="WEEKLY",t.Monthly="MONTHLY"}(h||(h={}));const I=t=>{switch(t){case h.Hourly:case h.Daily:case h.Weekly:case h.Monthly:return!0}return!1},T="custom",y=t=>{switch(t){case"isNsfw":return"mark_as_nsfw";case"isOriginalContent":return"mark_as_oc";case"isSticky":return"sticky";case"isModDistinguished":return"mod_distinguish";case"isSpoiler":return"mark_as_spoiler";case"isContestMode":return"mark_as_contest_mode";case"isPostAsMetaMod":return"post_as_meta_mod";default:return Object(r.a)(t)}},A=t=>"frequency"in t&&!!t.frequency},"./src/reddit/models/Tags/index.ts":function(t,e,s){"use strict";s.d(e,"a",(function(){return r})),s.d(e,"b",(function(){return n})),s.d(e,"c",(function(){return i})),s.d(e,"f",(function(){return o})),s.d(e,"e",(function(){return d})),s.d(e,"d",(function(){return c}));const r=25,n=64;var i;!function(t){t.EVENT="EVENT",t.COLLECTION="COLLECTION",t.CLASSIFICATION="CLASSIFICATION",t.POST_CLASSIFICATION="POST_CLASSIFICATION",t.SUBREDDIT_CLASSIFICATION="SUBREDDIT_CLASSIFICATION",t.COMMENT_CLASSIFICATION="COMMENT_CLASSIFICATION"}(i||(i={}));const o=function(t){let e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return{id:t.id,displayText:t.text,selected:e}},d=function(t){let e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return o(t.tag,e)};var c;!function(t){t.TAGGED="TAGGED",t.NONE="NONE"}(c||(c={}))},"./src/reddit/reducers/economics/paymentSystems/index.ts":function(t,e,s){"use strict";s.d(e,"a",(function(){return r}));s("./node_modules/core-js/modules/es6.symbol.js");var r,n=s("./src/reddit/actions/economics/paymentSystems/constants.ts"),i=function(t,e){var s={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(s[r]=t[r]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var n=0;for(r=Object.getOwnPropertySymbols(t);n<r.length;n++)e.indexOf(r[n])<0&&Object.prototype.propertyIsEnumerable.call(t,r[n])&&(s[r[n]]=t[r[n]])}return s};!function(t){t[t.Failure=0]="Failure",t[t.Fetched=1]="Fetched",t[t.NotFetched=2]="NotFetched",t[t.Pending=3]="Pending"}(r||(r={}));const o={status:r.NotFetched};e.b=function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:o,e=arguments.length>1?arguments[1]:void 0;switch(e.type){case n.a:if(t.status===r.Fetched&&t.data.stripe&&t.data.stripe.sources){const s=e.payload.cardId,r=t.data.stripe.sources,n=s,o=(r[n],i(r,["symbol"==typeof n?n:n+""]));return Object.assign(Object.assign({},t),{data:Object.assign(Object.assign({},t.data),{stripe:Object.assign(Object.assign({},t.data.stripe),{sources:o})})})}return t;case n.e:if(t.status===r.Fetched&&t.data.braintree&&t.data.braintree.sources){const s=e.payload.sourceId,r=t.data.braintree.sources,n=s,o=(r[n],i(r,["symbol"==typeof n?n:n+""]));return Object.assign(Object.assign({},t),{data:Object.assign(Object.assign({},t.data),{braintree:Object.assign(Object.assign({},t.data.braintree),{sources:o})})})}return t;case n.b:return{error:e.payload.error,status:r.Failure};case n.c:return{data:e.payload,status:r.Fetched};case n.d:return{status:r.Pending};default:return t}}},"./src/reddit/reducers/economics/subredditPremium/index.ts":function(t,e,s){"use strict";s.d(e,"a",(function(){return r}));s("./node_modules/core-js/modules/es6.array.sort.js"),s("./node_modules/core-js/modules/web.dom.iterable.js");var r,n=s("./src/lib/constants/specialMembership.ts"),i=s("./src/reddit/actions/economics/subredditPremium/constants.ts"),o=s("./src/reddit/helpers/economics/sortBadges.ts"),d=s("./src/reddit/models/Badge/index.ts"),c=s("./src/reddit/models/Badge/managementPage.ts");!function(t){t[t.NotFetched=0]="NotFetched",t[t.Fetched=1]="Fetched"}(r||(r={}));const a={};function u(t){return"userId"in t}function l(t,e,s,r){t.forEach(t=>{t.collections&&Object.keys(t.collections).forEach(n=>{let i;(i=t.placement?t.placement===d.a.First?r[c.a.Loyalty][n]:r[c.a.Achievement][n]:u(t)?r[c.a.Cosmetic][c.c.MyBadges][n]:r[c.a.Cosmetic][c.c.Gallery][n])&&(u(t)?s.has(t.id)&&i.unlocked.push(t):e.has(t.id)||i.locked.push(t))})})}function b(t){const e=(t,e)=>{const s=parseInt(t.price||"0"),r=parseInt(e.price||"0");return s===r?Object(o.b)(t,e):s-r};return t.locked.sort(e),t.unlocked.sort(e),t}function p(t,e){return Object.keys(t).map(e=>t[e]).filter(t=>!!t.locked.length||!!t.unlocked.length||t.id===n.a).map(b).sort((t,s)=>{const r=e[t.id],n=e[s.id];return Object(o.b)(r,n)})}function O(t){const e={[c.a.Loyalty]:{},[c.a.Achievement]:{},[c.a.Cosmetic]:{[c.c.Gallery]:{},[c.c.MyBadges]:{}}};Object.keys(t.collections).forEach(s=>{const r=t.collections[s],n={description:r.description,highlight:r.extra&&r.extra.style&&r.extra.style.color,id:r.id,locked:[],title:r.title,unlocked:[]};e[c.a.Loyalty][s]=Object.assign(Object.assign({},n),{locked:[],unlocked:[]}),e[c.a.Achievement][s]=Object.assign(Object.assign({},n),{locked:[],unlocked:[]}),e[c.a.Cosmetic][c.c.Gallery][s]=Object.assign(Object.assign({},n),{locked:[],unlocked:[]}),e[c.a.Cosmetic][c.c.MyBadges][s]=Object.assign(Object.assign({},n),{locked:[],unlocked:[]})});const s=new Set;t.userOwnedBadges.forEach(e=>{const r=t.badges[e];r&&s.add(r.type)});const r=new Set(t.userOwnedBadges);return l(Object.keys(t.badges).map(e=>t.badges[e]),s,r,e),l(Object.keys(t.products).map(e=>t.products[e]),s,r,e),{collections:{[c.a.Loyalty]:p(e[c.a.Loyalty],t.collections),[c.a.Achievement]:p(e[c.a.Achievement],t.collections),[c.a.Cosmetic]:{[c.c.Gallery]:p(e[c.a.Cosmetic][c.c.Gallery],t.collections),[c.c.MyBadges]:p(e[c.a.Cosmetic][c.c.MyBadges],t.collections)}},subscription:t.subscription,userOwnedBadges:t.userOwnedBadges.map(e=>t.badges[e]).filter(Boolean)}}e.b=function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:a,e=arguments.length>1?arguments[1]:void 0;switch(e.type){case i.a:{const{subredditId:s}=e.payload,n=t[s];return n&&n.status===r.Fetched?Object.assign(Object.assign({},t),{[s]:Object.assign(Object.assign({},n),{data:Object.assign({},n.data),raw:Object.assign({},n.raw)})}):t}case i.h:{const{subredditId:s}=e.payload,n=t[s];return n&&n.status===r.Fetched?Object.assign(Object.assign({},t),{[s]:Object.assign(Object.assign({},n),{data:Object.assign(Object.assign({},n.data),{subscription:Object.assign(Object.assign({},n.data.subscription||{}),{settings:{renew:!1}})}),raw:Object.assign(Object.assign({},n.raw),{subscription:Object.assign(Object.assign({},n.raw.subscription||{}),{settings:{renew:!1}})})})}):t}case i.i:{const s=e.payload;return Object.assign(Object.assign({},t),{[s.subredditId]:{raw:s,data:O(s),status:r.Fetched}})}default:return t}}},"./src/reddit/reducers/features/categories/index.ts":function(t,e,s){"use strict";var r=s("./node_modules/redux/es/redux.js"),n=s("./src/reddit/actions/category/constants.ts");var i=function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,e=arguments.length>1?arguments[1]:void 0;switch(e.type){case n.b:case n.c:return null;case n.a:{const{error:t}=e.payload;return t||null}default:return t}};var o=function(){let t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],e=arguments.length>1?arguments[1]:void 0;switch(e.type){case n.c:return!1;case n.b:return!0;default:return t}};var d=function(){let t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],e=arguments.length>1?arguments[1]:void 0;switch(e.type){case n.c:return!0;case n.b:case n.a:return!1;default:return t}},c=Object(r.c)({error:i,loaded:o,pending:d});const a={};var u=function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:a,e=arguments.length>1?arguments[1]:void 0;switch(e.type){case n.g:case n.f:{const{categoryId:s}=e.payload,r=Object.assign({},t);return delete r[s],r}case n.e:{const{categoryId:s,error:r}=e.payload;return Object.assign(Object.assign({},t),{[s]:r})}default:return t}};const l={};var b=function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:l,e=arguments.length>1?arguments[1]:void 0;switch(e.type){case n.g:{const{categoryId:s}=e.payload;return Object.assign(Object.assign({},t),{[s]:!1})}case n.f:{const{categoryId:s}=e.payload;return Object.assign(Object.assign({},t),{[s]:!0})}default:return t}};const p={};var O=function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:p,e=arguments.length>1?arguments[1]:void 0;switch(e.type){case n.g:{const{categoryId:s}=e.payload;return Object.assign(Object.assign({},t),{[s]:!0})}case n.f:case n.e:{const{categoryId:s}=e.payload;return Object.assign(Object.assign({},t),{[s]:!1})}default:return t}},f=Object(r.c)({error:u,loaded:b,pending:O}),_=Object(r.c)({list:c,subreddits:f}),m=s("./node_modules/lodash/isEmpty.js"),g=s.n(m);const j=[];var E=function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:j,e=arguments.length>1?arguments[1]:void 0;switch(e.type){case n.b:{const{categoryIds:s}=e.payload;return g()(s)?t:s}default:return t}};const S={};var h=function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:S,e=arguments.length>1?arguments[1]:void 0;switch(e.type){case n.b:{const{categories:s}=e.payload;return g()(s)?t:Object.assign(Object.assign({},t),s)}default:return t}},I=s("./node_modules/lodash/forOwn.js"),T=s.n(I),y=s("./src/reddit/helpers/name/index.ts");const A={};var C=function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:A,e=arguments.length>1?arguments[1]:void 0;switch(e.type){case n.b:{const{categories:s}=e.payload;if(g()(s))return t;const r={};return T()(s,t=>{r[Object(y.g)(t.name)]=t.id}),Object.assign(Object.assign({},t),r)}default:return t}},D=s("./src/reddit/actions/global/constants.ts"),w=s("./src/reddit/constants/localStorage.ts");const x={};var R=function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:x,e=arguments.length>1?arguments[1]:void 0;switch(e.type){case D.a:return e.payload[w.e]||t;case n.d:{const{categoryId:s,rank:r}=e.payload;return Object.assign(Object.assign({},t),{[s]:r})}default:return t}};e.a=Object(r.c)({api:_,ids:E,models:h,nameToId:C,ranking:R})},"./src/reddit/reducers/tags/selected/index.ts":function(t,e,s){"use strict";s.d(e,"a",(function(){return r}));s("./node_modules/core-js/modules/web.dom.iterable.js");var r,n=s("./node_modules/lodash/uniqWith.js"),i=s.n(n),o=s("./node_modules/lodash/values.js"),d=s.n(o),c=s("./src/reddit/actions/tags/constants.ts"),a=s("./src/reddit/models/Option/index.ts"),u=s("./src/reddit/models/Tags/index.ts");!function(t){t.ADD="ADD",t.REMOVE="REMOVE"}(r||(r={}));const l={selectedOptions:{},selectedSuggestedOptions:{},deselectedOptions:{},deselectedSuggestedOptions:{},inputByItemId:{},suggestedInputByItemId:{}};e.b=function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:l,e=arguments.length>1?arguments[1]:void 0;switch(e.type){case c.w:case c.r:{const{subredditId:s,itemTags:r,suggestedItemTags:n}=e.payload,o=i()([...(t.selectedOptions[s]||[]).map(t=>{if(!t.id){const e=d()(r[s]||{}).find(e=>t.displayText.toLowerCase().trim()===e.tag.text.toLowerCase().trim());if(e)return Object.assign(Object.assign({},Object(u.e)(e,!0)),{action:null})}return t}),...d()(r[s]||{}).map(t=>Object.assign(Object.assign({},Object(u.e)(t,!0)),{action:null}))],a.a);return Object.assign(Object.assign({},t),{selectedOptions:Object.assign(Object.assign({},t.selectedOptions),{[s]:o.map(t=>Object.assign(Object.assign({},t),{action:t.id?null:t.action}))}),selectedSuggestedOptions:Object.assign(Object.assign({},t.selectedSuggestedOptions),{[s]:d()(n[s]||{}).map(t=>Object.assign(Object.assign({},Object(u.e)(t,!0)),{action:null}))}),deselectedOptions:Object.assign(Object.assign({},t.deselectedOptions),{[s]:[]})})}case c.D:case c.z:{const{subredditId:s,option:n}=e.payload,o=e.type===c.z?"selectedOptions":"selectedSuggestedOptions",d=e.type===c.z?"deselectedOptions":"deselectedSuggestedOptions",u=(t[d][s]||[]).slice(),l=u.findIndex(t=>Object(a.a)(t,n));let b=r.ADD;return l>-1&&(b=null,u.splice(l,1)),Object.assign(Object.assign({},t),{[o]:Object.assign(Object.assign({},t[o]),{[s]:i()([...t[o][s]||[],Object.assign(Object.assign({},n),{action:b})],a.a)}),[d]:Object.assign(Object.assign({},t[d]),{[s]:u})})}case c.C:case c.y:{const{subredditId:s,option:n}=e.payload,i=e.type===c.y?"selectedOptions":"selectedSuggestedOptions",o=e.type===c.y?"deselectedOptions":"deselectedSuggestedOptions",d=(t[o][s]||[]).slice(),u=(t[i][s]||[]).slice(),l=u.findIndex(t=>Object(a.a)(t,n));return l>-1&&(null===u[l].action&&d.push(Object.assign(Object.assign({},u[l]),{action:r.REMOVE})),u.splice(l,1)),Object.assign(Object.assign({},t),{[i]:Object.assign(Object.assign({},t[i]),{[s]:u}),[o]:Object.assign(Object.assign({},t[o]),{[s]:d})})}case c.A:{const{itemTagsState:s}=e.payload,r=Object.keys(s);if(!r.length)return t;const n={selectedOptions:{},deselectedOptions:{},inputByItemId:{}},i=r.reduce((t,e)=>(t.selectedOptions[e]=d()(s[e]).map(t=>Object.assign(Object.assign({},Object(u.e)(t,!0)),{action:null})),t.deselectedOptions[e]=[],t.inputByItemId[e]="",t),n);return Object.assign(Object.assign({},t),{inputByItemId:Object.assign(Object.assign({},t.inputByItemId),i.inputByItemId),selectedOptions:Object.assign(Object.assign({},t.selectedOptions),i.selectedOptions),deselectedOptions:Object.assign(Object.assign({},t.deselectedOptions),i.deselectedOptions)})}case c.B:case c.x:{const{subredditId:s,input:r}=e.payload,n=e.type===c.x?"inputByItemId":"suggestedInputByItemId";return Object.assign(Object.assign({},t),{[n]:Object.assign(Object.assign({},t[n]),{[s]:r})})}case c.i:case c.h:{const{subredditId:s,primaryTagId:r}=e.payload;if(!r||!s)return t;const n=t.selectedOptions[s];if(n){const e=n.findIndex(t=>t.id===r),i=[...n];return e>=0&&i.splice(e,1),Object.assign(Object.assign({},t),{selectedOptions:Object.assign(Object.assign({},t.selectedOptions),{[s]:i})})}return t}default:return t}}},"./src/reddit/selectors/PublicAccessNetwork/api.ts":function(t,e,s){"use strict";s.d(e,"k",(function(){return d})),s.d(e,"c",(function(){return c})),s.d(e,"e",(function(){return a})),s.d(e,"d",(function(){return u})),s.d(e,"f",(function(){return l})),s.d(e,"i",(function(){return b})),s.d(e,"l",(function(){return p})),s.d(e,"m",(function(){return O})),s.d(e,"b",(function(){return f})),s.d(e,"o",(function(){return _})),s.d(e,"n",(function(){return m})),s.d(e,"g",(function(){return g})),s.d(e,"a",(function(){return j})),s.d(e,"h",(function(){return S})),s.d(e,"j",(function(){return I}));var r=s("./node_modules/reselect/es/index.js"),n=s("./src/lib/objectSelector/index.ts"),i=s("./src/reddit/actions/publicAccessNetwork/constants.ts"),o=s("./src/reddit/helpers/publicAccessNetwork/index.ts");const d=t=>t.publicAccessNetwork.api.config,c=(t,e)=>!!e&&!!t.publicAccessNetwork.api.error[Object(o.h)(e)],a=t=>c(t,i.b),u=(t,e)=>!!e&&!!t.publicAccessNetwork.api.pending[Object(o.h)(e)]&&t.publicAccessNetwork.api.pending[Object(o.h)(e)].isPending,l=t=>u(t,i.b),b=t=>t.publicAccessNetwork.api.pending[i.b]&&t.publicAccessNetwork.api.pending[i.b].fetchedUtcTimeStamp,p=Object(r.a)(d,t=>t.global),O=Object(r.a)((t,e)=>{let{subreddit:s}=e;return s},d,(t,e)=>{const s=t.toLowerCase();return e.subreddits[s]}),f=Object(r.a)(d,t=>t.global.rpan_intro_video_url),_=Object(r.a)(d,t=>t.global.url_to_show_for_unavailable_video),m=Object(r.a)(d,t=>!1),g=Object(r.a)(d,t=>t.isError),j=Object(r.a)(d,t=>t.global.max_chat_comment_length),E=t=>t.publicAccessNetwork.api.recommendedViewerSubreddits,S=(Object(r.a)(E,t=>t.isError),Object(r.a)(E,t=>t.isPending)),h=Object(n.a)(Object(r.a)(E,t=>t.subreddits)),I=Object(r.a)(h,t=>[{name:"All",prefixedName:"All",path:Object(o.e)()},...t.map(t=>({name:t,prefixedName:"r/".concat(t),path:Object(o.g)(t)}))])},"./src/reddit/selectors/communityFlairs.ts":function(t,e,s){"use strict";s.d(e,"c",(function(){return i})),s.d(e,"b",(function(){return d})),s.d(e,"a",(function(){return c}));var r=s("./node_modules/reselect/es/index.js");const n=(t,e)=>{const s=t.communityFlairs[e];return s&&s.sortedKeys},i=Object(r.a)(n,t=>t),o=(t,e)=>{const s=t.communityFlairs[e];return s&&s.models},d=Object(r.a)(o,t=>t),c=(Object(r.a)((t,e)=>o(t,e),(t,e)=>n(t,e),(t,e)=>{if(e&&t)return e.map(e=>t[e])}),(t,e)=>t.communityFlairs.hasOwnProperty(e))},"./src/reddit/selectors/discoveryUnit.ts":function(t,e,s){"use strict";s.d(e,"d",(function(){return b})),s.d(e,"e",(function(){return p})),s.d(e,"c",(function(){return O})),s.d(e,"a",(function(){return _})),s.d(e,"b",(function(){return m})),s.d(e,"f",(function(){return j}));s("./node_modules/core-js/modules/web.dom.iterable.js");var r=s("./src/lib/constants/index.ts"),n=s("./src/lib/makeListingKey/index.ts"),i=s("./src/lib/objectSelector/index.ts"),o=s("./src/reddit/helpers/name/index.ts"),d=s("./src/reddit/models/DiscoveryUnit/index.ts"),c=s("./src/reddit/selectors/category.ts"),a=(s("./src/reddit/selectors/listings.ts"),s("./src/reddit/selectors/posts.ts")),u=(s("./src/reddit/selectors/subreddit.ts"),s("./src/reddit/selectors/experiments/econ/predictions.ts"));const l=[],b=t=>t.discoveryUnits.api.list.loaded,p=t=>t.discoveryUnits.api.list.pending,O=(t,e)=>{let{unitName:s}=e;const r=t.discoveryUnits.nameToId[Object(o.g)(s)];return t.discoveryUnits.models[r]},f=(t,e)=>{let{listingKey:s}=e;const r=Object(a.R)(t);return Object(a.H)(t,{listingKey:s,predictionsEnabled:Object(u.b)(t)}).filter(t=>{const e=r[t];return e&&!e.isStickied&&!e.isSponsored})},_=()=>Object(i.a)((t,e)=>{let s,{categoryName:i,id:o,unitName:d}=e;if(i&&!(s=Object(c.f)(t,{categoryName:i})))return l;const a=o||s&&s.id,u=Object(n.a)(d,r.P.HOT,{category:a});return f(t,{listingKey:u})}),m=t=>O(t,{unitName:d.c}),g=new Set(["sequence"]),j=t=>{const e=t.platform.currentPage;if(e){const{meta:t,urlParams:s}=e,r=t&&t.name||"",n=s&&s.subredditName||"",i="subreddit"===r,o=g.has(n.toLowerCase());return i&&o}return!1}},"./src/reddit/selectors/experiments/econ/groupAwarding.ts":function(t,e,s){"use strict";s.d(e,"a",(function(){return i}));var r=s("./src/reddit/constants/experiments.ts"),n=s("./src/reddit/selectors/experiments/econ/simpleExperiment.ts");const i=Object(n.a)(r.kb)},"./src/reddit/selectors/experiments/goldSubredditPowerups.ts":function(t,e,s){"use strict";s.d(e,"a",(function(){return i}));var r=s("./src/reddit/constants/experiments.ts"),n=s("./src/reddit/helpers/chooseVariant/index.ts");const i=t=>{return Object(n.c)(t,{experimentEligibilitySelector:n.a,experimentName:r.zb})===r.Eb.Enabled}},"./src/reddit/selectors/experiments/gqlSubredditPage.ts":function(t,e,s){"use strict";s.d(e,"b",(function(){return i})),s.d(e,"a",(function(){return o}));var r=s("./src/reddit/constants/experiments.ts"),n=s("./src/reddit/helpers/chooseVariant/index.ts");const i=t=>Object(n.c)(t,{experimentEligibilitySelector:n.a,experimentName:r.P})===r.U.Enabled,o=t=>Object(n.c)(t,{experimentEligibilitySelector:n.a,experimentName:r.O})===r.T.Enabled},"./src/reddit/selectors/experiments/publicAccessNetwork.ts":function(t,e,s){"use strict";s.d(e,"j",(function(){return o})),s.d(e,"k",(function(){return d})),s.d(e,"a",(function(){return c})),s.d(e,"g",(function(){return a})),s.d(e,"h",(function(){return u})),s.d(e,"i",(function(){return l})),s.d(e,"e",(function(){return b})),s.d(e,"d",(function(){return p})),s.d(e,"f",(function(){return O})),s.d(e,"b",(function(){return f})),s.d(e,"c",(function(){return _}));var r=s("./node_modules/reselect/es/index.js"),n=s("./src/reddit/constants/experiments.ts"),i=s("./src/reddit/helpers/chooseVariant/index.ts");const o=t=>n.Gc.RulesAndWarnings===Object(i.c)(t,{experimentEligibilitySelector:i.a,experimentName:n.vc}),d=t=>n.Gc.WarningsOnly===Object(i.c)(t,{experimentEligibilitySelector:i.a,experimentName:n.vc}),c=t=>n.qc.Enabled===Object(i.c)(t,{experimentEligibilitySelector:i.a,experimentName:n.hc}),a=t=>n.Oc.Enabled===Object(i.c)(t,{experimentEligibilitySelector:i.a,experimentName:n.Kc}),u=t=>n.Pc.Enabled===Object(i.c)(t,{experimentEligibilitySelector:i.a,experimentName:n.Lc}),l=(t,e,s)=>{const r=s(t,e);return!(!r||!r.meter)&&(r.meter.enabled&&u(t)&&n.ed.Enabled===Object(i.c)(t,{experimentEligibilitySelector:i.a,experimentName:n.ad}))},b=Object(r.a)(t=>Object(i.c)(t,{experimentEligibilitySelector:i.a,experimentName:n.zc}),t=>t===n.Ic.Enabled),p=t=>n.qc.Enabled===Object(i.c)(t,{experimentEligibilitySelector:i.a,experimentName:n.yc}),O=t=>n.qc.Enabled===Object(i.c)(t,{experimentEligibilitySelector:i.a,experimentName:n.Cc}),f=t=>n.qc.Enabled===Object(i.c)(t,{experimentEligibilitySelector:i.a,experimentName:n.wc}),_=t=>n.Hc.Enabled===Object(i.c)(t,{experimentEligibilitySelector:i.a,experimentName:n.xc})},"./src/reddit/selectors/externalAccount.ts":function(t,e,s){"use strict";s.d(e,"d",(function(){return o})),s.d(e,"a",(function(){return c})),s.d(e,"b",(function(){return a})),s.d(e,"c",(function(){return u}));var r=s("./src/reddit/models/ExternalAccount/index.ts"),n=s("./src/reddit/models/User/index.ts"),i=s("./src/reddit/selectors/user.ts");const o=(t,e)=>{let{username:s}=e;return!!t.externalAccount.api.user.pending[s]},d=(t,e)=>{let{username:s}=e;return t.externalAccount.user[s]},c=t=>{const e=Object(i.i)(t);if(!e)return;const s=Object(n.e)(e),r=d(t,{username:s});return r?r.twitter:void 0},a=t=>!!t.externalAccount.api.connect.pending[r.a.Twitter],u=(t,e)=>{let{profileName:s}=e;if(!s)return null;const o=d(t,{username:s});if(!o)return null;const c=o[r.a.Twitter];if(!c)return null;const a=Object(i.i)(t);if(!(a&&Object(n.e)(a).toLowerCase()===s.toLowerCase()))return c;const u=Object(i.kb)(t,{userName:s});return u?u.prefShowTwitter?c:null:c}},"./src/reddit/selectors/gold/awardIcon.ts":function(t,e,s){"use strict";s.d(e,"c",(function(){return O})),s.d(e,"a",(function(){return f})),s.d(e,"b",(function(){return _})),s.d(e,"e",(function(){return m})),s.d(e,"d",(function(){return g}));s("./node_modules/core-js/modules/web.dom.iterable.js");var r=s("./src/reddit/models/Gold/Award.ts"),n=s("./src/reddit/selectors/comments.ts"),i=s("./src/reddit/selectors/experiments/econ/groupAwarding.ts"),o=s("./src/reddit/selectors/gold/giveAwards.ts"),d=s("./src/reddit/selectors/posts.ts"),c=s("./src/reddit/selectors/user.ts"),a=s("./src/reddit/selectors/userPrefs.ts");const u=[32,48,64,128],l=(t,e,s)=>{const r=e?t["staticIcon".concat(s)]:t["icon".concat(s)];return(null==r?void 0:r.url)?r.url:e?t.staticIcon.url:t.icon.url},b=(t,e)=>(null==e?void 0:e.awardCountsById)&&(null==e?void 0:e.awardCountsById[t.id])&&t.awardSubType===r.d.Group&&t.tiers&&t.tiers.length>1&&e.awardCountsById[t.id]>=t.tiers[1].awardingsRequired,p=t=>{let{award:e,size:s,prefersReducedMotion:n,tierGroupAwardsEnabled:i,postOrComment:o}=t;return e.awardSubType===r.d.Group&&i?(t=>{let{award:e,size:s,prefersReducedMotion:r,postOrComment:n}=t;if(!b(e,n))return l(e,r,s);const i=n.awardCountsById[e.id],o=e.tiers.reduce((t,e)=>i>=e.awardingsRequired?e:t);return l(o,r,s)})({award:e,size:s,prefersReducedMotion:n,postOrComment:o}):l(e,n,s)},O=(t,e)=>{let{awards:s,minSize:r,postOrCommentId:o}=e;const c=Object(a.c)(t),l=u.find(t=>t>=r),O=o?Object(d.O)(t,{postId:o})||Object(n.o)(t,{commentId:o}):void 0,f=!(!((null==O?void 0:O.awardCountsById)&&s.some(t=>t&&b(t,O)))||!Object(i.a)(t));return s.reduce((t,e)=>(e&&(t[e.id]=p({award:e,size:l,prefersReducedMotion:c,tierGroupAwardsEnabled:f,postOrComment:O})),t),{})},f=(t,e)=>{let{award:s,minSize:r,postOrCommentId:n}=e;return s?O(t,{awards:[s],minSize:r,postOrCommentId:n})[s.id]:void 0},_=(t,e)=>{let{postOrComment:s,minSizes:r}=e;const n=Object.keys(s.awardCountsById||{}).reduce((e,s)=>{const r=t.awards.models[s];return r&&e.push(r),e},[]);return r.reduce((e,r)=>{const i=O(t,{awards:n,minSize:r,postOrCommentId:s.id});return e["icon".concat(r)]=i,e},{})},m=(t,e)=>{let{minSize:s,userName:r}=e;const n=Object(c.kb)(t,{userName:r});if(n&&n.awardedLastMonth&&n.awardedLastMonth.topAward)return f(t,{award:n.awardedLastMonth.topAward,minSize:s})},g=t=>{const e=Object(o.b)(t),s=Object(o.a)(t);return f(t,{award:e,postOrCommentId:s||void 0,minSize:512})}},"./src/reddit/selectors/gold/giveAwards.ts":function(t,e,s){"use strict";s.d(e,"b",(function(){return r})),s.d(e,"a",(function(){return n}));const r=t=>t.gild.selectedAward,n=t=>t.gild.gildedThing},"./src/reddit/selectors/gold/purchaseCatalog.ts":function(t,e,s){"use strict";s.d(e,"a",(function(){return r})),s.d(e,"b",(function(){return n})),s.d(e,"d",(function(){return i})),s.d(e,"c",(function(){return o})),s.d(e,"j",(function(){return d})),s.d(e,"f",(function(){return c})),s.d(e,"e",(function(){return a})),s.d(e,"h",(function(){return u})),s.d(e,"g",(function(){return l})),s.d(e,"i",(function(){return b}));const r=t=>t.goldPurchase.purchaseCatalog.activeSaleConfig,n=t=>{return t.goldPurchase.purchaseCatalog.coinPackages.storefrontPackageIds.map(e=>t.goldPurchase.purchaseCatalog.coinPackages.models[e])},i=t=>{return t.goldPurchase.purchaseCatalog.coinPackages.dealPackageIds.map(e=>t.goldPurchase.purchaseCatalog.coinPackages.models[e])},o=(t,e)=>{return i(t).filter(t=>t.mobileId===e)[0]},d=t=>{return t.goldPurchase.purchaseCatalog.coinPackages.recommendedPackageIds.map(e=>t.goldPurchase.purchaseCatalog.coinPackages.models[e])},c=t=>t.goldPurchase.purchaseCatalog.premiumPackages,a=(t,e)=>{return c(t).find(t=>t.mobileId===e)},u=t=>t.goldPurchase.purchaseCatalog.api.storefrontPending,l=t=>t.goldPurchase.purchaseCatalog.api.errorMessage,b=t=>t.goldPurchase.purchaseCatalog.api.recommendedPending},"./src/reddit/selectors/goldPurchaseModals.ts":function(t,e,s){"use strict";s.d(e,"o",(function(){return n})),s.d(e,"q",(function(){return i})),s.d(e,"p",(function(){return o})),s.d(e,"s",(function(){return d})),s.d(e,"r",(function(){return c})),s.d(e,"x",(function(){return a})),s.d(e,"a",(function(){return u})),s.d(e,"m",(function(){return l})),s.d(e,"n",(function(){return b})),s.d(e,"y",(function(){return p})),s.d(e,"b",(function(){return O})),s.d(e,"g",(function(){return f})),s.d(e,"u",(function(){return _})),s.d(e,"v",(function(){return m})),s.d(e,"t",(function(){return g})),s.d(e,"w",(function(){return j})),s.d(e,"e",(function(){return E})),s.d(e,"f",(function(){return S})),s.d(e,"h",(function(){return h})),s.d(e,"j",(function(){return I})),s.d(e,"k",(function(){return T})),s.d(e,"i",(function(){return y})),s.d(e,"l",(function(){return A})),s.d(e,"d",(function(){return C})),s.d(e,"c",(function(){return D}));var r=s("./src/reddit/selectors/gold/purchaseCatalog.ts");const n=t=>t.goldPurchase.purchaseModal.activePage,i=t=>t.goldPurchase.purchaseModal.gildThingId||void 0,o=t=>t.goldPurchase.purchaseModal.correlationId||void 0,d=t=>t.goldPurchase.purchaseModal.showModal,c=t=>t.goldPurchase.purchaseModal.packageId,a=t=>t.goldPurchase.targetedOffer.packageId,u=t=>{const e=Object(r.f)(t),s=(t=>t.goldPurchase.premiumPurchaseModal.packageId)(t);return e.length&&s&&e.find(t=>t.mobileId===s)||null},l=t=>t.goldPurchase.premiumPurchaseModal.activePage,b=t=>t.goldPurchase.premiumPurchaseModal.showModal,p=t=>t.goldPurchase.updateCardModal.pending,O=t=>t.goldPurchase.payment.paymentMethod,f=t=>t.goldPurchase.payment.cardName,_=t=>t.goldPurchase.payment.savedCardsPending,m=t=>t.goldPurchase.payment.savedCards,g=t=>t.goldPurchase.payment.rememberCard,j=t=>t.goldPurchase.payment.useSavedCard,E=t=>t.goldPurchase.payment.cardValidation.cardCvc,S=t=>t.goldPurchase.payment.cardValidation.cardExpiry,h=t=>t.goldPurchase.payment.cardValidation.cardNumber,I=t=>t.goldPurchase.payment.cardValidation.nameOnCard,T=t=>t.goldPurchase.payment.cardValidation.postalCode,y=t=>t.goldPurchase.payment.stripeToken.errorMessage,A=t=>t.goldPurchase.payment.stripeToken.pending,C=t=>t.goldPurchase.payment.paypal.passthrough,D=t=>t.goldPurchase.payment.paypal.errorMessage},"./src/reddit/selectors/inlineSubredditEditing.ts":function(t,e,s){"use strict";s.d(e,"a",(function(){return i})),s.d(e,"b",(function(){return o}));var r=s("./src/reddit/featureFlags/index.ts"),n=s("./src/reddit/selectors/moderatorPermissions.ts");const i=(t,e)=>{let{subredditId:s}=e;if(!r.d.subredditInlineEditing(t))return!1;const i=s?Object(n.j)(t,{subredditId:s}):null;return!!i&&(t=>!!t&&t.config)(i)},o=t=>t.subreddits.api.inlineEditing.pending},"./src/reddit/selectors/oldSiteRules.ts":function(t,e,s){"use strict";s.d(e,"a",(function(){return r}));const r=t=>t.oldSiteRules},"./src/reddit/selectors/searchResults.ts":function(t,e,s){"use strict";s.d(e,"d",(function(){return n})),s.d(e,"e",(function(){return i})),s.d(e,"b",(function(){return o})),s.d(e,"f",(function(){return d})),s.d(e,"i",(function(){return c})),s.d(e,"c",(function(){return a})),s.d(e,"h",(function(){return u})),s.d(e,"a",(function(){return l})),s.d(e,"g",(function(){return b}));s("./node_modules/core-js/modules/es6.regexp.search.js");const r=[],n=(t,e)=>{let{listingKey:s}=e;return t.listings.listingOrder.api.error[s]},i=(t,e)=>{let{listingKey:s}=e;return t.listings.listingOrder.api.pending[s]},o=(t,e)=>{let{listingKey:s}=e;return t.listings.listingOrder.identifiers[s]||[]},d=(t,e)=>{let{listingKey:s}=e;return t.listings.listingOrder.loadMore[s]},c=t=>{const e=t.search.searchQuery;if(!e)return r;const s=t.search.typeahead.idsByQuery[e.toLowerCase()];if(!s)return r;const n=[];return s.forEach(e=>{n.push(t.search.typeahead.models[e])}),n},a=t=>t.search.typeahead.idsByQuery,u=t=>{const e=t.listings.activeKey;return t.search.viewTreatment[e]},l=t=>{const e=t.listings.activeKey;if(e)return t.searchDiscoveryUnits.headerContent[e]},b=(t,e)=>e?t.search.relatedQueries[e.toLowerCase()]:r},"./src/reddit/selectors/seo/linksModule.ts":function(t,e,s){"use strict";s.d(e,"a",(function(){return i})),s.d(e,"b",(function(){return c})),s.d(e,"c",(function(){return a}));s("./node_modules/core-js/modules/es6.regexp.split.js");var r=s("./node_modules/reselect/es/index.js"),n=s("./src/reddit/selectors/user.ts");const i=t=>!Object(n.J)(t)&&t.seo.linksModule.frontpage||null,o=t=>{const e=t.split("/");if("r"===e[1])return e[2]},d=Object(r.a)(i,t=>t?t.map(t=>Object.assign(Object.assign({},t),{links:t.links.map(t=>Object.assign(Object.assign({},t),{title:o(t.url)})).filter(t=>t.title)})):null),c=Object(r.a)(d,t=>t?t.map(t=>Object.assign(Object.assign({},t),{links:t.links.filter(t=>t.visible)})):null),a=(t,e)=>{let{subredditId:s}=e;const r=((t,e)=>{let{subredditId:s}=e;return t.seo.linksModule.subreddits&&t.seo.linksModule.subreddits[s]})(t,{subredditId:s});return r&&r.subreddits}},"./src/reddit/selectors/tags.ts":function(t,e,s){"use strict";s.d(e,"f",(function(){return u})),s.d(e,"g",(function(){return l})),s.d(e,"k",(function(){return b})),s.d(e,"h",(function(){return p})),s.d(e,"e",(function(){return O})),s.d(e,"i",(function(){return f})),s.d(e,"r",(function(){return _})),s.d(e,"D",(function(){return m})),s.d(e,"E",(function(){return g})),s.d(e,"l",(function(){return j})),s.d(e,"m",(function(){return E})),s.d(e,"o",(function(){return h})),s.d(e,"v",(function(){return I})),s.d(e,"w",(function(){return T})),s.d(e,"t",(function(){return D})),s.d(e,"b",(function(){return w})),s.d(e,"d",(function(){return R})),s.d(e,"c",(function(){return N})),s.d(e,"s",(function(){return P})),s.d(e,"n",(function(){return k})),s.d(e,"C",(function(){return v})),s.d(e,"B",(function(){return U})),s.d(e,"x",(function(){return L})),s.d(e,"a",(function(){return G})),s.d(e,"u",(function(){return F})),s.d(e,"F",(function(){return q})),s.d(e,"z",(function(){return M})),s.d(e,"A",(function(){return H})),s.d(e,"j",(function(){return Y})),s.d(e,"y",(function(){return V})),s.d(e,"G",(function(){return K})),s.d(e,"p",(function(){return W})),s.d(e,"q",(function(){return z}));s("./node_modules/core-js/modules/web.dom.iterable.js");var r=s("./node_modules/lodash/some.js"),n=s.n(r),i=s("./node_modules/lodash/values.js"),o=s.n(i),d=s("./src/lib/objectSelector/index.ts"),c=s("./src/reddit/helpers/tags/index.ts"),a=s("./src/reddit/models/Tags/index.ts");const u=t=>{const e=V(t),s=e&&e.id;return o()((t=>{const e=l(t)?x(t):D(t),s=b(t),r=e.reduce((t,e)=>(t[e.id]=Object(a.f)(e),t),{});return s.reduce((t,e)=>(e.id&&t[e.id]&&(t[e.id].selected=!0),t),r)})(t)).filter(t=>!t.selected&&t.id!==s)},l=t=>t.tags.creation.tagInput||"",b=t=>t.tags.creation.selectedOptions||[],p=t=>{const e=[];for(let s=0;s<b(t).length;s++)b(t)[s].id&&e.push(b(t)[s].id);return e||[]},O=t=>(b(t)||[]).filter(t=>!!t.displayText).map(t=>t.displayText),f=t=>{const e=[];for(let s=0;s<b(t).length;s++)b(t)[s].id||e.push(b(t)[s].displayText);return e||[]},_=t=>Object.keys(t.tags.models.globalSubredditTags).length>0,m=t=>t.tags.api.create.error||t.tags.api.deleteTag.error||t.tags.api.fetch.error||t.tags.api.update.error,g=t=>t.tags.api.create.pending||t.tags.api.deleteTag.pending||t.tags.api.fetch.pending||t.tags.api.update.pending,j=(t,e)=>{let{subredditId:s}=e;return t.tags.selected.inputByItemId[s]||""},E=(t,e)=>{let{subredditId:s}=e;return t.tags.selected.suggestedInputByItemId[s]||""},S=[],h=(t,e)=>{let{subredditId:s}=e;return n()(I(t,{subredditId:s}),t=>!!t.action)||n()(y(t,{subredditId:s}),t=>!!t.action)},I=(t,e)=>{let{subredditId:s}=e;return t.tags.selected.selectedOptions[s]||S},T=(t,e)=>{let{subredditId:s}=e;return t.tags.selected.selectedSuggestedOptions[s]||S},y=(t,e)=>{let{subredditId:s}=e;return t.tags.selected.deselectedOptions[s]||S},A={},C={},D=t=>t.tags.availableGlobalTagOrder.recommendedGlobal.map(e=>t.tags.models.globalSubredditTags[e]),w=t=>t.tags.models.globalSubredditTags,x=t=>t.tags.availableGlobalTagOrder.global.map(e=>t.tags.models.globalSubredditTags[e]),R=(t,e)=>{let{subredditId:s}=e;return t.tags.models.subredditScopedTags[s]||C},N=(t,e)=>{const s=o()(e);for(let r=0;r<s.length;r++)if(s[r].text.toLowerCase().trim()===t.toLowerCase().trim())return s[r];return null},P=(t,e)=>{let{itemId:s}=e;return t.tags.models.itemTags[s]||A},k=(t,e)=>{let{itemId:s}=e;return!!t.tags.models.itemTags[s]},v=(t,e)=>{let{itemId:s}=e;return t.tags.models.suggestedItemTags[s]||A},U=(t,e)=>{let{itemId:s}=e;return o()(v(t,{itemId:s})).filter(t=>t.isRelevant).map(t=>Object(a.e)(t,!0))},L=(t,e)=>{let{itemId:s}=e;return t.tags.models.sortedItemTags[s]||[]},G=Object(d.a)((t,e)=>{let{thingId:s,suggested:r=!1}=e;const n=M(t,{subredditId:s});return o()(((t,e)=>{let{thingId:s,suggested:r=!1}=e;const n=(r?E(t,{subredditId:s}):j(t,{subredditId:s}))?x(t):D(t),i=r?T(t,{subredditId:s}):I(t,{subredditId:s}),o=n.reduce((t,e)=>(t[e.id]=Object(a.f)(e),t),{});return i.reduce((t,e)=>(e.id&&t[e.id]&&(t[e.id].selected=!0),t),o)})(t,{thingId:s,suggested:r})).filter(t=>!t.selected&&t.id!==n)}),F=(t,e)=>{let{subredditId:s}=e;return I(t,{subredditId:s}).concat(y(t,{subredditId:s}))},q=(t,e)=>{let{subredditId:s}=e;return I(t,{subredditId:s}).filter(c.b).map(t=>({text:t.displayText,type:a.c.CLASSIFICATION}))},M=(t,e)=>{let{subredditId:s}=e;return t.tags.models.subredditPrimaryTagId[s]||null},B=(t,e)=>e&&t.tags.models.globalSubredditTags[e]||null,H=(t,e)=>{const s=M(t,e);return B(t,s)},Y=t=>t.tags.creation.selectedPrimaryTagId||null,V=t=>{const e=Y(t);return B(t,e)},K=t=>t.tags.api.updatePrimaryTag.pending,W=(t,e)=>{let{subredditId:s}=e;return Object.keys(P(t,{itemId:s})).length>0},z=t=>b(t).length>0},"./src/reddit/selectors/userFlair.ts":function(t,e,s){"use strict";s.d(e,"c",(function(){return o})),s.d(e,"a",(function(){return d})),s.d(e,"d",(function(){return c})),s.d(e,"e",(function(){return a})),s.d(e,"b",(function(){return u}));var r=s("./src/lib/objectSelector/index.ts"),n=s("./src/reddit/models/Flair/index.ts"),i=s("./src/reddit/selectors/moderatorPermissions.ts");const o=(t,e)=>{let{subredditId:s}=e;return t.userFlair[s]},d=(t,e)=>{let{subredditId:s}=e;return!t.userFlair[s]||t.userFlair[s].displaySettings.isEnabled},c=(t,e)=>{let{subredditId:s}=e;return t.userFlair[s]?t.userFlair[s].displaySettings.position:n.b.Right},a=Object(r.a)((t,e)=>{let{subredditId:s}=e;const r=o(t,{subredditId:s});if(r)return{type:n.d.UserFlair,displaySettings:r.displaySettings,permissions:r.permissions}}),u=(t,e)=>{let{subredditId:s}=e;const r=d(t,{subredditId:s}),n=a(t,{subredditId:s}),c=o(t,{subredditId:s});if(!r||!n||!c)return!1;if(c.applied)return!0;const u=Object(i.d)(t,{subredditId:s}),{canUserChange:l}=n.permissions;return!!c.templateIds.find(t=>{return!c.templates[t].modOnly||u})&&l}},"./src/reddit/selectors/widgets.ts":function(t,e,s){"use strict";s.d(e,"a",(function(){return u})),s.d(e,"k",(function(){return l})),s.d(e,"c",(function(){return b})),s.d(e,"d",(function(){return p})),s.d(e,"i",(function(){return O})),s.d(e,"e",(function(){return f})),s.d(e,"f",(function(){return _})),s.d(e,"j",(function(){return m})),s.d(e,"h",(function(){return g})),s.d(e,"g",(function(){return j})),s.d(e,"b",(function(){return E}));var r=s("./src/lib/objectSelector/index.ts"),n=s("./src/reddit/constants/posts.ts"),i=s("./src/reddit/helpers/name/index.ts"),o=s("./src/reddit/models/Widgets/index.ts"),d=s("./src/reddit/selectors/profile.ts"),c=s("./src/reddit/selectors/subreddit.ts");const a=[],u=t=>t.widgets.models,l=Object(r.a)((t,e)=>Object(o.r)(e)?t.widgets.models[e.widgetId]:Object(o.l)(e.widgetKind)),b=(t,e)=>t.widgets.idCardIds[e.subredditId],p=(t,e)=>{let s=e.subredditId;if(!s&&e.subredditName&&(s=Object(c.G)(t,e.subredditName)),s){const e=b(t,{subredditId:s});if(e)return t.widgets.models[e]}return null},O=(t,e)=>t.widgets.sidebar[e.subredditId]||[],f=(t,e)=>t.widgets.menuIds[e.subredditId],_=(t,e)=>{const s=f(t,e);return s?t.widgets.models[s]:null},m=(t,e)=>{const s=t.widgets.sidebar[e.subredditId];return Array.isArray(s)?s.reduce((e,s)=>{const r=t.widgets.models[s];return r&&e.push(r.kind),e},[]):a},g=(t,e)=>{const s=O(t,e);for(const r of s){const e=t.widgets.models[r];if("subreddit-rules"===e.kind)return e}return null},j=(t,e)=>{const s=O(t,e).map(e=>t.widgets.models[e]).filter(t=>"post-flair"===t.kind);return s.length?s:null},E=Object(r.a)((t,e)=>{if(e.type===n.a.PROFILE){const s=Object(d.j)(t,{profileName:e.name});return s?{profile:{id:s.id,name:Object(i.g)(s.name)}}:{}}const s=Object(c.B)(t,{subredditName:e.name}),r=Object(c.y)(t,{subredditName:e.name});return{subreddit:{categoryName:r?r.contentCategory:null,id:s.id,name:Object(i.g)(s.name)}}})}}]);
//# sourceMappingURL=https://www.redditstatic.com/desktop2x/Governance~Reddit~reddit-components-ClassicPost~reddit-components-CompactPost~reddit-components-Larg~9453fc9d.49ef8421d983dada2f2e.js.map

}
/*
     FILE ARCHIVED ON 01:43:39 Dec 01, 2020 AND RETRIEVED FROM THE
     INTERNET ARCHIVE ON 00:50:39 Feb 20, 2024.
     JAVASCRIPT APPENDED BY WAYBACK MACHINE, COPYRIGHT INTERNET ARCHIVE.

     ALL OTHER CONTENT MAY ALSO BE PROTECTED BY COPYRIGHT (17 U.S.C.
     SECTION 108(a)(3)).
*/
/*
playback timings (ms):
  exclusion.robots: 0.094
  exclusion.robots.policy: 0.08
  cdx.remote: 0.174
  esindex: 0.012
  LoadShardBlock: 181.702 (6)
  PetaboxLoader3.datanode: 221.433 (8)
  load_resource: 173.957 (2)
  PetaboxLoader3.resolve: 80.696 (2)
*/