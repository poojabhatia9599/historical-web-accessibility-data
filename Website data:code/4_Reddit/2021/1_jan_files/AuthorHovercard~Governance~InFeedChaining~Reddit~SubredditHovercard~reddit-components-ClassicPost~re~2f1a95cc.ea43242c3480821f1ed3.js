var _____WB$wombat$assign$function_____ = function(name) {return (self._wb_wombat && self._wb_wombat.local_init && self._wb_wombat.local_init(name)) || self[name]; };
if (!self.__WB_pmw) { self.__WB_pmw = function(obj) { this.__WB_source = obj; return this; } }
{
  let window = _____WB$wombat$assign$function_____("window");
  let self = _____WB$wombat$assign$function_____("self");
  let document = _____WB$wombat$assign$function_____("document");
  let location = _____WB$wombat$assign$function_____("location");
  let top = _____WB$wombat$assign$function_____("top");
  let parent = _____WB$wombat$assign$function_____("parent");
  let frames = _____WB$wombat$assign$function_____("frames");
  let opener = _____WB$wombat$assign$function_____("opener");

(window.__LOADABLE_LOADED_CHUNKS__=window.__LOADABLE_LOADED_CHUNKS__||[]).push([["AuthorHovercard~Governance~InFeedChaining~Reddit~SubredditHovercard~reddit-components-ClassicPost~re~2f1a95cc"],{"./src/graphql/operations/ClaimAwardOffer.json":function(e){e.exports=JSON.parse('{"id":"7264b2ee2ded"}')},"./src/graphql/operations/FetchSpecialEvents.json":function(e){e.exports=JSON.parse('{"id":"c256825faee4"}')},"./src/graphql/operations/GildComment.json":function(e){e.exports=JSON.parse('{"id":"c25f21e6351f"}')},"./src/graphql/operations/GildPost.json":function(e){e.exports=JSON.parse('{"id":"496275fd4bb6"}')},"./src/graphql/operations/ModeratedSubreddits.json":function(e){e.exports=JSON.parse('{"id":"db5cbe68b636"}')},"./src/graphql/operations/RedditorMultireddits.json":function(e){e.exports=JSON.parse('{"id":"3d04e2bb92b5"}')},"./src/graphql/operations/SubredditCoins.json":function(e){e.exports=JSON.parse('{"id":"a82ef253ed10"}')},"./src/reddit/actions/gold/econPurchase.ts":function(e,t,r){"use strict";r.d(t,"a",(function(){return u}));var n=r("./src/lib/initializeClient/installReducer.ts"),a=r("./src/reddit/reducers/features/econPurchase/index.ts"),s=r("./src/lib/makeActionCreator/index.ts"),i=r("./src/graphql/operations/SubredditCoins.json"),o=r("./src/lib/makeGqlRequest/index.ts");var d=r("./src/reddit/featureFlags/subredditPoints.ts"),c=r("./src/reddit/actions/gold/constants.ts");Object(n.a)({features:{econPurchase:a.a}});const l=Object(s.a)(c.ib),u=(e,t,r)=>async(n,a,s)=>{let{gqlContext:c}=s;var u,b;if(!d.a.has(t.toLowerCase()))return;if(void 0!==a().features.econPurchase.subredditLockedCoins[e]&&!(null==r?void 0:r.force))return;const p=await((e,t)=>Object(o.a)(e,Object.assign(Object.assign({},i),{variables:{subreddit:t}})))(c(),e);if(p.ok){const t=p.body;n(l({subredditId:e,amount:(null===(b=null===(u=t.data.subredditInfoById)||void 0===u?void 0:u.userCoinsInSubreddit)||void 0===b?void 0:b.amount)||0}))}}},"./src/reddit/actions/gold/gild.ts":function(e,t,r){"use strict";r.r(t),r.d(t,"setIsAnonymous",(function(){return V})),r.d(t,"updateMessage",(function(){return W})),r.d(t,"gildGqlRequested",(function(){return J})),r.d(t,"triggerLoader",(function(){return Q})),r.d(t,"gildPending",(function(){return X})),r.d(t,"gildFailed",(function(){return ee})),r.d(t,"gildSuccessful",(function(){return ne})),r.d(t,"awardKarmaUpdated",(function(){return ae}));var n=r("./node_modules/fbt/lib/FbtPublic.js"),a=r("./src/lib/makeActionCreator/index.ts"),s=r("./src/lib/postParentMessage/index.ts"),i=r("./src/reddit/actions/gold/communityAwards.ts"),o=r("./src/reddit/actions/goldPurchaseModals/coinPurchaseModal.ts"),d=r("./src/reddit/actions/goldPurchaseModals/purchaseCatalog.ts"),c=r("./src/reddit/actions/modal.ts"),l=r("./src/reddit/actions/toaster.ts"),u=r("./node_modules/react/index.js"),b=r.n(u),p=r("./src/reddit/models/Gold/Award.ts"),_=r("./src/reddit/components/Gold/AwardKarmaToastMessage/index.m.less"),m=r.n(_);const{fbt:O}=r("./node_modules/fbt/lib/FbtPublic.js"),f=e=>O._("Sent! You earned {=awarder karma}",[O._param("=awarder karma",b.a.createElement("a",{className:m.a.karmaLink,href:p.a,target:"_blank",rel:"noopener noreferrer"},O._({"*":"{awarder karma} awarder karma",_1:"1 awarder karma"},[O._plural(e.awarderKarmaReceived,"awarder karma")],{hk:"2Llmz0"})))],{hk:"3ItXUT"});var g=r("./src/reddit/constants/modals.ts"),h=r("./src/reddit/models/Gold/Coins/index.ts"),j=r("./src/reddit/models/Post/index.ts"),E=r("./src/reddit/models/Toast/index.ts"),w=r("./src/reddit/models/User/index.ts"),y=r("./src/reddit/selectors/comments.ts"),A=r("./src/reddit/selectors/communityAwards.ts"),P=r("./src/reddit/selectors/experiments/econAwardKarma.ts"),I=r("./src/reddit/selectors/gild.ts"),C=r("./src/reddit/selectors/gold/awardIcon.ts"),R=r("./src/reddit/selectors/gold/econPurchase.ts"),x=r("./src/reddit/selectors/gold/purchaseCatalog.ts"),v=r("./src/reddit/selectors/posts.ts"),D=r("./src/reddit/selectors/subreddit.ts"),S=r("./src/reddit/selectors/user.ts"),k=r("./src/graphql/operations/GildComment.json"),T=r("./src/graphql/operations/GildPost.json"),L=r("./src/lib/makeGqlRequest/index.ts"),N=r("./src/reddit/helpers/addRedesignIdentifier/index.ts");const M=(e,t,r)=>Object(L.a)(e,Object.assign(Object.assign({},T),{variables:t}),{query:r?{}:Object(N.b)()}),G=(e,t,r)=>Object(L.a)(e,Object.assign(Object.assign({},k),{variables:t}),{query:r?{}:Object(N.b)()});var U=r("./src/reddit/helpers/awards/getAwardItemId.ts"),F=r("./src/reddit/helpers/awards/message.ts"),q=r("./src/reddit/helpers/correlationIdTracker.ts"),H=r("./src/reddit/helpers/isPost.ts"),K=r("./src/reddit/helpers/trackers/gild.ts"),Y=r("./src/telemetry/index.ts"),B=r("./src/reddit/actions/gold/constants.ts"),z=r("./src/reddit/actions/gold/econPurchase.ts");const V=Object(a.a)(B.s),W=Object(a.a)(B.w),J=(e,t)=>async(r,a,s)=>{let{gqlContext:i}=s;const o=a().gild,{isOldReddit:d,isLivestream:c}=t;r(X());try{const t={gildingTypeId:o.selectedAward.id,isAnonymous:o.isAnonymous,isGildFunded:!1,message:Object(F.d)(o.message,o.selectedAward,c),nodeId:e},a=Object(H.a)(e)?M:G,s=await a(i(),{input:t},d);let l=!1,u=null,b=null;if(s.ok){const e=s.body;l=e.data.gild.ok,u=e.data.gild.fieldErrors,b=e.data.gild.errors}if(l){const t=s.body,{gild:n}=t.data,a=Object(H.a)(e)?s.body.data.gild.postInfo:s.body.data.gild.comment,{awardings:i,treatmentTags:d}=a;await r(ne({awardId:o.selectedAward.id,awardings:i,awardKarmaReceived:n.awardKarmaReceived,coins:n.coins,id:e,subredditCoins:n.subredditCoins,treatmentTags:d}))}else{const e=u&&u[0]&&u[0].message,t=b&&b[0]&&b[0].message,a=e||t||n.fbt._("An unknown error occurred",null,{hk:"2oAbwZ"});await r(ee(a))}}catch(l){const e=l,t=e&&e.message||n.fbt._("An unknown error occurred",null,{hk:"2oAbwZ"});await r(ee(t))}finally{Object(q.b)(q.a.GildingFlow)}},Q=Object(a.a)(B.v),Z=Object(a.a)(B.r),X=()=>async(e,t)=>{e(Z()),window.setTimeout(()=>{t().gild.api.pending&&e(Q())},2e3)},$=Object(a.a)(B.q),ee=e=>async(t,r)=>{await t($(e)),t(Object(l.e)({kind:E.b.Error,duration:l.a,text:e}))},te=Object(a.a)(B.t),re=(e,t)=>{const{id:r}=t,n=Object(H.a)(r)?Object(v.O)(e,{postId:r}):Object(y.o)(e,{commentId:r}),a=Object(S.i)(e),s=e.gild,{isAnonymous:i}=s,o=!i&&a&&(a.username||a.displayText)?a.username||a.displayText:void 0,d=n?n.author:void 0,c=Object(D.J)(e,{thingId:r});return te(Object.assign(Object.assign({},t),{gilder:o,gildee:d,subredditId:c&&c.id}))},ne=e=>async(t,r)=>{const a=r(),{awardId:u,id:b}=e,_=Object(A.a)(a,u),m=Object(P.a)(a),O=e.awardKarmaReceived,y=Object(S.i)(a),k=Object(I.b)(a)||Object(q.d)(q.a.GildingFlow,!1);if(Object(I.h)(a)){const e="success.gild",t={},r=Object(C.a)(a,{award:_,minSize:32,postOrCommentId:b});t.awardId=u,t.awardIcon=r,Object(s.a)({type:e,data:t})}if(_.awardType===p.f.Moderator&&void 0===e.subredditCoins){const t=Object(D.J)(a,{thingId:b}),r=t&&Object(D.C)(a,{subredditName:t.name});r&&(e.subredditCoins=r-_.coinPrice)}if(t(re(a,e)),y&&m){const e=y.awarderKarma+O,r=Object(w.e)(y);t(ae({userName:r,awarderKarma:e}))}(a.posts.instances[b]||[]).forEach(r=>{t(re(a,Object.assign(Object.assign({},e),{id:r})))});const T=Object(H.a)(b)?n.fbt._("Success! You have given this post the {awardName} Award",[n.fbt._param("awardName",_.name)],{hk:"1Ndi4Z"}):n.fbt._("Success! You have given this comment the {awardName} Award",[n.fbt._param("awardName",_.name)],{hk:"2sIK9Y"}),L=_.coinPrice;m?Object(Y.a)(Object(K.viewKarmaSuccessEvent)({award:_,awarderKarmaEarned:O,awardeeKarmaEarned:0,numberCoins:L,thingId:b})(a)):Object(Y.a)(Object(K.viewSuccessAwardEvent)(b,L,_)(a)),t(Object(c.g)(g.a.GOLD_GILD_MODAL));const N=Object(C.a)(a,{award:_,minSize:64,postOrCommentId:b});t(Object(l.e)({customIconAsset:N,kind:E.b.SuccessAward,text:m&&O>0?f({awarderKarmaReceived:O}):T})),setTimeout(()=>{const e=Object(U.a)(u,b),t=document.getElementById(e);t&&t.dispatchEvent(new Event("awardAdded"))},10);const M=Date.now();await t(Object(d.b)(k));const G=Date.now()-M;if(L>0){const e=Object(x.f)(r()).filter(e=>h.a.has(e.dealInfo.type));if(e.length){const r=Math.max(900-G,10),n=Math.max(300-G,10),s=Object(H.a)(b)&&Object(j.n)(Object(v.O)(a,{postId:b}));setTimeout(()=>t(Object(o.e)({correlationId:k,packageId:e[0].mobileId})),s?r:n)}}const F=Object(D.J)(a,{thingId:b});if(F&&Object(R.a)(a,{subredditId:F.id})&&t(Object(z.a)(F.id,F.name,{force:!0})),0===L&&F){t(Object(i.a)(F.id,b,void 0,!0));const e=399,n=Object(x.d)(r()).reduce((t,r)=>{const n=Math.abs(r.pennies-e);return(!t||n<t.priceDelta)&&(t={packageId:r.mobileId,priceDelta:n}),t},null);n&&t(Object(o.b)({correlationId:k,packageId:n.packageId}))}},ae=Object(a.a)(B.a)},"./src/reddit/actions/goldPurchaseModals/coinPurchaseModal.ts":function(e,t,r){"use strict";r.d(t,"c",(function(){return I})),r.d(t,"a",(function(){return C})),r.d(t,"e",(function(){return x})),r.d(t,"b",(function(){return D})),r.d(t,"d",(function(){return S})),r.d(t,"j",(function(){return k})),r.d(t,"i",(function(){return T})),r.d(t,"f",(function(){return L})),r.d(t,"g",(function(){return N})),r.d(t,"h",(function(){return M}));var n=r("./node_modules/fbt/lib/FbtPublic.js"),a=r("./src/lib/formatApiError/index.ts"),s=r("./src/lib/makeActionCreator/index.ts"),i=r("./src/lib/sentry/index.ts"),o=r("./src/reddit/constants/modals.ts"),d=r("./src/reddit/actions/goldPurchaseModals/payment.ts"),c=r("./src/reddit/actions/goldPurchaseModals/purchaseCatalog.ts"),l=r("./src/reddit/actions/modal.ts"),u=r("./src/reddit/actions/toaster.ts"),b=r("./src/reddit/endpoints/gold/paypalPurchases.ts"),p=r("./src/reddit/endpoints/gold/purchase.ts"),_=r("./src/reddit/helpers/correlationIdTracker.ts"),m=r("./src/reddit/helpers/r2/normalizeAwardingsFromR2.ts"),O=r("./src/reddit/models/Gold/Award.ts"),f=r("./src/reddit/models/Gold/ProductOffer.ts"),g=r("./src/reddit/models/Toast/index.ts"),h=r("./src/reddit/constants/experiments.ts"),j=r("./src/reddit/helpers/chooseVariant/index.ts");var E=r("./src/reddit/selectors/gold/purchaseCatalog.ts"),w=r("./src/reddit/selectors/goldPurchaseModals.ts"),y=r("./src/reddit/actions/goldPurchaseModals/constants.ts");const A=Object(s.a)(y.q),P=Object(s.a)(y.c),I=e=>async(t,r)=>{t(A(e)),t(Object(l.h)(o.a.ECON_COIN_PURCHASE))},C=()=>async(e,t)=>{e(P()),e(Object(l.g)(o.a.ECON_COIN_PURCHASE))},R=Object(s.a)(y.u),x=e=>{let{correlationId:t,packageId:r}=e;return async(e,n)=>{const a=n(),s=Object(E.e)(a,r);s?("new_purchaser"!==s.dealInfo.type||(e=>{const t=Object(j.c)(e,{experimentEligibilitySelector:j.a,experimentName:h.lb});return!(!t||Object(h.kd)(t))})(a))&&("repeat_purchaser"!==s.dealInfo.type||(e=>{const t=Object(j.c)(e,{experimentEligibilitySelector:j.a,experimentName:h.jb});return!(!t||Object(h.kd)(t))})(a))&&(e(R({correlationId:t,packageId:r})),e(Object(l.i)(o.a.GOLD_TARGETED_OFFER_MODAL))):i.c.captureMessage("Tried to show targeted offer, but could not find package id: ".concat(r))}},v=Object(s.a)(y.p),D=e=>{let{correlationId:t,packageId:r}=e;return async(e,n)=>{Object(E.c)(n(),r)?(e(v({correlationId:t,packageId:r})),e(Object(l.i)(o.a.ECON_COIN_PACKAGE_OFFER))):i.c.captureMessage("Tried to show coin package offer, but could not find package id: ".concat(r))}},S=(e,t,r)=>async(a,s)=>{await a(Object(c.c)(e,r));const i=s(),o=Object(E.m)(i);if(0!==o.length)a(I({correlationId:r,packageId:o[0].mobileId,thingId:t}));else{const e=Object(E.j)(i),t=n.fbt._("Unable to create purchase request.",null,{hk:"lgfDj"});a(Object(u.e)({kind:g.b.Error,duration:u.a,text:e||t}))}},k=(e,t)=>async(r,s,i)=>{let{apiContext:o}=i;const c=s(),{coins:l,pennies:u}=t,b=Object(w.q)(c)||Object(_.d)(_.a.GoldPayment,!1);let m,O;r(Object(d.stripeTokenPending)());const g=Object(w.x)(c);if(g||(m=await r(Object(d.validateAndCreateStripeToken)(e)),O=Object(w.u)(c),m))try{const e=await Object(p.e)({coins:l,context:o(),correlationId:b,offerContext:Object(f.c)(t,!1),pennies:u,rememberCard:O,savedCardId:g||void 0,token:m});if(e.error){const t=Object(a.a)(e.error,e.status);return void r(Object(d.stripeApiError)(t))}return r(Object(d.paymentCompleted)({coins:e.body.coins?e.body.coins:0,confirmed:!1})),void Object(_.b)(_.a.GoldPayment)}catch(h){const e=Object(a.a)(h);r(Object(d.stripeApiError)(e))}else{const e=n.fbt._("Looks like something went wrong validating your credit card.",null,{hk:"2OvpVH"});r(Object(d.stripeApiError)(e))}},T=(e,t,s)=>async(i,o,c)=>{let{apiContext:l}=c;const u=o(),{coins:b,pennies:g}=t,h=Object(w.q)(u)||Object(_.d)(_.a.GoldPayment,!1);let j,E;i(Object(d.stripeTokenPending)());const y=Object(w.x)(u);if(y||(j=await i(Object(d.validateAndCreateStripeToken)(e)),E=Object(w.u)(u),j))try{const{gildModalThingId:e,isAnonymous:o,message:c,selectedAward:w}=u.gild;if(!e||!w.id){const e=n.fbt._("Gilding unknown thing",null,{hk:"2Jiujp"});return void i(Object(d.stripeApiError)(e))}const A=w.id,P={gildType:A,isAnonymous:o,message:c},I=await Object(p.d)({coins:b,context:l(),correlationId:h,gildParams:P,isOldReddit:s,offerContext:Object(f.c)(t,!0),pennies:g,rememberCard:E,savedCardId:y||void 0,thingId:e,token:j});if(I.error){const e=Object(a.a)(I.error,I.status);return void i(Object(d.stripeApiError)(e))}{const{gildSuccessful:t}=await Promise.resolve().then(r.bind(null,"./src/reddit/actions/gold/gild.ts"));i(C()),i(Object(d.paymentCompleted)({confirmed:!1}));const{awarder_karma_received:n,all_awardings:a,coins:s,treatment_tags:o}=I.body;return i(t({awardKarmaReceived:n||0,awardId:A,awardings:a&&a.length?Object(m.a)(a).map(e=>({award:Object(O.h)(e),total:e.count})):[],coins:s,id:e,treatmentTags:o})),void Object(_.b)(_.a.GoldPayment)}}catch(A){const e=Object(a.a)(A);i(Object(d.stripeApiError)(e))}else{const e=n.fbt._("Looks like something went wrong validating your credit card.",null,{hk:"2OvpVH"});i(Object(d.stripeApiError)(e))}},L=e=>async(t,r,n)=>{let{apiContext:s}=n;const o=Object(_.c)(_.a.GoldPayment),{coins:c,pennies:l}=e;try{const e=await Object(b.a)({context:s(),coins:c,pennies:l,correlationId:o});if(e.error){const r=Object(a.a)(e.error);return void t(Object(d.paypalApiError)(r))}{const{order_id:t}=e.body;return t}}catch(u){i.c.captureException(u);const e=Object(a.a)(u);t(Object(d.paypalApiError)(e))}},N=(e,t)=>async(r,n,s)=>{let{apiContext:o}=s;const c=n(),l=Object(w.q)(c)||Object(_.d)(_.a.GoldPayment,!1),{coins:u,pennies:p}=t;try{const n=await Object(b.c)({context:o(),offerContext:Object(f.c)(t,!1),orderId:e,coins:u,pennies:p,correlationId:l});if(n.error){const e=Object(a.a)(n.error);return void r(Object(d.paypalApiError)(e))}{const{coins:e}=n.body;r(Object(d.paymentCompleted)({coins:e,confirmed:!0})),Object(_.b)(_.a.GoldPayment)}}catch(m){i.c.captureException(m);const e=Object(a.a)(m);r(Object(d.paypalApiError)(e))}},M=(e,t)=>async(s,o,c)=>{let{apiContext:l}=c;const u=o(),p=Object(w.q)(u)||Object(_.d)(_.a.GoldPayment,!1),{coins:g,pennies:h}=t;try{const{gildModalThingId:i,isAnonymous:o,message:c,selectedAward:j}=u.gild;if(!i||!j)return void s(Object(d.paypalApiError)(n.fbt._("Gilding unknown post or comment",null,{hk:"4DkIS3"})));const E=j.id,w=await Object(b.d)({context:l(),offerContext:Object(f.c)(t,!0),orderId:e,coins:g,pennies:h,thingId:i,awardId:E,message:c||"",isAnonymous:o,correlationId:p});if(w.error){const e=Object(a.a)(w.error);s(Object(d.paypalApiError)(e))}else{s(C());const{all_awardings:e,awarder_karma_received:t,coins:n,subreddit_coins:a,treatment_tags:o}=w.body;s(Object(d.paymentCompleted)({coins:n,confirmed:!0}));const{gildSuccessful:c}=await Promise.resolve().then(r.bind(null,"./src/reddit/actions/gold/gild.ts"));s(c({awardId:E,awardKarmaReceived:t||0,awardings:Object(m.a)(e).map(e=>({award:Object(O.h)(e),total:e.count})),coins:n,id:i,subredditCoins:a,treatmentTags:o})),Object(_.b)(_.a.GoldPayment)}}catch(j){i.c.captureException(j);const e=Object(a.a)(j);s(Object(d.paypalApiError)(e))}}},"./src/reddit/actions/goldPurchaseModals/constants.ts":function(e,t,r){"use strict";r.d(t,"a",(function(){return n})),r.d(t,"b",(function(){return a})),r.d(t,"g",(function(){return s})),r.d(t,"v",(function(){return i})),r.d(t,"w",(function(){return o})),r.d(t,"x",(function(){return d})),r.d(t,"y",(function(){return c})),r.d(t,"z",(function(){return l})),r.d(t,"A",(function(){return u})),r.d(t,"B",(function(){return b})),r.d(t,"C",(function(){return p})),r.d(t,"D",(function(){return _})),r.d(t,"E",(function(){return m})),r.d(t,"F",(function(){return O})),r.d(t,"f",(function(){return f})),r.d(t,"G",(function(){return g})),r.d(t,"H",(function(){return h})),r.d(t,"I",(function(){return j})),r.d(t,"i",(function(){return E})),r.d(t,"j",(function(){return w})),r.d(t,"k",(function(){return y})),r.d(t,"l",(function(){return A})),r.d(t,"m",(function(){return P})),r.d(t,"n",(function(){return I})),r.d(t,"o",(function(){return C})),r.d(t,"h",(function(){return R})),r.d(t,"q",(function(){return x})),r.d(t,"c",(function(){return v})),r.d(t,"u",(function(){return D})),r.d(t,"p",(function(){return S})),r.d(t,"r",(function(){return k})),r.d(t,"d",(function(){return T})),r.d(t,"s",(function(){return L})),r.d(t,"t",(function(){return N})),r.d(t,"e",(function(){return M}));const n="GOLD_PAYMENT__CARD_NAME_EMPTY",a="GOLD_PAYMENT__CARD_NAME_INPUT",s="GOLD_PAYMENT__DELETE_SAVED_CARD",i="GOLD_PAYMENT__PAYMENT_COMPLETED",o="GOLD_PAYMENT__PAYPAL_API_ERROR",d="GOLD_PAYMENT__SAVED_CARDS_PENDING",c="GOLD_PAYMENT__SAVED_CARDS_SUCCESS",l="GOLD_PAYMENT__SELECT_PAYMENT_METHOD",u="GOLD_PAYMENT__SELECT_SAVED_CARD",b="GOLD_PAYMENT__STRIPE_API_ERROR",p="GOLD_PAYMENT__STRIPE_ELEMENT_CHANGE",_="GOLD_PAYMENT__CARD_ERROR",m="GOLD_PAYMENT__STRIPE_TOKEN_PENDING",O="GOLD_PAYMENT__TOGGLE_REMEMBER_CARD",f="UPDATE_CARD_MODAL__CLOSE_UPDATE_CARD_MODAL",g="UPDATE_CARD_MODAL__UPDATE_CARD_FAILED",h="UPDATE_CARD_MODAL__UPDATE_CARD_PENDING",j="UPDATE_CARD_MODAL__UPDATE_CARD_SUCCESSFUL",E="GOLD_PURCHASE__FETCH_PURCHASE_CATALOG_ERROR",w="GOLD_PURCHASE__FETCH_PURCHASE_CATALOG_REQUESTED",y="GOLD_PURCHASE__FETCH_PURCHASE_CATALOG_SUCCESS",A="GOLD_PURCHASE__FETCH_RECOMMENDED_PACKAGE_ERROR",P="GOLD_PURCHASE__FETCH_RECOMMENDED_PACKAGE_REQUESTED",I="GOLD_PURCHASE__FETCH_RECOMMENDED_PACKAGE_SUCCESS",C="SPECIAL_EVENTS__FETCH_SPECIAL_EVENTS_SUCCESS",R="SPECIAL_EVENTS__FETCH_CLAIM_FREE_AWARDS_SUCCESS",x="COIN_PURCHASE_MODAL__OPEN_COIN_PURCHASE_MODAL",v="COIN_PURCHASE_MODAL__CLOSE_COIN_PURCHASE_MODAL",D="COIN_PURCHASE_MODAL__OPEN_TARGETED_OFFER_MODAL",S="COIN_PURCHASE_MODAL__OPEN_COIN_PACKAGE_OFFER_MODAL",k="PENNY_PURCHASE_MODAL__OPEN_PENNY_PURCHASE_MODAL",T="PENNY_PURCHASE_MODAL__CLOSE_PENNY_PURCHASE_MODAL",L="PENNY_PURCHASE_MODAL__OPEN_PENNY_PURCHASE_MODAL_TO_GILD",N="PREMIUM_PURCHASE_MODAL__OPEN_PREMIUM_PURCHASE_MODAL",M="PREMIUM_PURCHASE_MODAL__CLOSE_PREMIUM_PURCHASE_MODAL"},"./src/reddit/actions/goldPurchaseModals/payment.ts":function(e,t,r){"use strict";r.r(t),r.d(t,"selectPaymentMethod",(function(){return c})),r.d(t,"paymentCompleted",(function(){return l})),r.d(t,"cardNameInput",(function(){return u})),r.d(t,"cardNameEmpty",(function(){return b})),r.d(t,"cardElementChange",(function(){return p})),r.d(t,"stripeTokenPending",(function(){return _})),r.d(t,"stripeTokenError",(function(){return m})),r.d(t,"stripeApiError",(function(){return O})),r.d(t,"validateAndCreateStripeToken",(function(){return f})),r.d(t,"paypalApiError",(function(){return g})),r.d(t,"toggleRememberCard",(function(){return h})),r.d(t,"selectSavedCard",(function(){return j})),r.d(t,"_deleteSavedCard",(function(){return E})),r.d(t,"deleteSavedCard",(function(){return w})),r.d(t,"savedCardsPending",(function(){return y})),r.d(t,"savedCardsSuccess",(function(){return A})),r.d(t,"loadSavedCards",(function(){return P}));var n=r("./node_modules/fbt/lib/FbtPublic.js"),a=r("./src/lib/sentry/index.ts"),s=r("./src/lib/makeActionCreator/index.ts"),i=r("./src/reddit/endpoints/gold/purchase.ts"),o=r("./src/reddit/actions/goldPurchaseModals/constants.ts"),d=r("./src/reddit/selectors/goldPurchaseModals.ts");const c=Object(s.a)(o.z),l=Object(s.a)(o.v),u=Object(s.a)(o.b),b=Object(s.a)(o.a),p=Object(s.a)(o.C),_=Object(s.a)(o.E),m=Object(s.a)(o.D),O=Object(s.a)(o.B),f=e=>async(t,r)=>{const a=r(),s=Object(d.h)(a),{token:i,error:o}=await e.createToken({name:s});if(s.trim()){if(!o&&i)return i;t(m(o||void 0))}else{const e=n.fbt._("Your card’s name field is incomplete",null,{hk:"VBdRU"});t(b({message:e}))}},g=Object(s.a)(o.w),h=Object(s.a)(o.F),j=Object(s.a)(o.A),E=Object(s.a)(o.g),w=e=>async(t,r,n)=>{let{apiContext:s}=n;t(E(e));try{const t=await Object(i.a)(s(),e);if(t.error)throw new Error(t.error.type)}catch(o){a.c.captureException(o)}},y=Object(s.a)(o.x),A=Object(s.a)(o.y),P=()=>async(e,t,r)=>{let{apiContext:n}=r;e(y());try{const t=await Object(i.b)(n());if(t.error)throw new Error(t.error.type);const r=t.body.map(e=>({brand:e.brand,cardId:e.card_id,expirationMonth:e.exp_month,expirationYear:e.exp_year,last4:e.last4}));e(A(r)),r[0]&&e(j(r[0].cardId))}catch(s){a.c.captureException(s),e(A([]))}}},"./src/reddit/actions/goldPurchaseModals/purchaseCatalog.ts":function(e,t,r){"use strict";r.d(t,"b",(function(){return D})),r.d(t,"c",(function(){return L})),r.d(t,"d",(function(){return M})),r.d(t,"a",(function(){return U}));var n=r("./node_modules/fbt/lib/FbtPublic.js"),a=r("./src/lib/env/index.ts"),s=r("./src/lib/makeActionCreator/index.ts"),i=r("./src/lib/sentry/index.ts"),o=r("./src/graphql/operations/ClaimAwardOffer.json"),d=r("./src/graphql/operations/FetchSpecialEvents.json"),c=r("./src/lib/constants/index.ts"),l=r("./src/lib/makeApiRequest/index.ts"),u=r("./src/lib/makeGqlRequest/index.ts"),b=r("./src/lib/omitHeaders/index.ts"),p=r("./src/reddit/constants/headers.ts"),_=r("./src/reddit/helpers/addRedesignIdentifier/index.ts"),m=r("./src/reddit/endpoints/gold/purchase.ts");const O=e=>({baselineCoins:e.baseline_coins||e.coins,baselinePennies:e.baseline_pennies||e.pennies,bonusPct:e.bonus_pct,coins:e.coins,description:e.description,featured:e.featured,featuredLabel:e.featured_label,images:{marketing:e.images.marketing,purchaseSuccess:e.images.purchase_success},mobileId:e.mobile_id,pennies:e.pennies}),f=e=>e.map(O),g=e=>e.map(e=>{const t=O(e);return Object.assign(Object.assign({},t),{dealInfo:{type:e.deal_info.type,title:e.deal_info.title,subtitle:e.deal_info.subtitle,displayDelay:e.deal_info.display_delay}})}),h=e=>e.map(e=>({bonusPct:e.bonus_pct,description:e.description,frequency:e.frequency,frequencyDays:e.frequency_days,images:{marketing:e.images.marketing,purchaseSuccess:e.images.purchase_success},mobileId:e.mobile_id,mobilePennies:e.mobile_pennies,paypalButtonId:e.paypal_button_id,pennies:e.pennies,periodicalCoins:e.periodical_coins,signupBonusCoins:e.signup_bonus_coins})),j=e=>e?{ctaText:e.cta_text,dropdownHeaderText:e.dropdown_banner_text,dropdownHeaderBackgroundAsset:e.dropdown_banner_image_url,endsAt:e.ends_at,heroImageUrl:e.hero_image_url,heroSubtext:e.hero_subtext,heroText:e.hero_text}:null;function E(e){if(!e.ok)return e;const{active_sale:t,coin_packages:r,deals:n,premium_packages:a}=e.body,s={activeSaleConfig:j(t),coinPackages:f(r),dealCoinPackages:g(n),premiumPackages:h(a)};return Object.assign(Object.assign({},e),{body:s})}function w(e){if(!e.ok)return e;const t=e.body,r={coinPackages:f([t])};return Object.assign(Object.assign({},e),{body:r})}var y=r("./src/reddit/selectors/user.ts"),A=r("./src/reddit/actions/toaster.ts"),P=r("./src/reddit/models/Toast/index.ts"),I=r("./src/reddit/actions/post.ts"),C=r("./src/reddit/actions/goldPurchaseModals/constants.ts");const R=Object(s.a)(C.j),x=Object(s.a)(C.k),v=Object(s.a)(C.i),D=e=>async(t,r,s)=>{let{apiContext:o}=s;t(R());const d=r(),u=Object(y.J)(d);try{const r=!u,n=await(async e=>{let{context:t,correlationId:r,shouldUseCurrentOrigin:n}=e;const a="/api/v2/gold/purchase_package_details",s=n&&"undefined"!=typeof window?"".concat(window.location.origin).concat(a):"".concat(t.apiUrl).concat(a),i=Object(_.a)(s);return Object(l.a)(Object(b.a)(t,[p.a]),{method:c.eb.GET,endpoint:i,data:{correlation_id:r}}).then(m.c).then(E)})({context:o(),correlationId:e,shouldUseCurrentOrigin:r});if(!n.ok)throw new Error(n.error&&n.error.type||"Unknown error");const a=n.body;t(x(a))}catch(O){Object(a.b)()||console.error(O),i.c.captureException(O);const e=n.fbt._("There was an error fetching available products",null,{hk:"1Uvx37"});t(v(e))}},S=Object(s.a)(C.m),k=Object(s.a)(C.n),T=Object(s.a)(C.l),L=(e,t)=>async(r,s,o)=>{let{apiContext:d}=o;r(S());try{const n=await(async e=>{let{context:t,awardId:r,correlationId:n}=e;const a="".concat(t.apiUrl,"/api/v2/gold/recommended_coin_package_details"),s=Object(_.a)(a);return Object(l.a)(Object(b.a)(t,[p.a]),{method:c.eb.GET,endpoint:s,data:{correlation_id:n,intended_award:r}}).then(m.c).then(w)})({awardId:e,context:d(),correlationId:t});if(!n.ok)throw new Error(n.error&&n.error.type||"Unknown error");const a=n.body;if(!a.coinPackages||!a.coinPackages.length)throw new Error("Recommended coin packages returned empty for award id ".concat(e));r(k(a))}catch(u){Object(a.b)()||console.error(u),i.c.captureException(u);const e=n.fbt._("There was an error fetching purchasable coins package",null,{hk:"47Fxzt"});r(T(e))}},N=Object(s.a)(C.o),M=()=>async(e,t,r)=>{let{gqlContext:n}=r;try{const t=await(e=>Object(u.a)(e,Object.assign({},d)))(n());if(!t.ok)throw new Error("Got bad response in GQL call for special events: ".concat(JSON.stringify(t||{})));{const r=t.body.data.econSpecialEvents;await e(N(r))}}catch(s){Object(a.b)()||console.error(s),i.c.captureException(s)}},G=Object(s.a)(C.h),U=()=>async(e,t,r)=>{let{gqlContext:s}=r;var d,c;try{const t=await(e=>Object(u.a)(e,Object.assign(Object.assign({},o),{variables:{input:{offerId:"free_awards"}}})))(s());if(t.ok){const r=t.body.data.claimAwardOffer;if(null===(d=r.errors)||void 0===d?void 0:d.length)throw new Error(r.errors.map(e=>e.message).join(" | "));if(!(null===(c=r.awards)||void 0===c?void 0:c.length))throw new Error("Got empty award list on free award offer claim");if(!r.ok)throw new Error("Got not ok response on free award offer claim");await e(G({awards:r.awards})),e(Object(I.w)())}}catch(l){Object(a.b)()||console.error(l),e(Object(A.e)({kind:P.b.Error,text:n.fbt._("Sorry, something went wrong. Try Claiming again.",null,{hk:"FWjud"})})),i.c.captureException(l)}}},"./src/reddit/actions/pages/profilePrivate/constants.ts":function(e,t,r){"use strict";r.d(t,"h",(function(){return n})),r.d(t,"b",(function(){return a})),r.d(t,"c",(function(){return s})),r.d(t,"i",(function(){return i})),r.d(t,"a",(function(){return o})),r.d(t,"f",(function(){return d})),r.d(t,"e",(function(){return c})),r.d(t,"g",(function(){return l})),r.d(t,"d",(function(){return u}));const n=25,a="PAGE__PROFILE_PRIVATE_PENDING",s="PAGE__PROFILE_PRIVATE_MIXED_LOADED",i="PAGE__PROFILE_PRIVATE_POSTS_LOADED",o="PAGE__PROFILE_PRIVATE_FAILED",d="MORE__PROFILE_PRIVATE_PENDING",c="MORE__PROFILE_PRIVATE_MIXED_LOADED",l="MORE__PROFILE_PRIVATE_POSTS_LOADED",u="MORE__PROFILE_PRIVATE_FAILED"},"./src/reddit/actions/profile/constants.ts":function(e,t,r){"use strict";r.d(t,"k",(function(){return n})),r.d(t,"j",(function(){return a})),r.d(t,"l",(function(){return s})),r.d(t,"c",(function(){return i})),r.d(t,"b",(function(){return o})),r.d(t,"a",(function(){return d})),r.d(t,"m",(function(){return c})),r.d(t,"n",(function(){return l})),r.d(t,"f",(function(){return u})),r.d(t,"e",(function(){return b})),r.d(t,"d",(function(){return p})),r.d(t,"i",(function(){return _})),r.d(t,"h",(function(){return m})),r.d(t,"g",(function(){return O}));const n="PROFILE__PROFILE_INFO_LOADED",a="PROFILE__PROFILE_INFO_FAILED",s="PROFILE__PROFILE_MOD_HUB_PAGE_LOADED",i="PROFILE__MODERATED_SUBREDDITS_PENDING",o="PROFILE__MODERATED_SUBREDDITS_LOADED",d="PROFILE__MODERATED_SUBREDDITS_FAILED",c="PROFILE__RECEIVED_MODERATED_SUBREDDITS_MODELS",l="PROFILE__RECEIVED_MODERATED_SUBREDDITS_SUBSCRIPTIONS",u="MORE__PROFILE_GQL_MODERATED_PENDING",b="MORE__PROFILE_GQL_MODERATED_LOADED",p="MORE__PROFILE_GQL_MODERATED_FAILED",_="PROFILE__MULTIREDDITS_PENDING",m="PROFILE__MULTIREDDITS_LOADED",O="PROFILE__MULTIREDDITS_FAILED"},"./src/reddit/actions/profile/index.ts":function(e,t,r){"use strict";r.d(t,"a",(function(){return G})),r.d(t,"e",(function(){return U})),r.d(t,"d",(function(){return F})),r.d(t,"b",(function(){return q})),r.d(t,"c",(function(){return B})),r.d(t,"g",(function(){return J})),r.d(t,"f",(function(){return Q}));r("./node_modules/core-js/modules/web.dom.iterable.js");var n=r("./src/lib/makeActionCreator/index.ts"),a=r("./src/lib/constants/index.ts"),s=r("./src/reddit/actions/contentGate.ts"),i=r("./src/reddit/actions/gold/gild.ts"),o=r("./src/reddit/actions/pages/profilePrivate/constants.ts"),d=r("./src/reddit/actions/subredditModeration.ts"),c=r("./src/reddit/constants/profiles.ts"),l=r("./src/reddit/endpoints/profile/info.ts"),u=r("./src/graphql/operations/ModeratedSubreddits.json"),b=r("./src/lib/makeApiRequest/index.ts"),p=r("./src/lib/makeGqlRequest/index.ts"),_=r("./src/lib/omitHeaders/index.ts"),m=r("./src/reddit/constants/headers.ts");var O=r("./src/graphql/operations/RedditorMultireddits.json");var f=r("./src/reddit/helpers/graphql/normalizeMultiredditDataFromGql/index.ts"),g=r("./src/reddit/helpers/graphql/normalizeProfileFromGql/index.ts"),h=r("./src/reddit/helpers/graphql/normalizeSubredditModPermissions/index.ts"),j=r("./src/reddit/helpers/graphql/normalizeUserFromGql/index.ts");var E=r("./src/reddit/helpers/r2/normalizeAwardingsFromR2.ts"),w=e=>{const t=e.awardee_karma||0,r=e.awarder_karma||0,n=e.comment_karma,s=e.link_karma,i=t+r+n+s;return Object.assign({accountIcon:e.icon_img,awardedLastMonth:e.awarded_last_month?Object(E.c)(e.awarded_last_month):null,awardeeKarma:t,awarderKarma:r,commentKarma:n,created:e.created,createdUtc:e.created_utc,displayName:e.name,displayNamePrefixed:e.subreddit&&e.subreddit.display_name_prefixed,displayText:e.name,hasUserProfile:!!e.subreddit,hideFromRobots:!!e.hide_from_robots,id:"".concat(a.Cb.Account,"_").concat(e.id),isEmployee:e.is_employee,isFollowing:e.has_subscribed,isGold:e.is_gold,isAdmin:e.is_admin,isMod:e.is_mod,isNSFW:!(!e.subreddit||!e.subreddit.over_18),prefShowSnoovatar:e.pref_show_snoovatar,prefShowTwitter:e.pref_show_twitter,postKarma:s,snoovatarFullBodyAsset:e.snoovatar_img||null,totalKarma:i,url:"/user/".concat(e.name,"/"),username:e.name},e.subreddit?{profileId:e.subreddit.name}:null)},y=e=>{const t=e.awardee_karma||0,r=e.awarder_karma||0,n=e.comment_karma,a=e.link_karma,s=t+r+n+a;return{acceptChats:!1!==e.accept_chats,acceptPms:!1!==e.accept_pms,awardeeKarma:t,awarderKarma:r,commentKarma:n,hasExternalAccount:e.has_external_account,postKarma:a,prefShowTwitter:e.pref_show_twitter,publicDescription:e.subreddit?e.subreddit.public_description:"",totalKarma:s,userIsSubscriber:e.subreddit&&e.subreddit.user_is_subscriber||!1}},A=r("./src/reddit/helpers/r2/normalizeProfileSubredditFromR2/index.ts");var P=r("./src/reddit/models/User/index.ts"),I=r("./src/reddit/selectors/profile.ts"),C=r("./src/reddit/selectors/subscriptions.ts"),R=r("./src/reddit/selectors/user.ts"),x=r("./src/reddit/actions/profile/constants.ts");const v=Object(n.a)(x.k),D=Object(n.a)(x.j),S=Object(n.a)(x.l),k=Object(n.a)(x.c),T=Object(n.a)(x.b),L=Object(n.a)(x.a),N=Object(n.a)(x.m),M=Object(n.a)(x.n),G=()=>async(e,t,r)=>{let{apiContext:n}=r;const a=Object(R.i)(t());a&&a.profileId&&await e(F(Object(P.e)(a)))},U=e=>async(t,r,n)=>{let{gqlContext:a}=n;const s=await Object(l.b)(a(),e);if(s.ok){const r=s.body.data;let n=Object(h.a)(r.profileByName.modPermissions||{});const a=Object(j.a)(r.identity),i=Object(g.a)(r.profileByName);a.profileId===i.id&&(n=c.a),t(Object(d.kb)({[i.id]:n})),t(S({account:a,profile:i,profileName:e}))}},F=(e,t)=>async(r,n,i)=>{let{apiContext:o,gqlContext:d}=i;var c,u;if(e===a.A)return;const b=n();if(!!(Object(I.j)(b,{profileName:e})&&Object(I.h)(b,{profileName:e})&&Object(R.kb)(b,{userName:e}))&&!t)return;const[p,_]=await Promise.all([Object(l.c)(o(),e),Object(l.d)(d(),e)]);if(p.ok){p.body&&p.body.data&&p.body.data.is_suspended&&r(Object(s.u)({profileName:e}));const t=function(e){const{data:t}=e;return Object.assign({about:y(t),banner:t.subreddit&&t.subreddit.banner_img&&{height:t.subreddit.banner_size&&t.subreddit.banner_size[1],url:t.subreddit.banner_img,width:t.subreddit.banner_size&&t.subreddit.banner_size[0]},user:w(t),features:t.features},t.subreddit?{profile:Object(A.a)(t.subreddit,t.name)}:null)}(p.body);if(_.ok&&(null===(c=_.body.data.redditorInfoByName)||void 0===c?void 0:c.karma)){const e=null===(u=_.body.data.redditorInfoByName)||void 0===u?void 0:u.karma,r=e?{awardeeKarma:e.fromAwardsReceived,awarderKarma:e.fromAwardsGiven,commentKarma:e.fromComments,postKarma:e.fromPosts,totalKarma:e.total}:l.a;Object.assign(t.about,r),Object.assign(t.user,r)}r(v(t))}else p.error&&p.error.type===a.m&&r(Object(s.s)({profileName:e})),r(D(p.body))},q=e=>async(t,r,n)=>{let{apiContext:s}=n;const i={profileName:e};if(Object(I.a)(r(),i))return;if(Object(I.k)(r(),i))return;t(k(i));const o=await((e,t)=>Object(b.a)(Object(_.a)(e,[m.a]),{endpoint:"".concat(e.apiUrl,"/user/").concat(t,"/moderated_subreddits.json"),method:a.eb.GET,traceRequestName:"get_profile_moderated_subreddits",data:{raw_json:1}}))(s(),e);if(o.ok){const n=function(e){return e?e.map(e=>({communityIcon:e.community_icon,displayText:e.sr_display_name_prefixed,icon:{height:e.icon_size?e.icon_size[1]:0,url:e.icon_img?e.icon_img:"",width:e.icon_size?e.icon_size[0]:0},id:e.name,isNSFW:e.over_18,isQuarantined:!!e.quarantine,name:"user"===e.subreddit_type?e.sr.slice(a.Yb.length):e.sr,primaryColor:e.primary_color,subscribers:e.subscribers,title:e.title,type:e.subreddit_type,url:e.url,wls:e.wls})):[]}(o.body.data);t(T({profileName:e,data:n}));const s={},i={};if(n.forEach(e=>{("user"===e.type?i:s)[e.id]=e}),t(N({subreddits:s,profiles:i})),!Object(C.e)(r())){const e=(e=>{const t=e.filter(e=>e.user_is_subscriber);return{subredditOrder:t.filter(e=>"user"!==e.subreddit_type).map(e=>e.name),profileOrder:t.filter(e=>"user"===e.subreddit_type).map(e=>e.name)}})(o.body.data||[]);t(M(e))}}else t(L(o.body))},H=Object(n.a)(x.f),K=Object(n.a)(x.e),Y=Object(n.a)(x.d),B=e=>async(t,r,n)=>{const a=r(),s=e.toLowerCase(),{pageInfo:i}=a.profiles.moderated;if(!i[s]||!i[s].hasNextPage||!i[s].endCursor)return;t(H({profileName:s}));const d=await((e,t)=>Object(p.a)(e,Object.assign(Object.assign({},u),{variables:t})))(n.gqlContext(),{name:s,after:i[s].endCursor,first:o.h}),c=d.body.data;if(d.ok){const e=Object(g.b)(c.redditor.moderatedSubreddits);t(K(Object.assign({profileName:s},e)))}else t(Y(d.error))},z=Object(n.a)(x.i),V=Object(n.a)(x.h),W=Object(n.a)(x.g),J=(e,t)=>async(r,n,s)=>{const i=n(),d=e.toLowerCase(),c={profileName:d};if(Object(I.b)(i,c))return;if(!t&&Object(I.l)(i,c))return;const{pageInfo:l}=i.profiles.multireddits;if(t&&(!l[d]||!l[d].hasNextPage||!l[d].endCursor))return;r(z(c));const u=await((e,t)=>Object(p.a)(e,Object.assign(Object.assign({},O),{variables:t}),{traceRequestName:"get_profile_multireddits"}))(s.gqlContext(),{name:d,first:t?o.h:a.Kb,after:t?l[d].endCursor:void 0}),b=u.body.data;if(u.ok&&b.redditorInfoByName){const e=b.redditorInfoByName.multireddits.edges.map(e=>e.node),t=Object(f.b)(e);r(V(Object.assign(Object.assign(Object.assign({},c),t),{pageInfo:b.redditorInfoByName.multireddits.pageInfo,multiredditsModelsState:i.multireddits.models})))}else r(W(Object.assign(Object.assign({},c),{error:u.error})))},Q=e=>async(t,r,n)=>{var a;const s=e.toLowerCase(),o=await Object(l.d)(n.gqlContext(),s);if(o.ok&&o.body){const e=null===(a=o.body.data.redditorInfoByName)||void 0===a?void 0:a.karma;t(Object(i.awardKarmaUpdated)({awardeeKarma:(null==e?void 0:e.fromAwardsReceived)||0,awarderKarma:(null==e?void 0:e.fromAwardsGiven)||0,userName:s}))}}},"./src/reddit/components/Gold/AwardKarmaToastMessage/index.m.less":function(e,t,r){e.exports={karmaLink:"_33-F8KNeBDS4RS9mUMQdxH"}},"./src/reddit/endpoints/gold/paypalPurchases.ts":function(e,t,r){"use strict";r.d(t,"f",(function(){return c})),r.d(t,"a",(function(){return l})),r.d(t,"b",(function(){return u})),r.d(t,"c",(function(){return b})),r.d(t,"d",(function(){return p})),r.d(t,"e",(function(){return _}));var n=r("./src/lib/constants/index.ts"),a=r("./src/lib/makeApiRequest/index.ts"),s=r("./src/lib/omitHeaders/index.ts"),i=r("./src/reddit/constants/headers.ts"),o=r("./src/reddit/helpers/addRedesignIdentifier/index.ts"),d=r("./src/reddit/endpoints/gold/purchase.ts");const c=async e=>{let{buttonId:t,context:r,correlationId:c}=e;const l={button_id:t,correlation_id:c},u="".concat(r.apiUrl,"/api/v2/gold/paypal/initiate_premium_payment"),b=Object(o.a)(u);return Object(a.a)(Object(s.a)(r,[i.a]),{method:n.eb.POST,endpoint:b,data:l}).then(d.c)},l=async e=>{let{context:t,coins:r,pennies:o,correlationId:c}=e;const l={coins:r,pennies:o,correlation_id:c};return Object(a.a)(Object(s.a)(t,[i.a]),{method:n.eb.POST,endpoint:"".concat(t.apiUrl,"/api/v2/gold/paypal/create_coin_purchase_order"),data:l}).then(d.c)},u=async e=>{let{context:t,awardId:r,pennies:o,thingId:c,correlationId:l}=e;const u={award_id:r,correlation_id:l,pennies:o,thing_id:c};return Object(a.a)(Object(s.a)(t,[i.a]),{method:n.eb.POST,endpoint:"".concat(t.apiUrl,"/api/v2/gold/paypal/create_award_purchase_order"),data:u}).then(d.c)},b=async e=>{let{context:t,offerContext:r,orderId:o,coins:c,pennies:l,correlationId:u}=e;const b={offer_context:r,order_id:o,coins:c,pennies:l,correlation_id:u};return Object(a.a)(Object(s.a)(t,[i.a]),{method:n.eb.POST,endpoint:"".concat(t.apiUrl,"/api/v2/gold/paypal/execute_coin_order"),data:b}).then(d.c)},p=async e=>{let{awardId:t,context:r,coins:o,correlationId:c,isAnonymous:l,message:u,offerContext:b,orderId:p,pennies:_,thingId:m}=e;const O={award_id:t,coins:o,correlation_id:c,is_anonymous:l,message:u,offer_context:b,order_id:p,pennies:_,thing_id:m};return Object(a.a)(Object(s.a)(r,[i.a]),{method:n.eb.POST,endpoint:"".concat(r.apiUrl,"/api/v2/gold/paypal/execute_coin_with_gild_order"),data:O}).then(d.c)},_=async e=>{let{awardId:t,context:r,correlationId:o,isAnonymous:c,message:l,orderId:u,thingId:b}=e;const p={award_id:t,correlation_id:o,is_anonymous:c,message:l,order_id:u,thing_id:b};return Object(a.a)(Object(s.a)(r,[i.a]),{method:n.eb.POST,endpoint:"".concat(r.apiUrl,"/api/v2/gold/paypal/execute_award_purchase_order"),data:p}).then(d.c)}},"./src/reddit/endpoints/gold/purchase.ts":function(e,t,r){"use strict";r.d(t,"c",(function(){return l})),r.d(t,"e",(function(){return u})),r.d(t,"d",(function(){return b})),r.d(t,"f",(function(){return p})),r.d(t,"g",(function(){return _})),r.d(t,"h",(function(){return m})),r.d(t,"a",(function(){return O})),r.d(t,"b",(function(){return f}));var n=r("./src/lib/constants/index.ts"),a=r("./src/lib/makeApiRequest/index.ts"),s=r("./src/lib/omitHeaders/index.ts"),i=r("./src/reddit/constants/headers.ts"),o=r("./src/reddit/helpers/addRedesignIdentifier/index.ts"),d=r("./src/reddit/helpers/genericServerError/index.ts"),c=r("./src/reddit/helpers/r2/normalizeR2APIErrors/index.ts");const l=e=>e.ok?e.body.json&&e.body.json.errors.length?Object.assign(Object.assign({},e),{ok:!1,error:Object(c.a)(e)}):Object.assign({},e):Object.assign(Object.assign({},e),{error:e.error||Object(d.a)()}),u=async e=>{let{coins:t,context:r,correlationId:d,offerContext:c,pennies:u,rememberCard:b,token:p,savedCardId:_}=e;const m={token:p?p.id:void 0,coins:t,offer_context:c,pennies:u,remember_card:b,card_id:_,correlation_id:d},O="".concat(r.apiUrl,"/api/v2/gold/stripe/buy_coins"),f=Object(o.a)(O);return Object(a.a)(Object(s.a)(r,[i.a]),{method:n.eb.POST,endpoint:f,data:m}).then(l)},b=async e=>{let{coins:t,context:r,correlationId:d,gildParams:c,isOldReddit:u,offerContext:b,pennies:p,rememberCard:_,thingId:m,token:O,savedCardId:f}=e;const{gildType:g,isAnonymous:h,message:j}=c,E={token:O?O.id:void 0,coins:t,offer_context:b,pennies:p,thing_id:m,gild_type:g,message:j?j.trim():"",is_anonymous:h,remember_card:_,card_id:f,correlation_id:d},w="".concat(r.apiUrl,"/api/v2/gold/stripe/buy_coins_and_gild"),y=u?w:Object(o.a)(w);return Object(a.a)(Object(s.a)(r,[i.a]),{method:n.eb.POST,endpoint:y,data:E}).then(l)},p=async e=>{let{context:t,correlationId:r,gildParams:d,isOldReddit:c,pennies:u,rememberCard:b,thingId:p,token:_,savedCardId:m}=e;const{gildType:O,isAnonymous:f,message:g}=d,h={token:_?_.id:void 0,thing_id:p,award_id:O,message:g?g.trim():"",is_anonymous:f,pennies:u,remember_card:b,card_id:m,correlation_id:r},j="".concat(t.apiUrl,"/api/v2/gold/stripe/buy_award"),E=c?j:Object(o.a)(j);return Object(a.a)(Object(s.a)(t,[i.a]),{method:n.eb.POST,endpoint:E,data:h}).then(l)},_=async e=>{let{context:t,correlationId:r,pennies:d,token:c}=e;const u={token:c.id,pennies:d,correlation_id:r},b="".concat(t.apiUrl,"/api/v2/gold/stripe/buy_premium_subscription"),p=Object(o.a)(b);return Object(a.a)(Object(s.a)(t,[i.a]),{method:n.eb.POST,endpoint:p,data:u}).then(l)},m=async(e,t)=>{const r={token:t.id};return Object(a.a)(Object(s.a)(e,[i.a]),{method:n.eb.POST,endpoint:"".concat(e.apiUrl,"/api/v2/gold/stripe/update_creditcard"),data:r}).then(e=>e.ok?Object.assign({},e):Object.assign(Object.assign({},e),{error:Object(c.a)(e)}))},O=async(e,t)=>{const r={card_id:t};return Object(a.a)(Object(s.a)(e,[i.a]),{method:n.eb.POST,endpoint:"".concat(e.apiUrl,"/api/v2/gold/stripe/delete_creditcard"),data:r}).then(e=>e.ok?Object.assign({},e):Object.assign(Object.assign({},e),{error:Object(c.a)(e)}))},f=async e=>Object(a.a)(Object(s.a)(e,[i.a]),{method:n.eb.GET,endpoint:"".concat(e.apiUrl,"/api/v2/gold/stripe/creditcards")}).then(e=>e.ok?Object.assign({},e):Object.assign(Object.assign({},e),{error:Object(c.a)(e)}))},"./src/reddit/helpers/awards/message.ts":function(e,t,r){"use strict";r.d(t,"a",(function(){return n})),r.d(t,"b",(function(){return a})),r.d(t,"c",(function(){return s})),r.d(t,"d",(function(){return i}));const n=500,a=1800,s=function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return t?e.coinPrice<n?0:e.coinPrice<a?50:100:2048},i=function(e,t){let r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const n=s(t,r);return e.slice(0,n)}},"./src/reddit/helpers/genericServerError/index.ts":function(e,t,r){"use strict";var n=r("./node_modules/fbt/lib/FbtPublic.js"),a=r("./src/lib/constants/index.ts");t.a=()=>({type:a.E.SERVER_ERROR,fields:[{field:"",msg:n.fbt._("Something went wrong.",null,{hk:"RcX5A"})}]})},"./src/reddit/helpers/graphql/normalizeMultiredditDataFromGql/index.ts":function(e,t,r){"use strict";r.d(t,"b",(function(){return m}));var n=r("./node_modules/lodash/forEach.js"),a=r.n(n),s=r("./node_modules/lodash/merge.js"),i=r.n(s),o=r("./src/lib/env/index.ts"),d=r("./src/lib/sentry/index.ts"),c=r("./src/reddit/helpers/graphql/helpers.ts"),l=r("./src/reddit/helpers/graphql/normalizeProfileFromGql/index.ts"),u=r("./src/reddit/helpers/graphql/normalizeSubredditFromGql/index.ts"),b=r("./src/reddit/models/GqlTopLevelField.ts"),p=r("./src/reddit/models/Multireddit/index.ts");function _(e){const t={multireddits:{},multiredditsByUser:{},subreddits:{},profiles:{}};if(!e)return t;const{path:r}=e,n=r.toLowerCase(),a=n.endsWith("/")?n:n+"/",s={created:0,description:e.descriptionContent?e.descriptionContent.markdown:"",descriptionHtml:null,descriptionRtJson:e.descriptionContent?JSON.parse(e.descriptionContent.richtext):null,displayText:e.displayName,followerCount:e.followerCount,name:e.name,icon:e.icon,isFavorited:e.isFavorited,isFollowed:e.isFollowed,isNSFW:e.isNsfw||!1,isQuarantined:e.isQuarantined||!1,subredditCount:e.subredditCount,ownerId:e.ownerInfo.id,url:a,visibility:e.visibility&&e.visibility.toLowerCase()||p.e.Private};if(s.created=Object(c.d)(e.createdAt)/1e3,e.sources){s.subredditIds=[],s.profileIds=[];for(const{node:r}of e.sources.edges){if(r.__typename===b.a.Subreddit)s.subredditIds.push(r.id),t.subreddits[r.id]=t.subreddits[r.id]||Object(u.a)(r);else if(r.__typename===b.a.Profile)s.profileIds.push(r.id),t.profiles[r.id]=t.profiles[r.id]||Object(l.a)(r);else{const e='Unexpected Multireddit.sources node with type "'.concat(r.__typename,'"');Object(o.b)()?d.c.captureMessage(e):console.error(e)}r.isNSFW&&(s.isNSFW=!0),r.isQuarantined&&(s.isQuarantined=!0)}}return t.multireddits[a]=s,t.multiredditsByUser[e.ownerInfo.id]=[a],t}function m(e){const t={},r={},n={},s={},o=e.map(_);for(const d of o)a()(d.multiredditsByUser,(e,t)=>{r[t]=[...r[t]||[],...e]}),i()(t,d.multireddits),i()(n,d.profiles),i()(s,d.subreddits);return{multireddits:t,multiredditsByUser:r,profiles:n,subreddits:s}}t.a=_},"./src/reddit/helpers/r2/normalizeProfileSubredditFromR2/index.ts":function(e,t,r){"use strict";r("./node_modules/core-js/modules/es6.symbol.js");var n=r("./src/reddit/helpers/r2/normalizeSubredditFromR2/index.ts"),a=function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var a=0;for(n=Object.getOwnPropertySymbols(e);a<n.length;a++)t.indexOf(n[a])<0&&Object.prototype.propertyIsEnumerable.call(e,n[a])&&(r[n[a]]=e[n[a]])}return r};t.a=(e,t)=>{const r=Object(n.a)(e),{wls:s}=r,i=a(r,["wls"]);return Object.assign(Object.assign({},i),{name:t})}},"./src/reddit/models/Gold/Coins/index.ts":function(e,t,r){"use strict";r.d(t,"a",(function(){return a})),r.d(t,"c",(function(){return s})),r.d(t,"b",(function(){return i}));r("./node_modules/core-js/modules/web.dom.iterable.js");var n=r("./node_modules/fbt/lib/FbtPublic.js");const a=new Set(["low_coin_upsell"]),s=new Set(["new_purchaser","repeat_purchaser"]),i=[{prompt:()=>n.fbt._("What are coins?",null,{hk:"bD2cQ"}),answer:()=>n.fbt._("Coins are our virtual good, and you can use them to award exceptional posts or comments, giving them Silver, Gold, or Platinum. We'll be adding cool new ways to spend your coins in the future.",null,{hk:"2RS7Fb"})},{prompt:()=>n.fbt._('What is "Give Award"?',null,{hk:"Q08fJ"}),answer:()=>n.fbt._('Giving an Award, or "gilding", is a way to show appreciation for an exceptional contribution to Reddit. You can award someone by clicking on "Give Award" below their post or comment. This distinguishes it with an Award for all to see, and some even grant the honoree special bonus benefits.',null,{hk:"4fZWQ3"})},{prompt:()=>n.fbt._("What are these new Award types?",null,{hk:"2ysK1l"}),answer:()=>n.fbt._("There are now several ways to Give Awards. A Silver Award requires 100 coins, which simply marks a post or comment with a Silver Award icon. A classic Gold Award requires 500 coins and gives the recipient a week of Reddit Premium membership and 100 coins. Finally, the ultra rare Platinum Award costs 1800 coins, and gives the recipient with one month of Reddit Premium membership, which includes 700 coins for that month.",null,{hk:"Mvg07"})},{prompt:()=>n.fbt._("I bought coins, how can I tell how many I have?",null,{hk:"4a4pGf"}),answer:()=>n.fbt._("If you buy coins you will always have a balance associated with your Reddit account. You can view your balance on the top navigation bar by your username.",null,{hk:"2VWZ2s"})},{prompt:()=>n.fbt._("Can I transfer coins between Reddit accounts?",null,{hk:"1jLVez"}),answer:()=>n.fbt._("You cannot transfer your Reddit coin balance across usernames, sorry. You can offer a Gold Award to other users which will grant them 100 coins.",null,{hk:"435l4g"})},{prompt:()=>n.fbt._("Can I get coins for free?",null,{hk:"1fhxmd"}),answer:()=>n.fbt._("We may give away coins on special occasions. Stay tuned!",null,{hk:"3qKa11"})},{prompt:()=>n.fbt._("What happened to Creddits? Do those still exist?",null,{hk:"qTu5W"}),answer:()=>n.fbt._("Yes, Creddits are simply called \"coins\" now, and we've converted any existing balance at a generous exchange rate of one Creddit to 2000 coins. That's double their original monetary value as a thank you for supporting us early. Use them to award exceptional posts and comments you come across. Thanks again for your contribution to the Reddit community.",null,{hk:"3bz9Wy"})},{prompt:()=>n.fbt._("I thought Gold was the name of Reddit's subscription membership?",null,{hk:"26YDse"}),answer:()=>n.fbt._('You\'re correct, it used to also be the name of the subscription membership. However, many people confused the subscription "Reddit Gold" membership with a virtual good or coin. To make things easier to understand, we\'ve renamed the membership to "Reddit Premium", while our virtual good is called "coins".',null,{hk:"aFpGc"})}]},"./src/reddit/reducers/features/econPurchase/index.ts":function(e,t,r){"use strict";var n=r("./node_modules/redux/es/redux.js"),a=r("./src/reddit/actions/gold/constants.ts");const s={};var i=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:s,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case a.ib:{const r=t.payload;return Object.assign(Object.assign({},e),{[r.subredditId]:r.amount})}default:return e}};t.a=Object(n.c)({subredditLockedCoins:i})},"./src/reddit/selectors/experiments/econAwardKarma.ts":function(e,t,r){"use strict";r.d(t,"a",(function(){return i}));var n=r("./src/reddit/constants/experiments.ts"),a=r("./src/reddit/helpers/chooseVariant/index.ts"),s=r("./src/reddit/selectors/user.ts");const i=e=>{const t=Object(a.c)(e,{experimentEligibilitySelector:s.J,experimentName:n.hb});return!(!t||Object(n.kd)(t))}},"./src/reddit/selectors/gold/econPurchase.ts":function(e,t,r){"use strict";r.d(t,"a",(function(){return s}));var n=r("./src/lib/initializeClient/installReducer.ts"),a=r("./src/reddit/reducers/features/econPurchase/index.ts");Object(n.a)({features:{econPurchase:a.a}});const s=(e,t)=>{let{subredditId:r}=t;return r&&e.features.econPurchase.subredditLockedCoins[r]||0}}}]);
//# sourceMappingURL=https://www.redditstatic.com/desktop2x/AuthorHovercard~Governance~InFeedChaining~Reddit~SubredditHovercard~reddit-components-ClassicPost~re~2f1a95cc.ea43242c3480821f1ed3.js.map

}
/*
     FILE ARCHIVED ON 01:42:40 Jan 01, 2021 AND RETRIEVED FROM THE
     INTERNET ARCHIVE ON 03:09:47 Feb 20, 2024.
     JAVASCRIPT APPENDED BY WAYBACK MACHINE, COPYRIGHT INTERNET ARCHIVE.

     ALL OTHER CONTENT MAY ALSO BE PROTECTED BY COPYRIGHT (17 U.S.C.
     SECTION 108(a)(3)).
*/
/*
playback timings (ms):
  exclusion.robots: 0.077
  exclusion.robots.policy: 0.064
  cdx.remote: 0.107
  esindex: 0.013
  LoadShardBlock: 350.97 (6)
  PetaboxLoader3.datanode: 398.051 (8)
  load_resource: 296.954 (2)
  PetaboxLoader3.resolve: 176.02 (2)
*/