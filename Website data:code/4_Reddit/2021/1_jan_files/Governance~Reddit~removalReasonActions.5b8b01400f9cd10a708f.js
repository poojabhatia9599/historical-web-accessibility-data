var _____WB$wombat$assign$function_____ = function(name) {return (self._wb_wombat && self._wb_wombat.local_init && self._wb_wombat.local_init(name)) || self[name]; };
if (!self.__WB_pmw) { self.__WB_pmw = function(obj) { this.__WB_source = obj; return this; } }
{
  let window = _____WB$wombat$assign$function_____("window");
  let self = _____WB$wombat$assign$function_____("self");
  let document = _____WB$wombat$assign$function_____("document");
  let location = _____WB$wombat$assign$function_____("location");
  let top = _____WB$wombat$assign$function_____("top");
  let parent = _____WB$wombat$assign$function_____("parent");
  let frames = _____WB$wombat$assign$function_____("frames");
  let opener = _____WB$wombat$assign$function_____("opener");

(window.__LOADABLE_LOADED_CHUNKS__=window.__LOADABLE_LOADED_CHUNKS__||[]).push([["Governance~Reddit~removalReasonActions"],{"./src/graphql/operations/CommentToxicity.json":function(t){t.exports=JSON.parse('{"id":"445164f0825f"}')},"./src/reddit/actions/comment/index.ts":function(t,e,n){"use strict";n.d(e,"C",(function(){return ut})),n.d(e,"ib",(function(){return Ot})),n.d(e,"n",(function(){return lt})),n.d(e,"R",(function(){return pt})),n.d(e,"gb",(function(){return jt})),n.d(e,"L",(function(){return _t})),n.d(e,"Q",(function(){return Ct})),n.d(e,"X",(function(){return gt})),n.d(e,"v",(function(){return Tt})),n.d(e,"u",(function(){return Et})),n.d(e,"t",(function(){return Mt})),n.d(e,"Z",(function(){return Nt})),n.d(e,"rb",(function(){return It})),n.d(e,"T",(function(){return kt})),n.d(e,"i",(function(){return Rt})),n.d(e,"h",(function(){return Dt})),n.d(e,"d",(function(){return Pt})),n.d(e,"e",(function(){return Kt})),n.d(e,"c",(function(){return vt})),n.d(e,"b",(function(){return At})),n.d(e,"j",(function(){return Lt})),n.d(e,"m",(function(){return Ut})),n.d(e,"N",(function(){return wt})),n.d(e,"M",(function(){return Ft})),n.d(e,"W",(function(){return Wt})),n.d(e,"nb",(function(){return qt})),n.d(e,"K",(function(){return Yt})),n.d(e,"H",(function(){return Xt})),n.d(e,"cb",(function(){return Zt})),n.d(e,"pb",(function(){return zt})),n.d(e,"S",(function(){return Vt})),n.d(e,"E",(function(){return $t})),n.d(e,"G",(function(){return te})),n.d(e,"F",(function(){return ee})),n.d(e,"D",(function(){return ne})),n.d(e,"mb",(function(){return se})),n.d(e,"kb",(function(){return ce})),n.d(e,"qb",(function(){return de})),n.d(e,"tb",(function(){return ie})),n.d(e,"lb",(function(){return ue})),n.d(e,"sb",(function(){return be})),n.d(e,"jb",(function(){return Oe})),n.d(e,"Y",(function(){return le})),n.d(e,"p",(function(){return pe})),n.d(e,"o",(function(){return je})),n.d(e,"k",(function(){return fe})),n.d(e,"f",(function(){return ye})),n.d(e,"l",(function(){return _e})),n.d(e,"O",(function(){return ge})),n.d(e,"s",(function(){return Me})),n.d(e,"P",(function(){return he})),n.d(e,"ob",(function(){return Se})),n.d(e,"ab",(function(){return xe})),n.d(e,"bb",(function(){return Ne})),n.d(e,"fb",(function(){return Ie})),n.d(e,"q",(function(){return ke})),n.d(e,"I",(function(){return De})),n.d(e,"r",(function(){return Pe})),n.d(e,"A",(function(){return Ke})),n.d(e,"z",(function(){return ve})),n.d(e,"B",(function(){return Ae})),n.d(e,"g",(function(){return Le})),n.d(e,"V",(function(){return we})),n.d(e,"U",(function(){return Ge})),n.d(e,"eb",(function(){return He})),n.d(e,"x",(function(){return We})),n.d(e,"w",(function(){return qe})),n.d(e,"y",(function(){return Qe})),n.d(e,"db",(function(){return ze})),n.d(e,"hb",(function(){return Ve})),n.d(e,"a",(function(){return $e})),n.d(e,"J",(function(){return tn}));n("./node_modules/core-js/modules/web.dom.iterable.js"),n("./node_modules/core-js/modules/es6.regexp.match.js");var o=n("./src/config.ts"),s=n("./node_modules/fbt/lib/FbtPublic.js"),c=n("./src/telemetry/index.ts"),r=n("./src/lib/constants/index.ts"),a=n("./src/lib/makeActionCreator/index.ts"),d=n("./src/lib/makeCommentsPageKey/index.ts"),i=n("./src/lib/makeDraftKey/index.ts"),m=n("./src/reddit/actions/changeUsername.ts"),u=n("./src/reddit/actions/economics/helpers/async.ts"),b=n("./src/reddit/actions/login.ts"),O=n("./src/reddit/actions/modal.ts"),l=n("./src/reddit/actions/post.ts"),p=n("./src/reddit/actions/postCreation/editorContent.ts"),j=n("./src/reddit/actions/publicAccessNetwork/automute.ts"),f=n("./src/reddit/actions/shortcuts/utils.ts"),y=n("./src/reddit/actions/toaster.ts"),_=n("./src/reddit/actions/vote.ts"),C=n("./src/reddit/components/RichTextEditor/RTEState/index.tsx"),g=n("./src/reddit/constants/adEvents.ts"),T=n("./src/reddit/constants/modals.ts"),E=n("./src/lib/makeApiRequest/index.ts"),M=n("./src/lib/omitHeaders/index.ts"),h=n("./src/reddit/constants/headers.ts"),S=n("./src/reddit/helpers/addRedesignIdentifier/index.ts"),x=n("./src/reddit/models/Comment/addProfileImgParam.ts"),N=n("./src/reddit/models/RichTextJson/addEmotesAsImagesParam.ts"),I=n("./src/reddit/models/RichTextJson/addRTJParam.ts");const k=(t,e)=>Object(E.a)(Object(M.a)(t,[h.a]),{endpoint:Object(S.a)("".concat(t.apiUrl,"/api/save")),method:r.eb.POST,data:{id:e}}),R=(t,e)=>Object(E.a)(Object(M.a)(t,[h.a]),{endpoint:Object(S.a)("".concat(t.apiUrl,"/api/unsave")),method:r.eb.POST,data:{id:e}}),D=(t,e)=>Object(E.a)(Object(M.a)(t,[h.a]),{endpoint:Object(S.a)("".concat(t.apiUrl,"/api/lock")),method:r.eb.POST,data:{id:e}}),P=(t,e)=>Object(E.a)(Object(M.a)(t,[h.a]),{endpoint:Object(S.a)("".concat(t.apiUrl,"/api/unlock")),method:r.eb.POST,data:{id:e}}),K=(t,e)=>Object(E.a)(Object(M.a)(t,[h.a]),{endpoint:"".concat(t.apiUrl,"/api/ignore_reports"),method:r.eb.POST,data:{id:e}}),v=(t,e)=>Object(E.a)(Object(M.a)(t,[h.a]),{endpoint:"".concat(t.apiUrl,"/api/unignore_reports"),method:r.eb.POST,data:{id:e}});var A=n("./src/graphql/operations/CommentToxicity.json"),L=n("./src/lib/makeGqlRequest/index.ts"),U=n("./src/reddit/helpers/genericServerError/index.ts"),w=n("./src/reddit/helpers/r2/normalizeCommentFromR2/index.ts"),F=n("./src/reddit/helpers/r2/normalizeR2APIErrors/index.ts"),B=n("./src/reddit/models/PostCreationForm/index.ts");const J=(t,e,n,o)=>{let s,c;if(o===B.h.MARKDOWN)s=n.text,c=null;else{s=null;let t=null;n.rteState&&(t=C.a.toRichTextJSON(n.rteState).document),c=JSON.stringify({document:t})}return Object(L.a)(t,Object.assign(Object.assign({},A),{variables:{subredditName:e,markdown:s,richText:c}})).then(t=>!t.ok||t.body.data.isValidComment)},G=async(t,e,n,o,s)=>{const c={api_type:"json",return_rtjson:!0,thing_id:e};if(s===B.h.MARKDOWN)c.text=n.text;else{c.text=null;let t=null;n.rteState&&(t=C.a.toRichTextJSON(n.rteState).document),c.richtext_json=JSON.stringify({document:t})}return Object(E.a)(Object(M.a)(t,[h.a]),{method:r.eb.POST,endpoint:Object(S.a)(Object(N.a)(Object(I.a)("".concat(t.apiUrl,"/api/comment.json")))),data:c}).then(t=>t.ok?t.body.json?t.body.json.errors.length?Object.assign(Object.assign({},t),{ok:!1,error:Object(F.a)(t)}):Object.assign(Object.assign({},t),{body:{comment:Object(w.a)(t.body.json.data.things[0].data,o)}}):Object.assign(Object.assign({},t),{body:{comment:Object(w.a)(t.body,o)}}):Object.assign(Object.assign({},t),{error:t.error||Object(U.a)()}))};var H=n("./src/reddit/endpoints/post/index.tsx"),W=n("./src/reddit/endpoints/post/convert.ts"),q=n("./src/reddit/endpoints/publicAccessNetwork/index.ts"),Q=n("./src/reddit/featureFlags/index.ts"),Y=n("./src/reddit/helpers/commentList/index.ts"),X=n("./src/reddit/helpers/dom/index.ts"),Z=n("./src/reddit/selectors/telemetry.ts");var z=n("./src/reddit/helpers/trackers/commentsPage.ts"),V=n("./src/reddit/models/Comment/index.ts"),$=n("./src/reddit/models/Post/index.ts"),tt=n("./src/reddit/models/PostDraft/index.ts"),et=n("./src/reddit/models/RichTextJson/index.ts"),nt=n("./src/reddit/models/RichTextJson/nodeMakers.ts"),ot=n("./src/reddit/models/Toast/index.ts"),st=n("./src/reddit/models/Vote/index.ts"),ct=n("./src/reddit/selectors/comments.ts"),rt=n("./src/reddit/selectors/experiments/avatarsInComments.ts"),at=n("./src/reddit/selectors/moderatingComments.ts"),dt=n("./src/reddit/selectors/platform.ts"),it=n("./src/reddit/selectors/posts.ts"),mt=n("./src/reddit/selectors/user.ts");const ut="COMMENT__STICKIED_COMMENT_SUCCESS",bt={},Ot=Object(a.a)(ut),lt="COMMENT__MUTATED",pt=Object(a.a)(lt),jt=t=>async(e,n,o)=>{let{apiContext:c}=o;if(!Object(mt.J)(n()))return e(Object(b.i)()),void e(Object(O.k)({actionSource:O.a.Save,redirectUrl:Object(ct.n)(n(),{commentId:t})}));const r=n().comments.models[t];if(!r)return;const a=r.isSaved?R:k;if(e(pt({[t]:{isSaved:!r.isSaved}})),(await a(c(),t)).ok){const n=r.isSaved?s.fbt._("Comment unsaved successfully",null,{hk:"UGKHZ"}):s.fbt._("Comment saved successfully",null,{hk:"1BZqMx"}),o=s.fbt._("Undo",null,{hk:"46OwLP"});e(Object(y.e)({text:n,kind:ot.b.Undo,buttonText:o,buttonAction:jt(t)}))}else e(pt({[t]:{isSaved:r.isSaved}}))},ft=t=>"viewing-comment-".concat(t),yt=o.a.telemetry.commentConsumedThreshold,_t=t=>async(e,n)=>{const s=n();if(!Object(ct.o)(s,{commentId:t})||Math.random()>o.a.telemetry.commentSampleRate)return;(t=>{let{state:e,commentId:n}=t;Object(c.a)(Object.assign(Object.assign({source:"comment",action:"view",noun:"comment"},Z.defaults(e)),{profile:Z.profile(e),post:Z.post(e,n),media:Z.media(e,n),subreddit:Z.subreddit(e),comment:Z.comment(e,n)}))})({state:s,commentId:t}),c.c.start(ft(t));const r=setTimeout(()=>(t=>{let{state:e,commentId:n}=t;return Object(c.a)(Object.assign(Object.assign({source:"comment",action:"consume",noun:"comment"},Z.defaults(e)),{profile:Z.profile(e),post:Z.post(e,n),media:Z.media(e,n),subreddit:Z.subreddit(e),comment:Z.comment(e,n)}))})({state:s,commentId:t}),yt);bt[t]=r},Ct=(t,e)=>async(n,o)=>{const s=o(),r=ft(t);if(Object(ct.o)(s,{commentId:t})&&c.c.has(r)){const n=c.c.end(r);!e&&n<yt&&(clearTimeout(bt[t]),delete bt[t])}},gt=t=>async(e,n,o)=>{let{apiContext:s}=o;if(!Object(mt.J)(n()))return void e(Object(O.i)(T.a.LOGIN_MODAL_ID));const c=n().comments.models[t];if(!c)return;const r=c.isLocked?P:D;e(pt({[t]:{isLocked:!c.isLocked}})),(await r(s(),t)).ok||e(pt({[t]:{isLocked:c.isLocked}}))},Tt="COMMENT__MORECOMMENTS_PENDING",Et="COMMENT__MORECOMMENTS_LOADED",Mt="COMMENT__MORECOMMENTS_FAILED",ht=Object(a.a)(Tt),St=Object(a.a)(Et),xt=Object(a.a)(Mt),Nt=(t,e)=>async(n,s,c)=>{let{apiContext:a}=c;const d=s(),i=d.moreComments.models[e],m=d.platform.currentPage,b=m&&m.routeMatch,O=b&&b.match,{partialPostId:l}=O?O.params:null;if(!l)return;const p=Object($.r)(l);n(ht({moreCommentsId:i.id}));const j=await((t,e,n,s)=>{let c=Object(I.a)(Object(N.a)("".concat(o.a.gatewayUrl,"/desktopapi/v1/morecomments/").concat(e)));return s&&(c=Object(x.a)(c)),Object(E.a)(t,{data:n,endpoint:c,method:r.eb.POST,type:"json",traceRequestName:"more_comments"})})(a(),p,{token:i.token},Object(rt.a)(d));if(j.ok){const e=j.body,o=Object(Y.a)(e,p,d);n(St(Object.assign({key:t,moreCommentsItem:i,shouldCollapse:o},e)));const s=d.posts.models[p];s&&"subreddit"===s.belongsTo.type&&e.comments&&await n(Object(u.a)({commentIds:Object.keys(j.body.comments),postIds:[s.id],skip:["communityDetails","subscription"],subredditId:s.belongsTo.id}))}else n(xt(Object.assign({moreCommentsItem:i},j.error)))},It=Object(_.b)(Y.b,st.a.upvoted),kt=Object(_.b)(Y.b,st.a.downvoted),Rt="COMMENT__FOCUSED_TOGGLED",Dt="COMMENT__FOCUSED_SET",Pt="COMMENT__COLLAPSED_TOGGLED",Kt="COMMENT__COLLAPSED_UNSET",vt="COMMENTS__HIDDEN_TOGGLED",At="COMMENTS__HIDDEN_SET",Lt="COMMENT_FORM_FOCUS_CHANGED",Ut="COMMENT_MARKED_UNCOLLAPSED",wt=Object(a.a)(Rt),Ft=Object(a.a)(Dt),Bt=Object(a.a)(Pt),Jt=Object(a.a)(Kt),Gt=(Object(a.a)(At),Object(a.a)(vt),Object(a.a)(Lt)),Ht=Object(a.a)(Ut),Wt=t=>{let{hasFocus:e,draftKey:n}=t;return async(t,o)=>{const s=o();if(!!s.comments.drafts[n])if(Object(mt.L)(s)&&e){const o=Gt({hasFocus:e,draftKey:n});t(Object(m.f)(o))}else t(Gt({hasFocus:e,draftKey:n}))}},qt=t=>{let{commentId:e,commentsPageKey:n,scrollToAndRemeasure:o}=t;return async(t,s)=>{const c=s(),r=Object(V.g)(e),a=Object(ct.p)(c,{commentLink:r,commentsPageKey:n}),d=Object(at.b)(c,{commentId:e,commentsPageKey:n}),i=a.depth;t(Bt({commentId:e,commentsPageKey:n,isCollapsed:d})),d||0!==i||o(e,!0),Object(f.d)()}},Qt=t=>{let{commentId:e,commentsPageKey:n}=t;return async(t,o)=>{t(Jt({commentId:e,commentsPageKey:n}))}},Yt=t=>{let{commentLink:e,commentsPageKey:n,lineDepth:o,scrollToAndRemeasure:s}=t;return async(t,c)=>{const r=c(),a=Object(Y.e)(n,e,o,r),d=Object(at.b)(r,{commentId:e.id,commentsPageKey:n});t(Bt({commentId:a,commentsPageKey:n,isCollapsed:d})),0===o&&s(a,!0),Object(f.d)()}},Xt=t=>async(e,n,o)=>{let{apiContext:s}=o;const c=n(),a=c.comments.models[t],d=c.user.account?c.user.account.displayText:null;a&&d&&(e(pt({[t]:{isApproved:!0,approvedBy:d,bannedBy:null,isRemoved:!1,isSpam:!1,modNote:null,modReasonBy:null,modRemovalReason:null,numReports:0}})),(await((t,e)=>Object(E.a)(Object(M.a)(t,[h.a]),{endpoint:Object(S.a)("".concat(t.apiUrl,"/api/approve")),method:r.eb.POST,data:{id:e}}))(s(),t)).ok||e(pt({[t]:{isApproved:a.isApproved,approvedBy:null,bannedBy:a.bannedBy,isRemoved:a.isRemoved,isSpam:a.isSpam,modNote:a.modNote,modReasonBy:a.modReasonBy,modRemovalReason:a.modRemovalReason,numReports:a.numReports||null}})),Object(f.d)())},Zt=(t,e)=>async(n,o,s)=>{let{apiContext:c}=s;const a=o(),d=a.comments.models[t],i=a.user.account?a.user.account.displayText:null;d&&i&&(n(pt({[t]:{approvedBy:null,bannedBy:i,isApproved:!1,isRemoved:!e,isSpam:e}})),(await((t,e,n)=>Object(E.a)(Object(M.a)(t,[h.a]),{endpoint:Object(S.a)("".concat(t.apiUrl,"/api/remove")),method:r.eb.POST,data:{id:e,spam:n}}))(c(),t,e)).ok||n(pt({[t]:{approvedBy:d.approvedBy,bannedBy:d.bannedBy,isApproved:d.isApproved,isRemoved:d.isRemoved,isSpam:d.isSpam}})),Object(f.d)())},zt=t=>async(e,n,o)=>{let{apiContext:s}=o;const c=n().comments.models[t];if(!c)return;const r=c.ignoreReports?v:K;e(pt({[t]:{ignoreReports:!c.ignoreReports}})),(await r(s(),t)).ok||e(pt({[t]:{ignoreReports:c.ignoreReports}}))},Vt=(t,e,n)=>async(o,s,c)=>{let{apiContext:a}=c;const i=s(),m=i.comments.models[t];if(!m)return;const u=m.postId,b=i.postStickiedComments.data[u],O=r.g[e];o(pt({[t]:{distinguishType:e,isAdmin:e===r.C.ADMIN,isMod:e===r.C.MODERATOR,isStickied:!!n}})),n&&b&&b!==t&&o(pt({[b]:{isStickied:!1}})),(await((t,e,n,o)=>Object(E.a)(Object(M.a)(t,[h.a]),{endpoint:Object(S.a)("".concat(t.apiUrl,"/api/distinguish/").concat(n)),method:r.eb.POST,data:{id:e,sticky:o}}))(a(),t,O,n||null)).ok?n&&o(Ot({id:t,postId:u,commentsPageKey:Object(d.a)(u,null,Object.assign({sort:r.r.CONFIDENCE},i.platform.currentPage.queryParams))})):(o(pt({[t]:{distinguishType:m.distinguishType,isAdmin:m.isAdmin,isMod:m.isMod,isStickied:m.isStickied}})),o(pt({[b]:{isStickied:i.comments.models[b].isStickied}})))},$t="COMMENT__SUBMIT_COMMENT_PENDING",te="COMMENT__SUBMIT_REPLY_TO_POST_SUCCESS",ee="COMMENT__SUBMIT_REPLY_TO_COMMENT_SUCCESS",ne="COMMENT__SUBMIT_COMMENT_FAILURE",oe=Object(a.a)($t),se=Object(a.a)(te),ce=Object(a.a)(ee),re=Object(a.a)(ne),ae=(t,e,n,o)=>{const s=o.ok&&o.body,c=s&&s.comment&&s.comment.id;z.f(t,n,e,c)},de="Toxicity_Warning__Modal",ie=(t,e,n,o,s,c)=>async(r,a,d)=>{let{gqlContext:i}=d;const m=a(),u=Object(dt.f)(m);let b="";if(u&&(b=u.name),Q.d.enableToxicityWarning(m)){if(!(await J(i(),b,o,s)))return void r(Object(O.i)(de))}r(ue(t,e,n,o,s,c))},me=t=>t.rteState?C.a.toRichTextJSON(t.rteState):t.rtJson||t.text,ue=(t,e,n,o,c,a,d)=>async(i,m,u)=>{let{apiContext:b}=u;i(Object(O.g)(de));const p=m(),_=p.comments.submit.pending[n];if(!p.user.account||_)return;i(oe({draftKey:n,draft:o}));const C=p.user.account.displayText,T=o.commentMode;let E;if(d?(E=await Object(q.j)(b(),t,o,C),i(Object(j.a)({streamId:t,level:E.body.automuteLevel}))):E=await G(b(),t,o,C,T),E.ok){let o;o=E.body,i(se(Object.assign(Object.assign({},o),{headCommentId:Object(ct.y)(p,{commentsPageKey:e}),commentsPageKey:e,draftKey:n})));const s=Object(it.O)(m(),{postId:t});i(Object(l.u)(s,g.a.CommentSubmitted))}else{E.error&&E.error.type===r.Db&&z.g(p,me(o),t);const e=E.error&&E.error.fields&&E.error.fields[0]?E.error.fields[0].msg:s.fbt._("Something went wrong",null,{hk:"LWFS0"});i(re({draftKey:n,error:E.error})),i(Object(y.e)({duration:y.a,kind:ot.b.Error,text:e}))}ae(m(),e,c,E),a||Object(f.d)()},be=t=>async(e,n,o)=>{let{gqlContext:s}=o;const{parentCommentId:c,commentsPageKey:r,parentCommentDepth:a,draftKey:d,formData:i,editorMode:m}=t,u=n(),b=Object(dt.f)(u);let l="";if(b&&(l=b.name),Q.d.enableToxicityWarning(u)){if(!(await J(s(),l,i,m)))return void e(Object(O.i)(de))}e(Oe({commentsPageKey:r,draftKey:d,parentCommentDepth:a,parentCommentId:c,formData:i,editorMode:m}))},Oe=t=>async(e,n,o)=>{let{apiContext:s}=o;const{parentCommentId:c,commentsPageKey:a,parentCommentDepth:d,draftKey:i,formData:m,editorMode:u}=t;e(Object(O.g)(de));const b=n(),l=b.comments.submit.pending[i];if(!b.user.account||l)return;e(oe({draftKey:i,draft:m}));const p=b.user.account.displayText,j=m.commentMode,y=await G(s(),c,m,p,j);if(y.ok)e(ce(Object.assign(Object.assign({},y.body),{parentCommentId:c,commentsPageKey:a,draftKey:i,depth:d+1})));else{if(y.error&&y.error.type===r.Db){const t=Object(ct.o)(b,{commentId:c});if(!t)return;z.g(b,me(m),t.postId,c)}e(re({draftKey:i,error:y.error}))}ae(n(),a,u,y),Object(f.d)()},le=t=>async(e,n,o)=>{let{apiContext:s}=o;n().comments.models[t]&&(await((t,e)=>Object(E.a)(Object(M.a)(t,[h.a]),{endpoint:"".concat(t.apiUrl,"/api/show_comment"),method:r.eb.POST,data:{id:e}}))(s(),t)).ok&&e((t=>async(e,n,o)=>{let{apiContext:s}=o;e(Ht({commentId:t}))})(t))},pe="COMMENT__COMMENT_REPLY_FORM_OPENED",je="COMMENT__COMMENT_REPLY_FORM_CANCELLED",fe="COMMENT__COMMENT_FORM_MUTATED",ye="COMMENT__COMMENT_DRAFT_CLEARED",_e="COMMENT__COMMENT_FORM_SWITCHED_MODE",Ce=Object(a.a)(pe),ge=Object(a.a)(je),Te=Object(a.a)(fe),Ee=(Object(a.a)(ye),Object(a.a)(_e)),Me="INITIALIZE_COMMENT_EDITOR_MODE",he=(Object(a.a)(Me),(t,e,n)=>async(o,c,r)=>{let{apiContext:a}=r;const d=t===B.h.RICH_TEXT;if(!e||"object"==typeof e&&Object(et.G)(e))o(Ee({editorMode:t,draftKey:n,content:d?et.i:""})),o(Object(p.c)(t));else{o(Object(p.b)(n));const c=await Object(W.a)(a(),t,d?e:JSON.stringify(e));if(c.ok){const e=c.body.output;o(Object(p.a)(n)),o(Ee({editorMode:t,draftKey:n,content:e})),o(Object(p.c)(t))}else o(Object(p.a)(n)),o(Object(y.e)({duration:y.a,kind:ot.b.Error,text:s.fbt._("Something went wrong",null,{hk:"LWFS0"})}))}}),Se=t=>{let{commentsPageKey:e,parentCommentId:n,singleOpen:o}=t;return async(t,s)=>{const c=s(),r=Object(i.a)(tt.c.replyToComment,n);if(!Object(mt.J)(s()))return t(Object(b.i)()),void t(Object(O.k)({actionSource:O.a.Reply,redirectUrl:Object(ct.n)(s(),{commentId:n})}));const a=c.comments.replyFormOpen[e],d=a&&a[n];if((d||a&&o)&&(Object.keys(a).forEach(n=>a[n]&&t(ge({parentCommentId:n,commentsPageKey:e}))),d))return;let u="",l=null;const p=c.user.prefs.commentMode,j=Object(X.d)();if(j){const t=j.filter(t=>!!t&&10!==t.charCodeAt(0));if(p===B.h.MARKDOWN)u=t.map(t=>"> ".concat(t,"\n")).join("");else{const e=t.map(t=>nt.s(t,null)).map(t=>nt.l([t])),n=nt.s("",null),o=nt.l([n]);l={document:[nt.c(e),o]}}}const f=c.comments.drafts[r];let y;if(y=j?{commentMode:p,draftType:tt.c.replyToComment,rtJson:l,text:"".concat(u,"\n")}:f||{commentMode:p,draftType:tt.c.replyToComment,rtJson:l,text:""},Object(mt.L)(c)){const o=Ce({parentCommentId:n,commentsPageKey:e,draftKey:r,formData:y});t(Object(m.f)(o))}else t(Ce({parentCommentId:n,commentsPageKey:e,draftKey:r,formData:y}))}},xe=t=>async(e,n)=>{e(Qt(t)),e(we(t))},Ne=t=>{let{parentCommentId:e,commentsPageKey:n}=t;return async(t,o)=>{t(ge({parentCommentId:e,commentsPageKey:n})),t(Se({parentCommentId:e,commentsPageKey:n})),t(Qt({commentId:e,commentsPageKey:n}))}},Ie=(t,e)=>n=>n(Te({draftKey:t,formData:e})),ke="COMMENT__DISABLE_AUTOFOCUS",Re=Object(a.a)(ke),De=t=>e=>e(Re({draftKey:t})),Pe="COMMENT__EDIT_COMMENT_ENABLED",Ke="COMMENT__REQUEST_EDIT_PENDING",ve="COMMENT__REQUEST_EDIT_FAILURE",Ae="COMMENT__REQUEST_EDIT_SUCCESS",Le="COMMENT__COMMENT_EDIT_FORM_CANCELLED",Ue=Object(a.a)(Pe),we=t=>{let{commentId:e,commentMode:n,commentsPageKey:o,draftKey:s,text:c}=t;return async(t,r)=>{const a=r();a.user.account&&(z.c(a),t(Ue({commentId:e,commentsPageKey:o,draftKey:s,formData:{text:c,commentMode:n,rteState:null,draftType:tt.c.edit,hasFocus:!0}})))}},Fe=Object(a.a)(Ke),Be=Object(a.a)(ve),Je=Object(a.a)(Ae),Ge=Object(a.a)(Le),He=t=>{let{id:e,commentsPageKey:n,depth:o,draftKey:s,formData:c}=t;return async(t,o,a)=>{let{apiContext:d}=a;const i=o();if(!i.user.account)return;t(Fe({draftKey:s})),z.d(i);const m=i.user.account.displayText||"",u=c.commentMode,b=await(async(t,e,n,o,s,c)=>{const a={api_type:"json",return_rtjson:!0,thing_id:e};if(c===B.h.MARKDOWN)a.text=o.text;else{a.text=null;let t=null;o.rteState&&(t=C.a.toRichTextJSON(o.rteState).document),a.richtext_json=JSON.stringify({document:t})}return Object(E.a)(Object(M.a)(t,[h.a]),{endpoint:Object(S.a)(Object(I.a)(Object(N.a)("".concat(t.apiUrl,"/api/editusertext")))),method:r.eb.POST,data:a}).then(t=>t.ok?t.body.json?t.body.json.errors.length?Object.assign(Object.assign({},t),{ok:!1,error:Object(F.a)(t)}):Object.assign(Object.assign({},t),{body:{comment:Object(w.a)(t.body.json.data.things[0].data,s)}}):Object.assign(Object.assign({},t),{body:{comment:Object(w.a)(t.body,s)}}):Object.assign(Object.assign({},t),{error:t.error||Object(U.a)()}))})(d(),e,0,c,m,u);if(b.ok){const o=b.body;t(Je({commentId:e,commentsPageKey:n,draftKey:s})),t(pt({[e]:Object.assign({},o.comment)}))}else t(Be({draftKey:s,error:b.error}))}},We="COMMENT__REQUEST_DELETE_PENDING",qe="COMMENT__REQUEST_DELETE_FAILURE",Qe="COMMENT__REQUEST_DELETE_SUCCESS",Ye=Object(a.a)(We),Xe=Object(a.a)(qe),Ze=Object(a.a)(Qe),ze=(t,e)=>async(n,o,s)=>{let{apiContext:c}=s;const a=o();n(Ye({id:t})),z.a(t,a);const d=await((t,e)=>Object(E.a)(Object(M.a)(t,[h.a]),{endpoint:Object(S.a)("".concat(t.apiUrl,"/api/del")),method:r.eb.POST,data:{id:e}}).then(t=>t.ok?t.body.json&&t.body.json.errors.length?Object.assign(Object.assign({},t),{ok:!1,error:Object(F.a)(t)}):Object.assign(Object.assign({},t),{body:{}}):Object.assign(Object.assign({},t),{error:t.error||Object(U.a)()})))(c(),t);d.ok?n(Ze({id:t,postId:e})):n(Xe({id:t,error:d.error}))},Ve=t=>async(e,n,o)=>{let{apiContext:s}=o;const c=!n().comments.models[t].sendReplies;e(pt({[t]:{sendReplies:c}})),(await Object(H.q)(s(),t,c)).ok||e(pt({[t]:{sendReplies:!c}}))},$e="COMMENT__CHANGE_HIGHLIGHT_FILTER",tn=Object(a.a)($e)},"./src/reddit/actions/postCreation/editorContent.ts":function(t,e,n){"use strict";n.d(e,"b",(function(){return O})),n.d(e,"a",(function(){return l})),n.d(e,"d",(function(){return j})),n.d(e,"c",(function(){return f}));var o=n("./node_modules/fbt/lib/FbtPublic.js"),s=n("./src/lib/makeActionCreator/index.ts"),c=n("./src/reddit/actions/toaster.ts"),r=n("./src/reddit/endpoints/post/convert.ts"),a=n("./src/reddit/helpers/localStorage/index.ts"),d=n("./src/reddit/helpers/trackers/postComposer.ts"),i=n("./src/reddit/models/PostCreationForm/index.ts"),m=n("./src/reddit/models/RichTextJson/index.ts"),u=n("./src/reddit/models/Toast/index.ts"),b=n("./src/reddit/actions/postCreation/constants.ts");const O=Object(s.a)(b.D),l=Object(s.a)(b.p),p=Object(s.a)(b.N),j=(t,e,n)=>async(s,a,j)=>{let{apiContext:y}=j;d.i(a(),e);const _=e===i.h.MARKDOWN,C=e===i.h.RICH_TEXT,g=b.k;if(_&&Object(m.G)(n))return s(p({editorKey:t,editorMode:i.h.MARKDOWN,content:""})),void s(f(e));if(C&&!n)return s(p({editorKey:t,editorMode:i.h.RICH_TEXT,content:m.i})),void s(f(e));s(O(g));const T=await Object(r.a)(y(),e,_?JSON.stringify(n):n);T.ok?(s(l(g)),s(p({editorKey:t,editorMode:e,content:T.body.output})),s(f(e))):(s(l(g)),s(Object(c.e)({duration:c.a,kind:u.b.Error,text:o.fbt._("Something went wrong",null,{hk:"3UtpxU"})})))},f=t=>async(e,n)=>{const s=Object(a.k)();if(s>=3)return;const r=n().user.prefs.useMarkdown?i.h.MARKDOWN:i.h.RICH_TEXT;if(t===r)return;const d=t===i.h.MARKDOWN?o.fbt._("You can set Markdown as the default editor mode in the settings",null,{hk:"yvN18"}):o.fbt._("You can set Fancy Pants as the default editor mode in the settings",null,{hk:"4kQi5k"});e(Object(c.e)({buttonAction:async()=>{window.open("/settings/feed")},buttonText:o.fbt._("Open Settings",null,{hk:"1CKz9o"}),kind:u.b.SuccessCommunity,text:d})),Object(a.Z)(s+1)}},"./src/reddit/actions/publicAccessNetwork/automute.ts":function(t,e,n){"use strict";n.d(e,"a",(function(){return r})),n.d(e,"b",(function(){return d}));var o=n("./src/lib/makeActionCreator/index.ts"),s=n("./src/reddit/endpoints/publicAccessNetwork/index.ts"),c=n("./src/reddit/actions/publicAccessNetwork/constants.ts");const r=Object(o.a)(c.r),a=Object(o.a)(c.F),d=t=>async(e,n,o)=>{let{apiContext:c}=o;const d=await Object(s.a)(c(),t);d&&d.ok?e(r({streamId:t,level:d.body.data.auto_mute_status.level})):e(a(t))}},"./src/reddit/endpoints/post/convert.ts":function(t,e,n){"use strict";var o=n("./src/lib/constants/index.ts"),s=n("./src/lib/makeApiRequest/index.ts"),c=n("./src/lib/omitHeaders/index.ts"),r=n("./src/reddit/constants/headers.ts"),a=n("./src/reddit/helpers/addRedesignIdentifier/index.ts"),d=n("./src/reddit/models/PostCreationForm/index.ts");e.a=(t,e,n)=>{const i={output_mode:"markdown"===e?e:"rtjson"};return e===d.h.MARKDOWN?i.richtext_json=n:i.markdown_text=n,Object(s.a)(Object(c.a)(t,[r.a]),{endpoint:Object(a.a)("".concat(t.apiUrl,"/api/convert_rte_body_format")),method:o.eb.POST,data:i})}},"./src/reddit/helpers/trackers/commentsPage.ts":function(t,e,n){"use strict";n.d(e,"f",(function(){return m})),n.d(e,"g",(function(){return u})),n.d(e,"b",(function(){return b})),n.d(e,"e",(function(){return O})),n.d(e,"a",(function(){return l})),n.d(e,"c",(function(){return p})),n.d(e,"d",(function(){return j}));var o=n("./src/telemetry/index.ts"),s=n("./src/reddit/constants/tracking.ts"),c=n("./src/reddit/models/PostDraft/index.ts"),r=n("./src/reddit/selectors/comments.ts"),a=n("./src/reddit/selectors/platform.ts"),d=n("./src/reddit/selectors/telemetry.ts");const i=t=>{const e=Object(a.o)(t);return Object.assign(Object.assign({source:"comment_composer",action:s.c.CLICK},Object(d.defaults)(t)),{screen:Object(d.screen)(t),subreddit:Object(d.subreddit)(t),post:e?Object(d.post)(t,e):null,profile:Object(d.profile)(t)})},m=(t,e,n,s)=>{const c={commentId:s,commentsPageKey:n},a=s&&Object(r.k)(t,c)||0;return Object(o.a)(Object.assign(Object.assign({noun:"comment"},i(t)),{comment:s?Object(d.comment)(t,s):null,listing:Object(d.listing)(t,void 0,{depth:a}),commentComposer:{editorMode:e}}))},u=(t,e,n,s)=>{const c=i(t);return Object(o.a)(Object.assign(Object.assign({},c),{actionInfo:Object.assign(Object.assign({},c.actionInfo),{reason:"karma_rate_limit"}),source:"backend",action:"error",noun:"comment",comment:{bodyText:e,parentId:s,postId:n}}))},b=t=>Object(o.a)(Object.assign({noun:"cancel"},i(t))),O=(t,e)=>{e===c.c.replyToPost&&Object(o.a)(Object.assign({noun:"input"},i(t)))},l=(t,e)=>Object(o.a)(Object.assign(Object.assign({source:"comment",noun:"delete",action:"click"},Object(d.defaults)(e)),{screen:Object(d.screen)(e),subreddit:Object(d.subreddit)(e),post:Object(d.post)(e,t)})),p=t=>Object(o.a)(Object.assign({noun:"edit"},i(t))),j=t=>Object(o.a)(Object.assign({noun:"save_edit"},i(t)))},"./src/reddit/selectors/moderatingComments.ts":function(t,e,n){"use strict";n.d(e,"b",(function(){return o})),n.d(e,"a",(function(){return s}));const o=(t,e)=>{let{commentId:n,commentsPageKey:o}=e;if(!n)return!1;if(t.comments.collapsed[o]&&n in t.comments.collapsed[o])return!!t.comments.collapsed[o][n];const s=t.comments.models[n];return!!s&&("computedCollapsed"in s?!!s.computedCollapsed:s.collapsedBecauseCrowdControl?!t.modModeEnabled:s.collapsed)},s=(t,e)=>{let{commentId:n}=e;if(!n)return!1;const o=t.comments.models[n];return!(!o||!o.collapsedBecauseCrowdControl)&&t.modModeEnabled}}}]);
//# sourceMappingURL=https://www.redditstatic.com/desktop2x/Governance~Reddit~removalReasonActions.5b8b01400f9cd10a708f.js.map

}
/*
     FILE ARCHIVED ON 01:46:28 Jan 01, 2021 AND RETRIEVED FROM THE
     INTERNET ARCHIVE ON 03:08:29 Feb 20, 2024.
     JAVASCRIPT APPENDED BY WAYBACK MACHINE, COPYRIGHT INTERNET ARCHIVE.

     ALL OTHER CONTENT MAY ALSO BE PROTECTED BY COPYRIGHT (17 U.S.C.
     SECTION 108(a)(3)).
*/
/*
playback timings (ms):
  exclusion.robots: 0.076
  exclusion.robots.policy: 0.066
  cdx.remote: 0.099
  esindex: 0.01
  LoadShardBlock: 429.57 (6)
  PetaboxLoader3.datanode: 360.251 (8)
  load_resource: 317.14 (2)
  PetaboxLoader3.resolve: 182.01 (2)
*/