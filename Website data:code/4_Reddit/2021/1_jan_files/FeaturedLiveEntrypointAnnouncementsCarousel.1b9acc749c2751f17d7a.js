var _____WB$wombat$assign$function_____ = function(name) {return (self._wb_wombat && self._wb_wombat.local_init && self._wb_wombat.local_init(name)) || self[name]; };
if (!self.__WB_pmw) { self.__WB_pmw = function(obj) { this.__WB_source = obj; return this; } }
{
  let window = _____WB$wombat$assign$function_____("window");
  let self = _____WB$wombat$assign$function_____("self");
  let document = _____WB$wombat$assign$function_____("document");
  let location = _____WB$wombat$assign$function_____("location");
  let top = _____WB$wombat$assign$function_____("top");
  let parent = _____WB$wombat$assign$function_____("parent");
  let frames = _____WB$wombat$assign$function_____("frames");
  let opener = _____WB$wombat$assign$function_____("opener");

(window.__LOADABLE_LOADED_CHUNKS__=window.__LOADABLE_LOADED_CHUNKS__||[]).push([["FeaturedLiveEntrypointAnnouncementsCarousel"],{"./src/reddit/components/FeaturedLiveEntrypoint/AnnouncementsCarousel/index.m.less":function(e,n,t){e.exports={Container:"_3VqiDbufgl9_EiV_tk9L6u",container:"_3VqiDbufgl9_EiV_tk9L6u",Headline:"Ri-SfOqCu4V0RDdOCGIP5",headline:"Ri-SfOqCu4V0RDdOCGIP5",CloseBtn:"BpfzGt7sLyJivKvEjhQ_2",closeBtn:"BpfzGt7sLyJivKvEjhQ_2",LeftArrow:"_1gaK2hxMw53ZSTs937wMrD",leftArrow:"_1gaK2hxMw53ZSTs937wMrD",RightArrow:"_3ZpuC9jO9qer45AcW7OPyl",rightArrow:"_3ZpuC9jO9qer45AcW7OPyl",ArrowPlaceholder:"nNNmQSZ8xMuywgx-d8rou",arrowPlaceholder:"nNNmQSZ8xMuywgx-d8rou",LoadingIndicator:"_3ERp7BA69QHx5yO7JpiNpE",loadingIndicator:"_3ERp7BA69QHx5yO7JpiNpE",gradientAnimation:"_20JTwVNMZBAHbVJmjxLZMw",Carousel:"JQAdKlKJiSg11MwqYiIYh",carousel:"JQAdKlKJiSg11MwqYiIYh",AnnouncementsWrapper:"WxwLM7DpWUMxqzjI5Voo0",announcementsWrapper:"WxwLM7DpWUMxqzjI5Voo0",Announcement:"_28H8vSPbzoYJDoFfwFJnYN",announcement:"_28H8vSPbzoYJDoFfwFJnYN",Content:"uRAOo8WM1o-uLRB4A1ICG",content:"uRAOo8WM1o-uLRB4A1ICG",Title:"_2kQHCzdwbwXs8DKZ0KmhwB",title:"_2kQHCzdwbwXs8DKZ0KmhwB",Description:"_3dekbEWr8ArBpG1O1v1NGQ",description:"_3dekbEWr8ArBpG1O1v1NGQ",IconDiv:"_1gmLIgFD_banKdG2iB5aOc",iconDiv:"_1gmLIgFD_banKdG2iB5aOc",isActive:"_3i8KqqBirs9EBhAQeUrIDl",isTransitionComplete:"yCt3SeGGaSPLU9iCXZj2W",next:"_3ruGFBOaJA55DGZ9erNCnT",prev:"_Ici1ejHKQy-HPH0NpJH1",Dots:"_12W8BhV2aNoJHzrMrj6_RF",dots:"_12W8BhV2aNoJHzrMrj6_RF",Dot:"_2sCy3qeDb41KIRUTCTWlYa",dot:"_2sCy3qeDb41KIRUTCTWlYa",isSelected:"_2UhFeZMzNfxreo_iGCZ8XE",DotsPlaceholder:"_2qhjJW1EU49TAaCWKVI6RY",dotsPlaceholder:"_2qhjJW1EU49TAaCWKVI6RY"}},"./src/reddit/components/FeaturedLiveEntrypoint/AnnouncementsCarousel/index.tsx":function(e,n,t){"use strict";t.r(n);t("./node_modules/core-js/modules/es6.regexp.split.js"),t("./node_modules/core-js/modules/es6.symbol.js");var s=t("./node_modules/fbt/lib/FbtPublic.js"),o=t("./node_modules/react/index.js"),a=t.n(o),c=t("./node_modules/react-redux/es/index.js"),i=t("./src/lib/classNames/index.ts"),r=t("./src/reddit/controls/InternalLink/index.tsx"),l=t("./src/reddit/icons/svgs/Chevron/index.tsx"),d=t("./src/reddit/icons/svgs/Close/index.tsx"),u=(t("./node_modules/core-js/modules/web.dom.iterable.js"),t("./node_modules/core-js/modules/es6.array.sort.js"),t("./node_modules/js-cookie/src/js.cookie.js")),m=t.n(u),b=t("./node_modules/lodash/isEqual.js"),v=t.n(b),p=t("./src/lib/constants/index.ts"),j=t("./src/reddit/constants/cookie.ts"),O=t("./src/reddit/constants/experiments.ts"),A=t("./src/reddit/helpers/localStorage/index.ts"),x=t("./src/reddit/selectors/telemetry.ts");const h=(e,n)=>{let{id:t,title:s,description:o}=n;return n=>Object.assign({source:"announcement",action:e,noun:"announcement",liveThread:{id:t,isAnnouncement:!0},announcement:{id:t,title:"function"==typeof s?s():s,body:"function"==typeof o?o():o||""}},Object(x.defaults)(n))},_=e=>n=>Object.assign({source:"announcement",action:e,noun:"announcement"},Object(x.defaults)(n));var g=t("./src/reddit/hooks/useTracking.ts"),C=t("./src/reddit/selectors/experiments/index.ts");const E=e=>{const n=new Date;n.setMonth(n.getMonth()+1),m.a.set(j.i,e,Object.assign(Object.assign({},p.y),{expires:n}))},f=(e,n)=>t=>{if(t.experimentName){const n=e[t.experimentName.toLowerCase()];if(n&&Object(O.kd)(n.variant))return!1}return!((n[t.id]||0)>=t.maxImpressionsCount)};var w=t("./src/reddit/components/FeaturedLiveEntrypoint/AnnouncementsCarousel/index.m.less"),N=t.n(w);function I(){return(I=Object.assign||function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&(e[s]=t[s])}return e}).apply(this,arguments)}var y=function(e,n){var t={};for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&n.indexOf(s)<0&&(t[s]=e[s]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(s=Object.getOwnPropertySymbols(e);o<s.length;o++)n.indexOf(s[o])<0&&Object.prototype.propertyIsEnumerable.call(e,s[o])&&(t[s[o]]=e[s[o]])}return t};const D=a.a.memo(e=>{let{announcement:n,className:t,isActive:s,onClick:o}=e;return a.a.createElement(k,{announcement:n,tabIndex:s?0:-1,key:n.id,to:n.url,onClick:o,className:t},a.a.createElement("div",{className:N.a.Content},a.a.createElement("h3",{className:N.a.Title},n.title),a.a.createElement("p",{className:N.a.Description},n.description)),n.iconUrl&&a.a.createElement("div",{className:N.a.IconDiv,style:{backgroundImage:'url("'.concat(n.iconUrl,'")')}}))}),k=a.a.memo(e=>{var{announcement:n,children:t,to:s}=e,o=y(e,["announcement","children","to"]);const c=n.url.split("reddit.com");return c.length>1?a.a.createElement(r.a,I({to:c[1]},o),t):a.a.createElement("a",I({href:n.url},o),t)});n.default=e=>{let{announcements:n}=e;const t=Object(c.d)(e=>e.live.shouldShowAnnouncements),[r,u]=Object(o.useState)([]),[m,b]=Object(o.useState)(!t),[p,O]=Object(o.useState)(!0),[x,w]=Object(o.useState)(0);(e=>{let{announcements:n,setActiveIndex:t,isHidden:s,setIsLoading:a,setVisibleAnnouncements:i,visibleAnnouncements:r}=e;const l=Object(c.d)(C.a);Object(o.useEffect)(()=>{const e=Object(A.e)(),o=n.filter(f(l,e)).slice(0,5),c=[...o].sort((e=>(n,t)=>(e[n.id]||0)-(e[t.id]||0))(e))[0],d=o.length?j.j.Yes:j.j.No;E(d),s||v()(o.map(e=>e.id),r.map(e=>e.id))||(i(o),t(o.indexOf(c)),a(!1))},[])})({announcements:n,setActiveIndex:w,isHidden:m,setVisibleAnnouncements:u,visibleAnnouncements:r,setIsLoading:O});const{onCarouselNavigate:I,isTransitionComplete:y}=(e=>{let{activeIndex:n,visibleAnnouncements:t,setActiveIndex:s}=e;const a=Object(g.a)(),[c,i]=Object(o.useState)(!0),r=Object(o.useRef)(null);return{onCarouselNavigate:Object(o.useCallback)(e=>()=>{"next"===e&&n+1>=t.length?s(0):s("prev"===e&&n<=0?t.length-1:n+("next"===e?1:-1)),a(_("next"===e?"scroll_next":"scroll_previous")),r.current&&window.clearTimeout(r.current),i(!1),r.current=window.setTimeout(()=>{i(!0)},200)},[n,a,s,t]),isTransitionComplete:c}})({activeIndex:x,visibleAnnouncements:r,setActiveIndex:w}),k=(e=>{let{setIsHidden:n,visibleAnnouncements:t}=e;const s=Object(g.a)();return Object(o.useCallback)(()=>{n(!0),t.forEach(e=>{const{id:n,maxImpressionsCount:t}=e;Object(A.R)(n,t)}),s(_("dismiss_all")),E(j.j.No)},[t,s,n])})({visibleAnnouncements:r,setIsHidden:b}),L=(e=>{let{activeIndex:n,setActiveIndex:t,visibleAnnouncements:s}=e;const a=Object(g.a)();return Object(o.useCallback)(()=>{n<0||n>=s.length?t(0):a(h("click",s[n]))},[n,a,t,s])})({activeIndex:x,setActiveIndex:w,visibleAnnouncements:r});return(e=>{let{activeIndex:n,setActiveIndex:t,visibleAnnouncements:s}=e;const a=Object(g.a)(),i=Object(c.d)(C.a,(e,n)=>Object.keys(e).length===Object.keys(n).length);Object(o.useEffect)(()=>{if(n<0||n>=s.length)return void t(0);const e=s[n],o=Object(A.d)(e.id);a(h("view",e)),Object(A.R)(e.id,o+1);const c=Object(A.e)();s.filter(f(i,c)).length||E(j.j.No)},[n,i,a,t,s])})({activeIndex:x,setActiveIndex:w,visibleAnnouncements:r}),m?null:a.a.createElement("div",{className:N.a.Container},a.a.createElement("h2",{className:N.a.Headline},s.fbt._("Updates from reddit",null,{hk:"1R94KF"})),a.a.createElement("button",{className:N.a.CloseBtn,onClick:k},a.a.createElement(d.a,null)),a.a.createElement("div",{className:N.a.Carousel},r.length>1?a.a.createElement("button",{className:N.a.LeftArrow,onClick:I("prev")},a.a.createElement(l.a,null)):a.a.createElement("div",{className:N.a.ArrowPlaceholder}),a.a.createElement("div",{className:N.a.AnnouncementsWrapper},p?a.a.createElement("div",{className:N.a.LoadingIndicator}):r.map((e,n)=>a.a.createElement(D,{announcement:e,className:Object(i.a)(N.a.Announcement,{[N.a.isActive]:n===x,[N.a.prev]:r.length>1&&0===x&&n+1===r.length||n===x-1,[N.a.next]:r.length>1&&x+1===r.length&&0===n||n===x+1,[N.a.isTransitionComplete]:y}),isActive:n===x,key:e.id,onClick:L}))),r.length>1?a.a.createElement("button",{className:N.a.RightArrow,onClick:I("next")},a.a.createElement(l.a,null)):a.a.createElement("div",{className:N.a.ArrowPlaceholder})),r.length>1?a.a.createElement("div",{className:N.a.Dots},r.map((e,n)=>a.a.createElement("button",{onClick:()=>w(n),key:"announcement-carousel-dot-".concat(n),className:Object(i.a)(N.a.Dot,{[N.a.isSelected]:n===x})}))):a.a.createElement("div",{className:N.a.DotsPlaceholder}))}}}]);
//# sourceMappingURL=https://www.redditstatic.com/desktop2x/FeaturedLiveEntrypointAnnouncementsCarousel.1b9acc749c2751f17d7a.js.map

}
/*
     FILE ARCHIVED ON 01:57:18 Jan 01, 2021 AND RETRIEVED FROM THE
     INTERNET ARCHIVE ON 03:09:38 Feb 20, 2024.
     JAVASCRIPT APPENDED BY WAYBACK MACHINE, COPYRIGHT INTERNET ARCHIVE.

     ALL OTHER CONTENT MAY ALSO BE PROTECTED BY COPYRIGHT (17 U.S.C.
     SECTION 108(a)(3)).
*/
/*
playback timings (ms):
  exclusion.robots: 0.066
  exclusion.robots.policy: 0.056
  cdx.remote: 0.09
  esindex: 0.01
  LoadShardBlock: 126.003 (6)
  PetaboxLoader3.datanode: 147.478 (8)
  load_resource: 164.165 (2)
  PetaboxLoader3.resolve: 89.221 (2)
*/